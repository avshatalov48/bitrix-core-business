{"version":3,"file":"popup.bundle.js","sources":["../src/type/chat.js","../src/type/user.js","../src/type/users.js","../src/popup.js"],"sourcesContent":["import { Vue } from \"ui.vue\";\nimport { RestMethod, RestMethodHandler } from \"im.const\";\n\nexport const Chat =\n{\n\tprops: ['value', 'popupInstance'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tchat: {},\n\t\t\thasError: false,\n\t\t\trequestFinished: false\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tconst chatData = this.getChat(this.value);\n\t\tif (chatData)\n\t\t{\n\t\t\tthis.chat = chatData;\n\t\t\tthis.requestFinished = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.requestChatData(this.value);\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tthis.popupInstance.show();\n\t},\n\tbeforeDestroy()\n\t{\n\t\tthis.popupInstance.destroy();\n\t},\n\tmethods:\n\t{\n\t\tgetChat(dialogId)\n\t\t{\n\t\t\treturn this.$store.getters['dialogues/get'](dialogId);\n\t\t},\n\t\trequestChatData(dialogId)\n\t\t{\n\t\t\tthis.$Bitrix.RestClient.get().callMethod(RestMethod.imChatGet, {\n\t\t\t\tdialog_id: dialogId\n\t\t\t}).then(response => {\n\t\t\t\tthis.$Bitrix.Data.get('controller').executeRestAnswer(RestMethodHandler.imChatGet, response);\n\n\t\t\t\tthis.chat = this.getChat(this.value);\n\t\t\t\tthis.requestFinished = true;\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.hasError = true;\n\t\t\t\tconsole.error(error);\n\t\t\t\tthis.requestFinished = true;\n\t\t\t});\n\t\t},\n\n\t\t//events\n\t\tonOpenChat(event)\n\t\t{\n\t\t\tthis.popupInstance.destroy();\n\t\t\tBXIM.openMessenger(this.value);\n\t\t},\n\t\tonOpenHistory(event)\n\t\t{\n\t\t\tthis.popupInstance.destroy();\n\t\t\tBXIM.openHistory(this.value);\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tavatarStyles()\n\t\t{\n\t\t\tconst styles = {};\n\t\t\tif (this.emptyAvatar)\n\t\t\t{\n\t\t\t\tstyles.backgroundColor = this.chat.color;\n\t\t\t}\n\n\t\t\treturn styles;\n\t\t},\n\t\tchatAvatar()\n\t\t{\n\t\t\tif (this.emptyAvatar)\n\t\t\t{\n\t\t\t\treturn '/bitrix/js/im/images/blank.gif';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.chat.avatar;\n\t\t\t}\n\t\t},\n\t\temptyAvatar()\n\t\t{\n\t\t\treturn this.chat.avatar === '' || this.chat.avatar.indexOf('/bitrix/js/im/images/blank.gif') >= 0;\n\t\t},\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-messenger-external-data\" style=\"width: 272px; max-width: 272px; height: 100px;\">\n\t\t\t<div v-if=\"requestFinished && !hasError\">\n\t\t\t\t<div class=\"bx-messenger-external-avatar\">\n\t\t\t\t\t<div class=\"bx-messenger-panel-avatar bx-messenger-panel-avatar-chat\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t:src=\"chatAvatar\"\n\t\t\t\t\t\t\t:alt=\"chat.name\"\n\t\t\t\t\t\t\t:style=\"avatarStyles\"\n\t\t\t\t\t\t\t:class=\"[emptyAvatar ? 'bx-messenger-panel-avatar-img-default' : '', 'bx-messenger-panel-avatar-img']\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<span v-if=\"chat.extranet\" class=\"bx-messenger-panel-title\"><div class=\"bx-messenger-user-extranet\">{{ chat.name }}</div></span>\n\t\t\t\t\t<span v-else class=\"bx-messenger-panel-title\">{{ chat.name }}</span>\n\t\t\t\t\t<span class=\"bx-messenger-panel-desc\">{{ $Bitrix.Loc.getMessage('IM_VIEW_POPUP_CONTENT_GROUP_CHAT') }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-messenger-external-data-buttons\">\n\t\t\t\t<span class=\"bx-notifier-item-button bx-notifier-item-button-white\" @click=\"onOpenChat\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('IM_VIEW_POPUP_CONTENT_OPEN_CHAT') }}\n\t\t\t\t</span>\n\t\t\t\t\t<span class=\"bx-notifier-item-button bx-notifier-item-button-white\" @click=\"onOpenHistory\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('IM_VIEW_POPUP_CONTENT_OPEN_HISTORY') }}\n\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<span v-else-if=\"!requestFinished && !hasError\" class=\"bx-messenger-content-load-img\"></span>\n\t\t\t<div v-else-if=\"requestFinished && hasError\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('IM_VIEW_POPUP_CONTENT_NO_ACCESS') }}\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import { RestMethod, RestMethodHandler } from \"im.const\";\n\nexport const User = {\n\tprops: ['value', 'popupInstance'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tuser: {},\n\t\t\thasError: false,\n\t\t\trequestFinished: false\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tconst userData = this.getUser(this.value);\n\n\t\tif (userData)\n\t\t{\n\t\t\tthis.user = userData;\n\t\t\tthis.requestFinished = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.requestUserData(this.value);\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tthis.popupInstance.show();\n\t},\n\tbeforeDestroy()\n\t{\n\t\tthis.popupInstance.destroy();\n\t},\n\tmethods:\n\t{\n\t\tgetUser(userId)\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](userId);\n\t\t},\n\t\trequestUserData(userId)\n\t\t{\n\t\t\tthis.$Bitrix.RestClient.get().callMethod(RestMethod.imUserGet, {\n\t\t\t\tID: userId\n\t\t\t}).then(response => {\n\t\t\t\tthis.$Bitrix.Data.get('controller').executeRestAnswer(RestMethodHandler.imUserGet, response);\n\n\t\t\t\tthis.user = this.getUser(this.value);\n\t\t\t\tthis.requestFinished = true;\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.hasError = true;\n\t\t\t\tconsole.error(error);\n\t\t\t\tthis.requestFinished = true;\n\t\t\t});\n\t\t},\n\t\t//events\n\t\tonOpenChat(event)\n\t\t{\n\t\t\tthis.popupInstance.destroy();\n\t\t\tBXIM.openMessenger(this.value);\n\t\t},\n\t\tonOpenHistory(event)\n\t\t{\n\t\t\tthis.popupInstance.destroy();\n\t\t\tBXIM.openHistory(this.value);\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tavatarStyles()\n\t\t{\n\t\t\tconst styles = {};\n\t\t\tif (this.emptyAvatar)\n\t\t\t{\n\t\t\t\tstyles.backgroundColor = this.chat.color;\n\t\t\t}\n\n\t\t\treturn styles;\n\t\t},\n\t\tuserAvatar()\n\t\t{\n\t\t\tif (this.emptyAvatar)\n\t\t\t{\n\t\t\t\treturn '/bitrix/js/im/images/blank.gif';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.user.avatar;\n\t\t\t}\n\t\t},\n\t\temptyAvatar()\n\t\t{\n\t\t\treturn this.user.avatar === '' || this.user.avatar.indexOf('/bitrix/js/im/images/blank.gif') >= 0;\n\t\t},\n\t\tbotStyles()\n\t\t{\n\t\t\t//todo handle all the bot types im/install/js/im/im.js:5887\n\t\t\treturn 'bx-messenger-user-bot';\n\t\t},\n\t\tuserStatusText()\n\t\t{\n\t\t\t//todo remove old code\n\t\t\treturn BX.MessengerCommon.getUserStatus(this.user.id, false).statusText;\n\t\t},\n\t\tuserStatusClass()\n\t\t{\n\t\t\t//todo remove old code\n\t\t\treturn 'bx-messenger-panel-avatar-status-' + BX.MessengerCommon.getUserStatus(this.user.id, true);\n\t\t},\n\t\tuserPosition()\n\t\t{\n\t\t\t//todo remove old code\n\t\t\treturn BX.MessengerCommon.getUserPosition(this.user.id);\n\t\t},\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-messenger-external-data\" style=\"width: 272px; max-width: 272px; height: 100px;\">\n\t\t\t<div v-if=\"requestFinished && !hasError\">\n\t\t\t\t<div class=\"bx-messenger-external-avatar\">\n\t\t\t\t\t<div :class=\"[userStatusClass, 'bx-messenger-panel-avatar']\">\n\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t:src=\"userAvatar\"\n\t\t\t\t\t\t\t:style=\"avatarStyles\"\n\t\t\t\t\t\t\t:class=\"[emptyAvatar ? 'bx-messenger-panel-avatar-img-default' : '', 'bx-messenger-panel-avatar-img']\"\n\t\t\t\t\t\t\t:alt=\"user.name\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<span :title=\"userStatusText\" class=\"bx-messenger-panel-avatar-status\"></span>\n\t\t\t\t\t</div>\n\t\n\t\t\t\t\t<span v-if=\"user.extranet\" class=\"bx-messenger-panel-title\"><div class=\"bx-messenger-user-extranet\">{{ user.name }}</div></span>\n\t\t\t\t\t<span v-else-if=\"user.bot\" class=\"bx-messenger-panel-title\"><div :class=\"botStyles\">{{ user.name }}</div></span>\n\t\t\t\t\t<span v-else class=\"bx-messenger-panel-title\">{{ user.name }}</span>\n\t\n\t\t\t\t\t<span class=\"bx-messenger-panel-desc\">{{ userPosition }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-messenger-external-data-buttons\">\n\t\t\t\t\t<span class=\"bx-notifier-item-button bx-notifier-item-button-white\" @click=\"onOpenChat\">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('IM_VIEW_POPUP_USER_OPEN_CHAT') }}\n\t\t\t\t\t</span>\n\t\t\t\t\t<span class=\"bx-notifier-item-button bx-notifier-item-button-white\" @click=\"onOpenHistory\">\n\t\t\t\t\t\t{{ $Bitrix.Loc.getMessage('IM_VIEW_POPUP_CONTENT_OPEN_HISTORY') }}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<span v-else-if=\"!requestFinished && !hasError\" class=\"bx-messenger-content-load-img\"></span>\n\t\t\t<div v-else-if=\"requestFinished && hasError\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('IM_VIEW_POPUP_CONTENT_NO_ACCESS') }}\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import { RestMethod, RestMethodHandler } from \"im.const\";\n\nexport const Users = {\n\tprops: ['value', 'popupInstance'],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tusers: {},\n\t\t\thasError: false,\n\t\t\trequestFinished: false\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tconst needRequest = this.isNeedUserRequest(this.value);\n\t\tif (needRequest)\n\t\t{\n\t\t\tthis.requestUserData(this.value);\n\t\t}\n\t\telse //!needRequest\n\t\t{\n\t\t\tthis.users = this.getUsersForPopup();\n\t\t\tthis.requestFinished = true;\n\t\t}\n\t},\n\tmounted()\n\t{\n\t\tthis.popupInstance.show();\n\t},\n\tbeforeDestroy()\n\t{\n\t\tthis.popupInstance.destroy();\n\t},\n\tcomputed:\n\t{\n\t\tpopupHeight()\n\t\t{\n\t\t\tlet height = this.value.length * 30;\n\t\t\tif (height > 150)\n\t\t\t{\n\t\t\t\theight = 150\n\t\t\t}\n\t\t\treturn height + 'px'\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tgetUser(userId)\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](userId);\n\t\t},\n\t\tgetUsersForPopup()\n\t\t{\n\t\t\treturn this.value.map((userId) => {\n\t\t\t\treturn this.getUser(userId);\n\t\t\t});\n\t\t},\n\t\tgetUserAvatar(user)\n\t\t{\n\t\t\tif (this.isEmptyAvatar(user))\n\t\t\t{\n\t\t\t\treturn '/bitrix/js/im/images/blank.gif';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn user.avatar;\n\t\t\t}\n\t\t},\n\t\tisEmptyAvatar(user)\n\t\t{\n\t\t\treturn user.avatar === '' || user.avatar.indexOf('/bitrix/js/im/images/blank.gif') >= 0;\n\t\t},\n\t\tgetAvatarStyles(user)\n\t\t{\n\t\t\tconst styles = {};\n\t\t\tif (this.isEmptyAvatar(user))\n\t\t\t{\n\t\t\t\tstyles.backgroundColor = user.color;\n\t\t\t}\n\n\t\t\treturn styles;\n\t\t},\n\t\tgetUserStatusClass(user)\n\t\t{\n\t\t\treturn `bx-notifier-popup-avatar-status-${user.status}`;\n\t\t},\n\t\tisNeedUserRequest(users)\n\t\t{\n\t\t\tfor (let i = 0; i < users.length; i++)\n\t\t\t{\n\t\t\t\tif (!this.getUser(users[i]))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t\trequestUserData(userIds)\n\t\t{\n\t\t\tthis.$Bitrix.RestClient.get().callMethod(RestMethod.imUserListGet, {\n\t\t\t\tID: userIds\n\t\t\t}).then(response => {\n\t\t\t\tthis.$Bitrix.Data.get('controller').executeRestAnswer(RestMethodHandler.imUserListGet, response);\n\t\t\t\tthis.users = this.getUsersForPopup();\n\t\t\t\tthis.requestFinished = true;\n\t\t\t}).catch((error) => {\n\t\t\t\tthis.hasError = true;\n\t\t\t\tconsole.error(error);\n\t\t\t\tthis.requestFinished = true;\n\t\t\t});\n\t\t},\n\t\tonUserClick(userId)\n\t\t{\n\t\t\tthis.popupInstance.destroy();\n\t\t\tBXIM.openMessenger(userId)\n\t\t},\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<div\n\t\t\tclass=\"bx-im-vue-popup-container\" \n\t\t\t:style=\"{height: popupHeight, width: '180px', display: 'flex', alignItems: 'center', justifyContent: 'center'}\"\n\t\t>\n\t\t\t<span v-if=\"requestFinished && !hasError\" class=\"bx-notifier-item-help-popup\">\n\t\t\t\t<a \n\t\t\t\t\tv-for=\"user in users\"\n\t\t\t\t\tclass=\"bx-notifier-item-help-popup-img\"\n\t\t\t\t\t@click.prevent=\"onUserClick(user.id)\"\n\t\t\t\t>\n\t\t\t\t\t<span :class=\"[getUserStatusClass(user), 'bx-notifier-popup-avatar']\">\n\t\t\t\t\t\t<img \n\t\t\t\t\t\t\t:src=\"getUserAvatar(user)\"\n\t\t\t\t\t\t\t:class=\"['bx-notifier-popup-avatar-img', isEmptyAvatar(user) ? 'bx-notifier-popup-avatar-img-default' : '']\"\n\t\t\t\t\t\t\t:style=\"getAvatarStyles(user)\"\n\t\t\t\t\t\t\t:alt=\"user.name\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</span>\n\t\t\t\t\t<span \n\t\t\t\t\t\t:class=\"['bx-notifier-item-help-popup-name', user.extranet ? 'bx-notifier-popup-avatar-extranet' : '']\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ user.name }}\n\t\t\t\t\t</span>\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t\t<span v-else-if=\"!requestFinished && !hasError\" class=\"bx-messenger-content-load-img\"></span>\n\t\t\t<div v-else-if=\"requestFinished && hasError\">\n\t\t\t\t{{ $Bitrix.Loc.getMessage('IM_VIEW_POPUP_CONTENT_NO_ACCESS') }}\n\t\t\t</div>\n\t\t</div>\n\t`\n};","import { Chat } from \"./type/chat\";\nimport { User } from \"./type/user\";\nimport { Users } from \"./type/users\";\n\nexport const Popup = {\n\tprops: ['type', 'value', 'popupInstance'],\n\tcomponents:\n\t{\n\t\tChat,\n\t\tUser,\n\t\tUsers,\n\t},\n\t//language=Vue\n\ttemplate: `\n\t\t<component :is=\"type\" :value=\"value\" :popupInstance=\"popupInstance\"/>\n\t`\n};"],"names":["Chat","props","data","chat","hasError","requestFinished","created","chatData","getChat","value","requestChatData","mounted","popupInstance","show","beforeDestroy","destroy","methods","dialogId","$store","getters","$Bitrix","RestClient","get","callMethod","RestMethod","imChatGet","dialog_id","then","response","Data","executeRestAnswer","RestMethodHandler","catch","error","console","onOpenChat","event","BXIM","openMessenger","onOpenHistory","openHistory","computed","avatarStyles","styles","emptyAvatar","backgroundColor","color","chatAvatar","avatar","indexOf","template","User","user","userData","getUser","requestUserData","userId","imUserGet","ID","userAvatar","botStyles","userStatusText","BX","MessengerCommon","getUserStatus","id","statusText","userStatusClass","userPosition","getUserPosition","Users","users","needRequest","isNeedUserRequest","getUsersForPopup","popupHeight","height","length","map","getUserAvatar","isEmptyAvatar","getAvatarStyles","getUserStatusClass","status","i","userIds","imUserListGet","onUserClick","Popup","components"],"mappings":";;;;;CAGO,IAAMA,IAAI,GACjB;CACCC,EAAAA,KAAK,EAAE,CAAC,OAAD,EAAU,eAAV,CADR;CAECC,EAAAA,IAFD,kBAGC;CACC,WAAO;CACNC,MAAAA,IAAI,EAAE,EADA;CAENC,MAAAA,QAAQ,EAAE,KAFJ;CAGNC,MAAAA,eAAe,EAAE;CAHX,KAAP;CAKA,GATF;CAUCC,EAAAA,OAVD,qBAWC;CACC,QAAMC,QAAQ,GAAG,KAAKC,OAAL,CAAa,KAAKC,KAAlB,CAAjB;;CACA,QAAIF,QAAJ,EACA;CACC,WAAKJ,IAAL,GAAYI,QAAZ;CACA,WAAKF,eAAL,GAAuB,IAAvB;CACA,KAJD,MAMA;CACC,WAAKK,eAAL,CAAqB,KAAKD,KAA1B;CACA;CACD,GAtBF;CAuBCE,EAAAA,OAvBD,qBAwBC;CACC,SAAKC,aAAL,CAAmBC,IAAnB;CACA,GA1BF;CA2BCC,EAAAA,aA3BD,2BA4BC;CACC,SAAKF,aAAL,CAAmBG,OAAnB;CACA,GA9BF;CA+BCC,EAAAA,OAAO,EACP;CACCR,IAAAA,OADD,mBACSS,QADT,EAEC;CACC,aAAO,KAAKC,MAAL,CAAYC,OAAZ,CAAoB,eAApB,EAAqCF,QAArC,CAAP;CACA,KAJF;CAKCP,IAAAA,eALD,2BAKiBO,QALjB,EAMC;CAAA;;CACC,WAAKG,OAAL,CAAaC,UAAb,CAAwBC,GAAxB,GAA8BC,UAA9B,CAAyCC,mBAAU,CAACC,SAApD,EAA+D;CAC9DC,QAAAA,SAAS,EAAET;CADmD,OAA/D,EAEGU,IAFH,CAEQ,UAAAC,QAAQ,EAAI;CACnB,QAAA,KAAI,CAACR,OAAL,CAAaS,IAAb,CAAkBP,GAAlB,CAAsB,YAAtB,EAAoCQ,iBAApC,CAAsDC,0BAAiB,CAACN,SAAxE,EAAmFG,QAAnF;;CAEA,QAAA,KAAI,CAACzB,IAAL,GAAY,KAAI,CAACK,OAAL,CAAa,KAAI,CAACC,KAAlB,CAAZ;CACA,QAAA,KAAI,CAACJ,eAAL,GAAuB,IAAvB;CACA,OAPD,EAOG2B,KAPH,CAOS,UAACC,KAAD,EAAW;CACnB,QAAA,KAAI,CAAC7B,QAAL,GAAgB,IAAhB;CACA8B,QAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;CACA,QAAA,KAAI,CAAC5B,eAAL,GAAuB,IAAvB;CACA,OAXD;CAYA,KAnBF;CAqBC;CACA8B,IAAAA,UAtBD,sBAsBYC,KAtBZ,EAuBC;CACC,WAAKxB,aAAL,CAAmBG,OAAnB;CACAsB,MAAAA,IAAI,CAACC,aAAL,CAAmB,KAAK7B,KAAxB;CACA,KA1BF;CA2BC8B,IAAAA,aA3BD,yBA2BeH,KA3Bf,EA4BC;CACC,WAAKxB,aAAL,CAAmBG,OAAnB;CACAsB,MAAAA,IAAI,CAACG,WAAL,CAAiB,KAAK/B,KAAtB;CACA;CA/BF,GAhCD;CAiECgC,EAAAA,QAAQ,EACR;CACCC,IAAAA,YADD,0BAEC;CACC,UAAMC,MAAM,GAAG,EAAf;;CACA,UAAI,KAAKC,WAAT,EACA;CACCD,QAAAA,MAAM,CAACE,eAAP,GAAyB,KAAK1C,IAAL,CAAU2C,KAAnC;CACA;;CAED,aAAOH,MAAP;CACA,KAVF;CAWCI,IAAAA,UAXD,wBAYC;CACC,UAAI,KAAKH,WAAT,EACA;CACC,eAAO,gCAAP;CACA,OAHD,MAKA;CACC,eAAO,KAAKzC,IAAL,CAAU6C,MAAjB;CACA;CACD,KArBF;CAsBCJ,IAAAA,WAtBD,yBAuBC;CACC,aAAO,KAAKzC,IAAL,CAAU6C,MAAV,KAAqB,EAArB,IAA2B,KAAK7C,IAAL,CAAU6C,MAAV,CAAiBC,OAAjB,CAAyB,gCAAzB,KAA8D,CAAhG;CACA;CAzBF,GAlED;CA6FC;CACAC,EAAAA,QAAQ;CA9FT,CADO;;CCDA,IAAMC,IAAI,GAAG;CACnBlD,EAAAA,KAAK,EAAE,CAAC,OAAD,EAAU,eAAV,CADY;CAEnBC,EAAAA,IAFmB,kBAGnB;CACC,WAAO;CACNkD,MAAAA,IAAI,EAAE,EADA;CAENhD,MAAAA,QAAQ,EAAE,KAFJ;CAGNC,MAAAA,eAAe,EAAE;CAHX,KAAP;CAKA,GATkB;CAUnBC,EAAAA,OAVmB,qBAWnB;CACC,QAAM+C,QAAQ,GAAG,KAAKC,OAAL,CAAa,KAAK7C,KAAlB,CAAjB;;CAEA,QAAI4C,QAAJ,EACA;CACC,WAAKD,IAAL,GAAYC,QAAZ;CACA,WAAKhD,eAAL,GAAuB,IAAvB;CACA,KAJD,MAMA;CACC,WAAKkD,eAAL,CAAqB,KAAK9C,KAA1B;CACA;CACD,GAvBkB;CAwBnBE,EAAAA,OAxBmB,qBAyBnB;CACC,SAAKC,aAAL,CAAmBC,IAAnB;CACA,GA3BkB;CA4BnBC,EAAAA,aA5BmB,2BA6BnB;CACC,SAAKF,aAAL,CAAmBG,OAAnB;CACA,GA/BkB;CAgCnBC,EAAAA,OAAO,EACP;CACCsC,IAAAA,OADD,mBACSE,MADT,EAEC;CACC,aAAO,KAAKtC,MAAL,CAAYC,OAAZ,CAAoB,WAApB,EAAiCqC,MAAjC,CAAP;CACA,KAJF;CAKCD,IAAAA,eALD,2BAKiBC,MALjB,EAMC;CAAA;;CACC,WAAKpC,OAAL,CAAaC,UAAb,CAAwBC,GAAxB,GAA8BC,UAA9B,CAAyCC,mBAAU,CAACiC,SAApD,EAA+D;CAC9DC,QAAAA,EAAE,EAAEF;CAD0D,OAA/D,EAEG7B,IAFH,CAEQ,UAAAC,QAAQ,EAAI;CACnB,QAAA,KAAI,CAACR,OAAL,CAAaS,IAAb,CAAkBP,GAAlB,CAAsB,YAAtB,EAAoCQ,iBAApC,CAAsDC,0BAAiB,CAAC0B,SAAxE,EAAmF7B,QAAnF;;CAEA,QAAA,KAAI,CAACwB,IAAL,GAAY,KAAI,CAACE,OAAL,CAAa,KAAI,CAAC7C,KAAlB,CAAZ;CACA,QAAA,KAAI,CAACJ,eAAL,GAAuB,IAAvB;CACA,OAPD,EAOG2B,KAPH,CAOS,UAACC,KAAD,EAAW;CACnB,QAAA,KAAI,CAAC7B,QAAL,GAAgB,IAAhB;CACA8B,QAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;CACA,QAAA,KAAI,CAAC5B,eAAL,GAAuB,IAAvB;CACA,OAXD;CAYA,KAnBF;CAoBC;CACA8B,IAAAA,UArBD,sBAqBYC,KArBZ,EAsBC;CACC,WAAKxB,aAAL,CAAmBG,OAAnB;CACAsB,MAAAA,IAAI,CAACC,aAAL,CAAmB,KAAK7B,KAAxB;CACA,KAzBF;CA0BC8B,IAAAA,aA1BD,yBA0BeH,KA1Bf,EA2BC;CACC,WAAKxB,aAAL,CAAmBG,OAAnB;CACAsB,MAAAA,IAAI,CAACG,WAAL,CAAiB,KAAK/B,KAAtB;CACA;CA9BF,GAjCmB;CAiEnBgC,EAAAA,QAAQ,EACR;CACCC,IAAAA,YADD,0BAEC;CACC,UAAMC,MAAM,GAAG,EAAf;;CACA,UAAI,KAAKC,WAAT,EACA;CACCD,QAAAA,MAAM,CAACE,eAAP,GAAyB,KAAK1C,IAAL,CAAU2C,KAAnC;CACA;;CAED,aAAOH,MAAP;CACA,KAVF;CAWCgB,IAAAA,UAXD,wBAYC;CACC,UAAI,KAAKf,WAAT,EACA;CACC,eAAO,gCAAP;CACA,OAHD,MAKA;CACC,eAAO,KAAKQ,IAAL,CAAUJ,MAAjB;CACA;CACD,KArBF;CAsBCJ,IAAAA,WAtBD,yBAuBC;CACC,aAAO,KAAKQ,IAAL,CAAUJ,MAAV,KAAqB,EAArB,IAA2B,KAAKI,IAAL,CAAUJ,MAAV,CAAiBC,OAAjB,CAAyB,gCAAzB,KAA8D,CAAhG;CACA,KAzBF;CA0BCW,IAAAA,SA1BD,uBA2BC;CACC;CACA,aAAO,uBAAP;CACA,KA9BF;CA+BCC,IAAAA,cA/BD,4BAgCC;CACC;CACA,aAAOC,EAAE,CAACC,eAAH,CAAmBC,aAAnB,CAAiC,KAAKZ,IAAL,CAAUa,EAA3C,EAA+C,KAA/C,EAAsDC,UAA7D;CACA,KAnCF;CAoCCC,IAAAA,eApCD,6BAqCC;CACC;CACA,aAAO,sCAAsCL,EAAE,CAACC,eAAH,CAAmBC,aAAnB,CAAiC,KAAKZ,IAAL,CAAUa,EAA3C,EAA+C,IAA/C,CAA7C;CACA,KAxCF;CAyCCG,IAAAA,YAzCD,0BA0CC;CACC;CACA,aAAON,EAAE,CAACC,eAAH,CAAmBM,eAAnB,CAAmC,KAAKjB,IAAL,CAAUa,EAA7C,CAAP;CACA;CA7CF,GAlEmB;CAiHnB;CACAf,EAAAA,QAAQ;CAlHW,CAAb;;CCAA,IAAMoB,KAAK,GAAG;CACpBrE,EAAAA,KAAK,EAAE,CAAC,OAAD,EAAU,eAAV,CADa;CAEpBC,EAAAA,IAFoB,kBAGpB;CACC,WAAO;CACNqE,MAAAA,KAAK,EAAE,EADD;CAENnE,MAAAA,QAAQ,EAAE,KAFJ;CAGNC,MAAAA,eAAe,EAAE;CAHX,KAAP;CAKA,GATmB;CAUpBC,EAAAA,OAVoB,qBAWpB;CACC,QAAMkE,WAAW,GAAG,KAAKC,iBAAL,CAAuB,KAAKhE,KAA5B,CAApB;;CACA,QAAI+D,WAAJ,EACA;CACC,WAAKjB,eAAL,CAAqB,KAAK9C,KAA1B;CACA,KAHD;CAKA;CACC,aAAK8D,KAAL,GAAa,KAAKG,gBAAL,EAAb;CACA,aAAKrE,eAAL,GAAuB,IAAvB;CACA;CACD,GAtBmB;CAuBpBM,EAAAA,OAvBoB,qBAwBpB;CACC,SAAKC,aAAL,CAAmBC,IAAnB;CACA,GA1BmB;CA2BpBC,EAAAA,aA3BoB,2BA4BpB;CACC,SAAKF,aAAL,CAAmBG,OAAnB;CACA,GA9BmB;CA+BpB0B,EAAAA,QAAQ,EACR;CACCkC,IAAAA,WADD,yBAEC;CACC,UAAIC,MAAM,GAAG,KAAKnE,KAAL,CAAWoE,MAAX,GAAoB,EAAjC;;CACA,UAAID,MAAM,GAAG,GAAb,EACA;CACCA,QAAAA,MAAM,GAAG,GAAT;CACA;;CACD,aAAOA,MAAM,GAAG,IAAhB;CACA;CATF,GAhCoB;CA2CpB5D,EAAAA,OAAO,EACP;CACCsC,IAAAA,OADD,mBACSE,MADT,EAEC;CACC,aAAO,KAAKtC,MAAL,CAAYC,OAAZ,CAAoB,WAApB,EAAiCqC,MAAjC,CAAP;CACA,KAJF;CAKCkB,IAAAA,gBALD,8BAMC;CAAA;;CACC,aAAO,KAAKjE,KAAL,CAAWqE,GAAX,CAAe,UAACtB,MAAD,EAAY;CACjC,eAAO,KAAI,CAACF,OAAL,CAAaE,MAAb,CAAP;CACA,OAFM,CAAP;CAGA,KAVF;CAWCuB,IAAAA,aAXD,yBAWe3B,IAXf,EAYC;CACC,UAAI,KAAK4B,aAAL,CAAmB5B,IAAnB,CAAJ,EACA;CACC,eAAO,gCAAP;CACA,OAHD,MAKA;CACC,eAAOA,IAAI,CAACJ,MAAZ;CACA;CACD,KArBF;CAsBCgC,IAAAA,aAtBD,yBAsBe5B,IAtBf,EAuBC;CACC,aAAOA,IAAI,CAACJ,MAAL,KAAgB,EAAhB,IAAsBI,IAAI,CAACJ,MAAL,CAAYC,OAAZ,CAAoB,gCAApB,KAAyD,CAAtF;CACA,KAzBF;CA0BCgC,IAAAA,eA1BD,2BA0BiB7B,IA1BjB,EA2BC;CACC,UAAMT,MAAM,GAAG,EAAf;;CACA,UAAI,KAAKqC,aAAL,CAAmB5B,IAAnB,CAAJ,EACA;CACCT,QAAAA,MAAM,CAACE,eAAP,GAAyBO,IAAI,CAACN,KAA9B;CACA;;CAED,aAAOH,MAAP;CACA,KAnCF;CAoCCuC,IAAAA,kBApCD,8BAoCoB9B,IApCpB,EAqCC;CACC,uDAA0CA,IAAI,CAAC+B,MAA/C;CACA,KAvCF;CAwCCV,IAAAA,iBAxCD,6BAwCmBF,KAxCnB,EAyCC;CACC,WAAK,IAAIa,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGb,KAAK,CAACM,MAA1B,EAAkCO,CAAC,EAAnC,EACA;CACC,YAAI,CAAC,KAAK9B,OAAL,CAAaiB,KAAK,CAACa,CAAD,CAAlB,CAAL,EACA;CACC,iBAAO,IAAP;CACA;CACD;;CAED,aAAO,KAAP;CACA,KAnDF;CAoDC7B,IAAAA,eApDD,2BAoDiB8B,OApDjB,EAqDC;CAAA;;CACC,WAAKjE,OAAL,CAAaC,UAAb,CAAwBC,GAAxB,GAA8BC,UAA9B,CAAyCC,mBAAU,CAAC8D,aAApD,EAAmE;CAClE5B,QAAAA,EAAE,EAAE2B;CAD8D,OAAnE,EAEG1D,IAFH,CAEQ,UAAAC,QAAQ,EAAI;CACnB,QAAA,MAAI,CAACR,OAAL,CAAaS,IAAb,CAAkBP,GAAlB,CAAsB,YAAtB,EAAoCQ,iBAApC,CAAsDC,0BAAiB,CAACuD,aAAxE,EAAuF1D,QAAvF;;CACA,QAAA,MAAI,CAAC2C,KAAL,GAAa,MAAI,CAACG,gBAAL,EAAb;CACA,QAAA,MAAI,CAACrE,eAAL,GAAuB,IAAvB;CACA,OAND,EAMG2B,KANH,CAMS,UAACC,KAAD,EAAW;CACnB,QAAA,MAAI,CAAC7B,QAAL,GAAgB,IAAhB;CACA8B,QAAAA,OAAO,CAACD,KAAR,CAAcA,KAAd;CACA,QAAA,MAAI,CAAC5B,eAAL,GAAuB,IAAvB;CACA,OAVD;CAWA,KAjEF;CAkECkF,IAAAA,WAlED,uBAkEa/B,MAlEb,EAmEC;CACC,WAAK5C,aAAL,CAAmBG,OAAnB;CACAsB,MAAAA,IAAI,CAACC,aAAL,CAAmBkB,MAAnB;CACA;CAtEF,GA5CoB;CAoHpB;CACAN,EAAAA,QAAQ;CArHY,CAAd;;KCEMsC,KAAK,GAAG;CACpBvF,EAAAA,KAAK,EAAE,CAAC,MAAD,EAAS,OAAT,EAAkB,eAAlB,CADa;CAEpBwF,EAAAA,UAAU,EACV;CACCzF,IAAAA,IAAI,EAAJA,IADD;CAECmD,IAAAA,IAAI,EAAJA,IAFD;CAGCmB,IAAAA,KAAK,EAALA;CAHD,GAHoB;CAQpB;CACApB,EAAAA,QAAQ;CATY,CAAd;;;;;;;;"}