{"version":3,"file":"util.bundle.js","sources":["../src/util.js"],"sourcesContent":["import { Type, Loc, Dom, Tag} from \"main.core\";\nimport { DateTimeFormat } from \"main.date\";\nimport \"ui.notification\";\nimport {PopupManager} from 'main.popup';\nimport {PULL as Pull} from 'pull.client';\n\nexport class Util\n{\n\tstatic PLANNER_PULL_TAG = 'calendar-planner-#USER_ID#';\n\tstatic PLANNER_WATCH_LIST = [];\n\tstatic REQUEST_ID_LIST = [];\n\tstatic accessNames = {};\n\n\tstatic parseTime(str)\n\t{\n\t\tlet date = Util.parseDate1(BX.date.format(Util.getDateFormat(), new Date()) + ' ' + str, false);\n\t\treturn date ? {\n\t\t\th: date.getHours(),\n\t\t\tm: date.getMinutes()\n\t\t} : date;\n\t}\n\n\tstatic getTimeRounded(date)\n\t{\n\t\treturn Math.round(date.getTime() / 60000) * 60000;\n\t}\n\n\tstatic parseDate(str, bUTC, formatDate, formatDatetime)\n\t{\n\t\treturn BX.parseDate(str, bUTC, formatDate, formatDatetime);\n\t}\n\n\tstatic parseDate1(str, format, trimSeconds)\n\t{\n\t\tlet\n\t\t\ti, cnt, k,\n\t\t\tregMonths,\n\t\t\tbUTC = false;\n\n\t\tif (!format)\n\t\t\tformat = Loc.getMessage('FORMAT_DATETIME');\n\n\t\tstr = BX.util.trim(str);\n\n\t\tif (trimSeconds !== false)\n\t\t\tformat = format.replace(':SS', '');\n\n\t\tif (BX.type.isNotEmptyString(str))\n\t\t{\n\t\t\tregMonths = '';\n\t\t\tfor (i = 1; i <= 12; i++)\n\t\t\t{\n\t\t\t\tregMonths = regMonths + '|' + Loc.getMessage('MON_' + i);\n\t\t\t}\n\n\t\t\tlet\n\t\t\t\texpr = new RegExp('([0-9]+|[a-z]+' + regMonths + ')', 'ig'),\n\t\t\t\taDate = str.match(expr),\n\t\t\t\taFormat = Loc.getMessage('FORMAT_DATE').match(/(DD|MI|MMMM|MM|M|YYYY)/ig),\n\t\t\t\taDateArgs = [],\n\t\t\t\taFormatArgs = [],\n\t\t\t\taResult = {};\n\n\t\t\tif (!aDate)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tif (aDate.length > aFormat.length)\n\t\t\t{\n\t\t\t\taFormat = format.match(/(DD|MI|MMMM|MM|M|YYYY|HH|H|SS|TT|T|GG|G)/ig);\n\t\t\t}\n\n\t\t\tfor (i = 0, cnt = aDate.length; i < cnt; i++)\n\t\t\t{\n\t\t\t\tif (BX.util.trim(aDate[i]) !== '')\n\t\t\t\t{\n\t\t\t\t\taDateArgs[aDateArgs.length] = aDate[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0, cnt = aFormat.length; i < cnt; i++)\n\t\t\t{\n\t\t\t\tif (BX.util.trim(aFormat[i]) != '')\n\t\t\t\t{\n\t\t\t\t\taFormatArgs[aFormatArgs.length] = aFormat[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet m = BX.util.array_search('MMMM', aFormatArgs);\n\t\t\tif (m > 0)\n\t\t\t{\n\t\t\t\taDateArgs[m] = BX.getNumMonth(aDateArgs[m]);\n\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tm = BX.util.array_search('M', aFormatArgs);\n\t\t\t\tif (m > 0)\n\t\t\t\t{\n\t\t\t\t\taDateArgs[m] = BX.getNumMonth(aDateArgs[m]);\n\t\t\t\t\taFormatArgs[m] = \"MM\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (i = 0, cnt = aFormatArgs.length; i < cnt; i++)\n\t\t\t{\n\t\t\t\tk = aFormatArgs[i].toUpperCase();\n\t\t\t\taResult[k] = k == 'T' || k == 'TT' ? aDateArgs[i] : parseInt(aDateArgs[i], 10);\n\t\t\t}\n\n\t\t\tif (aResult['DD'] > 0 && aResult['MM'] > 0 && aResult['YYYY'] > 0)\n\t\t\t{\n\t\t\t\tlet d = new Date();\n\n\t\t\t\tif (bUTC)\n\t\t\t\t{\n\t\t\t\t\td.setUTCDate(1);\n\t\t\t\t\td.setUTCFullYear(aResult['YYYY']);\n\t\t\t\t\td.setUTCMonth(aResult['MM'] - 1);\n\t\t\t\t\td.setUTCDate(aResult['DD']);\n\t\t\t\t\td.setUTCHours(0, 0, 0);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\td.setDate(1);\n\t\t\t\t\td.setFullYear(aResult['YYYY']);\n\t\t\t\t\td.setMonth(aResult['MM'] - 1);\n\t\t\t\t\td.setDate(aResult['DD']);\n\t\t\t\t\td.setHours(0, 0, 0);\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t(!isNaN(aResult['HH']) || !isNaN(aResult['GG']) || !isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t&& !isNaN(aResult['MI'])\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tif (!isNaN(aResult['H']) || !isNaN(aResult['G']))\n\t\t\t\t\t{\n\t\t\t\t\t\tlet bPM = (aResult['T'] || aResult['TT'] || 'am').toUpperCase() == 'PM';\n\t\t\t\t\t\tlet h = parseInt(aResult['H'] || aResult['G'] || 0, 10);\n\t\t\t\t\t\tif (bPM)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taResult['HH'] = h + (h == 12 ? 0 : 12);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\taResult['HH'] = h < 12 ? h : 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\taResult['HH'] = parseInt(aResult['HH'] || aResult['GG'] || 0, 10);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (isNaN(aResult['SS']))\n\t\t\t\t\t\taResult['SS'] = 0;\n\n\t\t\t\t\tif (bUTC)\n\t\t\t\t\t{\n\t\t\t\t\t\td.setUTCHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\td.setHours(aResult['HH'], aResult['MI'], aResult['SS']);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn d;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tstatic formatTime(hours, minutes)\n\t{\n\t\tlet day;\n\t\tif (Type.isDate(hours))\n\t\t{\n\t\t\tday = hours;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tday = new Date();\n\t\t\tday.setHours(hours, minutes, 0);\n\t\t}\n\n\t\treturn BX.date.format(Util.getTimeFormatShort(), day.getTime() / 1000);\n\t}\n\n\tstatic formatDate(timestamp)\n\t{\n\t\tif (Type.isDate(timestamp))\n\t\t{\n\t\t\ttimestamp = timestamp.getTime();\n\t\t}\n\t\treturn BX.date.format(Util.getDateFormat(), timestamp / 1000);\n\t}\n\n\tstatic formatDateTime(timestamp)\n\t{\n\t\tif (Type.isDate(timestamp))\n\t\t{\n\t\t\ttimestamp = timestamp.getTime();\n\t\t}\n\t\treturn BX.date.format(Util.getDateTimeFormat(), timestamp / 1000);\n\t}\n\n\tstatic formatTimeInterval(from, to)\n\t{\n\t\tconst formattedFrom = DateTimeFormat.format(Util.getTimeFormatShort(), from.getTime() / 1000);\n\t\tconst formattedTo = DateTimeFormat.format(Util.getTimeFormatShort(), to.getTime() / 1000);\n\t\treturn `${formattedFrom} - ${formattedTo}`;\n\t}\n\n\tstatic formatDateUsable(date, showYear = true, showDayOfWeek = false)\n\t{\n\t\tconst lang = Loc.getMessage('LANGUAGE_ID');\n\t\tlet format = Util.getDateFormat();\n\t\tif (lang === 'ru' || lang === 'ua')\n\t\t{\n\t\t\tformat = showDayOfWeek ? 'l, j F' : 'j F';\n\n\t\t\tif (date.getFullYear\n\t\t\t\t&& date.getFullYear() !== new Date().getFullYear()\n\t\t\t\t&& showYear !== false\n\t\t\t)\n\t\t\t{\n\t\t\t\tformat += ' Y';\n\t\t\t}\n\t\t}\n\n\t\treturn BX.date.format([\n\t\t\t[\"today\", \"today\"],\n\t\t\t[\"tommorow\", \"tommorow\"],\n\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t[\"\", format]\n\t\t], date);\n\t}\n\n\tstatic getDayLength()\n\t{\n\t\tif (!Util.DAY_LENGTH)\n\t\t{\n\t\t\tUtil.DAY_LENGTH = 86400000;\n\t\t}\n\t\treturn Util.DAY_LENGTH;\n\t}\n\n\tstatic getDefaultColorList()\n\t{\n\t\treturn ['#86b100', '#0092cc', '#00afc7', '#e89b06', '#00b38c', '#de2b24', '#bd7ac9', '#838fa0', '#c3612c', '#e97090'];\n\t}\n\n\tstatic findTargetNode(node, parentCont)\n\t{\n\t\tlet res = false;\n\t\tif (node)\n\t\t{\n\t\t\tlet prefix = 'data-bx-calendar', i;\n\n\t\t\tif (node.attributes && node.attributes.length)\n\t\t\t{\n\t\t\t\tfor (i = 0; i < node.attributes.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (node.attributes[i].name && node.attributes[i].name.substr(0, prefix.length) === prefix)\n\t\t\t\t\t{\n\t\t\t\t\t\tres = node;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (!res)\n\t\t\t{\n\t\t\t\tres = BX.findParent(node, function(n) {\n\t\t\t\t\tlet j;\n\t\t\t\t\tif (n.attributes && n.attributes.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tfor (j = 0; j < n.attributes.length; j++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (n.attributes[j].name && n.attributes[j].name.substr(0, prefix.length) === prefix)\n\t\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn false;\n\t\t\t\t}, parentCont);\n\t\t\t}\n\n\t\t}\n\n\t\treturn res;\n\t}\n\n\tstatic getFollowedUserList(userId)\n\t{\n\t\treturn [];\n\t}\n\n\tstatic getWeekDayByInd(index)\n\t{\n\t\treturn ['SU', 'MO', 'TU', 'WE', 'TH', 'FR', 'SA'][index];\n\t}\n\n\tstatic getIndByWeekDay(weekDay)\n\t{\n\t\treturn new Object({SU: 0, MO: 1, TU: 2, WE: 3, TH: 4, FR: 5, SA: 6})[weekDay];\n\t}\n\n\tstatic getWeekdaysLoc()\n\t{\n\t\tconst today = new Date();\n\t\tconst weekdays = [];\n\n\t\tconst dayLength = 24 * 60 * 60 * 1000;\n\t\tfor (let weekOffset = 0; weekOffset < 7; weekOffset++)\n\t\t{\n\t\t\tconst weekDayName = DateTimeFormat.format('D', new Date(today.getTime() + dayLength * weekOffset));\n\t\t\tweekdays[(today.getDay() + weekOffset) % 7] = weekDayName;\n\t\t}\n\n\t\treturn weekdays;\n\t}\n\n\tstatic getLoader(size, className)\n\t{\n\t\treturn Tag.render`\n\t\t<div class=\"${className || 'calendar-loader'}\">\n\t\t\t<svg class=\"calendar-loader-circular\"\n\t\t\t\tstyle=\"width:${parseInt(size)}px; height:${parseInt(size)}px;\"\n\t\t\t\tviewBox=\"25 25 50 50\">\n\t\t\t\t\t<circle class=\"calendar-loader-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"/>\n\t\t\t\t\t<circle class=\"calendar-loader-inner-path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-miterlimit=\"10\"/>\n\t\t\t</svg>\n\t\t</div>\n`;\n\t};\n\n\tstatic getDayCode(date)\n\t{\n\t\treturn date.getFullYear() + '-' + (\"0\" + (~~(date.getMonth() + 1))).substr(-2, 2) + '-' + (\"0\" + (~~(date.getDate()))).substr(-2, 2);\n\t}\n\n\tstatic getTextColor(color)\n\t{\n\t\tif (!color)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (color.charAt(0) === \"#\")\n\t\t{\n\t\t\tcolor = color.substring(1, 7);\n\t\t}\n\n\t\tlet\n\t\t\tr = parseInt(color.substring(0, 2), 16),\n\t\t\tg = parseInt(color.substring(2, 4), 16),\n\t\t\tb = parseInt(color.substring(4, 6), 16),\n\t\t\tlight = (r * 0.8 + g + b * 0.2) / 510 * 100;\n\n\t\treturn light < 50;\n\t}\n\n\tstatic getKeyCode(key)\n\t{\n\t\tif (!Type.isString(key))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet KEY_CODES = {\n\t\t\t'backspace': 8,\n\t\t\t'enter': 13,\n\t\t\t'escape': 27,\n\t\t\t'space': 32,\n\t\t\t'delete': 46,\n\t\t\t'left': 37,\n\t\t\t'right': 39,\n\t\t\t'up': 38,\n\t\t\t'down': 40,\n\t\t\t'z': 90,\n\t\t\t'y': 89,\n\t\t\t'shift': 16,\n\t\t\t'ctrl': 17,\n\t\t\t'alt': 18,\n\t\t\t'cmd': 91, // 93, 224, 17 Browser dependent\n\t\t\t'cmdRight': 93, // 93, 224, 17 Browser dependent?\n\t\t\t'pageUp': 33,\n\t\t\t'pageDown': 34,\n\t\t\t'd': 68,\n\t\t\t'w': 87,\n\t\t\t'm': 77,\n\t\t\t'a': 65\n\t\t};\n\t\treturn KEY_CODES[key.toLowerCase()];\n\t}\n\n\tstatic isAnyModifierKeyPressed(event = window.event)\n\t{\n\t\tif (event)\n\t\t{\n\t\t\treturn event.altKey || event.shiftKey || event.ctrlKey || event.metaKey;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tstatic getUsableDateTime(timestamp, roundMin)\n\t{\n\t\tif (Type.isDate(timestamp))\n\t\t{\n\t\t\ttimestamp = timestamp.getTime();\n\t\t}\n\n\t\tlet r = (roundMin || 10) * 60 * 1000;\n\t\ttimestamp = Math.ceil(timestamp / r) * r;\n\n\t\treturn new Date(timestamp);\n\t}\n\n\tstatic showNotification(message, actions = null)\n\t{\n\t\tif (Type.isString(message) && message !== '')\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: message,\n\t\t\t\tactions: actions\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showFieldError(message, wrap, options)\n\t{\n\t\tif (Type.isDomNode(wrap) && Type.isString(message) && message !== '')\n\t\t{\n\t\t\tDom.remove(wrap.querySelector('.ui-alert'));\n\n\t\t\tlet alert = new BX.UI.Alert({\n\t\t\t\tcolor: BX.UI.Alert.Color.DANGER,\n\t\t\t\ticon: BX.UI.Alert.Icon.DANGER,\n\t\t\t\ttext: message\n\t\t\t});\n\n\t\t\tlet alertWrap = alert.getContainer();\n\n\t\t\twrap.appendChild(alertWrap);\n\n\t\t\treturn alertWrap;\n\t\t}\n\t}\n\n\tstatic getDateFormat()\n\t{\n\t\tif (!Util.DATE_FORMAT)\n\t\t{\n\t\t\tUtil.DATE_FORMAT = BX.Main.Date.convertBitrixFormat(Loc.getMessage(\"FORMAT_DATE\"));\n\t\t}\n\t\treturn Util.DATE_FORMAT;\n\t}\n\n\tstatic setDayOfWeekMonthFormat(value)\n\t{\n\t\tUtil.dayOfWeekMonthFormat = value;\n\t}\n\n\tstatic getDayOfWeekMonthFormat()\n\t{\n\t\treturn Util.dayOfWeekMonthFormat || 'l, j F';\n\t}\n\n\tstatic setDayMonthFormat(value)\n\t{\n\t\tUtil.dayMonthFormat = value;\n\t}\n\n\tstatic getDayMonthFormat()\n\t{\n\t\treturn Util.dayMonthFormat || 'j F';\n\t}\n\n\tstatic setLongDateFormat(value)\n\t{\n\t\tUtil.longDateFormat = value;\n\t}\n\n\tstatic getLongDateFormat()\n\t{\n\t\treturn Util.longDateFormat || 'j F Y';\n\t}\n\n\tstatic getDateTimeFormat()\n\t{\n\t\tif (!Util.DATETIME_FORMAT)\n\t\t{\n\t\t\tUtil.DATETIME_FORMAT = BX.Main.Date.convertBitrixFormat(Loc.getMessage(\"FORMAT_DATETIME\"));\n\t\t}\n\t\treturn Util.DATETIME_FORMAT;\n\t}\n\n\tstatic getTimeFormat()\n\t{\n\t\tif (!Util.TIME_FORMAT)\n\t\t{\n\t\t\tif ((Loc.getMessage(\"FORMAT_DATETIME\").substr(0, Loc.getMessage(\"FORMAT_DATE\").length) === Loc.getMessage(\"FORMAT_DATE\")))\n\t\t\t{\n\t\t\t\tUtil.TIME_FORMAT = BX.util.trim(Util.getDateTimeFormat().substr(Util.getDateFormat().length));\n\t\t\t\tUtil.TIME_FORMAT_BX = BX.util.trim(Loc.getMessage(\"FORMAT_DATETIME\").substr(Loc.getMessage(\"FORMAT_DATE\").length));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tUtil.TIME_FORMAT_BX = BX.isAmPmMode() ? 'H:MI:SS T' : 'HH:MI:SS';\n\t\t\t\tUtil.TIME_FORMAT = BX.date.convertBitrixFormat(BX.isAmPmMode() ? 'H:MI:SS T' : 'HH:MI:SS');\n\t\t\t}\n\t\t}\n\n\t\treturn Util.TIME_FORMAT;\n\t}\n\n\tstatic getTimeFormatShort()\n\t{\n\t\tif (!Util.TIME_FORMAT_SHORT)\n\t\t{\n\t\t\tUtil.TIME_FORMAT_SHORT = Util.getTimeFormat().replace(':s', '');\n\t\t\tUtil.TIME_FORMAT_SHORT_BX = Util.TIME_FORMAT_BX.replace(':SS', '');\n\t\t}\n\t\treturn Util.TIME_FORMAT_SHORT;\n\t}\n\n\tstatic getCurrentUserId()\n\t{\n\t\tif (!Util.currentUserId)\n\t\t{\n\t\t\tUtil.currentUserId = parseInt(Loc.getMessage('USER_ID'));\n\t\t}\n\t\treturn Util.currentUserId;\n\t}\n\n\tstatic getTimeByInt(intValue)\n\t{\n\t\tintValue = parseInt(intValue);\n\t\tlet h = Math.floor(intValue / 60);\n\t\treturn { hour: h, min: intValue - h * 60 };\n\t}\n\n\tstatic preventSelection(node)\n\t{\n\t\tnode.ondrag = BX.False;\n\t\tnode.ondragstart = BX.False;\n\t\tnode.onselectstart = BX.False;\n\t}\n\n\tstatic getBX()\n\t{\n\t\treturn window.top.BX || window.BX;\n\t}\n\n\tstatic closeAllPopups()\n\t{\n\t\tif (PopupManager.isAnyPopupShown())\n\t\t{\n\t\t\tfor (let i = 0, length = PopupManager._popups.length; i < length; i++)\n\t\t\t{\n\t\t\t\tif (PopupManager._popups[i]\n\t\t\t\t\t&& PopupManager._popups[i].isShown())\n\t\t\t\t{\n\t\t\t\t\tPopupManager._popups[i].close();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic sendAnalyticLabel(label)\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.sendAnalyticsLabel', { analyticsLabel: label });\n\t}\n\n\tstatic setOptions(config, additionalParams)\n\t{\n\t\tUtil.config = config;\n\t\tUtil.additionalParams = additionalParams;\n\t}\n\n\tstatic setUserSettings(userSettings)\n\t{\n\t\tUtil.userSettings = userSettings;\n\t}\n\n\tstatic getUserSettings()\n\t{\n\t\treturn Type.isObjectLike(Util.userSettings) ? Util.userSettings : {};\n\t}\n\n\tstatic setCalendarContext(calendarContext)\n\t{\n\t\tUtil.calendarContext = calendarContext;\n\t}\n\n\tstatic getCalendarContext()\n\t{\n\t\treturn Util.calendarContext || null;\n\t}\n\n\tstatic getMeetingStatusList()\n\t{\n\t\treturn ['Y', 'N', 'Q', 'H'];\n\t}\n\n\tstatic checkEmailLimitationPopup()\n\t{\n\t\tconst emailGuestAmount = Util.getEventWithEmailGuestAmount();\n\t\tconst emailGuestLimit = Util.getEventWithEmailGuestLimit();\n\t\treturn emailGuestLimit > 0\n\t\t\t&& (emailGuestAmount === 8\n\t\t\t\t|| emailGuestAmount === 4\n\t\t\t\t|| emailGuestAmount >= emailGuestLimit);\n\t}\n\n\tstatic isEventWithEmailGuestAllowed()\n\t{\n\t\treturn Util.getEventWithEmailGuestLimit() === -1\n\t\t\t|| Util.getEventWithEmailGuestAmount() < Util.getEventWithEmailGuestLimit();\n\t}\n\n\tstatic setEventWithEmailGuestAmount(value)\n\t{\n\t\tUtil.countEventWithEmailGuestAmount = value;\n\t}\n\n\tstatic setEventWithEmailGuestLimit(value)\n\t{\n\t\tUtil.eventWithEmailGuestLimit = value;\n\t}\n\n\tstatic getEventWithEmailGuestAmount()\n\t{\n\t\treturn Util.countEventWithEmailGuestAmount;\n\t}\n\n\tstatic getEventWithEmailGuestLimit()\n\t{\n\t\treturn Util.eventWithEmailGuestLimit;\n\t}\n\n\tstatic setCurrentView(calendarView = null)\n\t{\n\t\tUtil.currentCalendarView = calendarView;\n\t}\n\n\tstatic getCurrentView()\n\t{\n\t\treturn Util.currentCalendarView || null;\n\t}\n\n\tstatic adjustDateForTimezoneOffset(date, timezoneOffset = 0, fullDay = false)\n\t{\n\t\tif (!Type.isDate(date))\n\t\t\tthrow new Error('Wrong type for date attribute. DateTime object expected.')\n\n\t\tif (!parseInt(timezoneOffset) || fullDay === true)\n\t\t\treturn date;\n\n\t\treturn new Date(date.getTime() - parseInt(timezoneOffset) * 1000);\n\t}\n\n\tstatic getFormattedTimezone(timeZone)\n\t{\n\t\tconst timezoneOffset = this.getTimeZoneOffset(timeZone);\n\t\tif (timezoneOffset === 0)\n\t\t{\n\t\t\treturn '(UTC) ' + timeZone;\n\t\t}\n\n\t\tconst prefix = (timezoneOffset > 0 ? '-' : '+');\n\t\tconst hours = ('0' + Math.floor(Math.abs(timezoneOffset) / 60)).slice(-2);\n\t\tconst minutes = ('0' + Math.abs(timezoneOffset) % 60).slice(-2);\n\n\t\treturn '(UTC ' + prefix + hours + ':' + minutes + ') ' + timeZone;\n\t}\n\n\tstatic getTimezoneDateFromTimestampUTC(timestampUTC, timeZone)\n\t{\n\t\treturn new Date(timestampUTC + this.getTimeZoneOffset() * 60 * 1000 - this.getTimeZoneOffset(timeZone) * 60 * 1000);\n\t}\n\n\tstatic getTimeZoneOffset(timeZone = undefined)\n\t{\n\t\tconst timeInTimezone = new Date(new Date().toLocaleString(\"en-US\", { timeZone })).getTime();\n\t\tconst timeInUTC = new Date(new Date().toLocaleString(\"en-US\", { timeZone: 'UTC' })).getTime();\n\t\treturn parseInt((timeInUTC - timeInTimezone) / 60000);\n\t}\n\n\tstatic randomInt(min, max)\n\t{\n\t\treturn Math.round(min - 0.5 + Math.random() * (max - min + 1));\n\t}\n\n\tstatic getRandomColor()\n\t{\n\t\tconst defaultColors = Util.getDefaultColorList();\n\t\treturn defaultColors[Util.randomInt(0, defaultColors.length - 1)];\n\t}\n\n\tstatic setAccessNames(accessNames = {})\n\t{\n\t\tUtil.accessNames = {};\n\t\tfor (let code in accessNames)\n\t\t{\n\t\t\tif (accessNames.hasOwnProperty(code))\n\t\t\t{\n\t\t\t\tUtil.setAccessName(code, accessNames[code])\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getAccessName(code)\n\t{\n\t\treturn Util.accessNames[code] || code;\n\t}\n\n\tstatic setAccessName(code, name)\n\t{\n\t\tUtil.accessNames[code] = name;\n\t}\n\n\tstatic getRandomInt(numCount = 6)\n\t{\n\t\treturn Math.round(Math.random() * Math.pow(10, numCount));\n\t}\n\n\tstatic displayError(errors, reloadPage)\n\t{\n\t\tif (Type.isArray(errors))\n\t\t{\n\t\t\tlet errorMessage = '';\n\t\t\tfor (let i = 0; i < errors.length; i++)\n\t\t\t{\n\t\t\t\terrorMessage += errors[i].message + \"\\n\";\n\t\t\t}\n\t\t\terrors = errorMessage;\n\t\t}\n\n\t\tsetTimeout(() => {\n\n\t\t\talert(errors || '[Bitrix Calendar] Request error');\n\t\t\tif (reloadPage)\n\t\t\t{\n\t\t\t\tlocation.reload();\n\t\t\t}\n\n\t\t}, 200);\n\t}\n\n\tstatic convertEntityToAccessCode(entity)\n\t{\n\t\tif (Type.isObjectLike(entity))\n\t\t{\n\t\t\tif (entity.entityId === 'meta-user' && entity.id === 'all-users')\n\t\t\t{\n\t\t\t\treturn 'UA';\n\t\t\t}\n\t\t\telse if (entity.entityId === 'user')\n\t\t\t{\n\t\t\t\treturn 'U' + entity.id;\n\t\t\t}\n\t\t\telse if (entity.entityId === 'project')\n\t\t\t{\n\t\t\t\treturn 'SG' + entity.id + '_K'; // for all members of group\n\t\t\t}\n\t\t\telse if (entity.entityId === 'department')\n\t\t\t{\n\t\t\t\treturn 'DR' + entity.id;\n\t\t\t}\n\t\t\telse if (entity.entityId === 'group')\n\t\t\t{\n\t\t\t\treturn entity.id;\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic extendPlannerWatches({ entries, userId })\n\t{\n\t\tentries.forEach((entry) => {\n\t\t\tif (entry.type === 'user' && parseInt(entry.id) !== parseInt(userId))\n\t\t\t{\n\t\t\t\tconst tag = Util.PLANNER_PULL_TAG.replace('#USER_ID#', entry.id);\n\t\t\t\tif (!Util.PLANNER_WATCH_LIST.includes(tag))\n\t\t\t\t{\n\t\t\t\t\tPull.extendWatch(tag);\n\t\t\t\t\tUtil.PLANNER_WATCH_LIST.push(tag);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic clearPlannerWatches()\n\t{\n\t\tUtil.PLANNER_WATCH_LIST.forEach((tag) => {\n\t\t\tPull.clearWatch(tag);\n\t\t});\n\t\tUtil.PLANNER_WATCH_LIST = [];\n\t}\n\n\tstatic registerRequestId()\n\t{\n\t\tconst requestUid = BX.Calendar.Util.getRandomInt(8);\n\t\tUtil.REQUEST_ID_LIST.push(requestUid);\n\t\treturn requestUid;\n\t}\n\n\tstatic unregisterRequestId(requestUid)\n\t{\n\t\tUtil.REQUEST_ID_LIST = Util.REQUEST_ID_LIST.filter((uid) => {return uid !== requestUid});\n\t}\n\n\tstatic checkRequestId(requestUid)\n\t{\n\t\trequestUid = parseInt(requestUid);\n\t\treturn !Type.isInteger(requestUid) || !Util.REQUEST_ID_LIST.includes(requestUid);\n\t}\n\n\tstatic initHintNode(hintNode)\n\t{\n\t\tconst bx = Util.getBX();\n\t\tif (Type.isElementNode(hintNode) && bx?.UI?.Hint)\n\t\t{\n\t\t\tif (bx?.UI?.Hint?.popup)\n\t\t\t{\n\t\t\t\tbx.UI.Hint.popup.destroy();\n\t\t\t\tbx.UI.Hint.popup = null;\n\t\t\t\tbx.UI.Hint.content = null;\n\t\t\t}\n\t\t\tbx.UI.Hint.initNode(hintNode);\n\t\t}\n\t}\n\n\tstatic documentIsDisplayingNow()\n\t{\n\t\treturn !document.hidden;\n\t}\n\n\tstatic removeHash()\n\t{\n\t\tif (\"pushState\" in history)\n\t\t{\n\t\t\thistory.pushState(\"\", document.title, window.location.pathname + window.location.search);\n\t\t}\n\t\telse\n\t\t\t{\n\t\t\t// Prevent scrolling by storing the page's current scroll offset\n\t\t\tlet scrollV = document.body.scrollTop;\n\t\t\tlet scrollH = document.body.scrollLeft;\n\t\t\twindow.location.hash = \"\";\n\t\t\t// Restore the scroll offset, should be flicker free\n\t\t\tdocument.body.scrollTop = scrollV;\n\t\t\tdocument.body.scrollLeft = scrollH;\n\t\t}\n\t}\n\n\t// TODO: move to syncManager\n\tstatic setIphoneConnectionStatus(value)\n\t{\n\t\tUtil.iphoneConnectionStatus = value;\n\t}\n\n\tstatic isIphoneConnected()\n\t{\n\t\treturn Util.iphoneConnectionStatus;\n\t}\n\n\tstatic setMacConnectionStatus(value)\n\t{\n\t\tUtil.macConnectionStatus = value;\n\t}\n\n\tstatic isMacConnected()\n\t{\n\t\treturn Util.macConnectionStatus;\n\t}\n\n\tstatic setIcloudConnectionStatus(value)\n\t{\n\t\tUtil.icloudConnectionStatus = value;\n\t}\n\n\tstatic isIcloudConnected()\n\t{\n\t\treturn Util.icloudConnectionStatus;\n\t}\n\n\tstatic setGoogleConnectionStatus(value)\n\t{\n\t\tUtil.googleConnectionStatus = value;\n\t}\n\n\tstatic isGoogleConnected()\n\t{\n\t\treturn Util.googleConnectionStatus;\n\t}\n\n\tstatic setIsSharingFeatureEnabled(value)\n\t{\n\t\tUtil.isSharingFeatureEnabled = value;\n\t}\n\n\tstatic checkSharingFeatureEnabled()\n\t{\n\t\treturn Util.isSharingFeatureEnabled;\n\t}\n\n\tstatic setSharingConfig(value)\n\t{\n\t\tUtil.sharingConfig = value;\n\t}\n\n\tstatic getSharingConfig()\n\t{\n\t\treturn Util.sharingConfig;\n\t}\n\n\tstatic downloadIcsFile(fileContent, fileName)\n\t{\n\t\tconst link = document.createElement('a');\n\t\tlink.href = \"data:text/calendar,\" + encodeURI(fileContent);\n\t\tlink.download = fileName;\n\t\tlink.click();\n\t}\n\n\tstatic isMobileBrowser()\n\t{\n\t\treturn navigator.userAgent.toLowerCase().includes('iphone')\n\t\t\t|| navigator.userAgent.toLowerCase().includes('ipad')\n\t\t\t|| navigator.userAgent.toLowerCase().includes('android')\n\t\t;\n\t}\n}"],"names":["Util","parseTime","str","date","parseDate1","BX","format","getDateFormat","Date","h","getHours","m","getMinutes","getTimeRounded","Math","round","getTime","parseDate","bUTC","formatDate","formatDatetime","trimSeconds","i","cnt","k","regMonths","Loc","getMessage","util","trim","replace","type","isNotEmptyString","expr","RegExp","aDate","match","aFormat","aDateArgs","aFormatArgs","aResult","length","array_search","getNumMonth","toUpperCase","parseInt","d","setDate","setFullYear","setMonth","setHours","isNaN","bPM","formatTime","hours","minutes","day","Type","isDate","getTimeFormatShort","timestamp","formatDateTime","getDateTimeFormat","formatTimeInterval","from","to","formattedFrom","DateTimeFormat","formattedTo","formatDateUsable","showYear","showDayOfWeek","lang","getFullYear","getDayLength","DAY_LENGTH","getDefaultColorList","findTargetNode","node","parentCont","res","prefix","attributes","name","substr","findParent","n","j","getFollowedUserList","userId","getWeekDayByInd","index","getIndByWeekDay","weekDay","Object","SU","MO","TU","WE","TH","FR","SA","getWeekdaysLoc","today","weekdays","dayLength","weekOffset","weekDayName","getDay","getLoader","size","className","Tag","render","getDayCode","getMonth","getDate","getTextColor","color","charAt","substring","r","g","b","light","getKeyCode","key","isString","KEY_CODES","toLowerCase","isAnyModifierKeyPressed","event","window","altKey","shiftKey","ctrlKey","metaKey","getUsableDateTime","roundMin","ceil","showNotification","message","actions","UI","Notification","Center","notify","content","showFieldError","wrap","options","isDomNode","Dom","remove","querySelector","alert","Alert","Color","DANGER","icon","Icon","text","alertWrap","getContainer","appendChild","DATE_FORMAT","Main","convertBitrixFormat","setDayOfWeekMonthFormat","value","dayOfWeekMonthFormat","getDayOfWeekMonthFormat","setDayMonthFormat","dayMonthFormat","getDayMonthFormat","setLongDateFormat","longDateFormat","getLongDateFormat","DATETIME_FORMAT","getTimeFormat","TIME_FORMAT","TIME_FORMAT_BX","isAmPmMode","TIME_FORMAT_SHORT","TIME_FORMAT_SHORT_BX","getCurrentUserId","currentUserId","getTimeByInt","intValue","floor","hour","min","preventSelection","ondrag","False","ondragstart","onselectstart","getBX","top","closeAllPopups","PopupManager","isAnyPopupShown","_popups","isShown","close","sendAnalyticLabel","label","ajax","runAction","analyticsLabel","setOptions","config","additionalParams","setUserSettings","userSettings","getUserSettings","isObjectLike","setCalendarContext","calendarContext","getCalendarContext","getMeetingStatusList","checkEmailLimitationPopup","emailGuestAmount","getEventWithEmailGuestAmount","emailGuestLimit","getEventWithEmailGuestLimit","isEventWithEmailGuestAllowed","setEventWithEmailGuestAmount","countEventWithEmailGuestAmount","setEventWithEmailGuestLimit","eventWithEmailGuestLimit","setCurrentView","calendarView","currentCalendarView","getCurrentView","adjustDateForTimezoneOffset","timezoneOffset","fullDay","Error","getFormattedTimezone","timeZone","getTimeZoneOffset","abs","slice","getTimezoneDateFromTimestampUTC","timestampUTC","undefined","timeInTimezone","toLocaleString","timeInUTC","randomInt","max","random","getRandomColor","defaultColors","setAccessNames","accessNames","code","hasOwnProperty","setAccessName","getAccessName","getRandomInt","numCount","pow","displayError","errors","reloadPage","isArray","errorMessage","setTimeout","location","reload","convertEntityToAccessCode","entity","entityId","id","extendPlannerWatches","entries","forEach","entry","tag","PLANNER_PULL_TAG","PLANNER_WATCH_LIST","includes","Pull","extendWatch","push","clearPlannerWatches","clearWatch","registerRequestId","requestUid","Calendar","REQUEST_ID_LIST","unregisterRequestId","filter","uid","checkRequestId","isInteger","initHintNode","hintNode","bx","isElementNode","Hint","popup","destroy","initNode","documentIsDisplayingNow","document","hidden","removeHash","history","pushState","title","pathname","search","scrollV","body","scrollTop","scrollH","scrollLeft","hash","setIphoneConnectionStatus","iphoneConnectionStatus","isIphoneConnected","setMacConnectionStatus","macConnectionStatus","isMacConnected","setIcloudConnectionStatus","icloudConnectionStatus","isIcloudConnected","setGoogleConnectionStatus","googleConnectionStatus","isGoogleConnected","setIsSharingFeatureEnabled","isSharingFeatureEnabled","checkSharingFeatureEnabled","setSharingConfig","sharingConfig","getSharingConfig","downloadIcsFile","fileContent","fileName","link","createElement","href","encodeURI","download","click","isMobileBrowser","navigator","userAgent"],"mappings":"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"}