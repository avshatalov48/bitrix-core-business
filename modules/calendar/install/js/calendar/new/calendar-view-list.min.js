(function(e){var t=e.BXEventCalendarView;function i(){t.apply(this,arguments);this.name="list";this.filterMode=false;this.title=BX.message("EC_VIEW_LIST");this.contClassName="calendar-list-view";this.loadDaysBefore=30;this.animateAmount=5;this.loadLimitPrevious=5;this.loadLimit=15;this.loadDaysAfter=60;this.SCROLL_DELTA_HEIGHT=200;this.todayCode=this.calendar.util.getDayCode(new Date);this.preBuild()}i.prototype=Object.create(t.prototype);i.prototype.constructor=i;i.prototype.preBuild=function(){this.viewCont=BX.create("DIV",{props:{className:this.contClassName},style:{display:"none"}});BX.addCustomEvent(this.calendar,"afterSetView",BX.delegate(function(e){if(e.viewName!==this.name&&this.filterMode){this.resetFilterMode()}},this))};i.prototype.build=function(){this.titleCont=this.viewCont.appendChild(BX.create("DIV",{props:{className:"calendar-grid-month-row-days-week"}}));this.streamScrollWrap=this.viewCont.appendChild(BX.create("DIV",{props:{className:"calendar-timeline-stream-container calendar-custom-scroll"},style:{height:this.util.getViewHeight()+"px"},events:{scroll:BX.proxy(this.scrollHandle,this)}}));this.streamContentWrap=this.streamScrollWrap.appendChild(BX.create("DIV",{props:{className:"calendar-timeline-stream-container-content"}}));this.topLoaderBlock=this.streamContentWrap.appendChild(BX.create("DIV",{props:{className:"calendar-timeline-loader-block"}}));this.listWrap=this.streamContentWrap.appendChild(BX.create("DIV",{props:{className:"calendar-timeline-stream-container-list"}}));this.bottomLoaderBlock=this.streamContentWrap.appendChild(BX.create("DIV",{props:{className:"calendar-timeline-loader-block"}}));this.centerLoaderWrap=this.streamScrollWrap.appendChild(BX.create("DIV",{props:{className:"calendar-center-loader-block"}}));this.filterLoaderWrap=this.streamScrollWrap.appendChild(BX.create("DIV",{props:{className:"calendar-search-main"},style:{height:this.util.getViewHeight()+"px",display:"none"}}));this.filterLoaderWrap.appendChild(BX.create("DIV",{props:{className:"calendar-search-empty"},html:'<div class="calendar-search-empty-name">'+BX.message("EC_NO_EVENTS")+"</div>"}))};i.prototype.setTitle=function(){var e=this.calendar.getViewRangeDate();t.prototype.setTitle.apply(this,[BX.date.format("f",e.getTime()/1e3)+", #GRAY_START#"+e.getFullYear()+"#GRAY_END#"])};i.prototype.show=function(e){if(!e)e={};t.prototype.show.apply(this,arguments);this.showNavigationCalendar();BX.remove(this.calendar.additionalInfoOuter);var i=parseInt(this.calendar.util.config.init_year),s=parseInt(this.calendar.util.config.init_month);this.displayedRange={start:new Date(i,s-2,1),end:new Date(i,s+2,1)};this.calendar.setDisplayedViewRange(this.displayedRange);if(e.displayEntries!==false){this.displayEntries()}this.nothingToLoadNext=false;this.nothingToLoadPrevious=false};i.prototype.displayEntries=function(e){e=e||{};if(e.reloadEntries!==false){this.entries=this.entryController.getList({startDate:this.displayedRange.start,finishDate:this.displayedRange.end,viewRange:this.displayedRange,finishCallback:BX.proxy(this.displayEntries,this)})}BX.cleanNode(this.listWrap);this.dateGroupIndex={};this.groups=[];this.groupsDayCodes=[];this.groupsIndex={};this.entryListIndex={};if(this.entries===false||!this.entries||!this.entries.length){return this.showEmptyBlock()}if(this.noEntriesWrap){this.noEntriesWrap.style.display="none"}this.streamContentWrap.style.display="";this.entryParts=[];this.centerLoaderWrap.appendChild(BX.adjust(this.calendar.util.getLoader(),{style:{height:"180px"}}));this.attachEntries(this.entries,false,BX.delegate(this.focusOnDate,this))};i.prototype.displayResult=function(e){this.streamContentWrap.style.display="";if(this.filterLoaderWrap){this.filterLoaderWrap.style.display="none"}BX.addClass(this.streamContentWrap,"calendar-timeline-stream-search-result");BX.cleanNode(this.listWrap);this.dateGroupIndex={};this.groups=[];this.groupsDayCodes=[];this.groupsIndex={};this.entryListIndex={};this.resultEntries=e;this.resultEntriesIndex={};e.forEach(function(e,t){this.resultEntriesIndex[e.uid]=t},this);if(e===false||!e||!e.length){return this.showEmptyBlock()}if(this.noEntriesWrap){this.noEntriesWrap.style.display="none"}this.streamContentWrap.style.display="";this.entryParts=[];this.attachEntries(e,"next")};i.prototype.attachEntries=function(e,t,i){if(!e&&!e.length)return;var s=this.entries.length-e.length,a=s,r,n,o,d;e.forEach(function(e){e.globalIndex=a++;o=this.calendar.util.getDayCode(e.from);d=this.calendar.util.getDayCode(e.to);n=0;this.entryParts.push({index:n,dayCode:o,from:e.from,entry:e});if(o!=d){r=new Date(e.from.getTime()+this.calendar.util.dayLength);while(r.getTime()<e.to.getTime()){this.entryParts.push({index:++n,dayCode:this.calendar.util.getDayCode(r),from:r,entry:e});r=new Date(r.getTime()+this.calendar.util.dayLength)}e.lastPartIndex=n}},this);var l=false;this.entryParts.sort(function(e,t){if(e.dayCode==t.dayCode){if(e.entry.isTask()!==t.entry.isTask()){if(e.entry.isTask())return 1;if(t.entry.isTask())return-1}if(e.entry.isFullDay()!==t.entry.isFullDay()){if(e.entry.isFullDay())return-1;if(t.entry.isFullDay())return 1}}if(e.index>0||t.index>0){return!l?e.index-t.index:t.index-e.index}return!l?e.entry.from.getTime()-t.entry.from.getTime():t.entry.from.getTime()-e.entry.from.getTime()});this.today=new Date;this.animationMode=t;this.currentDisplayedEntry=0;this.actuallyAnimatedEntryCount=0;this.displayEntry(this.entryParts[this.currentDisplayedEntry],t,i)};i.prototype.displayEntry=function(e,t,i){var s;if(e.from.getTime()>this.today.getTime()&&!this.groups[this.groupsIndex[this.todayCode]]&&!this.filterMode){this.createEntryGroupForDate(this.today,t)}s=this.groups[this.groupsIndex[e.dayCode]];if(!s){this.createEntryGroupForDate(e.from,t);s=this.groups[this.groupsIndex[e.dayCode]]}if(s.emptyWarning){BX.remove(s.emptyWarning)}var a=this.getUniqueId(e);if(this.actuallyAnimatedEntryCount>this.animateAmount){t=false;this.animationMode=false}var r=!this.entryListIndex[a];if(r){this.entryListIndex[a]=true;var n,o,d,l=e.entry;this.entriesIndex[l.uid]=l.globalIndex;if(l.isFullDay()){n=BX.message("EC_ALL_DAY")}else if(l.isLongWithTime()){if(e.index===0)n=this.calendar.util.formatTime(l.from);else if(e.index===l.lastPartIndex)n=BX.message("EC_TILL_TIME").replace("#TIME#",this.calendar.util.formatTime(l.to));else n=BX.message("EC_ALL_DAY")}else{n=this.calendar.util.formatTime(l.from.getHours(),l.from.getMinutes())+" &ndash; "+this.calendar.util.formatTime(l.to.getHours(),l.to.getMinutes())}o=s.content.appendChild(BX.create("DIV",{attrs:{"data-bx-calendar-entry":l.uid},props:{className:"calendar-timeline-stream-content-event"+(t?" calendar-timeline-stream-section-event-animate-"+t:"")}}));o.appendChild(BX.create("DIV",{props:{className:"calendar-timeline-stream-content-event-time"},html:'<span class="calendar-timeline-stream-content-event-time-link">'+n+"</span>"}));var h=this.calendar.util.getTextLocation(l.location)||"";if(h){h='<span class="calendar-timeline-stream-content-event-location">('+BX.util.htmlspecialchars(h)+")</span>"}o.appendChild(BX.create("DIV",{props:{className:"calendar-timeline-stream-content-event-name"},html:'<span class="calendar-timeline-stream-content-event-color" style="background-color: '+l.color+'"></span><span class="calendar-timeline-stream-content-event-name-link">'+BX.util.htmlspecialchars(l.name)+"</span>"+h}));d=o.appendChild(BX.create("DIV",{props:{className:"calendar-timeline-stream-content-event-members"}}));if(l.isMeeting()&&l.getAttendees().length>0){this.showAttendees(d,l.getAttendees().filter(function(e){return e.STATUS=="Y"||e.STATUS=="H"}),l.getAttendees().length)}else if(l.isPersonal()){d.innerHTML=BX.message("EC_EVENT_IS_MINE")}e.DOM={};if(e.dayCode==this.todayCode&&BX.type.isFunction(i)){i()}}if(this.currentDisplayedEntry<this.entryParts.length-1){this.currentDisplayedEntry++;if(t&&r){this.actuallyAnimatedEntryCount++;setTimeout(BX.delegate(function(){this.displayEntry(this.entryParts[this.currentDisplayedEntry],t,i)},this),300)}else{if(this.currentDisplayedEntry%30==0){setTimeout(BX.delegate(function(){this.displayEntry(this.entryParts[this.currentDisplayedEntry],t,i)},this),1e3)}else{this.displayEntry(this.entryParts[this.currentDisplayedEntry],t,i)}}}else if(this.currentDisplayedEntry==this.entryParts.length-1&&!this.filterMode){this.animationMode=false;if(!this.groups[this.groupsIndex[this.todayCode]]){this.createEntryGroupForDate(this.today,t)}this.groupsDayCodes.sort();if(BX.type.isFunction(i)){i()}}};i.prototype.showAttendees=function(e,t,i){var s,a,r=5,n=t.length,o=7;if(n>0){if(n>o){n=r}for(s=0;s<n;s++){a=t[s]||{};e.appendChild(BX.create("IMG",{attrs:{id:"simple_view_popup_"+a.USER_ID,src:a.AVATAR||""},props:{title:a.DISPLAY_NAME,className:"calendar-member"}}));(function(e){setTimeout(function(){BX.tooltip(e,"simple_view_popup_"+e)},100)})(a.USER_ID)}if(n<t.length){var d=e.appendChild(BX.create("SPAN",{props:{className:"calendar-member-more-count"},text:" "+BX.message("EC_ATTENDEES_MORE").replace("#COUNT#",t.length-n),events:{click:BX.delegate(function(){this.showUserListPopup(d,t)},this)}}))}}};i.prototype.showUserListPopup=function(e,t){if(this.userListPopup)this.userListPopup.close();this.popup.setAutoHide(false);if(!t||!t.length)return;this.DOM.userListPopupWrap=BX.create("DIV",{props:{className:"calendar-user-list-popup-block"}});t.forEach(function(e){var t=this.DOM.userListPopupWrap.appendChild(BX.create("DIV",{props:{className:"calendar-slider-sidebar-user-container calendar-slider-sidebar-user-card"}}));t.appendChild(BX.create("DIV",{props:{className:"calendar-slider-sidebar-user-block-avatar"}})).appendChild(BX.create("DIV",{props:{className:"calendar-slider-sidebar-user-block-item"}})).appendChild(BX.create("IMG",{props:{width:34,height:34,src:e.AVATAR}}));t.appendChild(BX.create("DIV",{props:{className:"calendar-slider-sidebar-user-info"}})).appendChild(BX.create("A",{props:{href:e.URL?e.URL:"#",className:"calendar-slider-sidebar-user-info-name"},text:e.DISPLAY_NAME}))},this);this.userListPopup=new BX.PopupWindow(this.calendar.id+"-view-user-list-popup",e,{autoHide:true,closeByEsc:true,offsetTop:0,offsetLeft:0,width:220,resizable:false,lightShadow:true,content:this.DOM.userListPopupWrap,className:"calendar-user-list-popup",zIndex:4e3});this.userListPopup.setAngle({offset:36});this.userListPopup.show();BX.addCustomEvent(this.userListPopup,"onPopupClose",BX.delegate(function(){this.popup.setAutoHide(true);this.userListPopup.destroy()},this))};i.prototype.appendDateGroup=function(e,t,i){var s,a,r,n,o,d,l=t.getDate(),h=t.getMonth()+1,p=t.getFullYear();if(!this.dateGroupIndex[p]){n=Infinity;o=p;for(s in this.dateGroupIndex){if(this.dateGroupIndex.hasOwnProperty(s)){if(Math.abs(p-s)<n){n=Math.abs(p-s);o=s}if(n==1){break}}}this.dateGroupIndex[p]={node:BX.create("DIV",{attrs:{"data-bx-calendar-list-year":p}}),monthIndex:{}};if(o==p){this.listWrap.appendChild(this.dateGroupIndex[p].node)}else{if(p-o>0){if(this.dateGroupIndex[o].node.nextSibling){BX.insertAfter(this.dateGroupIndex[p].node,this.dateGroupIndex[o].node)}else{this.listWrap.appendChild(this.dateGroupIndex[p].node)}}else{this.listWrap.insertBefore(this.dateGroupIndex[p].node,this.dateGroupIndex[o].node)}}}if(!this.dateGroupIndex[p].monthIndex[h]){n=Infinity;o=h;for(a in this.dateGroupIndex[p].monthIndex){if(this.dateGroupIndex[p].monthIndex.hasOwnProperty(a)){if(Math.abs(h-a)<n){n=Math.abs(h-a);o=a}if(n==1){break}}}this.dateGroupIndex[p].monthIndex[h]={node:BX.create("DIV",{attrs:{"data-bx-calendar-list-month":h}}),dayIndex:{}};if(o==h){this.dateGroupIndex[p].node.appendChild(this.dateGroupIndex[p].monthIndex[h].node)}else{if(h-o>0){if(this.dateGroupIndex[p].monthIndex[o].node.nextSibling){BX.insertAfter(this.dateGroupIndex[p].monthIndex[h].node,this.dateGroupIndex[p].monthIndex[o].node)}else{this.dateGroupIndex[p].node.appendChild(this.dateGroupIndex[p].monthIndex[h].node)}}else{this.dateGroupIndex[p].monthIndex[o].node.parentNode.insertBefore(this.dateGroupIndex[p].monthIndex[h].node,this.dateGroupIndex[p].monthIndex[o].node)}}}if(!this.dateGroupIndex[p].monthIndex[h].dayIndex[l]){n=Infinity;o=l;d=this.dateGroupIndex[p].monthIndex;for(r in d[h].dayIndex){if(d[h].dayIndex.hasOwnProperty(r)){if(Math.abs(l-r)<n){n=Math.abs(l-r);o=r}if(n==1){break}}}d[h].dayIndex[l]={node:BX.create("DIV",{props:{className:"calendar-timeline-stream-day"},attrs:{"data-bx-calendar-list-day":l}})};if(o==l){d[h].node.appendChild(d[h].dayIndex[l].node)}else{if(l-o>0){if(d[h].dayIndex[o].node.nextSibling){BX.insertAfter(d[h].dayIndex[l].node,d[h].dayIndex[o].node)}else{d[h].node.appendChild(d[h].dayIndex[l].node)}}else{d[h].node.insertBefore(d[h].dayIndex[l].node,d[h].dayIndex[o].node)}}}if(d[h].dayIndex[l].node){d[h].dayIndex[l].node.appendChild(e)}else{}setTimeout(function(){e.style.opacity="1"},0)};i.prototype.hide=function(){t.prototype.hide.apply(this,arguments)};i.prototype.getAdjustedDate=function(e,t){if(!e){e=new Date}var i=this.calendar.getViewRangeDate(),s=false;if(e&&e.getTime){s=new Date(e.getTime())}return s};i.prototype.adjustViewRangeToDate=function(e,t){if(this.viewCont.style.display=="none"){var i=false;if(e&&e.getTime){i=new Date(e.getTime());i.setHours(0,0,0,0);this.currentDate=i;this.calendar.setViewRangeDate(i)}if(t!==false){this.fadeAnimation(this.getContainer(),100,BX.delegate(function(){this.show();this.getContainer().style.opacity=0;this.showAnimation(this.getContainer(),300)},this))}else{this.show()}}else{var s=this.calendar.util.getDayCode(e);var a=BX.util.array_search(s,this.groupsDayCodes);if(a>=0&&this.groupsDayCodes[a]){this.focusOnDate(this.groupsDayCodes[a],true)}}return i};i.prototype.increaseViewRangeDate=function(){var e=BX.util.array_search(this.focusedDayCode,this.groupsDayCodes);if(e>=0&&this.groupsDayCodes[e+1]){this.focusOnDate(this.groupsDayCodes[e+1],true)}};i.prototype.decreaseViewRangeDate=function(){var e=BX.util.array_search(this.focusedDayCode,this.groupsDayCodes);if(e>0&&this.groupsDayCodes[e-1]){this.focusOnDate(this.groupsDayCodes[e-1],true)}};i.prototype.createEntryGroupForDate=function(e,t){var i=this.calendar.util.getDayCode(e),s=Math.round(e.getTime()/1e3)*1e3,a={dayCode:i,wrap:BX.create("DIV",{props:{className:"calendar-timeline-stream-section-wrap"}})};a.titleNode=a.wrap.appendChild(BX.create("DIV",{props:{className:"calendar-timeline-stream-section calendar-timeline-section-date-label"},html:'<div data-bx-calendar-date="'+s+'" class="calendar-timeline-stream-section-content"><div class="'+(i==this.todayCode?"calendar-timeline-stream-today-label":"calendar-timeline-stream-label")+'">'+this.calendar.util.formatDateUsable(e)+"</div></div>"}));a.groupNode=a.wrap.appendChild(BX.create("DIV",{props:{className:"calendar-timeline-stream-section"}}));a.content=a.groupNode.appendChild(BX.create("DIV",{props:{className:"calendar-timeline-stream-section-content"}}));a.emptyWarning=a.content.appendChild(BX.create("DIV",{props:{className:"calendar-timeline-empty-section"},text:BX.message("EC_NO_EVENTS")}));this.groups.push(a);this.groupsIndex[i]=this.groups.length-1;this.groupsDayCodes.push(i);this.appendDateGroup(this.groups[this.groups.length-1].wrap,e,t)};i.prototype.focusOnDate=function(e,t){var i=false;if(BX.type.isDate(e))i=this.calendar.util.getDayCode(e);else if(BX.type.isString(e))i=e;else i=this.todayCode;BX.cleanNode(this.centerLoaderWrap);this.focusedDayCode=i;if(this.groupsIndex&&this.groups[this.groupsIndex[i]]){this.bottomLoaderBlock.style.height=this.SCROLL_DELTA_HEIGHT+Math.max(0,this.util.getViewHeight()+this.groups[this.groupsIndex[i]].wrap.offsetTop-this.bottomLoaderBlock.offsetTop)+"px";if(t&&this.streamScrollWrap){new BX.easing({duration:300,start:{scrollTop:this.streamScrollWrap.scrollTop},finish:{scrollTop:this.groups[this.groupsIndex[i]].wrap.offsetTop},transition:BX.easing.makeEaseOut(BX.easing.transitions.quad),step:BX.delegate(function(e){this.streamScrollWrap.scrollTop=e.scrollTop},this),complete:BX.delegate(function(){this.streamScrollWrap.scrollTop=this.groups[this.groupsIndex[i]].wrap.offsetTop},this)}).animate()}else{setTimeout(BX.delegate(function(){if(this.streamScrollWrap&&this.groupsIndex[i]!==undefined&&this.groups[this.groupsIndex[i]]){this.streamScrollWrap.scrollTop=this.groups[this.groupsIndex[i]].wrap.offsetTop}},this),200)}}};i.prototype.scrollHandle=function(){if(!this.filterMode){if(this.streamScrollWrap.scrollHeight-this.util.getViewHeight()-this.streamScrollWrap.scrollTop<this.SCROLL_DELTA_HEIGHT&&!this.nothingToLoadNext){this.loadMoreEntries({mode:"next"})}else if(this.streamScrollWrap.scrollTop<this.SCROLL_DELTA_HEIGHT&&!this.nothingToLoadPrevious){this.loadMoreEntries({mode:"previous"})}}};i.prototype.loadMoreEntries=function(e){if(this.currentLoadMode||this.filterMode){return}this.currentLoadMode=e.mode;if(e.mode=="next"){this.loader=this.bottomLoaderBlock.appendChild(BX.adjust(this.calendar.util.getLoader(),{style:{height:"180px"}}));this.entryController.getList({loadNext:true,loadLimit:this.loadLimit,startDate:new Date(this.displayedRange.end.getFullYear(),this.displayedRange.end.getMonth(),this.displayedRange.end.getDate()+1),finishCallback:BX.proxy(this.loadMoreCallback,this)})}else{this.loader=this.topLoaderBlock.appendChild(BX.adjust(this.calendar.util.getLoader(),{style:{height:"180px"}}));this.entryController.getList({loadPrevious:true,loadLimit:this.loadLimitPrevious,finishDate:new Date(this.displayedRange.start.getFullYear(),this.displayedRange.start.getMonth(),this.displayedRange.start.getDate()-1),finishCallback:BX.proxy(this.loadMoreCallback,this)})}};i.prototype.loadMoreCallback=function(e){BX.remove(this.loader);this.displayedRange=this.calendar.entryController.getLoadedEntiesLimits();var t=this.entryController.getList({startDate:this.displayedRange.start,finishDate:this.displayedRange.end,finishCallback:BX.proxy(this.loadMoreCallback,this)});if(this.currentLoadMode=="next"&&e.finish)this.nothingToLoadNext=true;if(this.currentLoadMode=="previous"&&e.finish)this.nothingToLoadPrevious=true;if(!this.entries)this.entries=[];if(t&&t.length){this.entries=this.entries.concat(t);this.attachEntries(t,this.currentLoadMode=="next"?"next":false)}this.currentLoadMode=false};i.prototype.getUniqueId=function(e){return e.entry.uid+"|"+e.dayCode};i.prototype.handleClick=function(e){if(this.isActive()){if(!e)e={};var t,i;if(e.specialTarget&&(i=e.specialTarget.getAttribute("data-bx-calendar-entry"))){this.handleEntryClick({uid:i,specialTarget:e.specialTarget,target:e.target,e:e.e})}else if(e.specialTarget&&(t=e.specialTarget.getAttribute("data-bx-calendar-show-all-events"))){}else if(!this.calendar.util.readOnlyMode()&&this.entryController.canDo(true,"add_event")&&(t=e.specialTarget&&e.specialTarget.getAttribute("data-bx-calendar-week-day"))){this.deselectEntry();this.showSimplePopupForNewEntry({entry:this.buildTopNewEntryWrap({dayFrom:this.days[this.dayIndex[t]],holder:this.topEntryHolder})})}}};i.prototype.showEmptyBlock=function(t){if(!this.noEntriesWrap){this.noEntriesWrap=this.streamScrollWrap.appendChild(BX.create("DIV",{props:{className:"calendar-search-main"},style:{height:this.util.getViewHeight()+"px"}}));var i=this.noEntriesWrap.appendChild(BX.create("DIV",{props:{className:"calendar-search-empty"},html:'<div class="calendar-search-empty-name">'+BX.message("EC_NO_EVENTS")+"</div>"}));if(!this.calendar.util.readOnlyMode()){this.addButton=i.appendChild(BX.create("SPAN",{props:{className:"calendar-search-empty-link"},text:BX.message("EC_CREATE_EVENT"),events:{click:BX.proxy(function(){if(!this.calendar.editSlider){this.calendar.editSlider=new e.BXEventCalendar.EditEntrySlider(this.calendar)}this.calendar.editSlider.show({})},this)}}))}}this.streamContentWrap.style.display="none";this.noEntriesWrap.style.display=""};i.prototype.applyFilterMode=function(){this.filterMode=true;this.calendar.viewTitleContainer.style.display="none";this.calendar.navigationWrap.style.display="none";if(this.searchHead){BX.remove(this.searchHead)}this.searchHead=this.calendar.topBlock.appendChild(BX.create("DIV",{props:{className:"calendar-search-head"},html:'<div class="calendar-search-name">'+BX.message("EC_SEARCH_RESULT")+"</div>"}));if(this.resettFilterWrap){BX.remove(this.resettFilterWrap)}this.resettFilterWrap=this.searchHead.appendChild(BX.create("DIV",{props:{className:"calendar-search-cancel"},html:BX.message("EC_SEARCH_RESET_RESULT"),events:{click:BX.proxy(this.resetFilterMode,this)}}));if(this.streamScrollWrap){this.streamContentWrap.style.display="none";this.filterLoaderWrap.style.display=""}};i.prototype.resetFilterMode=function(e){this.filterMode=false;this.resultEntries=[];this.calendar.viewTitleContainer.style.display="";this.calendar.navigationWrap.style.display="";this.setTitle();if(this.searchHead){BX.remove(this.searchHead)}if(this.resettFilterWrap){BX.remove(this.resettFilterWrap)}this.streamContentWrap.style.display="";if(this.filterLoaderWrap){this.filterLoaderWrap.style.display="none"}if(!e||e.resetSearchFilter!==false){this.calendar.search.resetFilter()}if(this.isActive()){this.displayEntries()}};i.prototype.handleEntryClick=function(e){if(this.filterMode&&this.resultEntriesIndex[e.uid]!==undefined){e.entry=this.resultEntries[this.resultEntriesIndex[e.uid]]}t.prototype.handleEntryClick.apply(this,arguments)};if(e.BXEventCalendar){e.BXEventCalendar.CalendarListView=i}else{BX.addCustomEvent(e,"onBXEventCalendarInit",function(){e.BXEventCalendar.CalendarListView=i})}})(window);