{"version":3,"file":"added-users.bundle.js","sources":["../src/added-users.js"],"sourcesContent":["import { Messenger } from 'im.public';\nimport { BaseMessage } from 'im.v2.component.message.base';\nimport { UserListPopup } from 'im.v2.component.elements';\n\nimport './css/copilot-added-users-message.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelMessage } from 'im.v2.model';\n\n// @vue/component\nexport const ChatCopilotAddedUsersMessage = {\n\tname: 'ChatCopilotAddedUsersMessage',\n\tcomponents: { BaseMessage, UserListPopup },\n\tprops: {\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tshowMoreUsers: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tmessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\taddedUsers(): {first: number, restUsers: number[]}\n\t\t{\n\t\t\tconst addedUsers = this.message.componentParams.addedUsers;\n\t\t\tconst firstAddedUser = addedUsers.shift();\n\n\t\t\treturn {\n\t\t\t\tfirst: firstAddedUser,\n\t\t\t\trestUsers: addedUsers,\n\t\t\t};\n\t\t},\n\t\tfirstAddedUserName(): string\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](this.addedUsers.first).name;\n\t\t},\n\t\tandMoreAddedUsers(): string\n\t\t{\n\t\t\tif (this.addedUsers.restUsers.length === 0)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.loc('IM_MESSAGE_COPILOT_ADDED_USERS_DESCRIPTION_MORE', {\n\t\t\t\t'#NAME#': '',\n\t\t\t\t'#COUNT#': this.addedUsers.restUsers.length,\n\t\t\t});\n\t\t},\n\t\tpreparedDescription(): string\n\t\t{\n\t\t\treturn this.loc('IM_MESSAGE_COPILOT_ADDED_USERS_DESCRIPTION_MENTION_MSGVER_1', {\n\t\t\t\t'#BR#': '\\n',\n\t\t\t});\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tonFirstAddedUserClick()\n\t\t{\n\t\t\tMessenger.openChat(this.addedUsers.first.toString());\n\t\t},\n\t\tonMoreUsersClick()\n\t\t{\n\t\t\tthis.showMoreUsers = true;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseMessage\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:item=\"item\"\n\t\t\t:withContextMenu=\"false\"\n\t\t\t:withReactions=\"false\"\n\t\t\t:withBackground=\"false\"\n\t\t>\n\t\t\t<div class=\"bx-im-message-copilot-added-users__container\">\n\t\t\t\t<div class=\"bx-im-message-copilot-added-users__image\"></div>\n\t\t\t\t<div class=\"bx-im-message-copilot-added-users__content\">\n\t\t\t\t\t<div class=\"bx-im-message-copilot-added-users__title\">\n\t\t\t\t\t\t{{ loc('IM_MESSAGE_COPILOT_ADDED_USERS_TITLE') }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"bx-im-message-copilot-added-users__description\"\n\t\t\t\t\t\t:title=\"preparedDescription\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ preparedDescription }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bx-im-message-copilot-added-users__users\"> \n\t\t\t\t\t\t<span class=\"bx-im-message-copilot-added-users__user\" @click=\"onFirstAddedUserClick\">\n\t\t\t\t\t\t\t{{ firstAddedUserName }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<span\n\t\t\t\t\t\t\tv-if=\"andMoreAddedUsers\"\n\t\t\t\t\t\t\tclass=\"bx-im-message-copilot-added-users__user\"\n\t\t\t\t\t\t\t@click=\"onMoreUsersClick\"\n\t\t\t\t\t\t\tref=\"addedUsersLink\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ andMoreAddedUsers }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<UserListPopup\n\t\t\t\t:showPopup=\"showMoreUsers\"\n\t\t\t\t:userIds=\"addedUsers.restUsers\"\n\t\t\t\t:contextDialogId=\"dialogId\"\n\t\t\t\t:bindElement=\"$refs.addedUsersLink || {}\"\n\t\t\t\t:withAngle=\"false\"\n\t\t\t\t:forceTop=\"true\"\n\t\t\t\t@close=\"showMoreUsers = false\"\n\t\t\t/>\n\t\t</BaseMessage>\n\t`,\n};\n"],"names":["ChatCopilotAddedUsersMessage","name","components","BaseMessage","UserListPopup","props","item","type","Object","required","dialogId","String","data","showMoreUsers","computed","message","addedUsers","componentParams","firstAddedUser","shift","first","restUsers","firstAddedUserName","$store","getters","andMoreAddedUsers","length","loc","preparedDescription","methods","phraseCode","replacements","$Bitrix","Loc","getMessage","onFirstAddedUserClick","Messenger","openChat","toString","onMoreUsersClick","template"],"mappings":";;;;;;;;CASA;AACA,OAAaA,4BAA4B,GAAG;GAC3CC,IAAI,EAAE,8BAA8B;GACpCC,UAAU,EAAE;kBAAEC,wCAAW;oBAAEC;IAAe;GAC1CC,KAAK,EAAE;KACNC,IAAI,EAAE;OACLC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDC,QAAQ,EAAE;OACTH,IAAI,EAAEI,MAAM;OACZF,QAAQ,EAAE;;IAEX;GACDG,IAAI,GACJ;KACC,OAAO;OACNC,aAAa,EAAE;MACf;IACD;GACDC,QAAQ,EACR;KACCC,OAAO,GACP;OACC,OAAO,IAAI,CAACT,IAAI;MAChB;KACDU,UAAU,GACV;OACC,MAAMA,UAAU,GAAG,IAAI,CAACD,OAAO,CAACE,eAAe,CAACD,UAAU;OAC1D,MAAME,cAAc,GAAGF,UAAU,CAACG,KAAK,EAAE;OAEzC,OAAO;SACNC,KAAK,EAAEF,cAAc;SACrBG,SAAS,EAAEL;QACX;MACD;KACDM,kBAAkB,GAClB;OACC,OAAO,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,WAAW,CAAC,CAAC,IAAI,CAACR,UAAU,CAACI,KAAK,CAAC,CAACnB,IAAI;MACnE;KACDwB,iBAAiB,GACjB;OACC,IAAI,IAAI,CAACT,UAAU,CAACK,SAAS,CAACK,MAAM,KAAK,CAAC,EAC1C;SACC,OAAO,EAAE;;OAGV,OAAO,IAAI,CAACC,GAAG,CAAC,iDAAiD,EAAE;SAClE,QAAQ,EAAE,EAAE;SACZ,SAAS,EAAE,IAAI,CAACX,UAAU,CAACK,SAAS,CAACK;QACrC,CAAC;MACF;KACDE,mBAAmB,GACnB;OACC,OAAO,IAAI,CAACD,GAAG,CAAC,6DAA6D,EAAE;SAC9E,MAAM,EAAE;QACR,CAAC;;IAEH;GACDE,OAAO,EACP;KACCF,GAAG,CAACG,UAAkB,EAAEC,YAAmC,GAAG,EAAE,EAChE;OACC,OAAO,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,UAAU,CAACJ,UAAU,EAAEC,YAAY,CAAC;MAC5D;KACDI,qBAAqB,GACrB;OACCC,mBAAS,CAACC,QAAQ,CAAC,IAAI,CAACrB,UAAU,CAACI,KAAK,CAACkB,QAAQ,EAAE,CAAC;MACpD;KACDC,gBAAgB,GAChB;OACC,IAAI,CAAC1B,aAAa,GAAG,IAAI;;IAE1B;GACD2B,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA8CZ,CAAC;;;;;;;;"}