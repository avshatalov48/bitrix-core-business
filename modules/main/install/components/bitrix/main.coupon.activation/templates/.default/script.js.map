{"version":3,"file":"script.js","sources":["src/content/base-content.js","src/content/loader.js","src/request.js","src/error-collection.js","src/content/activate.js","src/content/success.js","src/content/partner.js","src/content/expired-license.js","src/popup.js"],"sourcesContent":["import {Tag} from \"main.core\";\nimport {Popup} from \"main.popup\";\n\nexport default class BaseContent\n{\n\tgetContent(): HTMLElement\n\t{\n\t\treturn Tag.render('<div></div>');\n\t}\n\n\tgetButtonCollection(): Array\n\t{\n\t\treturn [];\n\t}\n\n\tinit(popup: Popup): void\n\t{\n\n\t}\n}","import { Loc, Tag } from 'main.core';\nimport BaseContent from './base-content';\nimport { Loader } from 'main.loader';\n\nexport class Loading extends BaseContent\n{\n\n\tgetContent()\n\t{\n\t\tconst loaderNode = Tag.render`\n\t\t\t<div class=\"license-intranet-popup__loader\"></div>\n\t\t`;\n\n\t\tconst primaryColor = getComputedStyle(document.body).getPropertyValue('--ui-color-primary');\n\n\t\tconst loader = new Loader({\n\t\t\ttarget: loaderNode,\n\t\t\tsize: 133,\n\t\t\tcolor: primaryColor || '#2fc6f6',\n\t\t});\n\n\t\tloader.show();\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"license-intranet-popup__content --loader\">\n\t\t\t\t${loaderNode}\n\t\t\t\t<div class=\"license-intranet-popup__loader-title\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_PLEASE_WAIT')}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tinit(popup: Popup): void\n\t{\n\t\tpopup.setContent(this.getContent());\n\t\tpopup.setButtons(this.getButtonCollection());\n\t}\n}","import {ajax} from \"main.core\";\nimport {EventEmitter} from \"main.core.events\";\n\nexport class Request\n{\n\t#componentName = 'bitrix:main.coupon.activation';\n\t#action = 'activate';\n\t#method = 'POST';\n\t#mode = 'class';\n\n\tconstructor(action: string, method: string = 'POST', mode: string = 'class') {\n\t\tthis.#action = action;\n\t\tthis.#method = method;\n\t\tthis.#mode = mode;\n\t}\n\n\tsend(data = {})\n\t{\n\t\treturn ajax.runComponentAction(this.#componentName, this.#action, {\n\t\t\tmode: this.#mode,\n\t\t\tdata: data,\n\t\t\tmethod: this.#method,\n\t\t})\n\t}\n}","import {Loc, Type} from \"main.core\";\n\nexport class ErrorCollection\n{\n\t#errors: Array = [];\n\t#balloon: ?BX.UI.Notification.Balloon;\n\n\tconstructor(errors: Array = []) {\n\t\tthis.addErrors(errors);\n\t}\n\n\taddErrors(errors: Array)\n\t{\n\t\tthis.#errors = [...this.#errors, ...errors];\n\t}\n\n\tcleanErrors()\n\t{\n\t\tthis.#errors = [];\n\t}\n\n\thideErrors()\n\t{\n\t\tif (!Type.isNil(this.#balloon))\n\t\t{\n\t\t\tthis.#balloon.activateAutoHide();\n\t\t}\n\t}\n\n\tshow()\n\t{\n\t\tif (this.#errors.length <= 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#balloon = BX.UI.Notification.Center.notify({\n\t\t\tcontent: [\n\t\t\t\t`<strong>${Loc.getMessage('MAIN_COUPON_ACTIVATION_TITLE_ERROR')}</strong><br>`,\n\t\t\t\tthis.#errors.map((value) => {\n\t\t\t\t\treturn value.message;\n\t\t\t\t}).join('</br>'),\n\t\t\t].join(''),\n\t\t\tposition: 'top-right',\n\t\t\tcategory: 'menu-self-item-popup',\n\t\t\tautoHideDelay: 300000\n\t\t});\n\n\t}\n}","import BaseContent from \"./base-content\";\nimport {Loc, Tag, Type} from \"main.core\";\nimport {Button} from \"ui.buttons\";\nimport {EventEmitter} from \"main.core.events\";\nimport {Popup} from \"main.popup\";\nimport {Loading} from \"./loader\";\nimport {Request} from \"../request\";\nimport {ErrorCollection} from \"../error-collection\";\nexport class Activate extends BaseContent\n{\n\t#formData: FormData;\n\t#errors: ErrorCollection;\n\t#supportLink: string;\n\t#docLink: string;\n\n\tconstructor(supportLink: ?string, docLink: ?string, errors: Array = []) {\n\t\tsuper();\n\t\tthis.#errors = errors.length > 0 ? new ErrorCollection(errors) : new ErrorCollection();\n\t\tthis.#formData = new FormData();\n\t\tthis.#supportLink = !Type.isNil(supportLink) ? supportLink : '';\n\t\tthis.#docLink = !Type.isNil(docLink) ? docLink : '';\n\t}\n\n\tgetContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<form id=\"intranet-license-activate-key-form\">\n\t\t\t<div class=\"license-intranet-popup__content --key-activate\">\n\t\t\t\t<div class=\"license-intranet-popup__block --center\">\n\t\t\t\t\t<div class=\"license-intranet-popup__title\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_TITLE_ACTIVATE_KEY')}</div>\n\t\t\t\t\t<div class=\"license-intranet-popup__text\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_SUBTITLE_ACTIVATE_KEY', {'#SUPPORT_LINK#': this.#supportLink})}</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"license-intranet-popup__buttons\">\n\t\t\t\t\t${this.renderRefreshPageBtn().render()}\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"license-intranet-popup__block --input-area\">\n\t\t\t\t\t<div class=\"ui-form licence-key-form\">\n\t\t\t\t\t\t<div class=\"ui-form-row ui-form-row-inline\">\n\t\t\t\t\t\t\t\t<div class=\"ui-form-label\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-label-text\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_LICENSE_KEY_FIELD')}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div class=\"ui-form-content\">\n\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\t\t\tname=\"key\"\n\t\t\t\t\t\t\t\t\t\t\tvalue=\"${this.#formData.get('key') ?? ''}\"\n\t\t\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element licence-key-form__input\"\n\t\t\t\t\t\t\t\t\t\t\tplaceholder=\"XXXX-XXXX-XXXX-XXXX-XX\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t${this.getSendBtn().render()}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<a class=\"license-intranet-popup__help-link\"\n\t\t\t\ttarget=\"_blank\"\n\t\t\t\thref=\"${this.#docLink}\"\n\t\t\t>\n\t\t\t\t${Loc.getMessage('MAIN_COUPON_ACTIVATION_BUTTON_NEED_HELP')}\n\t\t\t</a>\n\t\t\t</div>\n\t\t\t</form>\n\t\t`;\n\t}\n\n\tgetSendBtn(): Button\n\t{\n\t\treturn new Button({\n\t\t\ttext: '',\n\t\t\tnoCaps: false,\n\t\t\tround: true,\n\t\t\tclassName: 'ui-btn-icon-add licence-key-form__submit-btn',\n\t\t\tsize: BX.UI.Button.Size.MEDIUM,\n\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t\ttag: BX.UI.Button.Tag.BUTTON,\n\t\t\tonclick: () => {\n\t\t\t\tconst formNode = document.querySelector('#intranet-license-activate-key-form');\n\t\t\t\tconst formData = new FormData(formNode);\n\t\t\t\tthis.#errors.hideErrors();\n\t\t\t\tthis.#errors.cleanErrors();\n\n\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'MainCouponActivation:changeContent', {\n\t\t\t\t\tsource: this,\n\t\t\t\t\ttarget: new Loading()\n\t\t\t\t});\n\n\t\t\t\tthis.#formData = formData;\n\t\t\t\tconst request = new Request('activate', 'POST', 'class');\n\t\t\t\trequest.send(formData).then(this.successHandler.bind(this), this.failureHandler.bind(this))\n\t\t\t},\n\t\t});\n\t}\n\n\tinit(popup: Popup): void\n\t{\n\t\tpopup.setContent(this.getContent());\n\t\tthis.#errors.show();\n\t}\n\n\tsuccessHandler(): void\n\t{\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'MainCouponActivation:back', {\n\t\t\tsource: this,\n\t\t});\n\t\tdocument.location.href = '/';\n\t}\n\n\tfailureHandler(event): void\n\t{\n\t\tthis.#errors = new ErrorCollection(event.errors);\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'MainCouponActivation:back', {\n\t\t\tsource: this,\n\t\t});\n\t}\n\n\t#checkRequest(): void\n\t{\n\t\tconst request = new Request('check');\n\t\trequest.send().then(this.successHandler.bind(this), this.failureHandler.bind(this));\n\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'MainCouponActivation:changeContent', {\n\t\t\tsource: this,\n\t\t\ttarget: new Loading()\n\t\t});\n\t}\n\n\trenderRefreshPageBtn(): Button\n\t{\n\t\treturn  new Button({\n\t\t\ttext: Loc.getMessage('MAIN_COUPON_ACTIVATION_BUTTON_REFRESH_PAGE'),\n\t\t\tnoCaps: false,\n\t\t\tround: true,\n\t\t\tsize: BX.UI.Button.Size.LARGE,\n\t\t\tcolor: BX.UI.Button.Color.SUCCESS,\n\t\t\ttag: BX.UI.Button.Tag.BUTTON,\n\t\t\tonclick: () => {\n\t\t\t\tthis.#checkRequest();\n\t\t\t},\n\t\t});\n\t}\n}","import { Loc, Tag } from 'main.core';\nimport BaseContent from './base-content';\nimport { Loader } from 'main.loader';\n\nexport class Success extends BaseContent\n{\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div id=\"intranet-license-partner-form\">\n\t\t\t\t<div class=\"license-intranet-popup__content --partner-success\">\n\t\t\t\t\t<div class=\"intranet-license-partner-form__success-icon\"></div>\n\t\t\t\t\t<div class=\"license-intranet-popup__title\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_TITLE_PARTNER_SUCCESS')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`\n\t}\n\n\tinit(popup: Popup): void\n\t{\n\t\tpopup.setContent(this.getContent());\n\t\tpopup.setButtons(this.getButtonCollection());\n\t}\n}","import BaseContent from \"./base-content\";\nimport {Loc, Tag, Type} from \"main.core\";\nimport {Button} from \"ui.buttons\";\nimport {EventEmitter} from \"main.core.events\";\nimport {Popup} from \"main.popup\";\nimport { Alert, AlertColor, AlertIcon, AlertSize } from 'ui.alerts';\nimport {Loading} from \"./loader\";\nimport {Request} from \"../request\";\nimport {Success} from \"./success\";\nimport {ErrorCollection} from \"../error-collection\";\nexport class Partner extends BaseContent\n{\n\t#formData: FormData;\n\t#errors: ErrorCollection;\n\n\tconstructor(parameters: Object) {\n\t\tsuper();\n\t\tthis.#errors = new ErrorCollection();\n\t\tthis.#formData = new FormData();\n\t\tthis.#formData.set('name', Type.isString(parameters?.NAME) ? parameters.NAME : '');\n\t\tthis.#formData.set('phone', Type.isString(parameters?.PHONE) ? parameters.PHONE : '');\n\t\tthis.#formData.set('email', Type.isString(parameters?.EMAIL) ? parameters.EMAIL : '');\n\n\t}\n\tgetAlert(text: string): Alert\n\t{\n\t\tconst alert = new Alert({\n\t\t\tcolor: AlertColor.DANGER,\n\t\t\ticon: AlertIcon.DANGER,\n\t\t\tsize: AlertSize.SMALL\n\t\t});\n\n\t\tif (text)\n\t\t{\n\t\t\talert.setText(text);\n\t\t}\n\n\t\treturn alert.getContainer();\n\t}\n\n\tgetContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<form id=\"main-coupon-activate-partner-form\">\n\t\t\t<div id=\"intranet-license-partner-form\">\n\t\t\t\t<div class=\"license-intranet-popup__content --partner\">\n\t\t\t\t\t<div class=\"license-intranet-popup__block --center\">\n\t\t\t\t\t\t<div class=\"license-intranet-popup__title\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_TITLE_PARTNER')}</div>\n\t\t\t\t\t\t<div class=\"license-intranet-popup__text ui-typography-text-lg\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_SUBTITLE_PARTNER')}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<div class=\"license-intranet-popup__partner-form\">\n\t\t\t\t\t\t<div class=\"license-intranet-popup__block --input-area\">\n\t\t\t\t\t\t\t<div class=\"license-intranet-popup__input-label\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_NAME_FIELD')}</div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input type=\"text\" name=\"name\" value=\"${this.#formData.get('name') ?? ''}\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t   </div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"license-intranet-popup__block --input-area\">\n\t\t\t\t\t\t\t<div class=\"license-intranet-popup__input-label\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_PHONE_FIELD')}</div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input type=\"text\" name=\"phone\" value=\"${this.#formData.get('phone') ?? ''}\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"license-intranet-popup__block --input-area\">\n\t\t\t\t\t\t\t<div class=\"license-intranet-popup__input-label\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_EMAIL_FIELD')}</div>\n\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t\t\t\t\t\t<input type=\"text\" name=\"email\" value=\"${this.#formData.get('email') ?? ''}\" class=\"ui-ctl-element\">\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t</form>\n\t\t`;\n\t}\n\n\tgetSuccessContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div id=\"intranet-license-partner-form\">\n\t\t\t\t<div class=\"license-intranet-popup__content --partner-success\">\n\t\t\t\t\t<div class=\"intranet-license-partner-form__success-icon\"></div>\n\t\t\t\t\t<div class=\"license-intranet-popup__title\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_TITLE_PARTNER_SUCCESS')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`\n\t}\n\n\tgetButtonCollection(): Array\n\t{\n\t\tconst sendBtn = new Button({\n\t\t\ttext: Loc.getMessage('MAIN_COUPON_ACTIVATION_BUTTON_SEND'),\n\t\t\tnoCaps: false,\n\t\t\tround: true,\n\t\t\tsize: BX.UI.Button.Size.LARGE,\n\t\t\tcolor: BX.UI.Button.Color.SUCCESS,\n\t\t\ttag: BX.UI.Button.Tag.BUTTON,\n\t\t\tonclick: () => {\n\t\t\t\tconst formNode = document.querySelector('#main-coupon-activate-partner-form');\n\t\t\t\tconst formData = new FormData(formNode);\n\t\t\t\tthis.#errors.hideErrors();\n\t\t\t\tthis.#errors.cleanErrors();\n\n\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'MainCouponActivation:changeContent', {\n\t\t\t\t\tsource: this,\n\t\t\t\t\ttarget: new Loading()\n\t\t\t\t});\n\n\t\t\t\tthis.#formData = formData;\n\t\t\t\tconst request = new Request('queryPartner', 'POST', 'class');\n\t\t\t\trequest.send(formData).then(this.successHandler.bind(this), this.failureHandler.bind(this))\n\t\t\t},\n\t\t});\n\n\t\treturn [sendBtn];\n\t}\n\n\tinit(popup: Popup): void\n\t{\n\t\tpopup.setContent(this.getContent());\n\t\tpopup.setButtons(this.getButtonCollection());\n\t\tthis.#errors.show();\n\t}\n\n\tsuccessHandler(): void\n\t{\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'MainCouponActivation:changeContent', {\n\t\t\tsource: this,\n\t\t\ttarget: new Success()\n\t\t});\n\t}\n\n\tfailureHandler(event): void\n\t{\n\t\tthis.#errors = new ErrorCollection(event.errors);\n\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'MainCouponActivation:back', {\n\t\t\tsource: this,\n\t\t});\n\t}\n\n\n}","import BaseContent from \"./base-content\";\nimport {Loc, Tag, Type} from \"main.core\";\nimport {Button} from \"ui.buttons\";\nimport {EventEmitter} from \"main.core.events\";\nimport {Popup} from \"main.popup\";\nimport {Activate} from \"./activate\";\nimport {Request} from \"../request\";\nimport {Loading} from \"./loader\";\nimport {Partner} from \"./partner\";\n\nexport class ExpiredLicense extends BaseContent\n{\n\tstatic stateTypes = {\n\t\tLICENSE_EXPIRED: 'license_expired',\n\t\tLICENSE_ACTIVATED: 'license_activated',\n\t\tUPDATE_SERVER_IS_UNAVAILABLE: 'update_server_is_unavailable',\n\t};\n\n\t#buyLink: string;\n\n\t#partnerId: number;\n\n\t#state: ?string = null;\n\n\t#parameters: Object = [];\n\n\tconstructor(buyLink: string, partnerId: number = 0, parameters: Object = [])\n\t{\n\t\tsuper();\n\t\tthis.#partnerId = partnerId;\n\t\tthis.#buyLink = buyLink?.length > 0 ? buyLink : 'https://www.1c-bitrix.ru/personal/order/basket.php';\n\t\tthis.#parameters = parameters;\n\t}\n\n\tgetContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"license-intranet-popup__content --access-closed\">\n\t\t\t\t<div class=\"license-intranet-popup__block\">\n\t\t\t\t\t<div class=\"license-intranet-popup__title\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_LICENSE_OVER_TITLE')}</div>\n\t\t\t\t\t<div class=\"license-intranet-popup__content-area\">\n\t\t\t\t\t\t<p class=\"license-intranet-popup__text ui-typography-text-lg\">${Loc.getMessage('MAIN_COUPON_ACTIVATION_LICENSE_OVER_DESCRIPTION')}</p>\n\t\t\t\t\t\t<div class=\"license-intranet-popup__buttons\">\n\t\t\t\t\t\t\t<div class=\"license-intranet-popup__button --renew-license\">\n\t\t\t\t\t\t\t\t${this.#createBuyBtn().render()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"license-intranet-popup__button\">\n\t\t\t\t\t\t\t\t${this.#createPartnerBtn().render()}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<a class=\"license-intranet-popup__help-link\"\n\t\t\t\t\t\t\ttarget=\"_blank\"\n\t\t\t\t\t\t\thref=\"${this.#parameters.DOC_LINK}\"\n\t\t\t\t\t\t>\n\t\t\t\t${Loc.getMessage('MAIN_COUPON_ACTIVATION_BUTTON_NEED_HELP')}\n\t\t\t</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetButtonCollection(): Array\n\t{\n\t\treturn [];\n\t}\n\n\t#createPartnerBtn(): Button\n\t{\n\t\treturn new Button({\n\t\t\ttext: Loc.getMessage('MAIN_COUPON_ACTIVATION_BUTTON_PARTNER'),\n\t\t\tnoCaps: false,\n\t\t\tround: true,\n\t\t\tsize: BX.UI.Button.Size.LARGE,\n\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t\ttag: BX.UI.Button.Tag.BUTTON,\n\t\t\tonclick: () => {\n\t\t\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'MainCouponActivation:changeContent', {\n\t\t\t\t\tsource: this,\n\t\t\t\t\ttarget: new Partner(this.#parameters)\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t}\n\n\t#createBuyBtn(): Button\n\t{\n\t\treturn new Button({\n\t\t\ttext: Loc.getMessage('MAIN_COUPON_ACTIVATION_BUTTON_RENEW'),\n\t\t\tnoCaps: false,\n\t\t\tround: true,\n\t\t\tlink: this.#buyLink,\n\t\t\tsize: BX.UI.Button.Size.LARGE,\n\t\t\tcolor: BX.UI.Button.Color.SUCCESS,\n\t\t\ttag: BX.UI.Button.Tag.LINK,\n\t\t\tprops: {\n\t\t\t\ttarget: '_blank'\n\t\t\t}\n\t\t});\n\t}\n\n\t#checkRequest(): void\n\t{\n\t\tconst request = new Request('check');\n\t\trequest.send().then(this.successHandler.bind(this), this.failureHandler.bind(this));\n\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'MainCouponActivation:changeContent', {\n\t\t\tsource: this,\n\t\t\ttarget: new Loading()\n\t\t});\n\t}\n\n\tinit(popup: Popup): void\n\t{\n\t\tif (Type.isNil(this.#state))\n\t\t{\n\t\t\tthis.#checkRequest();\n\t\t}\n\t\telse if (this.#state === ExpiredLicense.stateTypes.LICENSE_ACTIVATED)\n\t\t{\n\t\t\tdocument.location.href = '/';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tpopup.setContent(this.getContent());\n\t\t}\n\t}\n\n\tsuccessHandler(response): void\n\t{\n\t\tconst expireDate = new Date(response.data.DATE_TO_SOURCE);\n\t\tif (!Type.isNil(response.data.DATE_TO_SOURCE) && expireDate.getTime() > (new Date).getTime())\n\t\t{\n\t\t\tthis.#state = ExpiredLicense.stateTypes.LICENSE_ACTIVATED;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#state = ExpiredLicense.stateTypes.LICENSE_EXPIRED;\n\t\t}\n\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'MainCouponActivation:back', {\n\t\t\tsource: this,\n\t\t});\n\t}\n\n\tfailureHandler(response): void\n\t{\n\t\tthis.#state = ExpiredLicense.stateTypes.UPDATE_SERVER_IS_UNAVAILABLE;\n\n\t\tlet errors = Type.isArray(response.errors) ? response.errors : [];\n\t\t// let errors = [];\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'MainCouponActivation:changeContent', {\n\t\t\tsource: this,\n\t\t\ttarget: new Activate(this.#parameters.SUPPORT_LINK, this.#parameters.DOC_LINK, errors)\n\t\t});\n\t}\n}","import {Popup} from \"main.popup\";\nimport {ExpiredLicense} from \"./content/expired-license\";\nimport BaseContent from \"./content/base-content\";\nimport {EventEmitter} from \"main.core.events\";\nimport {Type} from \"main.core\";\nimport {Partner} from \"./content/partner\";\nimport {Activate} from './content/activate';\n\nimport 'ui.fonts.opensans';\nimport 'ui.design-tokens';\nimport 'ui.fonts.montserrat';\nimport './style.css';\nimport {Request} from \"./request\";\nimport {Success} from \"./content/success\";\n\nexport class LicensePopup\n{\n\t#popup: ?Popup;\n\n\t#currentContent: ?BaseContent\n\t#history: Array = [];\n\n\tconstructor(popupContent: ?BaseContent)\n\t{\n\t\tif (popupContent instanceof BaseContent)\n\t\t{\n\t\t\tthis.#currentContent = popupContent;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#currentContent = new ExpiredLicense();\n\t\t}\n\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'MainCouponActivation:changeContent',\n\t\t\tthis.changeHandler.bind(this)\n\t\t);\n\n\t\tEventEmitter.subscribe(\n\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t'MainCouponActivation:back',\n\t\t\tthis.backHandler.bind(this)\n\t\t);\n\n\t\tnew Request('activate', 'POST');\n\t}\n\n\tstatic createExpiredLicensePopup(parameters: Object)\n\t{\n\t\tconst partnerId = Type.isNil(parameters.PARTNER_ID) ? 0 : parameters.PARTNER_ID;\n\t\tconst buyId = Type.isString(parameters.BUY_LINK) ?  parameters.BUY_LINK : '';\n\n\t\treturn new LicensePopup(new ExpiredLicense(buyId, partnerId, parameters));\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\tif (this.#popup)\n\t\t{\n\t\t\treturn this.#popup\n\t\t}\n\n\t\tthis.#popup = new Popup({\n\t\t\tclassName: 'license-intranet-popup',\n\t\t\tpadding: 34,\n\t\t\twidth: 700,\n\t\t\tcloseIcon: false,\n\t\t\tborderRadius: '20px',\n\t\t});\n\n\t\treturn this.#popup;\n\t}\n\n\taddHistory(content: BaseContent): void\n\t{\n\t\tthis.#history.push(content);\n\t}\n\n\tback(): void\n\t{\n\t\tconst content = this.#history.pop();\n\t\tif (content instanceof BaseContent)\n\t\t{\n\t\t\tthis.#currentContent = content;\n\t\t}\n\t}\n\n\tinit()\n\t{\n\t\tthis.changeContent();\n\t\tthis.getPopup().show();\n\t}\n\n\tchangeContent()\n\t{\n\t\tthis.#currentContent.init(this.getPopup());\n\t\tEventEmitter.emit(EventEmitter.GLOBAL_TARGET, 'MainCouponActivation:onAfterChangeContent', {\n\t\t\ttarget: this.#currentContent.getContent()\n\t\t});\n\t}\n\n\tchangeHandler(event)\n\t{\n\t\tif (event.data.target instanceof BaseContent)\n\t\t{\n\t\t\tthis.addHistory(this.#currentContent);\n\t\t\tthis.#currentContent = event.data.target;\n\t\t}\n\t\tthis.changeContent();\n\t}\n\tbackHandler(event)\n\t{\n\t\tif (event.data.source instanceof BaseContent)\n\t\t{\n\t\t\tthis.back();\n\t\t}\n\t\tthis.changeContent();\n\t}\n}\n\n"],"names":["BaseContent","Tag","render","popup","Loading","loaderNode","primaryColor","getComputedStyle","document","body","getPropertyValue","loader","Loader","target","size","color","show","Loc","getMessage","setContent","getContent","setButtons","getButtonCollection","Request","action","method","mode","data","ajax","runComponentAction","ErrorCollection","errors","_classPrivateFieldInitSpec","addErrors","Type","isNil","activateAutoHide","length","BX","UI","Notification","Center","notify","content","map","value","message","join","position","category","autoHideDelay","Activate","supportLink","docLink","FormData","renderRefreshPageBtn","get","getSendBtn","Button","text","noCaps","round","className","Size","MEDIUM","Color","LIGHT_BORDER","tag","BUTTON","onclick","formNode","querySelector","formData","hideErrors","cleanErrors","EventEmitter","emit","GLOBAL_TARGET","source","request","send","then","successHandler","bind","failureHandler","location","href","event","LARGE","SUCCESS","Success","Partner","parameters","set","isString","NAME","PHONE","EMAIL","alert","Alert","AlertColor","DANGER","icon","AlertIcon","AlertSize","SMALL","setText","getContainer","sendBtn","ExpiredLicense","buyLink","partnerId","_classPrivateMethodInitSpec","_classPrivateMethodGet","DOC_LINK","stateTypes","LICENSE_ACTIVATED","response","expireDate","Date","DATE_TO_SOURCE","getTime","LICENSE_EXPIRED","UPDATE_SERVER_IS_UNAVAILABLE","isArray","SUPPORT_LINK","link","LINK","props","LicensePopup","popupContent","subscribe","changeHandler","backHandler","Popup","padding","width","closeIcon","borderRadius","push","pop","changeContent","getPopup","init","addHistory","back","PARTNER_ID","buyId","BUY_LINK"],"mappings":"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"}