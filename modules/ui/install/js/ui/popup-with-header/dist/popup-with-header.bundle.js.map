{"version":3,"file":"popup-with-header.bundle.js","sources":["../src/round-player.js","../src/header-builder.js","../src/popup-header.js","../src/skeleton.js","../src/popup-with-header.js","../src/templates/base-template.js","../src/templates/sale-template.js"],"sourcesContent":["import { Dom, Tag, Text, Type } from 'main.core';\nimport { Loader } from 'main.loader';\nimport { ProgressRound } from 'ui.progressround'\nimport './player.css';\n\nexport type PlayerOptions = {\n\twrapper: HTMLElement,\n\twidth: number,\n\tscale: ?number,\n\tposterUrl: ?string,\n\tvideos: Array<{url: string, type: string}>,\n\tloop: boolean,\n\tautoplay: boolean,\n\tmuted: boolean,\n\tanalyticsCallback: ?Function,\n}\n\nexport class RoundPlayer\n{\n\tstatic PLAY_STATE_BACKGROUND = 'background';\n\tstatic PLAY_STATE_USER = 'user';\n\n\t#pausePlayerWidth: number;\n\t#scale: number;\n\t#videos: Array;\n\t#loop: true;\n\t#autoplay: false;\n\t#muted: true;\n\t#content: HTMLElement;\n\t#videoNode: HTMLVideoElement;\n\t#playerNode: HTMLElement;\n\t#progressBar: ProgressRound;\n\t#barPadding: number = 3;\n\t#posterUrl: string;\n\t#loader: Loader;\n\t#currentPlayState: string = RoundPlayer.PLAY_STATE_BACKGROUND;\n\t#playButton: HTMLElement;\n\t#stopButton: HTMLElement;\n\t#wrapper: HTMLElement;\n\t#hasAutoPlayed: boolean = false;\n\t#analyticsCallback: ?Function;\n\n\tconstructor(options: PlayerOptions)\n\t{\n\t\tthis.#wrapper = options.wrapper;\n\t\tthis.#pausePlayerWidth = options.width ?? 86;\n\t\tthis.#scale = Type.isNumber(options.scale) ? options.scale : 1;\n\t\tthis.#videos = Type.isArrayFilled(options.videos) ? options.videos : [];\n\t\tthis.#loop = Type.isBoolean(options.loop) ? options.loop : true;\n\t\tthis.#autoplay = Type.isBoolean(options.autoplay) ? options.autoplay : true;\n\t\tthis.#muted = Type.isBoolean(options.muted) ? options.muted : true;\n\t\tthis.#posterUrl = options.posterUrl;\n\t\tthis.#analyticsCallback = Type.isFunction(options.analyticsCallback) ? options.analyticsCallback : null;\n\n\t\tthis.#playerNode = Tag.render`<div class=\"ui-popupcomponentmaker__round-player\"></div>`;\n\t\tthis.#playButton = Tag.render`<div class=\"ui-popupcomponentmaker__round-player-btn\"></div>`;\n\t\tthis.#stopButton = Tag.render`<div class=\"ui-popupcomponentmaker__round-player-btn --stop-btn\"></div>`;\n\t\tlet poster = '';\n\t\tif (Type.isStringFilled(this.#posterUrl))\n\t\t{\n\t\t\tthis.#playerNode.style.backgroundImage = 'url(\"'+Text.encode(this.#posterUrl)+'\")';\n\t\t\tposter = 'poster=\"'+Text.encode(this.#posterUrl)+'\"';\n\t\t}\n\n\t\tconst autoplay = this.#autoplay ? 'autoplay' : '';\n\t\tconst muted = this.#muted ? 'muted' : '';\n\t\tthis.#videoNode = Tag.render`<video ${poster} ${autoplay} ${muted}></video>`;\n\t\tthis.#videoNode.muted = this.#muted;\n\t\tthis.#videoNode.autoplay = this.#autoplay;\n\t\t// this.#videoNode.loop = this.#loop;\n\n\t\tthis.#loader = new Loader({\n\t\t\tsize: 40\n\t\t});\n\t\tthis.#playerNode.style.width = this.#pausePlayerWidth + 'px';\n\n\t\tthis.#videoNode.addEventListener('timeupdate', this.#onTick.bind(this));\n\t\tthis.#videoNode.addEventListener('loadedmetadata', this.#onInitVideoMetadata.bind(this));\n\t\tthis.#playerNode.addEventListener('click', this.#onClickPlayer.bind(this));\n\t\tthis.#videoNode.addEventListener('ended', this.#onVideoEnded.bind(this));\n\t\tthis.#videoNode.addEventListener('play', this.#onPlay.bind(this));\n\t\tthis.#videoNode.addEventListener('pause', this.#onPause.bind(this));\n\t\tthis.#playButton.addEventListener('click', this.#onClickPlayer.bind(this));\n\t\tthis.#stopButton.addEventListener('click', this.#onClickStopButton.bind(this));\n\n\t\tthis.#videoNode.addEventListener('canplay', () => {\n\t\t\tthis.#loader.hide();\n\t\t});\n\t\tthis.#videoNode.addEventListener('waiting', () => {\n\t\t\tthis.#loader.show(this.#playerNode);\n\t\t});\n\t}\n\n\trender()\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tthis.#videos.forEach((video) => {\n\t\t\tDom.append(Tag.render`<source src=\"${video.url}\" type=\"${video.type}\">`, this.#videoNode);\n\t\t});\n\n\t\tDom.append(this.#videoNode, this.#playerNode);\n\t\tDom.append(this.#playButton, this.#wrapper);\n\t\tDom.append(this.#stopButton, this.#wrapper);\n\t\tDom.append(this.#playerNode, this.#wrapper);\n\n\t\tthis.#content = this.#wrapper;\n\n\t\treturn this.#content;\n\t}\n\n\trenderTo(wrapper: HTMLElement): HTMLElement\n\t{\n\t\tDom.append(wrapper, this.render());\n\n\t\treturn wrapper;\n\t}\n\n\t#onInitVideoMetadata(event): void\n\t{\n\t\tthis.#progressBar = new ProgressRound({\n\t\t\twidth: this.#pausePlayerWidth - 2 * this.#barPadding,\n\t\t\tlineSize: 2,\n\t\t\tmaxValue: this.#videoNode.duration,\n\t\t\tvalue: this.#videoNode.currentTime,\n\t\t\tcolorBar: '#fff',\n\t\t\tcolorTrack: 'rgba(0, 0, 0, 0)',\n\t\t});\n\n\t\tif (this.#autoplay)\n\t\t{\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\t#onTick(): void\n\t{\n\t\tthis.#progressBar.update(this.#videoNode.currentTime);\n\t}\n\n\t#onClickPlayer(): void\n\t{\n\t\tif (this.#currentPlayState === RoundPlayer.PLAY_STATE_BACKGROUND)\n\t\t{\n\t\t\tthis.userPlay();\n\t\t\tDom.removeClass(this.render(), '--stop');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#videoNode.paused ? this.play() : this.pause();\n\t\t}\n\n\t\tif (this.#analyticsCallback)\n\t\t{\n\t\t\tthis.#analyticsCallback('click-player');\n\t\t}\n\t}\n\n\t#onClickStopButton(): void\n\t{\n\t\tif (this.#analyticsCallback)\n\t\t{\n\t\t\tthis.#analyticsCallback('click-player');\n\t\t}\n\n\t\tthis.stop();\n\t}\n\n\t#onVideoEnded(): void\n\t{\n\t\tif (this.#analyticsCallback && (!this.#videoNode.muted || !this.#hasAutoPlayed))\n\t\t{\n\t\t\tthis.#analyticsCallback('video_finished', `isMuted_${this.#videoNode.muted ? 'Y' : 'N'}`);\n\t\t}\n\n\t\tif (!this.#hasAutoPlayed)\n\t\t{\n\t\t\tthis.#hasAutoPlayed = this.#videoNode.muted;\n\t\t}\n\n\t\tthis.stop();\n\t\tDom.remove(this.#progressBar.getContainer());\n\t\tthis.setMute(true);\n\n\t\tif (this.#loop)\n\t\t{\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\t#scaleTo(x: number)\n\t{\n\t\tthis.#playerNode.style.transform = `scale(${x})`;\n\t}\n\n\t#onPause(): void\n\t{\n\t\tthis.#scaleTo(1);\n\n\t\tif (this.#analyticsCallback && (!this.#videoNode.muted || !this.#hasAutoPlayed))\n\t\t{\n\t\t\tthis.#analyticsCallback('on-pause');\n\t\t}\n\t}\n\n\t#onPlay(): void\n\t{\n\t\tthis.#scaleTo(this.#scale);\n\n\t\tif (this.#analyticsCallback && (!this.#videoNode.muted || !this.#hasAutoPlayed))\n\t\t{\n\t\t\tthis.#analyticsCallback('on-play');\n\t\t}\n\t}\n\n\tplay(): void\n\t{\n\t\tthis.#videoNode.play();\n\t\tDom.removeClass(this.render(), '--stop');\n\t}\n\n\tsetMute(mute: boolean): void\n\t{\n\t\tthis.#videoNode.muted = mute;\n\t}\n\n\tgetPlayState(): string\n\t{\n\t\treturn this.#currentPlayState;\n\t}\n\n\tpause(): void\n\t{\n\t\tthis.#videoNode.pause();\n\t}\n\n\tstop(): void\n\t{\n\t\tthis.pause();\n\t\tthis.#currentPlayState = RoundPlayer.PLAY_STATE_BACKGROUND;\n\t\tthis.#videoNode.currentTime = 0;\n\t\tDom.addClass(this.render(), '--stop');\n\t}\n\n\tuserPlay()\n\t{\n\t\tthis.stop();\n\t\tthis.#currentPlayState = RoundPlayer.PLAY_STATE_USER;\n\t\tthis.#progressBar.setValue(0);\n\t\tDom.remove(this.#progressBar.getContainer());\n\t\tthis.#progressBar.renderTo(this.#playerNode);\n\t\tthis.setMute(false);\n\t\tthis.play();\n\t}\n}\n","import { Tag, Type, Dom } from 'main.core';\nimport { RoundPlayer, PlayerOptions } from './round-player';\nimport { PopupComponentsMakerItem } from 'ui.popupcomponentsmaker';\nimport { Button, ButtonColor, ButtonSize } from 'ui.buttons';\nimport { Icon, Actions } from 'ui.icon-set.api.core';\nimport { FeaturePromotersRegistry } from 'ui.info-helper';\n\nexport type TitleHeaderOptions = {\n\ttitle: string | HTMLElement | null,\n\tsubtitle: string | HTMLElement | null\n}\n\nexport type ButtonOptions = {\n\tlabel: string,\n\turl: string,\n}\n\nexport type DescriptionHeaderOptions = {\n\ttitle: string,\n\tsubtitle: ?string,\n\tsubtitleDescription: ?string,\n\tmoreLabel: ?string,\n\tcode: ?string,\n\troundContent: PlayerOptions | string\n}\n\nexport type TariffHeaderOptions = {\n\ticon: ?Icon,\n\ticonClass: ?string,\n\ttop: TitleHeaderOptions,\n\tinfo: DescriptionHeaderOptions,\n\tbutton: ?ButtonOptions,\n\tanalyticsCallback: ?Function,\n}\n\nexport class HeaderBuilder\n{\n\t#options: TariffHeaderOptions = null;\n\t#content: HTMLElement;\n\t#player: ?RoundPlayer;\n\n\tconstructor(options: TariffHeaderOptions)\n\t{\n\t\tthis.#options = options;\n\t}\n\n\tbuildPlayer(playerOptions: PlayerOptions): RoundPlayer\n\t{\n\t\treturn new RoundPlayer({\n\t\t\twrapper: playerOptions.wrapper,\n\t\t\tpausePlayerWidth: playerOptions.width,\n\t\t\tscale: playerOptions.scale,\n\t\t\tposterUrl: playerOptions.posterUrl,\n\t\t\tvideos: playerOptions.videos,\n\t\t\tloop:  playerOptions.loop,\n\t\t\tautoplay: playerOptions.autoplay,\n\t\t\tmuted:  playerOptions.muted,\n\t\t\tanalyticsCallback: this.#options.analyticsCallback,\n\t\t});\n\t}\n\n\trenderPlayer(playerOptions: PlayerOptions): HTMLElement\n\t{\n\t\tif (this.#player)\n\t\t{\n\t\t\treturn this.#player\n\t\t}\n\n\t\tconst wrapper = Tag.render`<div class=\"ui-popupcomponentsmaker__round-player-box\"/>`;\n\t\tthis.#player = this.buildPlayer({ ...playerOptions, wrapper: wrapper });\n\n\t\tif (this.#player)\n\t\t{\n\t\t\treturn this.#player.render();\n\t\t}\n\n\t\treturn Tag.render``;\n\t}\n\n\tgetPlayer(): RoundPlayer\n\t{\n\t\treturn this.#player;\n\t}\n\n\trenderTitle(titleOptions: TitleHeaderOptions): HTMLElement\n\t{\n\t\tconst title = Tag.render`\n\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__header-content\">\n\t\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__title\">${titleOptions.title}</div>\n\t\t\t</div>\n\t\t`;\n\t\tif (!Type.isNil(titleOptions.subtitle))\n\t\t{\n\t\t\tDom.append(Tag.render`<div class=\"ui-popupcomponentsmaker-header-tariff__subtitle\">${titleOptions.subtitle}</div>`, title);\n\t\t}\n\n\t\treturn title;\n\t}\n\n\trenderDescription(descriptionOptions: DescriptionHeaderOptions): HTMLElement\n\t{\n\t\tconst descriptionText = Tag.render`\n\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__box\">\n\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__title\">${descriptionOptions.title}</div>\n\t\t</div>`;\n\t\tif (!Type.isNil(descriptionOptions.subtitle))\n\t\t{\n\t\t\tDom.append(Tag.render`<div class=\"ui-popupcomponentsmaker-header-tariff__subtitle\">${descriptionOptions.subtitle}</div>`, descriptionText);\n\t\t}\n\n\t\tif (!Type.isNil(descriptionOptions.subtitleDescription))\n\t\t{\n\t\t\tDom.append(Tag.render`<div class=\"ui-popupcomponentsmaker-header-tariff__text\">${descriptionOptions.subtitleDescription}</div>`, descriptionText);\n\t\t}\n\n\t\tif (!Type.isNil(descriptionOptions.code))\n\t\t{\n\t\t\tconst onclick = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tFeaturePromotersRegistry.getPromoter({ code: descriptionOptions.code }).show();\n\t\t\t};\n\t\t\tDom.append(Tag.render`<a onclick=\"${onclick}\" target=\"_blank\" class=\"ui-popupcomponentsmaker-header-tariff__more\">${descriptionOptions.moreLabel}<div class=\"ui-icon-set --chevron-right ui-popupcomponentsmaker-header-tariff__more-icon\"></div></a>`, descriptionText);\n\t\t}\n\n\t\tlet roundContent = '';\n\t\tif (Type.isPlainObject(descriptionOptions.roundContent))\n\t\t{\n\t\t\troundContent = this.renderPlayer(descriptionOptions.roundContent);\n\t\t}\n\t\telse if (Type.isStringFilled(descriptionOptions.roundContent))\n\t\t{\n\t\t\troundContent = this.renderIcon(descriptionOptions.roundContent);\n\t\t}\n\t\telse if (Type.isDomNode(descriptionOptions.roundContent))\n\t\t{\n\t\t\troundContent = this.embedIcon(descriptionOptions.roundContent);\n\t\t}\n\n\t\tconst descriptionBlock = Tag.render`\n\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__message-wrapper\">\n\t\t\t\t${roundContent}\n\t\t\t\t${descriptionText}\n\t\t\t</div>\n\t\t`;\n\n\t\tconst description = new PopupComponentsMakerItem({\n\t\t\thtml: descriptionBlock,\n\t\t\twithoutBackground: false,\n\t\t});\n\n\t\tDom.addClass(description.getContainer(), 'ui-popupcomponentsmaker-header-tariff__section-message-wrapper');\n\t\tdescription.getContainer().style.marginTop = '14px';\n\t\tdescription.getContainer().classList.add('--transparent');\n\n\t\treturn description.getContainer();\n\t}\n\n\trenderBtn(btnOptions: ButtonOptions | Button): HTMLElement\n\t{\n\t\tconst btn = btnOptions instanceof Button\n\t\t\t? btnOptions\n\t\t\t: new Button({\n\t\t\t\ttext: btnOptions.label,\n\t\t\t\tcolor: ButtonColor.LIGHT_BORDER,\n\t\t\t\tsize: ButtonSize.SMALL,\n\t\t\t\tlink: btnOptions.url,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tif (this.#options.analyticsCallback)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#options.analyticsCallback('click-button-header', btnOptions.url);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tround: true,\n\t\t\t\tnoCaps: true,\n\t\t\t})\n\t\t;\n\t\tbtn.addClass('ui-popupcomponentsmaker-header-tariff__button ui-btn-themes');\n\n\t\treturn btn.render();\n\t}\n\n\trenderIcon(iconClass: string): HTMLElement\n\t{\n\t\tif (Type.isStringFilled(iconClass))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__icon\">\n\t\t\t\t\t<div class=\"ui-icon-set ${iconClass}\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render``;\n\t}\n\n\tembedIcon(icon: HTMLElement): HTMLElement\n\t{\n\t\tif (Type.isDomNode(icon))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__icon\">\n\t\t\t\t\t${icon}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render``;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\t\tlet btnContent = '';\n\t\tif (this.#options.button)\n\t\t{\n\t\t\tbtnContent = Tag.render`\n\t\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__button-bar\">\n\t\t\t\t\t${this.renderBtn(this.#options.button)}\n\t\t\t\t</div>`;\n\t\t}\n\t\tthis.#content = Tag.render`\n\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__wrapper\">\n\t\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__title-section\">\n\t\t\t\t\t${this.#options.icon instanceof HTMLElement ? this.embedIcon(this.#options.icon) : this.renderIcon(this.#options.iconClass)}\n\t\t\t\t\t${this.renderTitle(this.#options.top)}\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t${this.renderDescription(this.#options.info)}\n\t\t\t\t${btnContent}\n\t\t\t\t\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#content;\n\t}\n}\n","import { Dom, Tag, Text } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { PopupComponentsMakerItem } from 'ui.popupcomponentsmaker';\nimport type { TariffHeaderOptions } from './header-builder';\nimport { HeaderBuilder } from './header-builder';\nimport './header.css';\n\nexport class PopupHeader extends PopupComponentsMakerItem\n{\n\tconstructor(options = {})\n\t{\n\t\toptions.withoutBackground = true;\n\t\toptions.backgroundColor = null;\n\t\toptions.backgroundImage = null;\n\t\tsuper(options);\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (!this.layout.container)\n\t\t{\n\t\t\tconst theme = this.#getThemePicker()?.getAppliedTheme();\n\t\t\tthis.layout.container = Tag.render`<div class=\"ui-popupcomponentsmaker__header\">${this.getContent()}</div>`;\n\t\t\tthis.bacgroundNode = Tag.render`<div class=\"ui-popupcomponentsmaker__header-background\"></div>`;\n\t\t\tDom.append(this.bacgroundNode, this.layout.container);\n\n\t\t\tif (theme)\n\t\t\t{\n\t\t\t\tthis.#applyTheme(this.bacgroundNode, theme);\n\t\t\t}\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\t'BX.Intranet.Bitrix24:ThemePicker:onThemeApply',\n\t\t\t\t(event) =>\n\t\t\t\t{\n\t\t\t\t\tthis.#applyTheme(this.bacgroundNode, event.data.theme);\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn super.getContainer();\n\t}\n\n\t#getThemePicker(): ?BX.Intranet.Bitrix24.ThemePicker\n\t{\n\t\treturn BX.Intranet?.Bitrix24?.ThemePicker.Singleton ?? top.BX.Intranet?.Bitrix24?.ThemePicker.Singleton;\n\t}\n\n\t#applyTheme(container, theme): void\n\t{\n\t\tconst previewImage = `url('${Text.encode(theme.previewImage)}')`;\n\t\tDom.style(container, 'backgroundImage', previewImage);\n\t\tDom.removeClass(this.layout.container, 'bitrix24-theme-default bitrix24-theme-dark bitrix24-theme-light');\n\t\tlet themeClass = 'bitrix24-theme-default';\n\n\t\tif (theme.id !== 'default')\n\t\t{\n\t\t\tthemeClass = String(theme.id).indexOf('dark:') === 0 ? 'bitrix24-theme-dark' : 'bitrix24-theme-light';\n\t\t}\n\n\t\tDom.addClass(this.layout.container, themeClass);\n\t}\n\n\tstatic createByJson(popupId: string, options: TariffHeaderOptions): PopupHeader\n\t{\n\t\tconst builder = new HeaderBuilder(options);\n\t\tconst header = new PopupHeader({\n\t\t\thtml: builder.render(),\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Main.Popup:onClose', (event) => {\n\t\t\tif (popupId === event.target.uniquePopupId)\n\t\t\t{\n\t\t\t\tbuilder.getPlayer()?.stop();\n\t\t\t}\n\t\t});\n\n\t\treturn header;\n\t}\n}\n","import { Tag } from 'main.core';\n\nexport class Skeleton\n{\n\t#size: boolean;\n\n\tconstructor(size: number = 473)\n\t{\n\t\tthis.#size = size;\n\t}\n\n\tget(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div style=\"height: ${this.#size}px;\" class=\"popup-with-header-skeleton__wrap\">\n\t\t\t\t<div class=\"popup-with-header-skeleton__header\">\n\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-top\">\n\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-circle\">\n\t\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-circle-inner\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"width: 100%;\">\n\t\t\t\t\t\t\t<div style=\"margin-bottom: 12px; max-width: 219px; height: 6px; background: rgba(255,255,255,.8);\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t<div style=\"max-width: 119px; height: 4px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-bottom\">\n\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-bottom-circle-box\">\n\t\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-bottom-circle\"></div>\n\t\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-bottom-circle-blue\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div style=\"width: 100%;\">\n\t\t\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 193px; height: 5px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t<div style=\"margin-bottom: 15px; max-width: 163px; height: 5px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 156px; height: 2px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 93px; height: 2px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"popup-with-header-skeleton__bottom\">\n\t\t\t\t\t${this.#getInnerBlock()}\n\t\t\t\t\t${this.#getInnerBlock()}\n\t\t\t\t\t${this.#getInnerBlock()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getInnerBlock(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"popup-with-header-skeleton__bottom-inner\">\n\t\t\t\t<div class=\"popup-with-header-skeleton__bottom-left\">\n\t\t\t\t\t<div style=\"margin-bottom: 11px; max-width: 193px; height: 5px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t<div style=\"margin-bottom: 17px; max-width: 163px; height: 5px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 168px; height: 3px; background: rgba(149,156,164,.23);\" class=\"popup-with-header-skeleton__line --dark-animation\"></div>\n\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 131px; height: 3px; background: rgba(149,156,164,.23);\" class=\"popup-with-header-skeleton__line --dark-animation\"></div>\n\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 150px; height: 3px; background: rgba(149,156,164,.23);\" class=\"popup-with-header-skeleton__line --dark-animation\"></div>\n\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 56px; height: 5px; background: rgba(32,102,176,.23);\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"popup-with-header-skeleton__bottom-right\">\n\t\t\t\t\t<div class=\"popup-with-header-skeleton-btn\"></div>\n\t\t\t\t\t<div style=\"margin: 0 auto; max-width: 36px; height: 3px; background: #d9d9d9;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Dom, Tag, Text, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { PopupComponentsMaker } from 'ui.popupcomponentsmaker';\nimport { PopupHeader } from './popup-header';\nimport { Popup } from 'main.popup';\nimport { BaseTemplate } from 'ui.popup-with-header';\nimport './styles.css';\nimport { Skeleton } from './skeleton';\n\nexport class PopupWithHeader extends PopupComponentsMaker\n{\n\theaderWrapper: ?HTMLElement;\n\t#popupOptions: Object;\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.header = (options.header instanceof PopupHeader) ? options.header : null;\n\t\tthis.template = options.template instanceof BaseTemplate ? options.template : null;\n\t\tthis.asyncData = (options.asyncData instanceof BX.Promise || options.asyncData instanceof Promise) ? options.asyncData : null;\n\t\tthis.animationTemplate = options.animationTemplate ?? true;\n\t\tthis.skeletonSize = options.skeletonSize ?? 473;\n\t\tthis.analyticsCallback = Type.isFunction(options.analyticsCallback) ? options.analyticsCallback : null;\n\t\tthis.#popupOptions = Type.isPlainObject(options.popupOptions) ? options.popupOptions : {};\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\tif (!this.popup)\n\t\t{\n\t\t\tconst popupWidth = this.width ? this.width : 344;\n\t\t\tconst popupId = this.id ? `${this.id}-popup` : null;\n\t\t\tlet content = [];\n\n\t\t\tif (!this.asyncData)\n\t\t\t{\n\t\t\t\tcontent = Tag.render`\n\t\t\t\t\t<div>\n\t\t\t\t\t\t${this.getHeaderWrapper()}\n\t\t\t\t\t<div>\n\t\t\t\t`;\n\t\t\t\tif (this.content.length > 0)\n\t\t\t\t{\n\t\t\t\t\tcontent.append(Tag.render`<div style=\"padding: 0 ${this.padding}px ${this.padding}px ${this.padding}px\">${this.getContentWrapper()}</div>`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.popup = new Popup(popupId, this.target, ({\n\t\t\t\tclassName: 'ui-popupcomponentmaker',\n\t\t\t\tcontentBackground: 'transparent',\n\t\t\t\tcontentPadding: this.contentPadding,\n\t\t\t\tangle: this.useAngle\n\t\t\t\t\t? {\n\t\t\t\t\t\toffset: (popupWidth / 2) - 16,\n\t\t\t\t\t}\n\t\t\t\t\t: false,\n\t\t\t\toffsetTop: this.offsetTop,\n\t\t\t\twidth: popupWidth,\n\t\t\t\toffsetLeft: -(popupWidth / 2) + (this.target ? this.target.offsetWidth / 2 : 0) + 40,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tcontent,\n\t\t\t\tcacheable: this.cacheable,\n\t\t\t\t...this.#popupOptions,\n\t\t\t}));\n\n\t\t\tif (this.asyncData)\n\t\t\t{\n\t\t\t\tconst container = this.popup.getContentContainer();\n\t\t\t\tDom.clean(container);\n\t\t\t\tDom.append(this.getSkeleton(), container);\n\t\t\t\tthis.preparePopupAngly(container);\n\n\t\t\t\tif (Type.isDomNode(container.parentNode))\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(container.parentNode, '--with-header');\n\t\t\t\t}\n\n\t\t\t\tthis.asyncData.then((response) => {\n\t\t\t\t\tDom.clean(container);\n\t\t\t\t\tresponse.data.header.analyticsCallback = this.analyticsCallback;\n\t\t\t\t\tthis.header = PopupHeader.createByJson(popupId, response.data.header);\n\t\t\t\t\tcontent = Tag.render`\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${this.getHeaderWrapper()}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t`;\n\n\t\t\t\t\tlet hasContent = response.data.items && this.template;\n\n\t\t\t\t\tif (hasContent)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.template.setOptions({\n\t\t\t\t\t\t\titems: response.data.items,\n\t\t\t\t\t\t\tanalyticsCallback: this.analyticsCallback,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.content = this.template.getContent();\n\t\t\t\t\t\tthis.contentWrapper = null;\n\n\t\t\t\t\t\tif (Dom.hasClass(this.getHeaderWrapper(), '--empty-content'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.removeClass(this.getHeaderWrapper(), '--empty-content');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!this.getHeaderWrapper().querySelector('.ui-popupcomponentsmaker__round-player-box')\n\t\t\t\t\t\t\t&& !Dom.hasClass(this.getHeaderWrapper(), '--without-video')\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.addClass(this.getHeaderWrapper(), '--without-video');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.content.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontent.append(Tag.render`<div class=\"ui-popupcomponentmaker__content-wrap\">${this.getContentWrapper()}</div>`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thasContent = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tDom.append(content, container);\n\n\t\t\t\t\tif (hasContent)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.popup.isShown())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#prepareItemsContent(content);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.popup.subscribeOnce('onShow', () => {\n\t\t\t\t\t\t\t\tthis.#prepareItemsContent(content);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.popup.adjustPosition({ forceBindPosition: true, position: this.popup.isBottomAngle() ? 'top' : 'bottom' });\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.popup.getContentContainer().style.overflowX = null;\n\t\t}\n\n\t\treturn this.popup;\n\t}\n\n\t#prepareItemsContent(content: HTMLElement): void\n\t{\n\t\tDom.addClass(this.getContentWrapper(), 'ui-popup-with-header__content');\n\t\tcontent.append(Tag.render`<div class=\"ui-popupcomponentmaker__content-wrap\">${this.getContentWrapper()}</div>`);\n\n\t\tif (this.popup.isBottomAngle() || !this.animationTemplate)\n\t\t{\n\t\t\tDom.style(this.getContentWrapper(), 'transition', 'none');\n\t\t}\n\n\t\tif (this.getContentWrapper().scrollHeight > 287 && !Dom.hasClass(this.getContentWrapper(), '--active-scroll'))\n\t\t{\n\t\t\tDom.style(this.getContentWrapper(), 'height', '287px');\n\t\t\tDom.style(this.getContentWrapper(), 'overflow-y', 'scroll');\n\t\t\tDom.addClass(content, 'active-scroll');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(this.getContentWrapper(), 'height', `${this.getContentWrapper().scrollHeight}px`);\n\t\t}\n\t}\n\n\tgetSkeleton(): HTMLElement\n\t{\n\t\tif (!this.skeleton)\n\t\t{\n\t\t\tthis.skeleton = (new Skeleton(this.skeletonSize)).get();\n\n\t\t\tconst theme = this.#getThemePicker()?.getAppliedTheme();\n\t\t\tif (!theme)\n\t\t\t{\n\t\t\t\treturn this.skeleton;\n\t\t\t}\n\n\t\t\tconst headerContainer = this.skeleton.querySelector('.popup-with-header-skeleton__header');\n\t\t\tthis.#applyTheme(headerContainer, theme);\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\t'BX.Intranet.Bitrix24:ThemePicker:onThemeApply',\n\t\t\t\t(event) =>\n\t\t\t\t{\n\t\t\t\t\tthis.#applyTheme(headerContainer, event.data.theme);\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn this.skeleton;\n\t}\n\n\tpreparePopupAngly(popupContainer: HTMLElement): void\n\t{\n\t\tconst angly = popupContainer?.parentNode?.querySelector('.popup-window-angly--arrow');\n\n\t\tif (Type.isDomNode(angly))\n\t\t{\n\t\t\tconst theme = this.#getThemePicker()?.getAppliedTheme();\n\t\t\tif (theme)\n\t\t\t{\n\t\t\t\tthis.#applyTheme(angly, theme);\n\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\t'BX.Intranet.Bitrix24:ThemePicker:onThemeApply',\n\t\t\t\t\t(event) =>\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.#applyTheme(angly, event.data.theme);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tDom.style(angly, 'background-position', 'center top');\n\t\t\tDom.addClass(popupContainer?.parentNode, '--with-header');\n\t\t}\n\t}\n\n\t#getThemePicker(): ?BX.Intranet.Bitrix24.ThemePicker\n\t{\n\t\treturn BX.Intranet?.Bitrix24?.ThemePicker.Singleton ?? top.BX.Intranet?.Bitrix24?.ThemePicker.Singleton;\n\t}\n\n\t#applyTheme(container, theme): void\n\t{\n\t\tconst previewImage = `url('${Text.encode(theme.previewImage)}')`;\n\t\tDom.style(container, 'backgroundImage', previewImage);\n\t\tDom.removeClass(container, 'bitrix24-theme-default bitrix24-theme-dark bitrix24-theme-light');\n\t\tlet themeClass = 'bitrix24-theme-default';\n\n\t\tif (theme.id !== 'default')\n\t\t{\n\t\t\tthemeClass = String(theme.id).indexOf('dark:') === 0 ? 'bitrix24-theme-dark' : 'bitrix24-theme-light';\n\t\t}\n\n\t\tDom.addClass(container, themeClass);\n\t}\n\n\tgetHeaderWrapper(): ?HTMLElement\n\t{\n\t\tif (!this.header)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.headerWrapper)\n\t\t{\n\t\t\tthis.headerWrapper = Tag.render`\n\t\t\t\t<div class=\"ui-popupcomponentmaker__header-content\"></div>\n\t\t\t`;\n\n\t\t\tif (this.content.length <= 0)\n\t\t\t{\n\t\t\t\tthis.headerWrapper.classList.add('--empty-content');\n\t\t\t}\n\n\t\t\tconst sectionNode = this.getSection();\n\n\t\t\tif (this.header?.marginBottom)\n\t\t\t{\n\t\t\t\tType.isNumber(this.header.marginBottom)\n\t\t\t\t\t? sectionNode.style.marginBottom = `${this.header.marginBottom}px`\n\t\t\t\t\t: null;\n\t\t\t}\n\n\t\t\tif (this.header?.className)\n\t\t\t{\n\t\t\t\tDom.addClass(sectionNode, this.header.className);\n\t\t\t}\n\n\t\t\tif (Type.isDomNode(this.header?.html))\n\t\t\t{\n\t\t\t\tsectionNode.appendChild(this.getItem(this.header).getContainer());\n\t\t\t\tthis.headerWrapper.appendChild(sectionNode);\n\t\t\t}\n\n\t\t\tif (Type.isFunction(this.header?.html?.then))\n\t\t\t{\n\t\t\t\tthis.adjustPromise(this.header, sectionNode);\n\t\t\t\tthis.headerWrapper.appendChild(sectionNode);\n\t\t\t}\n\t\t}\n\n\t\treturn this.headerWrapper;\n\t}\n}\n","import type { ResultContent } from '../types/template';\n\nexport class BaseTemplate\n{\n\tgetContent(): Array<ResultContent>\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tsetOptions(options): void\n\t{\n\t\tthis.options = options;\n\t}\n}","import { Cache, Dom, Tag } from 'main.core';\nimport { Button, ButtonTag } from 'ui.buttons';\nimport { FeaturePromotersRegistry } from 'ui.info-helper';\nimport type {\n\tButtonConfig,\n\tMoreLinkConfig,\n\tSalePopupTemplateOptions,\n\tTextConfig,\n\tResultContent,\n\tSalePopupTemplateItemConfig,\n} from '../types/template';\nimport { BaseTemplate } from './base-template';\n\nexport class SaleTemplate extends BaseTemplate\n{\n\t#cache = new Cache.MemoryCache();\n\toptions: SalePopupTemplateOptions;\n\n\tconstructor(options: SalePopupTemplateOptions = {})\n\t{\n\t\tsuper();\n\t\tthis.options = options;\n\t}\n\n\tgetContent(): Array<ResultContent>\n\t{\n\t\treturn this.#cache.remember('popup-content', () => {\n\t\t\tconst content = [];\n\n\t\t\tthis.options.items.forEach((item, index) => {\n\t\t\t\tconst itemContent = this.#getItemContent(item);\n\n\t\t\t\tif (item.styles?.color)\n\t\t\t\t{\n\t\t\t\t\tDom.style(itemContent, 'color', item.styles.color);\n\t\t\t\t}\n\n\t\t\t\tcontent.push({\n\t\t\t\t\thtml: itemContent,\n\t\t\t\t\tbackground: item.styles?.background,\n\t\t\t\t\tmargin: index === 0 ? '12px 0 0 0' : null,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn content;\n\t\t});\n\t}\n\n\t#getItemContent(config: SalePopupTemplateItemConfig): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-popupconstructor-content-item-wrapper\">\n\t\t\t\t<div class=\"ui-popupconstructor-content-item-wrapper_information\">\n\t\t\t\t\t<div class=\"ui-popupconstructor-content-item-wrapper-title\">\n\t\t\t\t\t\t${config.icon ? this.#getIcon(config.icon) : null}\n\t\t\t\t\t\t${config.title ? this.#getTitle(config.title) : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t${config.description ? this.#getDescription(config.description) : null}\n\t\t\t\t\t\t${config.more ? this.#getMoreLink(config.more, config.button) : null}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-popupconstructor-content-item-wrapper_button\">\n\t\t\t\t\t${config.button ? this.#getButton(config.button) : null}\n\t\t\t\t\t${config.button.description ? this.#getButtonDescription(config.button.description) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getTitle(config: TextConfig): HTMLElement\n\t{\n\t\tconst title = Tag.render`\n\t\t\t<div class=\"ui-popupconstructor-content-item__title\">${config.text}</div>\n\t\t`;\n\n\t\tthis.#setTextStyles(title, config);\n\n\t\treturn title;\n\t}\n\n\t#getIcon(config: Object): HTMLElement\n\t{\n\t\tconst icon = Tag.render`\n\t\t\t<div class=\"ui-popupconstructor-content-item__icon ui-icon-set --${config.name}\"></div>\n\t\t`;\n\n\t\tif (config.color)\n\t\t{\n\t\t\tDom.style(icon, 'background-color', config.color);\n\t\t}\n\n\t\treturn icon;\n\t}\n\n\t#getDescription(config: TextConfig): HTMLElement\n\t{\n\t\tconst description = Tag.render`\n\t\t\t<div class=\"ui-popupconstructor-content-item__description\">\n\t\t\t\t${config.text}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#setTextStyles(description, config);\n\n\t\treturn description;\n\t}\n\n\t#getMoreLink(config: MoreLinkConfig, configMainButton: ButtonConfig): HTMLElement\n\t{\n\t\tconst onclick = () => {\n\t\t\tif (config.code)\n\t\t\t{\n\t\t\t\tFeaturePromotersRegistry.getPromoter({\n\t\t\t\t\tcode: config.code,\n\t\t\t\t}).show();\n\t\t\t}\n\t\t\telse if (config.articleId)\n\t\t\t{\n\t\t\t\ttop.BX.Helper.show(`redirect=detail&code=${config.articleId}`);\n\t\t\t}\n\n\t\t\tif (this.options?.analyticsCallback)\n\t\t\t{\n\t\t\t\tthis.options.analyticsCallback('click-more', configMainButton.url);\n\t\t\t}\n\t\t};\n\n\t\tconst moreLink = Tag.render`\n\t\t\t<div class=\"ui-popupconstructor-content-item__more-link\" onclick=\"${onclick}\">${config.text.text}</div>\n\t\t`;\n\t\tthis.#setTextStyles(moreLink, config.text);\n\n\t\treturn moreLink;\n\t}\n\n\t#getButton(config: ButtonConfig): HTMLElement\n\t{\n\t\tconst buttonTag = config.target ? ButtonTag.BUTTON : ButtonTag.LINK;\n\n\t\tconst button = new Button({\n\t\t\tround: true,\n\t\t\ttext: config.text,\n\t\t\tsize: Button.Size.EXTRA_SMALL,\n\t\t\tcolor: Button.Color.SUCCESS,\n\t\t\tnoCaps: true,\n\t\t\ttag: buttonTag,\n\t\t\tlink: config.target ? null : config.url,\n\t\t\tonclick: () => {\n\t\t\t\tif (config.target)\n\t\t\t\t{\n\t\t\t\t\twindow.open(config.url, config.target);\n\t\t\t\t}\n\n\t\t\t\tif (this.options?.analyticsCallback)\n\t\t\t\t{\n\t\t\t\t\tthis.options.analyticsCallback('click-button', config.url);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tif (config.backgroundColor)\n\t\t{\n\t\t\tDom.style(button.render(), 'background-color', config.backgroundColor);\n\t\t\tbutton.setColor(Button.Color.LIGHT);\n\t\t}\n\n\t\treturn button.render();\n\t}\n\n\t#getButtonDescription(config: TextConfig): HTMLElement\n\t{\n\t\tconst buttonDescription = Tag.render`\n\t\t\t<div class=\"ui-popupconstructor-content-item__button-description\">\n\t\t\t\t${config.text}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#setTextStyles(buttonDescription, config);\n\n\t\treturn buttonDescription;\n\t}\n\n\t#setTextStyles(element: HTMLElement, config: TextConfig): void\n\t{\n\t\tif (config.color)\n\t\t{\n\t\t\tDom.style(element, 'color', config.color);\n\t\t}\n\n\t\tif (config.fontSize)\n\t\t{\n\t\t\tDom.style(element, 'font-size', config.fontSize);\n\t\t}\n\n\t\tif (config.weight)\n\t\t{\n\t\t\tDom.style(element, 'font-weight', config.weight);\n\t\t}\n\t}\n}\n"],"names":["RoundPlayer","constructor","options","PLAY_STATE_BACKGROUND","wrapper","width","Type","isNumber","scale","isArrayFilled","videos","isBoolean","loop","autoplay","muted","posterUrl","isFunction","analyticsCallback","Tag","render","poster","isStringFilled","style","backgroundImage","Text","encode","Loader","size","addEventListener","bind","hide","show","forEach","video","Dom","append","url","type","renderTo","play","removeClass","setMute","mute","getPlayState","pause","stop","currentTime","addClass","userPlay","PLAY_STATE_USER","setValue","remove","getContainer","event","ProgressRound","lineSize","maxValue","duration","value","colorBar","colorTrack","update","paused","x","transform","HeaderBuilder","buildPlayer","playerOptions","pausePlayerWidth","renderPlayer","getPlayer","renderTitle","titleOptions","title","isNil","subtitle","renderDescription","descriptionOptions","descriptionText","subtitleDescription","code","onclick","e","stopPropagation","FeaturePromotersRegistry","getPromoter","moreLabel","roundContent","isPlainObject","renderIcon","isDomNode","embedIcon","descriptionBlock","description","PopupComponentsMakerItem","html","withoutBackground","marginTop","classList","add","renderBtn","btnOptions","btn","Button","text","label","color","ButtonColor","LIGHT_BORDER","ButtonSize","SMALL","link","round","noCaps","iconClass","icon","btnContent","button","HTMLElement","top","info","PopupHeader","backgroundColor","layout","container","theme","getAppliedTheme","getContent","bacgroundNode","EventEmitter","subscribe","data","createByJson","popupId","builder","header","target","uniquePopupId","BX","Intranet","Bitrix24","ThemePicker","Singleton","previewImage","themeClass","id","String","indexOf","Skeleton","get","PopupWithHeader","PopupComponentsMaker","template","BaseTemplate","asyncData","Promise","animationTemplate","skeletonSize","popupOptions","getPopup","popup","popupWidth","content","getHeaderWrapper","length","padding","getContentWrapper","Popup","className","contentBackground","contentPadding","angle","useAngle","offset","offsetTop","offsetLeft","offsetWidth","autoHide","closeByEsc","animation","cacheable","getContentContainer","clean","getSkeleton","preparePopupAngly","parentNode","then","response","hasContent","items","setOptions","contentWrapper","hasClass","querySelector","isShown","subscribeOnce","adjustPosition","forceBindPosition","position","isBottomAngle","overflowX","skeleton","headerContainer","popupContainer","angly","headerWrapper","sectionNode","getSection","marginBottom","appendChild","getItem","adjustPromise","scrollHeight","Error","SaleTemplate","Cache","MemoryCache","remember","item","index","itemContent","styles","push","background","margin","config","more","name","configMainButton","articleId","Helper","moreLink","buttonTag","ButtonTag","BUTTON","LINK","Size","EXTRA_SMALL","Color","SUCCESS","tag","window","open","setColor","LIGHT","buttonDescription","element","fontSize","weight"],"mappings":"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"}