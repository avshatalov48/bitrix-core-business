{"version":3,"file":"env.bundle.js","sources":["../src/internal/default-options.js","../src/env.js"],"sourcesContent":["const defaultOptions = {\n\tparams: {\n\t\ttype: 'EXTERNAL',\n\t},\n};\n\nexport default defaultOptions;","import {Reflection, Runtime} from 'main.core';\nimport defaultOptions from './internal/default-options';\nimport type {EnvOptions} from './types/env.options.types';\n\nconst optionsKey = Symbol('options');\n\n/**\n * @memberOf BX.Landing\n */\nexport class Env\n{\n\tstatic instance = null;\n\n\tstatic getInstance(): Env\n\t{\n\t\treturn Env.instance || Env.createInstance();\n\t}\n\n\tstatic createInstance(options: EnvOptions = {}): Env\n\t{\n\t\tEnv.instance = new Env(options);\n\n\t\tconst parentEnv = Reflection.getClass('parent.BX.Landing.Env');\n\t\tif (parentEnv)\n\t\t{\n\t\t\tparentEnv.instance = Env.instance;\n\t\t}\n\n\t\treturn Env.instance;\n\t}\n\n\tconstructor(options: EnvOptions = {})\n\t{\n\t\tthis[optionsKey] = Object.seal(\n\t\t\tRuntime.merge(defaultOptions, options),\n\t\t);\n\t}\n\n\tgetOptions(): EnvOptions\n\t{\n\t\treturn {...this[optionsKey]};\n\t}\n\n\tsetOptions(options: {[key: string]: any})\n\t{\n\t\tthis[optionsKey] = Runtime.merge(this[optionsKey], options);\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.getOptions().params.type;\n\t}\n\n\tsetType(type: string): void\n\t{\n\t\tthis.getOptions().params.type = type;\n\t}\n\n\tgetSpecialType(): string\n\t{\n\t\treturn this.getOptions().specialType;\n\t}\n\n\tgetSiteId(): number\n\t{\n\t\treturn this.getOptions().site_id || -1;\n\t}\n\n\tgetLandingEditorUrl(options: {site?: number, landing: number} = {}): string\n\t{\n\t\tconst envOptions = this.getOptions();\n\t\tconst urlMask = envOptions.params.sef_url.landing_view;\n\n\t\tconst siteId = options.site ? options.site : envOptions.site_id;\n\n\t\treturn urlMask\n\t\t\t.replace('#site_show#', siteId)\n\t\t\t.replace('#landing_edit#', options.landing);\n\t}\n}"],"names":["defaultOptions","params","type","optionsKey","Symbol","Env","instance","createInstance","options","parentEnv","Reflection","getClass","Object","seal","Runtime","merge","getOptions","specialType","site_id","envOptions","urlMask","sef_url","landing_view","siteId","site","replace","landing"],"mappings":";;;;;CAAA,IAAMA,cAAc,GAAG;GACtBC,MAAM,EAAE;KACPC,IAAI,EAAE;;CAER,CAAC;;;;ACJD,CAIA,IAAMC,UAAU,GAAGC,MAAM,CAAC,SAAS,CAAC;;CAEpC;CACA;CACA;AACA,KAAaC,GAAG;GAAA;KAAA;KAAA,8BAKf;OACC,OAAOA,GAAG,CAACC,QAAQ,IAAID,GAAG,CAACE,cAAc,EAAE;;;KAC3C;KAAA,iCAGD;OAAA,IADsBC,OAAmB,uEAAG,EAAE;OAE7CH,GAAG,CAACC,QAAQ,GAAG,IAAID,GAAG,CAACG,OAAO,CAAC;OAE/B,IAAMC,SAAS,GAAGC,oBAAU,CAACC,QAAQ,CAAC,uBAAuB,CAAC;OAC9D,IAAIF,SAAS,EACb;SACCA,SAAS,CAACH,QAAQ,GAAGD,GAAG,CAACC,QAAQ;;OAGlC,OAAOD,GAAG,CAACC,QAAQ;;;GAGpB,eACA;KAAA,IADYE,OAAmB,uEAAG,EAAE;KAAA;KAEnC,IAAI,CAACL,UAAU,CAAC,GAAGS,MAAM,CAACC,IAAI,CAC7BC,iBAAO,CAACC,KAAK,CAACf,cAAc,EAAEQ,OAAO,CAAC,CACtC;;GACD;KAAA;KAAA,6BAGD;OACC,yBAAW,IAAI,CAACL,UAAU,CAAC;;;KAC3B;KAAA,2BAEUK,OAA6B,EACxC;OACC,IAAI,CAACL,UAAU,CAAC,GAAGW,iBAAO,CAACC,KAAK,CAAC,IAAI,CAACZ,UAAU,CAAC,EAAEK,OAAO,CAAC;;;KAC3D;KAAA,0BAGD;OACC,OAAO,IAAI,CAACQ,UAAU,EAAE,CAACf,MAAM,CAACC,IAAI;;;KACpC;KAAA,wBAEOA,IAAY,EACpB;OACC,IAAI,CAACc,UAAU,EAAE,CAACf,MAAM,CAACC,IAAI,GAAGA,IAAI;;;KACpC;KAAA,iCAGD;OACC,OAAO,IAAI,CAACc,UAAU,EAAE,CAACC,WAAW;;;KACpC;KAAA,4BAGD;OACC,OAAO,IAAI,CAACD,UAAU,EAAE,CAACE,OAAO,IAAI,CAAC,CAAC;;;KACtC;KAAA,sCAGD;OAAA,IADoBV,OAAyC,uEAAG,EAAE;OAEjE,IAAMW,UAAU,GAAG,IAAI,CAACH,UAAU,EAAE;OACpC,IAAMI,OAAO,GAAGD,UAAU,CAAClB,MAAM,CAACoB,OAAO,CAACC,YAAY;OAEtD,IAAMC,MAAM,GAAGf,OAAO,CAACgB,IAAI,GAAGhB,OAAO,CAACgB,IAAI,GAAGL,UAAU,CAACD,OAAO;OAE/D,OAAOE,OAAO,CACZK,OAAO,CAAC,aAAa,EAAEF,MAAM,CAAC,CAC9BE,OAAO,CAAC,gBAAgB,EAAEjB,OAAO,CAACkB,OAAO,CAAC;;;GAC5C;CAAA;CACD,4BAtEYrB,GAAG,cAEG,IAAI;;;;;;;;"}