{"version":3,"file":"registry.bundle.js","sources":["../src/elements/add-to-chat-content/add-to-chat-content.js","../src/add-to-chat/add-to-chat.js","../src/add-to-collab/classes/collab-invitation-service.js","../src/add-to-collab/components/copy-invite-link.js","../src/add-to-collab/components/add-guests-tab.js","../src/add-to-collab/components/add-employees-tab.js","../src/add-to-collab/add-to-collab.js","../src/forward-popup/forward-content.js","../src/forward-popup/forward-popup.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\nimport { TagSelector } from 'ui.entity-selector';\n\nimport { ChatType, EventType, UserType } from 'im.v2.const';\nimport { ChatSearch } from 'im.v2.component.search.chat-search';\nimport { Button as MessengerButton, ButtonSize, ButtonColor } from 'im.v2.component.elements';\nimport { ChannelManager } from 'im.v2.lib.channel';\n\nimport './add-to-chat-content.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelChat, ImModelUser } from 'im.v2.model';\n\nconst searchConfig = Object.freeze({\n\tchats: false,\n\tusers: true,\n});\n\nconst SEARCH_ENTITY_ID = 'user';\nconst DEFAULT_CONTAINER_HEIGHT = 600;\n\n// @vue/component\nexport const AddToChatContent = {\n\tname: 'AddToChatContent',\n\tcomponents: { ChatSearch, MessengerButton },\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tisLoading: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t},\n\t\theight: {\n\t\t\ttype: Number,\n\t\t\tdefault: DEFAULT_CONTAINER_HEIGHT,\n\t\t},\n\t},\n\temits: ['inviteMembers'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tsearchQuery: '',\n\t\t\tshowHistory: true,\n\t\t\tselectedItems: new Set(),\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonColor: () => ButtonColor,\n\t\tsearchConfig: () => searchConfig,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tisChat(): boolean\n\t\t{\n\t\t\treturn this.dialog.type !== ChatType.user;\n\t\t},\n\t\tisCollab(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.collab;\n\t\t},\n\t\tisChannel(): boolean\n\t\t{\n\t\t\treturn ChannelManager.isChannel(this.dialogId);\n\t\t},\n\t\tshowHistoryOption(): boolean\n\t\t{\n\t\t\treturn !this.isCollab && this.isChat && !this.isChannel;\n\t\t},\n\t\tcontainerStyles(): {height: string}\n\t\t{\n\t\t\treturn {\n\t\t\t\theight: `${this.height}px`,\n\t\t\t};\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.membersSelector = this.getTagSelector();\n\t},\n\tmounted()\n\t{\n\t\tthis.membersSelector.renderTo(this.$refs['tag-selector']);\n\t\tthis.membersSelector.focusTextBox();\n\t},\n\tactivated()\n\t{\n\t\tthis.membersSelector.hideAddButton();\n\t\tthis.membersSelector.showTextBox();\n\t\tthis.membersSelector.focusTextBox();\n\t},\n\tmethods:\n\t{\n\t\tgetTagSelector(): TagSelector\n\t\t{\n\t\t\tlet timeoutId = null;\n\n\t\t\treturn new TagSelector({\n\t\t\t\tmaxHeight: 111,\n\t\t\t\tshowAddButton: false,\n\t\t\t\tshowTextBox: true,\n\t\t\t\taddButtonCaption: this.loc('IM_ENTITY_SELECTOR_ADD_TO_CHAT_ADD_MSGVER_1'),\n\t\t\t\taddButtonCaptionMore: this.loc('IM_ENTITY_SELECTOR_ADD_TO_CHAT_ADD_MORE'),\n\t\t\t\tshowCreateButton: false,\n\t\t\t\tevents: {\n\t\t\t\t\tonBeforeTagAdd: () => {\n\t\t\t\t\t\tclearTimeout(timeoutId);\n\t\t\t\t\t},\n\t\t\t\t\tonAfterTagAdd: (event) => {\n\t\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\t\tthis.selectedItems.add(tag.id);\n\t\t\t\t\t\tthis.focusSelector();\n\t\t\t\t\t},\n\t\t\t\t\tonKeyUp: (event) => {\n\t\t\t\t\t\tconst { event: keyboardEvent } = event.getData();\n\t\t\t\t\t\tEventEmitter.emit(EventType.search.keyPressed, { keyboardEvent });\n\t\t\t\t\t},\n\t\t\t\t\tonBeforeTagRemove: () => {\n\t\t\t\t\t\tclearTimeout(timeoutId);\n\t\t\t\t\t},\n\t\t\t\t\tonAfterTagRemove: (event) => {\n\t\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\t\tthis.selectedItems.delete(tag.id);\n\t\t\t\t\t\tthis.focusSelector();\n\t\t\t\t\t},\n\t\t\t\t\tonInput: () => {\n\t\t\t\t\t\tthis.searchQuery = this.membersSelector.getTextBoxValue();\n\t\t\t\t\t},\n\t\t\t\t\tonBlur: () => {\n\t\t\t\t\t\tconst inputText = this.membersSelector.getTextBoxValue();\n\t\t\t\t\t\tif (inputText.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttimeoutId = setTimeout(() => {\n\t\t\t\t\t\t\tthis.membersSelector.hideTextBox();\n\t\t\t\t\t\t\tthis.membersSelector.showAddButton();\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t},\n\t\t\t\t\tonContainerClick: () => {\n\t\t\t\t\t\tthis.focusSelector();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tfocusSelector()\n\t\t{\n\t\t\tthis.membersSelector.hideAddButton();\n\t\t\tthis.membersSelector.showTextBox();\n\t\t\tthis.membersSelector.focusTextBox();\n\t\t},\n\t\tonSelectItem(event: {dialogId: string, service: Object, selectedStatus: boolean})\n\t\t{\n\t\t\tconst { dialogId, nativeEvent } = event;\n\t\t\tif (this.selectedItems.has(dialogId))\n\t\t\t{\n\t\t\t\tconst tag = {\n\t\t\t\t\tid: dialogId,\n\t\t\t\t\tentityId: SEARCH_ENTITY_ID,\n\t\t\t\t};\n\n\t\t\t\tthis.membersSelector.removeTag(tag);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst tag = this.getTagByDialogId(dialogId);\n\t\t\t\tthis.membersSelector.addTag(tag);\n\t\t\t}\n\n\t\t\tthis.membersSelector.clearTextBox();\n\t\t\tif (!nativeEvent.altKey)\n\t\t\t{\n\t\t\t\tthis.searchQuery = '';\n\t\t\t}\n\t\t},\n\t\tgetTagByDialogId(dialogId: string): Object\n\t\t{\n\t\t\tconst user: ImModelUser = this.$store.getters['users/get'](dialogId, true);\n\t\t\tconst isExtranet = user.type === UserType.extranet;\n\t\t\tconst entityType = isExtranet ? 'extranet' : 'employee';\n\n\t\t\treturn {\n\t\t\t\tid: dialogId,\n\t\t\t\tentityId: SEARCH_ENTITY_ID,\n\t\t\t\tentityType,\n\t\t\t\ttitle: user.name,\n\t\t\t\tavatar: user.avatar.length > 0 ? user.avatar : null,\n\t\t\t};\n\t\t},\n\t\tonInviteClick()\n\t\t{\n\t\t\tconst members = [...this.selectedItems];\n\t\t\tthis.$emit('inviteMembers', { members, showHistory: this.showHistory });\n\t\t},\n\t\tloc(key: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(key);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-entity-selector-add-to-chat__container\" :style=\"containerStyles\">\n\t\t\t<div class=\"bx-im-entity-selector-add-to-chat__input\" ref=\"tag-selector\"></div>\n\t\t\t<div v-if=\"showHistoryOption\" class=\"bx-im-entity-selector-add-to-chat__show-history\">\n\t\t\t\t<input type=\"checkbox\" id=\"bx-im-entity-selector-add-to-chat-show-history\" v-model=\"showHistory\">\n\t\t\t\t<label for=\"bx-im-entity-selector-add-to-chat-show-history\">\n\t\t\t\t\t{{ loc('IM_ENTITY_SELECTOR_ADD_TO_CHAT_SHOW_HISTORY')}}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-entity-selector-add-to-chat__search-result-container\">\n\t\t\t\t<ChatSearch\n\t\t\t\t\t:searchMode=\"true\"\n\t\t\t\t\t:searchQuery=\"searchQuery\"\n\t\t\t\t\t:selectMode=\"true\"\n\t\t\t\t\t:searchConfig=\"searchConfig\"\n\t\t\t\t\t:selectedItems=\"[...selectedItems]\"\n\t\t\t\t\t:showMyNotes=\"false\"\n\t\t\t\t\t@clickItem=\"onSelectItem\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-entity-selector-add-to-chat__buttons\">\n\t\t\t\t<MessengerButton\n\t\t\t\t\t:size=\"ButtonSize.L\"\n\t\t\t\t\t:color=\"ButtonColor.Primary\"\n\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t:isLoading=\"isLoading\"\n\t\t\t\t\t:text=\"loc('IM_ENTITY_SELECTOR_ADD_TO_CHAT_INVITE_BUTTON')\"\n\t\t\t\t\t:isDisabled=\"selectedItems.size === 0\"\n\t\t\t\t\t@click=\"onInviteClick\"\n\t\t\t\t/>\n\t\t\t\t<MessengerButton\n\t\t\t\t\t:size=\"ButtonSize.L\"\n\t\t\t\t\t:color=\"ButtonColor.LightBorder\"\n\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t:text=\"loc('IM_ENTITY_SELECTOR_ADD_TO_CHAT_CANCEL_BUTTON')\"\n\t\t\t\t\t@click=\"$emit('close')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ChatService } from 'im.v2.provider.service';\nimport { PopupOptions } from 'main.popup';\n\nimport { Messenger } from 'im.public';\nimport { Core } from 'im.v2.application.core';\nimport { ChatType } from 'im.v2.const';\nimport { MessengerPopup } from 'im.v2.component.elements';\n\nimport { AddToChatContent } from '../elements/add-to-chat-content/add-to-chat-content';\n\nimport type { ImModelChat } from 'im.v2.model';\nimport type { JsonObject } from 'main.core';\n\nconst POPUP_ID = 'im-add-to-chat-popup';\n\n// @vue/component\nexport const AddToChat = {\n\tname: 'AddToChat',\n\tcomponents: { MessengerPopup, AddToChatContent },\n\tprops:\n\t{\n\t\tbindElement: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tpopupConfig: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisLoading: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tPOPUP_ID: () => POPUP_ID,\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\ttitleBar: this.$Bitrix.Loc.getMessage('IM_ENTITY_SELECTOR_ADD_TO_CHAT_ADD_MEMBERS_TITLE'),\n\t\t\t\tcloseIcon: true,\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\toffsetTop: this.popupConfig.offsetTop,\n\t\t\t\toffsetLeft: this.popupConfig.offsetLeft,\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tcontentBackground: '#fff',\n\t\t\t\tclassName: 'bx-im-entity-selector-add-to-chat__scope',\n\t\t\t};\n\t\t},\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tisChat(): boolean\n\t\t{\n\t\t\treturn this.dialog.type !== ChatType.user;\n\t\t},\n\t\tchatId(): number\n\t\t{\n\t\t\treturn this.dialog.chatId;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.chatService = new ChatService();\n\t},\n\tmethods:\n\t{\n\t\tinviteMembers(event: {members: Array<string | number>, showHistory: boolean})\n\t\t{\n\t\t\tconst { members, showHistory } = event;\n\n\t\t\tif (this.isChat)\n\t\t\t{\n\t\t\t\tthis.extendChat(members, showHistory);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmembers.push(this.dialogId, Core.getUserId());\n\t\t\t\tvoid this.createChat(members);\n\t\t\t}\n\t\t},\n\t\textendChat(members: Array<string | number>, showHistory: boolean)\n\t\t{\n\t\t\tthis.isLoading = true;\n\t\t\tthis.chatService.addToChat({\n\t\t\t\tchatId: this.chatId,\n\t\t\t\tmembers,\n\t\t\t\tshowHistory,\n\t\t\t}).then(() => {\n\t\t\t\tthis.isLoading = false;\n\t\t\t\tthis.$emit('close');\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\tthis.isLoading = false;\n\t\t\t\tthis.$emit('close');\n\t\t\t});\n\t\t},\n\t\tasync createChat(members: number[])\n\t\t{\n\t\t\tthis.isLoading = true;\n\t\t\tconst { newDialogId } = await this.chatService.createChat({\n\t\t\t\ttitle: null,\n\t\t\t\tdescription: null,\n\t\t\t\tmembers,\n\t\t\t\townerId: Core.getUserId(),\n\t\t\t\tisPrivate: true,\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\tthis.isLoading = false;\n\t\t\t});\n\t\t\tthis.isLoading = false;\n\t\t\tthis.$emit('close');\n\t\t\tvoid Messenger.openChat(newDialogId);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<MessengerPopup\n\t\t\t:config=\"config\"\n\t\t\t:id=\"POPUP_ID\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<AddToChatContent \n\t\t\t\t:dialogId=\"dialogId\" \n\t\t\t\t:isLoading=\"isLoading\"\n\t\t\t\t@close=\"$emit('close')\"\n\t\t\t\t@inviteMembers=\"inviteMembers\"\n\t\t\t/>\n\t\t</MessengerPopup>\n\t`,\n};\n","import { RestMethod } from 'im.v2.const';\nimport { runAction } from 'im.v2.lib.rest';\nimport { Utils } from 'im.v2.lib.utils';\n\ntype AddEmployeesToCollabRequest = {\n\tdialogId: string,\n\tmembers: number[],\n};\n\nexport class CollabInvitationService\n{\n\taddEmployees({ dialogId, members }: AddEmployeesToCollabRequest): Promise\n\t{\n\t\tconst payload = {\n\t\t\tdata: {\n\t\t\t\tdialogId,\n\t\t\t\tmembers: Utils.user.prepareSelectorIds(members),\n\t\t\t},\n\t\t};\n\n\t\treturn runAction(RestMethod.socialnetworkMemberAdd, payload)\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error('CollabInvitationService: add employee error', error);\n\t\t\t});\n\t}\n\n\tcopyLink(collabId: number): Promise<string>\n\t{\n\t\tconst payload = {\n\t\t\tdata: { collabId },\n\t\t};\n\n\t\treturn runAction(RestMethod.intranetInviteGetLinkByCollabId, payload)\n\t\t\t.catch((errors) => {\n\t\t\t\tconsole.error('CollabInvitationService: getting invite link error', errors);\n\t\t\t\tthrow errors;\n\t\t\t});\n\t}\n\n\tupdateLink(collabId: number): Promise<null>\n\t{\n\t\tconst payload = {\n\t\t\tdata: { collabId },\n\t\t};\n\n\t\treturn runAction(RestMethod.intranetInviteRegenerateLinkByCollabId, payload)\n\t\t\t.catch((errors) => {\n\t\t\t\tconsole.error('CollabInvitationService: updating invite link error', errors);\n\t\t\t\tthrow errors;\n\t\t\t});\n\t}\n}\n","import { hint } from 'ui.vue3.directives.hint';\n\nimport { Utils } from 'im.v2.lib.utils';\nimport { ActionByRole } from 'im.v2.const';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\nimport { Button as MessengerButton, ButtonColor, ButtonSize, ChatHint } from 'im.v2.component.elements';\n\nimport { CollabInvitationService } from '../classes/collab-invitation-service';\n\nimport type { JsonObject } from 'main.core';\nimport type { PopupOptions } from 'main.popup';\n\n// @vue/component\nexport const CopyInviteLink = {\n\tname: 'CopyInviteLink',\n\tcomponents: { MessengerButton, ChatHint },\n\tdirectives: { hint },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcollabId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCopyingInviteLink: false,\n\t\t\tisUpdatingLink: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonColor: () => ButtonColor,\n\t\tisInviteLinkAvailable(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.inviteByLinkAvailable);\n\t\t},\n\t\tupdateLinkHint(): { text: string, popupOptions: PopupOptions }\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: this.loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_LINK_UPDATE_HINT'),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\twidth: 278,\n\t\t\t\t\tbindOptions: {\n\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t},\n\t\t\t\t\tangle: {\n\t\t\t\t\t\toffset: 36,\n\t\t\t\t\t\tposition: 'top',\n\t\t\t\t\t},\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t\toffsetTop: -8,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tcanUpdateLink(): boolean\n\t\t{\n\t\t\treturn PermissionManager.getInstance().canPerformActionByRole(ActionByRole.updateInviteLink, this.dialogId);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tasync copyInviteLink()\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.isCopyingInviteLink = true;\n\t\t\t\tconst link = await (new CollabInvitationService()).copyLink(this.collabId);\n\t\t\t\tawait Utils.text.copyToClipboard(link);\n\t\t\t\tthis.showNotification(this.loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_LINK_COPIED'));\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tthis.showNotification(this.loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_LINK_NOT_COPIED'));\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tthis.isCopyingInviteLink = false;\n\t\t\t}\n\t\t},\n\t\tasync updateLink()\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.isUpdatingLink = true;\n\t\t\t\tawait (new CollabInvitationService()).updateLink(this.collabId);\n\t\t\t\tthis.showNotification(this.loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_LINK_UPDATED'));\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\tthis.showNotification(this.loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_LINK_UPDATED_ERROR'));\n\t\t\t}\n\t\t\tfinally\n\t\t\t{\n\t\t\t\tthis.isUpdatingLink = false;\n\t\t\t}\n\t\t},\n\t\tshowNotification(content: string)\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({ content });\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-if=\"isInviteLinkAvailable\" class=\"bx-im-add-to-collab__invite-block --link\">\n\t\t\t<span class=\"bx-im-add-to-collab__invite-block-title --ellipsis\">\n\t\t\t\t{{ loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_INVITE_BY_LINK') }}\n\t\t\t</span>\n\t\t\t<MessengerButton\n\t\t\t\t:size=\"ButtonSize.M\"\n\t\t\t\t:color=\"ButtonColor.Primary\"\n\t\t\t\t:isRounded=\"true\"\n\t\t\t\t:isUppercase=\"false\"\n\t\t\t\t:isLoading=\"isCopyingInviteLink\"\n\t\t\t\t:isDisabled=\"isUpdatingLink\"\n\t\t\t\t:text=\"loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_COPY_LINK')\"\n\t\t\t\t@click=\"copyInviteLink\"\n\t\t\t/>\n\t\t\t<button\n\t\t\t\tv-if=\"canUpdateLink\"\n\t\t\t\tv-hint=\"updateLinkHint\"\n\t\t\t\t:class=\"{'--loading': isUpdatingLink}\"\n\t\t\t\tclass=\"bx-im-add-to-collab__update-link_button\"\n\t\t\t\t@click=\"updateLink\"\n\t\t\t>\n\t\t\t\t<span class=\"bx-im-add-to-collab__update-link_icon\"></span>\n\t\t\t</button>\n\t\t</div>\n\t`,\n};\n","import { InvitationInput } from 'intranet.invitation-input';\nimport { EventEmitter } from 'main.core.events';\n\nimport { UserType } from 'im.v2.const';\nimport { Core } from 'im.v2.application.core';\nimport { openHelpdeskArticle } from 'im.v2.lib.helpdesk';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\nimport { Button as MessengerButton, ButtonSize, ButtonColor, ScrollWithGradient } from 'im.v2.component.elements';\n\nimport { CopyInviteLink } from './copy-invite-link';\n\nimport type { ImModelChat, ImModelCollabInfo, ImModelUser } from 'im.v2.model';\nimport type { JsonObject } from 'main.core';\n\nconst HELPDESK_SLIDER_CLOSE_EVENT = 'SidePanel.Slider:onClose';\nconst HELPDESK_SLIDER_ID = 'main:helper';\n\n// @vue/component\nexport const AddGuestsTab = {\n\tname: 'AddGuestsTab',\n\tcomponents: { MessengerButton, ScrollWithGradient, CopyInviteLink },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\theight: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t},\n\temits: ['close', 'closeHelpdeskSlider', 'openHelpdeskSlider'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisAddButtonDisabled: true,\n\t\t\tisInvitingGuests: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonColor: () => ButtonColor,\n\t\tisCurrentUserCollaber(): boolean\n\t\t{\n\t\t\tconst currentUser: ImModelUser = this.$store.getters['users/get'](Core.getUserId(), true);\n\n\t\t\treturn currentUser.type === UserType.collaber;\n\t\t},\n\t\tpreparedDescription(): string\n\t\t{\n\t\t\tif (this.isCurrentUserCollaber)\n\t\t\t{\n\t\t\t\treturn this.loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_DESCRIPTION_TEXT_GUEST');\n\t\t\t}\n\n\t\t\treturn this.loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_DESCRIPTION_TEXT_EMPLOYEE');\n\t\t},\n\t\tpreparedDescriptionTitle(): string\n\t\t{\n\t\t\tif (this.isCurrentUserCollaber)\n\t\t\t{\n\t\t\t\treturn this.loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_DESCRIPTION_TITLE_GUEST');\n\t\t\t}\n\n\t\t\treturn this.loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_DESCRIPTION_TITLE_EMPLOYEE');\n\t\t},\n\t\tchatId(): number\n\t\t{\n\t\t\tconst chat: ImModelChat = this.$store.getters['chats/get'](this.dialogId, true);\n\n\t\t\treturn chat.chatId;\n\t\t},\n\t\tcollabId(): number\n\t\t{\n\t\t\tconst collab: ImModelCollabInfo = this.$store.getters['chats/collabs/getByChatId'](this.chatId);\n\n\t\t\treturn collab.collabId;\n\t\t},\n\t\tcontainerStyles(): {height: string}\n\t\t{\n\t\t\treturn {\n\t\t\t\theight: `${this.height}px`,\n\t\t\t};\n\t\t},\n\t\tisPhoneInviteAvailable(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.inviteByPhoneAvailable);\n\t\t},\n\t\tpreparedInvitationTitle(): string\n\t\t{\n\t\t\tif (this.isPhoneInviteAvailable)\n\t\t\t{\n\t\t\t\treturn this.loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_INVITE_BY_PHONE_OR_EMAIL');\n\t\t\t}\n\n\t\t\treturn this.loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_INVITE_BY_EMAIL');\n\t\t},\n\t\tisCollaber(): boolean\n\t\t{\n\t\t\tconst currentUser: ImModelUser = this.$store.getters['users/get'](Core.getUserId());\n\n\t\t\treturn currentUser.type === UserType.collaber;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initInvitationInput();\n\t\tEventEmitter.subscribe(HELPDESK_SLIDER_CLOSE_EVENT, this.onCloseOpenHelpdeskSlider);\n\t},\n\tmounted()\n\t{\n\t\tthis.invitationGuests.renderTo(this.$refs['im-collab-invitation-guests-input']);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.invitationGuests.unsubscribe('readyState', this.onReadySaveInputHandler);\n\t\tthis.invitationGuests.unsubscribe('onUnreadySave', this.onUnreadySaveInputHandler);\n\t\tEventEmitter.unsubscribe(HELPDESK_SLIDER_CLOSE_EVENT, this.onCloseOpenHelpdeskSlider);\n\t},\n\tmethods:\n\t{\n\t\topenHelpdesk()\n\t\t{\n\t\t\tthis.$emit('openHelpdeskSlider');\n\n\t\t\tconst ARTICLE_CODE = '22706836';\n\t\t\topenHelpdeskArticle(ARTICLE_CODE);\n\t\t},\n\t\tinitInvitationInput()\n\t\t{\n\t\t\tthis.invitationGuests = new InvitationInput();\n\t\t\tthis.invitationGuests.subscribe('onReadySave', this.onReadySaveInputHandler);\n\t\t\tthis.invitationGuests.subscribe('onUnreadySave', this.onUnreadySaveInputHandler);\n\t\t},\n\t\tonReadySaveInputHandler()\n\t\t{\n\t\t\tthis.isAddButtonDisabled = false;\n\t\t},\n\t\tonUnreadySaveInputHandler()\n\t\t{\n\t\t\tthis.isAddButtonDisabled = true;\n\t\t\tthis.isInvitingGuests = false;\n\t\t},\n\t\tasync addGuestToCollab()\n\t\t{\n\t\t\tthis.isInvitingGuests = true;\n\t\t\tawait this.invitationGuests.inviteToGroup(this.collabId);\n\t\t\tthis.isInvitingGuests = false;\n\t\t\tthis.$emit('close');\n\t\t},\n\t\tonCloseOpenHelpdeskSlider({ data })\n\t\t{\n\t\t\tconst [event] = data;\n\n\t\t\tconst sliderId = event.getSlider().getUrl().toString();\n\t\t\tif (sliderId === HELPDESK_SLIDER_ID)\n\t\t\t{\n\t\t\t\tthis.$emit('closeHelpdeskSlider');\n\t\t\t}\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-add-to-collab__container\" :style=\"containerStyles\">\n\t\t\t<div class=\"bx-im-add-to-collab__invite-section\">\n\t\t\t\t<ScrollWithGradient :gradientHeight=\"28\" :withShadow=\"true\">\n\t\t\t\t\t<div class=\"bx-im-add-to-collab__content\">\n\t\t\t\t\t\t<div class=\"bx-im-add-to-collab__description\">\n\t\t\t\t\t\t\t<div class=\"bx-im-add-to-collab__description_icon\"></div>\n\t\t\t\t\t\t\t<div class=\"bx-im-add-to-collab__description_content\">\n\t\t\t\t\t\t\t\t<div class=\"bx-im-add-to-collab__description_title\">{{ preparedDescriptionTitle }}</div>\n\t\t\t\t\t\t\t\t<div class=\"bx-im-add-to-collab__description_text\">{{ preparedDescription }}</div>\n\t\t\t\t\t\t\t\t<a class=\"bx-im-add-to-collab__helpdesk-link\" @click.prevent=\"openHelpdesk\">\n\t\t\t\t\t\t\t\t\t{{ loc('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_HELPDESK_LINK') }}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<CopyInviteLink :collabId=\"collabId\" :dialogId=\"dialogId\" />\n\t\t\t\t\t\t<div class=\"bx-im-add-to-collab__invite-block\">\n\t\t\t\t\t\t\t<span class=\"bx-im-add-to-collab__invite-block-title --ellipsis\">\n\t\t\t\t\t\t\t\t{{ preparedInvitationTitle }}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t<div \n\t\t\t\t\t\t\t\tref=\"im-collab-invitation-guests-input\" \n\t\t\t\t\t\t\t\tclass=\"bx-im-add-to-collab__invite-block-input\"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</ScrollWithGradient>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-add-to-collab__buttons\">\n\t\t\t\t<MessengerButton\n\t\t\t\t\t:size=\"ButtonSize.L\"\n\t\t\t\t\t:color=\"ButtonColor.Collab\"\n\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t:text=\"loc('IM_ENTITY_SELECTOR_ADD_TO_CHAT_INVITE_BUTTON')\"\n\t\t\t\t\t:isDisabled=\"isAddButtonDisabled || isInvitingGuests\"\n\t\t\t\t\t:isLoading=\"isInvitingGuests\"\n\t\t\t\t\t@click=\"addGuestToCollab\"\n\t\t\t\t/>\n\t\t\t\t<MessengerButton\n\t\t\t\t\t:size=\"ButtonSize.L\"\n\t\t\t\t\t:color=\"ButtonColor.LightBorder\"\n\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t:text=\"loc('IM_ENTITY_SELECTOR_ADD_TO_CHAT_CANCEL_BUTTON')\"\n\t\t\t\t\t@click=\"$emit('close')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { AddToChatContent } from '../../elements/add-to-chat-content/add-to-chat-content';\nimport { CollabInvitationService } from '../classes/collab-invitation-service';\n\n// @vue/component\nexport const AddEmployeesTab = {\n\tname: 'AddEmployeesTab',\n\tcomponents: { AddToChatContent },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\theight: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tmethods:\n\t{\n\t\tinviteMembers({ members })\n\t\t{\n\t\t\tvoid (new CollabInvitationService()).addEmployees({ dialogId: this.dialogId, members });\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-add-to-collab__employees-tab-container\">\n\t\t\t<AddToChatContent\n\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t:height=\"height\"\n\t\t\t\t@inviteMembers=\"inviteMembers\"\n\t\t\t\t@close=\"$emit('close')\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\nimport { PopupOptions } from 'main.popup';\n\nimport { UserType } from 'im.v2.const';\nimport { Core } from 'im.v2.application.core';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\nimport { MessengerPopup, SegmentButton } from 'im.v2.component.elements';\n\nimport { AddGuestsTab } from './components/add-guests-tab';\nimport { AddEmployeesTab } from './components/add-employees-tab';\n\nimport './css/add-to-collab.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelUser } from 'im.v2.model';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\nconst TabId = Object.freeze({\n\tguests: 'guests',\n\temployees: 'employees',\n});\n\nconst Tabs: Tab[] = [\n\t{\n\t\tid: TabId.guests,\n\t\ttitle: Loc.getMessage('IM_ENTITY_SELECTOR_GUESTS_TAB'),\n\t},\n\t{\n\t\tid: TabId.employees,\n\t\ttitle: Loc.getMessage('IM_ENTITY_SELECTOR_EMPLOYEES_TAB'),\n\t},\n];\n\nconst POPUP_ID = 'im-add-to-collab-popup';\nconst TAB_CONTENT_HEIGHT = 498;\n\n// @vue/component\nexport const AddToCollab = {\n\tname: 'AddToCollab',\n\tcomponents: { MessengerPopup, SegmentButton, AddGuestsTab, AddEmployeesTab },\n\tprops:\n\t{\n\t\tbindElement: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tpopupConfig: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tactiveTabId: TabId.guests,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tPOPUP_ID: () => POPUP_ID,\n\t\tTabs: () => Tabs,\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\ttitleBar: this.$Bitrix.Loc.getMessage('IM_ENTITY_SELECTOR_ADD_TO_COLLAB_TITLE'),\n\t\t\t\tcloseIcon: true,\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\toffsetTop: this.popupConfig.offsetTop,\n\t\t\t\toffsetLeft: this.popupConfig.offsetLeft,\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tcontentBackground: '#fff',\n\t\t\t\tclassName: 'bx-im-add-to-collab__scope',\n\t\t\t};\n\t\t},\n\t\ttabComponent(): BitrixVueComponentProps\n\t\t{\n\t\t\treturn this.activeTabId === TabId.guests ? AddGuestsTab : AddEmployeesTab;\n\t\t},\n\t\tisCollaber(): boolean\n\t\t{\n\t\t\tconst currentUser: ImModelUser = this.$store.getters['users/get'](Core.getUserId());\n\n\t\t\treturn currentUser.type === UserType.collaber;\n\t\t},\n\t\tisInviteLinkAvailable(): boolean\n\t\t{\n\t\t\treturn FeatureManager.isFeatureAvailable(Feature.inviteByLinkAvailable);\n\t\t},\n\t\tfinalHeight(): number\n\t\t{\n\t\t\tconst inviteLinkBlockHeight = 58 + 12;\n\t\t\tconst tabsBlockHeight = 38;\n\n\t\t\tlet finalHeight = TAB_CONTENT_HEIGHT;\n\t\t\tif (this.isCollaber)\n\t\t\t{\n\t\t\t\tfinalHeight -= tabsBlockHeight;\n\t\t\t}\n\n\t\t\tif (!this.isInviteLinkAvailable)\n\t\t\t{\n\t\t\t\tfinalHeight -= inviteLinkBlockHeight;\n\t\t\t}\n\n\t\t\treturn finalHeight;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonTabSwitch(tabId: string)\n\t\t{\n\t\t\tthis.activeTabId = tabId;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<MessengerPopup\n\t\t\t:config=\"config\"\n\t\t\t:id=\"POPUP_ID\"\n\t\t\tv-slot=\"{ enableAutoHide, disableAutoHide }\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<div class=\"bx-im-add-to-collab__tabs\">\n\t\t\t\t<SegmentButton :tabs=\"Tabs\" @segmentSelected=\"onTabSwitch\" />\n\t\t\t</div>\n\t\t\t<KeepAlive>\n\t\t\t\t<component\n\t\t\t\t\t:is=\"tabComponent\"\n\t\t\t\t\t:dialogId=\"dialogId\" \n\t\t\t\t\t:height=\"finalHeight\"\n\t\t\t\t\t@close=\"$emit('close')\"\n\t\t\t\t\t@openHelpdeskSlider=\"disableAutoHide\"\n\t\t\t\t\t@closeHelpdeskSlider=\"enableAutoHide\"\n\t\t\t\t/>\n\t\t\t</KeepAlive>\n\t\t</MessengerPopup>\n\t`,\n};\n","import { EventEmitter } from 'main.core.events';\n\nimport { Messenger } from 'im.public';\nimport { EventType } from 'im.v2.const';\nimport { ChatSearchInput } from 'im.v2.component.search.chat-search-input';\nimport { ChatSearch } from 'im.v2.component.search.chat-search';\n\nimport type { JsonObject } from 'main.core';\n\nimport './forward-content.css';\n\nconst searchConfig = Object.freeze({\n\tchats: true,\n\tusers: true,\n});\n\n// @vue/component\nexport const ForwardContent = {\n\tname: 'ForwardContent',\n\tcomponents: { ChatSearch, ChatSearchInput },\n\tprops:\n\t{\n\t\tmessagesIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tsearchQuery: '',\n\t\t\tisLoading: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tsearchConfig: () => searchConfig,\n\t},\n\tmethods:\n\t{\n\t\tonLoading(value: boolean)\n\t\t{\n\t\t\tthis.isLoading = value;\n\t\t},\n\t\tonUpdateSearch(query: string)\n\t\t{\n\t\t\tthis.searchQuery = query;\n\t\t},\n\t\tasync onSelectItem(event)\n\t\t{\n\t\t\tconst { dialogId } = event;\n\n\t\t\tEventEmitter.emit(EventType.dialog.closeBulkActionsMode);\n\n\t\t\tawait Messenger.openChat(dialogId);\n\n\t\t\tEventEmitter.emit(EventType.textarea.insertForward, {\n\t\t\t\tmessagesIds: this.messagesIds,\n\t\t\t\tdialogId,\n\t\t\t});\n\n\t\t\tthis.$emit('close');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-entity-selector-forward__container\">\n\t\t\t<div class=\"bx-im-entity-selector-forward__input\">\n\t\t\t\t<ChatSearchInput \n\t\t\t\t\t:searchMode=\"true\" \n\t\t\t\t\t:isLoading=\"isLoading\" \n\t\t\t\t\t:withIcon=\"false\" \n\t\t\t\t\t:delayForFocusOnStart=\"1\"\n\t\t\t\t\t@updateSearch=\"onUpdateSearch\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-entity-selector-forward__search-result-container\">\n\t\t\t\t<ChatSearch\n\t\t\t\t\t:searchMode=\"true\"\n\t\t\t\t\t:searchQuery=\"searchQuery\"\n\t\t\t\t\t:searchConfig=\"searchConfig\"\n\t\t\t\t\t@clickItem=\"onSelectItem\"\n\t\t\t\t\t@loading=\"onLoading\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { PopupOptions } from 'main.popup';\n\nimport { MessengerPopup } from 'im.v2.component.elements';\n\nimport { ForwardContent } from './forward-content';\n\nconst POPUP_ID = 'im-forward-popup';\n\n// @vue/component\nexport const ForwardPopup = {\n\tname: 'ForwardPopup',\n\tcomponents: { MessengerPopup, ForwardContent },\n\tprops:\n\t{\n\t\tmessagesIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['close'],\n\tcomputed:\n\t{\n\t\tPOPUP_ID: () => POPUP_ID,\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\ttitleBar: this.popupTitle,\n\t\t\t\tcloseIcon: true,\n\t\t\t\ttargetContainer: document.body,\n\t\t\t\tfixed: true,\n\t\t\t\tdraggable: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tautoHide: false,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tcontentBackground: '#fff',\n\t\t\t\tclassName: 'bx-im-entity-selector-forward__scope',\n\t\t\t};\n\t\t},\n\t\tpopupTitle(): string\n\t\t{\n\t\t\treturn this.messagesIds.length > 1\n\t\t\t\t? this.loc('IM_ENTITY_SELECTOR_ADD_TO_CHAT_FORWARD_TITLE_SEVERAL_MESSAGES')\n\t\t\t\t: this.loc('IM_ENTITY_SELECTOR_ADD_TO_CHAT_FORWARD_TITLE');\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<MessengerPopup\n\t\t\t:id=\"POPUP_ID\"\n\t\t\t:config=\"config\"\n\t\t\t@close=\"$emit('close')\"\n\t\t>\n\t\t\t<ForwardContent :messagesIds=\"messagesIds\" @close=\"$emit('close')\" />\n\t\t</MessengerPopup>\n\t`,\n};\n"],"names":["searchConfig","Object","freeze","chats","users","SEARCH_ENTITY_ID","DEFAULT_CONTAINER_HEIGHT","AddToChatContent","name","components","ChatSearch","MessengerButton","props","dialogId","type","String","required","isLoading","Boolean","height","Number","default","emits","data","searchQuery","showHistory","selectedItems","Set","computed","ButtonSize","ButtonColor","dialog","$store","getters","isChat","ChatType","user","isCollab","collab","isChannel","ChannelManager","showHistoryOption","containerStyles","created","membersSelector","getTagSelector","mounted","renderTo","$refs","focusTextBox","activated","hideAddButton","showTextBox","methods","timeoutId","TagSelector","maxHeight","showAddButton","addButtonCaption","loc","addButtonCaptionMore","showCreateButton","events","onBeforeTagAdd","clearTimeout","onAfterTagAdd","event","tag","getData","add","id","focusSelector","onKeyUp","keyboardEvent","EventEmitter","emit","EventType","search","keyPressed","onBeforeTagRemove","onAfterTagRemove","delete","onInput","getTextBoxValue","onBlur","inputText","length","setTimeout","hideTextBox","onContainerClick","onSelectItem","nativeEvent","has","entityId","removeTag","getTagByDialogId","addTag","clearTextBox","altKey","isExtranet","UserType","extranet","entityType","title","avatar","onInviteClick","members","$emit","key","$Bitrix","Loc","getMessage","template","POPUP_ID","AddToChat","MessengerPopup","bindElement","popupConfig","config","titleBar","closeIcon","offsetTop","offsetLeft","padding","contentPadding","contentBackground","className","chatId","chatService","ChatService","inviteMembers","extendChat","push","Core","getUserId","createChat","addToChat","then","catch","error","console","newDialogId","description","ownerId","isPrivate","Messenger","openChat","CollabInvitationService","addEmployees","payload","Utils","prepareSelectorIds","runAction","RestMethod","socialnetworkMemberAdd","copyLink","collabId","intranetInviteGetLinkByCollabId","errors","updateLink","intranetInviteRegenerateLinkByCollabId","CopyInviteLink","ChatHint","directives","hint","isCopyingInviteLink","isUpdatingLink","isInviteLinkAvailable","FeatureManager","isFeatureAvailable","Feature","inviteByLinkAvailable","updateLinkHint","text","popupOptions","width","bindOptions","position","angle","offset","targetContainer","document","body","canUpdateLink","PermissionManager","getInstance","canPerformActionByRole","ActionByRole","updateInviteLink","copyInviteLink","link","copyToClipboard","showNotification","content","BX","UI","Notification","Center","notify","phraseCode","replacements","HELPDESK_SLIDER_CLOSE_EVENT","HELPDESK_SLIDER_ID","AddGuestsTab","ScrollWithGradient","isAddButtonDisabled","isInvitingGuests","isCurrentUserCollaber","currentUser","collaber","preparedDescription","preparedDescriptionTitle","chat","isPhoneInviteAvailable","inviteByPhoneAvailable","preparedInvitationTitle","isCollaber","initInvitationInput","subscribe","onCloseOpenHelpdeskSlider","invitationGuests","beforeUnmount","unsubscribe","onReadySaveInputHandler","onUnreadySaveInputHandler","openHelpdesk","ARTICLE_CODE","openHelpdeskArticle","InvitationInput","addGuestToCollab","inviteToGroup","sliderId","getSlider","getUrl","toString","AddEmployeesTab","TabId","guests","employees","Tabs","TAB_CONTENT_HEIGHT","AddToCollab","SegmentButton","activeTabId","tabComponent","finalHeight","inviteLinkBlockHeight","tabsBlockHeight","onTabSwitch","tabId","ForwardContent","ChatSearchInput","messagesIds","Array","onLoading","value","onUpdateSearch","query","closeBulkActionsMode","textarea","insertForward","ForwardPopup","popupTitle","fixed","draggable","autoHide"],"mappings":"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"}