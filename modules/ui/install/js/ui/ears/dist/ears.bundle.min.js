this.BX=this.BX||{};(function(t,e,i){"use strict";var s=function(){function t(e){var i=e.target;babelHelpers.classCallCheck(this,t);this.target=i?i:null;this.pos={top:0,left:0,x:0,y:0};this.touchInit=false;this.init()}babelHelpers.createClass(t,[{key:"init",value:function t(){if(!this.target){console.warn("BX.UI.Ears: TouchController not initialized");return}this.target.addEventListener("mousedown",this.mouseDownHandler.bind(this));this.target.addEventListener("mousemove",this.mouseMoveHandler.bind(this));this.target.addEventListener("mouseup",this.mouseUpHandler.bind(this));this.target.addEventListener("mouseleave",this.mouseUpHandler.bind(this))}},{key:"mouseDownHandler",value:function t(e){this.touchInit=true;this.target.style.cursor="grabbing";this.target.style.userSelect="none";this.target.parentNode.classList.add("--grabbing");this.pos={left:this.target.scrollLeft,x:e.clientX}}},{key:"mouseMoveHandler",value:function t(e){if(!this.touchInit){return}var i=e.clientX-this.pos.x;this.target.scrollLeft=this.pos.left-i}},{key:"mouseUpHandler",value:function t(){this.touchInit=false;this.target.style.cursor="grab";this.target.style.removeProperty("user-select");this.target.parentNode.classList.remove("--grabbing")}}]);return t}();var r,n,l;var a=function(t){babelHelpers.inherits(i,t);function i(t){var s;babelHelpers.classCallCheck(this,i);s=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).apply(this,arguments));s.setEventNamespace("BX.UI.Ears");s.container=t.container||null;s.smallSize=t.smallSize||null;s.noScrollbar=t.noScrollbar?t.noScrollbar:false;s.className=t.className?t.className:null;s.mousewheel=t.mousewheel||null;s.touchScroll=t.touchScroll||null;s.wrapper=null;s.leftEar=null;s.rightEar=null;s.parentContainer=e.Type.isDomNode(s.container)?s.container.parentNode:null;s.delay=12;s.scrollTimeout=null;s.cache=new e.Cache.MemoryCache;return s}babelHelpers.createClass(i,[{key:"bindEvents",value:function t(){this.container.addEventListener("scroll",this.toggleEars.bind(this));if(this.mousewheel){this.container.addEventListener("wheel",this.onWheel.bind(this))}this.getLeftEar().addEventListener("mouseenter",this.scrollLeft.bind(this));this.getLeftEar().addEventListener("mouseleave",this.stopScroll.bind(this));this.getLeftEar().addEventListener("mousedown",this.stopScroll.bind(this));this.getLeftEar().addEventListener("mouseup",this.scrollLeft.bind(this));this.getRightEar().addEventListener("mouseenter",this.scrollRight.bind(this));this.getRightEar().addEventListener("mouseleave",this.stopScroll.bind(this));this.getRightEar().addEventListener("mousedown",this.stopScroll.bind(this));this.getRightEar().addEventListener("mouseup",this.scrollRight.bind(this))}},{key:"init",value:function t(){var e=this;if(!this.container){console.warn("BX.UI.Ears.Preview: 'container' is not defined");return}this.setWrapper();this.bindEvents();if(this.touchScroll){this.initTouchScroll()}setTimeout((function(){if(e.container.scrollWidth>e.container.offsetWidth){e.toggleRightEar();var t=e.container.querySelector('[data-role="ui-ears-active"]');t?e.scrollToActiveItem(t):null}}),600);return this}},{key:"scrollToActiveItem",value:function t(e){var i=this;var s=e.offsetLeft-(this.container.offsetWidth/2-e.offsetWidth/2);var r=0;var n=setInterval((function(){if(r>=s||r+i.container.offsetWidth>=i.container.scrollWidth){clearInterval(n)}i.container.scrollLeft=r+=10}),10)}},{key:"onWheel",value:function t(e){var i=this;if(e.deltaY<0||e.deltaX>0){this.scrollRight()}else{this.scrollLeft()}clearTimeout(this.scrollTimeout);this.scrollTimeout=setTimeout((function(){return i.stopScroll()}),150);e.preventDefault()}},{key:"setWrapper",value:function t(){this.container.classList.add("ui-ear-container");if(this.noScrollbar){this.container.classList.add("ui-ear-container-no-scrollbar")}e.Dom.append(this.getWrapper(),this.parentContainer)}},{key:"getWrapper",value:function t(){var i=this;return this.cache.remember("wrapper",(function(){return e.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(["\n\t\t\t\t\t<div class='ui-ears-wrapper "," ","'>\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t"])),i.smallSize?" ui-ears-wrapper-sm":"",i.className?i.className:"",i.getLeftEar(),i.getRightEar(),i.container)}))}},{key:"getLeftEar",value:function t(){return this.cache.remember("leftEar",(function(){return e.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(["\n\t\t\t\t\t<div class='ui-ear ui-ear-left'></div>\n\t\t\t\t"])))}))}},{key:"getRightEar",value:function t(){return this.cache.remember("rightEar",(function(){return e.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(["\n\t\t\t\t\t<div class='ui-ear ui-ear-right'></div>\n\t\t\t\t"])))}))}},{key:"toggleEars",value:function t(){this.toggleRightEar();this.toggleLeftEar()}},{key:"toggleRightEar",value:function t(){if(this.container.scrollWidth>this.container.offsetWidth&&this.container.offsetWidth+this.container.scrollLeft<this.container.scrollWidth){this.getRightEar().classList.add("ui-ear-show")}else{this.getRightEar().classList.remove("ui-ear-show")}}},{key:"toggleLeftEar",value:function t(){if(this.container.scrollLeft>0){this.getLeftEar().classList.add("ui-ear-show")}else{this.getLeftEar().classList.remove("ui-ear-show")}}},{key:"scrollLeft",value:function t(){this.stopScroll("right");var e=this.container.scrollLeft;this.container.scrollLeft-=10;this.emit("onEarsAreMoved");if(this.container.scrollLeft<=0&&e>0){this.emit("onEarsAreHidden")}this.setDelay();this.scrollInterval=setInterval(this.scrollLeft.bind(this),this.delay);this.left=true}},{key:"scrollRight",value:function t(){this.stopScroll("left");this.container.scrollLeft+=10;this.emit("onEarsAreMoved");if(this.container.scrollLeft<=10){this.emit("onEarsAreShown")}this.setDelay();this.scrollInterval=setInterval(this.scrollRight.bind(this),this.delay);this.right=true}},{key:"setDelay",value:function t(){if(this.container.scrollWidth<this.container.offsetWidth*1.6){this.delay=20;return}var e=this.container.scrollWidth-this.container.offsetWidth;var i=this.container.scrollLeft>e/1.3;var s=this.container.scrollLeft<e/4;if(this.container.scrollLeft===e){this.delay=12}if(this.left){if(s){this.delay=25}else{this.delay=12}}if(this.right){if(i){this.delay=25}else{this.delay=12}}}},{key:"stopScroll",value:function t(e){if(this.scrollInterval){clearInterval(this.scrollInterval);this.scrollInterval=0}if(e==="right"){this.right=false}else if(e==="left"){this.left=false}}},{key:"initTouchScroll",value:function t(){new s({target:this.container})}}]);return i}(i.EventEmitter);t.Ears=a})(this.BX.UI=this.BX.UI||{},BX,BX.Event);
//# sourceMappingURL=ears.bundle.map.js