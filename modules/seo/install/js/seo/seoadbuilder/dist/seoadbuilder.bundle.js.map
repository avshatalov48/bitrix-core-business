{"version":3,"file":"seoadbuilder.bundle.js","sources":["../src/seoaccount.js","../src/helper.js","../src/seoadbuilder.js","../src/seopostselector.js","../src/seoaudience.js","../src/seocrmaudience.js","../src/pageconfiguration.js"],"sourcesContent":["import { Helper } from './helper';\nimport { type AccountFields } from './types/account';\nimport {LoginFactory} from \"seo.ads.login\";\n\nexport class SeoAccount\n{\n\t_helper: Helper;\n\tconstructor(options: AccountFields): SeoAccount\n\t{\n\t\tthis.clientNode = options.clientNode;\n\t\tthis.avatarNode = options.avatarNode;\n\t\tthis.accountNode = options.accountNode;\n\t\tthis.instagramAccountNode = options.instagramAccountNode;\n\t\tthis.linkNode = options.linkNode;\n\t\tthis.provider = options.provider;\n\t\tthis.componentName = options.componentName;\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.uiNodes = options.uiNodes;\n\t\tthis._helper = Helper.getInstance(this, []);\n\t\tthis.loaded = [];\n\n\t\tthis.clientSelector = new BX.Seo.Ads.ClientSelector(options.clientBlock, {\n\t\t\tselected: this.provider.PROFILE,\n\t\t\titems: this.provider.CLIENTS,\n\t\t\tcanAddItems: true,\n\t\t\tevents: {\n\t\t\t\tonNewItem: () => {\n\t\t\t\t\tLoginFactory.getLoginObject(this.provider).login();\n\t\t\t\t},\n\t\t\t\tonSelectItem: item => {\n\t\t\t\t\tthis.setProfile(item);\n\t\t\t\t},\n\t\t\t\tonRemoveItem: item => {\n\t\t\t\t\tthis.logout(item.CLIENT_ID);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn this;\n\t}\n\n\tlistenSeoAuth()\n\t{\n\t\tBX.addCustomEvent(\n\t\t\twindow,\n\t\t\t'seo-client-auth-result',\n\t\t\tBX.proxy(this.onSeoAuth, this)\n\t\t);\n\t}\n\n\tonSeoAuth(eventData)\n\t{\n\t\teventData.reload = false;\n\t\tthis.getProvider(eventData.clientId);\n\t}\n\n\tlogout(clientId)\n\t{\n\t\tconst analyticsLabel =\n\t\t\t!(this.provider.TYPE === \"facebook\" || this.provider.TYPE === \"instagram\")\n\t\t\t\t? {}\n\t\t\t\t: {\n\t\t\t\t\tconnect: \"FBE\",\n\t\t\t\t\taction: \"disconnect\",\n\t\t\t\t\ttype: \"disconnect\"\n\t\t\t\t}\n\t\t;\n\n\t\tthis._helper.showBlock('loading');\n\t\tthis._helper.request(\n\t\t\t'logout',\n\t\t\t{logoutClientId: clientId},\n\t\t\tprovider =>\n\t\t\t\t{\n\t\t\t\t\tthis.provider = provider;\n\t\t\t\t\tif (this.clientSelector)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.clientSelector.setSelected(this.provider.PROFILE);\n\t\t\t\t\t\tthis.clientSelector.setItems(this.provider.CLIENTS);\n\t\t\t\t\t}\n\t\t\t\t\tthis._helper.setProvider(provider);\n\t\t\t\t\tthis._helper.showBlockByAuth();\n\t\t\t\t},\n\t\t\tanalyticsLabel\n\t\t);\n\t}\n\n\tgetProvider(clientId)\n\t{\n\t\tthis.showBlock('loading');\n\t\tthis.request('getProvider', {}, provider => {\n\t\t\tthis.provider = provider;\n\n\t\t\tif (this.clientSelector)\n\t\t\t{\n\t\t\t\tif (!this.provider.PROFILE ||\n\t\t\t\t\t(clientId && clientId !== this.provider.PROFILE.CLIENT_ID)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\t// set PROFILE equal to clientId or first record from CLIENTS:\n\t\t\t\t\tfor (let i = 0; i < this.provider.CLIENTS.length; i++)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet client = this.provider.CLIENTS[i];\n\n\t\t\t\t\t\tif (!clientId || clientId.toString() === client.CLIENT_ID.toString())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setProfile(client);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tthis.clientSelector.setSelected(this.provider.PROFILE);\n\t\t\t\tthis.clientSelector.setItems(this.provider.CLIENTS);\n\t\t\t}\n\t\t\tthis.showBlockByAuth();\n\t\t});\n\t}\n\n\tloadAccounts(type)\n\t{\n\t\t// this.loader.forAccount(true);\n\t\tif (this.clientSelector)\n\t\t{\n\t\t\tthis.clientSelector.disable();\n\t\t}\n\n\t\tthis._helper.request('getAccounts', {}, data => {\n\t\t\t\tif (this.clientSelector)\n\t\t\t\t{\n\t\t\t\t\tthis.clientSelector.enable();\n\t\t\t\t}\n\n\t\t\t\tthis.uiNodes.accountNotice.ad.style.display = 'none';\n\t\t\t\tif (!data.length)\n\t\t\t\t{\n\t\t\t\t\tthis.uiNodes.accountNotice.ad.style.display = 'block';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst dropDownData = data.map(accountData => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcaption: accountData.name,\n\t\t\t\t\t\tvalue: accountData.id,\n\t\t\t\t\t\tselected: accountData.id === this.accountId,\n\t\t\t\t\t\tcurrency: accountData.currency\n\t\t\t\t\t};\n\t\t\t\t}, this);\n\n\t\t\t\tthis._helper.fillDropDownControl(this.accountNode, dropDownData);\n\t\t\t\tif (dropDownData.length > 0)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tBX.fireEvent(this.accountNode, 'change');\n\t\t\t\t\t}, 150);\n\t\t\t\t}\n\t\t\t\tthis.accountNode.disabled = false\n\n\t\t\t}\n\t\t);\n\t}\n\n\tloadInstagramAccounts(type)\n\t{\n\t\tif (this.clientSelector)\n\t\t{\n\t\t\tthis.clientSelector.disable();\n\t\t}\n\n\t\tthis._helper.request('getInstagramAccounts', {}, data => {\n\t\t\t\tif (this.clientSelector)\n\t\t\t\t{\n\t\t\t\t\tthis.clientSelector.enable();\n\t\t\t\t}\n\n\t\t\t\tthis.uiNodes.accountNotice.instagram.style.display = 'none';\n\t\t\t\tif (!data.length)\n\t\t\t\t{\n\t\t\t\t\tthis.uiNodes.accountNotice.instagram.style.display = 'block';\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst dropDownData = data.map(accountData => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tcaption: accountData.name,\n\t\t\t\t\t\tvalue: accountData.id,\n\t\t\t\t\t\tpageId: accountData.page_id,\n\t\t\t\t\t\tactorId: accountData.actor_id\n\t\t\t\t\t};\n\t\t\t\t}, this);\n\n\t\t\t\tthis._helper.fillDropDownControl(this.instagramAccountNode, dropDownData);\n\t\t\t\tif (dropDownData.length > 0)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tBX.fireEvent(this.instagramAccountNode, 'change');\n\t\t\t\t\t}, 150);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\n\t\t\t\t}\n\n\t\t\t\tthis.instagramAccountNode.disabled = false;\n\t\t\t}\n\t\t);\n\t}\n\n\tloadSettings()\n\t{\n\t\tthis.instagramAccountNode.disabled  = true;\n\t\tthis.accountNode.disabled  = true;\n\n\t\tconst type = this.provider.TYPE;\n\t\tconst isSupportAccount = this.provider.IS_SUPPORT_ACCOUNT;\n\n\t\tif (!this.provider.PROFILE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.loaded.includes(type))\n\t\t{\n\t\t\tthis.loaded.push(type);\n\t\t}\n\n\t\tif (this.accountNode && isSupportAccount)\n\t\t{\n\t\t\tthis.loadAccounts();\n\t\t\tthis.loadInstagramAccounts();\n\t\t}\n\t}\n\n\tsetProfile(item)\n\t{\n\t\tthis.clientId = item && item.CLIENT_ID ? item.CLIENT_ID : null;\n\t\tthis.provider.PROFILE = item;\n\t\tthis.accountId = null;\n\t\tthis.pageId = null;\n\n\t\tif(this.clientSelector.selected)\n\t\t{\n\t\t\tthis._helper.showBlockMain();\n\t\t}\n\n\t\tthis.clientSelector.setSelected(item);\n\t}\n}","import { PopupManager } from 'main.popup';\nimport { Button } from 'ui.buttons';\nimport { SeoAccount } from './seoaccount';\nimport { Loc, Tag, Type } from \"main.core\";\n\nexport class Helper\n{\n\t_instance: Helper;\n\n\tconstructor(seoAccount: SeoAccount): Helper\n\t{\n\t\tthis.provider = seoAccount.provider;\n\t\tthis.clientId = seoAccount.clientId;\n\t\tthis.clientSelector = seoAccount.clientSelector;\n\t\tthis.clientNode = seoAccount.clientNode;\n\t\tthis.avatarNode = seoAccount.avatarNode;\n\t\tthis.linkNode = seoAccount.linkNode;\n\t\tthis.seoAccount = seoAccount;\n\t\tthis.signedParameters = seoAccount.signedParameters;\n\t\tthis.containerNode = BX('crm-ads-new-campaign');\n\n\t\tthis.mess = {\n\t\t\terrorAction: Loc.getMessage('UI_HELPER_ERROR_MSG'),\n\t\t\tdlgBtnClose: Loc.getMessage('UI_HELPER_BUTTON_CLOSE')\n\n\t\t}\n\n\t\treturn this;\n\t}\n\n\n\tsetProvider(value)\n\t{\n\t\tthis.provider = value;\n\t}\n\n\tstatic getCreated(): Helper\n\t{\n\t\tif(this._instance === undefined)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\t\treturn this._instance\n\t}\n\n\tstatic getInstance(seoAccount: SeoAccount, signedParameters): Helper\n\t{\n\t\tif(this._instance === undefined)\n\t\t{\n\t\t\tthis._instance = new Helper(seoAccount, signedParameters)\n\t\t}\n\n\t\treturn this._instance;\n\t}\n\n\trequest(action, requestData, callback, analytics)\n\t{\n\t\trequestData.action = action;\n\t\trequestData.type = this.seoAccount.provider.TYPE;\n\t\trequestData.clientId = this.seoAccount.clientId;\n\n\t\tthis.sendActionRequest(\n\t\t\taction,\n\t\t\trequestData,\n\t\t\t(response) => this.onResponse(response, callback),\n\t\t\tnull,\n\t\t\tanalytics || {}\n\t\t);\n\t}\n\n\tonResponse(response, callback)\n\t{\n\t\tif (!response.error)\n\t\t{\n\t\t\tcallback.apply(this, [response.data]);\n\t\t}\n\t}\n\n\tsendActionRequest(action, data, callbackSuccess, callbackFailure, analytics)\n\t{\n\t\tcallbackSuccess = callbackSuccess || null;\n\t\tcallbackFailure = callbackFailure || BX.proxy(this.showErrorPopup, this);\n\t\tdata = data || {};\n\t\tanalytics = analytics || {};\n\n\t\tBX.ajax.runComponentAction(\n\t\t\tthis.seoAccount.componentName,\n\t\t\taction,\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tsignedParameters: this.signedParameters,\n\t\t\t\tdata: data,\n\t\t\t\tanalyticsLabel: analytics\n\t\t\t})\n\t\t.then(\n\t\t\tresponse => {\n\t\t\t\tconst data = response.data || {};\n\t\t\t\tif (data.error)\n\t\t\t\t{\n\t\t\t\t\tcallbackFailure.apply(this, [data]);\n\t\t\t\t}\n\t\t\t\telse if (callbackSuccess)\n\t\t\t\t{\n\t\t\t\t\tcallbackSuccess.apply(this, [data]);\n\t\t\t\t}\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconst data = { 'error': true, 'text': '' };\n\t\t\t\tcallbackFailure.apply(this, [data]);\n\t\t\t}\n\t\t);\n\t}\n\n\tshowErrorPopup(data)\n\t{\n\t\tconsole.log(data);\n\t\tconst text = data.text || this.mess.errorAction;\n\n\t\tconst popup = PopupManager.create({\n\t\t\t\tid: 'crm_ads_rtg_error',\n\t\t\t\tautoHide: true,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toverlay: { backgroundColor: 'black', opacity: 500 },\n\t\t\t\tevents: {\n\t\t\t\t\t'onPopupClose': this.onErrorPopupClose.bind(this)\n\t\t\t\t},\n\t\t\t\tbuttons: [\n\t\t\t\t\tnew Button({\n\t\t\t\t\t\ttext: 'close' || this.mess.dlgBtnClose,\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: function() {\n\t\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t],\n\t\t\t}\n\t\t);\n\n\t\tpopup.setContent( `<span class=\"crm-ads-rtg-warning-popup-alert\">${text}</span>`)\n\n\t\tpopup.show();\n\t}\n\n\tonErrorPopupClose()\n\t{\n\t\tif (this.clientSelector)\n\t\t{\n\t\t\tthis.clientSelector.enable();\n\t\t}\n\t}\n\n\n\tshowBlock(blockCodes)\n\t{\n\t\tblockCodes = Type.isArray(blockCodes) ? blockCodes : [blockCodes];\n\t\tconst attributeBlock = 'data-bx-ads-block';\n\t\tconst blockNodes = [...this.containerNode.querySelectorAll('[' + attributeBlock + ']')];\n\t\tblockNodes.forEach(blockNode => {\n\t\t\tconst code = blockNode.getAttribute(attributeBlock);\n\t\t\tconst isShow = blockCodes.includes(code);\n\t\t\tblockNode.style.display = isShow ? (blockNode.dataset.flex?'flex':'block') : 'none';\n\t\t}, this);\n\t}\n\n\tshowBlockRefresh()\n\t{\n\t\tthis.showBlock(['auth', 'refresh']);\n\t}\n\n\tshowBlockLogin()\n\t{\n\t\tthis.showBlock('login');\n\n\t\tconst btn = BX('seo-ads-login-btn');\n\t\tif (btn && this.provider && this.provider.AUTH_URL)\n\t\t{\n\t\t\tbtn.setAttribute(\n\t\t\t\t'onclick',\n\t\t\t\t'BX.util.popup(\\'' + this.provider.AUTH_URL + '\\', 800, 600);'\n\t\t\t);\n\t\t}\n\t\tif (this.clientNode)\n\t\t{\n\t\t\tthis.clientNode.value = \"\";\n\t\t}\n\t}\n\n\tshowBlockMain()\n\t{\n\t\tif (this.avatarNode)\n\t\t{\n\t\t\tthis.avatarNode.style['background-image'] = 'url(' + this.provider.PROFILE.PICTURE + ')';\n\t\t}\n\t\tif (this.nameNode)\n\t\t{\n\t\t\tthis.nameNode.innerText = this.provider.PROFILE.NAME;\n\t\t}\n\t\tif (this.linkNode)\n\t\t{\n\t\t\tif (this.provider.PROFILE.LINK)\n\t\t\t{\n\t\t\t\tthis.linkNode.setAttribute('href', this.provider.PROFILE.LINK);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.linkNode.removeAttribute('href');\n\t\t\t}\n\t\t}\n\t\tif (this.clientNode)\n\t\t{\n\t\t\tthis.clientNode.value =\n\t\t\t\tthis.provider.PROFILE && this.provider.PROFILE.CLIENT_ID ?\n\t\t\t\t\tthis.provider.PROFILE.CLIENT_ID :\n\t\t\t\t\t\"\";\n\t\t}\n\n\t\tthis.showBlock(['auth', 'main']);\n\n\t\tthis.seoAccount.loadSettings();\n\t}\n\n\n\tshowBlockByAuth()\n\t{\n\t\tif (this.provider.HAS_AUTH)\n\t\t{\n\t\t\tthis.showBlockMain();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showBlockLogin();\n\t\t}\n\t}\n\n\tfillDropDownControl(node, items)\n\t{\n\t\titems = items || [];\n\t\tnode.innerHTML = '';\n\t\titems.forEach(item => {\n\t\t\tif (!item || !item.caption)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst option =\n\t\t\t\tTag.render`<option value='${item.value}' selected='${!!item.selected}'>${item.caption}</option>`;\n\n\t\t\tif(item.currency)\n\t\t\t{\n\t\t\t\toption.dataset.currency = item.currency;\n\t\t\t}\n\n\t\t\tif(item.pageId)\n\t\t\t{\n\t\t\t\toption.dataset.pageId = item.pageId;\n\t\t\t}\n\n\t\t\tif(item.actorId)\n\t\t\t{\n\t\t\t\toption.dataset.actorId = item.actorId;\n\t\t\t}\n\n\t\t\tnode.appendChild(option);\n\t\t});\n\t}\n}","import {SeoAccount} from \"./seoaccount\";\nimport {ProductSelector} from 'catalog.product-selector';\nimport {Event, Loc, Tag} from \"main.core\";\nimport {EventEmitter} from 'main.core.events';\nimport { type AdBuilderOptions } from './types/adbuilderoptions';\nimport { TagSelector } from 'ui.entity-selector';\n\nexport class SeoAdBuilder\n{\n\t_instance: SeoAdBuilder;\n\tproductSelector: ProductSelector;\n\t_DEFAULT_CURRENCY = 'RUB';\n\n\t_STAGES = {\n\t\taccountSelected: 1,\n\t\tpostSelected: 2,\n\t\tpageSelected: 3,\n\t\taudienceSelected: 4,\n\t\tbudgetSelected: 5,\n\t\ttoModeration: 6\n\t};\n\n\tconstructor(options: AdBuilderOptions)\n\t{\n\t\tif (this._instance)\n\t\t{\n\t\t\treturn this._instance;\n\t\t}\n\n\t\tthis.optionSelectedClass = 'crm-ads-new-campaign-item-option--selected';\n\t\tthis.containerId = options.containerId;\n\t\tthis.provider = options.provider;\n\t\tthis.context = options.context;\n\t\tthis.onRequest = options.onRequest;\n\t\tthis.componentName = options.componentName;\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.postListUrl = options.postListUrl;\n\t\tthis.audienceUrl = options.audienceUrl;\n\t\tthis.crmAudienceUrl = options.crmAudienceUrl;\n\t\tthis.pageConfigurationUrl = options.pageConfigurationUrl;\n\t\tthis.mess = options.mess;\n\t\tthis.type = options.type;\n\t\tthis.iBlockId = options.iBlockId;\n\t\tthis.basePriceId = options.basePriceId;\n\t\tthis.storeExists = options.storeExists;\n\t\tthis.isCloud = options.isCloud || false;\n\n\t\tthis.clientId = options.clientId;\n\t\tthis.accountId = options.accountId;\n\t\tthis.baseCurrency = options.baseCurrency;\n\t\tthis.arrows = document.querySelectorAll(\".crm-ads-new-campaign-item-arrow\");\n\n\t\tthis.price = [];\n\t\tthis.price[this._DEFAULT_CURRENCY] = [];\n\t\tthis.price[this._DEFAULT_CURRENCY]['recommended'] = { duration: 3, value: 100 };\n\t\tthis.price[this._DEFAULT_CURRENCY]['verified'] = { duration: 3, value: 200 };\n\t\tthis.price[this._DEFAULT_CURRENCY]['boost'] = { duration: 3, value: 300 };\n\t\tthis.price[this._DEFAULT_CURRENCY]['confident'] = { duration: 5, value: 500 };\n\n\t\tthis.price['USD'] = [];\n\t\tthis.price['USD']['recommended'] = { duration: 3, value: 50 };\n\t\tthis.price['USD']['verified'] = { duration: 3, value: 100 };\n\t\tthis.price['USD']['boost'] = { duration: 3, value: 150 };\n\t\tthis.price['USD']['confident'] = { duration: 5, value: 200 };\n\n\t\tthis.price['EUR'] = [];\n\t\tthis.price['EUR']['recommended'] = { duration: 3, value: 50 };\n\t\tthis.price['EUR']['verified'] = { duration: 3, value: 100 };\n\t\tthis.price['EUR']['boost'] = { duration: 3, value: 150 };\n\t\tthis.price['EUR']['confident'] = { duration: 5, value: 200 };\n\n\t\tthis.completedStages = {};\n\t\tthis.selectedRegions = {};\n\n\t\tthis.loader = {\n\t\t\tinit: caller => {\n\t\t\t\tthis.caller = caller;\n\t\t\t},\n\n\t\t\tchange: (loaderNode, inputNode, isShow) => {\n\t\t\t\tloaderNode.style.display = isShow ? '' : 'none';\n\t\t\t\tif (inputNode)\n\t\t\t\t{\n\t\t\t\t\tinputNode.disabled = (!inputNode.options.length === 0 || isShow) ? false : true;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis._instance = this;\n\t\tthis.initiateUINodes();\n\t\tthis.initiateAutoAudienceMode();\n\n\n\t\tfor (let i = this._STAGES.accountSelected; i <= this._STAGES.toModeration; i++)\n\t\t{\n\t\t\tthis.deActivateStage(i);\n\t\t}\n\n\t\tthis.initiateAccounts();\n\t\tthis.activateStage(this._STAGES.audienceSelected);\n\n\t\tthis.initiateSwitcher('product');\n\t\tthis.initiateSwitcher('audience');\n\t\tthis.initiateSwitcher('budget');\n\n\t\tthis.bindEvents()\n\t\tthis.buildSelector();\n\n\t\tthis.storeBlockShow(true);\n\t}\n\n\treInitAdCreator()\n\t{\n\t\tthis.adCreatorData = {};\n\t\tthis.adCreatorData.audienceConfig = {};\n\t\tthis.adCreatorData.crmAudienceConfig = {};\n\t}\n\n\tinitiateAccounts()\n\t{\n\t\tthis.seoAccount = new SeoAccount({\n\t\t\tclientNode: this.uiNodes.clientInput,\n\t\t\tprovider: this.provider,\n\t\t\tavatarNode: this.uiNodes.avatar,\n\t\t\tlinkNode: this.uiNodes.link,\n\t\t\taccountNode: this.uiNodes.account,\n\t\t\tinstagramAccountNode: this.uiNodes.instagramAccount,\n\t\t\tclientBlock: this.uiNodes.clientBlock,\n\t\t\tsignedParameters: this.signedParameters,\n\t\t\tcomponentName: this.componentName,\n\t\t\tuiNodes: this.uiNodes\n\t\t});\n\n\t\tthis.profileConfigured = false;\n\t\tif (!this.clientId && !this.provider.PROFILE)\n\t\t{ // use first client by default\n\t\t\tfor (let i = 0; i < this.provider.CLIENTS.length; i++)\n\t\t\t{\n\t\t\t\tthis.seoAccount.setProfile(this.provider.CLIENTS[i]);\n\t\t\t\tthis.profileConfigured = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.loader.init(this);\n\n\t\tif (this.provider.PROFILE)\n\t\t{\n\t\t\tthis.activateStage(this._STAGES.accountSelected);\n\t\t}\n\n\t\tif(!this.profileConfigured)\n\t\t{\n\t\t\tthis.seoAccount.setProfile(this.provider.PROFILE);\n\t\t}\n\n\t\tthis.seoAccount._helper.showBlockByAuth();\n\t}\n\n\tbindEvents()\n\t{\n\t\tEvent.bind(this.uiNodes.addPost, 'click', this.openPostSlider.bind(this));\n\n\t\tthis.uiNodes.createLinks.forEach(function(createLink) {\n\t\t\tEvent.bind(createLink, 'click', BX.proxy(function() {\n\t\t\t\tif (!this.hasPostLis)\n\t\t\t\t{\n\t\t\t\t\tthis.showBlockRefresh();\n\t\t\t\t}\n\t\t\t}, this));\n\t\t}, this);\n\n\t\tEvent.bind(this.uiNodes.refreshButton, 'click', BX.proxy(function() {\n\t\t\tthis.seoAccount.getProvider();\n\t\t}, this));\n\n\t\tif (this.uiNodes.autoRemover.checker)\n\t\t{\n\t\t\tEvent.bind(this.uiNodes.autoRemover.checker, 'click', () => {\n\t\t\t\tvar autoRemover = this.uiNodes.autoRemover;\n\t\t\t\tautoRemover.select.disabled = !autoRemover.checker.checked;\n\t\t\t});\n\t\t}\n\n\t\tEvent.bind(this.uiNodes.logout, 'click', BX.proxy(function() {\n\t\t\tthis.seoAccount.logout(this.clientId);\n\t\t}, this));\n\n\t\tEvent.bind(this.uiNodes.addClientBtn, 'click', BX.proxy(function() {\n\t\t\tBX.util.popup(_this.provider.AUTH_URL, 800, 600);\n\t\t}, this));\n\n\t\tthis.arrows.forEach(arrow => {\n\t\t\t\tarrow.addEventListener('click', this.switchCollapsed);\n\t\t\t}\n\t\t);\n\n\t\tEvent.bind(this.uiNodes.account, 'change', this.checkCurrency.bind(this));\n\t\tdocument.querySelectorAll('.seo-ads-budget-item-block').forEach(div => {\n\t\t\tEvent.bind(div, 'click', this.calculateTotal.bind(this));\n\t\t});\n\n\t\tdocument.querySelectorAll('.seo-ads-audience-item-block').forEach(div => {\n\t\t\tEvent.bind(div, 'click', this.changeAudienceMode.bind(this));\n\t\t});\n\n\t\tdocument.querySelectorAll('.seo-ads-product-item-block').forEach(div => {\n\t\t\tEvent.bind(div, 'click', this.changeProductSelectionMode.bind(this));\n\t\t});\n\n\t\tEvent.bind(this.uiNodes.audienceExpert, 'click', this.showAudienceExpertModeForm.bind(this));\n\t\tEvent.bind(this.uiNodes.productExpert, 'click', this.openTargetPageSlider.bind(this));\n\n\t\tEvent.bind(this.uiNodes.addProductBtn, 'click', this.toCreateStoreSlider.bind(this));\n\t\tEvent.bind(this.uiNodes.addCurrencyBtn, 'click', this.addCurrency.bind(this));\n\t\tEvent.bind(this.uiNodes.toModerationBtn, 'click', this.sendToModeration.bind(this));\n\t}\n\n\tinitiateUINodes()\n\t{\n\t\tthis.containerNode = BX('crm-ads-new-campaign');\n\t\tBX.UI.Hint.init(this.containerNode);\n\n\t\tthis.uiNodes = {\n\t\t\t'avatar': this.containerNode.querySelector('[data-bx-ads-auth-avatar]'),\n\t\t\t'name': this.containerNode.querySelector('[data-bx-ads-auth-name]'),\n\t\t\t'link': this.containerNode.querySelector('[data-bx-ads-auth-link]'),\n\t\t\t'logout': this.containerNode.querySelector('[data-bx-ads-auth-logout]'),\n\t\t\t'clientBlock': this.containerNode.querySelector('[data-bx-ads-client]'),\n\t\t\t'clientInput': this.containerNode.querySelector('[data-bx-ads-client-input]'),\n\t\t\t'account': this.containerNode.querySelector('[data-bx-ads-account]'),\n\t\t\t'accountLoader': this.containerNode.querySelector('[data-bx-ads-account-loader]'),\n\t\t\t'instagramAccount': this.containerNode.querySelector('[data-bx-ads-instagram-account]'),\n\t\t\t'instagramAccountLoader': this.containerNode.querySelector('[data-bx-ads-instagram-account-loader]'),\n\t\t\t'errorNotFound': this.containerNode.querySelector('[data-bx-ads-post-not-found]'),\n\t\t\t'addPost': this.containerNode.querySelector('.crm-ads-new-campaign-item-post-new'),\n\t\t\t'addProductBtn': this.containerNode.querySelector('.seo-ads-add-product-btn'),\n\t\t\t'addCurrencyBtn': this.containerNode.querySelector('.seo-ads-currency-apply-btn'),\n\t\t\t'toModerationBtn': this.containerNode.querySelector('.seo-ads-to-moderation-btn'),\n\t\t\t'refreshButton': this.containerNode.querySelector('[data-bx-ads-refresh-btn]'),\n\t\t\t'currencyBlock': document.querySelector('.seo-ads-currency-block'),\n\t\t\t'audienceSummary': document.querySelector('.seo-ads-audience-summary'),\n\t\t\t'createLinks': BX.convert.nodeListToArray(\n\t\t\t\tthis.containerNode.querySelectorAll('[data-bx-ads-post-create-link]')\n\t\t\t),\n\t\t\t'accountNotice': {\n\t\t\t\t'instagram': this.containerNode.querySelector('.seo-ads-no-ad-account-instagram'),\n\t\t\t\t'ad': this.containerNode.querySelector('.seo-ads-no-ad-account'),\n\t\t\t},\n\t\t\t'audienceExpert': BX('crm-ads-new-campaign-item-expert-audience'),\n\t\t\t'productExpert': BX('crm-ads-new-campaign-item-expert-product'),\n\t\t\t'budgetExpert': BX('crm-ads-new-campaign-item-expert-budget'),\n\t\t\t'autoRemover': {\n\t\t\t\t'node': this.containerNode.querySelector('[data-bx-ads-post-auto-remove]'),\n\t\t\t\t'checker': this.containerNode.querySelector('[data-bx-ads-post-auto-remove-checker]'),\n\t\t\t\t'select': this.containerNode.querySelector('[data-bx-ads-post-auto-remove-select]')\n\t\t\t},\n\t\t\t'form': {\n\t\t\t\t'permalink': this.containerNode.querySelector('[data-bx-ads-permalink]'),\n\t\t\t\t'mediaId': this.containerNode.querySelector('[data-bx-ads-media-id]'),\n\t\t\t\t'targetUrl': this.containerNode.querySelector('[data-bx-ads-target-url]'),\n\t\t\t\t'duration': this.containerNode.querySelector('[data-bx-ads-duration]'),\n\t\t\t\t'page': this.containerNode.querySelector('[data-bx-ads-page-id]'),\n\t\t\t\t'body': this.containerNode.querySelector('[data-bx-ads-body]'),\n\t\t\t\t'adsId': this.containerNode.querySelector('[data-bx-ads-id]'),\n\t\t\t\t'pageId': this.containerNode.querySelector('[data-bx-ads-page-id]'),\n\t\t\t\t'budget': this.containerNode.querySelector('[data-bx-ads-budget]'),\n\t\t\t\t'ageFrom': this.containerNode.querySelector('[data-bx-ads-age-from]'),\n\t\t\t\t'ageTo': this.containerNode.querySelector('[data-bx-ads-age-to]'),\n\t\t\t\t'genders': this.containerNode.querySelector('[data-bx-ads-genders]'),\n\t\t\t\t'interests': this.containerNode.querySelector('[data-bx-ads-interests]'),\n\t\t\t\t'imageUrl': this.containerNode.querySelector('[data-bx-ads-image-url]'),\n\t\t\t\t'instagramAccountId': this.containerNode.querySelector('[data-bx-ads-actor-id]'),\n\t\t\t\t'segmentInclude': this.containerNode.querySelector('[data-bx-ads-segment-include]'),\n\t\t\t\t'segmentExclude': this.containerNode.querySelector('[data-bx-ads-segment-exclude]'),\n\t\t\t\t'regions': this.containerNode.querySelector('[data-bx-ads-regions]')\n\t\t\t},\n\t\t\t'adsStoreBlock': this.containerNode.querySelectorAll('.seo-ads-store'),\n\t\t\t'addClientBtn': this.containerNode.querySelector('[data-bx-ads-client-add-btn]'),\n\t\t\t'addPostBtn': this.containerNode.querySelector('[data-bx-ads-post-add]')\n\t\t};\n\t}\n\n\tinitiateSwitcher(id)\n\t{\n\t\tnew BX.UI.Switcher({\n\t\t\tnode: BX(`crm-ads-new-campaign-item-expert-${id}`),\n\t\t\tsize: \"small\"\n\t\t});\n\t}\n\n\tcheckCurrency()\n\t{\n\t\tconst account = this.uiNodes.account;\n\t\tthis.usedCurrency = account.options[account.selectedIndex].dataset.currency;\n\t\tthis.currencyExists(this.usedCurrency);\n\t}\n\n\tcalculateTotal(event)\n\t{\n\t\tif(this.checkInstagramAccount())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = event.target.dataset.type ? event.target : event.target.parentNode;\n\n\t\tconst type = target.dataset.type;\n\t\tconst price = this.price[this.usedCurrency][type];\n\t\tconst total = price.duration * price.value;\n\n\t\tdocument.querySelectorAll('.seo-ads-budget-total-value').forEach(element => {\n\t\t\telement.textContent = total;\n\t\t});\n\n\t\tdocument.querySelector('.seo-ads-budget-total-currency').textContent = this.usedCurrency;\n\t\tdocument.querySelector('.seo-ads-budget-total-duration').textContent = price.duration;\n\n\t\tdocument.querySelector('.seo-ads-total-budget').textContent = total;\n\t\tdocument.querySelector('.seo-ads-total-currency').textContent = this.usedCurrency;\n\t\tdocument.querySelector('.seo-ads-total-duration').textContent = price.duration;\n\n\t\tdocument.querySelector('.crm-ads-new-campaign-item-cost').style.display = 'block';\n\n\t\tdocument.querySelectorAll('.seo-ads-budget-item-block').forEach(div => {\n\t\t\tdiv.classList.remove(this.optionSelectedClass);\n\t\t});\n\n\t\ttarget.classList.add(this.optionSelectedClass);\n\n\t\tthis.uiNodes.form.budget.value = total;\n\t\tthis.uiNodes.form.duration.value = price.duration;\n\t\tthis.prepareCurrencyBlocks();\n\t\tthis.activateStage(this._STAGES.budgetSelected);\n\t}\n\n\tcheckInstagramAccount()\n\t{\n\t\tif (!this.uiNodes.instagramAccount.value)\n\t\t{\n\t\t\tthis.scrollToStage(this._STAGES.accountSelected);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tchangeAudienceMode(event)\n\t{\n\t\tif(this.checkInstagramAccount())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = event.target.dataset.type ? event.target : event.target.parentNode;\n\n\t\tconst type = target.dataset.type;\n\n\t\tdocument.querySelectorAll('.seo-ads-audience-item-block').forEach(div => {\n\t\t\tdiv.classList.remove(this.optionSelectedClass);\n\t\t});\n\n\t\ttarget.classList.add(this.optionSelectedClass);\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'auto':\n\t\t\t\tthis.initiateAutoAudienceMode();\n\t\t\t\tbreak;\n\t\t\tcase 'crm':\n\t\t\t\tthis.showCrmAudienceExpertModeForm();\n\t\t\t\tbreak;\n\t\t\tcase 'expert':\n\t\t\t\tthis.showAudienceExpertModeForm();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tchangeProductSelectionMode(event)\n\t{\n\t\tif(this.checkInstagramAccount())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst target = event.target.dataset.type ? event.target : event.target.parentNode;\n\n\t\tconst type = target.dataset.type;\n\t\tdocument.querySelectorAll('.seo-ads-product-item-block').forEach(div => {\n\t\t\tdiv.classList.remove(this.optionSelectedClass);\n\t\t});\n\n\t\ttarget.classList.add(this.optionSelectedClass);\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'auto':\n\t\t\t\tthis.storeBlockShow(true);\n\t\t\t\tbreak;\n\t\t\tcase 'expert':\n\t\t\t\tthis.openTargetPageSlider();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tstoreBlockShow(isShown)\n\t{\n\t\tthis.uiNodes.adsStoreBlock.forEach((element) => {\n\t\t\tif(this.storeExists && element.dataset.type === 'store-not-created')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif(!this.storeExists && element.dataset.type !== 'store-not-created')\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\n\t\t\telement.style.display = isShown?'block':'none';\n\t\t});\n\t}\n\n\tprepareCurrencyBlocks()\n\t{\n\t\tdocument.querySelectorAll('.seo-ads-current-currency').forEach(element => {\n\t\t\telement.textContent = this.usedCurrency;\n\t\t});\n\t}\n\n\tprepareCurrencyBlock(currency = this._DEFAULT_CURRENCY)\n\t{\n\t\tif (!this.price[currency])\n\t\t{\n\t\t\tfor (const key in this.price[this._DEFAULT_CURRENCY])\n\t\t\t{\n\t\t\t\tthis.convertToCurrency(\n\t\t\t\t\tkey,\n\t\t\t\t\tthis._DEFAULT_CURRENCY !== this.baseCurrency ? this.baseCurrency : currency,\n\t\t\t\t\tthis.price[this._DEFAULT_CURRENCY][key]\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const key in this.price[currency])\n\t\t{\n\t\t\tdocument.querySelector(`.seo-ads-budget-${key}-duration`).textContent = this.price[currency][key].duration;\n\t\t\tdocument.querySelector(`.seo-ads-budget-${key}-value`).textContent = this.price[currency][key].value;\n\t\t\tdocument.querySelector(`.seo-ads-budget-${key}-currency`).textContent = currency;\n\t\t}\n\t}\n\n\tconvertToCurrency(key, targetCurrency, price)\n\t{\n\t\tthis.seoAccount._helper.request('convertCurrency', {\n\t\t\t\tsourceCurrency: this.baseCurrency,\n\t\t\t\ttargetCurrency: targetCurrency,\n\t\t\t\tamount: price.value\n\t\t\t}, response => {\n\t\t\t\tconst amount = response.amount;\n\n\t\t\t\tif (!this.price[targetCurrency])\n\t\t\t\t{\n\t\t\t\t\tthis.price[targetCurrency] = [];\n\t\t\t\t}\n\n\t\t\t\tif (!this.price[targetCurrency][key])\n\t\t\t\t{\n\t\t\t\t\tthis.price[targetCurrency][key] = { duration: price.duration, value: amount };\n\t\t\t\t}\n\n\t\t\t\tif (Object.keys(this.price[targetCurrency]).length === 4)\n\t\t\t\t{\n\t\t\t\t\tthis.prepareCurrencyBlock(targetCurrency);\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\n\tcurrencyExists(currency)\n\t{\n\t\tthis.seoAccount._helper.request('checkCurrencyExists', {\n\t\t\t\tcurrency: currency\n\t\t\t}, response => {\n\t\t\t\tconst exists = response.exists;\n\n\t\t\t\tif (exists === false)\n\t\t\t\t{\n\t\t\t\t\tthis.prepareCurrencyBlocks();\n\t\t\t\t\tthis.uiNodes.currencyBlock.style.display = 'block';\n\t\t\t\t}\n\n\t\t\t\tthis.prepareCurrencyBlock(this.usedCurrency);\n\t\t\t}\n\t\t);\n\t}\n\n\taddCurrency()\n\t{\n\t\tconst count = document.querySelector('.seo-ads-currency-count');\n\t\tconst course = document.querySelector('.seo-ads-currency-course');\n\t\tif (!count.value || !course)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.seoAccount._helper.request('addCurrency', {\n\t\t\t\tnewCurrency: this.usedCurrency,\n\t\t\t\tcourse: course.value,\n\t\t\t\tamountCnt: count.value\n\t\t\t}, response => {\n\t\t\t\tconst success = response.success;\n\n\t\t\t\tif (success === false)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.uiNodes.currencyBlock.style.display = 'none';\n\t\t\t\tdelete (this.price[this.usedCurrency]);\n\t\t\t\tthis.prepareCurrencyBlock(this.usedCurrency);\n\t\t\t}\n\t\t);\n\t}\n\n\tswitchCollapsed(event)\n\t{\n\t\tconst block = event.target.closest('.crm-ads-new-campaign-item');\n\t\tconst content = block.querySelector('.crm-ads-new-campaign-item-content');\n\n\t\tif (block.classList.contains('crm-ads-new-campaign-item--hide'))\n\t\t{\n\t\t\tblock.classList.remove('crm-ads-new-campaign-item--hide');\n\t\t\tcontent.style.height = content.scrollHeight + 'px';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tblock.classList.add('crm-ads-new-campaign-item--hide');\n\t\t\tcontent.style.height = content.scrollHeight + 'px';\n\t\t\tsetTimeout(() => content.style.height = '0');\n\t\t}\n\t}\n\n\tclipTitle(title)\n\t{\n\t\tif (!title)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tconst text = title.textContent;\n\t\tconst nodeHeight = 20;\n\t\tBX.cleanNode(title);\n\n\t\tconst titleInner = BX.create(\"span\", {\n\t\t\ttext: text\n\t\t});\n\t\ttitle.appendChild(titleInner);\n\n\t\tlet a = 0;\n\t\twhile (titleInner.offsetHeight > nodeHeight && text.length > a)\n\t\t{\n\t\t\ta = a + 1;\n\t\t\ttitleInner.innerText = text.slice(0, -a) + '...';\n\t\t}\n\t}\n\n\tonPostSelected(event)\n\t{\n\t\tif (event.eventId === \"seo-ads-post-selected\" && event.data)\n\t\t{\n\t\t\tif (!event.data.media_url)\n\t\t\t{\n\t\t\t\tthis.deActivateStage(this._STAGES.postSelected);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst postItem = Tag.render` \n\t\t\t<div class=\"crm-ads-new-campaign-item-post\">\n\t\t\t   <div class=\"crm-ads-new-campaign-item-post-img\" \n\t\t\t\t\tstyle=\"background-image: url(${event.data.media_url})\">\n\t\t\t   </div>\n\t\t\t   <span class=\"crm-ads-new-campaign-item-post-text\">${event.data.caption||''}</span>\n\t\t\t   <span class=\"crm-ads-new-campaign-item-post-delete\"></span>\n\t\t\t</div>\n\t\t\t`;\n\n\t\t\tconst postListNode = document.querySelector('.crm-ads-new-campaign-item-posts');\n\t\t\tconst addNewNode = document.querySelector('.crm-ads-new-campaign-item-post-new');\n\t\t\tconst previewNode = document.querySelector('.crm-ads-new-campaign-item-total-preview-img-value');\n\n\t\t\tif (addNewNode !== postListNode.firstChild)\n\t\t\t{\n\t\t\t\tpostListNode.removeChild(postListNode.firstChild);\n\t\t\t}\n\n\t\t\tpostListNode.insertBefore(postItem, postListNode.firstChild);\n\t\t\tEvent.bind(postItem.querySelector('.crm-ads-new-campaign-item-post-delete'), 'click', () => {\n\t\t\t\tpostItem.parentNode.removeChild(postItem);\n\t\t\t});\n\n\t\t\tpreviewNode.style.backgroundImage = 'url(' + event.data.media_url + ')';\n\n\t\t\tthis.postData = event.data;\n\n\t\t\tconst title = document.querySelector('.crm-ads-new-campaign-item-post-text');\n\t\t\tthis.clipTitle(title);\n\t\t\tthis.activateStage(this._STAGES.postSelected);\n\t\t}\n\t}\n\n\topenPostSlider()\n\t{\n\t\tif (this.uiNodes.instagramAccount.value)\n\t\t{\n\t\t\tthis.openSlider(this.postListUrl, {\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tcomponentParams: {\n\t\t\t\t\tACCOUNT_ID: this.uiNodes.instagramAccount.value,\n\t\t\t\t\tCLIENT_ID: this.uiNodes.clientInput.value,\n\t\t\t\t\tTYPE: this.provider.TYPE\n\t\t\t\t}\n\t\t\t}, this.onPostSelected);\n\t\t}\n\t}\n\n\tonTargetPageSelected(event)\n\t{\n\t\tif (event.eventId === \"seo-ads-target-post-selected\" && event.data)\n\t\t{\n\t\t\tif (!event.data.targetUrl)\n\t\t\t{\n\t\t\t\tthis.deActivateStage(this._STAGES.pageSelected);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdocument.querySelector('.seo-ads-target-url').textContent = event.data.targetUrl;\n\t\t\tthis.uiNodes.form.targetUrl.value = event.data.targetUrl;\n\t\t\tthis.activateStage(this._STAGES.pageSelected);\n\t\t}\n\t}\n\n\tonFBAudienceConfigured(event)\n\t{\n\t\tif (event.eventId === \"seo-fb-audience-configured\" && event.data)\n\t\t{\n\t\t\tthis.reInitAdCreator();\n\t\t\tif (!event.data)\n\t\t\t{\n\t\t\t\tthis.deActivateStage(this._STAGES.audienceSelected);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.adCreatorData.audienceConfig = event.data;\n\t\t\tthis.activateStage(this._STAGES.audienceSelected);\n\n\t\t\tthis.uiNodes.audienceSummary.innerHTML = this.buildAudienceSummary();\n\t\t}\n\t}\n\n\tonCrmAudienceConfigured(event)\n\t{\n\t\tif (event.eventId === \"seo-crm-audience-configured\" && event.data)\n\t\t{\n\t\t\tthis.reInitAdCreator();\n\t\t\tif (!event.data)\n\t\t\t{\n\t\t\t\tthis.deActivateStage(this._STAGES.audienceSelected);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.adCreatorData.crmAudienceConfig = event.data;\n\t\t\tthis.activateStage(this._STAGES.audienceSelected);\n\t\t\tthis.uiNodes.audienceSummary.innerHTML = this.buildAudienceSummary();\n\t\t}\n\t}\n\n\topenTargetPageSlider()\n\t{\n\t\tif (this.uiNodes.instagramAccount.value)\n\t\t{\n\t\t\tthis.storeBlockShow(false);\n\t\t\tthis.openSlider(\n\t\t\t\tthis.pageConfigurationUrl, {\n\t\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\t\ttargetUrl: this.uiNodes.form.targetUrl.value || '',\n\t\t\t\t\tcacheable: false\n\t\t\t\t},\n\t\t\t\tthis.onTargetPageSelected\n\t\t\t);\n\t\t}\n\t}\n\n\topenSlider(url, params, callback)\n\t{\n\t\tconst sliderOptions = {\n\t\t\twidth: 1150,\n\t\t\tcacheable: params.cacheable || true,\n\t\t\tallowChangeHistory: false,\n\t\t\trequestMethod: 'post',\n\t\t\trequestParams: params\n\t\t};\n\n\t\tconst eventName = BX.SidePanel.Slider.getEventFullName(\"onMessage\");\n\n\t\tBX.removeAllCustomEvents(\n\t\t\twindow,\n\t\t\teventName,\n\t\t\tcallback.bind(this)\n\t\t);\n\n\t\tBX.addCustomEvent(\n\t\t\twindow,\n\t\t\teventName,\n\t\t\tcallback.bind(this)\n\t\t);\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\turl,\n\t\t\tsliderOptions\n\t\t);\n\t}\n\n\tshowAudienceExpertModeForm()\n\t{\n\t\tif (this.uiNodes.instagramAccount.value)\n\t\t{\n\t\t\tthis.openSlider(this.audienceUrl, {\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tcomponentParams: {\n\t\t\t\t\tACCOUNT_ID: this.uiNodes.instagramAccount.value,\n\t\t\t\t\tCLIENT_ID: this.uiNodes.clientInput.value,\n\t\t\t\t\tTYPE: this.provider.TYPE\n\t\t\t\t}\n\t\t\t}, this.onFBAudienceConfigured);\n\t\t}\n\t}\n\n\tshowCrmAudienceExpertModeForm()\n\t{\n\t\tif (this.uiNodes.instagramAccount.value)\n\t\t{\n\t\t\tthis.openSlider(this.crmAudienceUrl, {\n\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\tcomponentParams: {\n\t\t\t\t\tTYPE: this.provider.TYPE\n\t\t\t\t}\n\t\t\t}, this.onCrmAudienceConfigured);\n\t\t}\n\t}\n\n\tinitiateAutoAudienceMode()\n\t{\n\n\t\t\tthis.reInitAdCreator();\n\t\t\tthis.adCreatorData.crmAudienceConfig.genders = [1,2];\n\t\t\tthis.adCreatorData.crmAudienceConfig.ageFrom = 25;\n\t\t\tthis.adCreatorData.crmAudienceConfig.ageTo = 45;\n\n\t\t\tthis.activateStage(this._STAGES.audienceSelected);\n\t\t\tthis.uiNodes.audienceSummary.innerHTML = Loc.getMessage('SEO_AD_BUILDER_AUDIENCE_MEN_WOMAN_25_45');\n\t}\n\n\tbuildAudienceSummary()\n\t{\n\t\tlet summary = ''\n\n\t\tif(this.adCreatorData.audienceConfig.genderTitles)\n\t\t{\n\t\t\tsummary += `${Loc.getMessage('SEO_AD_BUILDER_GENDER')}: ${this.adCreatorData.audienceConfig.genderTitles.join(', ')} `;\n\t\t}\n\n\t\tif(this.adCreatorData.audienceConfig.ageFrom)\n\t\t{\n\t\t\tsummary += `${this.adCreatorData.audienceConfig.ageFrom} - ${this.adCreatorData.audienceConfig.ageTo}\n\t\t\t ${Loc.getMessage('SEO_AD_BUILDER_YEARS_OLD')} <br/>`;\n\t\t}\n\n\t\tif(this.adCreatorData.audienceConfig.interests)\n\t\t{\n\t\t\tlet interests = [];\n\t\t\tthis.adCreatorData.audienceConfig.interests.forEach((interest) => {\n\t\t\t\tinterests.push(interest.name);\n\t\t\t});\n\n\t\t\tsummary += `${Loc.getMessage('SEO_AD_BUILDER_INTERESTS')}: ${interests.join(', ')}<br/>`;\n\t\t}\n\n\t\tif(this.adCreatorData.crmAudienceConfig.segmentInclude)\n\t\t{\n\t\t\tsummary += `${Loc.getMessage('SEO_AD_BUILDER_CRM_AUDIENCE')}<br/>`;\n\t\t}\n\n\t\tif(Object.keys(this.selectedRegions).length)\n\t\t{\n\t\t\tlet regions = [];\n\t\t\tfor(let code in this.selectedRegions)\n\t\t\t{\n\t\t\t\tregions.push(this.selectedRegions[code].title);\n\t\t\t}\n\n\t\t\tsummary += `${Loc.getMessage('SEO_AD_BUILDER_REGION')}: ${regions.join(', ')}<br/>`;\n\t\t}\n\n\t\treturn summary;\n\t}\n\n\tsendToModeration(event)\n\t{\n\t\tthis.uiNodes.toModerationBtn.classList.add('ui-btn-wait');\n\n\t\tconst formNode = this.uiNodes.form;\n\n\t\tif (Object.keys(this.completedStages).length < 6)\n\t\t{\n\t\t\tfor (let i = this._STAGES.accountSelected; i <= this._STAGES.toModeration; i++)\n\t\t\t{\n\t\t\t\tif (!this.completedStages[i])\n\t\t\t\t{\n\t\t\t\t\tthis.scrollToStage(i);\n\t\t\t\t\tthis.uiNodes.toModerationBtn.classList.remove('ui-btn-wait');\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.uiNodes.toModerationBtn.classList.remove('ui-btn-wait');\n\t\t\treturn;\n\t\t}\n\n\t\tconst instagramAccount = this.uiNodes.instagramAccount.options[\n\t\t\tthis.uiNodes.instagramAccount.selectedIndex\n\t\t\t].dataset;\n\n\t\tconst params = {\n\t\t\tclient_id: this.uiNodes.clientInput.value,\n\t\t\tbudget: formNode.budget.value,\n\t\t\tduration: formNode.duration.value,\n\t\t\ttargetUrl: formNode.targetUrl.value,\n\t\t\taccountId: this.uiNodes.account.value,\n\t\t\tinstagramAccountId: instagramAccount.actorId,\n\t\t\tpageId: instagramAccount.pageId,\n\t\t\tbody: this.postData.caption,\n\t\t\tmediaId: this.postData.id,\n\t\t\tpermalink: this.postData.permalink,\n\t\t\timageUrl: this.postData.media_url,\n\t\t\tcountries: this.selectedRegions,\n\t\t\tinterests: this.adCreatorData.audienceConfig.interests || [],\n\t\t\tageFrom: this.adCreatorData.audienceConfig.ageFrom || '',\n\t\t\tageTo: this.adCreatorData.audienceConfig.ageTo || '',\n\t\t\tgenders: this.adCreatorData.audienceConfig.genders || ''\n\t\t};\n\n\t\tconst form = document.getElementById('bx-sender-letter-edit')\n\t\t\t.querySelector('form');\n\n\t\tformNode.permalink.value = this.postData.permalink;\n\t\tformNode.pageId.value = params.pageId;\n\t\tformNode.body.value = this.postData.caption;\n\t\tformNode.mediaId.value = params.mediaId;\n\t\tformNode.imageUrl.value = params.imageUrl;\n\t\tformNode.instagramAccountId.value = params.instagramAccountId;\n\t\tformNode.interests.value = JSON.stringify(params.interests);\n\t\tformNode.ageFrom.value = params.ageFrom;\n\t\tformNode.ageTo.value = params.ageTo;\n\t\tformNode.genders.value = JSON.stringify(params.genders);\n\t\tformNode.regions.value = JSON.stringify(params.countries);\n\n\t\tconst include = this.adCreatorData.crmAudienceConfig.segmentInclude || [];\n\t\tconst exclude = this.adCreatorData.crmAudienceConfig.segmentExclude || [];\n\t\tfor (let i = 0; i < include.length; i++)\n\t\t{\n\t\t\tconst input = Tag.render`<input type=\"hidden\" name='SEGMENT[INCLUDE][]'>`;\n\t\t\tinput.value = include[i];\n\t\t\tform.appendChild(input);\n\t\t}\n\t\tfor (let i = 0; i < exclude.length; i++)\n\t\t{\n\t\t\tconst input = Tag.render`<input type=\"hidden\" name='SEGMENT[EXCLUDE][]'>`;\n\t\t\tinput.value = exclude[i];\n\t\t\tform.appendChild(input);\n\t\t}\n\n\t\tform.submit();\n\t}\n\n\tactivateStage(stageNum)\n\t{\n\t\tconst stage = document.querySelector(`[data-stage=\"${stageNum}\"]`);\n\t\tconst line = stage.querySelector('.crm-ads-new-campaign-item-line');\n\t\tconst number = stage.querySelector('.crm-ads-new-campaign-item-number');\n\t\tconst checker = stage.querySelector('.crm-ads-new-campaign-item-number-checker');\n\n\t\tif (line && number)\n\t\t{\n\t\t\tline.classList.remove('crm-ads-new-campaign-item--inactive');\n\t\t\tnumber.classList.remove('crm-ads-new-campaign-item--inactive');\n\t\t}\n\n\t\tif (checker)\n\t\t{\n\t\t\tchecker.style.display = 'block';\n\t\t}\n\n\t\tthis.completedStages[stageNum] = stageNum;\n\n\t\tif (Object.keys(this.completedStages).length === 5)\n\t\t{\n\t\t\tthis.activateStage(this._STAGES.toModeration);\n\t\t}\n\n\t\tif (Object.keys(this.completedStages).length < 5)\n\t\t{\n\t\t\tthis.deActivateStage(this._STAGES.toModeration);\n\t\t}\n\t}\n\n\tdeActivateStage(stageNum)\n\t{\n\t\tconst stage = document.querySelector(`[data-stage=\"${stageNum}\"]`);\n\t\tconst line = stage.querySelector('.crm-ads-new-campaign-item-line');\n\t\tconst number = stage.querySelector('.crm-ads-new-campaign-item-number');\n\t\tconst checker = stage.querySelector('.crm-ads-new-campaign-item-number-checker');\n\n\t\tif (line && number)\n\t\t{\n\t\t\tline.classList.add('crm-ads-new-campaign-item--inactive');\n\t\t\tnumber.classList.add('crm-ads-new-campaign-item--inactive');\n\t\t}\n\n\t\tif (checker)\n\t\t{\n\t\t\tchecker.style.display = 'none';\n\t\t}\n\n\t\tdelete (this.completedStages[stageNum]);\n\n\t\tif (Object.keys(this.completedStages).length < 6 && this.completedStages[this._STAGES.toModeration])\n\t\t{\n\t\t\tthis.deActivateStage(this._STAGES.toModeration);\n\t\t}\n\t}\n\n\tscrollToStage(stageNum)\n\t{\n\t\tconst stage = document.querySelector(`[data-stage=\"${stageNum}\"]`);\n\n\t\tstage.scrollIntoView({\n\t\t\tbehavior: 'smooth'\n\t\t});\n\t}\n\n\tbuildSelector()\n\t{\n\t\tconst selector = new TagSelector({\n\t\t\tid: 'seo-ads-regions',\n\t\t\tdialogOptions: {\n\t\t\t\tid: 'seo-ads-regions',\n\t\t\t\tcontext: 'SEO_ADS_REGIONS',\n\t\t\t\tdropdownMode: true,\n\t\t\t\tcompactView: true,\n\t\t\t\tshowAvatars: false,\n\t\t\t\twidth: 350,\n\t\t\t\theight: 250,\n\t\t\t\trecentTabOptions: {\n\t\t\t\t\tstub: true,\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Loc.getMessage('UI_TAG_SELECTOR_START_INPUT')\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: false\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': event => {\n\t\t\t\t\t\tconst data = event.data.item;\n\t\t\t\t\t\tthis.selectedRegions[data.id] = data;\n\t\t\t\t\t\tthis.uiNodes.audienceSummary.innerHTML = this.buildAudienceSummary();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'facebook_regions',\n\t\t\t\t\t\tsearchable: true,\n\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tclientId: this.uiNodes.clientInput.value\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tselector.renderTo(document.getElementById('seo-ads-regions'));\n\t\tselector.getDialog().getRecentTab().setVisible(false)\n\t\tconst selectorOptions = {\n\t\t\tiblockId: this.iBlockId,\n\t\t\tbasePriceId: this.basePriceId,\n\t\t\tfileInputId: '',\n\t\t\tconfig: {\n\t\t\t\tENABLE_SEARCH: true,\n\t\t\t\tENABLE_IMAGE_CHANGE_SAVING: true\n\t\t\t}\n\t\t};\n\n\t\tthis.productSelector = new ProductSelector('facebook-product-selector', selectorOptions);\n\n\t\tEventEmitter.subscribe('BX.Catalog.ProductSelector:onChange', this.productSelectedEvent.bind(this));\n\t}\n\n\tproductSelectedEvent(event)\n\t{\n\t\tconst fieldData = event.data.fields;\n\t\tthis.seoAccount._helper.request('getProductUrl', {\n\t\t\t\tid: fieldData.ID\n\t\t\t}, response => {\n\t\t\t\tdocument.querySelector('.seo-ads-target-url').textContent = response;\n\t\t\t\tthis.uiNodes.form.targetUrl.value = response;\n\t\t\t\tthis.activateStage(this._STAGES.pageSelected)\n\t\t\t}\n\t\t)\n\t}\n\n\ttoCreateStoreSlider()\n\t{\n\t\tif (!this.isCloud)\n\t\t{\n\t\t\tthis.openTargetPageSlider();\n\t\t\treturn;\n\t\t}\n\n\t\tconst sliderOptions = {\n\t\t\twidth: 990,\n\t\t\tcacheable: true,\n\t\t\tallowChangeHistory: false,\n\t\t\trequestMethod: 'get'\n\t\t};\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\t'/shop/stores/site/edit/0/?super=Y',\n\t\t\tsliderOptions\n\t\t);\n\t}\n}","import { Helper } from './helper';\nimport { Event, Loc, Tag } from \"main.core\";\nimport {type PostSelectorOptions} from './types/postselectoroptions'\nimport {TextCrop} from 'ui.textcrop';\n\nexport class SeoPostSelector\n{\n\t_accountId: string;\n\t_clientId: string;\n\t_type: string;\n\n\tconstructor(options: PostSelectorOptions)\n\t{\n\t\tthis.helper = Helper.getCreated();\n\t\tthis.last = null;\n\t\tthis.stopLoading = false;\n\t\tthis.loadInProgress = false;\n\t\tthis._accountId = options.accountId;\n\t\tthis._clientId = options.clientId;\n\t\tthis._type = options.type;\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.emptyBlock = document.querySelector('.seo-ads-empty-post-list-block');\n\t\tthis.listContent = document.querySelector('.crm-order-instagram-view-list');\n\t\tthis.dataContent = [];\n\t\tthis.loader = new BX.Loader({\n\t\t\ttarget: document.querySelector(\".crm-order-instagram-view\")\n\t\t});\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis.hideListContentBlock();\n\t\tconst topSlider = BX.SidePanel.Instance.getTopSlider().iframe.contentDocument;\n\n\t\tconst observer = new IntersectionObserver(this.loadPostList.bind(this), {\n\t\t\troot: topSlider,\n\t\t\trootMargin: '0px',\n\t\t\tthreshold: 1.0\n\t\t});\n\n\t\tobserver.observe(this.listContent)\n\n\t\tthis.loadPostList();\n\n\t}\n\n\tloadPostList()\n\t{\n\t\tif(this.loadInProgress)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.stopLoading)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.loader.show();\n\n\t\tthis.loadInProgress = true;\n\t\tconst requestData = {\n\t\t\t'clientId': this._clientId || null,\n\t\t\t'type': this._type || null,\n\t\t\t'accountId': this._accountId || null,\n\t\t\t'last': this.last\n\t\t};\n\n\t\tBX.ajax.runComponentAction('bitrix:seo.ads.builder', 'getPostList', {\n\t\t\t'mode': 'class',\n\t\t\t'signedParameters': this.signedParameters,\n\t\t\t'data': requestData\n\t\t}).then(\n\t\t\tresponse => {\n\t\t\t\tconst data = response.data || {};\n\t\t\t\tif (data.error)\n\t\t\t\t{\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.successFn.apply(this, [data]);\n\t\t\t\t}\n\t\t\t\tthis.loadInProgress = false;\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tconst data = { 'error': true, 'text': '' };\n\t\t\t\tthis.loadInProgress = false;\n\t\t\t\tthis.loader.hide();\n\t\t\t}\n\t\t);\n\n\t}\n\n\tshowEmptyListBlock()\n\t{\n\t\tthis.emptyBlock.style.display = 'block';\n\t}\n\n\thideEmptyListBlock()\n\t{\n\t\tthis.emptyBlock.style.display = 'none';\n\t}\n\n\tshowListContentBlock()\n\t{\n\t\tthis.listContent.parentNode.style.display = 'block';\n\t}\n\n\thideListContentBlock()\n\t{\n\t\tthis.listContent.parentNode.style.display = 'none';\n\t}\n\n\tsuccessFn(response)\n\t{\n\t\tconst data = response.data;\n\t\tif (this.clientSelector)\n\t\t{\n\t\t\tthis.clientSelector.enable();\n\t\t}\n\n\t\tdata.postList.forEach(postListItem => {\n\t\t\t\tconst postBlock = Tag.render`\n\t\t\t\t\t<label class=\"crm-order-instagram-view-item\" id=\"instItemID_${postListItem.id}\">\n\t\t\t\t\t\t<div class=\"crm-order-instagram-view-item-detail\">\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span class=\"crm-order-instagram-view-item-img\" style=\"background-image: url(${postListItem.media_url})\"></span>\n\t\t\t\t\t\t\t\t<span class=\"crm-order-instagram-decal-container\">\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<svg width=\"67\" height=\"16\" viewBox=\"0 0 67 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t\t\t\t<path d=\"M48.6026 0.306715C54.4273 0.290801 60.2679 0.306716 66.1244 0.290802C63.0688 5.35159 60.0292 10.3805 56.9736 15.4413C56.9577 15.3777 56.9418 15.3299 56.9418 15.2981C56.7508 13.9931 56.5439 12.6722 56.353 11.3672C56.162 10.0782 55.971 8.78911 55.7641 7.50004C55.6845 6.95895 55.605 6.41785 55.5254 5.86085C55.5095 5.74945 55.4458 5.66988 55.3503 5.60622C54.8252 5.19245 54.3 4.77867 53.7589 4.36489C52.0879 3.05991 50.401 1.75493 48.7299 0.449946C48.6822 0.402203 48.6345 0.370374 48.5708 0.32263C48.5867 0.338545 48.5867 0.322629 48.6026 0.306715ZM56.4962 5.66988C56.8463 7.96156 57.1805 10.2532 57.5306 12.5449C57.642 12.4335 63.976 1.96182 64.0078 1.81859C61.4933 3.10765 58.9947 4.38081 56.4962 5.66988ZM62.7824 1.34115C62.7824 1.32524 62.7665 1.32524 62.7665 1.30932C62.3845 1.2775 51.6105 1.2775 51.4672 1.32524C52.9791 2.50291 54.4751 3.66466 55.971 4.82641C58.2468 3.66466 60.5066 2.50291 62.7824 1.34115Z\" fill=\"#999\"/>\n\t\t\t\t\t\t\t\t\t\t\t<path d=\"M9.46094 15.2344C8.60547 14.3984 4.79192 10.6375 2.65772 8.51853C2.49858 8.3753 2.35535 8.21616 2.21212 8.05702C1.44823 7.26129 1.03445 6.32234 0.954879 5.24016C0.859393 4.01475 1.1936 2.91666 1.95749 1.96179C2.67364 1.07058 3.59667 0.481747 4.74251 0.306688C6.66816 0.00431397 8.19594 0.672722 9.34178 2.24825C9.37361 2.28008 9.38952 2.31191 9.40544 2.34374C9.40544 2.34374 9.42135 2.35965 9.45318 2.37556C9.48501 2.32782 9.53275 2.26416 9.5805 2.21642C10.2012 1.34113 11.0128 0.752293 12.0313 0.434004C12.4769 0.290774 12.9384 0.258947 13.4 0.258947C14.0206 0.258947 14.6095 0.370347 15.1665 0.640892C16.5828 1.29338 17.49 2.37556 17.8242 3.88743C18.1425 5.31973 17.8242 6.64063 16.933 7.80238C16.7738 8.00927 16.5828 8.18433 16.3919 8.37531C14.9277 9.82352 13.4795 11.2717 12.0154 12.7199C11.1923 13.543 10.2422 14.4922 9.46094 15.2344ZM9.42135 13.818C9.51684 13.7226 9.61233 13.643 9.6919 13.5634C10.233 13.0223 10.79 12.4812 11.3311 11.9401C12.827 10.4601 14.3389 8.98005 15.8349 7.4841C15.9622 7.3727 16.0736 7.24538 16.1691 7.10215C17.0125 5.95631 17.1717 4.71498 16.6306 3.39409C15.9622 1.77081 14.1479 0.879609 12.4292 1.32521C11.5539 1.54801 10.8537 2.04136 10.3444 2.78934C10.0579 3.21903 9.8033 3.64872 9.51684 4.07841C9.48501 4.12615 9.45318 4.1739 9.42135 4.23755C9.3577 4.14207 9.30995 4.07841 9.26221 3.99884C8.99166 3.58506 8.73703 3.15537 8.46649 2.7416C7.65485 1.56393 6.19073 0.975095 4.80617 1.27747C2.60998 1.7549 1.40048 3.99883 2.13255 6.09954C2.32352 6.64063 2.64181 7.10215 3.05558 7.51593C3.81948 8.2639 4.58337 9.01188 5.33135 9.75986C6.58859 11.0012 7.84583 12.2584 9.11898 13.4997C9.21447 13.6111 9.30995 13.7066 9.42135 13.818Z\" fill=\"#999\"/>\n\t\t\t\t\t\t\t\t\t\t\t<path d=\"M41.4411 14.9002C41.282 14.8843 41.1387 14.8684 40.9796 14.8525C40.343 14.7888 39.7223 14.7093 39.0858 14.6456C38.5447 14.5819 38.0195 14.5501 37.4784 14.4705C37.2874 14.4546 37.1442 14.4865 36.9851 14.566C36.2371 14.9002 35.4414 15.1071 34.6297 15.1708C32.9269 15.2981 31.3354 14.948 29.8872 14.009C28.5504 13.1337 27.5796 11.9561 26.9749 10.476C26.7043 9.82352 26.5452 9.13921 26.4815 8.43897C26.3383 6.60881 26.7203 4.92188 27.7865 3.42593C28.9642 1.77082 30.5397 0.736386 32.529 0.35444C32.9269 0.274868 33.3407 0.227125 33.7385 0.243039C34.0727 0.258954 34.4069 0.243039 34.7411 0.274868C35.7278 0.370354 36.6668 0.656814 37.5262 1.15016C39.2927 2.13686 40.4862 3.60098 41.1069 5.54254C41.3138 6.19503 41.4093 6.86344 41.4252 7.54776C41.457 8.50263 41.2979 9.40975 40.9796 10.301C40.9478 10.3964 40.9478 10.4919 40.9478 10.5874C41.0432 11.4627 41.1387 12.338 41.2342 13.1974C41.2979 13.7066 41.3456 14.2159 41.4093 14.7411C41.4411 14.7888 41.4411 14.8366 41.4411 14.9002ZM40.3271 13.8021C40.3271 13.7544 40.3271 13.7385 40.3271 13.7226C40.2793 13.2292 40.2157 12.7518 40.1679 12.2584C40.1043 11.6537 40.0406 11.0649 39.977 10.4601C39.9611 10.3487 39.977 10.2691 40.0088 10.1577C40.4385 9.09146 40.5499 7.97745 40.4226 6.84753C40.3271 6.03589 40.0725 5.272 39.6587 4.57177C38.3219 2.1846 35.7119 0.895532 33.0065 1.29339C31.7333 1.48437 30.6193 2.00954 29.6644 2.853C27.8502 4.46036 27.0863 6.83161 27.6274 9.18695C28.0889 11.1444 29.2347 12.5926 31.0012 13.5316C31.7492 13.9294 32.5449 14.1522 33.3884 14.2159C33.8499 14.2477 34.2955 14.2477 34.757 14.2C35.505 14.1045 36.2212 13.8817 36.9055 13.5475C37.0487 13.4838 37.176 13.4679 37.3352 13.4838C37.6694 13.5316 37.9877 13.5634 38.3219 13.5952C38.7675 13.643 39.2131 13.6907 39.6587 13.7385C39.8656 13.7544 40.0884 13.7703 40.3271 13.8021Z\" fill=\"#999\"/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t<span>\n\t\t\t\t\t\t\t\t\t\t<svg width=\"13\" height=\"14\" viewBox=\"0 0 13 14\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M6.145 8.0856L0.5 13.7847V0.5H12.5V13.7847L6.855 8.0856L6.5 7.727L6.145 8.0856Z\" stroke=\"#999\"/>\n\t\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t<div class=\"crm-order-instagram-view-item-decs-block\">\n\t\t\t\t\t\t\t\t\t<div class=\"crm-order-instagram-view-item-decs\">\n\t\t\t\t\t\t\t\t\t\t<span class=\"crm-order-instagram-view-item-name\">${BX.util.htmlspecialchars(postListItem.caption||'')}</span>\n\t\t\t\t\t\t\t\t\t\t<span class=\"crm-order-instagram-view-item-edit\"></span>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"crm-order-instagram-view-item-checkbox-container\">\n\t\t\t\t\t\t\t\t<input class=\"crm-order-instagram-view-item-input\" \n\t\t\t\t\t\t\t\t\t\ttype=\"checkbox\" \n\t\t\t\t\t\t\t\t\t\tid=\"${postListItem.id}\" \n\t\t\t\t\t\t\t\t\t\tdata-id=\"${postListItem.id}\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<div class=\"crm-order-instagram-view-item-input-title\">${Loc.getMessage('SEO_AD_BUILDER_POST_SELECTOR_SELECT')}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"crm-order-instagram-view-item-selected-icon\">\n\t\t\t\t\t\t\t<svg width=\"13\" height=\"10\" viewBox=\"0 0 13 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n\t\t\t\t\t\t\t\t<path fill-rule=\"evenodd\" clip-rule=\"evenodd\" d=\"M4.87744 6.02868L10.9842 0L12.8322 1.85828L4.90632 9.7162L4.87744 9.68717L4.84857 9.7162L0 5.02339L1.84802 3.16511L4.87744 6.02868Z\" fill=\"white\"/>\n\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>`;\n\t\t\t\tthis.listContent.appendChild(postBlock);\n\n\t\t\t\tEvent.bind(postBlock, 'click', this.selectPost.bind(this));\n\n\t\t\t\tthis.dataContent[postListItem.id] = postListItem;\n\t\t\t\tthis.showListContentBlock();\n\n\t\t\t\tconst text = new BX.UI.TextCrop({\n\t\t\t\t\trows: 3,\n\t\t\t\t\ttarget: postBlock.querySelector('.crm-order-instagram-view-item-name'),\n\t\t\t\t});\n\t\t\t\ttext.init();\n\t\t\t}\n\t\t);\n\n\t\tthis.loader.hide();\n\n\t\tif (data.last)\n\t\t{\n\t\t\tthis.last = data.last;\n\t\t\treturn;\n\t\t}\n\n\t\tif(Object.keys(this.dataContent).length === 0)\n\t\t{\n\t\t\tthis.hideListContentBlock();\n\t\t\tthis.showEmptyListBlock();\n\t\t}\n\n\t\tthis.stopLoading = true;\n\t}\n\n\tselectPost(event)\n\t{\n\t\tconst targetElement = event.target;\n\t\tconst id = targetElement.dataset.id;\n\n\t\tdocument.querySelectorAll('.crm-order-instagram-view-item-input').forEach(\n\t\t\telement => {\n\t\t\t\telement.checked = id === element.dataset.id;\n\t\t\t}\n\t\t)\n\n\t\tdocument.querySelectorAll('.crm-order-instagram-view-item').forEach(\n\t\t\telement => {\n\t\t\t\tBX.removeClass(element, \"crm-order-instagram-view-item-selected\")\n\t\t\t}\n\t\t)\n\n\t\tBX.addClass(document.querySelector('#instItemID_' + id), \"crm-order-instagram-view-item-selected\");\n\n\t\tBX.SidePanel.Instance.close();\n\n\t\tBX.SidePanel.Instance.postMessage(\n\t\t\twindow,\n\t\t\t'seo-ads-post-selected',\n\t\t\tthis.dataContent[id]\n\t\t);\n\t}\n}","import { Helper } from './helper';\nimport { Event, Loc } from \"main.core\";\nimport {type PostSelectorOptions} from './types/postselectoroptions'\nimport { TagSelector } from 'ui.entity-selector';\n\nexport class SeoAudience\n{\n\t_accountId: string;\n\t_clientId: string;\n\t_type: string;\n\n\tconstructor(options: PostSelectorOptions)\n\t{\n\t\tthis.helper = Helper.getCreated();\n\t\tthis.last = null;\n\t\tthis._accountId = options.accountId;\n\t\tthis._clientId = options.clientId;\n\t\tthis._type = options.type;\n\t\tthis.signedParameters = options.signedParameters;\n\t\tthis.emptyBlock = document.querySelector('.seo-ads-empty-post-list-block');\n\t\tthis.listContent = document.querySelector('.crm-order-instagram-view-list');\n\t\tthis.dataContent = [];\n\t\tthis.selectedInterest = {};\n\t\tthis.loader = new BX.Loader({\n\t\t\ttarget: document.querySelector(\".crm-order-instagram-view\")\n\t\t});\n\n\t\tthis.rangeInput = document.querySelector('.crm-ads-new-campaign-item-runner-value');\n\t\tthis.inputMax = BX('max');\n\t\tthis.inputMin = BX('min');\n\t\tthis.MAX_VALUE = 65;\n\t\tthis.MIN_VALUE = 13;\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tdocument.querySelectorAll('.crm-ads-new-campaign-item-runner-input').forEach(element => {\n\t\t\tconst block = element.closest('.crm-ads-new-campaign-item-runner-block--double');\n\t\t\tif (block)\n\t\t\t{\n\t\t\t\tthis.setDoubleInputPosition();\n\t\t\t\tthis.setDoubleLabelPosition(element);\n\t\t\t\tEvent.bind(element, 'change', this.onDoubleInputRange.bind(this));\n\t\t\t\tEvent.bind(element, 'input', this.onDoubleInputRange.bind(this));\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tEvent.bind(element, 'change', this.onInputRange.bind(this));\n\t\t\t\tEvent.bind(element, 'input', this.onInputRange.bind(this));\n\t\t\t}\n\t\t});\n\n\t\tthis.buildSelector();\n\t}\n\n\tcheckSex()\n\t{\n\n\t}\n\n\tonInputRange(event)\n\t{\n\t\tconst label = event.target.closest('.crm-ads-new-campaign-item-runner-block').children[0].children[0];\n\t\tconst value = event.target.value;\n\n\t\tif(value < this.MIN_VALUE)\n\t\t{\n\t\t\tevent.target.value = this.MIN_VALUE;\n\t\t}\n\n\t\tlabel.textContent = event.target.value;\n\t\tthis.rangeInput.style.width = event.target.offsetWidth * event.target.value/65 +\"px\";\n\t}\n\n\tonDoubleInputRange(event)\n\t{\n\t\tthis.setDoubleLabelPosition(event.target);\n\t\tthis.setDoubleInputPosition();\n\n\t}\n\n\tsetDoubleLabelPosition (element)\n\t{\n\t\tconst value = element.value;\n\t\tconst label = element.previousElementSibling;\n\n\t\tif (value < this.MIN_VALUE)\n\t\t{\n\t\t\telement.value = this.MIN_VALUE;\n\t\t}\n\n\t\tlabel.children[0].textContent = element.value;\n\t\tlabel.style.left = (((value - this.MIN_VALUE) / (this.MAX_VALUE - this.MIN_VALUE)) * (element.offsetWidth - 70)) + 20 + 'px';\n\n\t}\n\n\tsetDoubleInputPosition()\n\t{\n\t\tconst labelMaxLeft = BX('label-max').getBoundingClientRect().left;\n\t\tconst labelMinLeft = BX('label-min').getBoundingClientRect().left;\n\n\t\tconst min = Math.min(labelMaxLeft, labelMinLeft);\n\n\t\tif (labelMaxLeft === min)\n\t\t{\n\t\t\tthis.rangeInput.style.width = ((((this.inputMin.value - this.MIN_VALUE)/ (this.MAX_VALUE - this.MIN_VALUE)) * (this.inputMin.offsetWidth - 40)) + 20)\n\t\t\t\t- ((((this.inputMax.value - this.MIN_VALUE)/ (this.MAX_VALUE - this.MIN_VALUE)) * (this.inputMax.offsetWidth - 40)) + 20) + 'px';\n\t\t\tthis.rangeInput.style.left = (((this.inputMax.value - this.MIN_VALUE)/ (this.MAX_VALUE- this.MIN_VALUE)) * (this.inputMax.offsetWidth - 40)) + 20 + 'px';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.rangeInput.style.width = ((((this.inputMax.value - this.MIN_VALUE)/ (this.MAX_VALUE - this.MIN_VALUE)) * (this.inputMax.offsetWidth - 40)) + 20)\n\t\t\t\t- ((((this.inputMin.value - this.MIN_VALUE)/ (this.MAX_VALUE - this.MIN_VALUE)) * (this.inputMin.offsetWidth - 40)) + 20) + 'px';\n\n\t\t\tthis.rangeInput.style.left = (((this.inputMin.value - this.MIN_VALUE) / (this.MAX_VALUE - this.MIN_VALUE)) * (this.inputMin.offsetWidth - 40)) + 20 + 'px';\n\t\t}\n\t}\n\n\tbuildSelector()\n\t{\n\t\tconst selector = new TagSelector({\n\t\t\tid: 'seo-ads-interests',\n\t\t\tdialogOptions: {\n\t\t\t\tid: 'seo-ads-interests',\n\t\t\t\tcontext: 'SEO_ADS_INTERESTS',\n\t\t\t\tdropdownMode: true,\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: false\n\t\t\t\t},\n\t\t\t\twidth: 350,\n\t\t\t\theight: 250,\n\t\t\t\trecentTabOptions: {\n\t\t\t\t\tstub: true,\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Loc.getMessage('UI_TAG_SELECTOR_START_INPUT'),\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': event => {\n\t\t\t\t\t\tconst data = event.data.item;\n\t\t\t\t\t\tthis.selectedInterest[data.id] = data;\n\t\t\t\t\t\tlet sum = 0;\n\n\t\t\t\t\t\tfor (let key in this.selectedInterest)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsum += this.selectedInterest[key].customData.get('audienceSize');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdocument.querySelector('.crm-ads-new-campaign-item-cost-value').textContent = sum;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'facebook_interests',\n\t\t\t\t\t\tsearchable: true,\n\t\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tclientId: this._clientId\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t}\n\t\t});\n\n\t\tselector.renderTo(document.getElementById('seo-ads-interests'));\n\t}\n\n\tshowEmptyListBlock()\n\t{\n\t\tthis.emptyBlock.style.display = 'block';\n\t}\n\n\thideEmptyListBlock()\n\t{\n\t\tthis.emptyBlock.style.display = 'none';\n\t}\n\n\tshowListContentBlock()\n\t{\n\t\tthis.listContent.parentNode.style.display = 'block';\n\t}\n\n\thideListContentBlock()\n\t{\n\t\tthis.listContent.parentNode.style.display = 'none';\n\t}\n\n\tapply()\n\t{\n\t\tconst applyBtn = document.getElementById('ui-button-panel-apply');\n\n\t\tBX.SidePanel.Instance.close();\n\t\tlet genders = [];\n\t\tlet genderTitles = [];\n\n\t\tif(document.getElementById('male').checked)\n\t\t{\n\t\t\tgenders.push(1);\n\t\t\tgenderTitles.push(document.getElementById('male').parentNode.querySelector('span').innerText);\n\t\t}\n\n\t\tif(document.getElementById('female').checked)\n\t\t{\n\t\t\tgenders.push(2);\n\t\t\tgenderTitles.push(document.getElementById('female').parentNode.querySelector('span').innerText);\n\t\t}\n\n\t\tlet interests = []\n\t\tObject.entries(this.selectedInterest).forEach(entry => {\n\t\t\tconst [key, value] = entry;\n\t\t\tinterests.push({\n\t\t\t\tid: value.id,\n\t\t\t\tname: value.title,\n\t\t\t})\n\t\t});\n\n\t\tBX.SidePanel.Instance.postMessage(\n\t\t\twindow,\n\t\t\t'seo-fb-audience-configured',\n\t\t\t{\n\t\t\t\tinterests: interests,\n\t\t\t\tageFrom: this.inputMin.value,\n\t\t\t\tageTo: this.inputMax.value,\n\t\t\t\tgenderTitles: genderTitles,\n\t\t\t\tgenders: genders\n\t\t\t}\n\t\t);\n\t\tdocument.getElementById('ui-button-panel-apply').classList.remove('ui-btn-wait');\n\t}\n}","export class SeoCrmAudience\n{\n\tstatic apply(applyBtn)\n\t{\n\t\tBX.SidePanel.Instance.close();\n\t\tBX.SidePanel.Instance.postMessage(\n\t\t\twindow,\n\t\t\t'seo-crm-audience-configured',\n\t\t\t{\n\t\t\t\tsegmentInclude: window.senderSegmentSelector.selectorInclude.selector.getTilesId() || [],\n\t\t\t\tsegmentExclude: window.senderSegmentSelector.selectorExclude.selector.getTilesId() || []\n\t\t\t}\n\t\t);\n\n\t\tsetTimeout(() => {\n\t\t\tapplyBtn.classList.remove('ui-btn-wait')\n\t\t}, 200)\n\t}\n}","import { Helper } from './helper';\n\nexport class PageConfiguration\n{\n\n\tconstructor()\n\t{\n\t\tthis.helper = Helper.getCreated();\n\t\tthis.targetUrlBlock = document.querySelector('.seo-ads-target-url');\n\n\t\treturn this;\n\t}\n\n\tapply(applyBtn)\n\t{\n\t\tif(!this.validateUrl(this.targetUrlBlock.value))\n\t\t{\n\t\t\tthis.removeWait(applyBtn);\n\t\t\treturn;\n\t\t}\n\n\t\tBX.SidePanel.Instance.close();\n\n\t\tBX.SidePanel.Instance.postMessage(\n\t\t\twindow,\n\t\t\t'seo-ads-target-post-selected',\n\t\t\t{\n\t\t\t\ttargetUrl: this.targetUrlBlock.value\n\t\t\t}\n\t\t);\n\t\tthis.removeWait(applyBtn);\n\t}\n\n\tremoveWait(applyBtn)\n\t{\n\t\tsetTimeout(() => {\n\t\t\tapplyBtn.classList.remove('ui-btn-wait')\n\t\t}, 200);\n\t}\n\n\tcancel()\n\t{\n\t\tBX.SidePanel.Instance.close();\n\t}\n\n\tvalidateUrl(value)\n\t{\n\t\treturn /^(?:(?:(?:https?|ftp):)?\\/\\/)(?:\\S+(?::\\S*)?@)?(?:(?!(?:10|127)(?:\\.\\d{1,3}){3})(?!(?:169\\.254|192\\.168)(?:\\.\\d{1,3}){2})(?!172\\.(?:1[6-9]|2\\d|3[0-1])(?:\\.\\d{1,3}){2})(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:[/?#]\\S*)?$/i.test(value);\n\t}\n}"],"names":["SeoAccount","options","clientNode","avatarNode","accountNode","instagramAccountNode","linkNode","provider","componentName","signedParameters","uiNodes","_helper","Helper","getInstance","loaded","clientSelector","BX","Seo","Ads","ClientSelector","clientBlock","selected","PROFILE","items","CLIENTS","canAddItems","events","onNewItem","LoginFactory","getLoginObject","login","onSelectItem","item","setProfile","onRemoveItem","logout","CLIENT_ID","addCustomEvent","window","proxy","onSeoAuth","eventData","reload","getProvider","clientId","analyticsLabel","TYPE","connect","action","type","showBlock","request","logoutClientId","setSelected","setItems","setProvider","showBlockByAuth","i","length","client","toString","disable","data","enable","accountNotice","ad","style","display","dropDownData","map","accountData","caption","name","value","id","accountId","currency","fillDropDownControl","setTimeout","fireEvent","disabled","instagram","pageId","page_id","actorId","actor_id","isSupportAccount","IS_SUPPORT_ACCOUNT","includes","push","loadAccounts","loadInstagramAccounts","showBlockMain","seoAccount","containerNode","mess","errorAction","Loc","getMessage","dlgBtnClose","requestData","callback","analytics","sendActionRequest","response","onResponse","error","apply","callbackSuccess","callbackFailure","showErrorPopup","ajax","runComponentAction","mode","then","console","log","text","popup","PopupManager","create","autoHide","lightShadow","closeByEsc","overlay","backgroundColor","opacity","onErrorPopupClose","bind","buttons","Button","click","close","setContent","show","blockCodes","Type","isArray","attributeBlock","blockNodes","querySelectorAll","forEach","blockNode","code","getAttribute","isShow","dataset","flex","btn","AUTH_URL","setAttribute","PICTURE","nameNode","innerText","NAME","LINK","removeAttribute","loadSettings","HAS_AUTH","showBlockLogin","node","innerHTML","option","Tag","render","appendChild","_instance","undefined","SeoAdBuilder","accountSelected","postSelected","pageSelected","audienceSelected","budgetSelected","toModeration","optionSelectedClass","containerId","context","onRequest","postListUrl","audienceUrl","crmAudienceUrl","pageConfigurationUrl","iBlockId","basePriceId","storeExists","isCloud","baseCurrency","arrows","document","price","_DEFAULT_CURRENCY","duration","completedStages","selectedRegions","loader","init","caller","change","loaderNode","inputNode","initiateUINodes","initiateAutoAudienceMode","_STAGES","deActivateStage","initiateAccounts","activateStage","initiateSwitcher","bindEvents","buildSelector","storeBlockShow","adCreatorData","audienceConfig","crmAudienceConfig","clientInput","avatar","link","account","instagramAccount","profileConfigured","Event","addPost","openPostSlider","createLinks","createLink","hasPostLis","showBlockRefresh","refreshButton","autoRemover","checker","select","checked","addClientBtn","util","_this","arrow","addEventListener","switchCollapsed","checkCurrency","div","calculateTotal","changeAudienceMode","changeProductSelectionMode","audienceExpert","showAudienceExpertModeForm","productExpert","openTargetPageSlider","addProductBtn","toCreateStoreSlider","addCurrencyBtn","addCurrency","toModerationBtn","sendToModeration","UI","Hint","querySelector","convert","nodeListToArray","Switcher","size","usedCurrency","selectedIndex","currencyExists","event","checkInstagramAccount","target","parentNode","total","element","textContent","classList","remove","add","form","budget","prepareCurrencyBlocks","scrollToStage","showCrmAudienceExpertModeForm","isShown","adsStoreBlock","key","convertToCurrency","targetCurrency","sourceCurrency","amount","Object","keys","prepareCurrencyBlock","exists","currencyBlock","count","course","newCurrency","amountCnt","success","block","closest","content","contains","height","scrollHeight","title","nodeHeight","cleanNode","titleInner","a","offsetHeight","slice","eventId","media_url","postItem","postListNode","addNewNode","previewNode","firstChild","removeChild","insertBefore","backgroundImage","postData","clipTitle","openSlider","sessid","bitrix_sessid","componentParams","ACCOUNT_ID","onPostSelected","targetUrl","reInitAdCreator","audienceSummary","buildAudienceSummary","cacheable","onTargetPageSelected","url","params","sliderOptions","width","allowChangeHistory","requestMethod","requestParams","eventName","SidePanel","Slider","getEventFullName","removeAllCustomEvents","Instance","open","onFBAudienceConfigured","onCrmAudienceConfigured","genders","ageFrom","ageTo","summary","genderTitles","join","interests","interest","segmentInclude","regions","formNode","client_id","instagramAccountId","body","mediaId","permalink","imageUrl","countries","getElementById","JSON","stringify","include","exclude","segmentExclude","input","submit","stageNum","stage","line","number","scrollIntoView","behavior","selector","TagSelector","dialogOptions","dropdownMode","compactView","showAvatars","recentTabOptions","stub","stubOptions","searchOptions","allowCreateItem","entities","searchable","dynamicSearch","renderTo","getDialog","getRecentTab","setVisible","selectorOptions","iblockId","fileInputId","config","ENABLE_SEARCH","ENABLE_IMAGE_CHANGE_SAVING","productSelector","ProductSelector","EventEmitter","subscribe","productSelectedEvent","fieldData","fields","ID","SeoPostSelector","helper","getCreated","last","stopLoading","loadInProgress","_accountId","_clientId","_type","emptyBlock","listContent","dataContent","Loader","hideListContentBlock","topSlider","getTopSlider","iframe","contentDocument","observer","IntersectionObserver","loadPostList","root","rootMargin","threshold","observe","successFn","hide","postList","postListItem","postBlock","htmlspecialchars","selectPost","showListContentBlock","TextCrop","rows","showEmptyListBlock","targetElement","removeClass","addClass","postMessage","SeoAudience","selectedInterest","rangeInput","inputMax","inputMin","MAX_VALUE","MIN_VALUE","setDoubleInputPosition","setDoubleLabelPosition","onDoubleInputRange","onInputRange","label","children","offsetWidth","previousElementSibling","left","labelMaxLeft","getBoundingClientRect","labelMinLeft","min","Math","sum","customData","get","applyBtn","entries","entry","SeoCrmAudience","senderSegmentSelector","selectorInclude","getTilesId","selectorExclude","PageConfiguration","targetUrlBlock","validateUrl","removeWait","test"],"mappings":"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"}