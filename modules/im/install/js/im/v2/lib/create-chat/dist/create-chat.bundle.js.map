{"version":3,"file":"create-chat.bundle.js","sources":["../src/create-chat.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\n\nimport { UserRole, DialogType } from 'im.v2.const';\n\nconst EVENT_NAMESPACE = 'BX.Messenger.v2.CreateChatManager';\n\ntype UserRoleItem = $Values<typeof UserRole>;\ntype ChatFields = {\n\tchatTitle: string,\n\tavatarFile: ?File,\n\tchatMembers: number[],\n\tsettings: {\n\t\tisAvailableInSearch: boolean,\n\t\tdescription: string,\n\t},\n\trights: {\n\t\townerId: number,\n\t\tmanagerIds: number[],\n\t\tmanageUsers: UserRoleItem,\n\t\tmanageSettings: UserRoleItem,\n\t\tmanageUi: UserRoleItem,\n\t},\n};\ntype ChatTypeItem = $Values<typeof DialogType>;\n\nexport class CreateChatManager extends EventEmitter\n{\n\tstatic events = {\n\t\tcreationStatusChange: 'creationStatusChange',\n\t\ttitleChange: 'titleChange',\n\t\tavatarChange: 'avatarChange',\n\t\tchatTypeChange: 'chatTypeChange',\n\t};\n\n\tstatic #instance: CreateChatManager;\n\n\t#isCreating: boolean = false;\n\t#chatType: ChatTypeItem = DialogType.chat;\n\t#chatTitle: string = '';\n\t#chatAvatarFile: File = null;\n\t#chatFields: ChatFields;\n\n\tstatic getInstance(): CreateChatManager\n\t{\n\t\tif (!this.#instance)\n\t\t{\n\t\t\tthis.#instance = new this();\n\t\t}\n\n\t\treturn this.#instance;\n\t}\n\n\tconstructor(props)\n\t{\n\t\tsuper(props);\n\t\tthis.setEventNamespace(EVENT_NAMESPACE);\n\t}\n\n\tisCreating(): boolean\n\t{\n\t\treturn this.#isCreating;\n\t}\n\n\tgetChatType(): ChatTypeItem\n\t{\n\t\treturn this.#chatType;\n\t}\n\n\tgetChatTitle(): string\n\t{\n\t\treturn this.#chatTitle;\n\t}\n\n\tgetChatAvatar(): ?File\n\t{\n\t\treturn this.#chatAvatarFile;\n\t}\n\n\tsetChatType(type: ChatTypeItem)\n\t{\n\t\tthis.#chatType = type;\n\t\tthis.emit(CreateChatManager.events.chatTypeChange, type);\n\t}\n\n\tsetCreationStatus(flag: boolean)\n\t{\n\t\tthis.#isCreating = flag;\n\t\tthis.clearFields();\n\t\tthis.emit(CreateChatManager.events.creationStatusChange, flag);\n\t}\n\n\tsetChatTitle(chatTitle: string)\n\t{\n\t\tthis.#chatTitle = chatTitle;\n\t\tthis.emit(CreateChatManager.events.titleChange, chatTitle);\n\t}\n\n\tsetChatAvatar(chatAvatarFile: ?File)\n\t{\n\t\tthis.#chatAvatarFile = chatAvatarFile;\n\t\tthis.emit(CreateChatManager.events.avatarChange, chatAvatarFile);\n\t}\n\n\tsaveFields(chatFields: ChatFields)\n\t{\n\t\tthis.#chatFields = chatFields;\n\t}\n\n\tgetFields(): ?ChatFields\n\t{\n\t\treturn this.#chatFields;\n\t}\n\n\tclearFields()\n\t{\n\t\tthis.#chatFields = null;\n\t\tthis.setChatTitle('');\n\t\tthis.setChatAvatar(null);\n\t}\n}\n"],"names":["EVENT_NAMESPACE","CreateChatManager","EventEmitter","getInstance","constructor","props","DialogType","chat","setEventNamespace","isCreating","getChatType","getChatTitle","getChatAvatar","setChatType","type","emit","events","chatTypeChange","setCreationStatus","flag","clearFields","creationStatusChange","setChatTitle","chatTitle","titleChange","setChatAvatar","chatAvatarFile","avatarChange","saveFields","chatFields","getFields"],"mappings":";;;;;;;CAIA,MAAMA,eAAe,GAAG,mCAAmC;CAAC;CAAA;CAAA;CAAA;CAAA;CAAA;AAqB5D,CAAO,MAAMC,iBAAiB,SAASC,6BAAY,CACnD;GAgBC,OAAOC,WAAW,GAClB;KACC,IAAI,yCAAC,IAAI,uBAAU,EACnB;OACC,4CAAI,0BAAa,IAAI,IAAI,EAAE;;KAG5B,+CAAO,IAAI;;GAGZC,WAAW,CAACC,KAAK,EACjB;KACC,KAAK,CAACA,KAAK,CAAC;KAAC;OAAA;OAAA,OAlBS;;KAAK;OAAA;OAAA,OACFC,sBAAU,CAACC;;KAAI;OAAA;OAAA,OACpB;;KAAE;OAAA;OAAA,OACC;;KAAI;OAAA;OAAA;;KAgB3B,IAAI,CAACC,iBAAiB,CAACR,eAAe,CAAC;;GAGxCS,UAAU,GACV;KACC,+CAAO,IAAI;;GAGZC,WAAW,GACX;KACC,+CAAO,IAAI;;GAGZC,YAAY,GACZ;KACC,+CAAO,IAAI;;GAGZC,aAAa,GACb;KACC,+CAAO,IAAI;;GAGZC,WAAW,CAACC,IAAkB,EAC9B;KACC,4CAAI,0BAAaA,IAAI;KACrB,IAAI,CAACC,IAAI,CAACd,iBAAiB,CAACe,MAAM,CAACC,cAAc,EAAEH,IAAI,CAAC;;GAGzDI,iBAAiB,CAACC,IAAa,EAC/B;KACC,4CAAI,8BAAeA,IAAI;KACvB,IAAI,CAACC,WAAW,EAAE;KAClB,IAAI,CAACL,IAAI,CAACd,iBAAiB,CAACe,MAAM,CAACK,oBAAoB,EAAEF,IAAI,CAAC;;GAG/DG,YAAY,CAACC,SAAiB,EAC9B;KACC,4CAAI,4BAAcA,SAAS;KAC3B,IAAI,CAACR,IAAI,CAACd,iBAAiB,CAACe,MAAM,CAACQ,WAAW,EAAED,SAAS,CAAC;;GAG3DE,aAAa,CAACC,cAAqB,EACnC;KACC,4CAAI,sCAAmBA,cAAc;KACrC,IAAI,CAACX,IAAI,CAACd,iBAAiB,CAACe,MAAM,CAACW,YAAY,EAAED,cAAc,CAAC;;GAGjEE,UAAU,CAACC,UAAsB,EACjC;KACC,4CAAI,8BAAeA,UAAU;;GAG9BC,SAAS,GACT;KACC,+CAAO,IAAI;;GAGZV,WAAW,GACX;KACC,4CAAI,8BAAe,IAAI;KACvB,IAAI,CAACE,YAAY,CAAC,EAAE,CAAC;KACrB,IAAI,CAACG,aAAa,CAAC,IAAI,CAAC;;CAE1B;CA9FaxB,iBAAiB,CAEtBe,MAAM,GAAG;GACfK,oBAAoB,EAAE,sBAAsB;GAC5CG,WAAW,EAAE,aAAa;GAC1BG,YAAY,EAAE,cAAc;GAC5BV,cAAc,EAAE;CACjB,CAAC;CAAA,sBAPWhB,iBAAiB;GAAA;GAAA;CAAA;;;;;;;;"}