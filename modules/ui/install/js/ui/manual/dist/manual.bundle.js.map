{"version":3,"file":"manual.bundle.js","sources":["../src/manual.js"],"sourcesContent":["import { ajax, Type, Tag } from 'main.core';\n\ntype Params = {\n\tmanualCode: string,\n\turlParams?: Object,\n\tanalyticsLabel?: Object,\n\tanalytics?: Object,\n\twidth?: number\n}\n\ntype ResponseInitParams = {\n\tdata: {\n\t\turl: string\n\t}\n}\n\nexport class Manual\n{\n\tconstructor(params: Params): void\n\t{\n\t\tthis.manualCode = Type.isString(params.manualCode) ? params.manualCode : '';\n\t\tthis.width = Type.isNumber(params.width) ? params.width : 1000;\n\t\tthis.urlParams = Type.isPlainObject(params.urlParams) ? params.urlParams : {};\n\t\tthis.analyticsLabel = Type.isPlainObject(params.analyticsLabel) ? params.analyticsLabel : null;\n\t\tthis.analytics = Type.isPlainObject(params.analytics) ? params.analytics : null;\n\n\t\tthis.sidePanelId = `manual-side-panel-${this.manualCode}`;\n\t}\n\n\tstatic show(...args): void\n\t{\n\t\tlet manualCode;\n\t\tlet urlParams;\n\t\tlet analyticsLabel;\n\t\tlet analytics;\n\n\t\tif (Type.isPlainObject(args[0]) && args.length === 1)\n\t\t{\n\t\t\t({ manualCode, urlParams = {}, analyticsLabel = null, analytics = null } = args[0]);\n\t\t}\n\t\telse\n\t\t{\n\t\t\t[manualCode, urlParams, analyticsLabel, analytics] = args;\n\t\t}\n\n\t\tconst manual = new Manual({\n\t\t\tmanualCode,\n\t\t\turlParams,\n\t\t\tanalyticsLabel,\n\t\t\tanalytics,\n\t\t});\n\n\t\tmanual.open();\n\t}\n\n\topen(): void\n\t{\n\t\tif (this.isOpen())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tBX.SidePanel.Instance.open(\n\t\t\tthis.sidePanelId,\n\t\t\t{\n\t\t\t\tcontentCallback: () => this.createFrame(),\n\t\t\t\twidth: this.width,\n\t\t\t},\n\t\t);\n\t}\n\n\tcreateFrame(): Promise\n\t{\n\t\tconst config = {\n\t\t\tdata: {\n\t\t\t\tmanualCode: this.manualCode,\n\t\t\t\turlParams: this.urlParams,\n\t\t\t},\n\t\t};\n\n\t\tif (this.analyticsLabel)\n\t\t{\n\t\t\tconfig.analyticsLabel = this.analyticsLabel;\n\t\t}\n\t\telse if (this.analytics)\n\t\t{\n\t\t\tconfig.analytics = this.analytics;\n\t\t}\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\tajax.runAction('ui.manual.getInitParams', config)\n\t\t\t\t.then((response: ResponseInitParams) => {\n\t\t\t\t\tresolve(this.renderFrame(response.data.url));\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n\n\trenderFrame(url: string): HTMLElement\n\t{\n\t\tconst frameStyles = 'position: absolute; left: 0; top: 0; padding: 0;'\n\t\t\t+ ' border: none; margin: 0; width: 100%; height: 100%;';\n\n\t\treturn Tag.render`<iframe style=\"${frameStyles}\" src=\"${url}\"></iframe>`;\n\t}\n\n\tgetSidePanel(): BX.SidePanel.Slider\n\t{\n\t\treturn BX.SidePanel.Instance.getSlider(this.sidePanelId);\n\t}\n\n\tisOpen(): boolean\n\t{\n\t\treturn this.getSidePanel() && this.getSidePanel().isOpen();\n\t}\n}\n"],"names":["Manual","constructor","params","manualCode","Type","isString","width","isNumber","urlParams","isPlainObject","analyticsLabel","analytics","sidePanelId","show","args","length","manual","open","isOpen","BX","SidePanel","Instance","contentCallback","createFrame","config","data","Promise","resolve","reject","ajax","runAction","then","response","renderFrame","url","frameStyles","Tag","render","getSidePanel","getSlider"],"mappings":";;;;;;;;AAAA,CAgBO,MAAMA,MAAM,CACnB;GACCC,WAAW,CAACC,MAAc,EAC1B;KACC,IAAI,CAACC,UAAU,GAAGC,cAAI,CAACC,QAAQ,CAACH,MAAM,CAACC,UAAU,CAAC,GAAGD,MAAM,CAACC,UAAU,GAAG,EAAE;KAC3E,IAAI,CAACG,KAAK,GAAGF,cAAI,CAACG,QAAQ,CAACL,MAAM,CAACI,KAAK,CAAC,GAAGJ,MAAM,CAACI,KAAK,GAAG,IAAI;KAC9D,IAAI,CAACE,SAAS,GAAGJ,cAAI,CAACK,aAAa,CAACP,MAAM,CAACM,SAAS,CAAC,GAAGN,MAAM,CAACM,SAAS,GAAG,EAAE;KAC7E,IAAI,CAACE,cAAc,GAAGN,cAAI,CAACK,aAAa,CAACP,MAAM,CAACQ,cAAc,CAAC,GAAGR,MAAM,CAACQ,cAAc,GAAG,IAAI;KAC9F,IAAI,CAACC,SAAS,GAAGP,cAAI,CAACK,aAAa,CAACP,MAAM,CAACS,SAAS,CAAC,GAAGT,MAAM,CAACS,SAAS,GAAG,IAAI;KAE/E,IAAI,CAACC,WAAW,GAAI,qBAAoB,IAAI,CAACT,UAAW,EAAC;;GAG1D,OAAOU,IAAI,CAAC,GAAGC,IAAI,EACnB;KACC,IAAIX,UAAU;KACd,IAAIK,SAAS;KACb,IAAIE,cAAc;KAClB,IAAIC,SAAS;KAEb,IAAIP,cAAI,CAACK,aAAa,CAACK,IAAI,CAAC,CAAC,CAAC,CAAC,IAAIA,IAAI,CAACC,MAAM,KAAK,CAAC,EACpD;OACC,CAAC;SAAEZ,UAAU;SAAEK,SAAS,GAAG,EAAE;SAAEE,cAAc,GAAG,IAAI;SAAEC,SAAS,GAAG;QAAM,GAAGG,IAAI,CAAC,CAAC,CAAC;MAClF,MAED;OACC,CAACX,UAAU,EAAEK,SAAS,EAAEE,cAAc,EAAEC,SAAS,CAAC,GAAGG,IAAI;;KAG1D,MAAME,MAAM,GAAG,IAAIhB,MAAM,CAAC;OACzBG,UAAU;OACVK,SAAS;OACTE,cAAc;OACdC;MACA,CAAC;KAEFK,MAAM,CAACC,IAAI,EAAE;;GAGdA,IAAI,GACJ;KACC,IAAI,IAAI,CAACC,MAAM,EAAE,EACjB;OACC;;KAGDC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACJ,IAAI,CACzB,IAAI,CAACL,WAAW,EAChB;OACCU,eAAe,EAAE,MAAM,IAAI,CAACC,WAAW,EAAE;OACzCjB,KAAK,EAAE,IAAI,CAACA;MACZ,CACD;;GAGFiB,WAAW,GACX;KACC,MAAMC,MAAM,GAAG;OACdC,IAAI,EAAE;SACLtB,UAAU,EAAE,IAAI,CAACA,UAAU;SAC3BK,SAAS,EAAE,IAAI,CAACA;;MAEjB;KAED,IAAI,IAAI,CAACE,cAAc,EACvB;OACCc,MAAM,CAACd,cAAc,GAAG,IAAI,CAACA,cAAc;MAC3C,MACI,IAAI,IAAI,CAACC,SAAS,EACvB;OACCa,MAAM,CAACb,SAAS,GAAG,IAAI,CAACA,SAAS;;KAGlC,OAAO,IAAIe,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;;OAEvCC,cAAI,CAACC,SAAS,CAAC,yBAAyB,EAAEN,MAAM,CAAC,CAC/CO,IAAI,CAAEC,QAA4B,IAAK;SACvCL,OAAO,CAAC,IAAI,CAACM,WAAW,CAACD,QAAQ,CAACP,IAAI,CAACS,GAAG,CAAC,CAAC;QAC5C,CAAC;MAEH,CAAC;;GAGHD,WAAW,CAACC,GAAW,EACvB;KACC,MAAMC,WAAW,GAAG,kDAAkD,GACnE,sDAAsD;KAEzD,OAAOC,aAAG,CAACC,MAAM,cAAC,kBAAe,CAAc,UAAO,CAAM,aAAW,GAApCF,WAAW,EAAUD,GAAG;;GAG5DI,YAAY,GACZ;KACC,OAAOnB,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACkB,SAAS,CAAC,IAAI,CAAC3B,WAAW,CAAC;;GAGzDM,MAAM,GACN;KACC,OAAO,IAAI,CAACoB,YAAY,EAAE,IAAI,IAAI,CAACA,YAAY,EAAE,CAACpB,MAAM,EAAE;;CAE5D;;;;;;;;"}