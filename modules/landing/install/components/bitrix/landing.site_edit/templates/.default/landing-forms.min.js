function deleteAccessRow(e){landingAccessSelected[BX.data(BX(e),"id")]=false;BX.remove(BX.findParent(BX(e),{tag:"tr"},true))}(function(){"use strict";BX.namespace("BX.Landing");var e=BX.Landing.Utils.slice;var t=BX.Landing.Utils.proxy;var i=BX.Landing.Utils.bind;var n=BX.Landing.Utils.unbind;var o=BX.Landing.Utils.addClass;var s=BX.Landing.Utils.removeClass;var a=BX.Landing.Utils.isNumber;var r=BX.Landing.Utils.style;var c=BX.Landing.Utils.data;BX.Landing.ColorPalette=function(e){this.themesPalete=document.querySelector(".landing-template-preview-themes");this.themesSiteCustomColorNode=document.querySelector(".landing-template-preview-site-custom-color");this.init();return this};BX.Landing.ColorPalette.getInstance=function(e){return BX.Landing.ColorPalette.instance||(BX.Landing.ColorPalette.instance=new BX.Landing.ColorPalette(e))};BX.Landing.ColorPalette.prototype={init:function(){var t=e(this.themesPalete.children);if(this.themesSiteColorNode){t=t.concat(e(this.themesSiteColorNode.children))}if(this.themesSiteCustomColorNode){t=t.concat(e(this.themesSiteCustomColorNode.children))}t.forEach(this.initSelectableItem,this);if(this.siteGroupPalette){var n=e(this.siteGroupPalette.children);n.forEach(this.initSelectableItem,this)}i(this.previewFrame,"load",this.onFrameLoad);i(this.closeButton,"click",this.onCancelButtonClick);if(!this.disableClickHandler){i(this.createButton,"click",this.onCreateButtonClick)}this.setColor()},setColor:function(e){if(e===undefined){this.color=c(this.getActiveColorNode(),"data-value")}else{this.color=e}var t=document.getElementById("colorpicker");if(t){t.setAttribute("value",this.color)}},getActiveColorNode:function(){var e=this.themesPalete.querySelector(".active");if(!e&&this.themesSiteColorNode){e=this.themesSiteColorNode.querySelector(".active")}if(!e&&this.themesSiteCustomColorNode){e=this.themesSiteCustomColorNode.querySelector(".active")}if(!e){e=this.themesPalete.firstElementChild}return e},getActiveSiteGroupItem:function(){return this.siteGroupPalette.querySelector(".active")},loadPreview:function(e){return function(){return new Promise(function(t){if(this.previewFrame.src!==e){this.previewFrame.src=e;this.previewFrame.onload=function(){t(this.previewFrame)}.bind(this);return}t(this.previewFrame)}.bind(this))}.bind(this)},showLoader:function(){return new Promise(function(e){void this.loader.show(this.loaderContainer);o(this.imageContainer,"landing-template-preview-overlay");e()}.bind(this))},hideLoader:function(){return function(e){return new Promise(function(t){void this.loader.hide();s(this.imageContainer,"landing-template-preview-overlay");t(e)}.bind(this))}.bind(this)},delay:function(e){e=a(e)?e:0;return function(t){return new Promise(function(i){setTimeout(i.bind(null,t),e)})}},getValue:function(){var e={};if(this.themesSiteColorNode&&this.getActiveColorNode().parentElement===this.themesSiteColorNode){e[c(this.themesSiteColorNode,"data-name")]="Y"}if(this.siteGroupPalette){e[c(this.siteGroupPalette,"data-name")]=c(this.getActiveSiteGroupItem(),"data-value")}e[c(this.themesPalete,"data-name")]=c(this.getActiveColorNode(),"data-value");e[c(this.themesSiteCustomColorNode,"data-name")]=c(this.getActiveColorNode(),"data-value");e[c(this.title,"data-name")]=this.title.value;e[c(this.description,"data-name")]=this.description.value;return e},onCancelButtonClick:function(e){e.preventDefault();top.BX.SidePanel.Instance.close()},onCreateButtonClick:function(e){e.preventDefault();if(this.isStore()&&this.IsLoadedFrame){this.loaderText=BX.create("div",{props:{className:"landing-template-preview-loader-text"},text:this.messages.LANDING_LOADER_WAIT});this.progressBar=new BX.UI.ProgressBar({column:true});this.progressBar.getContainer().classList.add("ui-progressbar-landing-preview");this.loaderContainer.appendChild(this.loaderText);this.loaderContainer.appendChild(this.progressBar.getContainer())}if(this.isStore()){if(this.IsLoadedFrame){this.showLoader();this.initCatalogParams();this.createCatalog()}}else{this.showLoader().then(this.delay(200)).then(function(){this.finalRedirectAjax(this.getCreateUrl())}.bind(this))}},initSelectableItem:function(e){i(e,"click",t(this.onSelectableItemClick,this))},onSelectableItemClick:function(e){e.preventDefault();if(e.currentTarget.parentElement===this.themesPalete||this.themesSiteColorNode&&e.currentTarget.parentElement===this.themesSiteColorNode||this.themesSiteCustomColorNode&&e.currentTarget.parentElement===this.themesSiteCustomColorNode){if(e.currentTarget.hasAttribute("data-value")){s(this.getActiveColorNode(),"active");o(e.currentTarget,"active");this.setColor(c(e.currentTarget,"data-value"))}}},isStore:function(){return this.createStore}};BX.Landing.EditTitleForm=function(e,t,i,n){this.btn=e.querySelector(".ui-title-input-btn-js");this.label=e.querySelector(".ui-editable-field-label-js");this.input=e.querySelector(".ui-editable-field-input-js");this.additionalWidth=t||0;this.input.IsWidthSet=false;this.display=n;this.hideInput=this.hideInput.bind(this);this.showInput=this.showInput.bind(this);if(i){BX.bind(e,"click",this.showInput)}else{BX.bind(this.btn,"click",this.showInput)}this.input.setAttribute("data-height",this.label.offsetHeight)};BX.Landing.EditTitleForm.prototype={showInput:function(e){e.stopPropagation();if(!this.input.IsWidthSet){this.input.style.width=this.label.offsetWidth+this.additionalWidth+17+"px"}if(this.input.tagName==="TEXTAREA"){this.input.style.height=this.input.getAttribute("data-height")+"px"}this.label.style.display="none";this.btn.style.display="none";this.input.style.display="block";this.input.focus();this.input.IsWidthSet=true;BX.bind(document,"mousedown",this.hideInput)},hideInput:function(e){if(e.target===this.input)return;this.label.textContent=this.input.value;if(this.display){this.label.style.display="inline-block"}else{this.label.style.display="inline"}this.input.style.display="none";this.btn.style.display="inline-block";this.input.IsWidthSet=false;this.input.setAttribute("data-height",this.label.offsetHeight);BX.unbind(document,"mousedown",this.hideInput)}};BX.Landing.ToggleFormFields=function(e){this.form=e;this.toggleBtn=e.querySelector(".landing-form-collapse-block-js");this.formInner=e.querySelector(".landing-form-inner-js");this.tableWparp=e.querySelector(".landing-form-table-wrap-js");this.sectionWrap=e.querySelector(".landing-additional-alt-promo-wrap");this.startHeight=0;this.endHeight=0;this.isHidden=true;this.clickHandler=this.clickHandler.bind(this);this.setHeightAuto=this.setHeightAuto.bind(this);this.removeClassName=this.removeClassName.bind(this);this.attributeMainOption="data-landing-main-option";this.attributeOption="data-landing-additional-option";this.attributeDetail="data-landing-additional-detail";var t=this.sectionWrap.children;t=BX.convert.nodeListToArray(t);t.forEach(this.initSection,this);BX.bind(this.toggleBtn,"click",this.clickHandler);if(window.location.hash){var i=window.location.hash.substr(1);t.forEach(function(e){var t=e.getAttribute(this.attributeOption);if(t===i){BX.fireEvent(e,"click")}},this);var n=this.formInner.querySelector("["+this.attributeMainOption+'="'+i+'"]');if(n){this.highlightSection(n)}}};BX.Landing.ToggleFormFields.prototype={showRows:function(){this.startHeight=this.formInner.offsetHeight;this.formInner.style.height=this.startHeight+"px";this.form.classList.add("landing-form-collapsed-open");this.endHeight=this.tableWparp.offsetHeight+parseInt(BX.style(this.tableWparp,"marginBottom"));this.formInner.style.height=this.endHeight+"px";BX.bind(this.formInner,"transitionend",this.setHeightAuto);this.isHidden=false},closeRows:function(){this.formInner.style.height=this.endHeight+"px";setTimeout(function(){this.formInner.style.height=this.startHeight+"px"}.bind(this),70);BX.bind(this.formInner,"transitionend",this.removeClassName);this.isHidden=true},clickHandler:function(){if(this.isHidden)this.showRows();else this.closeRows()},setHeightAuto:function(){this.formInner.style.height="auto";BX.unbind(this.formInner,"transitionend",this.setHeightAuto)},removeClassName:function(){this.form.classList.remove("landing-form-collapsed-open");BX.unbind(this.formInner,"transitionend",this.removeClassName)},initSection:function(e){BX.bind(e,"click",BX.delegate(function(t){t.stopPropagation();this.showSection(e)},this))},showSection:function(e){this.showRows();var t=e.getAttribute(this.attributeOption);var i=this.formInner.querySelector("["+this.attributeDetail+'="'+t+'"]');this.highlightSection(i)},highlightSection:function(e){BX.addClass(e,"landing-form-hidden-row-highlight");setTimeout(function(){var t=BX.pos(e);window.scrollTo({top:t.top,behavior:"smooth"})},300);setTimeout(function(){BX.removeClass(e,"landing-form-hidden-row-highlight")},1500)}};BX.Landing.ColorPicker=function(e){this.picker=new BX.ColorPicker({bindElement:e,popupOptions:{angle:false,offsetTop:5},onColorSelected:this.onColorSelected.bind(this),colors:this.setColors()});this.input=e;this.colorPickerNode=e.parentElement;BX.addClass(this.colorPickerNode,"ui-colorpicker");this.colorIcon=BX.create("span",{props:{className:"ui-colorpicker-color"}});BX.insertBefore(this.colorIcon,this.input);this.colorValue=e.value;if(this.colorValue){BX.adjust(this.colorIcon,{attrs:{style:"background-color:"+this.colorValue}});BX.addClass(this.colorPickerNode,"ui-colorpicker-selected")}this.clearBtn=BX.create("span",{props:{className:"ui-colorpicker-clear"}});BX.insertAfter(this.clearBtn,this.input);BX.bind(this.colorPickerNode,"click",this.show.bind(this));BX.bind(this.clearBtn,"click",this.clear.bind(this))};BX.Landing.ColorPicker.prototype={onColorSelected:function(e){this.colorPickerNode.classList.add("ui-colorpicker-selected");this.colorIcon.style.backgroundColor=e;this.input.value=e},show:function(e){if(e.target==this.clearBtn){return}this.picker.open()},clear:function(){this.colorPickerNode.classList.remove("ui-colorpicker-selected");this.input.value="";this.picker.setSelectedColor(null)},setColors:function(){return[["#f5f5f5","#eeeeee","#e0e0e0","#9e9e9e","#757575","#616161","#212121"],["#cfd8dc","#b0bec5","#90a4ae","#607d8b","#546e7a","#455a64","#263238"],["#d7ccc8","#bcaaa4","#a1887f","#795548","#6d4c41","#5d4037","#3e2723"],["#ffccbc","#ffab91","#ff8a65","#ff5722","#f4511e","#e64a19","#bf360c"],["#ffe0b2","#ffcc80","#ffb74d","#ff9800","#fb8c00","#f57c00","#e65100"],["#ffecb3","#ffe082","#ffd54f","#ffc107","#ffb300","#ffa000","#ff6f00"],["#fff9c4","#fff59d","#fff176","#ffeb3b","#fdd835","#fbc02d","#f57f17"],["#f0f4c3","#e6ee9c","#dce775","#cddc39","#c0ca33","#afb42b","#827717"],["#dcedc8","#c5e1a5","#aed581","#8bc34a","#7cb342","#689f38","#33691e"],["#c8e6c9","#a5d6a7","#81c784","#4caf50","#43a047","#388e3c","#1b5e20"],["#b2dfdb","#80cbc4","#4db6ac","#009688","#00897b","#00796b","#004d40"],["#b2ebf2","#80deea","#4dd0e1","#00bcd4","#00acc1","#0097a7","#006064"],["#b3e5fc","#81d4fa","#4fc3f7","#03a9f4","#039be5","#0288d1","#01579b"],["#bbdefb","#90caf9","#64b5f6","#2196f3","#1e88e5","#1976d2","#0d47a1"],["#c5cae9","#9fa8da","#7986cb","#3f51b5","#3949ab","#303f9f","#1a237e"],["#d1c4e9","#b39ddb","#9575cd","#673ab7","#5e35b1","#512da8","#311b92"],["#e1bee7","#ce93d8","#ba68c8","#9c27b0","#8e24aa","#7b1fa2","#4a148c"],["#f8bbd0","#f48fb1","#f06292","#e91e63","#d81b60","#c2185b","#880e4f"],["#ffcdd2","#ef9a9a","#e57373","#f44336","#e53935","#d32f2f","#b71c1c"]].map(function(e,t,i){return i.map(function(e){return e[t]})})}};BX.Landing.ColorPickerTheme=function(e){var t=document.getElementById("landing-form-colorpicker-theme");var i=t.getAttribute("data-value");if(i[0]!=="#"){i="#"+i}this.metrika=null;this.picker=new BX.ColorPicker({bindElement:e,popupOptions:{angle:false,offsetTop:5},onColorSelected:this.onColorSelected.bind(this),colors:this.setColors(),selectedColor:i});if(typeof BX.Landing.Metrika!=="undefined"){this.metrika=new BX.Landing.Metrika(true)}this.colorPickerNode=e;this.colorIcon=e.querySelector(".ui-colorpicker-color-js");this.clearBtn=e.querySelector(".ui-colorpicker-clear");this.input=e.querySelector(".landing-colorpicker-inp-js");BX.bind(this.colorPickerNode,"click",this.show.bind(this));BX.bind(this.clearBtn,"click",this.clear.bind(this))};BX.Landing.ColorPickerTheme.prototype={onColorSelected:function(e){this.colorPickerNode.classList.add("ui-colorpicker-selected");this.colorIcon.style.backgroundColor=e;this.input.value=e;var t=document.getElementById("landing-form-colorpicker-theme");if(t){t.setAttribute("data-value",this.input.value.substr(1));t.setAttribute("style","background-color:"+this.input.value)}BX.onCustomEvent("BX.Landing:onSelectColor");if(this.metrika){this.metrika.sendLabel(null,"Color::CustomSet",this.input.value.substr(1))}},show:function(e){if(e.target==this.clearBtn)return;this.picker.open()},clear:function(){this.colorPickerNode.classList.remove("ui-colorpicker-selected");this.input.value="";this.picker.setSelectedColor(null)},setColors:function(){return[["#f4f5fb","#d2d6ef","#b0b8e3","#8f99d6","#6d7bca","#4b5cbe","#3e4fac"],["#eaecfb","#d5daf6","#c0c7f2","#abb5ed","#96a2e9","#8190e4","#7888e2"],["#e8f4fc","#d1e9fa","#badef7","#a3d3f5","#8cc8f2","#75bdf0","#6cb8ef"],["#e7fbfd","#cff7fc","#b7f4fa","#9ff0f9","#87ecf7","#74e9f6","#66e7f5"],["#ebfaf8","#caf1ed","#aeeae3","#9ae5dc","#85e0d5","#71dace","#5dd5c7"],["#eafbf9","#c8f4f0","#aaeee8","#90e9e2","#5ddfd4","#2ad5c7","#26c0b3"],["#ebfaf0","#d6f5e2","#c2f0d3","#adebc5","#99e6b6","#85e0a8","#70db99"],["#f6f9eb","#e8efcc","#dbe7b1","#d1e09a","#c4d77e","#b8cf63","#a9c544"],["#fafee6","#f3febe","#edfd9b","#e8fc82","#d0e859","#b5d31d","#a7c804"],["#fefee6","#fdfcce","#fcfbb6","#fbf993","#f9f771","#f7f445","#f6f223"],["#fef8e6","#fdf1ce","#fdeab5","#fce092","#fbd570","#f9c943","#f8bc16"],["#fde9e8","#fbd3d0","#f9bdb9","#f7a7a1","#f5918a","#f27269","#ee463a"],["#f9ebeb","#f4d7d7","#eec4c4","#e8b0b0","#e29c9c","#d77575","#ca4949"],["#fceae8","#f9d6d2","#f7c1bb","#f4aca4","#f1978e","#ee8377","#e75140"],["#ffe6e6","#ffd1d2","#ffc2c3","#ffa9aa","#fe9496","#fe8082","#fe6769"],["#fee8e7","#fdd2ce","#fcbbb6","#fba59d","#fa8e85","#f9786c","#f75445"],["#ffe5e5","#ffcccc","#ffb3b3","#ff9999","#ff8080","#ff6666","#ff0a0a"],["#fee7ea","#fdced6","#fcb6c1","#fb9dad","#fa8598","#f96c84","#f73b5a"],["#fde7ef","#fbd0df","#f9b8cf","#f7a1bf","#f580a9","#f25a8f","#ec135f"],["#faeaef","#f5d6de","#f0c1ce","#ebadbd","#e698ad","#e1849d","#d75b7c"],["#f2f2f2","#dedede","#cccccc","#b3b3b3","#999999","#666666","#404040"]].map(function(e,t,i){return i.map(function(e){return e[t]})})}};BX.Landing.CustomFields=function(e){e.forEach(function(e){BX.bind(e.field,"keyup",function(){if(e.length){if(e.field.value.length<=e.length){e.node.textContent=e.field.value}else{e.node.textContent=e.field.value.substring(0,e.length)}}else{e.node.textContent=e.field.value}})})};BX.Landing.Favicon=function(){var e=BX("landing-form-favicon-change");var t=BX("landing-form-favicon-input");var i=BX("landing-form-favicon-value");var n=BX("landing-form-favicon-form");var o=BX("landing-form-favicon-src");var s=BX("landing-form-favicon-error");if(!n||!t||!e){return}BX.bind(e,"click",function(e){BX.fireEvent(t,"click");BX.PreventDefault(e)});BX.bind(t,"change",function(e){BX.ajax.submitAjax(n,{method:"POST",dataType:"json",onsuccess:function(e){if(e.type==="success"&&typeof e.result!=="undefined"&&e.result!==false){i.value=e.result.id;o.setAttribute("src",e.result.src)}else{s.style.color="red"}}});BX.PreventDefault(e)})};BX.Landing.Custom404=function(){var e=BX("landing-form-404-select");BX.bind(e,"change",function(){if(this.value===""){this.parentNode.style.height=getComputedStyle(this.parentNode).height;BX("checkbox-404-use").checked=false}});BX.bind(BX("checkbox-404-use"),"change",function(){if(!this.checked){e.value=""}})};BX.Landing.Custom503=function(){var e=BX("landing-form-503-select");if(!e){return}BX.bind(e,"change",function(){if(this.value===""){this.parentNode.style.height=getComputedStyle(this.parentNode).height;BX("checkbox-503-use").checked=false}});BX.bind(BX("checkbox-503-use"),"change",function(){if(!this.checked){e.value=""}})};BX.Landing.Copyright=function(){BX.bind(BX("checkbox-copyright"),"change",function(){var e=BX("landing-site-set-form").getAttribute("action");e=e.replace(/&feature_copyright=[YN]/,"");e+="&feature_copyright="+(this.checked?"Y":"N");BX("landing-site-set-form").setAttribute("action",e)})};BX.Landing.Access=function(e){var t=landingAccessSelected;var i="RIGHTS";var n=BX("landing-"+i.toLowerCase()+"-table");var o=e.select;var s=e.inc;BX.Access.Init({other:{disabled_cr:true}});BX.Access.SetSelected(t,i);function a(){BX.Access.ShowForm({callback:function(e){for(var a in e){if(e.hasOwnProperty(a)){for(var r in e[a]){if(e[a].hasOwnProperty(r)){var c=n.rows.length;var l=n.insertRow(c-1);l.classList.add("landing-form-rights");t[r]=true;l.insertCell(-1);l.insertCell(-1);l.cells[0].innerHTML=BX.Access.GetProviderName(a)+" "+BX.util.htmlspecialchars(e[a][r].name)+":"+'<input type="hidden" name="fields['+i+'][ACCESS_CODE][]" value="'+r+'">';l.cells[0].classList.add("landing-form-rights-right");l.cells[1].classList.add("landing-form-rights-left");l.cells[1].innerHTML=o.replace("#inc#",s++)+" "+'<a href="javascript:void(0);" onclick="deleteAccessRow(this);" data-id="'+r+'" class="landing-form-rights-delete"></a>'}}}}},bind:i})}BX("landing-rights-form").addEventListener("click",a.bind(this))};BX.Landing.Layout=function(e){var t=document.querySelector(".landing-form-layout-block-container");var i=[];var n=document.querySelectorAll(".landing-form-layout-item");var o=document.querySelector(".landing-form-layout-detail");var s=document.querySelector(".landing-form-page-layout");var a=document.getElementById("field-gacounter_send_click-use");var r=document.getElementById("field-gacounter_click_type-use");n=Array.prototype.slice.call(n,0);e.messages=e.messages||{};h(n[0].dataset.block);n.forEach(function(e){e.addEventListener("click",c.bind(this))});function c(e){var t=e.target.parentNode;var i=document.querySelector(".landing-form-layout-item-selected");if(i){i.classList.remove("landing-form-layout-item-selected")}l(t.dataset.block,t.dataset.layout)}function l(e,t){s.classList.remove("landing-form-page-layout-short");o.classList.remove("landing-form-layout-detail-hidden");h(e);if(typeof t!=="undefined"){d(t)}BX("layout-tplrefs").value=""}if(typeof e.areasCount!=="undefined"){l(e.areasCount,e.current)}function d(e){var t=document.querySelectorAll(".landing-form-layout-img");for(var i=0;i<t.length;i++){if(t[i].dataset.layout===e){t[i].style.display="block"}else{t[i].style.display="none"}}}function h(n){var o=BX("layout-tplrefs").value.split(",");i=[];t.innerHTML="";var s=function(){var e="";for(var t=0,n=i.length;t<n;t++){e+=t+1+":"+(i[t].getValue()?i[t].getValue().substr(8):0)+","}BX("layout-tplrefs").value=e};for(var a=0;a<n;a++){var r=BX.create("div",{attrs:{className:"landing-form-layout-block-item"}});var c=a+1;var l="";if(typeof o[a]!=="undefined"&&o[a].indexOf(":")!==-1){l=parseInt(o[a].split(":")[1]);if(l>0){l="#landing"+l}else{l=""}}var d=new BX.Landing.UI.Field.LinkURL({title:e.messages.area+" #"+c,content:l,textOnly:true,disableCustomURL:true,disableBlocks:true,disallowType:true,enableAreas:true,allowedTypes:[BX.Landing.UI.Field.LinkURL.TYPE_PAGE],options:{siteId:e.siteId,landingId:e.landingId,filter:{"=TYPE":e.type}},onInit:BX.delegate(s),onInput:BX.delegate(s)});i[a]=d;r.appendChild(d.layout);t.appendChild(r)}}var f=BX("layout-tplrefs-check");f.addEventListener("click",u.bind(this));function u(){BX("layout-tplrefs").value="";o.classList.add("landing-form-layout-detail--hidden");s.classList.add("landing-form-page-layout-short");var e=document.querySelectorAll(".layout-switcher");e=Array.prototype.slice.call(e,0);e.forEach(function(e){e.checked=false})}var g=document.querySelector(".landing-form-select-buttons");var p=document.querySelector(".landing-form-list-inner");g.addEventListener("click",b.bind(this));function b(e){if(e.target.classList.contains("landing-form-select-next")){p.classList.add("landing-form-list-inner-prev")}else{p.classList.remove("landing-form-list-inner-prev")}}function m(){var e=a.closest(".ui-checkbox-hidden-input-inner");if(a.checked){r.classList.add("ui-select-gacounter-show");e.classList.add("ui-checkbox-hidden-input-inner-gacounter")}else{r.classList.remove("ui-select-gacounter-show");e.classList.remove("ui-checkbox-hidden-input-inner-gacounter")}}if(a){a.addEventListener("click",function(){m()}.bind(this));m()}};BX.Landing.ExternalMetrika=function(){if(!BX("field-gacounter_counter-use")){return}var e=BX("field-gacounter_counter-use");var t=BX("field-gacounter_send_click-use");var i=BX("field-gacounter_send_show-use");if(e.value===""){t.disabled=true;i.disabled=true}e.addEventListener("input",n.bind(this));function n(){if(e.value===""){t.disabled=true;t.checked=false;i.disabled=true;i.checked=false}else{t.disabled=false;i.disabled=false}}};BX.Landing.SaveBtn=function(e){e.addEventListener("click",t.bind(this));function t(){e.classList.add("ui-btn-clock");e.style.cursor="default";e.style.pointerEvents="none"}};BX.Landing.IblockSelect=function(){this.section=BX("row_section_id");this.init(this.section)};BX.Landing.IblockSelect.prototype={init:function(e){if(!BX("settings_iblock_id").value){e.classList.add("landing-form-field-section-hidden")}else{e.classList.remove("landing-form-field-section-hidden")}}};BX.Landing.Cookies=function(e){this.bgPickerBtn=document.querySelector(".landing-form-cookies-color-bg");this.textPickerBtn=document.querySelector(".landing-form-cookies-color-text");this.simplePreview=document.querySelector(".landing-form-cookies-settings-type-simple");this.advancedPreview=document.querySelector(".landing-form-cookies-settings-type-advanced");this.positions=document.querySelectorAll(".landing-form-cookies-position-item");this.inputApp=document.querySelector("#radio-cookies-mode-A");this.inputInfo=document.querySelector("#radio-cookies-mode-I");this.settings=document.querySelector(".landing-form-cookies-settings-wrapper");this.bgPicker=new BX.ColorPicker({bindElement:this.bgPickerBtn,popupOptions:{angle:false,offsetTop:5},onColorSelected:this.onBgColorSelected.bind(this),colors:BX.Landing.ColorPicker.prototype.setColors()});this.textPicker=new BX.ColorPicker({bindElement:this.textPickerBtn,popupOptions:{angle:false,offsetTop:5},onColorSelected:this.onTextColorSelected.bind(this),colors:BX.Landing.ColorPicker.prototype.setColors()});this.setSelectedBgColor(this.bgPickerBtn.value);this.setSelectedTextColor(this.textPickerBtn.value);this.hideCookiesSettings(this.inputInfo);this.bindEvents()};BX.Landing.Cookies.prototype={bindEvents:function(){this.positions.forEach(function(e){e.addEventListener("click",this.onSelectCookiesPosition.bind(this))}.bind(this));this.bgPickerBtn.addEventListener("click",this.showBgPicker.bind(this));this.textPickerBtn.addEventListener("click",this.showTextPicker.bind(this));this.inputInfo.addEventListener("change",this.hideCookiesSettings.bind(this));this.inputApp.addEventListener("change",this.showCookiesSettings.bind(this))},onBgColorSelected:function(){var e=this.bgPicker.getSelectedColor();this.setSelectedBgColor(e)},onTextColorSelected:function(){var e=this.textPicker.getSelectedColor();this.setSelectedTextColor(e)},onSelectCookiesPosition:function(e){this.positions.forEach(function(e){if(e.classList.contains("landing-form-cookies-position-item-selected")){e.classList.remove("landing-form-cookies-position-item-selected")}}.bind(this));e.currentTarget.classList.add("landing-form-cookies-position-item-selected")},showBgPicker:function(){this.bgPicker.open()},showTextPicker:function(){this.textPicker.open()},setSelectedBgColor:function(e){this.bgPickerBtn.style.background=e;this.bgPickerBtn.value=e;this.simplePreview.style.background=e;this.advancedPreview.style.background=e},setSelectedTextColor:function(e){this.textPickerBtn.style.background=e;this.textPickerBtn.value=e;this.advancedPreview.style.color=e;var t=document.querySelectorAll(".landing-form-cookies-settings-preview-svg");t.forEach(function(t){t.style.fill=e})},hideCookiesSettings:function(e){var t;if(e.target){t=e.target.closest(".ui-checkbox-hidden-input-inner")}else{t=e.closest(".ui-checkbox-hidden-input-inner")}if(this.inputInfo.checked){t.style.height="330px";this.settings.style.opacity="0"}},showCookiesSettings:function(e){var t=e.target.closest(".ui-checkbox-hidden-input-inner");if(this.inputApp.checked){t.style.height="617px";this.settings.style.opacity="1"}}};BX.Landing.B24ButtonColor=function(e,t){this.colorCustomType="custom";this.typeControl=e;this.valueControl=t;this.valueControlWrap=BX.findParent(t,{class:"ui-control-wrap"});i(e,"change",BX.delegate(this.checkVisibility,this));this.checkVisibility()};BX.Landing.B24ButtonColor.prototype={checkVisibility:function(){if(this.typeControl.value==="custom"){this.valueControlWrap.hidden=false}else{this.valueControlWrap.hidden=true}}}})();
//# sourceMappingURL=landing-forms.map.js