this.BX=this.BX||{};(function(exports,main_core_events,main_popup,main_core){"use strict";var ButtonTag=function t(){babelHelpers.classCallCheck(this,t)};babelHelpers.defineProperty(ButtonTag,"BUTTON",0);babelHelpers.defineProperty(ButtonTag,"LINK",1);babelHelpers.defineProperty(ButtonTag,"SUBMIT",2);babelHelpers.defineProperty(ButtonTag,"INPUT",3);babelHelpers.defineProperty(ButtonTag,"DIV",4);babelHelpers.defineProperty(ButtonTag,"SPAN",5);function _templateObject8(){var t=babelHelpers.taggedTemplateLiteral(['<span class="ui-btn-counter"></span>']);_templateObject8=function e(){return t};return t}function _templateObject7(){var t=babelHelpers.taggedTemplateLiteral(['<span class="ui-btn-text"></span>']);_templateObject7=function e(){return t};return t}function _templateObject6(){var t=babelHelpers.taggedTemplateLiteral(['<span class="','"></span>']);_templateObject6=function e(){return t};return t}function _templateObject5(){var t=babelHelpers.taggedTemplateLiteral(['<div class="','"></div>']);_templateObject5=function e(){return t};return t}function _templateObject4(){var t=babelHelpers.taggedTemplateLiteral(['<input class="','" type="submit">']);_templateObject4=function e(){return t};return t}function _templateObject3(){var t=babelHelpers.taggedTemplateLiteral(['<a class="','" href=""></a>']);_templateObject3=function e(){return t};return t}function _templateObject2(){var t=babelHelpers.taggedTemplateLiteral(['<input class="','" type="button">']);_templateObject2=function e(){return t};return t}function _templateObject(){var t=babelHelpers.taggedTemplateLiteral(['<button class="','"></button>']);_templateObject=function e(){return t};return t}var BaseButton=function(){function t(e){babelHelpers.classCallCheck(this,t);e=main_core.Type.isPlainObject(e)?e:{};this.options=Object.assign(this.getDefaultOptions(),e);this.button=main_core.Type.isDomNode(this.options.buttonNode)?this.options.buttonNode:null;this.textNode=main_core.Type.isDomNode(this.options.textNode)?this.options.textNode:null;this.counterNode=main_core.Type.isDomNode(this.options.counterNode)?this.options.counterNode:null;this.text="";this.counter=null;this.events={};this.link="";this.maxWidth=null;this.tag=this.isEnumValue(this.options.tag,ButtonTag)?this.options.tag:ButtonTag.BUTTON;if(main_core.Type.isStringFilled(this.options.link)){this.tag=ButtonTag.LINK}this.baseClass=main_core.Type.isStringFilled(this.options.baseClass)?this.options.baseClass:"";this.disabled=false;this.handleEvent=this.handleEvent.bind(this);this.init();if(this.options.disabled===true){this.setDisabled()}this.setText(this.options.text);this.setCounter(this.options.counter);this.setProps(this.options.props);this.setDataSet(this.options.dataset);this.addClass(this.options.className);this.setLink(this.options.link);this.setMaxWidth(this.options.maxWidth);this.bindEvent("click",this.options.onclick);this.bindEvents(this.options.events)}babelHelpers.createClass(t,[{key:"init",value:function t(){}},{key:"getDefaultOptions",value:function t(){return{}}},{key:"render",value:function t(){return this.getContainer()}},{key:"renderTo",value:function t(e){if(main_core.Type.isDomNode(e)){return e.appendChild(this.getContainer())}return null}},{key:"getContainer",value:function t(){if(this.button!==null){return this.button}switch(this.getTag()){case ButtonTag.BUTTON:default:this.button=main_core.Tag.render(_templateObject(),this.getBaseClass());break;case ButtonTag.INPUT:this.button=main_core.Tag.render(_templateObject2(),this.getBaseClass());break;case ButtonTag.LINK:this.button=main_core.Tag.render(_templateObject3(),this.getBaseClass());break;case ButtonTag.SUBMIT:this.button=main_core.Tag.render(_templateObject4(),this.getBaseClass());break;case ButtonTag.DIV:this.button=main_core.Tag.render(_templateObject5(),this.getBaseClass());break;case ButtonTag.SPAN:this.button=main_core.Tag.render(_templateObject6(),this.getBaseClass());break}return this.button}},{key:"getBaseClass",value:function t(){return this.baseClass}},{key:"setText",value:function t(e){if(main_core.Type.isString(e)){this.text=e;if(this.isInputType()){this.getContainer().value=e}else if(e.length>0){if(this.textNode===null){this.textNode=main_core.Tag.render(_templateObject7())}if(!this.textNode.parentNode){main_core.Dom.prepend(this.textNode,this.getContainer())}this.textNode.textContent=e}else{if(this.textNode!==null){main_core.Dom.remove(this.textNode)}}}return this}},{key:"getText",value:function t(){return this.text}},{key:"setCounter",value:function t(e){if([0,"0","",null,false].includes(e)){if(this.counterNode!==null){main_core.Dom.remove(this.counterNode);this.counterNode=null}this.counter=null}else if(main_core.Type.isNumber(e)&&e>0||main_core.Type.isStringFilled(e)){if(this.isInputType()){throw new Error("BX.UI.Button: an input button cannot have a counter.")}if(this.counterNode===null){this.counterNode=main_core.Tag.render(_templateObject8());main_core.Dom.append(this.counterNode,this.getContainer())}this.counter=e;this.counterNode.textContent=e}return this}},{key:"getCounter",value:function t(){return this.counter}},{key:"setLink",value:function t(e){if(main_core.Type.isString(e)){if(this.getTag()!==ButtonTag.LINK){throw new Error("BX.UI.Button: only an anchor button tag supports a link.")}this.getContainer().href=e}return this}},{key:"getLink",value:function t(){return this.getContainer().href}},{key:"setMaxWidth",value:function t(e){if(main_core.Type.isNumber(e)&&e>0){this.maxWidth=e;this.getContainer().style.maxWidth="".concat(e,"px")}else if(e===null){this.getContainer().style.removeProperty("max-width");this.maxWidth=null}return this}},{key:"getMaxWidth",value:function t(){return this.maxWidth}},{key:"getTag",value:function t(){return this.tag}},{key:"setProps",value:function t(e){if(!main_core.Type.isPlainObject(e)){return this}for(var n in e){var i=e[n];main_core.Dom.attr(this.getContainer(),n,i)}return this}},{key:"getProps",value:function t(){var e=this.getContainer().attributes;var n={};var i=this.isInputType()?["class","type"]:["class"];for(var o=0;o<e.length;o++){var r=e[o],a=r.name,s=r.value;if(i.includes(a)||a.startsWith("data-")){continue}n[a]=s}return n}},{key:"setDataSet",value:function t(e){if(!main_core.Type.isPlainObject(e)){return this}for(var n in e){var i=e[n];if(i===null){delete this.getDataSet()[n]}else{this.getDataSet()[n]=i}}return this}},{key:"getDataSet",value:function t(){return this.getContainer().dataset}},{key:"addClass",value:function t(e){if(main_core.Type.isStringFilled(e)){main_core.Dom.addClass(this.getContainer(),e)}return this}},{key:"removeClass",value:function t(e){if(main_core.Type.isStringFilled(e)){main_core.Dom.removeClass(this.getContainer(),e)}return this}},{key:"setDisabled",value:function t(e){if(e===false){this.disabled=false;this.setProps({disabled:null})}else{this.disabled=true;this.setProps({disabled:true})}return this}},{key:"isDisabled",value:function t(){return this.disabled}},{key:"isInputType",value:function t(){return this.getTag()===ButtonTag.SUBMIT||this.getTag()===ButtonTag.INPUT}},{key:"bindEvents",value:function t(e){if(main_core.Type.isPlainObject(e)){for(var n in e){var i=e[n];this.bindEvent(n,i)}}return this}},{key:"unbindEvents",value:function t(e){var n=this;if(main_core.Type.isArray(e)){e.forEach(function(t){n.unbindEvent(t)})}return this}},{key:"bindEvent",value:function t(e,n){if(main_core.Type.isStringFilled(e)&&main_core.Type.isFunction(n)){this.unbindEvent(e);this.events[e]=n;main_core.Event.bind(this.getContainer(),e,this.handleEvent)}return this}},{key:"unbindEvent",value:function t(e){if(this.events[e]){delete this.events[e];main_core.Event.unbind(this.getContainer(),e,this.handleEvent)}return this}},{key:"handleEvent",value:function t(e){var n=e.type;if(this.events[n]){var i=this.events[n];i.call(this,this,e)}}},{key:"isEnumValue",value:function t(e,n){for(var i in n){if(n[i]===e){return true}}return false}}]);return t}();var ButtonColor=function t(){babelHelpers.classCallCheck(this,t)};babelHelpers.defineProperty(ButtonColor,"DANGER","ui-btn-danger");babelHelpers.defineProperty(ButtonColor,"DANGER_DARK","ui-btn-danger-dark");babelHelpers.defineProperty(ButtonColor,"DANGER_LIGHT","ui-btn-danger-light");babelHelpers.defineProperty(ButtonColor,"SUCCESS","ui-btn-success");babelHelpers.defineProperty(ButtonColor,"SUCCESS_DARK","ui-btn-success-dark");babelHelpers.defineProperty(ButtonColor,"SUCCESS_LIGHT","ui-btn-success-light");babelHelpers.defineProperty(ButtonColor,"PRIMARY_DARK","ui-btn-primary-dark");babelHelpers.defineProperty(ButtonColor,"PRIMARY","ui-btn-primary");babelHelpers.defineProperty(ButtonColor,"SECONDARY","ui-btn-secondary");babelHelpers.defineProperty(ButtonColor,"LINK","ui-btn-link");babelHelpers.defineProperty(ButtonColor,"LIGHT","ui-btn-light");babelHelpers.defineProperty(ButtonColor,"LIGHT_BORDER","ui-btn-light-border");var ButtonSize=function t(){babelHelpers.classCallCheck(this,t)};babelHelpers.defineProperty(ButtonSize,"LARGE","ui-btn-lg");babelHelpers.defineProperty(ButtonSize,"MEDIUM","ui-btn-md");babelHelpers.defineProperty(ButtonSize,"SMALL","ui-btn-sm");babelHelpers.defineProperty(ButtonSize,"EXTRA_SMALL","ui-btn-xs");var ButtonIcon=function t(){babelHelpers.classCallCheck(this,t)};babelHelpers.defineProperty(ButtonIcon,"UNFOLLOW","ui-btn-icon-unfollow");babelHelpers.defineProperty(ButtonIcon,"FOLLOW","ui-btn-icon-follow");babelHelpers.defineProperty(ButtonIcon,"ADD","ui-btn-icon-add");babelHelpers.defineProperty(ButtonIcon,"STOP","ui-btn-icon-stop");babelHelpers.defineProperty(ButtonIcon,"START","ui-btn-icon-start");babelHelpers.defineProperty(ButtonIcon,"PAUSE","ui-btn-icon-pause");babelHelpers.defineProperty(ButtonIcon,"ADD_FOLDER","ui-btn-icon-add-folder");babelHelpers.defineProperty(ButtonIcon,"SETTING","ui-btn-icon-setting");babelHelpers.defineProperty(ButtonIcon,"TASK","ui-btn-icon-task");babelHelpers.defineProperty(ButtonIcon,"INFO","ui-btn-icon-info");babelHelpers.defineProperty(ButtonIcon,"SEARCH","ui-btn-icon-search");babelHelpers.defineProperty(ButtonIcon,"PRINT","ui-btn-icon-print");babelHelpers.defineProperty(ButtonIcon,"LIST","ui-btn-icon-list");babelHelpers.defineProperty(ButtonIcon,"BUSINESS","ui-btn-icon-business");babelHelpers.defineProperty(ButtonIcon,"BUSINESS_CONFIRM","ui-btn-icon-business-confirm");babelHelpers.defineProperty(ButtonIcon,"BUSINESS_WARNING","ui-btn-icon-business-warning");babelHelpers.defineProperty(ButtonIcon,"CAMERA","ui-btn-icon-camera");babelHelpers.defineProperty(ButtonIcon,"PHONE_UP","ui-btn-icon-phone-up");babelHelpers.defineProperty(ButtonIcon,"PHONE_DOWN","ui-btn-icon-phone-down");babelHelpers.defineProperty(ButtonIcon,"PHONE_CALL","ui-btn-icon-phone-call");babelHelpers.defineProperty(ButtonIcon,"BACK","ui-btn-icon-back");babelHelpers.defineProperty(ButtonIcon,"REMOVE","ui-btn-icon-remove");babelHelpers.defineProperty(ButtonIcon,"DOWNLOAD","ui-btn-icon-download");babelHelpers.defineProperty(ButtonIcon,"DONE","ui-btn-icon-done");babelHelpers.defineProperty(ButtonIcon,"DISK","ui-btn-icon-disk");babelHelpers.defineProperty(ButtonIcon,"LOCK","ui-btn-icon-lock");babelHelpers.defineProperty(ButtonIcon,"MAIL","ui-btn-icon-mail");babelHelpers.defineProperty(ButtonIcon,"CHAT","ui-btn-icon-chat");babelHelpers.defineProperty(ButtonIcon,"PAGE","ui-btn-icon-page");babelHelpers.defineProperty(ButtonIcon,"CLOUD","ui-btn-icon-cloud");babelHelpers.defineProperty(ButtonIcon,"EDIT","ui-btn-icon-edit");babelHelpers.defineProperty(ButtonIcon,"SHARE","ui-btn-icon-share");babelHelpers.defineProperty(ButtonIcon,"ANGLE_UP","ui-btn-icon-angle-up");babelHelpers.defineProperty(ButtonIcon,"ANGLE_DOWN","ui-btn-icon-angle-down");var ButtonState=function t(){babelHelpers.classCallCheck(this,t)};babelHelpers.defineProperty(ButtonState,"HOVER","ui-btn-hover");babelHelpers.defineProperty(ButtonState,"ACTIVE","ui-btn-active");babelHelpers.defineProperty(ButtonState,"DISABLED","ui-btn-disabled");babelHelpers.defineProperty(ButtonState,"CLOCKING","ui-btn-clock");babelHelpers.defineProperty(ButtonState,"WAITING","ui-btn-wait");var ButtonStyle=function t(){babelHelpers.classCallCheck(this,t)};babelHelpers.defineProperty(ButtonStyle,"NO_CAPS","ui-btn-no-caps");babelHelpers.defineProperty(ButtonStyle,"ROUND","ui-btn-round");babelHelpers.defineProperty(ButtonStyle,"DROPDOWN","ui-btn-dropdown");babelHelpers.defineProperty(ButtonStyle,"COLLAPSED","ui-btn-collapsed");var Button=function(t){babelHelpers.inherits(e,t);function e(t){var n;babelHelpers.classCallCheck(this,e);t=main_core.Type.isPlainObject(t)?t:{};t.baseClass=main_core.Type.isStringFilled(t.baseClass)?t.baseClass:e.BASE_CLASS;n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).call(this,t));n.size=null;n.color=null;n.icon=null;n.state=null;n.id=null;n.context=null;n.menuWindow=null;n.handleMenuClick=n.handleMenuClick.bind(babelHelpers.assertThisInitialized(n));n.handleMenuClose=n.handleMenuClose.bind(babelHelpers.assertThisInitialized(n));n.setSize(n.options.size);n.setColor(n.options.color);n.setIcon(n.options.icon);n.setState(n.options.state);n.setId(n.options.id);n.setMenu(n.options.menu);n.setContext(n.options.context);n.options.noCaps&&n.setNoCaps();n.options.round&&n.setRound();if(n.options.dropdown||n.getMenuWindow()&&n.options.dropdown!==false){n.setDropdown()}return n}babelHelpers.createClass(e,[{key:"setSize",value:function t(e){return this.setProperty("size",e,ButtonSize)}},{key:"getSize",value:function t(){return this.size}},{key:"setColor",value:function t(e){return this.setProperty("color",e,ButtonColor)}},{key:"getColor",value:function t(){return this.color}},{key:"setIcon",value:function t(e){this.setProperty("icon",e,ButtonIcon);if(this.isInputType()&&this.getIcon()!==null){throw new Error("BX.UI.Button: Input type button cannot have an icon.")}return this}},{key:"getIcon",value:function t(){return this.icon}},{key:"setState",value:function t(e){return this.setProperty("state",e,ButtonState)}},{key:"getState",value:function t(){return this.state}},{key:"setNoCaps",value:function t(e){if(e===false){main_core.Dom.removeClass(this.getContainer(),ButtonStyle.NO_CAPS)}else{main_core.Dom.addClass(this.getContainer(),ButtonStyle.NO_CAPS)}return this}},{key:"isNoCaps",value:function t(){return main_core.Dom.hasClass(this.getContainer(),ButtonStyle.NO_CAPS)}},{key:"setRound",value:function t(e){if(e===false){main_core.Dom.removeClass(this.getContainer(),ButtonStyle.ROUND)}else{main_core.Dom.addClass(this.getContainer(),ButtonStyle.ROUND)}return this}},{key:"isRound",value:function t(){return main_core.Dom.hasClass(this.getContainer(),ButtonStyle.ROUND)}},{key:"setDropdown",value:function t(e){if(e===false){main_core.Dom.removeClass(this.getContainer(),ButtonStyle.DROPDOWN)}else{main_core.Dom.addClass(this.getContainer(),ButtonStyle.DROPDOWN)}return this}},{key:"isDropdown",value:function t(){return main_core.Dom.hasClass(this.getContainer(),ButtonStyle.DROPDOWN)}},{key:"setCollapsed",value:function t(e){if(e===false){main_core.Dom.removeClass(this.getContainer(),ButtonStyle.COLLAPSED)}else{main_core.Dom.addClass(this.getContainer(),ButtonStyle.COLLAPSED)}return this}},{key:"isCollapsed",value:function t(){return main_core.Dom.hasClass(this.getContainer(),ButtonStyle.COLLAPSED)}},{key:"setMenu",value:function t(e){if(main_core.Type.isPlainObject(e)&&main_core.Type.isArray(e.items)&&e.items.length>0){this.setMenu(false);this.menuWindow=new main_popup.Menu(babelHelpers.objectSpread({id:"ui-btn-menu-".concat(main_core.Text.getRandom().toLowerCase()),bindElement:this.getMenuBindElement()},e));this.menuWindow.getPopupWindow().subscribe("onClose",this.handleMenuClose);main_core.Event.bind(this.getMenuClickElement(),"click",this.handleMenuClick)}else if(e===false&&this.menuWindow!==null){this.menuWindow.close();this.menuWindow.getPopupWindow().unsubscribe("onClose",this.handleMenuClose);main_core.Event.unbind(this.getMenuClickElement(),"click",this.handleMenuClick);this.menuWindow.destroy();this.menuWindow=null}return this}},{key:"getMenuBindElement",value:function t(){return this.getContainer()}},{key:"getMenuClickElement",value:function t(){return this.getContainer()}},{key:"handleMenuClick",value:function t(e){this.getMenuWindow().show();this.setActive(this.getMenuWindow().getPopupWindow().isShown())}},{key:"handleMenuClose",value:function t(){this.setActive(false)}},{key:"getMenuWindow",value:function t(){return this.menuWindow}},{key:"setId",value:function t(e){if(main_core.Type.isStringFilled(e)||main_core.Type.isNull(e)){this.id=e}return this}},{key:"getId",value:function t(){return this.id}},{key:"setActive",value:function t(e){return this.setState(e===false?null:ButtonState.ACTIVE)}},{key:"isActive",value:function t(){return this.getState()===ButtonState.ACTIVE}},{key:"setHovered",value:function t(e){return this.setState(e===false?null:ButtonState.HOVER)}},{key:"isHover",value:function t(){return this.getState()===ButtonState.HOVER}},{key:"setDisabled",value:function t(n){this.setState(n===false?null:ButtonState.DISABLED);babelHelpers.get(babelHelpers.getPrototypeOf(e.prototype),"setDisabled",this).call(this,n);return this}},{key:"isDisabled",value:function t(){return this.getState()===ButtonState.DISABLED}},{key:"setWaiting",value:function t(e){if(e===false){this.setState(null);this.setProps({disabled:null})}else{this.setState(ButtonState.WAITING);this.setProps({disabled:true})}return this}},{key:"isWaiting",value:function t(){return this.getState()===ButtonState.WAITING}},{key:"setClocking",value:function t(e){if(e===false){this.setState(null);this.setProps({disabled:null})}else{this.setState(ButtonState.CLOCKING);this.setProps({disabled:true})}return this}},{key:"isClocking",value:function t(){return this.getState()===ButtonState.CLOCKING}},{key:"setProperty",value:function t(e,n,i){if(this.isEnumValue(n,i)){main_core.Dom.removeClass(this.getContainer(),this[e]);main_core.Dom.addClass(this.getContainer(),n);this[e]=n}else if(n===null){main_core.Dom.removeClass(this.getContainer(),this[e]);this[e]=null}return this}},{key:"setContext",value:function t(e){if(!main_core.Type.isUndefined(e)){this.context=e}return this}},{key:"getContext",value:function t(){return this.context}}]);return e}(BaseButton);babelHelpers.defineProperty(Button,"BASE_CLASS","ui-btn");babelHelpers.defineProperty(Button,"Size",ButtonSize);babelHelpers.defineProperty(Button,"Color",ButtonColor);babelHelpers.defineProperty(Button,"State",ButtonState);babelHelpers.defineProperty(Button,"Icon",ButtonIcon);babelHelpers.defineProperty(Button,"Tag",ButtonTag);babelHelpers.defineProperty(Button,"Style",ButtonStyle);var SplitButtonState=function t(){babelHelpers.classCallCheck(this,t)};babelHelpers.defineProperty(SplitButtonState,"HOVER","ui-btn-hover");babelHelpers.defineProperty(SplitButtonState,"MAIN_HOVER","ui-btn-main-hover");babelHelpers.defineProperty(SplitButtonState,"MENU_HOVER","ui-btn-menu-hover");babelHelpers.defineProperty(SplitButtonState,"ACTIVE","ui-btn-active");babelHelpers.defineProperty(SplitButtonState,"MAIN_ACTIVE","ui-btn-main-active");babelHelpers.defineProperty(SplitButtonState,"MENU_ACTIVE","ui-btn-menu-active");babelHelpers.defineProperty(SplitButtonState,"DISABLED","ui-btn-disabled");babelHelpers.defineProperty(SplitButtonState,"MAIN_DISABLED","ui-btn-main-disabled");babelHelpers.defineProperty(SplitButtonState,"MENU_DISABLED","ui-btn-menu-disabled");babelHelpers.defineProperty(SplitButtonState,"CLOCKING","ui-btn-clock");babelHelpers.defineProperty(SplitButtonState,"WAITING","ui-btn-wait");var SplitSubButtonType=function t(){babelHelpers.classCallCheck(this,t)};babelHelpers.defineProperty(SplitSubButtonType,"MAIN","ui-btn-main");babelHelpers.defineProperty(SplitSubButtonType,"MENU","ui-btn-menu");var SplitSubButton=function(t){babelHelpers.inherits(e,t);function e(t){var n;babelHelpers.classCallCheck(this,e);t=main_core.Type.isPlainObject(t)?t:{};t.baseClass=t.buttonType===SplitSubButtonType.MAIN?SplitSubButtonType.MAIN:SplitSubButtonType.MENU;n=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).call(this,t));if(n.isInputType()){throw new Error("BX.UI.SplitSubButton: Split button cannot be an input tag.")}return n}babelHelpers.createClass(e,[{key:"init",value:function t(){this.buttonType=this.options.buttonType;this.splitButton=this.options.splitButton;babelHelpers.get(babelHelpers.getPrototypeOf(e.prototype),"init",this).call(this)}},{key:"getSplitButton",value:function t(){return this.splitButton}},{key:"isMainButton",value:function t(){return this.buttonType===SplitSubButtonType.MAIN}},{key:"isMenuButton",value:function t(){return this.buttonType===SplitSubButtonType.MENU}},{key:"setText",value:function t(n){if(main_core.Type.isString(n)&&this.isMenuButton()){throw new Error("BX.UI.SplitButton: a menu button doesn't support a text caption.")}return babelHelpers.get(babelHelpers.getPrototypeOf(e.prototype),"setText",this).call(this,n)}},{key:"setActive",value:function t(e){this.toggleState(e,SplitButtonState.ACTIVE,SplitButtonState.MAIN_ACTIVE,SplitButtonState.MENU_ACTIVE);return this}},{key:"isActive",value:function t(){var e=this.getSplitButton().getState();if(e===SplitButtonState.ACTIVE){return true}if(this.isMainButton()){return e===SplitButtonState.MAIN_ACTIVE}return e===SplitButtonState.MENU_ACTIVE}},{key:"setDisabled",value:function t(n){this.toggleState(n,SplitButtonState.DISABLED,SplitButtonState.MAIN_DISABLED,SplitButtonState.MENU_DISABLED);babelHelpers.get(babelHelpers.getPrototypeOf(e.prototype),"setDisabled",this).call(this,n);return this}},{key:"setHovered",value:function t(e){this.toggleState(e,SplitButtonState.HOVER,SplitButtonState.MAIN_HOVER,SplitButtonState.MENU_HOVER);return this}},{key:"isHovered",value:function t(){var e=this.getSplitButton().getState();if(e===SplitButtonState.HOVER){return true}if(this.isMainButton()){return e===SplitButtonState.MAIN_HOVER}return e===SplitButtonState.MENU_HOVER}},{key:"toggleState",value:function t(e,n,i,o){var r=this.getSplitButton().getState();if(e===false){if(r===n){this.getSplitButton().setState(this.isMainButton()?o:i)}else{this.getSplitButton().setState(null)}}else{if(r===i&&this.isMenuButton()){this.getSplitButton().setState(n)}else if(r===o&&this.isMainButton()){this.getSplitButton().setState(n)}else if(r!==n){this.getSplitButton().setState(this.isMainButton()?i:o)}}}}]);return e}(BaseButton);babelHelpers.defineProperty(SplitSubButton,"Type",SplitSubButtonType);function _templateObject$1(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="','">',"</div>\n\t\t\t"]);_templateObject$1=function e(){return t};return t}var SplitButton=function(t){babelHelpers.inherits(e,t);function e(t){babelHelpers.classCallCheck(this,e);t=main_core.Type.isPlainObject(t)?t:{};delete t.round;if(main_core.Type.isStringFilled(t.link)){t.mainButton=main_core.Type.isPlainObject(t.mainButton)?t.mainButton:{};t.mainButton.link=t.link;delete t.link}t.tag=ButtonTag.DIV;t.baseClass=e.BASE_CLASS;return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).call(this,t))}babelHelpers.createClass(e,[{key:"init",value:function t(){var n=main_core.Type.isPlainObject(this.options.mainButton)?this.options.mainButton:{};var i=main_core.Type.isPlainObject(this.options.menuButton)?this.options.menuButton:{};n.buttonType=SplitSubButtonType.MAIN;n.splitButton=this;i.buttonType=SplitSubButtonType.MENU;i.splitButton=this;this.mainButton=new SplitSubButton(n);this.menuButton=new SplitSubButton(i);this.menuTarget=SplitSubButtonType.MAIN;if(this.options.menuTarget===SplitSubButtonType.MENU){this.menuTarget=SplitSubButtonType.MENU}babelHelpers.get(babelHelpers.getPrototypeOf(e.prototype),"init",this).call(this)}},{key:"getContainer",value:function t(){if(this.button===null){this.button=main_core.Tag.render(_templateObject$1(),this.getBaseClass(),[this.getMainButton().getContainer(),this.getMenuButton().getContainer()])}return this.button}},{key:"getMainButton",value:function t(){return this.mainButton}},{key:"getMenuButton",value:function t(){return this.menuButton}},{key:"setText",value:function t(e){if(main_core.Type.isString(e)){this.getMainButton().setText(e)}return this}},{key:"getText",value:function t(){return this.getMainButton().getText()}},{key:"setCounter",value:function t(e){return this.getMainButton().setCounter(e)}},{key:"getCounter",value:function t(){return this.getMainButton().getCounter()}},{key:"setLink",value:function t(e){return this.getMainButton().setLink(e)}},{key:"getLink",value:function t(){return this.getMainButton().getLink()}},{key:"setState",value:function t(e){return this.setProperty("state",e,SplitButtonState)}},{key:"setDisabled",value:function t(e){this.setState(e===false?null:ButtonState.DISABLED);this.getMainButton().setDisabled(e);this.getMenuButton().setDisabled(e);return this}},{key:"getMenuBindElement",value:function t(){if(this.getMenuTarget()===SplitSubButtonType.MENU){return this.getMenuButton().getContainer()}else{return this.getContainer()}}},{key:"handleMenuClick",value:function t(e){this.getMenuWindow().show();var n=this.getMenuWindow().getPopupWindow().isShown();this.getMenuButton().setActive(n)}},{key:"handleMenuClose",value:function t(){this.getMenuButton().setActive(false)}},{key:"getMenuClickElement",value:function t(){return this.getMenuButton().getContainer()}},{key:"getMenuTarget",value:function t(){return this.menuTarget}},{key:"setRound",value:function t(e){throw new Error("BX.UI.SplitButton: a split button cannot be round.")}},{key:"isRound",value:function t(){return false}},{key:"setDropdown",value:function t(e){return this}},{key:"isDropdown",value:function t(){return true}}]);return e}(Button);babelHelpers.defineProperty(SplitButton,"BASE_CLASS","ui-btn-split");babelHelpers.defineProperty(SplitButton,"State",SplitButtonState);function _templateObject$2(){var t=babelHelpers.taggedTemplateLiteral(['<span class="ui-btn-text">',"</span>"]);_templateObject$2=function e(){return t};return t}function _classStaticPrivateMethodGet(t,e,n){if(t!==e){throw new TypeError("Private static access of wrong provenance")}return n}var ButtonManager=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,null,[{key:"createFromNode",value:function e(n){var i=this;if(!main_core.Type.isDomNode(n)){throw new Error('BX.UI.ButtonManager.createFromNode: "node" must be a DOM node.')}if(!main_core.Dom.hasClass(n,Button.BASE_CLASS)&&!main_core.Dom.hasClass(n,SplitButton.BASE_CLASS)){throw new Error('BX.UI.ButtonManager.createFromNode: "node" is not a button.')}var o=main_core.Dom.hasClass(n,SplitButton.BASE_CLASS);var r=null;var a=null;var s=null;var l=null;var u=false;var c={};var p={};if(o){var b=n.querySelector(".".concat(SplitSubButtonType.MAIN));var h=n.querySelector(".".concat(SplitSubButtonType.MENU));if(!b){throw new Error("BX.UI.ButtonManager.createFromNode: a split button doesn't have a main button.")}if(!h){throw new Error("BX.UI.ButtonManager.createFromNode: a split button doesn't have a menu button.")}var B=_classStaticPrivateMethodGet(this,t,_getTag).call(this,b);if(B===ButtonTag.INPUT||B===ButtonTag.SUBMIT){a=b.value}else{var f=_classStaticPrivateMethodGet(this,t,_getTextNode).call(this,b);var d=babelHelpers.slicedToArray(f,2);s=d[0];l=d[1];a=s.textContent}u=main_core.Dom.hasClass(n,SplitButtonState.DISABLED);c={tag:B,textNode:s,counterNode:l,buttonNode:b,disabled:main_core.Dom.hasClass(n,SplitButtonState.MAIN_DISABLED)};p={tag:_classStaticPrivateMethodGet(this,t,_getTag).call(this,h),buttonNode:h,textNode:null,counterNode:null,disabled:main_core.Dom.hasClass(n,SplitButtonState.MENU_DISABLED)}}else{r=_classStaticPrivateMethodGet(this,t,_getTag).call(this,n);if(r===null){throw new Error('BX.UI.ButtonManager.createFromNode: "node" must be a button, link or input.')}u=main_core.Dom.hasClass(n,ButtonState.DISABLED);if(r===ButtonTag.INPUT||r===ButtonTag.SUBMIT){a=n.value}else{var S=_classStaticPrivateMethodGet(this,t,_getTextNode).call(this,n);var y=babelHelpers.slicedToArray(S,2);s=y[0];l=y[1];a=s.textContent}}var g={id:n.dataset.btnUniqid,buttonNode:n,textNode:o?null:s,counterNode:o?null:l,counter:_classStaticPrivateMethodGet(this,t,_getCounter).call(this,l),tag:r,text:a,disabled:u,mainButton:c,menuButton:p,size:_classStaticPrivateMethodGet(this,t,_getEnumProp).call(this,n,ButtonSize),color:_classStaticPrivateMethodGet(this,t,_getEnumProp).call(this,n,ButtonColor),icon:_classStaticPrivateMethodGet(this,t,_getEnumProp).call(this,n,ButtonIcon),state:_classStaticPrivateMethodGet(this,t,_getEnumProp).call(this,n,o?SplitButtonState:ButtonState),noCaps:main_core.Dom.hasClass(n,ButtonStyle.NO_CAPS),round:main_core.Dom.hasClass(n,ButtonStyle.ROUND)};var v=main_core.Dom.attr(n,"data-json-options")||{};if(main_core.Dom.hasClass(n,ButtonStyle.DROPDOWN)){g.dropdown=true}else if(v.dropdown===false){g.dropdown=false}if(v.onclick){g.onclick=_classStaticPrivateMethodGet(this,t,_convertEventHandler).call(this,v.onclick)}if(main_core.Type.isPlainObject(v.events)){g.events=v.events;_classStaticPrivateMethodGet(this,t,_convertEvents).call(this,g.events)}if(main_core.Type.isPlainObject(v.menu)){g.menu=v.menu;_classStaticPrivateMethodGet(this,t,_convertMenuEvents).call(this,g.menu.items)}["mainButton","menuButton"].forEach(function(e){if(!main_core.Type.isPlainObject(v[e])){return}g[e]=main_core.Runtime.merge(g[e],v[e]);if(g[e].onclick){g[e].onclick=_classStaticPrivateMethodGet(i,t,_convertEventHandler).call(i,g[e].onclick)}_classStaticPrivateMethodGet(i,t,_convertEvents).call(i,g[e].events)});if(main_core.Type.isStringFilled(v.menuTarget)){g.menuTarget=v.menuTarget}return o?new SplitButton(g):new Button(g)}},{key:"createByUniqId",value:function t(e){if(!main_core.Type.isStringFilled(e)){return null}var n=document.querySelector('[data-btn-uniqid="'.concat(e,'"]'));return n?this.createFromNode(n):null}},{key:"getByUniqid",value:function t(e){var n=BX.UI.ToolbarManager.getDefaultToolbar();return n?n.getButton(e):null}}]);return t}();var _convertMenuEvents=function t(e){var n=this;if(!main_core.Type.isArray(e)){return}e.forEach(function(e){if(e.onclick){e.onclick=_classStaticPrivateMethodGet(n,ButtonManager,_convertEventHandler).call(n,e.onclick)}if(e.events){_classStaticPrivateMethodGet(n,ButtonManager,_convertEvents).call(n,e.events)}if(main_core.Type.isArray(e.items)){_classStaticPrivateMethodGet(n,ButtonManager,t).call(n,e.items)}})};var _convertEvents=function t(e){if(main_core.Type.isPlainObject(e)){for(var n=0,i=Object.entries(e);n<i.length;n++){var o=babelHelpers.slicedToArray(i[n],2),r=o[0],a=o[1];e[r]=_classStaticPrivateMethodGet(this,ButtonManager,_convertEventHandler).call(this,a)}}};var _convertEventHandler=function _convertEventHandler(handler){if(main_core.Type.isFunction(handler)){return handler}if(!main_core.Type.isObject(handler)){throw new Error("BX.UI.ButtonManager.createFromNode: Event handler must be described as object or function.")}if(main_core.Type.isStringFilled(handler.code)){return function(){eval(handler.code)}}else if(main_core.Type.isStringFilled(handler.event)){return function(){var t;for(var e=arguments.length,n=new Array(e),i=0;i<e;i++){n[i]=arguments[i]}if(n[0]instanceof main_core_events.BaseEvent){t=n[0]}else{if(n[0]instanceof BaseButton){t=new main_core_events.BaseEvent({data:{button:n[0],event:n[1]}})}else if(n[1]instanceof main_popup.MenuItem){t=new main_core_events.BaseEvent({data:{item:n[1],event:n[0]}})}else{t=new main_core_events.BaseEvent({data:n})}}main_core_events.EventEmitter.emit(handler.event,t)}}else if(main_core.Type.isStringFilled(handler.handler)){return function(){var t=main_core.Reflection.getClass(handler.handler);if(main_core.Type.isFunction(t)){var e=this;if(main_core.Type.isStringFilled(handler.context)){e=main_core.Reflection.getClass(handler.context)}for(var n=arguments.length,i=new Array(n),o=0;o<n;o++){i[o]=arguments[o]}return t.apply(e,i)}else{console.warn("BX.UI.ButtonManager.createFromNode: be aware, the handler ".concat(handler.handler," is not a function."))}return null}}return null};var _getEnumProp=function t(e,n){for(var i in n){if(!n.hasOwnProperty(i)){continue}if(main_core.Dom.hasClass(e,n[i])){return n[i]}}return null};var _getCounter=function t(e){if(main_core.Type.isDomNode(e)){var n=e.textContent;var i=Number(n);return main_core.Type.isNumber(i)?i:n}return null};var _getTextNode=function t(e){var n=e.querySelector(".ui-btn-text");var i=e.querySelector(".ui-btn-counter");if(!n){if(i){main_core.Dom.remove(i)}n=main_core.Tag.render(_templateObject$2(),e.innerHTML.trim());main_core.Dom.clean(e);main_core.Dom.append(n,e);if(i){main_core.Dom.append(i,e)}}return[n,i]};var _getTag=function t(e){if(e.nodeName==="A"){return ButtonTag.LINK}else if(e.nodeName==="BUTTON"){return ButtonTag.BUTTON}else if(e.nodeName==="INPUT"&&e.type==="button"){return ButtonTag.INPUT}else if(e.nodeName==="INPUT"&&e.type==="submit"){return ButtonTag.SUBMIT}return null};var IButton=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,[{key:"render",value:function t(){throw new Error("BX.UI.IButton: Must be implemented by a subclass")}}]);return t}();var AddButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_ADD_BTN_TEXT"),color:ButtonColor.SUCCESS}}}]);return e}(Button);var ApplyButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_APPLY_BTN_TEXT"),color:ButtonColor.LIGHT_BORDER}}}]);return e}(Button);var CancelButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_CANCEL_BTN_TEXT"),color:ButtonColor.LINK}}}]);return e}(Button);var CloseButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_CLOSE_BTN_TEXT"),color:ButtonColor.LINK}}}]);return e}(Button);var CreateButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_CREATE_BTN_TEXT"),color:ButtonColor.SUCCESS}}}]);return e}(Button);var SaveButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_SAVE_BTN_TEXT"),color:ButtonColor.SUCCESS}}}]);return e}(Button);var SendButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_SEND_BTN_TEXT"),color:ButtonColor.SUCCESS}}}]);return e}(Button);var SettingsButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{icon:ButtonIcon.SETTING,color:ButtonColor.LIGHT_BORDER,dropdown:false}}}]);return e}(Button);var AddSplitButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_ADD_BTN_TEXT"),color:ButtonColor.SUCCESS}}}]);return e}(SplitButton);var ApplySplitButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_APPLY_BTN_TEXT"),color:ButtonColor.LIGHT_BORDER}}}]);return e}(SplitButton);var CancelSplitButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_CANCEL_BTN_TEXT"),color:ButtonColor.LINK}}}]);return e}(SplitButton);var CloseSplitButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_CLOSE_BTN_TEXT"),color:ButtonColor.LINK}}}]);return e}(SplitButton);var CreateSplitButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_CREATE_BTN_TEXT"),color:ButtonColor.SUCCESS}}}]);return e}(SplitButton);var SaveSplitButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_SAVE_BTN_TEXT"),color:ButtonColor.SUCCESS}}}]);return e}(SplitButton);var SendSplitButton=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"getDefaultOptions",value:function t(){return{text:main_core.Loc.getMessage("UI_BUTTONS_SEND_BTN_TEXT"),color:ButtonColor.SUCCESS}}}]);return e}(SplitButton);exports.IButton=IButton;exports.BaseButton=BaseButton;exports.Button=Button;exports.SplitButton=SplitButton;exports.SplitSubButton=SplitSubButton;exports.ButtonManager=ButtonManager;exports.ButtonIcon=ButtonIcon;exports.ButtonSize=ButtonSize;exports.ButtonState=ButtonState;exports.ButtonColor=ButtonColor;exports.ButtonStyle=ButtonStyle;exports.ButtonTag=ButtonTag;exports.SplitButtonState=SplitButtonState;exports.SplitSubButtonType=SplitSubButtonType;exports.AddButton=AddButton;exports.ApplyButton=ApplyButton;exports.CancelButton=CancelButton;exports.CloseButton=CloseButton;exports.CreateButton=CreateButton;exports.SaveButton=SaveButton;exports.SendButton=SendButton;exports.SettingsButton=SettingsButton;exports.AddSplitButton=AddSplitButton;exports.ApplySplitButton=ApplySplitButton;exports.CancelSplitButton=CancelSplitButton;exports.CloseSplitButton=CloseSplitButton;exports.CreateSplitButton=CreateSplitButton;exports.SaveSplitButton=SaveSplitButton;exports.SendSplitButton=SendSplitButton})(this.BX.UI=this.BX.UI||{},BX.Event,BX.Main,BX);
//# sourceMappingURL=ui.buttons.bundle.map.js