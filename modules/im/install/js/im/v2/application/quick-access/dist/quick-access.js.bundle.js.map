{"version":3,"file":"quick-access.js.bundle.js","sources":["../src/quick-access.js"],"sourcesContent":["import { Core } from 'im.v2.application.core';\nimport { QuickAccess } from 'im.v2.component.quick-access';\nimport { GetParameter } from 'im.v2.const';\n\nimport { Messenger } from 'im.public';\n\ntype QuickAccessApplicationParams = {\n\tnode?: string | HTMLElement,\n\tpreloadedList?: Object,\n\tloggerConfig?: Object,\n}\n\nexport class QuickAccessApplication\n{\n\tparams: QuickAccessApplicationParams;\n\tinited: boolean = false;\n\tinitPromise: Promise = null;\n\tinitPromiseResolver: Function = null;\n\trootNode: string | HTMLElement = null;\n\tvueInstance: Object = null;\n\tcontroller: Object = null;\n\n\t#applicationName = 'Sidebar';\n\n\tconstructor(params: QuickAccessApplicationParams = {})\n\t{\n\t\tthis.initPromise = new Promise((resolve) => {\n\t\t\tthis.initPromiseResolver = resolve;\n\t\t});\n\n\t\tthis.params = params;\n\n\t\tthis.rootNode = this.params.node || document.createElement('div');\n\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tthis.initCore()\n\t\t\t.then(() => this.initComponent())\n\t\t\t.then(() => this.initComplete())\n\t\t\t.then(() => this.checkGetParams())\n\t\t;\n\t}\n\n\tasync initCore(): Promise\n\t{\n\t\tCore.setApplicationData(this.params);\n\t\tthis.controller = await Core.ready();\n\n\t\treturn true;\n\t}\n\n\tasync initComponent(): Promise\n\t{\n\t\tthis.vueInstance = await this.controller.createVue(this, {\n\t\t\tname: this.#applicationName,\n\t\t\tel: this.rootNode,\n\t\t\tcomponents: { QuickAccess },\n\t\t\ttemplate: '<QuickAccess />',\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tinitComplete(): Promise\n\t{\n\t\tthis.inited = true;\n\t\tthis.initPromiseResolver(this);\n\n\t\treturn Promise.resolve();\n\t}\n\n\tcheckGetParams(): void\n\t{\n\t\tconst urlParams = new URLSearchParams(window.location.search);\n\t\tif (urlParams.has(GetParameter.openNotifications))\n\t\t{\n\t\t\tMessenger.openNotifications();\n\t\t}\n\t\telse if (urlParams.has(GetParameter.openHistory))\n\t\t{\n\t\t\tconst dialogId = urlParams.get(GetParameter.openHistory);\n\t\t\tMessenger.openLinesHistory(dialogId);\n\t\t}\n\t\telse if (urlParams.has(GetParameter.openLines))\n\t\t{\n\t\t\tconst dialogId = urlParams.get(GetParameter.openLines);\n\t\t\tMessenger.openLines(dialogId);\n\t\t}\n\t\telse if (urlParams.has(GetParameter.openChat))\n\t\t{\n\t\t\tconst dialogId = urlParams.get(GetParameter.openChat);\n\t\t\tlet messageId = urlParams.get(GetParameter.openMessage);\n\t\t\tmessageId = messageId ? Number(messageId) : 0;\n\t\t\tMessenger.openChat(dialogId, messageId);\n\t\t}\n\t\telse if (urlParams.has(GetParameter.openSettings))\n\t\t{\n\t\t\tconst settingsSection = urlParams.get(GetParameter.openSettings);\n\t\t\tMessenger.openSettings({ onlyPanel: settingsSection?.toLowerCase() });\n\t\t}\n\t\telse if (urlParams.has(GetParameter.openCopilotChat))\n\t\t{\n\t\t\tconst dialogId = urlParams.get(GetParameter.openCopilotChat);\n\t\t\tMessenger.openCopilot(dialogId);\n\t\t}\n\t}\n\n\tready(): Promise\n\t{\n\t\tif (this.inited)\n\t\t{\n\t\t\treturn Promise.resolve(this);\n\t\t}\n\n\t\treturn this.initPromise;\n\t}\n}\n"],"names":["QuickAccessApplication","constructor","params","inited","initPromise","initPromiseResolver","rootNode","vueInstance","controller","Promise","resolve","node","document","createElement","initCore","then","initComponent","initComplete","checkGetParams","Core","setApplicationData","ready","createVue","name","el","components","QuickAccess","template","urlParams","URLSearchParams","window","location","search","has","GetParameter","openNotifications","Messenger","openHistory","dialogId","get","openLinesHistory","openLines","openChat","messageId","openMessage","Number","openSettings","settingsSection","onlyPanel","toLowerCase","openCopilotChat","openCopilot"],"mappings":"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"}