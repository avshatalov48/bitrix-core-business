{"version":3,"file":"utils.bundle.js","sources":["../src/browser.js","../src/date.js","../src/device.js","../src/platform.js","../src/rest.js","../src/emoji-regex.js","../src/text.js","../src/user.js","../src/file.js","../src/classes/key-checker.js","../src/key.js","../src/dom.js","../src/dialog.js","../src/conference.js","../src/call.js","../src/utils.js"],"sourcesContent":["import { Type, Dom, Browser } from 'main.core';\n\nconst UA = navigator.userAgent.toLowerCase();\n\nexport const BrowserUtil = {\n\n\tisChrome(): boolean\n\t{\n\t\treturn Browser.isChrome();\n\t},\n\n\tisFirefox(): boolean\n\t{\n\t\treturn Browser.isFirefox();\n\t},\n\n\tisIe(): boolean\n\t{\n\t\treturn Browser.isIE();\n\t},\n\n\tisSafari(): boolean\n\t{\n\t\tif (this.isChrome())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!UA.includes('safari'))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !this.isSafariBased();\n\t},\n\n\tisSafariBased(): boolean\n\t{\n\t\tif (!UA.includes('applewebkit'))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn (\n\t\t\tUA.includes('yabrowser')\n\t\t\t|| UA.includes('yaapp_ios_browser')\n\t\t\t|| UA.includes('crios')\n\t\t);\n\t},\n\n\tfindParent(item, findTag): ?HTMLElement\n\t{\n\t\tconst isHtmlElement = findTag instanceof HTMLElement;\n\n\t\tif (\n\t\t\t!findTag\n\t\t\t|| (!Type.isString(findTag) && !isHtmlElement)\n\t\t)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfor (; item && item !== document; item = item.parentNode)\n\t\t{\n\t\t\tif (Type.isString(findTag))\n\t\t\t{\n\t\t\t\tif (Dom.hasClass(findTag))\n\t\t\t\t{\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (isHtmlElement && item === findTag)\n\t\t\t{\n\t\t\t\treturn item;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\topenLink(link, target = '_blank')\n\t{\n\t\twindow.open(link, target, '', true);\n\t},\n\twaitForSelectionToUpdate(): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\tresolve();\n\t\t\t}, 0);\n\t\t});\n\t},\n};\n","import {Type} from 'main.core';\n\nexport const DateUtil = {\n\tcast(date, def = new Date()): Date\n\t{\n\t\tlet result = def;\n\n\t\tif (date instanceof Date)\n\t\t{\n\t\t\tresult = date;\n\t\t}\n\t\telse if (Type.isString(date))\n\t\t{\n\t\t\tresult = new Date(date);\n\t\t}\n\t\telse if (Type.isNumber(date))\n\t\t{\n\t\t\tresult = new Date(date*1000);\n\t\t}\n\n\t\tif (\n\t\t\tresult instanceof Date\n\t\t\t&& Number.isNaN(result.getTime())\n\t\t)\n\t\t{\n\t\t\tresult = def;\n\t\t}\n\n\t\treturn result;\n\t},\n\n\tgetTimeToNextMidnight(): number\n\t{\n\t\tconst nextMidnight = new Date(new Date().setHours(24, 0, 0)).getTime();\n\t\treturn nextMidnight - Date.now();\n\t},\n\n\tgetStartOfTheDay(): Date\n\t{\n\t\treturn new Date((new Date()).setHours(0, 0));\n\t},\n\n\tisToday(date): boolean\n\t{\n\t\treturn this.cast(date).toDateString() === (new Date()).toDateString();\n\t},\n\n\tisSameDay(firstDate: Date, secondDate: Date): boolean\n\t{\n\t\treturn firstDate.getFullYear() === secondDate.getFullYear()\n\t\t\t&& firstDate.getMonth() === secondDate.getMonth()\n\t\t\t&& firstDate.getDate() === secondDate.getDate();\n\t}\n};","import {Type} from 'main.core';\n\nconst UA = navigator.userAgent.toLowerCase();\n\nexport const DeviceUtil = {\n\n\tisDesktop(): boolean\n\t{\n\t\treturn !this.isMobile();\n\t},\n\n\tisMobile(): boolean\n\t{\n\t\tif (!Type.isUndefined(this.isMobileStatic))\n\t\t{\n\t\t\treturn this.isMobileStatic;\n\t\t}\n\n\t\tthis.isMobileStatic = (\n\t\t\tUA.includes('android')\n\t\t\t|| UA.includes('webos')\n\t\t\t|| UA.includes('iphone')\n\t\t\t|| UA.includes('ipad')\n\t\t\t|| UA.includes('ipod')\n\t\t\t|| UA.includes('blackberry')\n\t\t\t|| UA.includes('windows phone')\n\t\t);\n\n\t\treturn this.isMobileStatic;\n\t},\n\n\torientationHorizontal: 'horizontal',\n\torientationPortrait: 'portrait',\n\n\tgetOrientation(): string\n\t{\n\t\tif (!this.isMobile())\n\t\t{\n\t\t\treturn this.orientationHorizontal;\n\t\t}\n\n\t\treturn Math.abs(window.orientation) === 0? this.orientationPortrait: this.orientationHorizontal;\n\t},\n\n};","import {Type, Browser} from 'main.core';\n\nimport {DesktopApi} from 'im.v2.lib.desktop-api';\n\nconst UA = navigator.userAgent.toLowerCase();\n\nexport const PlatformUtil = {\n\n\tisMac(): boolean\n\t{\n\t\treturn Browser.isMac();\n\t},\n\tisLinux(): boolean\n\t{\n\t\treturn Browser.isLinux();\n\t},\n\tisWindows(): boolean\n\t{\n\t\treturn Browser.isWin() || (!this.isMac() && !this.isLinux());\n\t},\n\tisBitrixMobile(): boolean\n\t{\n\t\treturn UA.includes('bitrixmobile');\n\t},\n\tisBitrixDesktop(): boolean\n\t{\n\t\treturn DesktopApi.isDesktop();\n\t},\n\tgetDesktopVersion(): number\n\t{\n\t\treturn DesktopApi.getApiVersion();\n\t},\n\tisDesktopFeatureEnabled(code: string): boolean\n\t{\n\t\treturn DesktopApi.isFeatureEnabled(code);\n\t},\n\tisMobile(): boolean\n\t{\n\t\treturn this.isAndroid() || this.isIos() || this.isBitrixMobile();\n\t},\n\tisIos(): boolean\n\t{\n\t\treturn Browser.isIOS();\n\t},\n\tgetIosVersion(): ?string\n\t{\n\t\tif (!this.isIos())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst matches = UA.match(/(iphone|ipad)(.+)(OS\\s([0-9]+)([_.]([0-9]+))?)/i);\n\t\tif (!matches || !matches[4])\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn parseFloat(matches[4]+'.'+(matches[6]? matches[6]: 0));\n\t},\n\tisAndroid(): boolean\n\t{\n\t\treturn Browser.isAndroid();\n\t},\n\topenNewPage(url): boolean\n\t{\n\t\tif (!url)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.isBitrixMobile())\n\t\t{\n\t\t\tconst MobileTools = window.BX.MobileTools;\n\t\t\tif (Type.isUndefined())\n\t\t\t{\n\t\t\t\tconst openWidget = MobileTools.resolveOpenFunction(url);\n\t\t\t\tif (openWidget)\n\t\t\t\t{\n\t\t\t\t\topenWidget();\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t\twindow.app.openNewPage(url);\n\n\t\t\treturn true;\n\t\t}\n\n\t\twindow.open(url, '_blank');\n\n\t\treturn true;\n\t}\n};","import {Type} from 'main.core';\nimport {PlatformUtil} from './platform';\n\nexport const RestUtil = {\n\n\tgetLogTrackingParams(params = {}): string\n\t{\n\t\tconst result = [];\n\n\t\tlet {\n\t\t\tname = 'tracking',\n\t\t\tdata = [],\n\t\t} = params;\n\n\t\tconst {\n\t\t\tdialog = null,\n\t\t\tmessage = null,\n\t\t\tfiles = null,\n\t\t} = params;\n\n\t\tname = encodeURIComponent(name);\n\n\t\tif (Type.isPlainObject(data))\n\t\t{\n\t\t\tconst dataArray = [];\n\t\t\tfor (const name in data)\n\t\t\t{\n\t\t\t\tif (data.hasOwnProperty(name))\n\t\t\t\t{\n\t\t\t\t\tdataArray.push(encodeURIComponent(name)+\"=\"+encodeURIComponent(data[name]));\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata = dataArray;\n\t\t}\n\t\telse if (!Type.isArray(data))\n\t\t{\n\t\t\tdata = [];\n\t\t}\n\n\t\tif (Type.isObjectLike(dialog))\n\t\t{\n\t\t\tresult.push('timType='+dialog.type);\n\n\t\t\tif (dialog.type === 'lines')\n\t\t\t{\n\t\t\t\tresult.push('timLinesType='+dialog.entityId.split('|')[0]);\n\t\t\t}\n\t\t}\n\n\t\tif (!Type.isNull(files))\n\t\t{\n\t\t\tlet type = 'file';\n\t\t\tif (Type.isArray(files) && files[0])\n\t\t\t{\n\t\t\t\ttype = files[0].type;\n\t\t\t}\n\t\t\telse if (Type.isObjectLike(files))\n\t\t\t{\n\t\t\t\ttype = files.type;\n\t\t\t}\n\t\t\tresult.push('timMessageType='+type);\n\t\t}\n\t\telse if (!Type.isNull(message))\n\t\t{\n\t\t\tresult.push('timMessageType=text');\n\t\t}\n\n\t\tif (PlatformUtil.isBitrixMobile())\n\t\t{\n\t\t\tresult.push('timDevice=bitrixMobile');\n\t\t}\n\t\telse if (PlatformUtil.isBitrixDesktop())\n\t\t{\n\t\t\tresult.push('timDevice=bitrixDesktop');\n\t\t}\n\t\telse if (PlatformUtil.isIos() || PlatformUtil.isAndroid())\n\t\t{\n\t\t\tresult.push('timDevice=mobile');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult.push('timDevice=web');\n\t\t}\n\n\t\treturn name + (data.length? '&'+data.join('&'): '') + (result.length? '&'+result.join('&'): '');\n\t},\n};\n","/**\n * emoji-test-regex-pattern v15.1\n * (c) Copyright Mathias Bynens <https://mathiasbynens.be/>\n * @license MIT\n *\n * @source: https://github.com/mathiasbynens/emoji-test-regex-pattern/blob/main/dist/emoji-15.1/javascript.txt\n */\n/**\n * Modify list for integration with Bitrix Framework:\n * - changed fie extension from txt to js\n * - added exported const emojiRegex with original content.\n * - added flag g to regular expression.\n */\n\nexport const emojiRegex = /[#*0-9]\\uFE0F?\\u20E3|[\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u23CF\\u23ED-\\u23EF\\u23F1\\u23F2\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB\\u25FC\\u25FE\\u2600-\\u2604\\u260E\\u2611\\u2614\\u2615\\u2618\\u2620\\u2622\\u2623\\u2626\\u262A\\u262E\\u262F\\u2638-\\u263A\\u2640\\u2642\\u2648-\\u2653\\u265F\\u2660\\u2663\\u2665\\u2666\\u2668\\u267B\\u267E\\u267F\\u2692\\u2694-\\u2697\\u2699\\u269B\\u269C\\u26A0\\u26A7\\u26AA\\u26B0\\u26B1\\u26BD\\u26BE\\u26C4\\u26C8\\u26CF\\u26D1\\u26E9\\u26F0-\\u26F5\\u26F7\\u26F8\\u26FA\\u2702\\u2708\\u2709\\u270F\\u2712\\u2714\\u2716\\u271D\\u2721\\u2733\\u2734\\u2744\\u2747\\u2757\\u2763\\u27A1\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B55\\u3030\\u303D\\u3297\\u3299]\\uFE0F?|[\\u261D\\u270C\\u270D](?:\\uFE0F|\\uD83C[\\uDFFB-\\uDFFF])?|[\\u270A\\u270B](?:\\uD83C[\\uDFFB-\\uDFFF])?|[\\u23E9-\\u23EC\\u23F0\\u23F3\\u25FD\\u2693\\u26A1\\u26AB\\u26C5\\u26CE\\u26D4\\u26EA\\u26FD\\u2705\\u2728\\u274C\\u274E\\u2753-\\u2755\\u2795-\\u2797\\u27B0\\u27BF\\u2B50]|\\u26D3\\uFE0F?(?:\\u200D\\uD83D\\uDCA5)?|\\u26F9(?:\\uFE0F|\\uD83C[\\uDFFB-\\uDFFF])?(?:\\u200D[\\u2640\\u2642]\\uFE0F?)?|\\u2764\\uFE0F?(?:\\u200D(?:\\uD83D\\uDD25|\\uD83E\\uDE79))?|\\uD83C(?:[\\uDC04\\uDD70\\uDD71\\uDD7E\\uDD7F\\uDE02\\uDE37\\uDF21\\uDF24-\\uDF2C\\uDF36\\uDF7D\\uDF96\\uDF97\\uDF99-\\uDF9B\\uDF9E\\uDF9F\\uDFCD\\uDFCE\\uDFD4-\\uDFDF\\uDFF5\\uDFF7]\\uFE0F?|[\\uDF85\\uDFC2\\uDFC7](?:\\uD83C[\\uDFFB-\\uDFFF])?|[\\uDFC4\\uDFCA](?:\\uD83C[\\uDFFB-\\uDFFF])?(?:\\u200D[\\u2640\\u2642]\\uFE0F?)?|[\\uDFCB\\uDFCC](?:\\uFE0F|\\uD83C[\\uDFFB-\\uDFFF])?(?:\\u200D[\\u2640\\u2642]\\uFE0F?)?|[\\uDCCF\\uDD8E\\uDD91-\\uDD9A\\uDE01\\uDE1A\\uDE2F\\uDE32-\\uDE36\\uDE38-\\uDE3A\\uDE50\\uDE51\\uDF00-\\uDF20\\uDF2D-\\uDF35\\uDF37-\\uDF43\\uDF45-\\uDF4A\\uDF4C-\\uDF7C\\uDF7E-\\uDF84\\uDF86-\\uDF93\\uDFA0-\\uDFC1\\uDFC5\\uDFC6\\uDFC8\\uDFC9\\uDFCF-\\uDFD3\\uDFE0-\\uDFF0\\uDFF8-\\uDFFF]|\\uDDE6\\uD83C[\\uDDE8-\\uDDEC\\uDDEE\\uDDF1\\uDDF2\\uDDF4\\uDDF6-\\uDDFA\\uDDFC\\uDDFD\\uDDFF]|\\uDDE7\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEF\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9\\uDDFB\\uDDFC\\uDDFE\\uDDFF]|\\uDDE8\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDEE\\uDDF0-\\uDDF5\\uDDF7\\uDDFA-\\uDDFF]|\\uDDE9\\uD83C[\\uDDEA\\uDDEC\\uDDEF\\uDDF0\\uDDF2\\uDDF4\\uDDFF]|\\uDDEA\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDED\\uDDF7-\\uDDFA]|\\uDDEB\\uD83C[\\uDDEE-\\uDDF0\\uDDF2\\uDDF4\\uDDF7]|\\uDDEC\\uD83C[\\uDDE6\\uDDE7\\uDDE9-\\uDDEE\\uDDF1-\\uDDF3\\uDDF5-\\uDDFA\\uDDFC\\uDDFE]|\\uDDED\\uD83C[\\uDDF0\\uDDF2\\uDDF3\\uDDF7\\uDDF9\\uDDFA]|\\uDDEE\\uD83C[\\uDDE8-\\uDDEA\\uDDF1-\\uDDF4\\uDDF6-\\uDDF9]|\\uDDEF\\uD83C[\\uDDEA\\uDDF2\\uDDF4\\uDDF5]|\\uDDF0\\uD83C[\\uDDEA\\uDDEC-\\uDDEE\\uDDF2\\uDDF3\\uDDF5\\uDDF7\\uDDFC\\uDDFE\\uDDFF]|\\uDDF1\\uD83C[\\uDDE6-\\uDDE8\\uDDEE\\uDDF0\\uDDF7-\\uDDFB\\uDDFE]|\\uDDF2\\uD83C[\\uDDE6\\uDDE8-\\uDDED\\uDDF0-\\uDDFF]|\\uDDF3\\uD83C[\\uDDE6\\uDDE8\\uDDEA-\\uDDEC\\uDDEE\\uDDF1\\uDDF4\\uDDF5\\uDDF7\\uDDFA\\uDDFF]|\\uDDF4\\uD83C\\uDDF2|\\uDDF5\\uD83C[\\uDDE6\\uDDEA-\\uDDED\\uDDF0-\\uDDF3\\uDDF7-\\uDDF9\\uDDFC\\uDDFE]|\\uDDF6\\uD83C\\uDDE6|\\uDDF7\\uD83C[\\uDDEA\\uDDF4\\uDDF8\\uDDFA\\uDDFC]|\\uDDF8\\uD83C[\\uDDE6-\\uDDEA\\uDDEC-\\uDDF4\\uDDF7-\\uDDF9\\uDDFB\\uDDFD-\\uDDFF]|\\uDDF9\\uD83C[\\uDDE6\\uDDE8\\uDDE9\\uDDEB-\\uDDED\\uDDEF-\\uDDF4\\uDDF7\\uDDF9\\uDDFB\\uDDFC\\uDDFF]|\\uDDFA\\uD83C[\\uDDE6\\uDDEC\\uDDF2\\uDDF3\\uDDF8\\uDDFE\\uDDFF]|\\uDDFB\\uD83C[\\uDDE6\\uDDE8\\uDDEA\\uDDEC\\uDDEE\\uDDF3\\uDDFA]|\\uDDFC\\uD83C[\\uDDEB\\uDDF8]|\\uDDFD\\uD83C\\uDDF0|\\uDDFE\\uD83C[\\uDDEA\\uDDF9]|\\uDDFF\\uD83C[\\uDDE6\\uDDF2\\uDDFC]|\\uDF44(?:\\u200D\\uD83D\\uDFEB)?|\\uDF4B(?:\\u200D\\uD83D\\uDFE9)?|\\uDFC3(?:\\uD83C[\\uDFFB-\\uDFFF])?(?:\\u200D(?:[\\u2640\\u2642]\\uFE0F?(?:\\u200D\\u27A1\\uFE0F?)?|\\u27A1\\uFE0F?))?|\\uDFF3\\uFE0F?(?:\\u200D(?:\\u26A7\\uFE0F?|\\uD83C\\uDF08))?|\\uDFF4(?:\\u200D\\u2620\\uFE0F?|\\uDB40\\uDC67\\uDB40\\uDC62\\uDB40(?:\\uDC65\\uDB40\\uDC6E\\uDB40\\uDC67|\\uDC73\\uDB40\\uDC63\\uDB40\\uDC74|\\uDC77\\uDB40\\uDC6C\\uDB40\\uDC73)\\uDB40\\uDC7F)?)|\\uD83D(?:[\\uDC3F\\uDCFD\\uDD49\\uDD4A\\uDD6F\\uDD70\\uDD73\\uDD76-\\uDD79\\uDD87\\uDD8A-\\uDD8D\\uDDA5\\uDDA8\\uDDB1\\uDDB2\\uDDBC\\uDDC2-\\uDDC4\\uDDD1-\\uDDD3\\uDDDC-\\uDDDE\\uDDE1\\uDDE3\\uDDE8\\uDDEF\\uDDF3\\uDDFA\\uDECB\\uDECD-\\uDECF\\uDEE0-\\uDEE5\\uDEE9\\uDEF0\\uDEF3]\\uFE0F?|[\\uDC42\\uDC43\\uDC46-\\uDC50\\uDC66\\uDC67\\uDC6B-\\uDC6D\\uDC72\\uDC74-\\uDC76\\uDC78\\uDC7C\\uDC83\\uDC85\\uDC8F\\uDC91\\uDCAA\\uDD7A\\uDD95\\uDD96\\uDE4C\\uDE4F\\uDEC0\\uDECC](?:\\uD83C[\\uDFFB-\\uDFFF])?|[\\uDC6E\\uDC70\\uDC71\\uDC73\\uDC77\\uDC81\\uDC82\\uDC86\\uDC87\\uDE45-\\uDE47\\uDE4B\\uDE4D\\uDE4E\\uDEA3\\uDEB4\\uDEB5](?:\\uD83C[\\uDFFB-\\uDFFF])?(?:\\u200D[\\u2640\\u2642]\\uFE0F?)?|[\\uDD74\\uDD90](?:\\uFE0F|\\uD83C[\\uDFFB-\\uDFFF])?|[\\uDC00-\\uDC07\\uDC09-\\uDC14\\uDC16-\\uDC25\\uDC27-\\uDC3A\\uDC3C-\\uDC3E\\uDC40\\uDC44\\uDC45\\uDC51-\\uDC65\\uDC6A\\uDC79-\\uDC7B\\uDC7D-\\uDC80\\uDC84\\uDC88-\\uDC8E\\uDC90\\uDC92-\\uDCA9\\uDCAB-\\uDCFC\\uDCFF-\\uDD3D\\uDD4B-\\uDD4E\\uDD50-\\uDD67\\uDDA4\\uDDFB-\\uDE2D\\uDE2F-\\uDE34\\uDE37-\\uDE41\\uDE43\\uDE44\\uDE48-\\uDE4A\\uDE80-\\uDEA2\\uDEA4-\\uDEB3\\uDEB7-\\uDEBF\\uDEC1-\\uDEC5\\uDED0-\\uDED2\\uDED5-\\uDED7\\uDEDC-\\uDEDF\\uDEEB\\uDEEC\\uDEF4-\\uDEFC\\uDFE0-\\uDFEB\\uDFF0]|\\uDC08(?:\\u200D\\u2B1B)?|\\uDC15(?:\\u200D\\uD83E\\uDDBA)?|\\uDC26(?:\\u200D(?:\\u2B1B|\\uD83D\\uDD25))?|\\uDC3B(?:\\u200D\\u2744\\uFE0F?)?|\\uDC41\\uFE0F?(?:\\u200D\\uD83D\\uDDE8\\uFE0F?)?|\\uDC68(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D\\uD83D(?:\\uDC8B\\u200D\\uD83D)?\\uDC68|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D(?:[\\uDC68\\uDC69]\\u200D\\uD83D(?:\\uDC66(?:\\u200D\\uD83D\\uDC66)?|\\uDC67(?:\\u200D\\uD83D[\\uDC66\\uDC67])?)|[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uDC66(?:\\u200D\\uD83D\\uDC66)?|\\uDC67(?:\\u200D\\uD83D[\\uDC66\\uDC67])?)|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]))|\\uD83C(?:\\uDFFB(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D\\uD83D(?:\\uDC8B\\u200D\\uD83D)?\\uDC68\\uD83C[\\uDFFB-\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83D\\uDC68\\uD83C[\\uDFFC-\\uDFFF])))?|\\uDFFC(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D\\uD83D(?:\\uDC8B\\u200D\\uD83D)?\\uDC68\\uD83C[\\uDFFB-\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83D\\uDC68\\uD83C[\\uDFFB\\uDFFD-\\uDFFF])))?|\\uDFFD(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D\\uD83D(?:\\uDC8B\\u200D\\uD83D)?\\uDC68\\uD83C[\\uDFFB-\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83D\\uDC68\\uD83C[\\uDFFB\\uDFFC\\uDFFE\\uDFFF])))?|\\uDFFE(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D\\uD83D(?:\\uDC8B\\u200D\\uD83D)?\\uDC68\\uD83C[\\uDFFB-\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83D\\uDC68\\uD83C[\\uDFFB-\\uDFFD\\uDFFF])))?|\\uDFFF(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D\\uD83D(?:\\uDC8B\\u200D\\uD83D)?\\uDC68\\uD83C[\\uDFFB-\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83D\\uDC68\\uD83C[\\uDFFB-\\uDFFE])))?))?|\\uDC69(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D\\uD83D(?:\\uDC8B\\u200D\\uD83D)?[\\uDC68\\uDC69]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D(?:[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uDC66(?:\\u200D\\uD83D\\uDC66)?|\\uDC67(?:\\u200D\\uD83D[\\uDC66\\uDC67])?|\\uDC69\\u200D\\uD83D(?:\\uDC66(?:\\u200D\\uD83D\\uDC66)?|\\uDC67(?:\\u200D\\uD83D[\\uDC66\\uDC67])?))|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]))|\\uD83C(?:\\uDFFB(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D\\uD83D(?:[\\uDC68\\uDC69]|\\uDC8B\\u200D\\uD83D[\\uDC68\\uDC69])\\uD83C[\\uDFFB-\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83D[\\uDC68\\uDC69]\\uD83C[\\uDFFC-\\uDFFF])))?|\\uDFFC(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D\\uD83D(?:[\\uDC68\\uDC69]|\\uDC8B\\u200D\\uD83D[\\uDC68\\uDC69])\\uD83C[\\uDFFB-\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83D[\\uDC68\\uDC69]\\uD83C[\\uDFFB\\uDFFD-\\uDFFF])))?|\\uDFFD(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D\\uD83D(?:[\\uDC68\\uDC69]|\\uDC8B\\u200D\\uD83D[\\uDC68\\uDC69])\\uD83C[\\uDFFB-\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83D[\\uDC68\\uDC69]\\uD83C[\\uDFFB\\uDFFC\\uDFFE\\uDFFF])))?|\\uDFFE(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D\\uD83D(?:[\\uDC68\\uDC69]|\\uDC8B\\u200D\\uD83D[\\uDC68\\uDC69])\\uD83C[\\uDFFB-\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83D[\\uDC68\\uDC69]\\uD83C[\\uDFFB-\\uDFFD\\uDFFF])))?|\\uDFFF(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D\\uD83D(?:[\\uDC68\\uDC69]|\\uDC8B\\u200D\\uD83D[\\uDC68\\uDC69])\\uD83C[\\uDFFB-\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83D[\\uDC68\\uDC69]\\uD83C[\\uDFFB-\\uDFFE])))?))?|\\uDC6F(?:\\u200D[\\u2640\\u2642]\\uFE0F?)?|\\uDD75(?:\\uFE0F|\\uD83C[\\uDFFB-\\uDFFF])?(?:\\u200D[\\u2640\\u2642]\\uFE0F?)?|\\uDE2E(?:\\u200D\\uD83D\\uDCA8)?|\\uDE35(?:\\u200D\\uD83D\\uDCAB)?|\\uDE36(?:\\u200D\\uD83C\\uDF2B\\uFE0F?)?|\\uDE42(?:\\u200D[\\u2194\\u2195]\\uFE0F?)?|\\uDEB6(?:\\uD83C[\\uDFFB-\\uDFFF])?(?:\\u200D(?:[\\u2640\\u2642]\\uFE0F?(?:\\u200D\\u27A1\\uFE0F?)?|\\u27A1\\uFE0F?))?)|\\uD83E(?:[\\uDD0C\\uDD0F\\uDD18-\\uDD1F\\uDD30-\\uDD34\\uDD36\\uDD77\\uDDB5\\uDDB6\\uDDBB\\uDDD2\\uDDD3\\uDDD5\\uDEC3-\\uDEC5\\uDEF0\\uDEF2-\\uDEF8](?:\\uD83C[\\uDFFB-\\uDFFF])?|[\\uDD26\\uDD35\\uDD37-\\uDD39\\uDD3D\\uDD3E\\uDDB8\\uDDB9\\uDDCD\\uDDCF\\uDDD4\\uDDD6-\\uDDDD](?:\\uD83C[\\uDFFB-\\uDFFF])?(?:\\u200D[\\u2640\\u2642]\\uFE0F?)?|[\\uDDDE\\uDDDF](?:\\u200D[\\u2640\\u2642]\\uFE0F?)?|[\\uDD0D\\uDD0E\\uDD10-\\uDD17\\uDD20-\\uDD25\\uDD27-\\uDD2F\\uDD3A\\uDD3F-\\uDD45\\uDD47-\\uDD76\\uDD78-\\uDDB4\\uDDB7\\uDDBA\\uDDBC-\\uDDCC\\uDDD0\\uDDE0-\\uDDFF\\uDE70-\\uDE7C\\uDE80-\\uDE88\\uDE90-\\uDEBD\\uDEBF-\\uDEC2\\uDECE-\\uDEDB\\uDEE0-\\uDEE8]|\\uDD3C(?:\\u200D[\\u2640\\u2642]\\uFE0F?|\\uD83C[\\uDFFB-\\uDFFF])?|\\uDDCE(?:\\uD83C[\\uDFFB-\\uDFFF])?(?:\\u200D(?:[\\u2640\\u2642]\\uFE0F?(?:\\u200D\\u27A1\\uFE0F?)?|\\u27A1\\uFE0F?))?|\\uDDD1(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF84\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83E\\uDDD1|\\uDDD1\\u200D\\uD83E\\uDDD2(?:\\u200D\\uD83E\\uDDD2)?|\\uDDD2(?:\\u200D\\uD83E\\uDDD2)?))|\\uD83C(?:\\uDFFB(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D(?:\\uD83D\\uDC8B\\u200D)?\\uD83E\\uDDD1\\uD83C[\\uDFFC-\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF84\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83E\\uDDD1\\uD83C[\\uDFFB-\\uDFFF])))?|\\uDFFC(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D(?:\\uD83D\\uDC8B\\u200D)?\\uD83E\\uDDD1\\uD83C[\\uDFFB\\uDFFD-\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF84\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83E\\uDDD1\\uD83C[\\uDFFB-\\uDFFF])))?|\\uDFFD(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D(?:\\uD83D\\uDC8B\\u200D)?\\uD83E\\uDDD1\\uD83C[\\uDFFB\\uDFFC\\uDFFE\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF84\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83E\\uDDD1\\uD83C[\\uDFFB-\\uDFFF])))?|\\uDFFE(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D(?:\\uD83D\\uDC8B\\u200D)?\\uD83E\\uDDD1\\uD83C[\\uDFFB-\\uDFFD\\uDFFF]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF84\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83E\\uDDD1\\uD83C[\\uDFFB-\\uDFFF])))?|\\uDFFF(?:\\u200D(?:[\\u2695\\u2696\\u2708]\\uFE0F?|\\u2764\\uFE0F?\\u200D(?:\\uD83D\\uDC8B\\u200D)?\\uD83E\\uDDD1\\uD83C[\\uDFFB-\\uDFFE]|\\uD83C[\\uDF3E\\uDF73\\uDF7C\\uDF84\\uDF93\\uDFA4\\uDFA8\\uDFEB\\uDFED]|\\uD83D[\\uDCBB\\uDCBC\\uDD27\\uDD2C\\uDE80\\uDE92]|\\uD83E(?:[\\uDDAF\\uDDBC\\uDDBD](?:\\u200D\\u27A1\\uFE0F?)?|[\\uDDB0-\\uDDB3]|\\uDD1D\\u200D\\uD83E\\uDDD1\\uD83C[\\uDFFB-\\uDFFF])))?))?|\\uDEF1(?:\\uD83C(?:\\uDFFB(?:\\u200D\\uD83E\\uDEF2\\uD83C[\\uDFFC-\\uDFFF])?|\\uDFFC(?:\\u200D\\uD83E\\uDEF2\\uD83C[\\uDFFB\\uDFFD-\\uDFFF])?|\\uDFFD(?:\\u200D\\uD83E\\uDEF2\\uD83C[\\uDFFB\\uDFFC\\uDFFE\\uDFFF])?|\\uDFFE(?:\\u200D\\uD83E\\uDEF2\\uD83C[\\uDFFB-\\uDFFD\\uDFFF])?|\\uDFFF(?:\\u200D\\uD83E\\uDEF2\\uD83C[\\uDFFB-\\uDFFE])?))?)/g;\n","import {Type, Loc, Text, Dom} from 'main.core';\n\nimport { emojiRegex } from './emoji-regex';\n\nexport const TextUtil = {\n\n\tconvertHtmlEntities(text: string): string\n\t{\n\t\treturn Dom.create({\n\t\t\ttag: 'span',\n\t\t\thtml: text\n\t\t}).innerText;\n\t},\n\n\tconvertSnakeToCamelCase(text: string): string\n\t{\n\t\treturn text.replace(/(_[a-z])/gi, ($1) => {\n\t\t\treturn $1.toUpperCase().replace('_', '');\n\t\t});\n\t},\n\n\tescapeRegex(string): string\n\t{\n\t\treturn string.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, '\\\\$&');\n\t},\n\n\tgetLocalizeForNumber(phrase, number, language = 'en'): string\n\t{\n\t\tlet pluralFormType = 1;\n\n\t\tnumber = parseInt(number);\n\n\t\tif (number < 0)\n\t\t{\n\t\t\tnumber = number * -1;\n\t\t}\n\n\t\tif (language)\n\t\t{\n\t\t\tswitch (language)\n\t\t\t{\n\t\t\t\tcase 'de':\n\t\t\t\tcase 'en':\n\t\t\t\t\tpluralFormType = ((number !== 1) ? 1 : 0);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'ru':\n\t\t\t\tcase 'ua':\n\t\t\t\t\tpluralFormType = (((number%10 === 1) && (number%100 !== 11)) ? 0 : (((number%10 >= 2) && (number%10 <= 4) && ((number%100 < 10) || (number%100 >= 20))) ? 1 : 2));\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn Loc.getMessage(phrase + '_PLURAL_' + pluralFormType);\n\t},\n\n\tgetFirstLetters(text): string\n\t{\n\t\tconst validSymbolsPattern = /[\\p{L}\\p{N} ]/u;\n\n\t\tconst words = text.split(/[\\s,]/).filter(word => {\n\t\t\tconst firstLetter = word.charAt(0);\n\t\t\treturn validSymbolsPattern.test(firstLetter);\n\t\t});\n\n\t\tif (words.length === 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tif (words.length > 1)\n\t\t{\n\t\t\treturn words[0].charAt(0) + words[1].charAt(0);\n\t\t}\n\n\t\treturn words[0].charAt(0);\n\t},\n\n\tinsertUnseenWhitespace(text: string, splitIndex: number): string\n\t{\n\t\tif (text.length <= splitIndex)\n\t\t{\n\t\t\treturn text;\n\t\t}\n\n\t\tconst UNSEEN_SPACE = '\\u200B';\n\n\t\tlet firstPart = text.slice(0, splitIndex + 1);\n\t\tconst secondPart = text.slice(splitIndex + 1);\n\t\tconst hasWhitespace = /\\s/.test(firstPart);\n\t\tconst hasUserCode = /\\[user=(\\d+)(\\s)?(replace)?](.*?)\\[\\/user]/gi.test(text);\n\n\t\tif (firstPart.length === splitIndex + 1 && !hasWhitespace && !hasUserCode)\n\t\t{\n\t\t\tfirstPart += UNSEEN_SPACE;\n\t\t}\n\n\t\treturn firstPart + secondPart;\n\t},\n\n\tgetUuidV4(): string\n\t{\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n\t\t\tvar r = Math.random() * 16 | 0, v = c == 'x' ? r : (r & 0x3 | 0x8);\n\n\t\t\treturn v.toString(16);\n\t\t});\n\t},\n\n\tisUuidV4(uuid): boolean\n\t{\n\t\tif (!Type.isString(uuid))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst uuidV4pattern = new RegExp(/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i);\n\n\t\treturn uuid.search(uuidV4pattern) === 0;\n\t},\n\n\tisTempMessage(messageId): boolean\n\t{\n\t\treturn this.isUuidV4(messageId) || messageId.toString().startsWith('temp');\n\t},\n\n\tcheckUrl(url): boolean\n\t{\n\t\tconst allowList = [\n\t\t\t\"http:\",\n\t\t\t\"https:\",\n\t\t\t\"ftp:\",\n\t\t\t\"file:\",\n\t\t\t\"tel:\",\n\t\t\t\"callto:\",\n\t\t\t\"mailto:\",\n\t\t\t\"skype:\",\n\t\t\t\"viber:\",\n\t\t];\n\n\t\tconst checkCorrectStartLink = ['/', ...allowList].find(protocol => {\n\t\t\treturn url.startsWith(protocol);\n\t\t});\n\t\tif (!checkCorrectStartLink)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst element = Dom.create({ tag: 'a', attrs: { href: url }});\n\n\t\treturn allowList.indexOf(element.protocol) > -1;\n\t},\n\n\tisEmojiOnly(messageText: string): boolean\n\t{\n\t\tconst text = messageText.replaceAll(emojiRegex, '');\n\n\t\treturn text.replaceAll(/\\s/g, '').length === 0;\n\t},\n\n\t/**\n\t * @deprecated\n\t * @use Text.encode from main.core\n\t */\n\thtmlspecialchars(text): string\n\t{\n\t\treturn Text.encode(text);\n\t},\n\n\t/**\n\t * @deprecated\n\t * @use Text.decode from main.core\n\t */\n\thtmlspecialcharsback(text): string\n\t{\n\t\treturn Text.decode(text);\n\t},\n\n\tgetWordsFromString(string: string): string[]\n\t{\n\t\tconst clearedString = string\n\t\t\t.replaceAll('(', ' ')\n\t\t\t.replaceAll(')', ' ')\n\t\t\t.replaceAll('[', ' ')\n\t\t\t.replaceAll(']', ' ')\n\t\t\t.replaceAll('{', ' ')\n\t\t\t.replaceAll('}', ' ')\n\t\t\t.replaceAll('<', ' ')\n\t\t\t.replaceAll('>', ' ')\n\t\t\t.replaceAll('-', ' ')\n\t\t\t.replaceAll('#', ' ')\n\t\t\t.replaceAll('\"', ' ')\n\t\t\t.replaceAll('\\'', ' ')\n\t\t\t.replaceAll(/\\s\\s+/g, ' ')\n\t\t;\n\n\t\treturn clearedString.split(' ').filter((word) => word !== '');\n\t},\n\n\tgetMentionBbCode(dialogId: number | string, name: string): string\n\t{\n\t\tif (Type.isString(dialogId) && dialogId.startsWith('chat'))\n\t\t{\n\t\t\treturn `[CHAT=${dialogId.slice(4)}]${name}[/CHAT]`;\n\t\t}\n\n\t\treturn `[USER=${dialogId}]${name}[/USER]`;\n\t},\n};\n","import {Extension, Type, Loc} from 'main.core';\nimport {DateTimeFormat} from 'main.date';\n\nimport {DateFormatter, DateCode} from 'im.v2.lib.date-formatter';\n\nconst settings = Extension.getSettings('im.v2.lib.utils');\n\nexport const UserUtil = {\n\n\tgetLastDateText(params = {}): string\n\t{\n\t\tif (params.bot || params.network || !params.lastActivityDate)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst isOnline = this.isOnline(params.lastActivityDate);\n\t\tconst isMobileOnline = this.isMobileOnline(params.lastActivityDate, params.mobileLastDate);\n\n\t\tlet text = '';\n\t\tconst lastSeenText = this.getLastSeenText(params.lastActivityDate);\n\n\t\t// \"away for X minutes\"\n\t\tif (isOnline && params.idle && !isMobileOnline)\n\t\t{\n\t\t\ttext = Loc.getMessage('IM_STATUS_AWAY_TITLE').replace('#TIME#', this.getIdleText(params.idle));\n\t\t}\n\t\t// truly online, last activity date < 5 minutes ago - show status text\n\t\telse if (isOnline && !lastSeenText)\n\t\t{\n\t\t\ttext = this.getStatusTextForLastDate(params.status);\n\t\t}\n\t\t// last activity date > 5 minutes ago - \"Was online X minutes ago\"\n\t\telse if (lastSeenText)\n\t\t{\n\t\t\tconst phraseCode = `IM_LAST_SEEN_${params.gender}`;\n\t\t\ttext = Loc.getMessage(phraseCode).replace('#POSITION#. ', '').replace('#LAST_SEEN#', lastSeenText);\n\t\t}\n\n\t\t// if on vacation - add postfix with vacation info\n\t\tif (params.absent)\n\t\t{\n\t\t\tconst vacationText = Loc.getMessage('IM_STATUS_VACATION_TITLE').replace('#DATE#',\n\t\t\t\tDateFormatter.formatByCode(params.absent.getTime() / 1000, DateCode.shortDateFormat)\n\t\t\t);\n\n\t\t\ttext = text ? `${text}. ${vacationText}`: vacationText;\n\t\t}\n\n\t\treturn text;\n\t},\n\n\tgetIdleText(idle = '')\n\t{\n\t\tif (!idle)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn DateTimeFormat.format([\n\t\t\t['s60', 'sdiff'],\n\t\t\t['i60', 'idiff'],\n\t\t\t['H24', 'Hdiff'],\n\t\t\t['', 'ddiff']\n\t\t], idle);\n\t},\n\n\tisOnline(lastActivityDate): boolean\n\t{\n\t\tif (!lastActivityDate)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\treturn Date.now() - lastActivityDate.getTime() <= this.getOnlineLimit() * 1000;\n\t},\n\n\tisMobileOnline(lastActivityDate, mobileLastDate): boolean\n\t{\n\t\tif (!lastActivityDate || !mobileLastDate)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst FIVE_MINUTES = 5 * 60 * 1000;\n\t\treturn (\n\t\t\tDate.now() - mobileLastDate.getTime() < this.getOnlineLimit() * 1000\n\t\t\t&& lastActivityDate - mobileLastDate < FIVE_MINUTES\n\t\t);\n\t},\n\n\tgetStatusTextForLastDate(status: string): string\n\t{\n\t\tstatus = status.toUpperCase();\n\t\treturn Loc.getMessage(`IM_STATUS_${status}`) ?? status;\n\t},\n\n\tgetStatusText(status: string): string\n\t{\n\t\tstatus = status.toUpperCase();\n\t\treturn Loc.getMessage(`IM_STATUS_TEXT_${status}`) ?? status;\n\t},\n\n\tgetLastSeenText(lastActivityDate): string\n\t{\n\t\tif (!lastActivityDate)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst FIVE_MINUTES = 5 * 60 * 1000;\n\t\tif (Date.now() - lastActivityDate.getTime() > FIVE_MINUTES)\n\t\t{\n\t\t\treturn DateTimeFormat.formatLastActivityDate(lastActivityDate);\n\t\t}\n\n\t\treturn '';\n\t},\n\n\tisBirthdayToday(birthday): boolean\n\t{\n\t\treturn birthday === DateTimeFormat.format('d-m', new Date());\n\t},\n\n\tgetOnlineLimit(): number\n\t{\n\t\tconst limitOnline = settings.get('limitOnline', false);\n\n\t\tconst FIFTEEN_MINUTES = 15 * 60;\n\t\treturn limitOnline? Number.parseInt(limitOnline, 10): FIFTEEN_MINUTES;\n\t},\n\n\tgetProfileLink(userId: number | string): string\n\t{\n\t\tif (Type.isString(userId))\n\t\t{\n\t\t\tuserId = Number.parseInt(userId, 10);\n\t\t}\n\n\t\treturn `/company/personal/user/${userId}/`;\n\t},\n\n\tgetCalendarLink(userId: number | string): string\n\t{\n\t\tif (Type.isString(userId))\n\t\t{\n\t\t\tuserId = Number.parseInt(userId, 10);\n\t\t}\n\n\t\tconst path = Extension.getSettings('im.v2.lib.utils').get('pathToUserCalendar');\n\n\t\treturn path.replace('#user_id#', userId);\n\t},\n};\n","import { Text, Loc, Dom, Event } from 'main.core';\nimport { FileType } from 'im.v2.const';\n\nexport const FileUtil = {\n\tgetFileExtension(fileName: string): string\n\t{\n\t\treturn fileName.split('.').splice(-1)[0];\n\t},\n\n\tgetIconTypeByFilename(fileName: string): string\n\t{\n\t\tconst extension = this.getFileExtension(fileName);\n\n\t\treturn this.getIconTypeByExtension(extension);\n\t},\n\n\tgetIconTypeByExtension(extension: string): string\n\t{\n\t\tlet icon = 'empty';\n\n\t\tswitch (extension.toString())\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\tcase 'webp':\n\t\t\t\ticon = 'img';\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\ticon = 'mov';\n\t\t\t\tbreak;\n\n\t\t\tcase 'txt':\n\t\t\t\ticon = 'txt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'doc':\n\t\t\tcase 'docx':\n\t\t\t\ticon = 'doc';\n\t\t\t\tbreak;\n\n\t\t\tcase 'xls':\n\t\t\tcase 'xlsx':\n\t\t\t\ticon = 'xls';\n\t\t\t\tbreak;\n\n\t\t\tcase 'php':\n\t\t\t\ticon = 'php';\n\t\t\t\tbreak;\n\n\t\t\tcase 'pdf':\n\t\t\t\ticon = 'pdf';\n\t\t\t\tbreak;\n\n\t\t\tcase 'ppt':\n\t\t\tcase 'pptx':\n\t\t\t\ticon = 'ppt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'rar':\n\t\t\t\ticon = 'rar';\n\t\t\t\tbreak;\n\n\t\t\tcase 'zip':\n\t\t\tcase '7z':\n\t\t\tcase 'tar':\n\t\t\tcase 'gz':\n\t\t\tcase 'gzip':\n\t\t\t\ticon = 'zip';\n\t\t\t\tbreak;\n\n\t\t\tcase 'set':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\n\t\t\tcase 'conf':\n\t\t\tcase 'ini':\n\t\t\tcase 'plist':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ticon = 'empty';\n\t\t}\n\n\t\treturn icon;\n\t},\n\n\tgetFileTypeByExtension(extension: string): string\n\t{\n\t\tlet type = FileType.file;\n\t\tconst normalizedExtension = extension.toLowerCase();\n\n\t\tswitch (normalizedExtension)\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\tcase 'webp':\n\t\t\t\ttype = FileType.image;\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\ttype = FileType.video;\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp3':\n\t\t\t\ttype = FileType.audio;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttype = FileType.file;\n\t\t}\n\n\t\treturn type;\n\t},\n\n\tformatFileSize(fileSize: number): string\n\t{\n\t\tlet resultFileSize = fileSize;\n\n\t\tif (!resultFileSize || resultFileSize <= 0)\n\t\t{\n\t\t\tresultFileSize = 0;\n\t\t}\n\n\t\tconst sizes = ['BYTE', 'KB', 'MB', 'GB', 'TB'];\n\t\tconst KILOBYTE_SIZE = 1024;\n\n\t\tlet position = 0;\n\t\twhile (resultFileSize >= KILOBYTE_SIZE && position < sizes.length - 1)\n\t\t{\n\t\t\tresultFileSize /= KILOBYTE_SIZE;\n\t\t\tposition++;\n\t\t}\n\n\t\tconst phrase = Loc.getMessage(`IM_UTILS_FILE_SIZE_${sizes[position]}`);\n\t\tconst roundedSize = Math.round(resultFileSize);\n\n\t\treturn `${roundedSize} ${phrase}`;\n\t},\n\n\tgetShortFileName(fileName: string, maxLength: number): string\n\t{\n\t\tif (!fileName || fileName.length < maxLength)\n\t\t{\n\t\t\treturn fileName;\n\t\t}\n\n\t\tconst DELIMITER = '...';\n\t\tconst DOT_LENGTH = 1;\n\t\tconst SYMBOLS_TO_TAKE_BEFORE_EXTENSION = 2;\n\n\t\tconst extension = this.getFileExtension(fileName);\n\t\tconst extensionLength = extension.length + DOT_LENGTH;\n\t\tconst fileNameWithoutExtension = fileName.slice(0, -extensionLength);\n\n\t\tif (fileNameWithoutExtension.length <= maxLength)\n\t\t{\n\t\t\treturn fileName;\n\t\t}\n\n\t\tconst availableLength = maxLength - SYMBOLS_TO_TAKE_BEFORE_EXTENSION - DELIMITER.length;\n\t\tif (availableLength <= 0)\n\t\t{\n\t\t\treturn fileName;\n\t\t}\n\n\t\tconst firstPart = fileNameWithoutExtension.slice(0, availableLength).trim();\n\t\tconst secondPart = fileNameWithoutExtension.slice(-SYMBOLS_TO_TAKE_BEFORE_EXTENSION).trim();\n\n\t\treturn `${firstPart}${DELIMITER}${secondPart}.${extension}`;\n\t},\n\n\tgetViewerDataAttributes(viewerAttributes): Object\n\t{\n\t\tif (!viewerAttributes)\n\t\t{\n\t\t\treturn {};\n\t\t}\n\n\t\tconst dataAttributes = {\n\t\t\t'data-viewer': true,\n\t\t};\n\n\t\tObject.entries(viewerAttributes).forEach(([key, value]) => {\n\t\t\tdataAttributes[`data-${Text.toKebabCase(key)}`] = value;\n\t\t});\n\n\t\treturn dataAttributes;\n\t},\n\n\tcreateDownloadLink(text: string, urlDownload: string, fileName: string): HTMLAnchorElement\n\t{\n\t\tconst anchorTag = Dom.create('a', { text });\n\n\t\tDom.style(anchorTag, 'display', 'block');\n\t\tDom.style(anchorTag, 'color', 'inherit');\n\t\tDom.style(anchorTag, 'text-decoration', 'inherit');\n\n\t\tanchorTag.setAttribute('href', urlDownload);\n\t\tanchorTag.setAttribute('download', fileName);\n\n\t\treturn anchorTag;\n\t},\n\n\tisImage(fileName: string): boolean\n\t{\n\t\tconst extension = FileUtil.getFileExtension(fileName);\n\t\tconst fileType = FileUtil.getFileTypeByExtension(extension);\n\n\t\treturn fileType === FileType.image;\n\t},\n\n\tgetBase64(file: File): Promise<string>\n\t{\n\t\tconst reader = new FileReader();\n\n\t\treturn new Promise((resolve) => {\n\t\t\tEvent.bind(reader, 'load', () => {\n\t\t\t\tconst fullBase64 = reader.result;\n\t\t\t\tconst commaPosition = fullBase64.indexOf(',');\n\t\t\t\tconst cutBase64 = fullBase64.slice(commaPosition + 1);\n\t\t\t\tresolve(cutBase64);\n\t\t\t});\n\n\t\t\treader.readAsDataURL(file);\n\t\t});\n\t},\n};\n","import { Type } from 'main.core';\n\nimport { PlatformUtil } from '../platform';\n\nconst LETTER_CODE_PREFIX = 'Key';\nconst DIGIT_CODE_PREFIX = 'Digit';\n\nconst CTRL = 'Ctrl';\nconst ALT = 'Alt';\nconst SHIFT = 'Shift';\nconst MODIFIERS = new Set([CTRL, ALT, SHIFT]);\n\nexport class KeyChecker\n{\n\t#event: KeyboardEvent | PointerEvent;\n\n\tconstructor(event: KeyboardEvent | PointerEvent)\n\t{\n\t\tthis.#event = event;\n\t}\n\n\tisCmdOrCtrl(): boolean\n\t{\n\t\tif (PlatformUtil.isMac())\n\t\t{\n\t\t\treturn this.#event.metaKey;\n\t\t}\n\n\t\tif (PlatformUtil.isLinux() || PlatformUtil.isWindows())\n\t\t{\n\t\t\treturn this.#event.ctrlKey;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tisShift(): boolean\n\t{\n\t\treturn this.#event.shiftKey;\n\t}\n\n\tisAltOrOption(): boolean\n\t{\n\t\treturn this.#event.altKey;\n\t}\n\n\tisCombination(rawCombination: string | string[]): boolean\n\t{\n\t\tconst combinationList = this.#prepareCombination(rawCombination);\n\n\t\treturn combinationList.some((combination: string) => {\n\t\t\treturn this.#checkCombination(combination);\n\t\t});\n\t}\n\n\tisExactCombination(rawCombination: string | string[]): boolean\n\t{\n\t\tconst combinationList = this.#prepareCombination(rawCombination);\n\n\t\treturn combinationList.some((combination: string) => {\n\t\t\treturn this.#checkCombination(combination, true);\n\t\t});\n\t}\n\n\t#prepareCombination(combination: string | string[]): string[]\n\t{\n\t\tif (Array.isArray(combination))\n\t\t{\n\t\t\treturn combination;\n\t\t}\n\n\t\tif (Type.isStringFilled(combination))\n\t\t{\n\t\t\treturn [combination];\n\t\t}\n\n\t\treturn [];\n\t}\n\n\t#checkCombination(combination: string, exact: boolean = false): boolean\n\t{\n\t\tif (!this.#checkModifiers(combination, exact))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst keyCodes = this.#splitCombinationIntoKeyCodes(combination);\n\n\t\tlet result = true;\n\t\tkeyCodes.forEach((keyCode) => {\n\t\t\tif (keyCode !== this.#event.code)\n\t\t\t{\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t});\n\n\t\treturn result;\n\t}\n\n\t#checkModifiers(combination: string, exact: boolean = false): boolean\n\t{\n\t\tlet result = true;\n\t\tif (\n\t\t\t!this.#checkShift(combination, exact)\n\t\t\t|| !this.#checkAlt(combination, exact)\n\t\t\t|| !this.#checkCtrl(combination, exact)\n\t\t)\n\t\t{\n\t\t\tresult = false;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#checkShift(combination: string, exact: boolean = false): boolean\n\t{\n\t\tlet result = true;\n\t\tconst missingShift = combination.includes(SHIFT) && !this.#event.shiftKey;\n\t\tconst excessShift = exact && !combination.includes(SHIFT) && this.#event.shiftKey;\n\t\tif (missingShift || excessShift)\n\t\t{\n\t\t\tresult = false;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#checkAlt(combination: string, exact: boolean = false): boolean\n\t{\n\t\tlet result = true;\n\t\tconst missingAlt = combination.includes(ALT) && !this.#event.altKey;\n\t\tconst excessAlt = exact && !combination.includes(ALT) && this.#event.altKey;\n\t\tif (missingAlt || excessAlt)\n\t\t{\n\t\t\tresult = false;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#checkCtrl(combination: string, exact: boolean = false): boolean\n\t{\n\t\tlet result = true;\n\t\tconst missingCtrl = combination.includes(CTRL) && !this.isCmdOrCtrl();\n\t\tconst excessCtrl = exact && !combination.includes(CTRL) && this.isCmdOrCtrl();\n\t\tif (missingCtrl || excessCtrl)\n\t\t{\n\t\t\tresult = false;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t#splitCombinationIntoKeyCodes(combination: string): string[]\n\t{\n\t\tconst split = combination.split('+');\n\t\tconst withoutModifiers = split.filter((key) => {\n\t\t\treturn !MODIFIERS.has(key);\n\t\t});\n\n\t\treturn withoutModifiers.map((key) => {\n\t\t\tconst singleLetterRegexp = /^[A-Za-z]$/;\n\t\t\tconst singleDigitRegexp = /^\\d$/;\n\t\t\tif (singleLetterRegexp.test(key))\n\t\t\t{\n\t\t\t\treturn `${LETTER_CODE_PREFIX}${key.toUpperCase()}`;\n\t\t\t}\n\n\t\t\tif (singleDigitRegexp.test(key))\n\t\t\t{\n\t\t\t\treturn `${DIGIT_CODE_PREFIX}${key}`;\n\t\t\t}\n\n\t\t\treturn key;\n\t\t});\n\t}\n}\n","import { KeyChecker } from './classes/key-checker';\n\nexport const KeyUtil = {\n\tisCmdOrCtrl(event: PointerEvent | KeyboardEvent): boolean\n\t{\n\t\treturn (new KeyChecker(event)).isCmdOrCtrl();\n\t},\n\n\tisShift(event: PointerEvent | KeyboardEvent): boolean\n\t{\n\t\treturn (new KeyChecker(event)).isShift();\n\t},\n\n\tisAltOrOption(event: PointerEvent | KeyboardEvent): boolean\n\t{\n\t\treturn (new KeyChecker(event)).isAltOrOption();\n\t},\n\n\tisCombination(event: KeyboardEvent, rawCombinationList: string | string[]): boolean\n\t{\n\t\treturn (new KeyChecker(event)).isCombination(rawCombinationList);\n\t},\n\n\tisExactCombination(event: KeyboardEvent, rawCombinationList: string | string[]): boolean\n\t{\n\t\treturn (new KeyChecker(event)).isExactCombination(rawCombinationList);\n\t},\n};\n","import {Dom} from 'main.core';\n\nexport const DomUtil = {\n\trecursiveBackwardNodeSearch(node, className, maxNodeLevel = 10)\n\t{\n\t\twhile (maxNodeLevel > 0)\n\t\t{\n\t\t\tif (Dom.hasClass(node, className))\n\t\t\t{\n\t\t\t\treturn node;\n\t\t\t}\n\n\t\t\tif (!node || !node.parentNode)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tnode = node.parentNode;\n\n\t\t\tmaxNodeLevel--;\n\t\t}\n\n\t\treturn null;\n\t}\n};\n\n","export const DialogUtil = {\n\tisDialogId(dialogId)\n\t{\n\t\treturn /^(chat\\d+)$|^\\d+$/i.test(dialogId);\n\t},\n\n\tisExternalId(dialogId: string): boolean\n\t{\n\t\treturn this.isGroupExternalId(dialogId) || this.isCrmExternalId(dialogId);\n\t},\n\n\tisGroupExternalId(dialogId: string): boolean\n\t{\n\t\tconst GROUP_PREFIX = 'sg';\n\n\t\treturn dialogId.startsWith(GROUP_PREFIX);\n\t},\n\n\tisCrmExternalId(dialogId: string): boolean\n\t{\n\t\tconst CRM_PREFIX = 'crm|';\n\n\t\treturn dialogId.startsWith(CRM_PREFIX);\n\t},\n\n\tisLinesExternalId(dialogId): boolean\n\t{\n\t\tconst LINES_PREFIX = 'imol|';\n\n\t\treturn dialogId.toString().startsWith(LINES_PREFIX) && !this.isLinesHistoryId(dialogId);\n\t},\n\n\tisLinesHistoryId(dialogId): boolean\n\t{\n\t\treturn /^imol\\|\\d+$/.test(dialogId);\n\t},\n};\n","import { Type } from 'main.core';\nexport const ConferenceUtil = {\n\tisValidUrl(url: string): boolean\n\t{\n\t\treturn /^(https|http):\\/\\/(.*)\\/video\\/([\\d.a-z-]+)/i.test(url);\n\t},\n\n\tisValidCode(code: string): boolean\n\t{\n\t\treturn /^([\\d.a-z-]+)$/i.test(code);\n\t},\n\n\tisCurrentPortal(url: string): boolean\n\t{\n\t\tif (!Type.isStringFilled(url))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst result = url.match(/^(https|http):\\/\\/(.*)\\/video\\/([\\d.a-z-]+)/i);\n\t\tif (!result)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst host = result[2];\n\n\t\treturn host.includes(location.host);\n\t},\n\n\tgetCodeFromUrl(url: string): ?string\n\t{\n\t\tif (!Type.isStringFilled(url))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst result = url.match(/^(https|http):\\/\\/(.*)\\/video\\/([\\d.a-z-]+)/i);\n\t\tif (!result)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst code = result[3];\n\t\tif (!Type.isStringFilled(code))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn code;\n\t},\n\n\tgetUrlByCode(code: string): ?string\n\t{\n\t\tif (!this.isValidCode(code))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst origin = location.origin.replace('http://', 'https://');\n\n\t\treturn `${origin}/video/${code}`;\n\t},\n\n\tgetCodeByOptions(options: { code?: string, link?: string } = {}): ?string\n\t{\n\t\tif (Type.isStringFilled(options.link) && this.isValidUrl(options.link))\n\t\t{\n\t\t\treturn this.getCodeFromUrl(options.link);\n\t\t}\n\n\t\tif (Type.isStringFilled(options.code) && this.isValidCode(options.code))\n\t\t{\n\t\t\treturn options.code;\n\t\t}\n\n\t\treturn null;\n\t},\n\n\tgetWindowNameByCode(code): ?string\n\t{\n\t\tif (!this.isValidCode(code))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn `im-conference-${code}`;\n\t},\n};\n","export const CallUtil = {\n\tisNumber(text): boolean\n\t{\n\t\treturn /^([\\d #()+./-]+)$/.test(text);\n\t},\n};\n","import { BrowserUtil } from './browser';\nimport { DateUtil } from './date';\nimport { DeviceUtil } from './device';\nimport { PlatformUtil } from './platform';\nimport { RestUtil } from './rest';\nimport { TextUtil } from './text';\nimport { UserUtil } from './user';\nimport { FileUtil } from './file';\nimport { KeyUtil } from './key';\nimport { DomUtil } from './dom';\nimport { DialogUtil } from './dialog';\nimport { ConferenceUtil } from './conference';\nimport { CallUtil } from './call';\n\nexport const Utils = {\n\tbrowser: BrowserUtil,\n\tdate: DateUtil,\n\tdevice: DeviceUtil,\n\tplatform: PlatformUtil,\n\trest: RestUtil,\n\ttext: TextUtil,\n\tuser: UserUtil,\n\tfile: FileUtil,\n\tdom: DomUtil,\n\tkey: KeyUtil,\n\tdialog: DialogUtil,\n\tconference: ConferenceUtil,\n\tcall: CallUtil,\n};\n"],"names":["UA","navigator","userAgent","toLowerCase","BrowserUtil","isChrome","Browser","isFirefox","isIe","isIE","isSafari","includes","isSafariBased","findParent","item","findTag","isHtmlElement","HTMLElement","Type","isString","document","parentNode","Dom","hasClass","openLink","link","target","window","open","waitForSelectionToUpdate","Promise","resolve","setTimeout","DateUtil","cast","date","def","Date","result","isNumber","Number","isNaN","getTime","getTimeToNextMidnight","nextMidnight","setHours","now","getStartOfTheDay","isToday","toDateString","isSameDay","firstDate","secondDate","getFullYear","getMonth","getDate","DeviceUtil","isDesktop","isMobile","isUndefined","isMobileStatic","orientationHorizontal","orientationPortrait","getOrientation","Math","abs","orientation","PlatformUtil","isMac","isLinux","isWindows","isWin","isBitrixMobile","isBitrixDesktop","DesktopApi","getDesktopVersion","getApiVersion","isDesktopFeatureEnabled","code","isFeatureEnabled","isAndroid","isIos","isIOS","getIosVersion","matches","match","parseFloat","openNewPage","url","MobileTools","BX","openWidget","resolveOpenFunction","app","RestUtil","getLogTrackingParams","params","name","data","dialog","message","files","encodeURIComponent","isPlainObject","dataArray","hasOwnProperty","push","isArray","isObjectLike","type","entityId","split","isNull","length","join","emojiRegex","TextUtil","convertHtmlEntities","text","create","tag","html","innerText","convertSnakeToCamelCase","replace","$1","toUpperCase","escapeRegex","string","getLocalizeForNumber","phrase","number","language","pluralFormType","parseInt","Loc","getMessage","getFirstLetters","validSymbolsPattern","words","filter","word","firstLetter","charAt","test","insertUnseenWhitespace","splitIndex","UNSEEN_SPACE","firstPart","slice","secondPart","hasWhitespace","hasUserCode","getUuidV4","c","r","random","v","toString","isUuidV4","uuid","uuidV4pattern","RegExp","search","isTempMessage","messageId","startsWith","checkUrl","allowList","checkCorrectStartLink","find","protocol","element","attrs","href","indexOf","isEmojiOnly","messageText","replaceAll","htmlspecialchars","Text","encode","htmlspecialcharsback","decode","getWordsFromString","clearedString","getMentionBbCode","dialogId","settings","Extension","getSettings","UserUtil","getLastDateText","bot","network","lastActivityDate","isOnline","isMobileOnline","mobileLastDate","lastSeenText","getLastSeenText","idle","getIdleText","getStatusTextForLastDate","status","phraseCode","gender","absent","vacationText","DateFormatter","formatByCode","DateCode","shortDateFormat","DateTimeFormat","format","getOnlineLimit","FIVE_MINUTES","getStatusText","formatLastActivityDate","isBirthdayToday","birthday","limitOnline","get","FIFTEEN_MINUTES","getProfileLink","userId","getCalendarLink","path","FileUtil","getFileExtension","fileName","splice","getIconTypeByFilename","extension","getIconTypeByExtension","icon","getFileTypeByExtension","FileType","file","normalizedExtension","image","video","audio","formatFileSize","fileSize","resultFileSize","sizes","KILOBYTE_SIZE","position","roundedSize","round","getShortFileName","maxLength","DELIMITER","DOT_LENGTH","SYMBOLS_TO_TAKE_BEFORE_EXTENSION","extensionLength","fileNameWithoutExtension","availableLength","trim","getViewerDataAttributes","viewerAttributes","dataAttributes","Object","entries","forEach","key","value","toKebabCase","createDownloadLink","urlDownload","anchorTag","style","setAttribute","isImage","fileType","getBase64","reader","FileReader","Event","bind","fullBase64","commaPosition","cutBase64","readAsDataURL","LETTER_CODE_PREFIX","DIGIT_CODE_PREFIX","CTRL","ALT","SHIFT","MODIFIERS","Set","KeyChecker","constructor","event","isCmdOrCtrl","metaKey","ctrlKey","isShift","shiftKey","isAltOrOption","altKey","isCombination","rawCombination","combinationList","some","combination","isExactCombination","Array","isStringFilled","exact","keyCodes","keyCode","missingShift","excessShift","missingAlt","excessAlt","missingCtrl","excessCtrl","withoutModifiers","has","map","singleLetterRegexp","singleDigitRegexp","KeyUtil","rawCombinationList","DomUtil","recursiveBackwardNodeSearch","node","className","maxNodeLevel","DialogUtil","isDialogId","isExternalId","isGroupExternalId","isCrmExternalId","GROUP_PREFIX","CRM_PREFIX","isLinesExternalId","LINES_PREFIX","isLinesHistoryId","ConferenceUtil","isValidUrl","isValidCode","isCurrentPortal","host","location","getCodeFromUrl","getUrlByCode","origin","getCodeByOptions","options","getWindowNameByCode","CallUtil","Utils","browser","device","platform","rest","user","dom","conference","call"],"mappings":";;;;;;;CAEA,MAAMA,EAAE,GAAGC,SAAS,CAACC,SAAS,CAACC,WAAW,EAAE;AAE5C,CAAO,MAAMC,WAAW,GAAG;GAE1BC,QAAQ,GACR;KACC,OAAOC,iBAAO,CAACD,QAAQ,EAAE;IACzB;GAEDE,SAAS,GACT;KACC,OAAOD,iBAAO,CAACC,SAAS,EAAE;IAC1B;GAEDC,IAAI,GACJ;KACC,OAAOF,iBAAO,CAACG,IAAI,EAAE;IACrB;GAEDC,QAAQ,GACR;KACC,IAAI,IAAI,CAACL,QAAQ,EAAE,EACnB;OACC,OAAO,KAAK;;KAGb,IAAI,CAACL,EAAE,CAACW,QAAQ,CAAC,QAAQ,CAAC,EAC1B;OACC,OAAO,KAAK;;KAGb,OAAO,CAAC,IAAI,CAACC,aAAa,EAAE;IAC5B;GAEDA,aAAa,GACb;KACC,IAAI,CAACZ,EAAE,CAACW,QAAQ,CAAC,aAAa,CAAC,EAC/B;OACC,OAAO,KAAK;;KAGb,OACCX,EAAE,CAACW,QAAQ,CAAC,WAAW,CAAC,IACrBX,EAAE,CAACW,QAAQ,CAAC,mBAAmB,CAAC,IAChCX,EAAE,CAACW,QAAQ,CAAC,OAAO,CAAC;IAExB;GAEDE,UAAU,CAACC,IAAI,EAAEC,OAAO,EACxB;KACC,MAAMC,aAAa,GAAGD,OAAO,YAAYE,WAAW;KAEpD,IACC,CAACF,OAAO,IACJ,CAACG,cAAI,CAACC,QAAQ,CAACJ,OAAO,CAAC,IAAI,CAACC,aAAc,EAE/C;OACC,OAAO,IAAI;;KAGZ,OAAOF,IAAI,IAAIA,IAAI,KAAKM,QAAQ,EAAEN,IAAI,GAAGA,IAAI,CAACO,UAAU,EACxD;OACC,IAAIH,cAAI,CAACC,QAAQ,CAACJ,OAAO,CAAC,EAC1B;SACC,IAAIO,aAAG,CAACC,QAAQ,CAACR,OAAO,CAAC,EACzB;WACC,OAAOD,IAAI;;QAEZ,MACI,IAAIE,aAAa,IAAIF,IAAI,KAAKC,OAAO,EAC1C;SACC,OAAOD,IAAI;;;KAIb,OAAO,IAAI;IACX;GACDU,QAAQ,CAACC,IAAI,EAAEC,MAAM,GAAG,QAAQ,EAChC;KACCC,MAAM,CAACC,IAAI,CAACH,IAAI,EAAEC,MAAM,EAAE,EAAE,EAAE,IAAI,CAAC;IACnC;GACDG,wBAAwB,GACxB;KACC,OAAO,IAAIC,OAAO,CAAEC,OAAO,IAAK;OAC/BC,UAAU,CAAC,MAAM;SAChBD,OAAO,EAAE;QACT,EAAE,CAAC,CAAC;MACL,CAAC;;CAEJ,CAAC;;CCzFM,MAAME,QAAQ,GAAG;GACvBC,IAAI,CAACC,IAAI,EAAEC,GAAG,GAAG,IAAIC,IAAI,EAAE,EAC3B;KACC,IAAIC,MAAM,GAAGF,GAAG;KAEhB,IAAID,IAAI,YAAYE,IAAI,EACxB;OACCC,MAAM,GAAGH,IAAI;MACb,MACI,IAAIjB,cAAI,CAACC,QAAQ,CAACgB,IAAI,CAAC,EAC5B;OACCG,MAAM,GAAG,IAAID,IAAI,CAACF,IAAI,CAAC;MACvB,MACI,IAAIjB,cAAI,CAACqB,QAAQ,CAACJ,IAAI,CAAC,EAC5B;OACCG,MAAM,GAAG,IAAID,IAAI,CAACF,IAAI,GAAC,IAAI,CAAC;;KAG7B,IACCG,MAAM,YAAYD,IAAI,IACnBG,MAAM,CAACC,KAAK,CAACH,MAAM,CAACI,OAAO,EAAE,CAAC,EAElC;OACCJ,MAAM,GAAGF,GAAG;;KAGb,OAAOE,MAAM;IACb;GAEDK,qBAAqB,GACrB;KACC,MAAMC,YAAY,GAAG,IAAIP,IAAI,CAAC,IAAIA,IAAI,EAAE,CAACQ,QAAQ,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC,CAACH,OAAO,EAAE;KACtE,OAAOE,YAAY,GAAGP,IAAI,CAACS,GAAG,EAAE;IAChC;GAEDC,gBAAgB,GAChB;KACC,OAAO,IAAIV,IAAI,CAAE,IAAIA,IAAI,EAAE,CAAEQ,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAC5C;GAEDG,OAAO,CAACb,IAAI,EACZ;KACC,OAAO,IAAI,CAACD,IAAI,CAACC,IAAI,CAAC,CAACc,YAAY,EAAE,KAAM,IAAIZ,IAAI,EAAE,CAAEY,YAAY,EAAE;IACrE;GAEDC,SAAS,CAACC,SAAe,EAAEC,UAAgB,EAC3C;KACC,OAAOD,SAAS,CAACE,WAAW,EAAE,KAAKD,UAAU,CAACC,WAAW,EAAE,IACvDF,SAAS,CAACG,QAAQ,EAAE,KAAKF,UAAU,CAACE,QAAQ,EAAE,IAC9CH,SAAS,CAACI,OAAO,EAAE,KAAKH,UAAU,CAACG,OAAO,EAAE;;CAElD,CAAC;;CCnDD,MAAMvD,IAAE,GAAGC,SAAS,CAACC,SAAS,CAACC,WAAW,EAAE;AAE5C,CAAO,MAAMqD,UAAU,GAAG;GAEzBC,SAAS,GACT;KACC,OAAO,CAAC,IAAI,CAACC,QAAQ,EAAE;IACvB;GAEDA,QAAQ,GACR;KACC,IAAI,CAACxC,cAAI,CAACyC,WAAW,CAAC,IAAI,CAACC,cAAc,CAAC,EAC1C;OACC,OAAO,IAAI,CAACA,cAAc;;KAG3B,IAAI,CAACA,cAAc,GAClB5D,IAAE,CAACW,QAAQ,CAAC,SAAS,CAAC,IACnBX,IAAE,CAACW,QAAQ,CAAC,OAAO,CAAC,IACpBX,IAAE,CAACW,QAAQ,CAAC,QAAQ,CAAC,IACrBX,IAAE,CAACW,QAAQ,CAAC,MAAM,CAAC,IACnBX,IAAE,CAACW,QAAQ,CAAC,MAAM,CAAC,IACnBX,IAAE,CAACW,QAAQ,CAAC,YAAY,CAAC,IACzBX,IAAE,CAACW,QAAQ,CAAC,eAAe,CAC9B;KAED,OAAO,IAAI,CAACiD,cAAc;IAC1B;GAEDC,qBAAqB,EAAE,YAAY;GACnCC,mBAAmB,EAAE,UAAU;GAE/BC,cAAc,GACd;KACC,IAAI,CAAC,IAAI,CAACL,QAAQ,EAAE,EACpB;OACC,OAAO,IAAI,CAACG,qBAAqB;;KAGlC,OAAOG,IAAI,CAACC,GAAG,CAACtC,MAAM,CAACuC,WAAW,CAAC,KAAK,CAAC,GAAE,IAAI,CAACJ,mBAAmB,GAAE,IAAI,CAACD,qBAAqB;;CAGjG,CAAC;;CCxCD,MAAM7D,IAAE,GAAGC,SAAS,CAACC,SAAS,CAACC,WAAW,EAAE;AAE5C,CAAO,MAAMgE,YAAY,GAAG;GAE3BC,KAAK,GACL;KACC,OAAO9D,iBAAO,CAAC8D,KAAK,EAAE;IACtB;GACDC,OAAO,GACP;KACC,OAAO/D,iBAAO,CAAC+D,OAAO,EAAE;IACxB;GACDC,SAAS,GACT;KACC,OAAOhE,iBAAO,CAACiE,KAAK,EAAE,IAAK,CAAC,IAAI,CAACH,KAAK,EAAE,IAAI,CAAC,IAAI,CAACC,OAAO,EAAG;IAC5D;GACDG,cAAc,GACd;KACC,OAAOxE,IAAE,CAACW,QAAQ,CAAC,cAAc,CAAC;IAClC;GACD8D,eAAe,GACf;KACC,OAAOC,+BAAU,CAACjB,SAAS,EAAE;IAC7B;GACDkB,iBAAiB,GACjB;KACC,OAAOD,+BAAU,CAACE,aAAa,EAAE;IACjC;GACDC,uBAAuB,CAACC,IAAY,EACpC;KACC,OAAOJ,+BAAU,CAACK,gBAAgB,CAACD,IAAI,CAAC;IACxC;GACDpB,QAAQ,GACR;KACC,OAAO,IAAI,CAACsB,SAAS,EAAE,IAAI,IAAI,CAACC,KAAK,EAAE,IAAI,IAAI,CAACT,cAAc,EAAE;IAChE;GACDS,KAAK,GACL;KACC,OAAO3E,iBAAO,CAAC4E,KAAK,EAAE;IACtB;GACDC,aAAa,GACb;KACC,IAAI,CAAC,IAAI,CAACF,KAAK,EAAE,EACjB;OACC,OAAO,IAAI;;KAGZ,MAAMG,OAAO,GAAGpF,IAAE,CAACqF,KAAK,CAAC,iDAAiD,CAAC;KAC3E,IAAI,CAACD,OAAO,IAAI,CAACA,OAAO,CAAC,CAAC,CAAC,EAC3B;OACC,OAAO,IAAI;;KAGZ,OAAOE,UAAU,CAACF,OAAO,CAAC,CAAC,CAAC,GAAC,GAAG,IAAEA,OAAO,CAAC,CAAC,CAAC,GAAEA,OAAO,CAAC,CAAC,CAAC,GAAE,CAAC,CAAC,CAAC;IAC7D;GACDJ,SAAS,GACT;KACC,OAAO1E,iBAAO,CAAC0E,SAAS,EAAE;IAC1B;GACDO,WAAW,CAACC,GAAG,EACf;KACC,IAAI,CAACA,GAAG,EACR;OACC,OAAO,KAAK;;KAGb,IAAI,IAAI,CAAChB,cAAc,EAAE,EACzB;OACC,MAAMiB,WAAW,GAAG9D,MAAM,CAAC+D,EAAE,CAACD,WAAW;OACzC,IAAIvE,cAAI,CAACyC,WAAW,EAAE,EACtB;SACC,MAAMgC,UAAU,GAAGF,WAAW,CAACG,mBAAmB,CAACJ,GAAG,CAAC;SACvD,IAAIG,UAAU,EACd;WACCA,UAAU,EAAE;WACZ,OAAO,IAAI;;;OAGbhE,MAAM,CAACkE,GAAG,CAACN,WAAW,CAACC,GAAG,CAAC;OAE3B,OAAO,IAAI;;KAGZ7D,MAAM,CAACC,IAAI,CAAC4D,GAAG,EAAE,QAAQ,CAAC;KAE1B,OAAO,IAAI;;CAEb,CAAC;;CCxFM,MAAMM,QAAQ,GAAG;GAEvBC,oBAAoB,CAACC,MAAM,GAAG,EAAE,EAChC;KACC,MAAM1D,MAAM,GAAG,EAAE;KAEjB,IAAI;OACH2D,IAAI,GAAG,UAAU;OACjBC,IAAI,GAAG;MACP,GAAGF,MAAM;KAEV,MAAM;OACLG,MAAM,GAAG,IAAI;OACbC,OAAO,GAAG,IAAI;OACdC,KAAK,GAAG;MACR,GAAGL,MAAM;KAEVC,IAAI,GAAGK,kBAAkB,CAACL,IAAI,CAAC;KAE/B,IAAI/E,cAAI,CAACqF,aAAa,CAACL,IAAI,CAAC,EAC5B;OACC,MAAMM,SAAS,GAAG,EAAE;OACpB,KAAK,MAAMP,IAAI,IAAIC,IAAI,EACvB;SACC,IAAIA,IAAI,CAACO,cAAc,CAACR,IAAI,CAAC,EAC7B;WACCO,SAAS,CAACE,IAAI,CAACJ,kBAAkB,CAACL,IAAI,CAAC,GAAC,GAAG,GAACK,kBAAkB,CAACJ,IAAI,CAACD,IAAI,CAAC,CAAC,CAAC;;;OAG7EC,IAAI,GAAGM,SAAS;MAChB,MACI,IAAI,CAACtF,cAAI,CAACyF,OAAO,CAACT,IAAI,CAAC,EAC5B;OACCA,IAAI,GAAG,EAAE;;KAGV,IAAIhF,cAAI,CAAC0F,YAAY,CAACT,MAAM,CAAC,EAC7B;OACC7D,MAAM,CAACoE,IAAI,CAAC,UAAU,GAACP,MAAM,CAACU,IAAI,CAAC;OAEnC,IAAIV,MAAM,CAACU,IAAI,KAAK,OAAO,EAC3B;SACCvE,MAAM,CAACoE,IAAI,CAAC,eAAe,GAACP,MAAM,CAACW,QAAQ,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;;;KAI5D,IAAI,CAAC7F,cAAI,CAAC8F,MAAM,CAACX,KAAK,CAAC,EACvB;OACC,IAAIQ,IAAI,GAAG,MAAM;OACjB,IAAI3F,cAAI,CAACyF,OAAO,CAACN,KAAK,CAAC,IAAIA,KAAK,CAAC,CAAC,CAAC,EACnC;SACCQ,IAAI,GAAGR,KAAK,CAAC,CAAC,CAAC,CAACQ,IAAI;QACpB,MACI,IAAI3F,cAAI,CAAC0F,YAAY,CAACP,KAAK,CAAC,EACjC;SACCQ,IAAI,GAAGR,KAAK,CAACQ,IAAI;;OAElBvE,MAAM,CAACoE,IAAI,CAAC,iBAAiB,GAACG,IAAI,CAAC;MACnC,MACI,IAAI,CAAC3F,cAAI,CAAC8F,MAAM,CAACZ,OAAO,CAAC,EAC9B;OACC9D,MAAM,CAACoE,IAAI,CAAC,qBAAqB,CAAC;;KAGnC,IAAIvC,YAAY,CAACK,cAAc,EAAE,EACjC;OACClC,MAAM,CAACoE,IAAI,CAAC,wBAAwB,CAAC;MACrC,MACI,IAAIvC,YAAY,CAACM,eAAe,EAAE,EACvC;OACCnC,MAAM,CAACoE,IAAI,CAAC,yBAAyB,CAAC;MACtC,MACI,IAAIvC,YAAY,CAACc,KAAK,EAAE,IAAId,YAAY,CAACa,SAAS,EAAE,EACzD;OACC1C,MAAM,CAACoE,IAAI,CAAC,kBAAkB,CAAC;MAC/B,MAED;OACCpE,MAAM,CAACoE,IAAI,CAAC,eAAe,CAAC;;KAG7B,OAAOT,IAAI,IAAIC,IAAI,CAACe,MAAM,GAAE,GAAG,GAACf,IAAI,CAACgB,IAAI,CAAC,GAAG,CAAC,GAAE,EAAE,CAAC,IAAI5E,MAAM,CAAC2E,MAAM,GAAE,GAAG,GAAC3E,MAAM,CAAC4E,IAAI,CAAC,GAAG,CAAC,GAAE,EAAE,CAAC;;CAEjG,CAAC;;CCtFD;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;CACA;;AAEA,CAAO,MAAMC,UAAU,GAAG,uhZAAuhZ;;CCV1iZ,MAAMC,QAAQ,GAAG;GAEvBC,mBAAmB,CAACC,IAAY,EAChC;KACC,OAAOhG,aAAG,CAACiG,MAAM,CAAC;OACjBC,GAAG,EAAE,MAAM;OACXC,IAAI,EAAEH;MACN,CAAC,CAACI,SAAS;IACZ;GAEDC,uBAAuB,CAACL,IAAY,EACpC;KACC,OAAOA,IAAI,CAACM,OAAO,CAAC,YAAY,EAAGC,EAAE,IAAK;OACzC,OAAOA,EAAE,CAACC,WAAW,EAAE,CAACF,OAAO,CAAC,GAAG,EAAE,EAAE,CAAC;MACxC,CAAC;IACF;GAEDG,WAAW,CAACC,MAAM,EAClB;KACC,OAAOA,MAAM,CAACJ,OAAO,CAAC,wBAAwB,EAAE,MAAM,CAAC;IACvD;GAEDK,oBAAoB,CAACC,MAAM,EAAEC,MAAM,EAAEC,QAAQ,GAAG,IAAI,EACpD;KACC,IAAIC,cAAc,GAAG,CAAC;KAEtBF,MAAM,GAAGG,QAAQ,CAACH,MAAM,CAAC;KAEzB,IAAIA,MAAM,GAAG,CAAC,EACd;OACCA,MAAM,GAAGA,MAAM,GAAG,CAAC,CAAC;;KAGrB,IAAIC,QAAQ,EACZ;OACC,QAAQA,QAAQ;SAEf,KAAK,IAAI;SACT,KAAK,IAAI;WACRC,cAAc,GAAKF,MAAM,KAAK,CAAC,GAAI,CAAC,GAAG,CAAE;WACzC;SAED,KAAK,IAAI;SACT,KAAK,IAAI;WACRE,cAAc,GAAMF,MAAM,GAAC,EAAE,KAAK,CAAC,IAAMA,MAAM,GAAC,GAAG,KAAK,EAAG,GAAI,CAAC,GAAMA,MAAM,GAAC,EAAE,IAAI,CAAC,IAAMA,MAAM,GAAC,EAAE,IAAI,CAAE,KAAMA,MAAM,GAAC,GAAG,GAAG,EAAE,IAAMA,MAAM,GAAC,GAAG,IAAI,EAAG,CAAC,GAAI,CAAC,GAAG,CAAG;WACjK;;;KAIH,OAAOI,aAAG,CAACC,UAAU,CAACN,MAAM,GAAG,UAAU,GAAGG,cAAc,CAAC;IAC3D;GAEDI,eAAe,CAACnB,IAAI,EACpB;KACC,MAAMoB,mBAAmB,GAAG,gBAAgB;KAE5C,MAAMC,KAAK,GAAGrB,IAAI,CAACP,KAAK,CAAC,OAAO,CAAC,CAAC6B,MAAM,CAACC,IAAI,IAAI;OAChD,MAAMC,WAAW,GAAGD,IAAI,CAACE,MAAM,CAAC,CAAC,CAAC;OAClC,OAAOL,mBAAmB,CAACM,IAAI,CAACF,WAAW,CAAC;MAC5C,CAAC;KAEF,IAAIH,KAAK,CAAC1B,MAAM,KAAK,CAAC,EACtB;OACC,OAAO,EAAE;;KAGV,IAAI0B,KAAK,CAAC1B,MAAM,GAAG,CAAC,EACpB;OACC,OAAO0B,KAAK,CAAC,CAAC,CAAC,CAACI,MAAM,CAAC,CAAC,CAAC,GAAGJ,KAAK,CAAC,CAAC,CAAC,CAACI,MAAM,CAAC,CAAC,CAAC;;KAG/C,OAAOJ,KAAK,CAAC,CAAC,CAAC,CAACI,MAAM,CAAC,CAAC,CAAC;IACzB;GAEDE,sBAAsB,CAAC3B,IAAY,EAAE4B,UAAkB,EACvD;KACC,IAAI5B,IAAI,CAACL,MAAM,IAAIiC,UAAU,EAC7B;OACC,OAAO5B,IAAI;;KAGZ,MAAM6B,YAAY,GAAG,QAAQ;KAE7B,IAAIC,SAAS,GAAG9B,IAAI,CAAC+B,KAAK,CAAC,CAAC,EAAEH,UAAU,GAAG,CAAC,CAAC;KAC7C,MAAMI,UAAU,GAAGhC,IAAI,CAAC+B,KAAK,CAACH,UAAU,GAAG,CAAC,CAAC;KAC7C,MAAMK,aAAa,GAAG,IAAI,CAACP,IAAI,CAACI,SAAS,CAAC;KAC1C,MAAMI,WAAW,GAAG,8CAA8C,CAACR,IAAI,CAAC1B,IAAI,CAAC;KAE7E,IAAI8B,SAAS,CAACnC,MAAM,KAAKiC,UAAU,GAAG,CAAC,IAAI,CAACK,aAAa,IAAI,CAACC,WAAW,EACzE;OACCJ,SAAS,IAAID,YAAY;;KAG1B,OAAOC,SAAS,GAAGE,UAAU;IAC7B;GAEDG,SAAS,GACT;KACC,OAAO,sCAAsC,CAAC7B,OAAO,CAAC,OAAO,EAAG8B,CAAC,IAAK;OACrE,IAAIC,CAAC,GAAG3F,IAAI,CAAC4F,MAAM,EAAE,GAAG,EAAE,GAAG,CAAC;SAAEC,CAAC,GAAGH,CAAC,IAAI,GAAG,GAAGC,CAAC,GAAIA,CAAC,GAAG,GAAG,GAAG,GAAI;OAElE,OAAOE,CAAC,CAACC,QAAQ,CAAC,EAAE,CAAC;MACrB,CAAC;IACF;GAEDC,QAAQ,CAACC,IAAI,EACb;KACC,IAAI,CAAC9I,cAAI,CAACC,QAAQ,CAAC6I,IAAI,CAAC,EACxB;OACC,OAAO,KAAK;;KAGb,MAAMC,aAAa,GAAG,IAAIC,MAAM,CAAC,wEAAwE,CAAC;KAE1G,OAAOF,IAAI,CAACG,MAAM,CAACF,aAAa,CAAC,KAAK,CAAC;IACvC;GAEDG,aAAa,CAACC,SAAS,EACvB;KACC,OAAO,IAAI,CAACN,QAAQ,CAACM,SAAS,CAAC,IAAIA,SAAS,CAACP,QAAQ,EAAE,CAACQ,UAAU,CAAC,MAAM,CAAC;IAC1E;GAEDC,QAAQ,CAAC/E,GAAG,EACZ;KACC,MAAMgF,SAAS,GAAG,CACjB,OAAO,EACP,QAAQ,EACR,MAAM,EACN,OAAO,EACP,MAAM,EACN,SAAS,EACT,SAAS,EACT,QAAQ,EACR,QAAQ,CACR;KAED,MAAMC,qBAAqB,GAAG,CAAC,GAAG,EAAE,GAAGD,SAAS,CAAC,CAACE,IAAI,CAACC,QAAQ,IAAI;OAClE,OAAOnF,GAAG,CAAC8E,UAAU,CAACK,QAAQ,CAAC;MAC/B,CAAC;KACF,IAAI,CAACF,qBAAqB,EAC1B;OACC,OAAO,KAAK;;KAGb,MAAMG,OAAO,GAAGtJ,aAAG,CAACiG,MAAM,CAAC;OAAEC,GAAG,EAAE,GAAG;OAAEqD,KAAK,EAAE;SAAEC,IAAI,EAAEtF;;MAAM,CAAC;KAE7D,OAAOgF,SAAS,CAACO,OAAO,CAACH,OAAO,CAACD,QAAQ,CAAC,GAAG,CAAC,CAAC;IAC/C;GAEDK,WAAW,CAACC,WAAmB,EAC/B;KACC,MAAM3D,IAAI,GAAG2D,WAAW,CAACC,UAAU,CAAC/D,UAAU,EAAE,EAAE,CAAC;KAEnD,OAAOG,IAAI,CAAC4D,UAAU,CAAC,KAAK,EAAE,EAAE,CAAC,CAACjE,MAAM,KAAK,CAAC;IAC9C;;CAGF;CACA;CACA;GACCkE,gBAAgB,CAAC7D,IAAI,EACrB;KACC,OAAO8D,cAAI,CAACC,MAAM,CAAC/D,IAAI,CAAC;IACxB;;CAGF;CACA;CACA;GACCgE,oBAAoB,CAAChE,IAAI,EACzB;KACC,OAAO8D,cAAI,CAACG,MAAM,CAACjE,IAAI,CAAC;IACxB;GAEDkE,kBAAkB,CAACxD,MAAc,EACjC;KACC,MAAMyD,aAAa,GAAGzD,MAAM,CAC1BkD,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CACpBA,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CACpBA,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CACpBA,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CACpBA,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CACpBA,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CACpBA,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CACpBA,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CACpBA,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CACpBA,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CACpBA,UAAU,CAAC,GAAG,EAAE,GAAG,CAAC,CACpBA,UAAU,CAAC,IAAI,EAAE,GAAG,CAAC,CACrBA,UAAU,CAAC,QAAQ,EAAE,GAAG,CAAC;KAG3B,OAAOO,aAAa,CAAC1E,KAAK,CAAC,GAAG,CAAC,CAAC6B,MAAM,CAAEC,IAAI,IAAKA,IAAI,KAAK,EAAE,CAAC;IAC7D;GAED6C,gBAAgB,CAACC,QAAyB,EAAE1F,IAAY,EACxD;KACC,IAAI/E,cAAI,CAACC,QAAQ,CAACwK,QAAQ,CAAC,IAAIA,QAAQ,CAACrB,UAAU,CAAC,MAAM,CAAC,EAC1D;OACC,OAAQ,SAAQqB,QAAQ,CAACtC,KAAK,CAAC,CAAC,CAAE,IAAGpD,IAAK,SAAQ;;KAGnD,OAAQ,SAAQ0F,QAAS,IAAG1F,IAAK,SAAQ;;CAE3C,CAAC;;CC3MD,MAAM2F,QAAQ,GAAGC,mBAAS,CAACC,WAAW,CAAC,iBAAiB,CAAC;AAEzD,CAAO,MAAMC,QAAQ,GAAG;GAEvBC,eAAe,CAAChG,MAAM,GAAG,EAAE,EAC3B;KACC,IAAIA,MAAM,CAACiG,GAAG,IAAIjG,MAAM,CAACkG,OAAO,IAAI,CAAClG,MAAM,CAACmG,gBAAgB,EAC5D;OACC,OAAO,EAAE;;KAGV,MAAMC,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACpG,MAAM,CAACmG,gBAAgB,CAAC;KACvD,MAAME,cAAc,GAAG,IAAI,CAACA,cAAc,CAACrG,MAAM,CAACmG,gBAAgB,EAAEnG,MAAM,CAACsG,cAAc,CAAC;KAE1F,IAAIhF,IAAI,GAAG,EAAE;KACb,MAAMiF,YAAY,GAAG,IAAI,CAACC,eAAe,CAACxG,MAAM,CAACmG,gBAAgB,CAAC;;;KAGlE,IAAIC,QAAQ,IAAIpG,MAAM,CAACyG,IAAI,IAAI,CAACJ,cAAc,EAC9C;OACC/E,IAAI,GAAGiB,aAAG,CAACC,UAAU,CAAC,sBAAsB,CAAC,CAACZ,OAAO,CAAC,QAAQ,EAAE,IAAI,CAAC8E,WAAW,CAAC1G,MAAM,CAACyG,IAAI,CAAC,CAAC;;;UAG1F,IAAIL,QAAQ,IAAI,CAACG,YAAY,EAClC;OACCjF,IAAI,GAAG,IAAI,CAACqF,wBAAwB,CAAC3G,MAAM,CAAC4G,MAAM,CAAC;;;UAG/C,IAAIL,YAAY,EACrB;OACC,MAAMM,UAAU,GAAI,gBAAe7G,MAAM,CAAC8G,MAAO,EAAC;OAClDxF,IAAI,GAAGiB,aAAG,CAACC,UAAU,CAACqE,UAAU,CAAC,CAACjF,OAAO,CAAC,cAAc,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,aAAa,EAAE2E,YAAY,CAAC;;;;KAInG,IAAIvG,MAAM,CAAC+G,MAAM,EACjB;OACC,MAAMC,YAAY,GAAGzE,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC,CAACZ,OAAO,CAAC,QAAQ,EAC/EqF,qCAAa,CAACC,YAAY,CAAClH,MAAM,CAAC+G,MAAM,CAACrK,OAAO,EAAE,GAAG,IAAI,EAAEyK,gCAAQ,CAACC,eAAe,CAAC,CACpF;OAED9F,IAAI,GAAGA,IAAI,GAAI,GAAEA,IAAK,KAAI0F,YAAa,EAAC,GAAEA,YAAY;;KAGvD,OAAO1F,IAAI;IACX;GAEDoF,WAAW,CAACD,IAAI,GAAG,EAAE,EACrB;KACC,IAAI,CAACA,IAAI,EACT;OACC,OAAO,EAAE;;KAGV,OAAOY,wBAAc,CAACC,MAAM,CAAC,CAC5B,CAAC,KAAK,EAAE,OAAO,CAAC,EAChB,CAAC,KAAK,EAAE,OAAO,CAAC,EAChB,CAAC,KAAK,EAAE,OAAO,CAAC,EAChB,CAAC,EAAE,EAAE,OAAO,CAAC,CACb,EAAEb,IAAI,CAAC;IACR;GAEDL,QAAQ,CAACD,gBAAgB,EACzB;KACC,IAAI,CAACA,gBAAgB,EACrB;OACC,OAAO,KAAK;;KAGb,OAAO9J,IAAI,CAACS,GAAG,EAAE,GAAGqJ,gBAAgB,CAACzJ,OAAO,EAAE,IAAI,IAAI,CAAC6K,cAAc,EAAE,GAAG,IAAI;IAC9E;GAEDlB,cAAc,CAACF,gBAAgB,EAAEG,cAAc,EAC/C;KACC,IAAI,CAACH,gBAAgB,IAAI,CAACG,cAAc,EACxC;OACC,OAAO,KAAK;;KAGb,MAAMkB,YAAY,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI;KAClC,OACCnL,IAAI,CAACS,GAAG,EAAE,GAAGwJ,cAAc,CAAC5J,OAAO,EAAE,GAAG,IAAI,CAAC6K,cAAc,EAAE,GAAG,IAAI,IACjEpB,gBAAgB,GAAGG,cAAc,GAAGkB,YAAY;IAEpD;GAEDb,wBAAwB,CAACC,MAAc,EACvC;KAAA;KACCA,MAAM,GAAGA,MAAM,CAAC9E,WAAW,EAAE;KAC7B,0BAAOS,aAAG,CAACC,UAAU,CAAE,aAAYoE,MAAO,EAAC,CAAC,8BAAIA,MAAM;IACtD;GAEDa,aAAa,CAACb,MAAc,EAC5B;KAAA;KACCA,MAAM,GAAGA,MAAM,CAAC9E,WAAW,EAAE;KAC7B,2BAAOS,aAAG,CAACC,UAAU,CAAE,kBAAiBoE,MAAO,EAAC,CAAC,+BAAIA,MAAM;IAC3D;GAEDJ,eAAe,CAACL,gBAAgB,EAChC;KACC,IAAI,CAACA,gBAAgB,EACrB;OACC,OAAO,EAAE;;KAGV,MAAMqB,YAAY,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI;KAClC,IAAInL,IAAI,CAACS,GAAG,EAAE,GAAGqJ,gBAAgB,CAACzJ,OAAO,EAAE,GAAG8K,YAAY,EAC1D;OACC,OAAOH,wBAAc,CAACK,sBAAsB,CAACvB,gBAAgB,CAAC;;KAG/D,OAAO,EAAE;IACT;GAEDwB,eAAe,CAACC,QAAQ,EACxB;KACC,OAAOA,QAAQ,KAAKP,wBAAc,CAACC,MAAM,CAAC,KAAK,EAAE,IAAIjL,IAAI,EAAE,CAAC;IAC5D;GAEDkL,cAAc,GACd;KACC,MAAMM,WAAW,GAAGjC,QAAQ,CAACkC,GAAG,CAAC,aAAa,EAAE,KAAK,CAAC;KAEtD,MAAMC,eAAe,GAAG,EAAE,GAAG,EAAE;KAC/B,OAAOF,WAAW,GAAErL,MAAM,CAAC8F,QAAQ,CAACuF,WAAW,EAAE,EAAE,CAAC,GAAEE,eAAe;IACrE;GAEDC,cAAc,CAACC,MAAuB,EACtC;KACC,IAAI/M,cAAI,CAACC,QAAQ,CAAC8M,MAAM,CAAC,EACzB;OACCA,MAAM,GAAGzL,MAAM,CAAC8F,QAAQ,CAAC2F,MAAM,EAAE,EAAE,CAAC;;KAGrC,OAAQ,0BAAyBA,MAAO,GAAE;IAC1C;GAEDC,eAAe,CAACD,MAAuB,EACvC;KACC,IAAI/M,cAAI,CAACC,QAAQ,CAAC8M,MAAM,CAAC,EACzB;OACCA,MAAM,GAAGzL,MAAM,CAAC8F,QAAQ,CAAC2F,MAAM,EAAE,EAAE,CAAC;;KAGrC,MAAME,IAAI,GAAGtC,mBAAS,CAACC,WAAW,CAAC,iBAAiB,CAAC,CAACgC,GAAG,CAAC,oBAAoB,CAAC;KAE/E,OAAOK,IAAI,CAACvG,OAAO,CAAC,WAAW,EAAEqG,MAAM,CAAC;;CAE1C,CAAC;;CCtJM,MAAMG,QAAQ,GAAG;GACvBC,gBAAgB,CAACC,QAAgB,EACjC;KACC,OAAOA,QAAQ,CAACvH,KAAK,CAAC,GAAG,CAAC,CAACwH,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACxC;GAEDC,qBAAqB,CAACF,QAAgB,EACtC;KACC,MAAMG,SAAS,GAAG,IAAI,CAACJ,gBAAgB,CAACC,QAAQ,CAAC;KAEjD,OAAO,IAAI,CAACI,sBAAsB,CAACD,SAAS,CAAC;IAC7C;GAEDC,sBAAsB,CAACD,SAAiB,EACxC;KACC,IAAIE,IAAI,GAAG,OAAO;KAElB,QAAQF,SAAS,CAAC3E,QAAQ,EAAE;OAE3B,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,MAAM;OACX,KAAK,KAAK;OACV,KAAK,MAAM;OACX,KAAK,KAAK;OACV,KAAK,MAAM;SACV6E,IAAI,GAAG,KAAK;SACZ;OAED,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,MAAM;OACX,KAAK,MAAM;OACX,KAAK,MAAM;OACX,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,KAAK;SACTA,IAAI,GAAG,KAAK;SACZ;OAED,KAAK,KAAK;SACTA,IAAI,GAAG,KAAK;SACZ;OAED,KAAK,KAAK;OACV,KAAK,MAAM;SACVA,IAAI,GAAG,KAAK;SACZ;OAED,KAAK,KAAK;OACV,KAAK,MAAM;SACVA,IAAI,GAAG,KAAK;SACZ;OAED,KAAK,KAAK;SACTA,IAAI,GAAG,KAAK;SACZ;OAED,KAAK,KAAK;SACTA,IAAI,GAAG,KAAK;SACZ;OAED,KAAK,KAAK;OACV,KAAK,MAAM;SACVA,IAAI,GAAG,KAAK;SACZ;OAED,KAAK,KAAK;SACTA,IAAI,GAAG,KAAK;SACZ;OAED,KAAK,KAAK;OACV,KAAK,IAAI;OACT,KAAK,KAAK;OACV,KAAK,IAAI;OACT,KAAK,MAAM;SACVA,IAAI,GAAG,KAAK;SACZ;OAED,KAAK,KAAK;SACTA,IAAI,GAAG,KAAK;SACZ;OAED,KAAK,MAAM;OACX,KAAK,KAAK;OACV,KAAK,OAAO;SACXA,IAAI,GAAG,KAAK;SACZ;OACD;SACCA,IAAI,GAAG,OAAO;;KAGhB,OAAOA,IAAI;IACX;GAEDC,sBAAsB,CAACH,SAAiB,EACxC;KACC,IAAI5H,IAAI,GAAGgI,oBAAQ,CAACC,IAAI;KACxB,MAAMC,mBAAmB,GAAGN,SAAS,CAACtO,WAAW,EAAE;KAEnD,QAAQ4O,mBAAmB;OAE1B,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,MAAM;OACX,KAAK,KAAK;OACV,KAAK,MAAM;OACX,KAAK,KAAK;OACV,KAAK,MAAM;SACVlI,IAAI,GAAGgI,oBAAQ,CAACG,KAAK;SACrB;OAED,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,MAAM;OACX,KAAK,MAAM;OACX,KAAK,MAAM;OACX,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,KAAK;OACV,KAAK,KAAK;SACTnI,IAAI,GAAGgI,oBAAQ,CAACI,KAAK;SACrB;OAED,KAAK,KAAK;SACTpI,IAAI,GAAGgI,oBAAQ,CAACK,KAAK;SACrB;OACD;SACCrI,IAAI,GAAGgI,oBAAQ,CAACC,IAAI;;KAGtB,OAAOjI,IAAI;IACX;GAEDsI,cAAc,CAACC,QAAgB,EAC/B;KACC,IAAIC,cAAc,GAAGD,QAAQ;KAE7B,IAAI,CAACC,cAAc,IAAIA,cAAc,IAAI,CAAC,EAC1C;OACCA,cAAc,GAAG,CAAC;;KAGnB,MAAMC,KAAK,GAAG,CAAC,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,CAAC;KAC9C,MAAMC,aAAa,GAAG,IAAI;KAE1B,IAAIC,QAAQ,GAAG,CAAC;KAChB,OAAOH,cAAc,IAAIE,aAAa,IAAIC,QAAQ,GAAGF,KAAK,CAACrI,MAAM,GAAG,CAAC,EACrE;OACCoI,cAAc,IAAIE,aAAa;OAC/BC,QAAQ,EAAE;;KAGX,MAAMtH,MAAM,GAAGK,aAAG,CAACC,UAAU,CAAE,sBAAqB8G,KAAK,CAACE,QAAQ,CAAE,EAAC,CAAC;KACtE,MAAMC,WAAW,GAAGzL,IAAI,CAAC0L,KAAK,CAACL,cAAc,CAAC;KAE9C,OAAQ,GAAEI,WAAY,IAAGvH,MAAO,EAAC;IACjC;GAEDyH,gBAAgB,CAACrB,QAAgB,EAAEsB,SAAiB,EACpD;KACC,IAAI,CAACtB,QAAQ,IAAIA,QAAQ,CAACrH,MAAM,GAAG2I,SAAS,EAC5C;OACC,OAAOtB,QAAQ;;KAGhB,MAAMuB,SAAS,GAAG,KAAK;KACvB,MAAMC,UAAU,GAAG,CAAC;KACpB,MAAMC,gCAAgC,GAAG,CAAC;KAE1C,MAAMtB,SAAS,GAAG,IAAI,CAACJ,gBAAgB,CAACC,QAAQ,CAAC;KACjD,MAAM0B,eAAe,GAAGvB,SAAS,CAACxH,MAAM,GAAG6I,UAAU;KACrD,MAAMG,wBAAwB,GAAG3B,QAAQ,CAACjF,KAAK,CAAC,CAAC,EAAE,CAAC2G,eAAe,CAAC;KAEpE,IAAIC,wBAAwB,CAAChJ,MAAM,IAAI2I,SAAS,EAChD;OACC,OAAOtB,QAAQ;;KAGhB,MAAM4B,eAAe,GAAGN,SAAS,GAAGG,gCAAgC,GAAGF,SAAS,CAAC5I,MAAM;KACvF,IAAIiJ,eAAe,IAAI,CAAC,EACxB;OACC,OAAO5B,QAAQ;;KAGhB,MAAMlF,SAAS,GAAG6G,wBAAwB,CAAC5G,KAAK,CAAC,CAAC,EAAE6G,eAAe,CAAC,CAACC,IAAI,EAAE;KAC3E,MAAM7G,UAAU,GAAG2G,wBAAwB,CAAC5G,KAAK,CAAC,CAAC0G,gCAAgC,CAAC,CAACI,IAAI,EAAE;KAE3F,OAAQ,GAAE/G,SAAU,GAAEyG,SAAU,GAAEvG,UAAW,IAAGmF,SAAU,EAAC;IAC3D;GAED2B,uBAAuB,CAACC,gBAAgB,EACxC;KACC,IAAI,CAACA,gBAAgB,EACrB;OACC,OAAO,EAAE;;KAGV,MAAMC,cAAc,GAAG;OACtB,aAAa,EAAE;MACf;KAEDC,MAAM,CAACC,OAAO,CAACH,gBAAgB,CAAC,CAACI,OAAO,CAAC,CAAC,CAACC,GAAG,EAAEC,KAAK,CAAC,KAAK;OAC1DL,cAAc,CAAE,QAAOlF,cAAI,CAACwF,WAAW,CAACF,GAAG,CAAE,EAAC,CAAC,GAAGC,KAAK;MACvD,CAAC;KAEF,OAAOL,cAAc;IACrB;GAEDO,kBAAkB,CAACvJ,IAAY,EAAEwJ,WAAmB,EAAExC,QAAgB,EACtE;KACC,MAAMyC,SAAS,GAAGzP,aAAG,CAACiG,MAAM,CAAC,GAAG,EAAE;OAAED;MAAM,CAAC;KAE3ChG,aAAG,CAAC0P,KAAK,CAACD,SAAS,EAAE,SAAS,EAAE,OAAO,CAAC;KACxCzP,aAAG,CAAC0P,KAAK,CAACD,SAAS,EAAE,OAAO,EAAE,SAAS,CAAC;KACxCzP,aAAG,CAAC0P,KAAK,CAACD,SAAS,EAAE,iBAAiB,EAAE,SAAS,CAAC;KAElDA,SAAS,CAACE,YAAY,CAAC,MAAM,EAAEH,WAAW,CAAC;KAC3CC,SAAS,CAACE,YAAY,CAAC,UAAU,EAAE3C,QAAQ,CAAC;KAE5C,OAAOyC,SAAS;IAChB;GAEDG,OAAO,CAAC5C,QAAgB,EACxB;KACC,MAAMG,SAAS,GAAGL,QAAQ,CAACC,gBAAgB,CAACC,QAAQ,CAAC;KACrD,MAAM6C,QAAQ,GAAG/C,QAAQ,CAACQ,sBAAsB,CAACH,SAAS,CAAC;KAE3D,OAAO0C,QAAQ,KAAKtC,oBAAQ,CAACG,KAAK;IAClC;GAEDoC,SAAS,CAACtC,IAAU,EACpB;KACC,MAAMuC,MAAM,GAAG,IAAIC,UAAU,EAAE;KAE/B,OAAO,IAAIxP,OAAO,CAAEC,OAAO,IAAK;OAC/BwP,eAAK,CAACC,IAAI,CAACH,MAAM,EAAE,MAAM,EAAE,MAAM;SAChC,MAAMI,UAAU,GAAGJ,MAAM,CAAC/O,MAAM;SAChC,MAAMoP,aAAa,GAAGD,UAAU,CAAC1G,OAAO,CAAC,GAAG,CAAC;SAC7C,MAAM4G,SAAS,GAAGF,UAAU,CAACpI,KAAK,CAACqI,aAAa,GAAG,CAAC,CAAC;SACrD3P,OAAO,CAAC4P,SAAS,CAAC;QAClB,CAAC;OAEFN,MAAM,CAACO,aAAa,CAAC9C,IAAI,CAAC;MAC1B,CAAC;;CAEJ,CAAC;;CC9PD,MAAM+C,kBAAkB,GAAG,KAAK;CAChC,MAAMC,iBAAiB,GAAG,OAAO;CAEjC,MAAMC,IAAI,GAAG,MAAM;CACnB,MAAMC,GAAG,GAAG,KAAK;CACjB,MAAMC,KAAK,GAAG,OAAO;CACrB,MAAMC,SAAS,GAAG,IAAIC,GAAG,CAAC,CAACJ,IAAI,EAAEC,GAAG,EAAEC,KAAK,CAAC,CAAC;CAAC;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAE9C,CAAO,MAAMG,UAAU,CACvB;GAGCC,WAAW,CAACC,KAAmC,EAC/C;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,oBAAUA,KAAK;;GAGpBC,WAAW,GACX;KACC,IAAIpO,YAAY,CAACC,KAAK,EAAE,EACxB;OACC,OAAO,4CAAI,kBAAQoO,OAAO;;KAG3B,IAAIrO,YAAY,CAACE,OAAO,EAAE,IAAIF,YAAY,CAACG,SAAS,EAAE,EACtD;OACC,OAAO,4CAAI,kBAAQmO,OAAO;;KAG3B,OAAO,KAAK;;GAGbC,OAAO,GACP;KACC,OAAO,4CAAI,kBAAQC,QAAQ;;GAG5BC,aAAa,GACb;KACC,OAAO,4CAAI,kBAAQC,MAAM;;GAG1BC,aAAa,CAACC,cAAiC,EAC/C;KACC,MAAMC,eAAe,2CAAG,IAAI,4CAAqBD,cAAc,CAAC;KAEhE,OAAOC,eAAe,CAACC,IAAI,CAAEC,WAAmB,IAAK;OACpD,+CAAO,IAAI,wCAAmBA,WAAW;MACzC,CAAC;;GAGHC,kBAAkB,CAACJ,cAAiC,EACpD;KACC,MAAMC,eAAe,2CAAG,IAAI,4CAAqBD,cAAc,CAAC;KAEhE,OAAOC,eAAe,CAACC,IAAI,CAAEC,WAAmB,IAAK;OACpD,+CAAO,IAAI,wCAAmBA,WAAW,EAAE,IAAI;MAC/C,CAAC;;CAmHJ;CAAC,8BAhHoBA,WAA8B,EAClD;GACC,IAAIE,KAAK,CAACzM,OAAO,CAACuM,WAAW,CAAC,EAC9B;KACC,OAAOA,WAAW;;GAGnB,IAAIhS,cAAI,CAACmS,cAAc,CAACH,WAAW,CAAC,EACpC;KACC,OAAO,CAACA,WAAW,CAAC;;GAGrB,OAAO,EAAE;CACV;CAAC,4BAEiBA,WAAmB,EAAEI,KAAc,GAAG,KAAK,EAC7D;GACC,IAAI,yCAAC,IAAI,oCAAiBJ,WAAW,EAAEI,KAAK,CAAC,EAC7C;KACC,OAAO,KAAK;;GAGb,MAAMC,QAAQ,2CAAG,IAAI,gEAA+BL,WAAW,CAAC;GAEhE,IAAI5Q,MAAM,GAAG,IAAI;GACjBiR,QAAQ,CAAC9C,OAAO,CAAE+C,OAAO,IAAK;KAC7B,IAAIA,OAAO,KAAK,4CAAI,kBAAQ1O,IAAI,EAChC;OACCxC,MAAM,GAAG,KAAK;;IAEf,CAAC;GAEF,OAAOA,MAAM;CACd;CAAC,0BAEe4Q,WAAmB,EAAEI,KAAc,GAAG,KAAK,EAC3D;GACC,IAAIhR,MAAM,GAAG,IAAI;GACjB,IACC,yCAAC,IAAI,4BAAa4Q,WAAW,EAAEI,KAAK,CAAC,IAClC,yCAAC,IAAI,wBAAWJ,WAAW,EAAEI,KAAK,CAAC,IACnC,yCAAC,IAAI,0BAAYJ,WAAW,EAAEI,KAAK,CAAC,EAExC;KACChR,MAAM,GAAG,KAAK;;GAGf,OAAOA,MAAM;CACd;CAAC,sBAEW4Q,WAAmB,EAAEI,KAAc,GAAG,KAAK,EACvD;GACC,IAAIhR,MAAM,GAAG,IAAI;GACjB,MAAMmR,YAAY,GAAGP,WAAW,CAACvS,QAAQ,CAACsR,KAAK,CAAC,IAAI,CAAC,4CAAI,kBAAQU,QAAQ;GACzE,MAAMe,WAAW,GAAGJ,KAAK,IAAI,CAACJ,WAAW,CAACvS,QAAQ,CAACsR,KAAK,CAAC,IAAI,4CAAI,kBAAQU,QAAQ;GACjF,IAAIc,YAAY,IAAIC,WAAW,EAC/B;KACCpR,MAAM,GAAG,KAAK;;GAGf,OAAOA,MAAM;CACd;CAAC,oBAES4Q,WAAmB,EAAEI,KAAc,GAAG,KAAK,EACrD;GACC,IAAIhR,MAAM,GAAG,IAAI;GACjB,MAAMqR,UAAU,GAAGT,WAAW,CAACvS,QAAQ,CAACqR,GAAG,CAAC,IAAI,CAAC,4CAAI,kBAAQa,MAAM;GACnE,MAAMe,SAAS,GAAGN,KAAK,IAAI,CAACJ,WAAW,CAACvS,QAAQ,CAACqR,GAAG,CAAC,IAAI,4CAAI,kBAAQa,MAAM;GAC3E,IAAIc,UAAU,IAAIC,SAAS,EAC3B;KACCtR,MAAM,GAAG,KAAK;;GAGf,OAAOA,MAAM;CACd;CAAC,qBAEU4Q,WAAmB,EAAEI,KAAc,GAAG,KAAK,EACtD;GACC,IAAIhR,MAAM,GAAG,IAAI;GACjB,MAAMuR,WAAW,GAAGX,WAAW,CAACvS,QAAQ,CAACoR,IAAI,CAAC,IAAI,CAAC,IAAI,CAACQ,WAAW,EAAE;GACrE,MAAMuB,UAAU,GAAGR,KAAK,IAAI,CAACJ,WAAW,CAACvS,QAAQ,CAACoR,IAAI,CAAC,IAAI,IAAI,CAACQ,WAAW,EAAE;GAC7E,IAAIsB,WAAW,IAAIC,UAAU,EAC7B;KACCxR,MAAM,GAAG,KAAK;;GAGf,OAAOA,MAAM;CACd;CAAC,wCAE6B4Q,WAAmB,EACjD;GACC,MAAMnM,KAAK,GAAGmM,WAAW,CAACnM,KAAK,CAAC,GAAG,CAAC;GACpC,MAAMgN,gBAAgB,GAAGhN,KAAK,CAAC6B,MAAM,CAAE8H,GAAG,IAAK;KAC9C,OAAO,CAACwB,SAAS,CAAC8B,GAAG,CAACtD,GAAG,CAAC;IAC1B,CAAC;GAEF,OAAOqD,gBAAgB,CAACE,GAAG,CAAEvD,GAAG,IAAK;KACpC,MAAMwD,kBAAkB,GAAG,YAAY;KACvC,MAAMC,iBAAiB,GAAG,MAAM;KAChC,IAAID,kBAAkB,CAAClL,IAAI,CAAC0H,GAAG,CAAC,EAChC;OACC,OAAQ,GAAEmB,kBAAmB,GAAEnB,GAAG,CAAC5I,WAAW,EAAG,EAAC;;KAGnD,IAAIqM,iBAAiB,CAACnL,IAAI,CAAC0H,GAAG,CAAC,EAC/B;OACC,OAAQ,GAAEoB,iBAAkB,GAAEpB,GAAI,EAAC;;KAGpC,OAAOA,GAAG;IACV,CAAC;CACH;;CC7KM,MAAM0D,OAAO,GAAG;GACtB7B,WAAW,CAACD,KAAmC,EAC/C;KACC,OAAQ,IAAIF,UAAU,CAACE,KAAK,CAAC,CAAEC,WAAW,EAAE;IAC5C;GAEDG,OAAO,CAACJ,KAAmC,EAC3C;KACC,OAAQ,IAAIF,UAAU,CAACE,KAAK,CAAC,CAAEI,OAAO,EAAE;IACxC;GAEDE,aAAa,CAACN,KAAmC,EACjD;KACC,OAAQ,IAAIF,UAAU,CAACE,KAAK,CAAC,CAAEM,aAAa,EAAE;IAC9C;GAEDE,aAAa,CAACR,KAAoB,EAAE+B,kBAAqC,EACzE;KACC,OAAQ,IAAIjC,UAAU,CAACE,KAAK,CAAC,CAAEQ,aAAa,CAACuB,kBAAkB,CAAC;IAChE;GAEDlB,kBAAkB,CAACb,KAAoB,EAAE+B,kBAAqC,EAC9E;KACC,OAAQ,IAAIjC,UAAU,CAACE,KAAK,CAAC,CAAEa,kBAAkB,CAACkB,kBAAkB,CAAC;;CAEvE,CAAC;;CCzBM,MAAMC,OAAO,GAAG;GACtBC,2BAA2B,CAACC,IAAI,EAAEC,SAAS,EAAEC,YAAY,GAAG,EAAE,EAC9D;KACC,OAAOA,YAAY,GAAG,CAAC,EACvB;OACC,IAAIpT,aAAG,CAACC,QAAQ,CAACiT,IAAI,EAAEC,SAAS,CAAC,EACjC;SACC,OAAOD,IAAI;;OAGZ,IAAI,CAACA,IAAI,IAAI,CAACA,IAAI,CAACnT,UAAU,EAC7B;SACC,OAAO,IAAI;;OAGZmT,IAAI,GAAGA,IAAI,CAACnT,UAAU;OAEtBqT,YAAY,EAAE;;KAGf,OAAO,IAAI;;CAEb,CAAC;;CCxBM,MAAMC,UAAU,GAAG;GACzBC,UAAU,CAACjJ,QAAQ,EACnB;KACC,OAAO,oBAAoB,CAAC3C,IAAI,CAAC2C,QAAQ,CAAC;IAC1C;GAEDkJ,YAAY,CAAClJ,QAAgB,EAC7B;KACC,OAAO,IAAI,CAACmJ,iBAAiB,CAACnJ,QAAQ,CAAC,IAAI,IAAI,CAACoJ,eAAe,CAACpJ,QAAQ,CAAC;IACzE;GAEDmJ,iBAAiB,CAACnJ,QAAgB,EAClC;KACC,MAAMqJ,YAAY,GAAG,IAAI;KAEzB,OAAOrJ,QAAQ,CAACrB,UAAU,CAAC0K,YAAY,CAAC;IACxC;GAEDD,eAAe,CAACpJ,QAAgB,EAChC;KACC,MAAMsJ,UAAU,GAAG,MAAM;KAEzB,OAAOtJ,QAAQ,CAACrB,UAAU,CAAC2K,UAAU,CAAC;IACtC;GAEDC,iBAAiB,CAACvJ,QAAQ,EAC1B;KACC,MAAMwJ,YAAY,GAAG,OAAO;KAE5B,OAAOxJ,QAAQ,CAAC7B,QAAQ,EAAE,CAACQ,UAAU,CAAC6K,YAAY,CAAC,IAAI,CAAC,IAAI,CAACC,gBAAgB,CAACzJ,QAAQ,CAAC;IACvF;GAEDyJ,gBAAgB,CAACzJ,QAAQ,EACzB;KACC,OAAO,aAAa,CAAC3C,IAAI,CAAC2C,QAAQ,CAAC;;CAErC,CAAC;;CCnCM,MAAM0J,cAAc,GAAG;GAC7BC,UAAU,CAAC9P,GAAW,EACtB;KACC,OAAO,8CAA8C,CAACwD,IAAI,CAACxD,GAAG,CAAC;IAC/D;GAED+P,WAAW,CAACzQ,IAAY,EACxB;KACC,OAAO,iBAAiB,CAACkE,IAAI,CAAClE,IAAI,CAAC;IACnC;GAED0Q,eAAe,CAAChQ,GAAW,EAC3B;KACC,IAAI,CAACtE,cAAI,CAACmS,cAAc,CAAC7N,GAAG,CAAC,EAC7B;OACC,OAAO,KAAK;;KAGb,MAAMlD,MAAM,GAAGkD,GAAG,CAACH,KAAK,CAAC,8CAA8C,CAAC;KACxE,IAAI,CAAC/C,MAAM,EACX;OACC,OAAO,KAAK;;KAGb,MAAMmT,IAAI,GAAGnT,MAAM,CAAC,CAAC,CAAC;KAEtB,OAAOmT,IAAI,CAAC9U,QAAQ,CAAC+U,QAAQ,CAACD,IAAI,CAAC;IACnC;GAEDE,cAAc,CAACnQ,GAAW,EAC1B;KACC,IAAI,CAACtE,cAAI,CAACmS,cAAc,CAAC7N,GAAG,CAAC,EAC7B;OACC,OAAO,IAAI;;KAGZ,MAAMlD,MAAM,GAAGkD,GAAG,CAACH,KAAK,CAAC,8CAA8C,CAAC;KACxE,IAAI,CAAC/C,MAAM,EACX;OACC,OAAO,IAAI;;KAGZ,MAAMwC,IAAI,GAAGxC,MAAM,CAAC,CAAC,CAAC;KACtB,IAAI,CAACpB,cAAI,CAACmS,cAAc,CAACvO,IAAI,CAAC,EAC9B;OACC,OAAO,IAAI;;KAGZ,OAAOA,IAAI;IACX;GAED8Q,YAAY,CAAC9Q,IAAY,EACzB;KACC,IAAI,CAAC,IAAI,CAACyQ,WAAW,CAACzQ,IAAI,CAAC,EAC3B;OACC,OAAO,IAAI;;KAGZ,MAAM+Q,MAAM,GAAGH,QAAQ,CAACG,MAAM,CAACjO,OAAO,CAAC,SAAS,EAAE,UAAU,CAAC;KAE7D,OAAQ,GAAEiO,MAAO,UAAS/Q,IAAK,EAAC;IAChC;GAEDgR,gBAAgB,CAACC,OAAyC,GAAG,EAAE,EAC/D;KACC,IAAI7U,cAAI,CAACmS,cAAc,CAAC0C,OAAO,CAACtU,IAAI,CAAC,IAAI,IAAI,CAAC6T,UAAU,CAACS,OAAO,CAACtU,IAAI,CAAC,EACtE;OACC,OAAO,IAAI,CAACkU,cAAc,CAACI,OAAO,CAACtU,IAAI,CAAC;;KAGzC,IAAIP,cAAI,CAACmS,cAAc,CAAC0C,OAAO,CAACjR,IAAI,CAAC,IAAI,IAAI,CAACyQ,WAAW,CAACQ,OAAO,CAACjR,IAAI,CAAC,EACvE;OACC,OAAOiR,OAAO,CAACjR,IAAI;;KAGpB,OAAO,IAAI;IACX;GAEDkR,mBAAmB,CAAClR,IAAI,EACxB;KACC,IAAI,CAAC,IAAI,CAACyQ,WAAW,CAACzQ,IAAI,CAAC,EAC3B;OACC,OAAO,IAAI;;KAGZ,OAAQ,iBAAgBA,IAAK,EAAC;;CAEhC,CAAC;;CCxFM,MAAMmR,QAAQ,GAAG;GACvB1T,QAAQ,CAAC+E,IAAI,EACb;KACC,OAAO,mBAAmB,CAAC0B,IAAI,CAAC1B,IAAI,CAAC;;CAEvC,CAAC;;OCSY4O,KAAK,GAAG;GACpBC,OAAO,EAAE/V,WAAW;GACpB+B,IAAI,EAAEF,QAAQ;GACdmU,MAAM,EAAE5S,UAAU;GAClB6S,QAAQ,EAAElS,YAAY;GACtBmS,IAAI,EAAExQ,QAAQ;GACdwB,IAAI,EAAEF,QAAQ;GACdmP,IAAI,EAAExK,QAAQ;GACd+C,IAAI,EAAEV,QAAQ;GACdoI,GAAG,EAAElC,OAAO;GACZ5D,GAAG,EAAE0D,OAAO;GACZjO,MAAM,EAAEwO,UAAU;GAClB8B,UAAU,EAAEpB,cAAc;GAC1BqB,IAAI,EAAET;CACP,CAAC;;;;;;;;"}