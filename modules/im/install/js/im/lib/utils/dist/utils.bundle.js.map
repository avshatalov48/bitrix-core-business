{"version":3,"file":"utils.bundle.js","sources":["../src/utils.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Utils\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nimport {DateFormat} from 'im.const';\nimport 'main.date';\n\nlet Utils =\n{\n\tbrowser:\n\t{\n\t\tisSafari()\n\t\t{\n\t\t\tif (this.isChrome())\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!navigator.userAgent.toLowerCase().includes('safari'))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn !this.isSafariBased();\n\t\t},\n\t\tisSafariBased()\n\t\t{\n\t\t\tif (!navigator.userAgent.toLowerCase().includes('applewebkit'))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\tnavigator.userAgent.toLowerCase().includes('yabrowser')\n\t\t\t\t|| navigator.userAgent.toLowerCase().includes('yaapp_ios_browser')\n\t\t\t\t|| navigator.userAgent.toLowerCase().includes('crios')\n\t\t\t)\n\t\t},\n\t\tisChrome()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('chrome');\n\t\t},\n\t\tisFirefox()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('firefox');\n\t\t},\n\t\tisIe()\n\t\t{\n\t\t\treturn navigator.userAgent.match(/(Trident\\/|MSIE\\/)/) !== null;\n\t\t},\n\n\t\tfindParent(item, findTag)\n\t\t{\n\t\t\tlet isHtmlElement = findTag instanceof HTMLElement;\n\n\t\t\tif (\n\t\t\t\t!findTag\n\t\t\t\t|| typeof findTag !== 'string' && !isHtmlElement\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tfor (; item && item !== document; item = item.parentNode)\n\t\t\t{\n\t\t\t\tif (typeof findTag === 'string')\n\t\t\t\t{\n\t\t\t\t\tif (item.classList.contains(findTag))\n\t\t\t\t\t{\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (isHtmlElement)\n\t\t\t\t{\n\t\t\t\t\tif (item === findTag)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tplatform:\n\t{\n\t\tisMac()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('macintosh');\n\t\t},\n\t\tisLinux()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('linux');\n\t\t},\n\t\tisWindows()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('windows') || (!this.isMac() && !this.isLinux());\n\t\t},\n\t\tisBitrixMobile()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('bitrixmobile');\n\t\t},\n\t\tisBitrixDesktop()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('bitrixdesktop');\n\t\t},\n\t\tgetDesktopVersion()\n\t\t{\n\t\t\tif (typeof this.getDesktopVersionStatic !== 'undefined')\n\t\t\t{\n\t\t\t\treturn this.getDesktopVersionStatic;\n\t\t\t}\n\n\t\t\tif (typeof BXDesktopSystem === 'undefined')\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tconst version = BXDesktopSystem.GetProperty('versionParts');\n\t\t\tthis.getDesktopVersionStatic = version[3];\n\n\t\t\treturn this.getDesktopVersionStatic;\n\t\t},\n\t\tisMobile()\n\t\t{\n\t\t\treturn this.isAndroid() || this.isIos() || this.isBitrixMobile();\n\t\t},\n\t\tisIos(): boolean\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('iphone') || navigator.userAgent.toLowerCase().includes('ipad');\n\t\t},\n\t\tgetIosVersion()\n\t\t{\n\t\t\tif (!this.isIos())\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tlet matches = navigator.userAgent.toLowerCase().match(/(iphone|ipad)(.+)(OS\\s([0-9]+)([_.]([0-9]+))?)/i);\n\t\t\tif (!matches || !matches[4])\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn parseFloat(matches[4]+'.'+(matches[6]? matches[6]: 0));\n\t\t},\n\t\tisAndroid()\n\t\t{\n\t\t\treturn navigator.userAgent.toLowerCase().includes('android');\n\t\t},\n\t\topenNewPage(url)\n\t\t{\n\t\t\tif (!url)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (this.isBitrixMobile())\n\t\t\t{\n\t\t\t\tif (typeof BX.MobileTools !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tlet openWidget = BX.MobileTools.resolveOpenFunction(url);\n\t\t\t\t\tif (openWidget)\n\t\t\t\t\t{\n\t\t\t\t\t\topenWidget();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tapp.openNewPage(url);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twindow.open(url, '_blank');\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\t},\n\n\tdevice:\n\t{\n\t\tisDesktop()\n\t\t{\n\t\t\treturn !this.isMobile();\n\t\t},\n\n\t\tisMobile()\n\t\t{\n\t\t\tif (typeof this.isMobileStatic !== 'undefined')\n\t\t\t{\n\t\t\t\treturn this.isMobileStatic;\n\t\t\t}\n\n\t\t\tthis.isMobileStatic = (\n\t\t\t\tnavigator.userAgent.toLowerCase().includes('android')\n\t\t\t\t|| navigator.userAgent.toLowerCase().includes('webos')\n\t\t\t\t|| navigator.userAgent.toLowerCase().includes('iphone')\n\t\t\t\t|| navigator.userAgent.toLowerCase().includes('ipad')\n\t\t\t\t|| navigator.userAgent.toLowerCase().includes('ipod')\n\t\t\t\t|| navigator.userAgent.toLowerCase().includes('blackberry')\n\t\t\t\t|| navigator.userAgent.toLowerCase().includes('windows phone')\n\t\t\t);\n\n\t\t\treturn this.isMobileStatic;\n\t\t},\n\n\t\torientationHorizontal: 'horizontal',\n\t\torientationPortrait: 'portrait',\n\n\t\tgetOrientation()\n\t\t{\n\t\t\tif (!this.isMobile())\n\t\t\t{\n\t\t\t\treturn this.orientationHorizontal;\n\t\t\t}\n\n\t\t\treturn Math.abs(window.orientation) === 0? this.orientationPortrait: this.orientationHorizontal;\n\t\t},\n\t},\n\n\ttypes:\n\t{\n\t\tisString(item)\n\t\t{\n\t\t\treturn item === '' ? true : (item ? (typeof (item) == \"string\" || item instanceof String) : false);\n\t\t},\n\n\t\tisArray(item)\n\t\t{\n\t\t\treturn item && Object.prototype.toString.call(item) == \"[object Array]\";\n\t\t},\n\n\t\tisFunction(item)\n\t\t{\n\t\t\treturn item === null ? false : (typeof (item) == \"function\" || item instanceof Function);\n\t\t},\n\n\t\tisDomNode(item)\n\t\t{\n\t\t\treturn item && typeof (item) == \"object\" && \"nodeType\" in item;\n\t\t},\n\n\t\tisDate(item)\n\t\t{\n\t\t\treturn item && Object.prototype.toString.call(item) == \"[object Date]\";\n\t\t},\n\n\t\tisPlainObject(item)\n\t\t{\n\t\t\tif (!item || typeof item !== \"object\" || item.nodeType)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst hasProp = Object.prototype.hasOwnProperty;\n\t\t\ttry\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\titem.constructor\n\t\t\t\t\t&& !hasProp.call(item, \"constructor\")\n\t\t\t\t\t&& !hasProp.call(item.constructor.prototype, \"isPrototypeOf\")\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (e)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet key;\n\t\t\tfor (let key in item)\n\t\t\t{\n\t\t\t}\n\n\t\t\treturn typeof(key) === \"undefined\" || hasProp.call(item, key);\n\t\t},\n\n\t\tisUuidV4(uuid)\n\t\t{\n\t\t\tif (!this.isString(uuid))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst uuidV4pattern = new RegExp(/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i);\n\n\t\t\treturn uuid.search(uuidV4pattern) === 0;\n\t\t},\n\t},\n\n\tdialog:\n\t{\n\t\tgetChatIdByDialogId(dialogId)\n\t\t{\n\t\t\tif (!this.isChatId(dialogId))\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn parseInt(dialogId.toString().substr(4));\n\t\t},\n\n\t\tisChatId(dialogId)\n\t\t{\n\t\t\treturn dialogId.toString().startsWith('chat')\n\t\t},\n\n\t\tisEmptyDialogId(dialogId)\n\t\t{\n\t\t\tif (!dialogId)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (typeof dialogId === \"string\")\n\t\t\t{\n\t\t\t\tif (dialogId === 'chat0' || dialogId === \"0\")\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t},\n\n\ttext:\n\t{\n\t\tquote(text, params, files = {}, localize = null)\n\t\t{\n\t\t\tif (typeof text !== 'string')\n\t\t\t{\n\t\t\t\treturn text.toString();\n\t\t\t}\n\n\t\t\tif (!localize)\n\t\t\t{\n\t\t\t\tlocalize = BX.message;\n\t\t\t}\n\n\t\t\ttext = text.replace(/\\[USER=([0-9]{1,})](.*?)\\[\\/USER]/ig, (whole, userId, text) => text);\n\t\t\ttext = text.replace(/\\[CHAT=(imol\\|)?([0-9]{1,})](.*?)[\\/CHAT]/ig, (whole, imol, chatId, text) => text);\n\t\t\ttext = text.replace(/\\[CALL(?:=(.+?))?](.+?)?\\[\\/CALL]/ig, (whole, command, text) => text? text: command);\n\t\t\ttext = text.replace(/\\[ATTACH=([0-9]{1,})]/ig, (whole, command, text) => command === 10000? '': '['+localize['IM_UTILS_TEXT_ATTACH']+'] ');\n\t\t\ttext = text.replace(/\\[RATING=([1-5]{1})]/ig, (whole, rating) => '['+localize.IM_F_RATING+'] ');\n\t\t\ttext = text.replace(/&nbsp;/ig, \" \");\n\n\t\t\ttext = text.replace(/------------------------------------------------------(.*?)------------------------------------------------------/gmis, \"[\"+localize[\"IM_UTILS_TEXT_QUOTE\"]+\"]\");\n\t\t\ttext = text.replace(/^(>>(.*)\\n)/gi, \"[\"+localize[\"IM_UTILS_TEXT_QUOTE\"]+\"]\\n\");\n\n\t\t\tif (params && params.FILE_ID && params.FILE_ID.length > 0)\n\t\t\t{\n\t\t\t\tlet filesText = [];\n\t\t\t\tparams.FILE_ID.forEach(fileId =>\n\t\t\t\t{\n\t\t\t\t\tif (files[fileId].type === 'image')\n\t\t\t\t\t{\n\t\t\t\t\t\tfilesText.push(localize['IM_UTILS_TEXT_IMAGE']);\n\t\t\t\t\t}\n\t\t\t\t\telse if (files[fileId].type === 'audio')\n\t\t\t\t\t{\n\t\t\t\t\t\tfilesText.push(localize['IM_UTILS_TEXT_AUDIO']);\n\t\t\t\t\t}\n\t\t\t\t\telse if (files[fileId].type === 'video')\n\t\t\t\t\t{\n\t\t\t\t\t\tfilesText.push(localize['IM_UTILS_TEXT_VIDEO']);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tfilesText.push(files[fileId].name);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (filesText.length <= 0)\n\t\t\t\t{\n\t\t\t\t\tfilesText.push(localize['IM_UTILS_TEXT_FILE']);\n\t\t\t\t}\n\n\t\t\t\ttext = filesText.join('\\n')+text;\n\t\t\t}\n\t\t\telse if (params && params.ATTACH && params.ATTACH.length > 0)\n\t\t\t{\n\t\t\t\ttext = '['+localize['IM_UTILS_TEXT_ATTACH']+']\\n'+text;\n\t\t\t}\n\t\t\tif (text.length <= 0)\n\t\t\t{\n\t\t\t\ttext = localize['IM_UTILS_TEXT_DELETED'];\n\t\t\t}\n\n\t\t\treturn text.trim();\n\t\t},\n\n\t\tpurify(text, params, files = {}, localize = null)\n\t\t{\n\t\t\tif (typeof text !== 'string')\n\t\t\t{\n\t\t\t\treturn text.toString();\n\t\t\t}\n\n\t\t\tif (!localize)\n\t\t\t{\n\t\t\t\tlocalize = BX.message;\n\t\t\t}\n\n\t\t\ttext = text.trim();\n\n\t\t\tif (text.startsWith('/me'))\n\t\t\t{\n\t\t\t\ttext = text.substr(4);\n\t\t\t}\n\t\t\telse if (text.startsWith('/loud'))\n\t\t\t{\n\t\t\t\ttext = text.substr(6);\n\t\t\t}\n\n\t\t\ttext = text.replace(/<br><br \\/>/ig, '<br />');\n\t\t\ttext = text.replace(/<br \\/><br>/ig, '<br />');\n\n\t\t\tconst codeReplacement = [];\n\t\t\ttext = text.replace(/\\[CODE\\]\\n?([\\0-\\uFFFF]*?)\\[\\/CODE\\]/ig, function(whole,text)\n\t\t\t{\n\t\t\t\tconst id = codeReplacement.length;\n\t\t\t\tcodeReplacement.push(text);\n\t\t\t\treturn '####REPLACEMENT_CODE_'+id+'####';\n\t\t\t});\n\n\t\t\ttext = text.replace(/\\[PUT(?:=(?:.+?))?\\](?:.+?)?\\[\\/PUT]/ig, function(match)\n\t\t\t{\n\t\t\t\treturn match.replace(/\\[PUT(?:=(.+))?\\](.+?)?\\[\\/PUT]/ig, function(whole, command, text) {\n\t\t\t\t\treturn  text? text: command;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttext = text.replace(/\\[SEND(?:=(?:.+?))?\\](?:.+?)?\\[\\/SEND]/ig, function(match)\n\t\t\t{\n\t\t\t\treturn match.replace(/\\[SEND(?:=(.+))?\\](.+?)?\\[\\/SEND]/ig, function(whole, command, text) {\n\t\t\t\t\treturn  text? text: command;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\ttext = text.replace(/\\[[buis]](.*?)\\[\\/[buis]]/ig, '$1');\n\t\t\ttext = text.replace(/\\[url](.*?)\\[\\/url]/ig, '$1');\n\t\t\ttext = text.replace(/\\[RATING=([1-5]{1})]/ig, () => '['+localize['IM_UTILS_TEXT_RATING']+'] ');\n\t\t\ttext = text.replace(/\\[ATTACH=([0-9]{1,})]/ig, () => '['+localize['IM_UTILS_TEXT_ATTACH']+'] ');\n\t\t\ttext = text.replace(/\\[USER=([0-9]{1,})](.*?)\\[\\/USER]/ig, '$2');\n\t\t\ttext = text.replace(/\\[CHAT=([0-9]{1,})](.*?)\\[\\/CHAT]/ig, '$2');\n\t\t\ttext = text.replace(/\\[SEND(?:=(?:.+?))?\\](.+?)?\\[\\/SEND]/ig, '$1');\n\t\t\ttext = text.replace(/\\[PUT(?:=(?:.+?))?\\](.+?)?\\[\\/PUT]/ig, '$1');\n\t\t\ttext = text.replace(/\\[CALL=(.*?)](.*?)\\[\\/CALL\\]/ig, '$2');\n\t\t\ttext = text.replace(/\\[PCH=([0-9]{1,})](.*?)\\[\\/PCH]/ig, '$2');\n\t\t\ttext = text.replace(/<img.*?data-code=\"([^\"]*)\".*?>/ig, '$1');\n\t\t\ttext = text.replace(/<span.*?title=\"([^\"]*)\".*?>.*?<\\/span>/ig, '($1)');\n\t\t\ttext = text.replace(/<img.*?title=\"([^\"]*)\".*?>/ig, '($1)');\n\t\t\ttext = text.replace(/\\[ATTACH=([0-9]{1,})]/ig, (whole, command, text) => command === 10000? '': '['+localize['IM_UTILS_TEXT_ATTACH']+'] ');\n\t\t\ttext = text.replace(/<s>([^\"]*)<\\/s>/ig, ' ');\n\t\t\ttext = text.replace(/\\[s]([^\"]*)\\[\\/s]/ig, ' ');\n\t\t\ttext = text.replace(/\\[icon=([^\\]]*)]/ig, (whole) =>\n\t\t\t{\n\t\t\t\tlet title = whole.match(/title=(.*[^\\s\\]])/i);\n\t\t\t\tif (title && title[1])\n\t\t\t\t{\n\t\t\t\t\ttitle = title[1];\n\t\t\t\t\tif (title.indexOf('width=') > -1)\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle = title.substr(0, title.indexOf('width='))\n\t\t\t\t\t}\n\t\t\t\t\tif (title.indexOf('height=') > -1)\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle = title.substr(0, title.indexOf('height='))\n\t\t\t\t\t}\n\t\t\t\t\tif (title.indexOf('size=') > -1)\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle = title.substr(0, title.indexOf('size='))\n\t\t\t\t\t}\n\t\t\t\t\tif (title)\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle = '('+title.trim()+')';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitle = '('+localize['IM_UTILS_TEXT_ICON']+')';\n\t\t\t\t}\n\t\t\t\treturn title;\n\t\t\t});\n\n\t\t\tcodeReplacement.forEach((element, index) => {\n\t\t\t\ttext = text.replace('####REPLACEMENT_CODE_'+index+'####', element);\n\t\t\t});\n\n\t\t\ttext = text.replace(/------------------------------------------------------(.*?)------------------------------------------------------/gmis, \"[\"+localize[\"IM_UTILS_TEXT_QUOTE\"]+\"] \");\n\t\t\ttext = text.replace(/^(>>(.*)(\\n)?)/gmi, \"[\"+localize[\"IM_UTILS_TEXT_QUOTE\"]+\"] \");\n\n\t\t\ttext = text.replace(/<\\/?[^>]+>/gi, '');\n\n\t\t\tif (params && params.FILE_ID && params.FILE_ID.length > 0)\n\t\t\t{\n\t\t\t\tlet filesText = [];\n\n\t\t\t\tif (typeof files === 'object')\n\t\t\t\t{\n\t\t\t\t\tparams.FILE_ID.forEach(fileId =>\n\t\t\t\t\t{\n\t\t\t\t\t\tif (typeof files[fileId] === 'undefined')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (files[fileId].type === 'image')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilesText.push(localize['IM_UTILS_TEXT_IMAGE']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (files[fileId].type === 'audio')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilesText.push(localize['IM_UTILS_TEXT_AUDIO']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (files[fileId].type === 'video')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilesText.push(localize['IM_UTILS_TEXT_VIDEO']);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfilesText.push(files[fileId].name);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (filesText.length <= 0)\n\t\t\t\t{\n\t\t\t\t\tfilesText.push(localize['IM_UTILS_TEXT_FILE']);\n\t\t\t\t}\n\n\t\t\t\ttext = filesText.join(' ')+text;\n\t\t\t}\n\t\t\telse if (params && (params.WITH_ATTACH || params.ATTACH && params.ATTACH.length > 0))\n\t\t\t{\n\t\t\t\ttext = '['+localize['IM_UTILS_TEXT_ATTACH']+'] '+text;\n\t\t\t}\n\t\t\telse if (params && params.WITH_FILE)\n\t\t\t{\n\t\t\t\ttext = '['+localize['IM_UTILS_TEXT_FILE']+'] '+text;\n\t\t\t}\n\t\t\tif (text.length <= 0)\n\t\t\t{\n\t\t\t\ttext = localize['IM_UTILS_TEXT_DELETED'];\n\t\t\t}\n\n\t\t\treturn text.replace('\\n', ' ').trim();\n\t\t},\n\n\t\thtmlspecialchars(text)\n\t\t{\n\t\t\tif (typeof text !== 'string')\n\t\t\t{\n\t\t\t\treturn text;\n\t\t\t}\n\n\t\t\treturn text.replace(/&/g, '&amp;')\n\t\t\t\t.replace(/\"/g, '&quot;')\n\t\t\t\t.replace(/</g, '&lt;')\n\t\t\t\t.replace(/>/g, '&gt;');\n\t\t},\n\n\t\thtmlspecialcharsback(text)\n\t\t{\n\t\t\tif (typeof text !== 'string')\n\t\t\t{\n\t\t\t\treturn text;\n\t\t\t}\n\n\t\t\treturn text.replace(/\\&quot;/g, '\"')\n\t\t\t\t.replace(/&#039;/g, \"'\")\n\t\t\t\t.replace(/\\&lt;/g, '<')\n\t\t\t\t.replace(/\\&gt;/g, '>')\n\t\t\t\t.replace(/\\&amp;/g, '&')\n\t\t\t\t.replace(/\\&nbsp;/g, ' ');\n\t\t},\n\n\t\tgetLocalizeForNumber(phrase, number, language = 'en', localize = null)\n\t\t{\n\t\t\tif (!localize)\n\t\t\t{\n\t\t\t\tlocalize = BX.message;\n\t\t\t}\n\n\t\t\tlet pluralFormType = 1;\n\n\t\t\tnumber = parseInt(number);\n\n\t\t\tif (number < 0)\n\t\t\t{\n\t\t\t\tnumber = number * -1;\n\t\t\t}\n\n\t\t\tif (language)\n\t\t\t{\n\t\t\t\tswitch (language)\n\t\t\t\t{\n\t\t\t\t\tcase 'de':\n\t\t\t\t\tcase 'en':\n\t\t\t\t\t\tpluralFormType = ((number !== 1) ? 1 : 0);\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ru':\n\t\t\t\t\tcase 'ua':\n\t\t\t\t\t\tpluralFormType = (((number%10 === 1) && (number%100 !== 11)) ? 0 : (((number%10 >= 2) && (number%10 <= 4) && ((number%100 < 10) || (number%100 >= 20))) ? 1 : 2));\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn localize[phrase + '_PLURAL_' + pluralFormType];\n\t\t}\n\t},\n\n\tdate:\n\t{\n\t\tgetFormatType(type = DateFormat.default, localize = null)\n\t\t{\n\t\t\tif (!localize)\n\t\t\t{\n\t\t\t\tlocalize = BX.message;\n\t\t\t}\n\n\t\t\tlet format = [];\n\t\t\tif (type === DateFormat.groupTitle)\n\t\t\t{\n\t\t\t\tformat = [\n\t\t\t\t\t[\"tommorow\", \"tommorow\"],\n\t\t\t\t\t[\"today\", \"today\"],\n\t\t\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t\t\t[\"\", localize[\"IM_UTILS_FORMAT_DATE\"]]\n\t\t\t\t];\n\t\t\t}\n\t\t\telse if (type === DateFormat.message)\n\t\t\t{\n\t\t\t\tformat = [\n\t\t\t\t\t[\"\", localize[\"IM_UTILS_FORMAT_TIME\"]]\n\t\t\t\t];\n\t\t\t}\n\t\t\telse if (type === DateFormat.recentTitle)\n\t\t\t{\n\t\t\t\tformat = [\n\t\t\t\t\t[\"tommorow\", \"today\"],\n\t\t\t\t\t[\"today\", \"today\"],\n\t\t\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t\t\t[\"\", localize[\"IM_UTILS_FORMAT_DATE_RECENT\"]]\n\t\t\t\t]\n\t\t\t}\n\t\t\telse if (type === DateFormat.recentLinesTitle)\n\t\t\t{\n\t\t\t\tformat = [\n\t\t\t\t\t[\"tommorow\", \"tommorow\"],\n\t\t\t\t\t[\"today\", \"today\"],\n\t\t\t\t\t[\"yesterday\", \"yesterday\"],\n\t\t\t\t\t[\"\", localize[\"IM_UTILS_FORMAT_DATE_RECENT\"]]\n\t\t\t\t]\n\t\t\t}\n\t\t\telse if (type === DateFormat.readedTitle)\n\t\t\t{\n\t\t\t\tformat = [\n\t\t\t\t\t[\"tommorow\", \"tommorow, \"+localize[\"IM_UTILS_FORMAT_TIME\"]],\n\t\t\t\t\t[\"today\", \"today, \"+localize[\"IM_UTILS_FORMAT_TIME\"]],\n\t\t\t\t\t[\"yesterday\", \"yesterday, \"+localize[\"IM_UTILS_FORMAT_TIME\"]],\n\t\t\t\t\t[\"\", localize[\"IM_UTILS_FORMAT_READED\"]]\n\t\t\t\t];\n\t\t\t}\n\t\t\telse if (type === DateFormat.vacationTitle)\n\t\t\t{\n\t\t\t\tformat = [\n\t\t\t\t\t[\"\", localize[\"IM_UTILS_FORMAT_DATE_SHORT\"]]\n\t\t\t\t];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tformat = [\n\t\t\t\t\t[\"tommorow\", \"tommorow, \"+localize[\"IM_UTILS_FORMAT_TIME\"]],\n\t\t\t\t\t[\"today\", \"today, \"+localize[\"IM_UTILS_FORMAT_TIME\"]],\n\t\t\t\t\t[\"yesterday\", \"yesterday, \"+localize[\"IM_UTILS_FORMAT_TIME\"]],\n\t\t\t\t\t[\"\", localize[\"IM_UTILS_FORMAT_DATE_TIME\"]]\n\t\t\t\t];\n\t\t\t}\n\n\t\t\treturn format;\n\t\t},\n\n\t\tgetDateFunction(localize = null)\n\t\t{\n\t\t\tif (this.dateFormatFunction)\n\t\t\t{\n\t\t\t\treturn this.dateFormatFunction;\n\t\t\t}\n\n\t\t\tthis.dateFormatFunction = Object.create(BX.Main.Date);\n\t\t\tif (localize)\n\t\t\t{\n\t\t\t\tthis.dateFormatFunction._getMessage = (phrase) => localize[phrase];\n\t\t\t}\n\n\t\t\treturn this.dateFormatFunction;\n\t\t},\n\n\t\tformat(timestamp, format = null, localize = null)\n\t\t{\n\t\t\tif (!format)\n\t\t\t{\n\t\t\t\tformat = this.getFormatType(DateFormat.default, localize);\n\t\t\t}\n\n\t\t\treturn this.getDateFunction(localize).format(format, timestamp);\n\t\t},\n\n\t\tcast(date, def = new Date())\n\t\t{\n\t\t\tlet result = def;\n\n\t\t\tif (date instanceof Date)\n\t\t\t{\n\t\t\t\tresult = date;\n\t\t\t}\n\t\t\telse if (typeof date === \"string\")\n\t\t\t{\n\t\t\t\tresult = new Date(date);\n\t\t\t}\n\t\t\telse if (typeof date === \"number\")\n\t\t\t{\n\t\t\t\tresult = new Date(date*1000);\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tresult instanceof Date\n\t\t\t\t&& Number.isNaN(result.getTime())\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult = def;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t},\n\n\tobject:\n\t{\n\t\tcountKeys(obj)\n\t\t{\n\t\t\tlet result = 0;\n\n\t\t\tfor (let i in obj)\n\t\t\t{\n\t\t\t\tif (obj.hasOwnProperty(i))\n\t\t\t\t{\n\t\t\t\t\tresult++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t},\n\n\tuser:\n\t{\n\t\tgetLastDateText(params, localize = null)\n\t\t{\n\t\t\tif (!params)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tlet dateFunction = Utils.date.getDateFunction(localize);\n\n\t\t\tif (!localize)\n\t\t\t{\n\t\t\t\tlocalize = BX.message || {};\n\t\t\t}\n\n\t\t\tlet text = '';\n\t\t\tlet online = {};\n\t\t\tif (params.bot || params.network)\n\t\t\t{\n\t\t\t\ttext = '';\n\t\t\t}\n\t\t\telse if (params.absent && !this.isMobileActive(params, localize))\n\t\t\t{\n\t\t\t\tonline = this.getOnlineStatus(params, localize);\n\t\t\t\ttext = localize['IM_STATUS_VACATION_TITLE'].replace('#DATE#',\n\t\t\t\t\tdateFunction.format(Utils.date.getFormatType(DateFormat.vacationTitle, localize), params.absent.getTime()/1000)\n\t\t\t\t);\n\n\t\t\t\tif (online.isOnline && params.idle)\n\t\t\t\t{\n\t\t\t\t\t text = localize['IM_STATUS_AWAY_TITLE'].replace('#TIME#', this.getIdleText(params, localize))+'. '+text;\n\t\t\t\t}\n\t\t\t\telse if (online.isOnline && !online.lastSeenText)\n\t\t\t\t{\n\t\t\t\t\ttext = online.statusText+'. '+text;\n\t\t\t\t}\n\t\t\t\telse if (online.lastSeenText)\n\t\t\t\t{\n\t\t\t\t\tif (!Utils.platform.isMobile())\n\t\t\t\t\t{\n\t\t\t\t\t\ttext = text+'. '+localize['IM_LAST_SEEN_'+(params.gender === 'F'? 'F': 'M')].replace('#POSITION#', text).replace('#LAST_SEEN#', online.lastSeenText);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (params.lastActivityDate)\n\t\t\t{\n\t\t\t\tonline = this.getOnlineStatus(params, localize);\n\t\t\t\tif (online.isOnline && params.idle && !this.isMobileActive(params, localize))\n\t\t\t\t{\n\t\t\t\t\t text = localize['IM_STATUS_AWAY_TITLE'].replace('#TIME#', this.getIdleText(params, localize));\n\t\t\t\t}\n\t\t\t\telse if (online.isOnline && !online.lastSeenText)\n\t\t\t\t{\n\t\t\t\t\tif (Utils.platform.isMobile() && this.isMobileActive(params, localize))\n\t\t\t\t\t{\n\t\t\t\t\t\ttext = localize['IM_STATUS_MOBILE'];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttext = online.statusText;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (online.lastSeenText)\n\t\t\t\t{\n\t\t\t\t\tif (Utils.platform.isMobile())\n\t\t\t\t\t{\n\t\t\t\t\t\ttext = localize['IM_LAST_SEEN_SHORT_'+(params.gender === 'F'? 'F': 'M')].replace('#LAST_SEEN#', online.lastSeenText);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttext = localize['IM_LAST_SEEN_'+(params.gender === 'F'? 'F': 'M')].replace('#POSITION#', text).replace('#LAST_SEEN#', online.lastSeenText);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn text;\n\t\t},\n\n\t\tgetIdleText(params, localize = null)\n\t\t{\n\t\t\tif (!params)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tif (!params.idle)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn Utils.date.getDateFunction(localize).format([\n\t\t\t   [\"s60\", \"sdiff\"],\n\t\t\t   [\"i60\", \"idiff\"],\n\t\t\t   [\"H24\", \"Hdiff\"],\n\t\t\t   [\"\", \"ddiff\"]\n\t\t\t], params.idle);\n\t\t},\n\n\t\tgetOnlineStatus(params, localize = null)\n\t\t{\n\t\t\tlet result = {\n\t\t\t\t'isOnline': false,\n\t\t\t\t'status': 'offline',\n\t\t\t\t'statusText': localize? localize.IM_STATUS_OFFLINE: 'offline',\n\t\t\t\t'lastSeen': params.lastActivityDate,\n\t\t\t\t'lastSeenText': '',\n\t\t\t};\n\n\t\t\tif (!params.lastActivityDate || params.lastActivityDate.getTime() === 0)\n\t\t\t{\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tlet date = new Date();\n\n\t\t\tresult.isOnline = date.getTime() - params.lastActivityDate.getTime() <= this.getOnlineLimit(localize)*1000;\n\t\t\tresult.status = result.isOnline? params.status: 'offline';\n\t\t\tresult.statusText = localize && localize['IM_STATUS_'+result.status.toUpperCase()]? localize['IM_STATUS_'+result.status.toUpperCase()]: result.status;\n\n\t\t\tif (localize && params.lastActivityDate.getTime() > 0 && date.getTime() - params.lastActivityDate.getTime() > 300*1000)\n\t\t\t{\n\t\t\t\tresult.lastSeenText = Utils.date.getDateFunction(localize).formatLastActivityDate(params.lastActivityDate);\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\n\t\tisMobileActive(params, localize = null)\n\t\t{\n\t\t\tif (!params)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!localize)\n\t\t\t{\n\t\t\t\tlocalize = BX.message || {};\n\t\t\t}\n\n\t\t\treturn (\n\t\t\t\tparams.mobileLastDate\n\t\t\t\t&& new Date() - params.mobileLastDate < this.getOnlineLimit(localize)*1000\n\t\t\t\t&& params.lastActivityDate-params.mobileLastDate < 300*1000\n\t\t\t);\n\t\t},\n\n\t\tgetOnlineLimit(localize = null)\n\t\t{\n\t\t\tif (!localize)\n\t\t\t{\n\t\t\t\tlocalize = BX.message || {};\n\t\t\t}\n\n\t\t\treturn localize.LIMIT_ONLINE? parseInt(localize.LIMIT_ONLINE): 15*60;\n\t\t},\n\t},\n\n\tisDarkColor(hex)\n\t{\n\t\tif (!hex || !hex.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (hex.length === 4)\n\t\t{\n\t\t\thex = hex.replace(/#([A-Fa-f0-9])/gi, \"$1$1\");\n\t\t}\n\t\telse\n\t\t{\n\t\t\thex = hex.replace(/#([A-Fa-f0-9])/gi, \"$1\");\n\t\t}\n\n\t\thex = hex.toLowerCase();\n\n\t\tlet darkColor = [\n\t\t\t\"#17a3ea\",\n\t\t\t\"#00aeef\",\n\t\t\t\"#00c4fb\",\n\t\t\t\"#47d1e2\",\n\t\t\t\"#75d900\",\n\t\t\t\"#ffab00\",\n\t\t\t\"#ff5752\",\n\t\t\t\"#468ee5\",\n\t\t\t\"#1eae43\"\n\t\t];\n\n\t\tif (darkColor.includes('#'+hex))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tlet bigint = parseInt(hex, 16);\n\n\t\tlet red = (bigint >> 16) & 255;\n\t\tlet green = (bigint >> 8) & 255;\n\t\tlet blue = bigint & 255;\n\n\t\tlet brightness = (red * 299 + green * 587 + blue * 114) / 1000;\n\n\t\treturn brightness < 128;\n\t},\n\n\thashCode(string = '')\n\t{\n\t\tlet hash = 0;\n\n\t\tif (typeof string === 'object' && string)\n\t\t{\n\t\t\tstring = JSON.stringify(string);\n\t\t}\n\t\telse if (typeof string !== 'string')\n\t\t{\n\t\t\tstring = string.toString();\n\t\t}\n\n\t\tif (typeof string !== 'string')\n\t\t{\n\t\t\treturn hash;\n\t\t}\n\n\t\tfor (let i = 0; i < string.length; i++)\n\t\t{\n\t\t\tlet char = string.charCodeAt(i);\n\t\t\thash = ((hash<<5)-hash)+char;\n\t\t\thash = hash & hash;\n\t\t}\n\t\treturn hash;\n\t},\n\n\t/**\n\t * The method compares versions, and returns - 0 if they are the same, 1 if version1 is greater, -1 if version1 is less\n\t *\n\t * @param version1\n\t * @param version2\n\t * @returns {number|NaN}\n\t */\n\tversionCompare(version1, version2)\n\t{\n\t\tlet isNumberRegExp = /^([\\d+\\.]+)$/;\n\n\t\tif (\n\t\t\t!isNumberRegExp.test(version1)\n\t\t\t|| !isNumberRegExp.test(version2)\n\t\t)\n\t\t{\n\t\t\treturn NaN;\n\t\t}\n\n\t\tversion1 = version1.toString().split('.');\n\t\tversion2 = version2.toString().split('.');\n\n\t\tif (version1.length < version2.length)\n\t\t{\n\t\t\twhile (version1.length < version2.length)\n\t\t\t{\n\t\t\t\tversion1.push(0);\n\t\t\t}\n\t\t}\n\t\telse if (version2.length < version1.length)\n\t\t{\n\t\t\twhile (version2.length < version1.length)\n\t\t\t{\n\t\t\t\tversion2.push(0);\n\t\t\t}\n\t\t}\n\n\t\tfor (var i = 0; i < version1.length; i++)\n\t\t{\n\t\t\tif (version1[i] > version2[i])\n\t\t\t{\n\t\t\t\treturn 1;\n\t\t\t}\n\t\t\telse if (version1[i] < version2[i])\n\t\t\t{\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t}\n\n\t\treturn 0;\n\t},\n\n\t/**\n\t * Throttle function. Callback will be executed no more than 'wait' period (in ms).\n\t *\n\t * @param callback\n\t * @param wait\n\t * @param context\n\t * @returns {Function}\n\t */\n\tthrottle(callback, wait, context = this)\n\t{\n\t\tlet timeout = null;\n\t\tlet callbackArgs = null;\n\n\t\tconst nextCallback = () => {\n\t\t\tcallback.apply(context, callbackArgs);\n\t\t\ttimeout = null;\n\t\t};\n\n\t\treturn function()\n\t\t{\n\t\t\tif (!timeout)\n\t\t\t{\n\t\t\t\tcallbackArgs = arguments;\n\t\t\t\ttimeout = setTimeout(nextCallback, wait);\n\t\t\t}\n\t\t}\n\t},\n\n\t/**\n\t * Debounce function. Callback will be executed if it hast been called for longer than 'wait' period (in ms).\n\t *\n\t * @param callback\n\t * @param wait\n\t * @param context\n\t * @returns {Function}\n\t */\n\tdebounce(callback, wait, context = this)\n\t{\n\t\tlet timeout = null;\n\t\tlet callbackArgs = null;\n\n\t\tconst nextCallback = () => {\n\t\t\tcallback.apply(context, callbackArgs);\n\t\t};\n\n\t\treturn function()\n\t\t{\n\t\t\tcallbackArgs = arguments;\n\n\t\t\tclearTimeout(timeout);\n\t\t\ttimeout = setTimeout(nextCallback, wait);\n\t\t}\n\t},\n\n\tgetLogTrackingParams(params = {}): string\n\t{\n\t\tlet result = [];\n\n\t\tlet {\n\t\t\tname = 'tracking',\n\t\t\tdata = [],\n\t\t\tdialog = null,\n\t\t\tmessage = null,\n\t\t\tfiles = null,\n\t\t} = params;\n\n\t\tname = encodeURIComponent(name);\n\n\t\tif (\n\t\t\tdata\n\t\t\t&& !(data instanceof Array)\n\t\t\t&& typeof data === 'object'\n\t\t)\n\t\t{\n\t\t\tlet dataArray = [];\n\t\t\tfor (let name in data)\n\t\t\t{\n\t\t\t\tif (data.hasOwnProperty(name))\n\t\t\t\t{\n\t\t\t\t\tdataArray.push(encodeURIComponent(name)+\"=\"+encodeURIComponent(data[name]));\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata = dataArray;\n\t\t}\n\t\telse if (!data instanceof Array)\n\t\t{\n\t\t\tdata = [];\n\t\t}\n\n\t\tif (dialog)\n\t\t{\n\t\t\tresult.push('timType='+dialog.type);\n\n\t\t\tif (dialog.type === 'lines')\n\t\t\t{\n\t\t\t\tresult.push('timLinesType='+dialog.entityId.split('|')[0]);\n\t\t\t}\n\t\t}\n\n\t\tif (files)\n\t\t{\n\t\t\tlet type = 'file';\n\t\t\tif (files instanceof Array && files[0])\n\t\t\t{\n\t\t\t\ttype = files[0].type;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttype = files.type;\n\t\t\t}\n\t\t\tresult.push('timMessageType='+type);\n\t\t}\n\t\telse if (message)\n\t\t{\n\t\t\tresult.push('timMessageType=text');\n\t\t}\n\n\t\tif (this.platform.isBitrixMobile())\n\t\t{\n\t\t\tresult.push('timDevice=bitrixMobile');\n\t\t}\n\t\telse if (this.platform.isBitrixDesktop())\n\t\t{\n\t\t\tresult.push('timDevice=bitrixDesktop');\n\t\t}\n\t\telse if (this.platform.isIos() || this.platform.isAndroid())\n\t\t{\n\t\t\tresult.push('timDevice=mobile');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tresult.push('timDevice=web');\n\t\t}\n\n\t\treturn name + (data.length? '&'+data.join('&'): '') + (result.length? '&'+result.join('&'): '');\n\t}\n};\n\nexport {Utils};"],"names":["Utils","browser","isSafari","isChrome","navigator","userAgent","toLowerCase","includes","isSafariBased","isFirefox","isIe","match","findParent","item","findTag","isHtmlElement","HTMLElement","document","parentNode","classList","contains","platform","isMac","isLinux","isWindows","isBitrixMobile","isBitrixDesktop","getDesktopVersion","getDesktopVersionStatic","BXDesktopSystem","version","GetProperty","isMobile","isAndroid","isIos","getIosVersion","matches","parseFloat","openNewPage","url","BX","MobileTools","openWidget","resolveOpenFunction","app","window","open","device","isDesktop","isMobileStatic","orientationHorizontal","orientationPortrait","getOrientation","Math","abs","orientation","types","isString","String","isArray","Object","prototype","toString","call","isFunction","Function","isDomNode","isDate","isPlainObject","nodeType","hasProp","hasOwnProperty","constructor","e","key","isUuidV4","uuid","uuidV4pattern","RegExp","search","dialog","getChatIdByDialogId","dialogId","isChatId","parseInt","substr","startsWith","isEmptyDialogId","text","quote","params","files","localize","message","replace","whole","userId","imol","chatId","command","rating","IM_F_RATING","FILE_ID","length","filesText","forEach","fileId","type","push","name","join","ATTACH","trim","purify","codeReplacement","id","title","indexOf","element","index","WITH_ATTACH","WITH_FILE","htmlspecialchars","htmlspecialcharsback","getLocalizeForNumber","phrase","number","language","pluralFormType","date","getFormatType","DateFormat","format","groupTitle","recentTitle","recentLinesTitle","readedTitle","vacationTitle","getDateFunction","dateFormatFunction","create","Main","Date","_getMessage","timestamp","cast","def","result","Number","isNaN","getTime","object","countKeys","obj","i","user","getLastDateText","dateFunction","online","bot","network","absent","isMobileActive","getOnlineStatus","isOnline","idle","getIdleText","lastSeenText","statusText","gender","lastActivityDate","IM_STATUS_OFFLINE","getOnlineLimit","status","toUpperCase","formatLastActivityDate","mobileLastDate","LIMIT_ONLINE","isDarkColor","hex","darkColor","bigint","red","green","blue","brightness","hashCode","string","hash","JSON","stringify","char","charCodeAt","versionCompare","version1","version2","isNumberRegExp","test","NaN","split","throttle","callback","wait","context","timeout","callbackArgs","nextCallback","apply","arguments","setTimeout","debounce","clearTimeout","getLogTrackingParams","data","encodeURIComponent","Array","dataArray","entityId"],"mappings":"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"}