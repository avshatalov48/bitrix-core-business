{"version":3,"file":"local-storage.bundle.js","sources":["../src/local-storage.js"],"sourcesContent":["import {Core} from 'im.v2.application.core';\n\nconst KEY_PREFIX = 'im-v2';\n\nexport class LocalStorageManager\n{\n\tstatic instance: LocalStorageManager;\n\n\t#siteId: string;\n\t#userId: number;\n\n\tstatic getInstance(): LocalStorageManager\n\t{\n\t\tif (!this.instance)\n\t\t{\n\t\t\tthis.instance = new this();\n\t\t}\n\n\t\treturn this.instance;\n\t}\n\n\tconstructor()\n\t{\n\t\tthis.#siteId = Core.getSiteId();\n\t\tthis.#userId = Core.getUserId();\n\t}\n\n\tset(key: string, value: any)\n\t{\n\t\tconst preparedValue = JSON.stringify(value);\n\t\tif (localStorage.getItem(this.#buildKey(key)) === preparedValue)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlocalStorage.setItem(this.#buildKey(key), preparedValue);\n\t}\n\n\tget(key: string, defaultValue: any = null)\n\t{\n\t\tconst result = localStorage.getItem(this.#buildKey(key));\n\t\tif (result === null)\n\t\t{\n\t\t\treturn defaultValue;\n\t\t}\n\n\t\ttry\n\t\t{\n\t\t\treturn JSON.parse(result);\n\t\t}\n\t\tcatch\n\t\t{\n\t\t\treturn defaultValue;\n\t\t}\n\t}\n\n\tremove(key: string)\n\t{\n\t\tlocalStorage.removeItem(this.#buildKey(key));\n\t}\n\n\t#buildKey(key: string): string\n\t{\n\t\treturn `${KEY_PREFIX}-${this.#siteId}-${this.#userId}-${key}`;\n\t}\n}"],"names":["KEY_PREFIX","LocalStorageManager","getInstance","instance","constructor","Core","getSiteId","getUserId","set","key","value","preparedValue","JSON","stringify","localStorage","getItem","setItem","get","defaultValue","result","parse","remove","removeItem"],"mappings":";;;;;;CAEA,MAAMA,UAAU,GAAG,OAAO;CAAC;CAAA;CAAA;AAE3B,CAAO,MAAMC,mBAAmB,CAChC;GAMC,OAAOC,WAAW,GAClB;KACC,IAAI,CAAC,IAAI,CAACC,QAAQ,EAClB;OACC,IAAI,CAACA,QAAQ,GAAG,IAAI,IAAI,EAAE;;KAG3B,OAAO,IAAI,CAACA,QAAQ;;GAGrBC,WAAW,GACX;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,sBAAWC,2BAAI,CAACC,SAAS,EAAE;KAC/B,4CAAI,sBAAWD,2BAAI,CAACE,SAAS,EAAE;;GAGhCC,GAAG,CAACC,GAAW,EAAEC,KAAU,EAC3B;KACC,MAAMC,aAAa,GAAGC,IAAI,CAACC,SAAS,CAACH,KAAK,CAAC;KAC3C,IAAII,YAAY,CAACC,OAAO,yCAAC,IAAI,wBAAWN,GAAG,EAAE,KAAKE,aAAa,EAC/D;OACC;;KAGDG,YAAY,CAACE,OAAO,yCAAC,IAAI,wBAAWP,GAAG,GAAGE,aAAa,CAAC;;GAGzDM,GAAG,CAACR,GAAW,EAAES,YAAiB,GAAG,IAAI,EACzC;KACC,MAAMC,MAAM,GAAGL,YAAY,CAACC,OAAO,yCAAC,IAAI,wBAAWN,GAAG,EAAE;KACxD,IAAIU,MAAM,KAAK,IAAI,EACnB;OACC,OAAOD,YAAY;;KAGpB,IACA;OACC,OAAON,IAAI,CAACQ,KAAK,CAACD,MAAM,CAAC;MACzB,CACD,MACA;OACC,OAAOD,YAAY;;;GAIrBG,MAAM,CAACZ,GAAW,EAClB;KACCK,YAAY,CAACQ,UAAU,yCAAC,IAAI,wBAAWb,GAAG,EAAE;;CAO9C;CAAC,oBAJUA,GAAW,EACrB;GACC,OAAQ,GAAET,UAAW,IAAC,wCAAE,IAAI,mBAAS,IAAC,wCAAE,IAAI,mBAAS,IAAGS,GAAI,EAAC;CAC9D;;;;;;;;"}