this.BX=this.BX||{};this.BX.Catalog=this.BX.Catalog||{};(function(t,e,n,i,s,a,o,l,r,c,d,_){"use strict";const p="b24:catalog:inventory-management:enabled";class v{open(t,e={}){const n=_.Type.isPlainObject(e)?e:{};return new Promise((i=>{var s,a,o;const l=(s=n.data)!=null?s:{};const r=(a=n.events)!=null?a:{};r.onClose=(o=r.onClose)!=null?o:t=>i(t.getSlider());const c=e.urlParams||{};const d=BX.util.add_url_param(t,{analyticsLabel:"inventoryManagementEnabled_openSlider",...c});if(_.Type.isString(d)&&d.length>1){BX.SidePanel.Instance.open(d,{cacheable:false,allowChangeHistory:false,events:r,data:l,width:930})}else{i()}}))}static saveEnabledFlag(){if(!window.sessionStorage){return}sessionStorage.setItem(p,"y")}static showEnabledNotificationIfNeeded(){if(!window.sessionStorage){return}if(sessionStorage.getItem(p)==="y"){sessionStorage.removeItem(p);window.top.BX.UI.Notification.Center.notify({content:_.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_ENABLED"),autoHide:true,autoHideDelay:4e3,width:"auto"})}}}class T{}T.SECTION="section";T.ANALYTICS_MENU_ITEM="analytics_menu_item";T.LANDING="landing";T.PRODUCT_CARD="product_card";T.DOCUMENT_LIST="document_list";T.DOCUMENT_CARD="document_card";T.SETTINGS="settings";T.OLD_SETTINGS="old_settings";const u={props:{title:{type:String}},data(){return{timer:null}},created(){this.popup=new n.Popup({bindElement:null,darkMode:true,angle:{offset:82},content:this.title,maxWidth:220,offsetLeft:115/2-57.5,animation:"fading-slide"})},beforeUnmount(){this.closePopup()},methods:{mouseenter(t){this.timer=setTimeout((()=>{this.popup.setBindElement(t.target);this.popup.show()}),400)},mouseleave(){this.closePopup()},closePopup(){clearTimeout(this.timer);this.popup.close()}},template:`\n\t\t<div\n\t\t\t@mouseenter="mouseenter"\n\t\t\t@mouseleave="mouseleave"\n\t\t\tclass="inventory-management__action-hint">\n\t\t</div>\n\t`};const h={components:{BIcon:e.BIcon},props:{title:{type:String},link:{type:String,required:false}},computed:{set(){return e.Set}},methods:{onClick(){if(top.BX&&top.BX.Helper){top.BX.Helper.show(this.link||"redirect=detail&code=20233688")}}},template:`\n\t\t<div\n\t\t\t@click.stop="onClick"\n\t\t\tclass="inventory-management__card-help">\n\t\t\t<BIcon :name="set.HELP" :size="23" color="var(--ui-color-base-40)"></BIcon>\n\t\t\t<div class="inventory-management__card-help-text">\n\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_DETAILS')}}\n\t\t\t</div>\n\t\t</div>\n\t`};const E={props:{isActive:{type:Boolean,required:true},isHovered:{type:Boolean,required:true,default:false}},components:{CardBoxHelp:h,ActionHint:u},computed:{cardItemClass(){return{"--active":this.isHovered}},cardItemStyle(){return{cursor:this.isActive?"default":"pointer"}},langClass(){return`--${this.$Bitrix.Loc.getMessage("LANGUAGE_ID")||"en"}`}},methods:{onClick(){this.$emit("pick")},mouseenter(){this.$emit("enter")},mouseleave(){this.$emit("leave")}}};const b={methods:{replaceLangPhrase(t){return this.$Bitrix.Loc.getMessage(t).replaceAll("[break]","<br>").replaceAll("[bold]","<span>").replaceAll("[/bold]","</span>")}}};const N={mixins:[E,b],template:`\n\t\t<div\n\t\t\t@mouseenter="mouseenter"\n\t\t\t@mouseleave="mouseleave"\n\t\t\t@click="onClick"\n\t\t\tclass="inventory-management__card-item"\n\t\t\t:class="cardItemClass"\n\t\t\t:style="cardItemStyle"\n\t\t>\n\t\t\t<div class="inventory-management__card-logo" :class="langClass"></div>\n\t\t\t<div\n\t\t\t\tv-html="replaceLangPhrase('CATALOG_INVENTORY_MANAGEMENT_TITLE_B24')"\n\t\t\t\tclass="inventory-management__card-title"\n\t\t\t></div>\n\t\t\t<ul class="inventory-management__card-list">\n\t\t\t\t<li class="inventory-management__card-list-item">\n\t\t\t\t\t<span class="ui-icon-set --check"></span>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_LIST_ITEM_B24_1')}}\n\t\t\t\t</li>\n\t\t\t\t<li class="inventory-management__card-list-item">\n\t\t\t\t\t<span class="ui-icon-set --check"></span>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_LIST_ITEM_B24_2')}}\n\t\t\t\t</li>\n\t\t\t\t<li class="inventory-management__card-list-item">\n\t\t\t\t\t<span class="ui-icon-set --check"></span>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_LIST_ITEM_B24_3')}}\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="inventory-management__card-action-box">\n\t\t\t\t<div class="inventory-management__card-action-item">\n\t\t\t\t\t<div class="ui-icon-set --play"></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-html="replaceLangPhrase('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_B24_1')"\n\t\t\t\t\t\tclass="inventory-management__card-action-text"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<action-hint\n\t\t\t\t\t\t:title="$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_B24_1_HINT')"\n\t\t\t\t\t></action-hint>\n\t\t\t\t</div>\n\t\t\t\t<div class="inventory-management__card-action-item">\n\t\t\t\t\t<div class="ui-icon-set --refresh-6"></div>\n\t\t\t\t\t<div class="inventory-management__card-action-text">\n\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_B24_2')}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<action-hint\n\t\t\t\t\t\t:title="$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_B24_2_HINT')"\n\t\t\t\t\t></action-hint>\n\t\t\t\t</div>\n\t\t\t\t<div class="inventory-management__card-action-item">\n\t\t\t\t\t<div class="ui-icon-set --mobile-2"></div>\n\t\t\t\t\t<div class="inventory-management__card-action-text">\n\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_B24_3')}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<action-hint\n\t\t\t\t\t\t:title="$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_B24_3_HINT')"\n\t\t\t\t\t></action-hint>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="inventory-management__card-select-box">\n\t\t\t\t<div\n\t\t\t\t\tv-html="replaceLangPhrase('CATALOG_INVENTORY_MANAGEMENT_SELECT_TEXT_B24')"\n\t\t\t\t\tclass="inventory-management__card-select-text"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class="inventory-management__card-select-icon">\n\t\t\t\t\t<div class="ui-icon-set --check"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="inventory-management__card-control-box">\n\t\t\t\t<button\n\t\t\t\t\tv-if="!isActive"\n\t\t\t\t\tclass="ui-btn ui-btn-primary ui-btn-round ui-btn-lg"\n\t\t\t\t>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_BUTTON')}}\n\t\t\t\t</button>\n\t\t\t\t<card-box-help></card-box-help>\n\t\t\t</div>\n\t\t</div>\n\t`};const A={mixins:[E,b],created(){this.setBodyClass()},methods:{getHelpLink(){return"redirect=detail&code=15992592"},setBodyClass(){_.Dom.addClass(document.body,"inventory-management__solo")}},template:`\n\t\t<div class="inventory-management__card-box-solo">\n\t\t\t<div class="inventory-management__card-solo-icon" :class="langClass"></div>\n\t\t\t<div\n\t\t\t\t@click="onClick"\n\t\t\t\t@mouseenter="mouseenter"\n\t\t\t\t@mouseleave="mouseleave"\n\t\t\t\tclass="inventory-management__card-item"\n\t\t\t\t:class="cardItemClass"\n\t\t\t\t:style="cardItemStyle"\n\t\t\t>\n\t\t\t\t<div class="inventory-management__card-logo" :class="langClass"></div>\n\t\t\t\t<div class="inventory-management__card-title">\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_TITLE_B24_SOLO')}}\n\t\t\t\t</div>\n\t\t\t\t<ul class="inventory-management__card-list">\n\t\t\t\t\t<li class="inventory-management__card-list-item">\n\t\t\t\t\t\t<span class="ui-icon-set --check"></span>\n\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_LIST_ITEM_B24_1_SOLO')}}\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="inventory-management__card-list-item">\n\t\t\t\t\t\t<span class="ui-icon-set --check"></span>\n\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_LIST_ITEM_B24_2_SOLO')}}\n\t\t\t\t\t</li>\n\t\t\t\t\t<li class="inventory-management__card-list-item">\n\t\t\t\t\t\t<span class="ui-icon-set --check"></span>\n\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_LIST_ITEM_B24_3_SOLO')}}\n\t\t\t\t\t</li>\n\t\t\t\t</ul>\n\t\t\t\t<div class="inventory-management__card-action-box">\n\t\t\t\t\t<div class="inventory-management__card-action-item">\n\t\t\t\t\t\t<div class="ui-icon-set --play"></div>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\tv-html="replaceLangPhrase('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_B24_1')"\n\t\t\t\t\t\t\tclass="inventory-management__card-action-text"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<action-hint\n\t\t\t\t\t\t\t:title="$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_B24_1_HINT')"\n\t\t\t\t\t\t></action-hint>\n\t\t\t\t</div>\n\t\t\t\t<div class="inventory-management__card-action-item">\n\t\t\t\t\t<div class="ui-icon-set --refresh-6"></div>\n\t\t\t\t\t<div class="inventory-management__card-action-text">\n\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_B24_2')}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<action-hint\n\t\t\t\t\t\t:title="$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_B24_2_HINT')"\n\t\t\t\t\t></action-hint>\n\t\t\t\t</div>\n\t\t\t\t<div class="inventory-management__card-action-item">\n\t\t\t\t\t<div class="ui-icon-set --mobile-2"></div>\n\t\t\t\t\t<div class="inventory-management__card-action-text">\n\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_B24_3')}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<action-hint\n\t\t\t\t\t\t:title="$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_B24_3_HINT')"\n\t\t\t\t\t></action-hint>\n\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="inventory-management__card-select-box">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-html="replaceLangPhrase('CATALOG_INVENTORY_MANAGEMENT_SELECT_TEXT_B24_SOLO')"\n\t\t\t\t\t\tclass="inventory-management__card-select-text"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="inventory-management__card-select-icon">\n\t\t\t\t\t\t<div class="ui-icon-set --check"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class="inventory-management__card-control-box">\n\t\t\t\t\t<button\n\t\t\t\t\t\tv-if="!isActive"\n\t\t\t\t\t\tclass="ui-btn ui-btn-primary ui-btn-round ui-btn-lg"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_BUTTON_ENABLE_SOLO')}}\n\t\t\t\t\t</button>\n\t\t\t\t\t<card-box-help\n\t\t\t\t\t\t:link="getHelpLink()"\n\t\t\t\t\t>\n\t\t\t\t\t</card-box-help>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};const g={mixins:[E,b],template:`\n\t\t<div\n\t\t\t@mouseenter="mouseenter"\n\t\t\t@mouseleave="mouseleave"\n\t\t\t@click="onClick"\n\t\t\tclass="inventory-management__card-item --1c"\n\t\t\t:class="cardItemClass"\n\t\t\t:style="cardItemStyle"\n\t\t>\n\t\t\t<div class="inventory-management__card-logo"></div>\n\t\t\t<div\n\t\t\t\tv-html="replaceLangPhrase('CATALOG_INVENTORY_MANAGEMENT_TITLE_1C')"\n\t\t\t\tclass="inventory-management__card-title"\n\t\t\t>\n\t\t\t</div>\n\t\t\t<ul class="inventory-management__card-list">\n\t\t\t\t<li class="inventory-management__card-list-item">\n\t\t\t\t\t<span class="ui-icon-set --check"></span>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_LIST_ITEM_1C_1')}}\n\t\t\t\t</li>\n\t\t\t\t<li class="inventory-management__card-list-item">\n\t\t\t\t\t<span class="ui-icon-set --check"></span>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_LIST_ITEM_1C_2')}}\n\t\t\t\t</li>\n\t\t\t\t<li class="inventory-management__card-list-item">\n\t\t\t\t\t<span class="ui-icon-set --check"></span>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_LIST_ITEM_1C_3')}}\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div class="inventory-management__card-action-box">\n\t\t\t\t<div class="inventory-management__card-action-item">\n\t\t\t\t\t<div class="ui-icon-set --cubes-3"></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-html="replaceLangPhrase('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_1C_1')"\n\t\t\t\t\t\tclass="inventory-management__card-action-text">\n\t\t\t\t\t</div>\n\t\t\t\t\t<action-hint\n\t\t\t\t\t\t:title="$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_1C_1_HINT')"\n\t\t\t\t\t></action-hint>\n\t\t\t\t</div>\n\t\t\t\t<div class="inventory-management__card-action-item">\n\t\t\t\t\t<div class="ui-icon-set --shop-list"></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-html="replaceLangPhrase('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_1C_2')"\n\t\t\t\t\t\tclass="inventory-management__card-action-text"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<action-hint\n\t\t\t\t\t\t:title="$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_1C_2_HINT')"\n\t\t\t\t\t></action-hint>\n\t\t\t\t</div>\n\t\t\t\t<div class="inventory-management__card-action-item">\n\t\t\t\t\t<div class="ui-icon-set --persons-3"></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-html="replaceLangPhrase('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_1C_3')"\n\t\t\t\t\t\tclass="inventory-management__card-action-text"\n\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<action-hint\n\t\t\t\t\t\t:title="$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_ACTION_ITEM_1C_3_HINT')"\n\t\t\t\t\t></action-hint>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="inventory-management__card-select-box">\n\t\t\t\t<div\n\t\t\t\t\tv-html="replaceLangPhrase('CATALOG_INVENTORY_MANAGEMENT_SELECT_TEXT_1C')"\n\t\t\t\t\tclass="inventory-management__card-select-text"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div class="inventory-management__card-select-icon">\n\t\t\t\t\t<div class="ui-icon-set --check"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="inventory-management__card-control-box">\n\t\t\t\t<button\n\t\t\t\t\tv-if="!isActive"\n\t\t\t\t\tclass="ui-btn ui-btn-primary ui-btn-round ui-btn-lg"\n\t\t\t\t>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_BUTTON')}}\n\t\t\t\t</button>\n\t\t\t\t<card-box-help></card-box-help>\n\t\t\t</div>\n\t\t</div>\n\t`};let m=t=>t,M;const L={components:{BIcon:e.BIcon},props:{title:{type:String},helpLink:{type:String}},data(){return{timer:null}},created(){this.hint=BX.UI.Hint.createInstance({popupParameters:{maxWidth:430,className:"inventory-management__popup-hint",borderRadius:"10px",autoHide:true}})},beforeUnmount(){this.hint.hide()},computed:{set(){return e.Set},getContent(){return _.Tag.render(M||(M=m`
				<div>
					${0}
				</div>		
			`),this.title.replace("[link]",`<a class="inventory-management__popup-link --hint-link" onclick="if(top.BX.Helper) { top.BX.Helper.show('${this.helpLink}'); event.preventDefault(); }" href="#">`).replace("[/link]","</a>"))}},methods:{mouseenter(t){this.hint.show(t.target,this.getContent.outerHTML)}},template:`\n\t\t<div\n\t\t\t@mouseenter="mouseenter"\n\t\t\tclass="inventory-management__icon-hint"\n\t\t\tref="hintNode"\n\t\t\t>\n\t\t\t<BIcon :name="set.HELP" :size="23" color="var(--ui-color-base-40)"></BIcon>\n\t\t</div>\n\t`};const O={props:{text:{type:String,required:true},hint:{type:String,required:true,default:""},helpLink:{type:String,required:false,default:""}},components:{IconHint:L},template:`\n\t\t<div class="inventory-management__card-limit">\n\t\t\t<div v-html="text" class="inventory-management__card-limit-text"></div>\n\t\t\t<icon-hint\n\t\t\t\tv-if="hint"\n\t\t\t\t:title="hint"\n\t\t\t\t:helpLink="helpLink"\n\t\t\t/>\n\t\t</div>\n\t`};let B=t=>t,I,C,P,y,G,x;var f=babelHelpers.classPrivateFieldLooseKey("options");var H=babelHelpers.classPrivateFieldLooseKey("popup");var S=babelHelpers.classPrivateFieldLooseKey("iconNode");var R=babelHelpers.classPrivateFieldLooseKey("titleNode");var F=babelHelpers.classPrivateFieldLooseKey("primaryButton");var $=babelHelpers.classPrivateFieldLooseKey("secondaryButton");var D=babelHelpers.classPrivateFieldLooseKey("helpLink");var V=babelHelpers.classPrivateFieldLooseKey("getContent");class k{constructor(t={}){var e;Object.defineProperty(this,V,{value:Y});Object.defineProperty(this,f,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:void 0});Object.defineProperty(this,S,{writable:true,value:void 0});Object.defineProperty(this,R,{writable:true,value:void 0});Object.defineProperty(this,F,{writable:true,value:void 0});Object.defineProperty(this,$,{writable:true,value:void 0});Object.defineProperty(this,D,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,f)[f]=t;const i=babelHelpers.classPrivateFieldLooseBase(this,V)[V]();babelHelpers.classPrivateFieldLooseBase(this,H)[H]=new n.Popup({content:i,width:(e=babelHelpers.classPrivateFieldLooseBase(this,f)[f].width)!=null?e:527,overlay:true,events:{onClose:babelHelpers.classPrivateFieldLooseBase(this,f)[f].events.onClose.bind(this)}});_.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,F)[F],"click",babelHelpers.classPrivateFieldLooseBase(this,f)[f].events.onPrimaryClick.bind(this));_.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,$)[$],"click",babelHelpers.classPrivateFieldLooseBase(this,f)[f].events.onSecondaryClick.bind(this));BX.UI.Hint.init(i)}show(t){if(t===true){if(babelHelpers.classPrivateFieldLooseBase(this,H)[H].isShown()){return}babelHelpers.classPrivateFieldLooseBase(this,H)[H].show();babelHelpers.classPrivateFieldLooseBase(this,H)[H].resizeOverlay()}else{if(!babelHelpers.classPrivateFieldLooseBase(this,H)[H].isShown()){return}babelHelpers.classPrivateFieldLooseBase(this,H)[H].close()}}load(t){const e="ui-btn-clock";if(t&&!_.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,F)[F],e)){_.Dom.addClass(babelHelpers.classPrivateFieldLooseBase(this,F)[F],e)}else if(t===false&&_.Dom.hasClass(babelHelpers.classPrivateFieldLooseBase(this,F)[F],e)){_.Dom.removeClass(babelHelpers.classPrivateFieldLooseBase(this,F)[F],e)}}}function Y(){var t;const e=(t=babelHelpers.classPrivateFieldLooseBase(this,f)[f].primaryButtonClass)!=null?t:"ui-btn-primary";babelHelpers.classPrivateFieldLooseBase(this,S)[S]=babelHelpers.classPrivateFieldLooseBase(this,f)[f].hideIcon?"":_.Tag.render(I||(I=B`<div class="inventory-management__popup-icon"></div>`));babelHelpers.classPrivateFieldLooseBase(this,F)[F]=_.Tag.render(C||(C=B`
			<button class="ui-btn ${0}">
				${0}
			</button>
		`),e,babelHelpers.classPrivateFieldLooseBase(this,f)[f].primaryButtonText);babelHelpers.classPrivateFieldLooseBase(this,$)[$]=_.Tag.render(P||(P=B`
			<button	class="ui-btn ui-btn-light-border inventory-management__popup-cancel">
				${0}
			</button>
		`),babelHelpers.classPrivateFieldLooseBase(this,f)[f].secondaryButtonText);babelHelpers.classPrivateFieldLooseBase(this,R)[R]=babelHelpers.classPrivateFieldLooseBase(this,f)[f].title?_.Tag.render(y||(y=B`
				<div class="inventory-management__popup-title">
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,f)[f].title):null;babelHelpers.classPrivateFieldLooseBase(this,D)[D]=babelHelpers.classPrivateFieldLooseBase(this,f)[f].hideHelp?"":_.Tag.render(G||(G=B`
				<a href="#" class="inventory-management__popup-link">
					${0}
				</a>
			`),_.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_DETAILS"));if(babelHelpers.classPrivateFieldLooseBase(this,D)[D]&&babelHelpers.classPrivateFieldLooseBase(this,f)[f].helpCode){_.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,D)[D],"click",(t=>{if(top.BX&&top.BX.Helper){t.preventDefault();top.BX.Helper.show(`redirect=detail&code=${babelHelpers.classPrivateFieldLooseBase(this,f)[f].helpCode}`)}}))}const n=babelHelpers.classPrivateFieldLooseBase(this,f)[f].texts.length===1&&!babelHelpers.classPrivateFieldLooseBase(this,f)[f].title;return _.Tag.render(x||(x=B`
			<div class="inventory-management__popup">
				${0}
				${0}
				${0}
				${0}
				<div class="ui-btn-container ui-btn-container-center">
					${0}
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,S)[S],babelHelpers.classPrivateFieldLooseBase(this,R)[R],babelHelpers.classPrivateFieldLooseBase(this,f)[f].texts.map((t=>`\n\t\t\t\t\t<div class="inventory-management__popup-text${n?" --no-margin":""}">\n\t\t\t\t\t\t${t.text}\n\t\t\t\t\t\t${t.hint?`<span data-hint="${t.hint}"></span>`:""}\n\t\t\t\t\t</div>\n\t\t\t\t`)).join(""),babelHelpers.classPrivateFieldLooseBase(this,D)[D],babelHelpers.classPrivateFieldLooseBase(this,F)[F],babelHelpers.classPrivateFieldLooseBase(this,$)[$])}const w={props:{isLoading:{type:Boolean},isShown:{type:Boolean},primaryButtonText:{type:String},title:{type:String},texts:{type:Array}},created(){this.popup=new k({helpCode:this.getSetting("availableModes").length>1?"20233748":"15992592",title:this.title,texts:this.texts,primaryButtonText:this.primaryButtonText,secondaryButtonText:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_POPUP_BUTTON_CANCEL"),events:{onPrimaryClick:()=>this.$emit("enable"),onSecondaryClick:()=>this.popup.show(false),onClose:()=>this.$emit("cancel")}})},methods:{getSetting(t){return _.Extension.getSettings("catalog.store-enable-wizard").get(t)}},watch:{isLoading(t){this.popup.load(t)},isShown(t){this.popup.show(t)}},template:""};class X{static enable(t){return new Promise(((e,n)=>{_.ajax.runAction("catalog.config.inventoryManagementEnable",t).then((t=>e(t))).catch((t=>n(t.errors[0])))}))}static disable(){return new Promise(((t,e)=>{_.ajax.runAction("catalog.config.inventoryManagementDisable").then((e=>t())).catch((t=>e(t.errors[0])))}))}static isOnecAppInstalled(){return new Promise(((t,e)=>{_.ajax.runComponentAction("bitrix:catalog.store.enablewizard","getOnecApp",{mode:"class"}).then((e=>{var n;return t(Boolean(e==null?void 0:(n=e.data)==null?void 0:n.isInstalled))})).catch((t=>e(t)))}))}}const U={data(){return{isShownPopup:false,isEnabling:false}},props:{options:{type:Object,required:true}},components:{IconHint:L,EnableWarning:O,PopupField:w},methods:{onBack(){this.$emit("back")},getMode(){throw new Error('Abstract method "getMode" must be implemented')},getEnableOptions(){return{}},onEnableSuccess(){this.$Bitrix.Application.instance.sendEnableDoneEvent(this.getMode(),"success");const t=BX.SidePanel.Instance.getTopSlider();if(t){t.getData().set("isInventoryManagementEnabled",true);t.getData().set("inventoryManagementMode",this.getMode());t.close()}},onEnableError(t){var e,n;this.$Bitrix.Application.instance.sendEnableDoneEvent(this.getMode(),`error_${(e=t==null?void 0:(n=t.customData)==null?void 0:n.analyticsCode)!=null?e:"unknown"}`);top.BX.UI.Notification.Center.notify({content:_.Text.encode(t.message)})},enable(){if(this.isEnabling){return}this.isEnabling=true;this.$Bitrix.Application.instance.sendEnableProceededEvent(this.getMode());X.enable({analyticsLabel:this.makeAnalyticsData(),data:{mode:this.getMode(),options:this.getEnableOptions()}}).then((()=>this.onEnableSuccess())).catch((t=>this.onEnableError(t))).finally((()=>{this.isEnabling=false;this.isShownPopup=false}))},makeAnalyticsData(){const t={iME:"inventoryManagementEnabled"};if(this.options.inventoryManagementSource){t.inventoryManagementSource=this.options.inventoryManagementSource}return t},openHelp(){if(top.BX&&top.BX.Helper){top.BX.Helper.show(this.getHelpLink())}},getHelpLink(){throw new Error('Abstract method "getHelpLink" must be implemented')}}};class j{}j.MODE_B24="B24";j.MODE_1C="1C";const K={data(){return{costPriceMethod:""}},mixins:[U,b],computed:{popupTitle(){if(this.options.hasConductedDocumentsOrQuantities){return this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_DATA_WILL_BE_DELETED_MSGVER_1")}return null},popupTexts(){const t=[];if(this.options.hasConductedDocumentsOrQuantities){t.push({text:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_DELETE_DOCUMENTS_AND_QUANTITY_TEXT_ON_ENABLE_B24_MSGVER_1"),hint:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_DISABLE_CONFIRMATION_TEXT_2")})}return t},startEnablingButtonClass(){return{"ui-btn-clock":this.isEnabling&&!this.isShownPopup,"ui-btn-disabled":!this.isFormValid}},startEnablingButtonTitle(){if(this.isFormValid){return null}return this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_B24_ENABLE_COST_PRICE_METHOD_REQUIRED")},isFormValid(){return _.Type.isStringFilled(this.costPriceMethod)}},methods:{startEnabling(){if(!this.isFormValid){return}if(this.options.isPlanRestricted){top.BX.UI.InfoHelper.show("limit_store_inventory_management");return}if(this.popupTexts.length===0){this.enable();return}this.isShownPopup=true},getMode(){return j.MODE_B24},getEnableOptions(){return{costPriceCalculationMethod:this.costPriceMethod}},getHelpLink(){return"redirect=detail&code=17858278"}},template:`\n\t\t<div class="inventory-management__card-item --active --inner-field">\n\t\t\t<div class="inventory-management__card-item-inner">\n\t\t\t\t<div class="inventory-management__card-logo"></div>\n\t\t\t\t<div class="inventory-management__card-title">\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_INNER_TITLE')}}\n\t\t\t\t</div>\n\t\t\t\t<div \n\t\t\t\t\tclass="inventory-management__card-desc" \n\t\t\t\t\tv-html="this.$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_INNER_DESC_1')"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass="inventory-management__card-desc"\n\t\t\t\t\tv-html="replaceLangPhrase('CATALOG_INVENTORY_MANAGEMENT_INNER_DESC_2')"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t\t<a\n\t\t\t\t\t@click="openHelp"\n\t\t\t\t\thref="#" class="inventory-management__card-link"\n\t\t\t\t>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_DETAILS')}}\n\t\t\t\t</a>\n\t\t\t\t<div class="inventory-management__card-select-field">\n\t\t\t\t\t<div class="inventory-management__card-select-title">\n\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_INNER_SELECT_TITLE')}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100">\n\t\t\t\t\t\t<div class="ui-ctl-after ui-ctl-icon-angle"></div>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tv-model="costPriceMethod"\n\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option value="">\n\t\t\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_COST_PRICE_METHOD_NOT_SELECTED')}}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\tv-for="(name, value) in options.costPriceMethodList"\n\t\t\t\t\t\t\t\t:value="value"\n\t\t\t\t\t\t\t\t:key="value"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{name}}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="ui-btn-container inventory-management__card-footer">\n\t\t\t\t<button\n\t\t\t\t\tv-if="!options.isBlocked"\n\t\t\t\t\t@click="onBack"\n\t\t\t\t\tclass="ui-btn ui-btn-light-border ui-btn-round ui-btn-lg"\n\t\t\t\t>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_BUTTON_BACK')}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\t@click="startEnabling"\n\t\t\t\t\tclass="ui-btn ui-btn-primary ui-btn-round ui-btn-lg"\n\t\t\t\t\t:class="startEnablingButtonClass"\n\t\t\t\t\t:title="startEnablingButtonTitle"\n\t\t\t\t>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_BUTTON_START')}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<popup-field\n\t\t\t@enable="enable"\n\t\t\t@cancel="isShownPopup = false"\n\t\t\t:isShown="isShownPopup"\n\t\t\t:isLoading="isEnabling"\n\t\t\t:title="popupTitle"\n\t\t\t:texts="popupTexts"\n\t\t\t:primaryButtonText="$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_POPUP_BUTTON_NEXT')"\n\t\t/>\n\t`};const W="OTHER";const q={mixins:[U,b],data(){return{isAppInstalled:false,isAppStatusChecking:false,version:Object.keys(this.options.versionList)[0],isDemoEnabledFromSlider:false}},computed:{isLoading(){return this.isEnabling||this.isAppStatusChecking},popupPrimaryButtonText(){return this.$Bitrix.Loc.getMessage(this.popupTexts>0?"CATALOG_INVENTORY_MANAGEMENT_POPUP_BUTTON_NEXT":"CATALOG_INVENTORY_MANAGEMENT_POPUP_BUTTON_NEXT_2")},popupTitle(){if(this.options.hasConductedDocumentsOrQuantities){if(this.options.areTherePublishedShops){return this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_1C_POPUP_WARNING_TITLE_1")}return this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_1C_POPUP_WARNING_TITLE_2")}if(this.options.areTherePublishedShops){return this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_1C_POPUP_WARNING_TITLE_3")}if(this.options.areThereActiveProducts){return this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_1C_POPUP_WARNING_TITLE_4")}return""},popupTexts(){const t=[];if(this.options.hasConductedDocumentsOrQuantities){if(this.options.currentMode===j.MODE_B24){if(this.options.areTherePublishedShops&&this.options.areThereActiveProducts){t.push({text:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_1C_POPUP_WARNING_TEXT_1"),hint:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_DISABLE_CONFIRMATION_TEXT_2")})}else{t.push({text:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_1C_POPUP_WARNING_TEXT_1")},{text:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_1C_POPUP_WARNING_TEXT_11"),hint:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_DISABLE_CONFIRMATION_TEXT_2")})}}else{t.push({text:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_1C_POPUP_WARNING_TEXT_2"),hint:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_DISABLE_CONFIRMATION_TEXT_2")})}}if(this.options.areTherePublishedShops){t.push({text:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_1C_POPUP_WARNING_TEXT_3")})}if(this.options.areThereActiveProducts){t.push({text:this.replaceLangPhrase("CATALOG_INVENTORY_MANAGEMENT_1C_POPUP_WARNING_TEXT_4"),hint:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_1C_POPUP_WARNING_TEXT_4_HINT")})}return t},startEnablingButtonClass(){return{"ui-btn-clock":this.isLoading&&!this.isShownPopup,"ui-btn-disabled":!this.isFormValid}},isFormValid(){return true}},methods:{startEnabling(){if(!this.isFormValid){return}if(this.options.isPlanRestricted&&!this.isDemoEnabledFromSlider){o.OneCPlanRestrictionSlider.show({onActivateSuccessHandler:()=>{this.isDemoEnabledFromSlider=true;this.startEnabling()}});return}if(this.popupTexts.length===0){this.onecEnable();return}this.isShownPopup=true},onecEnable(){this.checkIfOnecAppInstalled().then((()=>this.enableOrInstall())).catch((t=>console.error(t)))},checkIfOnecAppInstalled(){this.isAppStatusChecking=true;return new Promise((t=>{X.isOnecAppInstalled().then((t=>{this.isAppInstalled=t})).catch((t=>console.error(t))).finally((()=>{this.isAppStatusChecking=false;t()}))}))},enableOrInstall(){if(this.isAppInstalled){this.enable()}else{this.isShownPopup=false;BX.SidePanel.Instance.open(this.options.installUrl,{cacheable:false,allowChangeHistory:false,width:1e3,events:{onCloseComplete:()=>{if(!this.isAppInstalled){return}this.enable()}}});top.BX.addCustomEvent(top,"Rest:AppLayout:ApplicationInstall",((t,e)=>{this.isAppInstalled=Boolean(t)}))}},getModeLimitationTexts(){return[{text:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_LANDING_SHOP_PUBLICATION_WARNING"),hint:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_LANDING_SHOP_PUBLICATION_WARNING_HINT")}]},getMode(){return j.MODE_1C},getEnableOptions(){return{version:this.version}},getHelpLink(){return"redirect=detail&code=20233716"},openHelp(){if(top.BX&&top.BX.Helper){top.BX.Helper.show(this.getHelpLink())}}},watch:{version(t){if(t===W){_.Runtime.loadExtension(["ui.feedback.form"]).then((()=>{BX.UI.Feedback.Form.open({id:"catalog-enable-wizard-1c-other-version",forms:[{zones:["ru","by","kz"],title:"",id:704,lang:"ru",sec:"phfehj"}],presets:_.Extension.getSettings("catalog.store-enable-wizard").get("feedbackFormOtherVersion1CPresets")})})).catch((t=>console.error(t)))}}},template:`\n\t\t<div class="inventory-management__card-item --1c --active --inner-field">\n\t\t\t<div class="inventory-management__card-item-inner">\n\t\t\t\t<div class="inventory-management__card-logo"></div>\n\t\t\t\t<div class="inventory-management__card-title">\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_INNER_TITLE_1C')}}\n\t\t\t\t</div>\n\t\t\t\t<div class="inventory-management__card-desc">\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_INNER_DESC_1C')}}\n\t\t\t\t</div>\n\t\t\t\t<a\n\t\t\t\t\t@click="openHelp"\n\t\t\t\t\thref="#" class="inventory-management__card-link"\n\t\t\t\t>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_DETAILS')}}\n\t\t\t\t</a>\n\t\t\t\t<div class="inventory-management__card-select-field">\n\t\t\t\t\t<div class="inventory-management__card-select-title-wo-star">\n\t\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_INNER_SELECT_TITLE_1C')}}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100">\n\t\t\t\t\t\t<div class="ui-ctl-after ui-ctl-icon-angle"></div>\n\t\t\t\t\t\t<select\n\t\t\t\t\t\t\tv-model="version"\n\t\t\t\t\t\t\tclass="ui-ctl-element"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<option\n\t\t\t\t\t\t\t\tv-for="(name, value) in options.versionList"\n\t\t\t\t\t\t\t\t:value="value"\n\t\t\t\t\t\t\t\t:key="value"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{{name}}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t</select>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<enable-warning\n\t\t\t\t\tv-for="warning in getModeLimitationTexts()"\n\t\t\t\t\t:text="warning.text"\n\t\t\t\t\t:hint="warning.hint"\n\t\t\t\t\t:help-link="getHelpLink()"\n\t\t\t\t>\n\t\t\t\t</enable-warning>\n\t\t\t</div>\n\t\t\t<div class="ui-btn-container inventory-management__card-footer">\n\t\t\t\t<button\n\t\t\t\t\tv-if="!options.isBlocked"\n\t\t\t\t\t@click="onBack"\n\t\t\t\t\tclass="ui-btn ui-btn-light-border ui-btn-round ui-btn-lg"\n\t\t\t\t>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_BUTTON_BACK')}}\n\t\t\t\t</button>\n\t\t\t\t<button\n\t\t\t\t\t@click="startEnabling"\n\t\t\t\t\tclass="ui-btn ui-btn-primary ui-btn-round ui-btn-lg"\n\t\t\t\t\t:class="startEnablingButtonClass"\n\t\t\t\t>\n\t\t\t\t\t{{$Bitrix.Loc.getMessage('CATALOG_INVENTORY_MANAGEMENT_POPUP_BUTTON_NEXT')}}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t</div>\n\t\t<popup-field\n\t\t\t@enable="onecEnable"\n\t\t\t@cancel="isShownPopup = false"\n\t\t\t:isShown="isShownPopup"\n\t\t\t:isLoading="isLoading"\n\t\t\t:title="popupTitle"\n\t\t\t:texts="popupTexts"\n\t\t\t:primaryButtonText="popupPrimaryButtonText"\n\t\t/>\n\t`};const Q={props:{options:{type:Object,required:true}},template:`\n\t\t<div v-if="options !== null" class="inventory-management-card-title-box">\n\t\t\t<div v-html="options.title" class="inventory-management-card-title"></div>\n\t\t\t<div\n\t\t\t\tv-if="options.subTitle"\n\t\t\t\tv-html="options.subTitle" class="inventory-management-card-subtitle">\n\t\t\t</div>\n\t\t</div>\n\t`};const z={created(){if(this.initEnableMode){this.startEnable(this.initEnableMode)}},mounted(){if(this.enableMode===null){this.$Bitrix.Application.instance.sendOpenedEvent()}},props:{initEnableMode:{type:String,required:false,default:null},availableModes:{type:Object,required:true},currentMode:{type:String,required:true},hasConductedDocumentsOrQuantities:{type:Boolean,required:true},areTherePublishedShops:{type:Boolean,required:true},areThereActiveProducts:{type:Boolean,required:true},inventoryManagementSource:{type:String,required:false,default:""}},data(){return{enableMode:null,hoveredMode:null}},components:{CardBoxB24:N,CardBoxB24Solo:A,CardBoxOnec:g,EnableB24:K,EnableOnec:q,TitleBox:Q},computed:{b24Mode(){return j.MODE_B24},onecMode(){return j.MODE_1C},titleBoxOptions(){if(this.enableMode){if(this.enableMode===j.MODE_1C){return{title:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_SLIDER_TITLE_ENABLE_1C")}}return{title:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_SLIDER_TITLE_ENABLE_B24"),subTitle:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_SLIDER_SUBTITLE_ENABLE_B24")}}if(!this.isAvailable(j.MODE_1C)){return null}return{title:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_SLIDER_TITLE"),subTitle:this.$Bitrix.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_SLIDER_SUBTITLE")}}},methods:{isHovered(t){if(t===this.b24Mode){return this.hoveredMode===t||!this.hoveredMode&&(this.currentMode===t||!this.currentMode)}return this.hoveredMode===t||!this.hoveredMode&&this.currentMode===t},isAvailable(t){return Boolean(this.availableModes[t])},isActive(t){return this.currentMode===t},isEnabling(t){return this.enableMode===t},getEnableOptions(t){var e;const n=(e=this.availableModes[t])!=null?e:{};n.currentMode=this.currentMode;n.isBlocked=_.Type.isStringFilled(this.initEnableMode);n.inventoryManagementSource=this.inventoryManagementSource;n.hasConductedDocumentsOrQuantities=this.hasConductedDocumentsOrQuantities;n.areTherePublishedShops=this.areTherePublishedShops;n.areThereActiveProducts=this.areThereActiveProducts;return n},discardEnable(){if(this.initEnableMode){return}this.enableMode=null},enableB24(){this.startEnable(j.MODE_B24)},enableOnec(){this.startEnable(j.MODE_1C)},startEnable(t){if(this.currentMode===t){return}this.$Bitrix.Application.instance.sendStep2ProceededEvent(t);this.enableMode=t},onCardBoxEnter(t){this.hoveredMode=t},onCardBoxLeave(){this.hoveredMode=null}},template:`\n\t\t<title-box :options="titleBoxOptions"></title-box>\n\t\t<div v-if="enableMode" class="inventory-management__inner">\n\t\t\t<enable-b24\n\t\t\t\tv-if="isEnabling(b24Mode)"\n\t\t\t\t:options="getEnableOptions(b24Mode)"\n\t\t\t\t@back="discardEnable"\n\t\t\t>\n\t\t\t</enable-b24>\n\t\t\t<enable-onec\n\t\t\t\tv-if="isEnabling(onecMode)"\n\t\t\t\t:options="getEnableOptions(onecMode)"\n\t\t\t\t@back="discardEnable"\n\t\t\t>\n\t\t\t</enable-onec>\n\t\t</div>\n\t\t<template v-else>\n\t\t\t<div\n\t\t\t\tv-if="isAvailable(onecMode)"\n\t\t\t\tclass="inventory-management__card-box"\n\t\t\t>\n\t\t\t\t<card-box-b24\n\t\t\t\t\t:isActive="isActive(b24Mode)"\n\t\t\t\t\t:isHovered="isHovered(b24Mode)"\n\t\t\t\t\t@pick="enableB24"\n\t\t\t\t\t@enter="onCardBoxEnter(b24Mode)"\n\t\t\t\t\t@leave="onCardBoxLeave()"\n\t\t\t\t>\n\t\t\t\t</card-box-b24>\n\t\t\t\t<card-box-onec\n\t\t\t\t\t:isActive="isActive(onecMode)"\n\t\t\t\t\t:isHovered="isHovered(onecMode)"\n\t\t\t\t\t@pick="enableOnec"\n\t\t\t\t\t@enter="onCardBoxEnter(onecMode)"\n\t\t\t\t\t@leave="onCardBoxLeave()"\n\t\t\t\t>\n\t\t\t\t</card-box-onec>\n\t\t\t</div>\n\t\t\t<card-box-b24-solo\n\t\t\t\tv-else\n\t\t\t\t:isActive="isActive(b24Mode)"\n\t\t\t\t:isHovered="isHovered(b24Mode)"\n\t\t\t\t@pick="enableB24"\n\t\t\t>\n\t\t\t</card-box-b24-solo>\n\t\t</template>\n\t`};let J=t=>t,Z;var tt=babelHelpers.classPrivateFieldLooseKey("params");var et=babelHelpers.classPrivateFieldLooseKey("analytics");var nt=babelHelpers.classPrivateFieldLooseKey("template");var it=babelHelpers.classPrivateFieldLooseKey("sendEvent");class st{constructor(t,e){Object.defineProperty(this,it,{value:at});Object.defineProperty(this,tt,{writable:true,value:void 0});Object.defineProperty(this,et,{writable:true,value:void 0});Object.defineProperty(this,nt,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]=t;babelHelpers.classPrivateFieldLooseBase(this,et)[et]=e}getCardTemplate(){const t=this;if(!babelHelpers.classPrivateFieldLooseBase(this,nt)[nt]){babelHelpers.classPrivateFieldLooseBase(this,nt)[nt]=_.Tag.render(Z||(Z=J`<div id="inventory-management-card-wrap"></div>`));d.BitrixVue.createApp({...z,beforeCreate(){this.$bitrix.Application.set(t)}},babelHelpers.classPrivateFieldLooseBase(this,tt)[tt]).mount(babelHelpers.classPrivateFieldLooseBase(this,nt)[nt])}return babelHelpers.classPrivateFieldLooseBase(this,nt)[nt]}render(t){_.Dom.append(this.getCardTemplate(),t)}sendOpenedEvent(){babelHelpers.classPrivateFieldLooseBase(this,it)[it]({...babelHelpers.classPrivateFieldLooseBase(this,et)[et],event:"opened"})}sendStep2ProceededEvent(t){babelHelpers.classPrivateFieldLooseBase(this,it)[it]({...babelHelpers.classPrivateFieldLooseBase(this,et)[et],event:"step2_proceeded",p2:`choose_${t}`})}sendEnableProceededEvent(t){babelHelpers.classPrivateFieldLooseBase(this,it)[it]({...babelHelpers.classPrivateFieldLooseBase(this,et)[et],event:"enable_proceeded",p2:`choose_${t}`})}sendEnableDoneEvent(t,e){babelHelpers.classPrivateFieldLooseBase(this,it)[it]({...babelHelpers.classPrivateFieldLooseBase(this,et)[et],event:"enable_done",status:e,p2:`choose_${t}`})}}function at(t){_.Runtime.loadExtension("ui.analytics").then((e=>{const{sendData:n}=e;n(t)}))}var ot=babelHelpers.classPrivateFieldLooseKey("popup");var lt=babelHelpers.classPrivateFieldLooseKey("options");var rt=babelHelpers.classPrivateFieldLooseKey("getPopupTitle");var ct=babelHelpers.classPrivateFieldLooseKey("getPopupTexts");var dt=babelHelpers.classPrivateFieldLooseKey("disable");var _t=babelHelpers.classPrivateFieldLooseKey("getSetting");var pt=babelHelpers.classPrivateFieldLooseKey("sendEvent");var vt=babelHelpers.classPrivateFieldLooseKey("hasConductedDocumentsOrQuantities");class Tt{constructor(t={}){Object.defineProperty(this,vt,{value:At});Object.defineProperty(this,pt,{value:Nt});Object.defineProperty(this,_t,{value:bt});Object.defineProperty(this,dt,{value:Et});Object.defineProperty(this,ct,{value:ht});Object.defineProperty(this,rt,{value:ut});Object.defineProperty(this,ot,{writable:true,value:void 0});Object.defineProperty(this,lt,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,lt)[lt]=t;const e=babelHelpers.classPrivateFieldLooseBase(this,ct)[ct]().some((t=>t.critical===true));babelHelpers.classPrivateFieldLooseBase(this,ot)[ot]=new k({helpCode:babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]("availableModes").length>1?"20233748":"15992592",width:e?null:"auto",title:babelHelpers.classPrivateFieldLooseBase(this,rt)[rt](),texts:babelHelpers.classPrivateFieldLooseBase(this,ct)[ct](),hideHelp:!e,hideIcon:!e,primaryButtonText:e?_.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_POPUP_BUTTON_TURN_OFF_ANYWAY"):_.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_POPUP_BUTTON_TURN_OFF"),primaryButtonClass:e?"ui-btn-danger":"ui-btn-primary",secondaryButtonText:_.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_POPUP_BUTTON_CANCEL"),events:{onPrimaryClick:()=>babelHelpers.classPrivateFieldLooseBase(this,dt)[dt](),onSecondaryClick:()=>babelHelpers.classPrivateFieldLooseBase(this,ot)[ot].show(false),onClose:()=>{}}})}open(){babelHelpers.classPrivateFieldLooseBase(this,ot)[ot].show(true)}sendDisableDoneEvent(t){babelHelpers.classPrivateFieldLooseBase(this,pt)[pt]({tool:"inventory",category:"settings",event:"disable_done",c_section:"settings",p1:`mode_${babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]("currentMode")}`,status:t})}}function ut(){if(babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]("currentMode")===j.MODE_B24){if(babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]("isWithOrdersMode")===true){return _.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_NOT_ABLE_TO_TURN_BACK_TITLE").replace("[break]","<br>")}if(babelHelpers.classPrivateFieldLooseBase(this,vt)[vt]()){return _.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_DATA_WILL_BE_DELETED_2").replace("[break]","<br>")}}return""}function ht(){const t=[];if(babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]("currentMode")===j.MODE_B24){if(babelHelpers.classPrivateFieldLooseBase(this,vt)[vt]()){t.push({critical:true,text:_.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_DELETE_DOCUMENTS_AND_QUANTITY_TEXT_ON_DISABLE_B24_TEXT_1")},{critical:true,text:_.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_DELETE_DOCUMENTS_AND_QUANTITY_TEXT_ON_DISABLE_B24_TEXT_2")})}if(babelHelpers.classPrivateFieldLooseBase(this,_t)[_t]("isWithOrdersMode")===true){t.push({critical:true,text:_.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_NOT_ABLE_TO_TURN_BACK_TEXT").replace("[break]","<br>")})}}if(t.length===0){t.push({text:_.Loc.getMessage("CATALOG_INVENTORY_MANAGEMENT_DISABLE_CONFIRMATION_TEXT")})}return t}function Et(){babelHelpers.classPrivateFieldLooseBase(this,ot)[ot].load(true);X.disable().then((()=>{var t;this.sendDisableDoneEvent("success");(t=babelHelpers.classPrivateFieldLooseBase(this,lt)[lt].events)==null?void 0:t.onDisabled==null?void 0:t.onDisabled()})).catch((t=>{var e,n;this.sendDisableDoneEvent(`error_${(e=t==null?void 0:(n=t.customData)==null?void 0:n.analyticsCode)!=null?e:"unknown"}`);top.BX.UI.Notification.Center.notify({content:_.Text.encode(t.message)})})).finally((()=>{babelHelpers.classPrivateFieldLooseBase(this,ot)[ot].load(false);babelHelpers.classPrivateFieldLooseBase(this,ot)[ot].show(false)}))}function bt(t){return _.Extension.getSettings("catalog.store-enable-wizard").get(t)}function Nt(t){_.Runtime.loadExtension("ui.analytics").then((e=>{const{sendData:n}=e;n(t)}))}function At(){if(_.Type.isBoolean(babelHelpers.classPrivateFieldLooseBase(this,lt)[lt].hasConductedDocumentsOrQuantities)){return babelHelpers.classPrivateFieldLooseBase(this,lt)[lt].hasConductedDocumentsOrQuantities}return true}t.EnableWizardOpener=v;t.EnableWizard=st;t.ModeList=j;t.Disabler=Tt;t.AnalyticsContextList=T})(this.BX.Catalog.Store=this.BX.Catalog.Store||{},BX.UI.IconSet,BX.Main,BX,BX,BX.UI,BX.Catalog,BX,BX,BX,BX.Vue3,BX);
//# sourceMappingURL=index.bundle.map.js