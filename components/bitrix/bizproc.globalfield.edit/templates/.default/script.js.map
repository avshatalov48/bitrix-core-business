{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import { Reflection, Type, Loc, Event, Tag, Runtime, Dom } from 'main.core';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport 'bp_field_type';\nimport { Globals } from 'bizproc.globals';\n\nconst namespace = Reflection.namespace('BX.Bizproc.Component');\n\nclass GlobalFieldEditComponent\n{\n\toldProperty;\n\tdocumentType;\n\tsignedDocumentType: string;\n\tmode: string;\n\tavailableTypes: {};\n\n\tinputValueId: string;\n\n\tmultipleNode: HTMLSelectElement;\n\tsaveButtonNode: HTMLButtonElement;\n\tform: HTMLFormElement;\n\n\tslider: BX.SidePanel.Slider | null;\n\n\tsliderDict: BX.SidePanel.Dictionary | null;\n\n\tcorrespondenceModeToIdName = {\n\t\tconstant: 'Constant',\n\t\tvariable: 'Variable'\n\t};\n\n\tconstructor(options)\n\t{\n\t\tif (!Type.isPlainObject(options))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.oldProperty = options.property;\n\t\tthis.documentType = options.documentType;\n\t\tthis.signedDocumentType = options.signedDocumentType;\n\t\tthis.mode = options.mode;\n\t\tthis.availableTypes = options.types;\n\t\tthis.visibilityNames = options.visibilityNames;\n\n\t\tthis.inputValueId = options.inputValueId;\n\n\t\tthis.multipleNode = options.multipleNode;\n\t\tthis.saveButtonNode = options.saveButtonNode;\n\t\tthis.form = options.form;\n\n\t\tthis.slider = options.slider;\n\t}\n\n\tinit()\n\t{\n\t\tthis.sliderDict = this.slider ? this.slider.getData() : null;\n\t\tthis.editInputValue(this.oldProperty['Type'], this.oldProperty);\n\n\t\tEvent.bind(this.saveButtonNode, 'click', this.saveHandler.bind(this));\n\t}\n\n\teditInputValue(type, property)\n\t{\n\t\tlet prop = Runtime.clone(property);\n\t\tconst defaultProperty = {\n\t\t\tType: type ?? 'string',\n\t\t\tMultiple: false,\n\t\t\tDefault: '',\n\t\t\tPlaceholder: Loc.getMessage('BIZPROC_GLOBALFIELD_EDIT_TMP_EMPTY'),\n\t\t};\n\n\t\tif (this.availableTypes[defaultProperty.Type] === undefined)\n\t\t{\n\t\t\tdefaultProperty.Type = Object.keys(this.availableTypes)[0];\n\t\t}\n\n\t\tif (!Type.isPlainObject(property))\n\t\t{\n\t\t\tprop = defaultProperty;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isString(property['Multiple']))\n\t\t\t{\n\t\t\t\tprop['Multiple'] = (property['Multiple'] === 'Y');\n\t\t\t}\n\t\t\tprop = {...defaultProperty, ...prop};\n\t\t}\n\n\t\tthis.multipleNode.value = prop['Multiple'] ? 'Y' : 'N';\n\n\t\tif (prop.Type === 'select' && property.Options === undefined)\n\t\t{\n\t\t\tprop.Options = this.oldProperty.Options ?? {};\n\t\t}\n\n\t\tconst control = BX.Bizproc.FieldType.renderControl(\n\t\t\tthis.documentType,\n\t\t\tprop,\n\t\t\t'VALUE',\n\t\t\tprop['Default'],\n\t\t\t'public'\n\t\t);\n\t\tcontrol.className = 'ui-ctl ui-ctl-textbox ui-ctl-w100';\n\t\tcontrol.id = this.inputValueId;\n\n\t\tconst inputValueNode = document.getElementById(this.inputValueId);\n\t\tif (inputValueNode)\n\t\t{\n\t\t\tinputValueNode.replaceWith(control);\n\t\t}\n\n\t\tif (prop.Type !== 'select' && document.getElementById('bizproc_globEditComponent'))\n\t\t{\n\t\t\tdocument.getElementById('bizproc_globEditComponent').remove();\n\t\t\tthis.oldProperty.Options = {};\n\t\t}\n\t\telse if (prop.Type === 'select' && !document.getElementById('bizproc_globEditComponent'))\n\t\t{\n\t\t\tconst wrapper = Tag.render`<div class=\"ui-ctl ui-ctl-w100\" id=\"bizproc_globEditComponent\"></div>`;\n\t\t\tconst optionControl = BX.Bizproc.FieldType.createControlOptions(\n\t\t\t\tprop,\n\t\t\t\tthis.setSelectOptionFromForm.bind(this)\n\t\t\t);\n\t\t\toptionControl.className = 'ui-form-label';\n\t\t\tDom.append(optionControl, wrapper);\n\t\t\twrapper.getElementsByTagName('textarea')[0].className = 'ui-ctl-element ui-ctl-textarea ui-ctl-resize-y ui-ctl-w100';\n\t\t\tDom.style(wrapper.getElementsByTagName('textarea')[0], 'paddingTop', '6px');\n\t\t\twrapper.getElementsByTagName('button')[0].className = 'ui-btn ui-btn-xs ui-btn-light-border';\n\n\t\t\tcontrol.before(wrapper);\n\t\t}\n\n\t\tif (prop['Type'] === 'user')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (control.getElementsByTagName('a').length > 0)\n\t\t{\n\t\t\tconst buttonAdd = control.getElementsByTagName('a')[0];\n\t\t\tEvent.bind(buttonAdd, 'click', () => {\n\t\t\t\tconst values = document.getElementsByName('VALUE[]');\n\t\t\t\tconst value = Runtime.clone(values[values.length - 1]);\n\n\t\t\t\tif (prop['Type'] !== 'date' && prop['Type'] !== 'datetime')\n\t\t\t\t{\n\t\t\t\t\t// remove wrapper div\n\t\t\t\t\tconst parent = values[values.length - 1].parentNode;\n\t\t\t\t\tif (parent)\n\t\t\t\t\t{\n\t\t\t\t\t\tparent.remove();\n\t\t\t\t\t}\n\t\t\t\t\tDom.insertBefore(value, buttonAdd.parentNode);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tsetSelectOptionFromForm(options)\n\t{\n\t\tthis.oldProperty.Options = options;\n\n\t\tthis.editInputValue('select', {\n\t\t\tOptions: options,\n\t\t\tType: 'select',\n\t\t\tMultiple : this.multipleNode.value\n\t\t});\n\t}\n\n\tsaveHandler(): boolean\n\t{\n\t\tconst formElements = this.form.elements;\n\n\t\tlet id: string = Type.isStringFilled(this.oldProperty['id']) ? this.oldProperty['id'] : '';\n\t\tconst property = {\n\t\t\tName: formElements['NAME'].value,\n\t\t\tDescription: formElements['DESCRIPTION'].value,\n\t\t\tType: formElements['TYPE'].value,\n\t\t\tOptions: '',\n\t\t\tDefault: this.getValues(formElements),\n\t\t\tVisibility: formElements['VISIBILITY'].value,\n\t\t\tMultiple: formElements['MULTIPLE'].value,\n\t\t\tRequired: 'N',\n\t\t};\n\n\t\tif (!this.validateName(property.Name))\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!Type.isStringFilled(id))\n\t\t{\n\t\t\tconst date = new Date();\n\t\t\tid = this.correspondenceModeToIdName[this.mode] + date.getTime().toString();\n\t\t}\n\n\t\tif (this.oldProperty.Options)\n\t\t{\n\t\t\tproperty.Options = this.oldProperty.Options;\n\t\t}\n\n\t\tconst me = this;\n\t\tGlobals.Manager.Instance.upsertGlobalsAction(id, property, this.signedDocumentType, this.mode).then((response) => {\n\t\t\tif (response.data && response.data.error)\n\t\t\t{\n\t\t\t\tMessageBox.alert(\n\t\t\t\t\tresponse.data.error,\n\t\t\t\t\t() => {\n\t\t\t\t\t\tDom.removeClass(me.saveButtonNode, 'ui-btn-wait');\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tme.sliderDict.set(id, {...property, VisibilityName: this.visibilityNames[property.Visibility]});\n\t\t\t\tme.slider.close();\n\t\t\t}\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tgetValues(formElements): any\n\t{\n\t\tif (formElements['VALUE'])\n\t\t{\n\t\t\treturn formElements['VALUE'].value;\n\t\t}\n\n\t\tif (formElements['VALUE[]'])\n\t\t{\n\t\t\tconst radioNodeList = formElements['VALUE[]'];\n\t\t\tconst values = [];\n\t\t\tif (Type.isElementNode(radioNodeList))\n\t\t\t{\n\t\t\t\tif (radioNodeList.tagName !== 'SELECT')\n\t\t\t\t{\n\t\t\t\t\treturn radioNodeList.value;\n\t\t\t\t}\n\n\t\t\t\tfor (const i in Object.keys(radioNodeList.selectedOptions))\n\t\t\t\t{\n\t\t\t\t\tvalues.push(radioNodeList.selectedOptions[i].value);\n\t\t\t\t}\n\n\t\t\t\treturn values;\n\t\t\t}\n\n\t\t\tfor (const i in radioNodeList)\n\t\t\t{\n\t\t\t\tif (radioNodeList.hasOwnProperty(i))\n\t\t\t\t{\n\t\t\t\t\tvalues.push(radioNodeList[i].value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn values;\n\t\t}\n\n\t}\n\n\tvalidateName(name): boolean\n\t{\n\t\tconst me = this;\n\t\tif (!name)\n\t\t{\n\t\t\tMessageBox.alert(\n\t\t\t\tBX.Loc.getMessage('BIZPROC_GLOBALFIELD_EDIT_TMP_EMPTY_NAME'),\n\t\t\t\t() => {\n\t\t\t\t\tDom.removeClass(me.saveButtonNode, 'ui-btn-wait');\n\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t);\n\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\n\t}\n}\n\nnamespace.GlobalFieldEditComponent = GlobalFieldEditComponent;"],"names":["namespace","Reflection","GlobalFieldEditComponent","options","constant","variable","Type","isPlainObject","oldProperty","property","documentType","signedDocumentType","mode","availableTypes","types","visibilityNames","inputValueId","multipleNode","saveButtonNode","form","slider","sliderDict","getData","editInputValue","Event","bind","saveHandler","type","prop","Runtime","clone","defaultProperty","Multiple","Default","Placeholder","Loc","getMessage","undefined","Object","keys","isString","value","Options","control","BX","Bizproc","FieldType","renderControl","className","id","inputValueNode","document","getElementById","replaceWith","remove","wrapper","Tag","render","optionControl","createControlOptions","setSelectOptionFromForm","Dom","append","getElementsByTagName","style","before","length","buttonAdd","values","getElementsByName","parent","parentNode","insertBefore","formElements","elements","isStringFilled","Name","Description","getValues","Visibility","Required","validateName","date","Date","correspondenceModeToIdName","getTime","toString","me","Globals","Manager","Instance","upsertGlobalsAction","then","response","data","error","MessageBox","alert","removeClass","set","VisibilityName","close","radioNodeList","isElementNode","tagName","i","selectedOptions","push","hasOwnProperty","name"],"mappings":"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"}