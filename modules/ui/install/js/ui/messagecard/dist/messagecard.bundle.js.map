{"version":3,"file":"messagecard.bundle.js","sources":["../src/basecard.js","../src/messagecard.js"],"sourcesContent":["import {Cache, Dom, Tag, Text, Type, Event} from 'main.core';\nimport {EventEmitter} from 'main.core.events';\n\nexport class BaseCard extends EventEmitter\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.cache = new Cache.MemoryCache();\n\n\t\tthis.data = {...options};\n\t\tthis.options = this.data;\n\t\tthis.id = Type.isStringFilled(this.options.id) ? this.options.id : Text.getRandom();\n\t\tthis.hidden = Text.toBoolean(this.options.hidden);\n\t\tthis.onClickHandler = Type.isFunction(this.options.onClick) ? this.options.onClick : () => {};\n\n\t\tthis.onClick = this.onClick.bind(this);\n\n\t\tthis.layout = this.getLayout();\n\t\tthis.header = this.getHeader();\n\t\tthis.body = this.getBody();\n\n\t\tthis.setTitle(this.options.title || '');\n\t\tthis.setHidden(this.options.hidden);\n\n\t\tif (Type.isStringFilled(this.options.className))\n\t\t{\n\t\t\tDom.addClass(this.layout, this.options.className);\n\t\t}\n\n\t\tif (Type.isObject(this.options.attrs))\n\t\t{\n\t\t\tDom.adjust(this.layout, {attrs: this.options.attrs});\n\t\t}\n\n\t\tEvent.bind(this.layout, 'click', this.onClick);\n\t}\n\n\tgetLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('layout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-card\">\n\t\t\t\t\t${this.getHeader()}\n\t\t\t\t\t${this.getBody()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetHeader(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('header', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-card-header\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetBody(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('body', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-card-body\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tsetTitle(title: string)\n\t{\n\t\tthis.getHeader().textContent = title;\n\t}\n\n\tsetHidden(hidden: boolean)\n\t{\n\t\tDom.attr(this.getLayout(), 'hidden', hidden || null);\n\t}\n\n\tonClick()\n\t{\n\t\tthis.onClickHandler(this);\n\t\tthis.emit('onClick');\n\t}\n\n\tshow()\n\t{\n\t\tthis.setHidden(false);\n\t}\n\n\tisShown()\n\t{\n\t\treturn Dom.attr(this.getLayout(), 'hidden') === null;\n\t}\n\n\thide()\n\t{\n\t\tthis.setHidden(true);\n\t}\n\n\tgetNode(): HTMLDivElement\n\t{\n\t\treturn this.getLayout();\n\t}\n}","import {Cache, Dom, Tag, Type} from 'main.core';\nimport {BaseCard} from './basecard';\n\nimport './css/messagecard.css';\n\nexport class MessageCard extends BaseCard\n{\n\tstatic cache = new Cache.MemoryCache();\n\n\tconstructor(\n\t\toptions: {\n\t\t\tid?: string,\n\t\t\theader?: string,\n\t\t\tdescription?: string,\n\t\t\ticon?: string,\n\t\t\tangle?: boolean,\n\t\t\tcloseable?: boolean,\n\t\t\thideActions?: boolean,\n\t\t\trestoreState?: boolean,\n\t\t\tactionElements: Array<HTMLElement>\n\t\t},\n\t)\n\t{\n\t\tsuper(options);\n\t\tDom.addClass(this.getLayout(), 'ui-card-message');\n\n\t\tthis.onCloseClick = this.onCloseClick.bind(this);\n\n\t\tif (this.options.angle === false)\n\t\t{\n\t\t\tDom.addClass(this.getLayout(), 'ui-card-message-without-angle');\n\t\t}\n\n\t\tif (Type.isStringFilled(this.options.icon))\n\t\t{\n\t\t\tDom.append(this.getIcon(), this.getHeader());\n\t\t}\n\n\t\tif (!Type.isArray(this.options.actionElements))\n\t\t{\n\t\t\tthis.options.actionElements = [];\n\t\t}\n\n\t\tDom.append(this.getTitle(), this.getHeader());\n\t\tDom.append(this.getDescription(), this.getBody());\n\n\t\tif (this.options.closeable !== false)\n\t\t{\n\t\t\tDom.append(this.getCloseButton(), this.getLayout());\n\t\t}\n\n\t\tif (this.options.hideActions !== true || this.options.more)\n\t\t{\n\t\t\tDom.append(this.getActionsContainer(), this.getLayout());\n\t\t}\n\n\t\tif (this.isAllowRestoreState())\n\t\t{\n\t\t\tconst state = MessageCard.cache.get(this.options.id, {shown: true});\n\t\t\tif (state.shown)\n\t\t\t{\n\t\t\t\tthis.show();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\tisAllowRestoreState(): boolean\n\t{\n\t\treturn this.options.restoreState && this.options.id;\n\t}\n\n\tgetIcon(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('icon', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-card-message-icon\" style=\"background-image: url(${this.options.icon})\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetTitle(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('title', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-card-message-title\">${this.options.header}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetDescription(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('description', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-card-message-description\">${this.options.description}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCloseButton(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('closeButton', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div \n\t\t\t\t\tclass=\"ui-card-message-close-button\" \n\t\t\t\t\tonclick=\"${this.onCloseClick}\"\n\t\t\t\t></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tonCloseClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tthis.hide();\n\t\tthis.emit('onClose');\n\t\tMessageCard.cache.set(this.options.id, {shown: false});\n\t}\n\n\tgetActionsContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('actionsContainer', () => {\n\t\t\tconst actionWrapper =  Tag.render`\n\t\t\t\t<div class=\"ui-card-message-actions\"></div>\n\t\t\t`;\n\n\t\t\tthis.options.actionElements.forEach((element: HTMLElement) => {\n\t\t\t\tactionWrapper.appendChild(element);\n\t\t\t});\n\n\t\t\treturn actionWrapper;\n\t\t});\n\t}\n\n\tonClick()\n\t{\n\t\tthis.onClickHandler(this);\n\t\tthis.emit('onClick');\n\t}\n}"],"names":["BaseCard","options","cache","Cache","MemoryCache","data","id","Type","isStringFilled","Text","getRandom","hidden","toBoolean","onClickHandler","isFunction","onClick","bind","layout","getLayout","header","getHeader","body","getBody","setTitle","title","setHidden","className","Dom","addClass","isObject","attrs","adjust","Event","remember","Tag","render","textContent","attr","emit","EventEmitter","MessageCard","onCloseClick","angle","icon","append","getIcon","isArray","actionElements","getTitle","getDescription","closeable","getCloseButton","hideActions","more","getActionsContainer","isAllowRestoreState","state","get","shown","show","hide","restoreState","description","event","preventDefault","set","actionWrapper","forEach","element","appendChild"],"mappings":"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"}