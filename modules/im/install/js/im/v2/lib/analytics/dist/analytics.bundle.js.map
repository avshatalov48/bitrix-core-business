{"version":3,"file":"analytics.bundle.js","sources":["../src/const.js","../src/analytics.js"],"sourcesContent":["export const CopilotChatType = Object.freeze({\n\tprivate: 'chatType_private',\n\tmultiuser: 'chatType_multiuser',\n});\n\nexport const AnalyticsEvent = Object.freeze({\n\topenChat: 'open_chat',\n\tcreateNewChat: 'create_new_chat',\n\taudioUse: 'audio_use',\n\topenTab: 'open_tab',\n});\n\nexport const AnalyticsTool = Object.freeze({\n\tai: 'ai',\n});\n\nexport const AnalyticsCategory = Object.freeze({\n\tchatOperations: 'chat_operations',\n});\n\nexport const AnalyticsType = Object.freeze({\n\tai: 'ai',\n});\n\nexport const AnalyticsSection = Object.freeze({\n\tcopilotTab: 'copilot_tab',\n});\n","import { sendData } from 'ui.analytics';\nimport { Type } from 'main.core';\n\nimport { Core } from 'im.v2.application.core';\n\nimport {\n\tAnalyticsEvent,\n\tAnalyticsTool,\n\tAnalyticsCategory,\n\tAnalyticsType,\n\tAnalyticsSection,\n\tCopilotChatType,\n} from './const';\n\ntype DialogId = string;\n\nexport class Analytics\n{\n\t#createdChats: Set<DialogId> = new Set();\n\n\tstatic #instance: Analytics;\n\n\tstatic getInstance(): Analytics\n\t{\n\t\tif (!this.#instance)\n\t\t{\n\t\t\tthis.#instance = new this();\n\t\t}\n\n\t\treturn this.#instance;\n\t}\n\n\tcreateChat({ chatId, dialogId })\n\t{\n\t\tthis.#createdChats.add(dialogId);\n\n\t\tsendData({\n\t\t\tevent: AnalyticsEvent.createNewChat,\n\t\t\ttool: AnalyticsTool.ai,\n\t\t\tcategory: AnalyticsCategory.chatOperations,\n\t\t\tc_section: AnalyticsSection.copilotTab,\n\t\t\ttype: AnalyticsType.ai,\n\t\t\tp3: CopilotChatType.private,\n\t\t\tp5: `chatId_${chatId}`,\n\t\t});\n\t}\n\n\topenCopilotChat(dialogId: string)\n\t{\n\t\tif (!Type.isStringFilled(dialogId))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.#createdChats.has(dialogId))\n\t\t{\n\t\t\tthis.#createdChats.delete(dialogId);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst dialog = Core.getStore().getters['chats/get'](dialogId);\n\t\tconst copilotChatType = dialog.userCounter <= 2 ? CopilotChatType.private : CopilotChatType.multiuser;\n\n\t\tsendData({\n\t\t\tevent: AnalyticsEvent.openChat,\n\t\t\ttool: AnalyticsTool.ai,\n\t\t\tcategory: AnalyticsCategory.chatOperations,\n\t\t\tc_section: AnalyticsSection.copilotTab,\n\t\t\ttype: AnalyticsType.ai,\n\t\t\tp3: copilotChatType,\n\t\t\tp5: `chatId_${dialog.chatId}`,\n\t\t});\n\t}\n\n\topenCopilotTab()\n\t{\n\t\tsendData({\n\t\t\tevent: AnalyticsEvent.openTab,\n\t\t\ttool: AnalyticsTool.ai,\n\t\t\tcategory: AnalyticsCategory.chatOperations,\n\t\t\tc_section: AnalyticsSection.copilotTab,\n\t\t});\n\t}\n\n\tuseAudioInput()\n\t{\n\t\tsendData({\n\t\t\tevent: AnalyticsEvent.audioUse,\n\t\t\ttool: AnalyticsTool.ai,\n\t\t\tcategory: AnalyticsCategory.chatOperations,\n\t\t\tc_section: AnalyticsSection.copilotTab,\n\t\t});\n\t}\n}\n"],"names":["CopilotChatType","Object","freeze","private","multiuser","AnalyticsEvent","openChat","createNewChat","audioUse","openTab","AnalyticsTool","ai","AnalyticsCategory","chatOperations","AnalyticsType","AnalyticsSection","copilotTab","Analytics","Set","getInstance","createChat","chatId","dialogId","add","sendData","event","tool","category","c_section","type","p3","p5","openCopilotChat","Type","isStringFilled","has","delete","dialog","Core","getStore","getters","copilotChatType","userCounter","openCopilotTab","useAudioInput"],"mappings":"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"}