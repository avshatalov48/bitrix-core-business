(function(){"use strict";BX.namespace("BX.Landing.Block.Node");var t=BX.Landing.Utils.encodeDataValue;var e=BX.Landing.Utils.decodeDataValue;var n=BX.Landing.Utils.data;var i=BX.Landing.Utils.attr;BX.Landing.Block.Node.Icon=function(t){BX.Landing.Block.Node.Img.apply(this,arguments);this.type="icon"};function s(t){var e=n(t.node,"data-pseudo-url");return!!e?e:""}function a(t){return t.node.className.split(" ")}function o(t,e){return BX.Landing.UI.Panel.IconPanel.getLibraries().then((function(n){n.forEach((function(e){e.categories.forEach((function(e){e.items.forEach((function(e){var n="";if(BX.Type.isObject(e)){n=e.options.join(" ")}else{n=e}var i=n.split(" ");i.forEach((function(e){if(e){t.node.classList.remove(e)}}))}))}))}));e.classList.forEach((function(e){t.node.classList.add(e)}))}))}BX.Landing.Block.Node.Icon.prototype={constructor:BX.Landing.Block.Node.Icon,__proto__:BX.Landing.Block.Node.Img.prototype,getField:function(){if(!this.field){var t=this.getValue();t.url=e(t.url);var n=!!this.node.closest("a");this.field=new BX.Landing.UI.Field.Icon({selector:this.selector,title:this.manifest.name,disableLink:n,content:t,dimensions:!!this.manifest.dimensions?this.manifest.dimensions:{}})}else{this.field.content=this.getValue()}return this.field},setValue:function(t,e,n){this.lastValue=this.lastValue||this.getValue();this.preventSave(e);return o(this,t).then(function(){if(t.url){if(t.url.href==="selectActions:"){t.url.href="";t.url.enabled=false}if(t.url.href.startsWith("product:")){t.url.target="_self"}i(this.node,"data-pseudo-url",t.url)}this.onChange();if(!n){BX.Landing.History.getInstance().push(new BX.Landing.History.Entry({block:this.getBlock().id,selector:this.selector,command:"editIcon",undo:this.lastValue,redo:this.getValue()}))}this.lastValue=this.getValue()}.bind(this))},getValue:function(){return{type:"icon",src:"",id:-1,alt:"",classList:a(this),url:t(s(this))}}}})();
//# sourceMappingURL=icon.map.js