{"version":3,"file":"ui.sidepanel-content.js","sources":["../src/index.js"],"sourcesContent":["import { Dom, Loc, Tag, Text, Event } from 'main.core';\nimport { SidePanel } from 'main.sidepanel';\nimport { Layout } from 'ui.sidepanel.layout';\nimport 'ui.helper';\n\nexport const StubType = Object.freeze({\n\tnotAvailable: 'notAvailable',\n\tnoAccess: 'noAccess',\n\tnoConnection: 'noConnection',\n});\n\nexport const StubLinkType = Object.freeze({\n\thelpdesk: 'helpdesk',\n\thref: 'href',\n});\n\ntype StubNotAvailableOptions = {\n\ttitle: string | null,\n\tdesc: string | null,\n\ttype: $Keys<typeof StubType> | null,\n\tlink?: LinkOptions | null,\n}\n\ntype LinkOptions = {\n\ttext: string,\n\tvalue: string,\n\ttype: $Keys<typeof StubLinkType> | null\n}\n\nexport class StubNotAvailable\n{\n\t#options: StubNotAvailableOptions = {};\n\n\tconstructor(options?: StubNotAvailableOptions)\n\t{\n\t\tthis.#options.title = options?.title || null;\n\t\tthis.#options.desc = options?.desc || null;\n\n\t\tif (options?.type === StubType.noAccess)\n\t\t{\n\t\t\tif (!this.#options.title)\n\t\t\t{\n\t\t\t\tthis.#options.title = Loc.getMessage('UI_SIDEPANEL_CONTENT_NO_ACCESS_TITLE');\n\t\t\t}\n\n\t\t\tif (!this.#options.desc)\n\t\t\t{\n\t\t\t\tthis.#options.desc = Loc.getMessage('UI_SIDEPANEL_CONTENT_NO_ACCESS_DESC');\n\t\t\t}\n\t\t}\n\n\t\tthis.#options = {\n\t\t\ttitle: Text.encode(this.#options.title || Loc.getMessage('UI_SIDEPANEL_CONTENT_TITLE')),\n\t\t\tdesc: Text.encode(this.#options.desc || Loc.getMessage('UI_SIDEPANEL_CONTENT_DESC')),\n\t\t\ttype: options?.type || StubType.notAvailable,\n\t\t\tlink: options?.link || null,\n\t\t};\n\t}\n\n\topenSlider(): void\n\t{\n\t\tconst noSectionTypes = new Set([StubType.noAccess]);\n\t\tSidePanel.Instance.open(\n\t\t\t'sign:stub-no-connection',\n\t\t\t{\n\t\t\t\twidth: 590,\n\t\t\t\tcacheable: false,\n\t\t\t\tcontentCallback: () => {\n\t\t\t\t\treturn Layout.createContent({\n\t\t\t\t\t\tdesign: {\n\t\t\t\t\t\t\tsection: !noSectionTypes.has(this.#options.type),\n\t\t\t\t\t\t},\n\t\t\t\t\t\tcontent: () => this.render(),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#options.type === StubType.noAccess)\n\t\t{\n\t\t\treturn this.#renderNoAccess();\n\t\t}\n\n\t\tif (this.#options.type === StubType.notAvailable)\n\t\t{\n\t\t\treturn this.#renderNotAvailable();\n\t\t}\n\n\t\tif (this.#options.type === StubType.noConnection)\n\t\t{\n\t\t\treturn this.#renderNoConection();\n\t\t}\n\n\t\tthrow new Error('wrong stub type');\n\t}\n\n\t#renderNoAccess(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-slider-no-access\">\n\t\t\t\t<div class=\"ui-slider-no-access-inner\">\n\t\t\t\t\t<div class=\"ui-slider-no-access-title\">${this.#options.title}</div>\n\t\t\t\t\t<div class=\"ui-slider-no-access-subtitle\">${this.#options.desc}</div>\n\t\t\t\t\t<div class=\"ui-slider-no-access-img\">\n\t\t\t\t\t\t<div class=\"ui-slider-no-access-img-inner\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#renderLinkElement()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderNotAvailable(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-sidepanel-content-404-container\">\n\t\t\t\t<div class=\"ui-sidepanel-content-404-image\">\n\t\t\t\t\t<img alt=\"\" src=\"/bitrix/components/bitrix/ui.sidepanel.content/templates/.default/images/stub-not-available.svg\">\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-sidepanel-content-404-title\">${this.#options.title}</div>\n\t\t\t\t<div class=\"ui-sidepanel-content-404-description\">\n\t\t\t\t\t<p>${this.#options.desc}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderNoConection(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-slider-no-connection\">\n\t\t\t\t<div class=\"ui-slider-no-connection-inner\">\n\t\t\t\t\t<div class=\"ui-slider-no-connection-title\">${this.#options.title}</div>\n\t\t\t\t\t<div class=\"ui-slider-no-connection-subtitle\">${this.#options.desc}</div>\n\t\t\t\t\t<div class=\"ui-sidepanel-content-no-connection-image\"></div>\n\t\t\t\t\t${this.#renderLinkElement()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderTo(container: HTMLElement): void\n\t{\n\t\tDom.append(this.render(), container);\n\t}\n\n\t#renderLinkElement(): HTMLElement | null\n\t{\n\t\tif (!this.#options.link)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst linkElement = Tag.render`\n\t\t\t<a href=\"javascript:void(0);\" class=\"ui-sidepanel-content-link-href\">${Text.encode(this.#options.link.text)}</a>\n\t\t`;\n\n\t\tif (this.#options.link.type === StubLinkType.helpdesk)\n\t\t{\n\t\t\tEvent.bind(linkElement, 'click', (event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t\ttop.BX.Helper.show(`redirect=detail&code=${Text.encode(this.#options.link.value)}`);\n\t\t\t});\n\t\t}\n\n\t\tif (this.#options.link.type === StubLinkType.href)\n\t\t{\n\t\t\tDom.attr(linkElement, 'href', Text.encode(this.#options.link.value));\n\t\t}\n\n\t\treturn linkElement;\n\t}\n}\n"],"names":["StubType","Object","freeze","notAvailable","noAccess","noConnection","StubLinkType","helpdesk","href","StubNotAvailable","constructor","options","title","desc","type","Loc","getMessage","Text","encode","link","openSlider","noSectionTypes","Set","SidePanel","Instance","open","width","cacheable","contentCallback","Layout","createContent","design","section","has","content","render","Error","renderTo","container","Dom","append","Tag","linkElement","text","Event","bind","event","preventDefault","top","BX","Helper","show","value","attr"],"mappings":"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"}