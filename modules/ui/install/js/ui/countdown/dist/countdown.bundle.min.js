this.BX=this.BX||{},function(t,e){"use strict";var i,n,s=function(){function t(i){var n,s,o,a,l,d,h,r,c;babelHelpers.classCallCheck(this,t),this.seconds=null!==(n=i.seconds)&&void 0!==n?n:0,this.showIcon=null===(s=i.showIcon)||void 0===s||s,this.iconClass=null!==(o=i.iconClass)&&void 0!==o?o:"ui-icon-set --clock-2",this.showMinutes=null===(a=i.showMinutes)||void 0===a||a,this.cssClass=null!==(l=i.cssClass)&&void 0!==l?l:null,this.interval=null!==(d=i.interval)&&void 0!==d?d:1e3,this.node=null!==(h=i.node)&&void 0!==h?h:null,this.needStartImmediately=null===(r=i.needStartImmediately)||void 0===r||r,this.hideAfterEnd=null!==(c=i.hideAfterEnd)&&void 0!==c&&c,this.onTimerEnd=null,e.Type.isFunction(i.onTimerEnd)&&(this.onTimerEnd=i.onTimerEnd),this.onTimerUpdate=null,e.Type.isFunction(i.onTimerUpdate)&&(this.onTimerUpdate=i.onTimerUpdate),this.timerElement=null,this.intervalId=null,this.init()}return babelHelpers.createClass(t,[{key:"init",value:function(){return this.timerElement=e.Tag.render(i||(i=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="ui-countdown ','">\n\t\t\t\t','\n\t\t\t\t<span class="ui-countdown__time">',"</span>\n\t\t\t</div>\n\t\t"])),this.cssClass,this.showIcon?e.Tag.render(n||(n=babelHelpers.taggedTemplateLiteral(['<div class="ui-countdown__icon ','"></div>'])),this.iconClass):"",this.formatTime(this.seconds)),this.needStartImmediately&&this.start(),e.Dom.clean(this.node),e.Dom.append(this.timerElement,this.node),this.node}},{key:"setSeconds",value:function(t){this.seconds=t}},{key:"formatTime",value:function(t){if(this.showMinutes){var e=Math.floor(t/60),i=t%60;return"".concat(e<10?"0":"").concat(e,":").concat(i<10?"0":"").concat(i)}return t}},{key:"start",value:function(){this.lastTimestamp=Date.now(),this.update()}},{key:"update",value:function(){var t=Date.now(),i=t-this.lastTimestamp;if(i>=this.interval){this.seconds-=Math.floor(i/this.interval),this.lastTimestamp=t-i%this.interval,this.seconds<=0&&(this.seconds=0);var n=this.timerElement.querySelector(".ui-countdown__time"),s=this.formatTime(this.seconds);if(n.textContent=s,e.Type.isFunction(this.onTimerUpdate)&&this.onTimerUpdate({seconds:this.seconds,formatted:s}),this.seconds<=0)return void this.stop()}this.intervalId=requestAnimationFrame(this.update.bind(this))}},{key:"stop",value:function(){e.Type.isFunction(this.onTimerEnd)&&this.onTimerEnd(),this.hideAfterEnd&&e.Dom.clean(this.node),cancelAnimationFrame(this.intervalId)}},{key:"getElement",value:function(){return this.timerElement}}]),t}();t.Countdown=s}(this.BX.UI=this.BX.UI||{},BX);
//# sourceMappingURL=countdown.bundle.map.js