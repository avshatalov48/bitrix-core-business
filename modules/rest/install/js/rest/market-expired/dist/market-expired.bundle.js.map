{"version":3,"file":"market-expired.bundle.js","sources":["../src/component/market-item.js","../src/component/market-list.js","../src/component/discount-ear.js","../src/analytic.js","../src/popup/market-expired-popup.js","../src/popup/final-market-expired-popup.js","../src/popup/warning-market-expired-popup.js","../src/market-expired.js"],"sourcesContent":["import { Tag, Dom } from 'main.core';\n\nexport type MarketItemOptions = {\n\tname: string,\n\turi: string,\n\ticon: ?string,\n}\n\nexport class MarketItem\n{\n\t#name: string;\n\t#icon: string;\n\n\tconstructor(options: MarketItemOptions)\n\t{\n\t\tthis.#name = options.name;\n\t\tthis.#icon = options.icon;\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"rest-market-item\">\n\t\t\t\t${this.renderIcon()}\n\t\t\t\t<span class=\"rest-market-item__name\" title=\"${this.getName()}\">${this.getName()}</span>\n\t\t\t</span>\n\t\t`;\n\t}\n\n\trenderTo(node: HTMLElement): void\n\t{\n\t\tDom.append(this.getContainer(), node);\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.#name;\n\t}\n\n\trenderIcon(): HTMLElement\n\t{\n\t\tif (!this.#icon)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"rest-market-item__icon-container\">\n\t\t\t\t\t<div class=\"ui-icon-set --cube-plus rest-market-item__icon\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"rest-market-item__icon-container\" \n\t\t\t\tstyle=\"\n\t\t\t\t\tbackground-image: url(${this.#icon});\n\t\t\t\t\tbackground-size: cover;\n\t\t\t\t\">\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Tag, Type, Loc } from 'main.core';\nimport { MarketItem } from './market-item';\n\nexport type MarketListOptions = {\n\titems: Array<MarketItem>,\n\ttitle: ?string,\n\tlink: ?string,\n\tcount: number,\n\tonClick: func,\n};\n\nexport class MarketList\n{\n\t#items: Array<MarketItem>;\n\t#title: string;\n\t#link: string;\n\t#count: number;\n\t#onClick: func;\n\n\tconstructor(options: MarketListOptions)\n\t{\n\t\tthis.#items = Type.isArray(options.items) ? options.items : [];\n\t\tthis.#title = options.title;\n\t\tthis.#link = options.link;\n\t\tthis.#count = options.count;\n\t\tthis.#onClick = options.onClick;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"rest-market-list\">\n\t\t\t\t<div class=\"rest-market-list__header\">\n\t\t\t\t\t<span class=\"rest-market-list__title\">${this.#title}</span>\n\t\t\t\t\t<a class=\"rest-market-list__link\" href=\"${this.#link}\" onclick=\"${this.#onClick}\">\n\t\t\t\t\t\t${Loc.getMessage('REST_MARKET_EXPIRED_POPUP_MARKET_LIST_LINK', {\n\t\t\t\t\t\t\t'#COUNT#': this.#count,\n\t\t\t\t\t\t})}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t\t${this.#renderList()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderList(): ?HTMLElement\n\t{\n\t\tif (this.#items.length === 0)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst listContainer = Tag.render`\n\t\t\t<div class=\"rest-market-list__container\"></div>\n\t\t`;\n\n\t\tthis.#items.forEach((item: MarketItem) => {\n\t\t\titem.renderTo(listContainer);\n\t\t});\n\n\t\treturn listContainer;\n\t}\n}\n","import { Tag, Loc } from 'main.core';\n\nexport class DiscountEar\n{\n\trender(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<aside class=\"rest-market-expired-popup__discount\">\n\t\t\t\t<p class=\"rest-market-expired-popup__discount-description\">\n\t\t\t\t\t${Loc.getMessage('REST_MARKET_EXPIRED_POPUP_DISCOUNT_DESCRIPTION', {\n\t\t\t\t\t\t'[white-span]': '<span class=\"rest-market-expired-popup__discount-description-white\">',\n\t\t\t\t\t\t'[/white-span]': '</span>',\n\t\t\t\t\t})}\n\t\t\t\t</p>\n\t\t\t</aside>\n\t\t`;\n\t}\n}\n","import { AnalyticsOptions, sendData } from 'ui.analytics';\n\nexport type AnalyticContext = {\n\twithDiscount: boolean,\n\tpopupType: 'WARNING' | 'FINAL',\n}\n\nexport class Analytic\n{\n\tconstructor(context: AnalyticContext)\n\t{\n\t\tthis.context = context;\n\t}\n\n\tsendShow(): void\n\t{\n\t\tthis.#send({\n\t\t\ttool: 'infohelper',\n\t\t\tcategory: 'market',\n\t\t\tevent: 'show_popup',\n\t\t});\n\t}\n\n\tsendClickButton(button: string): void\n\t{\n\t\tthis.#send({\n\t\t\ttool: 'infohelper',\n\t\t\tcategory: 'market',\n\t\t\tevent: 'click_button',\n\t\t\tc_element: button,\n\t\t});\n\t}\n\n\tsendDemoActivated(): void\n\t{\n\t\tthis.#send({\n\t\t\ttool: 'intranet',\n\t\t\tcategory: 'demo',\n\t\t\tevent: 'demo_activated',\n\t\t});\n\t}\n\n\t#send(options: AnalyticsOptions): void\n\t{\n\t\tsendData({\n\t\t\t...options,\n\t\t\ttype: this.#getType(),\n\t\t\tp1: this.#getP1(),\n\t\t});\n\t}\n\n\t#getType(): string\n\t{\n\t\treturn this.context.popupType === 'WARNING'\n\t\t\t? 'pre_disconnection_alert'\n\t\t\t: 'post_disconnection_notice';\n\t}\n\n\t#getP1(): string\n\t{\n\t\treturn `discount_${this.context.withDiscount ? 'Y' : 'N'}`;\n\t}\n}\n","import { Loc, Tag, ajax, Dom, Type } from 'main.core';\nimport { PopupWindowManager } from 'main.popup';\nimport { Button } from 'ui.buttons';\nimport { MarketList } from '../component/market-list';\nimport { EventEmitter } from 'main.core.events';\nimport { DiscountEar } from '../component/discount-ear';\nimport { FeaturePromotersRegistry } from 'ui.info-helper';\nimport { UI } from 'ui.notification';\nimport { Analytic } from '../analytic';\n\nexport type MarketExpiredPopupOptions = {\n\ttransitionPeriodEndDate: string,\n\tappList: ?MarketList,\n\tintegrationList: ?MarketList,\n\tmarketSubscriptionUrl: string,\n\twithDiscount: boolean,\n\twithDemo: boolean,\n\tolWidgetCode: string,\n\tanalytic: Analytic,\n};\n\nexport class MarketExpiredPopup extends EventEmitter\n{\n\ttransitionPeriodEndDate: string;\n\t#popup: ?Popup = null;\n\t#container: ?HTMLElement = null;\n\t#appList: ?MarketList;\n\t#integrationList: ?MarketList;\n\t#marketSubscriptionUrl: string;\n\t#withDiscount: boolean;\n\twithDemo: boolean;\n\tolWidgetCode: string;\n\t#discountEarContainer: ?HTMLElement = null;\n\t#analytic: Analytic;\n\n\tconstructor(options: MarketExpiredPopupOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('Rest.MarketExpired:Popup');\n\t\tthis.transitionPeriodEndDate = options.transitionPeriodEndDate;\n\t\tthis.#appList = options.appList;\n\t\tthis.#integrationList = options.integrationList;\n\t\tthis.#marketSubscriptionUrl = options.marketSubscriptionUrl;\n\t\tthis.#withDiscount = options.withDiscount;\n\t\tthis.withDemo = options.withDemo;\n\t\tthis.olWidgetCode = options.olWidgetCode;\n\t\tthis.#analytic = options.analytic;\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn '';\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn '';\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#popup ??= PopupWindowManager.create(\n\t\t\t`marketExpiredPopup_${this.getType()}`,\n\t\t\tnull,\n\t\t\t{\n\t\t\t\tanimation: {\n\t\t\t\t\tshowClassName: 'rest-market-expired-popup__show',\n\t\t\t\t\tcloseAnimationType: 'animation',\n\t\t\t\t},\n\t\t\t\toverlay: true,\n\t\t\t\tcontent: this.#getContent(),\n\t\t\t\tdisableScroll: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tclassName: 'rest-market-expired-popup-wrapper',\n\t\t\t\tevents: {\n\t\t\t\t\tonClose: this.onClose.bind(this),\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\tthis.#popup?.show();\n\t\tthis.#analytic?.sendShow();\n\n\t\t// hack for blur\n\t\tif (this.#withDiscount)\n\t\t{\n\t\t\tDom.style(\n\t\t\t\tthis.#getContainer(),\n\t\t\t\t{\n\t\t\t\t\tmaxHeight: `${this.#getDiscountEarContainer().offsetHeight}px`,\n\t\t\t\t},\n\t\t\t);\n\t\t\tthis.#popup.adjustPosition();\n\t\t}\n\n\t\tif (\n\t\t\tType.isStringFilled(this.olWidgetCode)\n\t\t\t&& (!this.withDemo || this.getType() === 'FINAL')\n\t\t)\n\t\t{\n\t\t\tthis.#showOlWidget(window, document, `https://bitrix24.team/upload/crm/site_button/loader_${this.olWidgetCode}.js`);\n\t\t}\n\t}\n\n\tonClose(): void\n\t{\n\t\tBX.SiteButton?.hide();\n\t\tthis.emit('onClose');\n\t\tBX.userOptions.save('rest', 'marketTransitionPopupTs', null, Math.floor(Date.now() / 1000));\n\t}\n\n\t/**\n\t * limit_v2_nosubscription_marketplace_withapplications_off\n\t * limit_v2_nosubscription_marketplace_withapplications_off_no_demo\n\t * limit_v2_nosubscription_marketplace_withapplications_nodiscount_off\n\t * limit_v2_nosubscription_marketplace_withapplications_nodiscount_off_no_demo\n\t */\n\t#getFeatureCode(): string\n\t{\n\t\treturn `\n\t\t\tlimit_v2_nosubscription_marketplace_withapplications\n\t\t\t${this.#withDiscount ? '' : '_nodiscount'}\n\t\t\t_off\n\t\t\t${this.withDemo ? '' : '_no_demo'}\n\t\t`;\n\t}\n\n\trenderDescription(): ?HTMLElement\n\t{\n\t\treturn null;\n\t}\n\n\trenderButtons(): ?HTMLElement\n\t{\n\t\treturn null;\n\t}\n\n\t#getContent(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"rest-market-expired-popup\">\n\t\t\t\t${this.#getContainer()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getContainer(): HTMLElement\n\t{\n\t\tthis.#container ??= Tag.render`\n\t\t\t<div class=\"rest-market-expired-popup__container\">\n\t\t\t\t${this.#withDiscount ? this.#getDiscountEarContainer() : ''}\n\t\t\t\t<div class=\"rest-market-expired-popup__content-wrapper\">\n\t\t\t\t\t<div class=\"rest-market-expired-popup__content\">\n\t\t\t\t\t\t<span class=\"rest-market-expired-popup__title\">${this.getTitle()}</span>\n\t\t\t\t\t\t${this.renderDescription()}\n\t\t\t\t\t\t${this.#renderAboutLink()}\n\t\t\t\t\t\t${this.renderButtons()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#renderMarketList()}\n\t\t\t\t\t${this.#renderCloseIcon()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#container;\n\t}\n\n\t#renderCloseIcon(): HTMLElement\n\t{\n\t\tconst onClick = () => {\n\t\t\tthis.#popup.close();\n\t\t\tthis.#analytic?.sendClickButton('cancel');\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"rest-market-expired-popup__close-icon ui-icon-set --cross-30\" onclick=\"${onClick}\"></div>\n\t\t`;\n\t}\n\n\t#getDiscountEarContainer(): HTMLElement\n\t{\n\t\tthis.#discountEarContainer ??= (new DiscountEar(this.withDemo)).render();\n\n\t\treturn this.#discountEarContainer;\n\t}\n\n\t#renderMarketList(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<aside class=\"rest-market-expired-popup__aside\">\n\t\t\t\t${this.#appList?.render()}\n\t\t\t\t${this.#integrationList?.render()}\n\t\t\t</aside>\n\t\t`;\n\t}\n\n\t#renderAboutLink(): HTMLElement\n\t{\n\t\tconst onclick = () => {\n\t\t\tthis.#analytic?.sendClickButton('details');\n\t\t};\n\n\t\treturn Tag.render`\n\t\t\t<span class=\"rest-market-expired-popup__details\">\n\t\t\t\t<a\n\t\t\t\t\tclass=\"ui-link rest-market-expired-popup__link\"\n\t\t\t\t\thref=\"FEATURE_PROMOTER=${this.#getFeatureCode()}\"\n\t\t\t\t\tonclick=\"${onclick}\"\n\t\t\t\t>\n\t\t\t\t\t${Loc.getMessage('REST_MARKET_EXPIRED_POPUP_DETAILS')}\n\t\t\t\t</a>\n\t\t\t</span>\n\t\t`;\n\t}\n\n\tgetSubscribeButton(): Button\n\t{\n\t\treturn new Button({\n\t\t\ttext: Loc.getMessage('REST_MARKET_EXPIRED_POPUP_BUTTON_SUBSCRIBE'),\n\t\t\tclassName: 'rest-market-expired-popup__button',\n\t\t\tid: 'marketExpiredPopup_button_subscribe',\n\t\t\tsize: Button.Size.MEDIUM,\n\t\t\tcolor: Button.Color.SUCCESS,\n\t\t\tnoCaps: true,\n\t\t\tround: true,\n\t\t\ttag: Button.Tag.LINK,\n\t\t\tlink: this.#marketSubscriptionUrl,\n\t\t\tonclick: () => {\n\t\t\t\tthis.#analytic?.sendClickButton('buy');\n\t\t\t},\n\t\t});\n\t}\n\n\tgetDemoButton(): Button\n\t{\n\t\tconst demoButton = new Button({\n\t\t\ttext: Loc.getMessage('REST_MARKET_EXPIRED_POPUP_BUTTON_DEMO'),\n\t\t\tclassName: 'rest-market-expired-popup__button',\n\t\t\tid: 'marketExpiredPopup_button_demo',\n\t\t\tsize: Button.Size.MEDIUM,\n\t\t\tcolor: Button.Color.LIGHT_BORDER,\n\t\t\tnoCaps: true,\n\t\t\tround: true,\n\t\t\tonclick: () => {\n\t\t\t\tdemoButton.unbindEvent('click');\n\t\t\t\tdemoButton.setState(Button.State.WAITING);\n\t\t\t\tthis.#analytic?.sendClickButton('demo');\n\t\t\t\tajax({\n\t\t\t\t\turl: '/bitrix/tools/rest.php',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsessid: BX.bitrix_sessid(),\n\t\t\t\t\t\taction: 'activate_demo',\n\t\t\t\t\t},\n\t\t\t\t\tonsuccess: (result) => {\n\t\t\t\t\t\tthis.#popup.close();\n\n\t\t\t\t\t\tif (result.error)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\t\t\tcontent: result.error,\n\t\t\t\t\t\t\t\tcategory: 'demo_subscribe_error',\n\t\t\t\t\t\t\t\tposition: 'top-right',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#analytic?.sendDemoActivated();\n\t\t\t\t\t\t\tFeaturePromotersRegistry.getPromoter({ code: 'limit_market_trial_active' }).show();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\n\t\treturn demoButton;\n\t}\n\n\tgetHideButton(): Button\n\t{\n\t\treturn new Button({\n\t\t\ttext: Loc.getMessage('REST_MARKET_EXPIRED_POPUP_BUTTON_HIDE'),\n\t\t\tclassName: 'rest-market-expired-popup__button rest-market-expired-popup__button--link',\n\t\t\tid: 'marketExpiredPopup_button_hide',\n\t\t\tsize: Button.Size.EXTRA_SMALL,\n\t\t\tcolor: Button.Color.LINK,\n\t\t\tnoCaps: true,\n\t\t\tonclick: () => {\n\t\t\t\tthis.#popup?.close();\n\t\t\t\tthis.#analytic?.sendClickButton('ok');\n\t\t\t\tBX.userOptions.save('rest', 'marketTransitionPopupDismiss', null, 'Y');\n\t\t\t},\n\t\t});\n\t}\n\n\t#showOlWidget(w, d, u): void\n\t{\n\t\tconst s = d.createElement('script'); s.async = true; s.src = `${u}?${Date.now() / 60000 | 0}`;\n\t\tconst h = d.getElementsByTagName('script')[0]; h.parentNode.insertBefore(s, h);\n\t}\n}\n","import { Loc, Tag, Type } from 'main.core';\nimport { MarketExpiredPopup } from './market-expired-popup';\n\nexport class FinalMarketExpiredPopup extends MarketExpiredPopup\n{\n\tgetType(): string\n\t{\n\t\treturn 'final';\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn Loc.getMessage('REST_MARKET_EXPIRED_POPUP_TITLE_FINAL');\n\t}\n\n\trenderDescription(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"rest-market-expired-popup__description\">\n\t\t\t\t<p class=\"rest-market-expired-popup__description-text\">\n\t\t\t\t\t${Loc.getMessage('REST_MARKET_EXPIRED_POPUP_DESCRIPTION_1')}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"rest-market-expired-popup__description-text\">\n\t\t\t\t\t${Loc.getMessage('REST_MARKET_EXPIRED_POPUP_DESCRIPTION_2')}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"rest-market-expired-popup__description-text\">\n\t\t\t\t\t${Loc.getMessage('REST_MARKET_EXPIRED_POPUP_DESCRIPTION_3')}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"rest-market-expired-popup__description-text\">\n\t\t\t\t\t${Loc.getMessage('REST_MARKET_EXPIRED_POPUP_DESCRIPTION_FINAL')}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"rest-market-expired-popup__description-text\">\n\t\t\t\t\t${Loc.getMessage(`REST_MARKET_EXPIRED_POPUP_FINAL_DESCRIPTION${this.withDemo ? '_DEMO' : ''}`)}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderButtons(): ?HTMLElement\n\t{\n\t\tif (this.withDemo)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"rest-market-expired-popup__buttons-wrapper\">\n\t\t\t\t\t${this.getSubscribeButton().render()}\n\t\t\t\t\t<div class=\"rest-market-expired-popup__button-container\">\n\t\t\t\t\t\t${this.getDemoButton().render()}\n\t\t\t\t\t\t${this.getHideButton().render()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"rest-market-expired-popup__button-container\">\n\t\t\t\t${this.getSubscribeButton().render()}\n\t\t\t\t${this.getHideButton().render()}\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { Loc, Tag } from 'main.core';\nimport { MarketExpiredPopup } from './market-expired-popup';\n\nexport class WarningMarketExpiredPopup extends MarketExpiredPopup\n{\n\tgetType(): string\n\t{\n\t\treturn 'warning';\n\t}\n\n\trenderDescription(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"rest-market-expired-popup__description\">\n\t\t\t\t<p class=\"rest-market-expired-popup__description-text\">\n\t\t\t\t\t${Loc.getMessage('REST_MARKET_EXPIRED_POPUP_DESCRIPTION_1')}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"rest-market-expired-popup__description-text\">\n\t\t\t\t\t${Loc.getMessage('REST_MARKET_EXPIRED_POPUP_DESCRIPTION_2')}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"rest-market-expired-popup__description-text\">\n\t\t\t\t\t${Loc.getMessage('REST_MARKET_EXPIRED_POPUP_DESCRIPTION_3')}\n\t\t\t\t</p>\n\t\t\t\t<p class=\"rest-market-expired-popup__description-text\">\n\t\t\t\t\t${Loc.getMessage(`REST_MARKET_EXPIRED_POPUP_WARNING_DESCRIPTION${this.withDemo ? '_DEMO' : ''}`, {\n\t\t\t\t\t\t'#DATE#': this.transitionPeriodEndDate,\n\t\t\t\t\t})}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetTitle(): string\n\t{\n\t\treturn Loc.getMessage('REST_MARKET_EXPIRED_POPUP_TITLE_WARNING');\n\t}\n\n\trenderButtons(): ?HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"rest-market-expired-popup__button-container\">\n\t\t\t\t${this.getSubscribeButton().render()}\n\t\t\t\t${this.withDemo ? this.getDemoButton().render() : ''}\n\t\t\t</div>\n\t\t`;\n\t}\n}\n","import { MarketItem } from './component/market-item';\nimport { MarketList } from './component/market-list';\nimport { MarketExpiredPopup } from './popup/market-expired-popup';\nimport { ajax, Extension, Loc } from 'main.core';\nimport './style.css';\nimport { FinalMarketExpiredPopup } from './popup/final-market-expired-popup';\nimport { WarningMarketExpiredPopup } from './popup/warning-market-expired-popup';\nimport { Analytic } from './analytic';\n\nexport {\n\tMarketItem,\n\tMarketList,\n\tWarningMarketExpiredPopup,\n\tFinalMarketExpiredPopup,\n};\n\nconst POPUPS = {\n\tWARNING: WarningMarketExpiredPopup,\n\tFINAL: FinalMarketExpiredPopup,\n};\n\nexport class MarketExpired\n{\n\tstatic async getPopup(): ?MarketExpiredPopup\n\t{\n\t\tconst getMarketListFromResponse = (response, moreLink, title, onClick): ?MarketList => {\n\t\t\tif (!response || !response.data)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst { items, count } = response.data;\n\t\t\tconst marketList = [];\n\n\t\t\tif (items.length === 0 || count < 1)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tObject.values(items).forEach((item) => {\n\t\t\t\tmarketList.push(new MarketItem({\n\t\t\t\t\tname: item.name,\n\t\t\t\t\ticon: item.icon,\n\t\t\t\t}));\n\t\t\t});\n\n\t\t\treturn new MarketList({\n\t\t\t\ttitle,\n\t\t\t\tcount,\n\t\t\t\titems: marketList,\n\t\t\t\tlink: moreLink,\n\t\t\t\tonClick,\n\t\t\t});\n\t\t};\n\n\t\tconst options = Extension.getSettings('rest.market-expired');\n\t\tlet popup = null;\n\n\t\tawait Promise.all([\n\t\t\tajax.runAction('rest.integration.getApplicationList', { data: { limit: 3 } }),\n\t\t\tajax.runAction('rest.integration.getIntegrationList', { data: { limit: 3 } }),\n\t\t]).then(([appsResponse, integrationsResponse]) => {\n\t\t\tconst analytic = new Analytic({\n\t\t\t\twithDiscount: options.withDiscount,\n\t\t\t\tpopupType: options.type,\n\t\t\t});\n\n\t\t\tconst appList = getMarketListFromResponse(\n\t\t\t\tappsResponse,\n\t\t\t\t'/market/installed/',\n\t\t\t\tLoc.getMessage('REST_MARKET_EXPIRED_POPUP_MARKET_LIST_TITLE_APPS'),\n\t\t\t\t() => {\n\t\t\t\t\tanalytic.sendClickButton('view_all_apps');\n\t\t\t\t},\n\t\t\t);\n\t\t\tconst integrationList = getMarketListFromResponse(\n\t\t\t\tintegrationsResponse,\n\t\t\t\t'/devops/list/',\n\t\t\t\tLoc.getMessage('REST_MARKET_EXPIRED_POPUP_MARKET_LIST_TITLE_INTEGRATIONS'),\n\t\t\t\t() => {\n\t\t\t\t\tanalytic.sendClickButton('view_all_integrations');\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tif (appList || integrationList)\n\t\t\t{\n\t\t\t\tconst PopupClass = POPUPS[options.type];\n\n\t\t\t\tif (PopupClass)\n\t\t\t\t{\n\t\t\t\t\tpopup = new PopupClass({\n\t\t\t\t\t\ttransitionPeriodEndDate: options.transitionPeriodEndDate,\n\t\t\t\t\t\tappList,\n\t\t\t\t\t\tintegrationList,\n\t\t\t\t\t\tmarketSubscriptionUrl: options.marketSubscriptionUrl,\n\t\t\t\t\t\twithDiscount: options.withDiscount,\n\t\t\t\t\t\twithDemo: options.withDemo,\n\t\t\t\t\t\tolWidgetCode: options.olWidgetCode,\n\t\t\t\t\t\tanalytic,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}).catch((error) => {\n\t\t\tconsole.log(error);\n\t\t});\n\n\t\treturn popup;\n\t}\n}\n"],"names":["MarketItem","constructor","options","name","icon","getContainer","Tag","render","renderIcon","getName","renderTo","node","Dom","append","MarketList","Type","isArray","items","title","link","count","onClick","Loc","getMessage","length","listContainer","forEach","item","DiscountEar","Analytic","context","sendShow","tool","category","event","sendClickButton","button","c_element","sendDemoActivated","sendData","type","p1","popupType","withDiscount","MarketExpiredPopup","EventEmitter","setEventNamespace","transitionPeriodEndDate","appList","integrationList","marketSubscriptionUrl","withDemo","olWidgetCode","analytic","getType","getTitle","show","PopupWindowManager","create","animation","showClassName","closeAnimationType","overlay","content","disableScroll","padding","className","events","onClose","bind","style","maxHeight","offsetHeight","adjustPosition","isStringFilled","window","document","BX","SiteButton","hide","emit","userOptions","save","Math","floor","Date","now","renderDescription","renderButtons","getSubscribeButton","Button","text","id","size","Size","MEDIUM","color","Color","SUCCESS","noCaps","round","tag","LINK","onclick","getDemoButton","demoButton","LIGHT_BORDER","unbindEvent","setState","State","WAITING","ajax","url","method","dataType","data","sessid","bitrix_sessid","action","onsuccess","result","close","error","UI","Notification","Center","notify","position","FeaturePromotersRegistry","getPromoter","code","getHideButton","EXTRA_SMALL","w","d","u","s","createElement","async","src","h","getElementsByTagName","parentNode","insertBefore","FinalMarketExpiredPopup","WarningMarketExpiredPopup","POPUPS","WARNING","FINAL","MarketExpired","getPopup","getMarketListFromResponse","response","moreLink","marketList","Object","values","push","Extension","getSettings","popup","Promise","all","runAction","limit","then","appsResponse","integrationsResponse","PopupClass","catch","console","log"],"mappings":";;;;;;;;;AAAA,CAAqC;CAAA;AAQrC,CAAO,MAAMA,UAAU,CACvB;GAICC,WAAW,CAACC,OAA0B,EACtC;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,kBAASA,OAAO,CAACC,IAAI;KACzB,4CAAI,kBAASD,OAAO,CAACE,IAAI;;GAG1BC,YAAY,GACZ;KACC,OAAOC,aAAG,CAACC,MAAM,cAAC;;MAEhB,CAAoB;kDACwB,CAAiB,KAAE,CAAiB;;GAElF,GAHI,IAAI,CAACC,UAAU,EAAE,EAC2B,IAAI,CAACC,OAAO,EAAE,EAAK,IAAI,CAACA,OAAO,EAAE;;GAKlFC,QAAQ,CAACC,IAAiB,EAC1B;KACCC,aAAG,CAACC,MAAM,CAAC,IAAI,CAACR,YAAY,EAAE,EAAEM,IAAI,CAAC;;GAGtCF,OAAO,GACP;KACC,+CAAO,IAAI;;GAGZD,UAAU,GACV;KACC,IAAI,yCAAC,IAAI,eAAM,EACf;OACC,OAAOF,aAAG,CAACC,MAAM,gBAAC;;;;IAIlB;;KAGD,OAAOD,aAAG,CAACC,MAAM,gBAAC;;;6BAGO,CAAa;;;;GAItC,2CAJ2B,IAAI;;CAMjC;;;;;AC3DA,CAC2C;CAAA;CAAA;CAAA;CAAA;CAAA;AAU3C,CAAO,MAAMO,UAAU,CACvB;GAOCb,WAAW,CAACC,OAA0B,EACtC;KAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACC,4CAAI,oBAAUa,cAAI,CAACC,OAAO,CAACd,OAAO,CAACe,KAAK,CAAC,GAAGf,OAAO,CAACe,KAAK,GAAG,EAAE;KAC9D,4CAAI,oBAAUf,OAAO,CAACgB,KAAK;KAC3B,4CAAI,kBAAShB,OAAO,CAACiB,IAAI;KACzB,4CAAI,oBAAUjB,OAAO,CAACkB,KAAK;KAC3B,4CAAI,wBAAYlB,OAAO,CAACmB,OAAO;;GAGhCd,MAAM,GACN;KACC,OAAOD,aAAG,CAACC,MAAM,oBAAC;;;6CAGuB,CAAc;+CACZ,CAAa,cAAW,CAAgB;QAC/E,CAEG;;;MAGL,CAAqB;;GAEvB,2CAT2C,IAAI,2DACF,IAAI,yDAAoB,IAAI,uBACnEe,aAAG,CAACC,UAAU,CAAC,4CAA4C,EAAE;OAC9D,SAAS,0CAAE,IAAI;MACf,CAAC,0CAGF,IAAI;;CAsBV;CAAC,wBAhBA;GACC,IAAI,4CAAI,kBAAQC,MAAM,KAAK,CAAC,EAC5B;KACC,OAAO,IAAI;;GAGZ,MAAMC,aAAa,GAAGnB,aAAG,CAACC,MAAM,sBAAC;;GAEjC,EAAC;GAED,4CAAI,kBAAQmB,OAAO,CAAEC,IAAgB,IAAK;KACzCA,IAAI,CAACjB,QAAQ,CAACe,aAAa,CAAC;IAC5B,CAAC;GAEF,OAAOA,aAAa;CACrB;;;;AC7DD,CAEO,MAAMG,WAAW,CACxB;GACCrB,MAAM,GACN;KACC,OAAOD,aAAG,CAACC,MAAM,oBAAC;;;OAGf,CAGG;;;GAGN,GANKe,aAAG,CAACC,UAAU,CAAC,gDAAgD,EAAE;OAClE,cAAc,EAAE,sEAAsE;OACtF,eAAe,EAAE;MACjB,CAAC;;CAKP;;CCjB0D;CAAA;CAAA;AAO1D,CAAO,MAAMM,QAAQ,CACrB;GACC5B,WAAW,CAAC6B,OAAwB,EACpC;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KACC,IAAI,CAACA,OAAO,GAAGA,OAAO;;GAGvBC,QAAQ,GACR;KACC,4CAAI,gBAAO;OACVC,IAAI,EAAE,YAAY;OAClBC,QAAQ,EAAE,QAAQ;OAClBC,KAAK,EAAE;MACP;;GAGFC,eAAe,CAACC,MAAc,EAC9B;KACC,4CAAI,gBAAO;OACVJ,IAAI,EAAE,YAAY;OAClBC,QAAQ,EAAE,QAAQ;OAClBC,KAAK,EAAE,cAAc;OACrBG,SAAS,EAAED;MACX;;GAGFE,iBAAiB,GACjB;KACC,4CAAI,gBAAO;OACVN,IAAI,EAAE,UAAU;OAChBC,QAAQ,EAAE,MAAM;OAChBC,KAAK,EAAE;MACP;;CAuBH;CAAC,gBApBMhC,OAAyB,EAC/B;GACCqC,qBAAQ,CAAC;KACR,GAAGrC,OAAO;KACVsC,IAAI,0CAAE,IAAI,uBAAW;KACrBC,EAAE,0CAAE,IAAI;IACR,CAAC;CACH;CAAC,qBAGD;GACC,OAAO,IAAI,CAACX,OAAO,CAACY,SAAS,KAAK,SAAS,GACxC,yBAAyB,GACzB,2BAA2B;CAC/B;CAAC,kBAGD;GACC,OAAQ,YAAW,IAAI,CAACZ,OAAO,CAACa,YAAY,GAAG,GAAG,GAAG,GAAI,EAAC;CAC3D;;;;;;;;AC7DD,CAQuC;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;AAavC,CAAO,MAAMC,kBAAkB,SAASC,6BAAY,CACpD;GAaC5C,WAAW,CAACC,OAAkC,EAC9C;KACC,KAAK,EAAE;KAAC;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;OAAA,OAbQ;;KAAI;OAAA;OAAA,OACM;;KAAI;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OAOO;;KAAI;OAAA;OAAA;;KAMzC,IAAI,CAAC4C,iBAAiB,CAAC,0BAA0B,CAAC;KAClD,IAAI,CAACC,uBAAuB,GAAG7C,OAAO,CAAC6C,uBAAuB;KAC9D,4CAAI,wBAAY7C,OAAO,CAAC8C,OAAO;KAC/B,4CAAI,wCAAoB9C,OAAO,CAAC+C,eAAe;KAC/C,4CAAI,oDAA0B/C,OAAO,CAACgD,qBAAqB;KAC3D,4CAAI,kCAAiBhD,OAAO,CAACyC,YAAY;KACzC,IAAI,CAACQ,QAAQ,GAAGjD,OAAO,CAACiD,QAAQ;KAChC,IAAI,CAACC,YAAY,GAAGlD,OAAO,CAACkD,YAAY;KACxC,4CAAI,0BAAalD,OAAO,CAACmD,QAAQ;;GAGlCC,OAAO,GACP;KACC,OAAO,EAAE;;GAGVC,QAAQ,GACR;KACC,OAAO,EAAE;;GAGVC,IAAI,GACJ;KAAA;KACC,+FAAI,uFAAYC,6BAAkB,CAACC,MAAM,CACvC,sBAAqB,IAAI,CAACJ,OAAO,EAAG,EAAC,EACtC,IAAI,EACJ;OACCK,SAAS,EAAE;SACVC,aAAa,EAAE,iCAAiC;SAChDC,kBAAkB,EAAE;QACpB;OACDC,OAAO,EAAE,IAAI;OACbC,OAAO,0CAAE,IAAI,6BAAc;OAC3BC,aAAa,EAAE,IAAI;OACnBC,OAAO,EAAE,CAAC;OACVC,SAAS,EAAE,mCAAmC;OAC9CC,MAAM,EAAE;SACPC,OAAO,EAAE,IAAI,CAACA,OAAO,CAACC,IAAI,CAAC,IAAI;;MAEhC,CACD;KAED,sEAAI,sCAAJ,uBAAab,IAAI,EAAE;KACnB,sEAAI,4CAAJ,uBAAgBzB,QAAQ,EAAE;;;KAG1B,4CAAI,IAAI,iCACR;OACCnB,aAAG,CAAC0D,KAAK,yCACR,IAAI,mCACJ;SACCC,SAAS,EAAG,GAAE,4CAAI,wDAA4BC,YAAa;QAC3D,CACD;OACD,4CAAI,kBAAQC,cAAc,EAAE;;KAG7B,IACC1D,cAAI,CAAC2D,cAAc,CAAC,IAAI,CAACtB,YAAY,CAAC,KAClC,CAAC,IAAI,CAACD,QAAQ,IAAI,IAAI,CAACG,OAAO,EAAE,KAAK,OAAO,CAAC,EAElD;OACC,4CAAI,gCAAeqB,MAAM,EAAEC,QAAQ,EAAG,uDAAsD,IAAI,CAACxB,YAAa,KAAI;;;GAIpHgB,OAAO,GACP;KAAA;KACC,kBAAAS,EAAE,CAACC,UAAU,qBAAb,eAAeC,IAAI,EAAE;KACrB,IAAI,CAACC,IAAI,CAAC,SAAS,CAAC;KACpBH,EAAE,CAACI,WAAW,CAACC,IAAI,CAAC,MAAM,EAAE,yBAAyB,EAAE,IAAI,EAAEC,IAAI,CAACC,KAAK,CAACC,IAAI,CAACC,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;;;;CAI7F;CACA;CACA;CACA;CACA;;GAWCC,iBAAiB,GACjB;KACC,OAAO,IAAI;;GAGZC,aAAa,GACb;KACC,OAAO,IAAI;;GAiFZC,kBAAkB,GAClB;KACC,OAAO,IAAIC,iBAAM,CAAC;OACjBC,IAAI,EAAErE,aAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC;OAClE2C,SAAS,EAAE,mCAAmC;OAC9C0B,EAAE,EAAE,qCAAqC;OACzCC,IAAI,EAAEH,iBAAM,CAACI,IAAI,CAACC,MAAM;OACxBC,KAAK,EAAEN,iBAAM,CAACO,KAAK,CAACC,OAAO;OAC3BC,MAAM,EAAE,IAAI;OACZC,KAAK,EAAE,IAAI;OACXC,GAAG,EAAEX,iBAAM,CAACpF,GAAG,CAACgG,IAAI;OACpBnF,IAAI,0CAAE,IAAI,iDAAuB;OACjCoF,OAAO,EAAE,MAAM;SAAA;SACd,sEAAI,4CAAJ,uBAAgBpE,eAAe,CAAC,KAAK,CAAC;;MAEvC,CAAC;;GAGHqE,aAAa,GACb;KACC,MAAMC,UAAU,GAAG,IAAIf,iBAAM,CAAC;OAC7BC,IAAI,EAAErE,aAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;OAC7D2C,SAAS,EAAE,mCAAmC;OAC9C0B,EAAE,EAAE,gCAAgC;OACpCC,IAAI,EAAEH,iBAAM,CAACI,IAAI,CAACC,MAAM;OACxBC,KAAK,EAAEN,iBAAM,CAACO,KAAK,CAACS,YAAY;OAChCP,MAAM,EAAE,IAAI;OACZC,KAAK,EAAE,IAAI;OACXG,OAAO,EAAE,MAAM;SAAA;SACdE,UAAU,CAACE,WAAW,CAAC,OAAO,CAAC;SAC/BF,UAAU,CAACG,QAAQ,CAAClB,iBAAM,CAACmB,KAAK,CAACC,OAAO,CAAC;SACzC,sEAAI,4CAAJ,uBAAgB3E,eAAe,CAAC,MAAM,CAAC;SACvC4E,cAAI,CAAC;WACJC,GAAG,EAAE,wBAAwB;WAC7BC,MAAM,EAAE,MAAM;WACdC,QAAQ,EAAE,MAAM;WAChBC,IAAI,EAAE;aACLC,MAAM,EAAEvC,EAAE,CAACwC,aAAa,EAAE;aAC1BC,MAAM,EAAE;YACR;WACDC,SAAS,EAAGC,MAAM,IAAK;aACtB,4CAAI,kBAAQC,KAAK,EAAE;aAEnB,IAAID,MAAM,CAACE,KAAK,EAChB;eACCC,kBAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;iBAC7B/D,OAAO,EAAEyD,MAAM,CAACE,KAAK;iBACrBzF,QAAQ,EAAE,sBAAsB;iBAChC8F,QAAQ,EAAE;gBACV,CAAC;cACF,MAED;eAAA;eACC,sEAAI,4CAAJ,uBAAgBzF,iBAAiB,EAAE;eACnC0F,sCAAwB,CAACC,WAAW,CAAC;iBAAEC,IAAI,EAAE;gBAA6B,CAAC,CAAC1E,IAAI,EAAE;;;UAGpF,CAAC;;MAEH,CAAC;KAEF,OAAOiD,UAAU;;GAGlB0B,aAAa,GACb;KACC,OAAO,IAAIzC,iBAAM,CAAC;OACjBC,IAAI,EAAErE,aAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;OAC7D2C,SAAS,EAAE,2EAA2E;OACtF0B,EAAE,EAAE,gCAAgC;OACpCC,IAAI,EAAEH,iBAAM,CAACI,IAAI,CAACsC,WAAW;OAC7BpC,KAAK,EAAEN,iBAAM,CAACO,KAAK,CAACK,IAAI;OACxBH,MAAM,EAAE,IAAI;OACZI,OAAO,EAAE,MAAM;SAAA;SACd,sEAAI,sCAAJ,uBAAakB,KAAK,EAAE;SACpB,sEAAI,4CAAJ,uBAAgBtF,eAAe,CAAC,IAAI,CAAC;SACrC0C,EAAE,CAACI,WAAW,CAACC,IAAI,CAAC,MAAM,EAAE,8BAA8B,EAAE,IAAI,EAAE,GAAG,CAAC;;MAEvE,CAAC;;CAQJ;CAAC,4BAvLA;GACC,OAAQ;;KAEL,4CAAI,kCAAiB,EAAE,GAAG,aAAc;;KAExC,IAAI,CAAC/B,QAAQ,GAAG,EAAE,GAAG,UAAW;GAClC;CACF;CAAC,wBAaD;GACC,OAAO7C,aAAG,CAACC,MAAM,oBAAC;;MAEhB,CAAuB;;GAEzB,2CAFI,IAAI;CAGT;CAAC,0BAGD;GAAA;GACC,kGAAI,sGAAgBD,aAAG,CAACC,MAAM,sBAAC;;MAE7B,CAA4D;;;uDAGX,CAAkB;QACjE,CAA2B;QAC3B,CAA0B;QAC1B,CAAuB;;OAExB,CAA2B;OAC3B,CAA0B;;;GAG7B,GAZI,4CAAI,0EAAiB,IAAI,0DAA8B,EAAE,EAGR,IAAI,CAACgD,QAAQ,EAAE,EAC9D,IAAI,CAACgC,iBAAiB,EAAE,0CACxB,IAAI,yCACJ,IAAI,CAACC,aAAa,EAAE,0CAErB,IAAI,mFACJ,IAAI;GAKT,+CAAO,IAAI;CACZ;CAAC,6BAGD;GACC,MAAMnE,OAAO,GAAG,MAAM;KAAA;KACrB,4CAAI,kBAAQoG,KAAK,EAAE;KACnB,uEAAI,4CAAJ,wBAAgBtF,eAAe,CAAC,QAAQ,CAAC;IACzC;GAED,OAAO7B,aAAG,CAACC,MAAM,sBAAC;wFACkE,CAAU;GAC9F,GADsFc,OAAO;CAE9F;CAAC,qCAGD;GAAA;GACC,kGAAI,uIAA4B,IAAIO,WAAW,CAAC,IAAI,CAACuB,QAAQ,CAAC,CAAE5C,MAAM,EAAE;GAExE,+CAAO,IAAI;CACZ;CAAC,8BAGD;GAAA;GACC,OAAOD,aAAG,CAACC,MAAM,kBAAC;;MAEhB,CAA0B;MAC1B,CAAkC;;GAEpC,sEAHI,IAAI,0CAAJ,wBAAeA,MAAM,EAAE,qEACvB,IAAI,0DAAJ,wBAAuBA,MAAM,EAAE;CAGpC;CAAC,6BAGD;GACC,MAAMgG,OAAO,GAAG,MAAM;KAAA;KACrB,uEAAI,4CAAJ,wBAAgBpE,eAAe,CAAC,SAAS,CAAC;IAC1C;GAED,OAAO7B,aAAG,CAACC,MAAM,kBAAC;;;;8BAIQ,CAAyB;gBACvC,CAAU;;OAEnB,CAAsD;;;GAGzD,2CAN4B,IAAI,uCAClBgG,OAAO,EAEhBjF,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;CAIzD;CAAC,wBAmFa8G,CAAC,EAAEC,CAAC,EAAEC,CAAC,EACrB;GACC,MAAMC,CAAC,GAAGF,CAAC,CAACG,aAAa,CAAC,QAAQ,CAAC;GAAED,CAAC,CAACE,KAAK,GAAG,IAAI;GAAEF,CAAC,CAACG,GAAG,GAAI,GAAEJ,CAAE,IAAGlD,IAAI,CAACC,GAAG,EAAE,GAAG,KAAK,GAAG,CAAE,EAAC;GAC7F,MAAMsD,CAAC,GAAGN,CAAC,CAACO,oBAAoB,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC;GAAED,CAAC,CAACE,UAAU,CAACC,YAAY,CAACP,CAAC,EAAEI,CAAC,CAAC;CAC/E;;;;;;AC5SD,CAGO,MAAMI,uBAAuB,SAASpG,kBAAkB,CAC/D;GACCU,OAAO,GACP;KACC,OAAO,OAAO;;GAGfC,QAAQ,GACR;KACC,OAAOjC,aAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;;GAG/DgE,iBAAiB,GACjB;KACC,OAAOjF,aAAG,CAACC,MAAM,oBAAC;;;OAGf,CAA4D;;;OAG5D,CAA4D;;;OAG5D,CAA4D;;;OAG5D,CAAgE;;;OAGhE,CAA+F;;;GAGlG,GAfKe,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC,EAGzDD,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC,EAGzDD,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC,EAGzDD,aAAG,CAACC,UAAU,CAAC,6CAA6C,CAAC,EAG7DD,aAAG,CAACC,UAAU,CAAE,8CAA6C,IAAI,CAAC4B,QAAQ,GAAG,OAAO,GAAG,EAAG,EAAC,CAAC;;GAMlGqC,aAAa,GACb;KACC,IAAI,IAAI,CAACrC,QAAQ,EACjB;OACC,OAAO7C,aAAG,CAACC,MAAM,sBAAC;;OAEhB,CAAqC;;QAEpC,CAAgC;QAChC,CAAgC;;;IAGnC,GANI,IAAI,CAACkF,kBAAkB,EAAE,CAAClF,MAAM,EAAE,EAEjC,IAAI,CAACiG,aAAa,EAAE,CAACjG,MAAM,EAAE,EAC7B,IAAI,CAAC4H,aAAa,EAAE,CAAC5H,MAAM,EAAE;;KAMnC,OAAOD,aAAG,CAACC,MAAM,sBAAC;;MAEhB,CAAqC;MACrC,CAAgC;;GAElC,GAHI,IAAI,CAACkF,kBAAkB,EAAE,CAAClF,MAAM,EAAE,EAClC,IAAI,CAAC4H,aAAa,EAAE,CAAC5H,MAAM,EAAE;;CAInC;;;;;AC5DA,CAGO,MAAM0I,yBAAyB,SAASrG,kBAAkB,CACjE;GACCU,OAAO,GACP;KACC,OAAO,SAAS;;GAGjBiC,iBAAiB,GACjB;KACC,OAAOjF,aAAG,CAACC,MAAM,oBAAC;;;OAGf,CAA4D;;;OAG5D,CAA4D;;;OAG5D,CAA4D;;;OAG5D,CAEG;;;GAGN,GAdKe,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC,EAGzDD,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC,EAGzDD,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC,EAGzDD,aAAG,CAACC,UAAU,CAAE,gDAA+C,IAAI,CAAC4B,QAAQ,GAAG,OAAO,GAAG,EAAG,EAAC,EAAE;OAChG,QAAQ,EAAE,IAAI,CAACJ;MACf,CAAC;;GAMNQ,QAAQ,GACR;KACC,OAAOjC,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC;;GAGjEiE,aAAa,GACb;KACC,OAAOlF,aAAG,CAACC,MAAM,sBAAC;;MAEhB,CAAqC;MACrC,CAAqD;;GAEvD,GAHI,IAAI,CAACkF,kBAAkB,EAAE,CAAClF,MAAM,EAAE,EAClC,IAAI,CAAC4C,QAAQ,GAAG,IAAI,CAACqD,aAAa,EAAE,CAACjG,MAAM,EAAE,GAAG,EAAE;;CAIxD;;CC9BA,MAAM2I,MAAM,GAAG;GACdC,OAAO,EAAEF,yBAAyB;GAClCG,KAAK,EAAEJ;CACR,CAAC;AAED,CAAO,MAAMK,aAAa,CAC1B;GACC,aAAaC,QAAQ,GACrB;KACC,MAAMC,yBAAyB,GAAG,CAACC,QAAQ,EAAEC,QAAQ,EAAEvI,KAAK,EAAEG,OAAO,KAAkB;OACtF,IAAI,CAACmI,QAAQ,IAAI,CAACA,QAAQ,CAACrC,IAAI,EAC/B;SACC,OAAO,IAAI;;OAGZ,MAAM;SAAElG,KAAK;SAAEG;QAAO,GAAGoI,QAAQ,CAACrC,IAAI;OACtC,MAAMuC,UAAU,GAAG,EAAE;OAErB,IAAIzI,KAAK,CAACO,MAAM,KAAK,CAAC,IAAIJ,KAAK,GAAG,CAAC,EACnC;SACC,OAAO,IAAI;;OAGZuI,MAAM,CAACC,MAAM,CAAC3I,KAAK,CAAC,CAACS,OAAO,CAAEC,IAAI,IAAK;SACtC+H,UAAU,CAACG,IAAI,CAAC,IAAI7J,UAAU,CAAC;WAC9BG,IAAI,EAAEwB,IAAI,CAACxB,IAAI;WACfC,IAAI,EAAEuB,IAAI,CAACvB;UACX,CAAC,CAAC;QACH,CAAC;OAEF,OAAO,IAAIU,UAAU,CAAC;SACrBI,KAAK;SACLE,KAAK;SACLH,KAAK,EAAEyI,UAAU;SACjBvI,IAAI,EAAEsI,QAAQ;SACdpI;QACA,CAAC;MACF;KAED,MAAMnB,OAAO,GAAG4J,mBAAS,CAACC,WAAW,CAAC,qBAAqB,CAAC;KAC5D,IAAIC,KAAK,GAAG,IAAI;KAEhB,MAAMC,OAAO,CAACC,GAAG,CAAC,CACjBnD,cAAI,CAACoD,SAAS,CAAC,qCAAqC,EAAE;OAAEhD,IAAI,EAAE;SAAEiD,KAAK,EAAE;;MAAK,CAAC,EAC7ErD,cAAI,CAACoD,SAAS,CAAC,qCAAqC,EAAE;OAAEhD,IAAI,EAAE;SAAEiD,KAAK,EAAE;;MAAK,CAAC,CAC7E,CAAC,CAACC,IAAI,CAAC,CAAC,CAACC,YAAY,EAAEC,oBAAoB,CAAC,KAAK;OACjD,MAAMlH,QAAQ,GAAG,IAAIxB,QAAQ,CAAC;SAC7Bc,YAAY,EAAEzC,OAAO,CAACyC,YAAY;SAClCD,SAAS,EAAExC,OAAO,CAACsC;QACnB,CAAC;OAEF,MAAMQ,OAAO,GAAGuG,yBAAyB,CACxCe,YAAY,EACZ,oBAAoB,EACpBhJ,aAAG,CAACC,UAAU,CAAC,kDAAkD,CAAC,EAClE,MAAM;SACL8B,QAAQ,CAAClB,eAAe,CAAC,eAAe,CAAC;QACzC,CACD;OACD,MAAMc,eAAe,GAAGsG,yBAAyB,CAChDgB,oBAAoB,EACpB,eAAe,EACfjJ,aAAG,CAACC,UAAU,CAAC,0DAA0D,CAAC,EAC1E,MAAM;SACL8B,QAAQ,CAAClB,eAAe,CAAC,uBAAuB,CAAC;QACjD,CACD;OAED,IAAIa,OAAO,IAAIC,eAAe,EAC9B;SACC,MAAMuH,UAAU,GAAGtB,MAAM,CAAChJ,OAAO,CAACsC,IAAI,CAAC;SAEvC,IAAIgI,UAAU,EACd;WACCR,KAAK,GAAG,IAAIQ,UAAU,CAAC;aACtBzH,uBAAuB,EAAE7C,OAAO,CAAC6C,uBAAuB;aACxDC,OAAO;aACPC,eAAe;aACfC,qBAAqB,EAAEhD,OAAO,CAACgD,qBAAqB;aACpDP,YAAY,EAAEzC,OAAO,CAACyC,YAAY;aAClCQ,QAAQ,EAAEjD,OAAO,CAACiD,QAAQ;aAC1BC,YAAY,EAAElD,OAAO,CAACkD,YAAY;aAClCC;YACA,CAAC;;;MAGJ,CAAC,CAACoH,KAAK,CAAE/C,KAAK,IAAK;OACnBgD,OAAO,CAACC,GAAG,CAACjD,KAAK,CAAC;MAClB,CAAC;KAEF,OAAOsC,KAAK;;CAEd;;;;;;;;;;;;"}