{"version":3,"sources":["top_panel.js"],"names":["BX","namespace","removeClass","Landing","Utils","addClass","onCustomEvent","bind","makeFilterablePopupMenu","makeSelectablePopupMenu","style","encodeDataValue","UI","Panel","Top","id","data","BasePanel","apply","this","arguments","layout","document","querySelector","siteButton","pageButton","undoButton","redoButton","desktopButton","tabletButton","mobileButton","iframeWrapper","iframe","lastActive","loader","onDesktopSizeChange","onTabletSizeChange","onMobileSizeChange","onIframeClick","onSiteButtonClick","onPageButtonClick","onUndo","onRedo","onKeyDown","adjustHistoryButtonsState","contentDocument","window","sitesCount","parseInt","Main","getInstance","options","sites_count","pagesCount","pages_count","rootWindow","PageObject","getRootWindow","topHistory","getClass","History","instance","prototype","constructor","__proto__","superclass","event","key","keyCode","which","navigator","userAgent","match","ctrlKey","metaKey","shiftKey","preventDefault","canUndo","hasAttribute","getLoader","show","undo","then","hide","canRedo","redo","Loader","size","offset","top","left","stroke-width","margin-top","history","classList","remove","removeAttribute","add","disableHistory","setAttribute","enableHistory","disableDevices","enableDevices","DOM","write","width","dataset","postfix","enableControls","disableControls","siteMenu","PopupMenuWindow","bindElement","events","onPopupClose","blur","menuShowDelay","offsetTop","popupWindow","contentContainer","minHeight","minWidth","siteId","site_id","landingId","filter","=TYPE","params","type","SPECIAL","Backend","getSites","sites","Promise","resolve","setTimeout","forEach","site","addMenuItem","ID","text","TITLE","items","editMask","sef_url","site_edit","showMask","site_show","push","Loc","getMessage","href","replace","pageMenu","getLandings","landings","landing","FOLDER_ID","IS_AREA","landing_edit","viewMask","landing_view","FOLDER","siteShowMask","addQueryParams","SITE_ID","folderId","requestAnimationFrame","close"],"mappings":"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","file":"top_panel.map.js"}