{"version":3,"file":"analytics.bundle.js","sources":["../src/analytics.js"],"sourcesContent":["import { sendData } from 'ui.analytics';\nimport { Context, LinkType, LinkCreateMethod, Params, RuleChange } from './types';\n\nexport class Analytics\n{\n\tstatic tool = 'calendar';\n\tstatic category = 'slots';\n\n\tstatic contexts: Map<string, Context> = {\n\t\tcalendar: 'calendar',\n\t\tcrm: 'crm',\n\t};\n\n\tstatic linkTypes: Map<string, LinkType> = {\n\t\tsolo: 'solo',\n\t\tmultiple: 'multiple',\n\t};\n\n\tstatic events = {\n\t\tform_open: 'form_open',\n\t\tsetup: 'setup',\n\t\tadding_people: 'adding_people',\n\t\tlink_created: 'link_created',\n\t};\n\n\tstatic linkCreateMethods: Map<string, LinkCreateMethod> = {\n\t\tcrm_send: 'crm_send',\n\t\tcrm_copy: 'crm_copy',\n\t\tcalendar_copy_main: 'calendar_copy_main',\n\t\tcalendar_copy_list: 'calendar_copy_list',\n\t};\n\n\tstatic ruleChanges: Map<string, RuleChange> = {\n\t\tcustom_days: 'custom_days',\n\t\tcustom_length: 'custom_length',\n\t};\n\n\tstatic sendPopupOpened(context: Context): void\n\t{\n\t\tthis.sendAnalytics(Analytics.events.form_open, {\n\t\t\tc_section: context,\n\t\t});\n\t}\n\n\tstatic sendRuleUpdated(context: Context, changes: RuleChange[]): void\n\t{\n\t\tfor (const type of changes)\n\t\t{\n\t\t\tthis.sendAnalytics(Analytics.events.setup, {\n\t\t\t\ttype,\n\t\t\t\tc_section: context,\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic sendMembersAdded(context: Context, peopleCount: number): void\n\t{\n\t\tthis.sendAnalytics(Analytics.events.adding_people, {\n\t\t\tc_section: context,\n\t\t\tp1: `peopleCount_${peopleCount}`,\n\t\t});\n\t}\n\n\tstatic sendLinkCopied(context: Context, type: LinkType, params: Params): void\n\t{\n\t\tlet method = Analytics.linkCreateMethods.calendar_copy_main;\n\t\tif (context === Analytics.contexts.crm)\n\t\t{\n\t\t\tmethod = Analytics.linkCreateMethods.crm_copy;\n\t\t}\n\n\t\tthis.sendLinkCreated(context, type, method, params);\n\t}\n\n\tstatic sendLinkCopiedList(context: Context, params: Params): void\n\t{\n\t\tconst method = Analytics.linkCreateMethods.calendar_copy_list;\n\n\t\tthis.sendLinkCreated(context, Analytics.linkTypes.multiple, method, params);\n\t}\n\n\tstatic sendLinkCreated(context: Context, type: LinkType, method: LinkCreateMethod, params: Params): void\n\t{\n\t\tconst ruleChanges = {\n\t\t\tcustomDays: params.ruleChanges.includes(Analytics.ruleChanges.custom_days) ? 'Y' : 'N',\n\t\t\tcustomLength: params.ruleChanges.includes(Analytics.ruleChanges.custom_length) ? 'Y' : 'N',\n\t\t};\n\n\t\tthis.sendAnalytics(Analytics.events.link_created, {\n\t\t\ttype,\n\t\t\tc_section: context,\n\t\t\tc_element: method,\n\t\t\tp1: `peopleCount_${params.peopleCount}`,\n\t\t\tp2: `customDays_${ruleChanges.customDays}`,\n\t\t\tp3: `customLength_${ruleChanges.customLength}`,\n\t\t});\n\t}\n\n\t/**\n\t * @private\n\t */\n\tstatic sendAnalytics(event: string, params: {\n\t\tc_section: string,\n\t\tc_element: string,\n\t\ttype: string,\n\t\tp1: string,\n\t\tp2: string,\n\t\tp3: string,\n\t}): void\n\t{\n\t\tsendData({\n\t\t\ttool: Analytics.tool,\n\t\t\tcategory: Analytics.category,\n\t\t\tevent,\n\t\t\t...params,\n\t\t});\n\t}\n}"],"names":["Analytics","sendPopupOpened","context","sendAnalytics","events","form_open","c_section","sendRuleUpdated","changes","type","setup","sendMembersAdded","peopleCount","adding_people","p1","sendLinkCopied","params","method","linkCreateMethods","calendar_copy_main","contexts","crm","crm_copy","sendLinkCreated","sendLinkCopiedList","calendar_copy_list","linkTypes","multiple","ruleChanges","customDays","includes","custom_days","customLength","custom_length","link_created","c_element","p2","p3","event","sendData","tool","category","calendar","solo","crm_send"],"mappings":"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"}