this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(s,e,t){"use strict";class o{constructor(){this.store=t.Core.getStore()}async handleRecentListResponse(s){if(!s){return Promise.resolve()}const{recommendedRoles:e,roles:t,chats:o,messages:r}=s;if(!t){return Promise.resolve()}return Promise.all([this.store.dispatch("copilot/chats/add",o),this.store.dispatch("copilot/roles/add",t),this.store.dispatch("copilot/setRecommendedRoles",e),this.store.dispatch("copilot/messages/add",r)])}async handleChatLoadResponse(s){if(!s){return Promise.resolve()}const{aiProvider:e,chats:t,roles:o,messages:r}=s;if(!o){return Promise.resolve()}return Promise.all([this.store.dispatch("copilot/setProvider",e),this.store.dispatch("copilot/roles/add",o),this.store.dispatch("copilot/chats/add",t),this.store.dispatch("copilot/messages/add",r)])}async handleRoleUpdate(s){const{chats:e,roles:t}=s;if(!t){return Promise.resolve()}return Promise.all([this.store.dispatch("copilot/roles/add",t),this.store.dispatch("copilot/chats/add",e)])}async handleMessageAdd(s){const{chats:e,roles:t,messages:o}=s;if(!t){return Promise.resolve()}return Promise.all([this.store.dispatch("copilot/roles/add",t),this.store.dispatch("copilot/chats/add",e),this.store.dispatch("copilot/messages/add",o)])}getRoleAvatarUrl({avatarDialogId:s,contextDialogId:e}){if(!this.isCopilotChatOrBot(s)){return""}return this.store.getters["copilot/chats/getRoleAvatar"](e)}isCopilotBot(s){return this.store.getters["users/bots/isCopilot"](s)}isCopilotChat(s){var t;return((t=this.store.getters["chats/get"](s))==null?void 0:t.type)===e.ChatType.copilot}isCopilotChatOrBot(s){return this.isCopilotChat(s)||this.isCopilotBot(s)}getMessageRoleAvatar(s){var e,t;return(e=this.store.getters["copilot/messages/getRole"](s))==null?void 0:(t=e.avatar)==null?void 0:t.medium}getNameWithRole({dialogId:s,messageId:e}){const t=this.store.getters["users/get"](s);const o=this.store.getters["copilot/messages/getRole"](e).name;return`${t.name} (${o})`}isCopilotMessage(s){const t=this.store.getters["messages/getById"](s);if(!t){return false}if(this.isCopilotBot(t.authorId)){return true}return t.componentId===e.MessageComponent.copilotCreation}}s.CopilotManager=o})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Const,BX.Messenger.v2.Application);
//# sourceMappingURL=copilot.bundle.map.js