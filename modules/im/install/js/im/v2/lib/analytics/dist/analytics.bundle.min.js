this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,a,o,s,c){"use strict";const n=Object.freeze({private:"chatType_private",multiuser:"chatType_multiuser"});const i=Object.freeze({openMessenger:"open_messenger",openChat:"open_chat",createNewChat:"create_new_chat",audioUse:"audio_use",openTab:"open_tab",popupOpen:"popup_open",openPrices:"open_prices",openSettings:"open_settings",clickCreateNew:"click_create_new",openExisting:"open_existing",clickDelete:"click_delete",cancelDelete:"cancel_delete",delete:"delete",view:"view",click:"click",clickEdit:"click_edit",submitEdit:"submit_edit",clickCallButton:"click_call_button",clickStartConf:"click_start_conf",clickJoin:"click_join",clickAddUser:"click_add_user",openCalendar:"open_calendar",openTasks:"open_tasks",openFiles:"open_files",clickCreateTask:"click_create_task",clickCreateEvent:"click_create_event",clickAttach:"click_attach",downloadFile:"download_file",saveToDisk:"save_to_disk"});const r=Object.freeze({ai:"ai",checkin:"checkin",im:"im",infoHelper:"InfoHelper"});const l=Object.freeze({chatOperations:"chat_operations",shift:"shift",messenger:"messenger",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",limit:"limit",limitBanner:"limit_banner",toolOff:"tool_off",message:"message",chatPopup:"chat_popup",call:"call",collab:"collab"});const p=Object.freeze({ai:"ai",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",deletedMessage:"deleted_message",limitOfficeChatingHistory:"limit_office_chating_history",privateCall:"private",groupCall:"group"});const d=Object.freeze({copilotTab:"copilot_tab",chat:"chat",chatStart:"chat_start",chatHistory:"chat_history",sidebar:"sidebar",popup:"popup",activeChat:"active_chat",comments:"comments",chatHeader:"chat_header",chatSidebar:"chat_sidebar",chatTextarea:"chat_textarea",editor:"editor",chatWindow:"chat_window"});const h=Object.freeze({contextMenu:"context_menu",sidebar:"sidebar",chatWindow:"chat_window",messageLink:"message_link",chatSidebar:"chat_sidebar",chatList:"chat_list",window:"window"});const g=Object.freeze({initialBanner:"initial_banner",videocall:"videocall",audiocall:"audiocall",startButton:"start_button"});const y=Object.freeze({success:"success",errorTurnedOff:"error_turnedoff"});const b=Object.freeze({collabEmptyState:"collab_empty_state"});function u(e){const t=c.Core.getStore().getters["chats/collabs/getByChatId"](e);if(!t){return null}return`collabId_${t.collabId}`}const _=Object.freeze({userIntranet:"user_intranet",userExtranet:"user_extranet",userCollaber:"user_collaber"});function C(){const e=c.Core.getStore().getters["users/get"](c.Core.getUserId(),true);switch(e.type){case s.UserType.user:return _.userIntranet;case s.UserType.extranet:return _.userExtranet;case s.UserType.collaber:return _.userCollaber;default:return _.userIntranet}}function m(e){switch(e){case s.ChatType.channel:case s.ChatType.openChannel:case s.ChatType.comment:case s.ChatType.generalChannel:return l.channel;case s.ChatType.copilot:return l.copilot;case s.ChatType.videoconf:return l.videoconf;case s.ChatType.collab:return l.collab;default:return l.chat}}const v="custom";function f(e){var t;return(t=s.ChatType[e.type])!=null?t:v}const I={single:"files_single",many:"files_all"};const k={...s.FileType,media:"media",any:"any"};class T{onClickDownload({messageId:e,dialogId:a}){const n=c.Core.getStore().getters["chats/get"](a);const l={tool:r.im,category:m(n.type),event:i.downloadFile,type:B(e),c_section:d.chatWindow,c_sub_section:h.contextMenu,p1:`chatType_${n.type}`,p2:C(),p3:S(e),p5:`chatId_${n.chatId}`};if(n.type===s.ChatType.collab){l.p4=t.getCollabId(n.chatId)}o.sendData(l)}onClickSaveOnDisk({messageId:e,dialogId:a}){const n=c.Core.getStore().getters["chats/get"](a);const l={tool:r.im,category:m(n.type),event:i.saveToDisk,type:B(e),c_section:d.chatWindow,c_sub_section:h.contextMenu,p1:`chatType_${n.type}`,p2:C(),p3:S(e),p5:`chatId_${n.chatId}`};if(n.type===s.ChatType.collab){l.p4=t.getCollabId(n.chatId)}o.sendData(l)}}function S(e){const t=c.Core.getStore().getters["messages/getById"](e);if(t.files.length===1){return I.single}return I.many}function B(e){const t=c.Core.getStore().getters["messages/getById"](e);const a=t.files.map((e=>c.Core.getStore().getters["files/get"](e).type));const o=[...new Set(a)];if(o.length===1){return o[0]}if(o.length===2&&o.includes(s.FileType.image)&&o.includes(s.FileType.video)){return k.media}return k.any}const D={[s.CollabEntityType.tasks]:i.openTasks,[s.CollabEntityType.calendar]:i.openCalendar,[s.CollabEntityType.files]:i.openFiles};class w{onClick(e,t){const a=D[t];if(!a){return}const n=c.Core.getStore().getters["chats/get"](e,true);const i={tool:r.im,category:l.collab,event:a,c_section:d.chatHeader,p2:C(),p5:`chatId_${n.chatId}`};if(n.type===s.ChatType.collab){i.p4=u(n.chatId)}o.sendData(i)}}var L=babelHelpers.classPrivateFieldLooseKey("onClick");class O{constructor(){Object.defineProperty(this,L,{value:$})}onCreateTaskFromSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,L)[L]({dialogId:e,event:i.clickCreateTask,section:d.chatSidebar})}onCreateTaskFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,L)[L]({dialogId:e,event:i.clickCreateTask,section:d.chatTextarea})}onCreateEventFromSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,L)[L]({dialogId:e,event:i.clickCreateEvent,section:d.chatSidebar})}onCreateEventFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,L)[L]({dialogId:e,event:i.clickCreateEvent,section:d.chatTextarea})}}function $({dialogId:e,event:t,section:a}){const n=c.Core.getStore().getters["chats/get"](e,true);const i={tool:r.im,category:m(n.type),event:t,c_section:a,p1:`chatType_${f(n)}`,p2:C(),p5:`chatId_${n.chatId}`};if(n.type===s.ChatType.collab){i.p4=u(n.chatId)}o.sendData(i)}class P{onClick(e){const t=c.Core.getStore().getters["chats/get"](e);o.sendData({tool:r.im,category:m(t.type),event:i.clickDelete,type:f(t),c_section:d.sidebar,c_sub_section:h.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onCancel(e){const t=c.Core.getStore().getters["chats/get"](e);o.sendData({tool:r.im,category:m(t.type),event:i.cancelDelete,type:f(t),c_section:d.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onConfirm(e){const t=c.Core.getStore().getters["chats/get"](e);o.sendData({tool:r.im,category:m(t.type),event:i.delete,type:f(t),c_section:d.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onChatDeletedNotification(e){const t=c.Core.getStore().getters["chats/get"](e);const a=m(t);o.sendData({tool:r.im,category:l.chatPopup,event:i.view,type:`deleted_${a}`,c_section:d.activeChat,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}}class F{onClickDelete({messageId:e,dialogId:t}){const s=c.Core.getStore().getters["messages/getById"](e);const n=new a.MessageComponentManager(s).getName();const p=c.Core.getStore().getters["chats/get"](t);o.sendData({tool:r.im,category:l.message,event:i.clickDelete,type:n,c_sub_section:h.contextMenu,p1:`chatType_${p.type}`,p5:`chatId_${p.chatId}`})}onCancel({messageId:e,dialogId:t}){const s=c.Core.getStore().getters["messages/getById"](e);const n=new a.MessageComponentManager(s).getName();const p=c.Core.getStore().getters["chats/get"](t);o.sendData({tool:r.im,category:l.message,event:i.cancelDelete,type:n,c_section:d.popup,c_sub_section:h.contextMenu,p1:`chatType_${p.type}`,p5:`chatId_${p.chatId}`})}onNotFoundNotification({dialogId:e}){const t=c.Core.getStore().getters["chats/get"](e);o.sendData({tool:r.im,category:l.chatPopup,event:i.view,type:p.deletedMessage,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onDeletedPostNotification({messageId:e,dialogId:t}){const a=c.Core.getStore().getters["chats/get"](t);const s=c.Core.getStore().getters["messages/comments/getByMessageId"](e);o.sendData({tool:r.im,category:l.chatPopup,event:i.view,type:p.deletedMessage,c_section:d.comments,p1:`chatType_${a.type}`,p4:`parentChatId_${a.chatId}`,p5:`chatId_${s.chatId}`})}}var H=babelHelpers.classPrivateFieldLooseKey("onBannerClick");var M=babelHelpers.classPrivateFieldLooseKey("getSidebarPanelNameForAnalytics");class x{constructor(){Object.defineProperty(this,M,{value:j});Object.defineProperty(this,H,{value:E})}onDialogLimitExceeded({dialogId:e,noMessages:t}){const a=t?d.chatStart:d.chatHistory;const s=c.Core.getStore().getters["chats/get"](e);const n=f(s);const h={tool:r.im,category:l.limitBanner,event:i.view,type:p.limitOfficeChatingHistory,c_section:a,p1:`chatType_${n}`};o.sendData(h)}onSidebarLimitExceeded({dialogId:e,panel:t}){const a=c.Core.getStore().getters["chats/get"](e);const s=f(a);const n={tool:r.im,category:l.limitBanner,event:i.view,type:p.limitOfficeChatingHistory,c_section:d.sidebar,c_element:babelHelpers.classPrivateFieldLooseBase(this,M)[M](t),p1:`chatType_${s}`};o.sendData(n)}onDialogBannerClick({dialogId:e}){const t=d.chatWindow;babelHelpers.classPrivateFieldLooseBase(this,H)[H]({dialogId:e,section:t})}onSidebarBannerClick({dialogId:e,panel:t}){const a=d.sidebar;const o=babelHelpers.classPrivateFieldLooseBase(this,M)[M](t);babelHelpers.classPrivateFieldLooseBase(this,H)[H]({dialogId:e,section:a,element:o})}onGoToContextLimitExceeded({dialogId:e}){const t=d.messageLink;babelHelpers.classPrivateFieldLooseBase(this,H)[H]({dialogId:e,section:t})}}function E({dialogId:e,section:t,element:a}){const s=c.Core.getStore().getters["chats/get"](e);const n=f(s);const d={tool:r.im,category:l.limitBanner,event:i.click,type:p.limitOfficeChatingHistory,c_section:t,p1:`chatType_${n}`};if(a){d.c_element=a}o.sendData(d)}function j(e){switch(e){case s.SidebarDetailBlock.main:return"main";case s.SidebarDetailBlock.file:case s.SidebarDetailBlock.fileUnsorted:case s.SidebarDetailBlock.audio:case s.SidebarDetailBlock.brief:case s.SidebarDetailBlock.document:case s.SidebarDetailBlock.media:case s.SidebarDetailBlock.other:return"docs";case s.SidebarDetailBlock.messageSearch:return"message_search";case s.SidebarDetailBlock.favorite:return"favs";case s.SidebarDetailBlock.link:return"links";case s.SidebarDetailBlock.task:return"task";case s.SidebarDetailBlock.meeting:return"event";default:return"unknown"}}var U=babelHelpers.classPrivateFieldLooseKey("onAddUserClick");class N{constructor(){Object.defineProperty(this,U,{value:X})}onChatSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,U)[U](e,d.chatSidebar)}onChatHeaderClick(e){babelHelpers.classPrivateFieldLooseBase(this,U)[U](e,d.chatHeader)}}function X(e,t){const a=c.Core.getStore().getters["chats/get"](e,true);const n={tool:r.im,category:m(a.type),event:i.clickAddUser,c_section:t,p2:C(),p5:`chatId_${a.chatId}`};if(a.type===s.ChatType.collab){n.p4=u(a.chatId)}o.sendData(n)}class A{onOpenForm(e){const t=c.Core.getStore().getters["chats/get"](e);const a={tool:r.im,category:m(t.type),event:i.clickEdit,c_section:d.sidebar,c_sub_section:h.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`};if(t.type===s.ChatType.collab){a.p4=u(t.chatId)}o.sendData(a)}onSubmitForm(e){const t=c.Core.getStore().getters["chats/get"](e);const a={tool:r.im,category:m(t.type),c_section:d.editor,event:i.submitEdit,p1:`chatType_${t.type}`,p2:C(),p5:`chatId_${t.chatId}`};if(t.type===s.ChatType.collab){a.p4=u(t.chatId)}o.sendData(a)}}class z{onStartClick(e){const t=c.Core.getStore().getters["application/getLayout"].name;o.sendData({tool:r.im,category:m(e),event:i.clickCreateNew,type:e,c_section:`${t}_tab`,p2:C()})}onCollabEmptyStateCreateClick(){o.sendData({tool:r.im,category:m(s.ChatType.collab),event:i.clickCreateNew,type:s.ChatType.collab,c_section:b.collabEmptyState,p2:C()})}}class K{onOpenPriceTable(e){o.sendData({tool:r.infoHelper,category:l.limit,event:i.openPrices,type:e,c_section:d.chat})}onOpenToolsSettings(e){o.sendData({tool:r.infoHelper,category:l.toolOff,event:i.openSettings,type:e,c_section:d.chat})}}class W{onOpenCheckInPopup(){o.sendData({event:i.popupOpen,tool:r.checkin,category:l.shift,c_section:d.chat})}}class G{onCreateChat(e){o.sendData({event:i.createNewChat,tool:r.ai,category:l.chatOperations,c_section:d.copilotTab,type:p.ai,p3:n.private,p5:`chatId_${e}`})}onOpenChat(e){const t=c.Core.getStore().getters["chats/get"](e);const a=t.userCounter<=2?n.private:n.multiuser;o.sendData({event:i.openChat,tool:r.ai,category:l.chatOperations,c_section:d.copilotTab,type:p.ai,p3:a,p5:`chatId_${t.chatId}`})}onOpenTab({isAvailable:e=true}={}){const t={event:i.openTab,tool:r.ai,category:l.chatOperations,c_section:d.copilotTab,status:e?y.success:y.errorTurnedOff};o.sendData(t)}onUseAudioInput(){o.sendData({event:i.audioUse,tool:r.ai,category:l.chatOperations,c_section:d.copilotTab})}}class J{onOpenUploadMenu(e){const t=c.Core.getStore().getters["chats/get"](e);const a=f(t);const n={tool:r.im,category:m(t.type),event:i.clickAttach,c_section:d.chatTextarea,p1:`chatType_${a}`,p2:C(),p5:`chatId_${t.chatId}`};if(t.type===s.ChatType.collab){n.p4=u(t.chatId)}o.sendData(n)}}var R=babelHelpers.classPrivateFieldLooseKey("excludedChats");var Y=babelHelpers.classPrivateFieldLooseKey("currentTab");var q=babelHelpers.classPrivateFieldLooseKey("instance");class Q{constructor(){Object.defineProperty(this,R,{writable:true,value:new Set});Object.defineProperty(this,Y,{writable:true,value:s.Layout.chat.name});this.chatCreate=new z;this.chatEdit=new A;this.chatDelete=new P;this.messageDelete=new F;this.historyLimit=new x;this.userAdd=new N;this.collabEntities=new w;this.chatEntities=new O;this.supervisor=new K;this.checkIn=new W;this.copilot=new G;this.attachMenu=new J;this.messageFiles=new T}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,q)[q]){babelHelpers.classPrivateFieldLooseBase(this,q)[q]=new this}return babelHelpers.classPrivateFieldLooseBase(this,q)[q]}ignoreNextChatOpen(e){babelHelpers.classPrivateFieldLooseBase(this,R)[R].add(e)}onOpenMessenger(){o.sendData({event:i.openMessenger,tool:r.im,category:l.messenger})}onOpenTab(e){const t=[s.Layout.chat.name,s.Layout.copilot.name,s.Layout.collab.name,s.Layout.channel.name,s.Layout.notification.name,s.Layout.settings.name,s.Layout.openlines.name];if(!t.includes(e)){return}if(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]===e){return}babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]=e;o.sendData({event:i.openTab,tool:r.im,category:l.messenger,type:e,p2:C()})}onOpenChat(e){if(babelHelpers.classPrivateFieldLooseBase(this,R)[R].has(e.dialogId)){babelHelpers.classPrivateFieldLooseBase(this,R)[R].delete(e.dialogId);return}const t=f(e);if(t===s.ChatType.copilot){this.copilot.onOpenChat(e.dialogId)}const a=c.Core.getStore().getters["application/getLayout"].name;const n=e.role===s.UserRole.guest?"N":"Y";const l={tool:r.im,category:m(t),event:i.openExisting,type:t,c_section:`${a}_tab`,p2:C(),p3:`isMember_${n}`,p5:`chatId_${e.chatId}`};if(t===s.ChatType.comment){const t=c.Core.getStore().getters["chats/getByChatId"](e.parentChatId);l.p1=`chatType_${t.type}`;l.p4=`parentChatId_${e.parentChatId}`}if(t===s.ChatType.collab){l.p4=u(e.chatId)}o.sendData(l)}}Object.defineProperty(Q,q,{writable:true,value:void 0});e.Analytics=Q;e.CreateChatContext=b;e.getCollabId=u;e.getUserType=C})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.UI.Analytics,BX.Messenger.v2.Const,BX.Messenger.v2.Application);
//# sourceMappingURL=analytics.bundle.map.js