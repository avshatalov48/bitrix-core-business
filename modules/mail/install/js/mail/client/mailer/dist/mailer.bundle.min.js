this.BX=this.BX||{};this.BX.Mail=this.BX.Mail||{};(function(e,t,r,i,a){"use strict";function l(e,t){var r=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=n(e))||t&&e&&typeof e.length==="number"){if(r)e=r;var i=0;var a=function e(){};return{s:a,n:function t(){if(i>=e.length)return{done:true};return{done:false,value:e[i++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l=true,s=false,o;return{s:function t(){r=r.call(e)},n:function e(){var t=r.next();l=t.done;return t},e:function e(t){s=true;o=t},f:function e(){try{if(!l&&r["return"]!=null)r["return"]()}finally{if(s)throw o}}}}function n(e,t){if(!e)return;if(typeof e==="string")return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor)r=e.constructor.name;if(r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}function s(e,t){if(t==null||t>e.length)t=e.length;for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function o(e,t,r){u(e,t);t.set(e,r)}function u(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var c=new WeakMap;var f=new WeakMap;var d=new WeakMap;var v=new WeakMap;var b=function(){function e(){var n=this;var s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{filterId:"",mailboxId:0,syncAvailable:true,configPath:""};babelHelpers.classCallCheck(this,e);o(this,c,{writable:true,value:void 0});o(this,f,{writable:true,value:void 0});o(this,d,{writable:true,value:void 0});o(this,v,{writable:true,value:void 0});babelHelpers.defineProperty(this,"focusReset",false);var u=top.document.getElementsByClassName("mail-loader-modifier");var b=l(u),p;try{for(b.s();!(p=b.n()).done;){var h=p.value;h.classList.remove("mail-loader-modifier")}}catch(e){b.e(e)}finally{b.f()}babelHelpers.classPrivateFieldSet(this,v,s["mailboxId"]);babelHelpers.classPrivateFieldSet(this,c,BX.Main.filterManager.getById(s["filterId"]));this.sendApplyFilterEventForMenuRefresh();if(document.activeElement){document.activeElement.blur()}var m=document.querySelector('[data-role="mail-counter-toolbar"]');var y=document.querySelector('[data-role="mail-error-box-wrapper"]');var B=new r.ErrorBox({wrapper:y,errorLink:s["configPath"],currentMailboxId:babelHelpers.classPrivateFieldGet(this,v)});var F=new t.FilterToolbar({wrapper:m,filter:babelHelpers.classPrivateFieldGet(this,c)});F.build();babelHelpers.classPrivateFieldSet(this,f,F);babelHelpers.classPrivateFieldSet(this,d,new i.Binding(babelHelpers.classPrivateFieldGet(this,v)));i.Binding.initButtons();a.EventEmitter.subscribe("Grid::updated",(function(e){var t=e.getCompatData(),r=babelHelpers.slicedToArray(t,1),a=r[0];if(a!=={}&&a!==undefined&&BX.Mail.Home.Grid.getId()===a.getId()){i.Binding.initButtons()}}));a.EventEmitter.subscribe("BX.Main.Filter:apply",(function(e){var t=babelHelpers.classPrivateFieldGet(n,c).getFilterFieldsValues()["DIR"];BX.Mail.Home.Counters.setDirectory(t)}));if(!s["syncAvailable"]){top.BX.UI.InfoHelper.show("limit_contact_center_mail_box_number");var w=false;var M=function e(){if(!w){w=true;top.BX.removeCustomEvent("SidePanel.Slider:onCloseComplete",e);top.BX.SidePanel.Instance.close()}};top.BX.addCustomEvent("SidePanel.Slider:onCloseComplete",M)}}babelHelpers.createClass(e,[{key:"sendApplyFilterEventForMenuRefresh",value:function e(){if(!!babelHelpers.classPrivateFieldGet(this,c)&&babelHelpers.classPrivateFieldGet(this,c)instanceof BX.Main.Filter){setTimeout((function(){a.EventEmitter.emit("BX.Main.Filter:apply",new a.BaseEvent)}),1)}}},{key:"setFilterDir",value:function e(t){if(!!babelHelpers.classPrivateFieldGet(this,c)&&babelHelpers.classPrivateFieldGet(this,c)instanceof BX.Main.Filter){var r=babelHelpers.classPrivateFieldGet(this,c).getApi();r.setFields({DIR:t});r.apply()}}},{key:"getFilterToolbar",value:function e(){return babelHelpers.classPrivateFieldGet(this,f)}}]);return e}();e.Mailer=b})(this.BX.Mail.Client=this.BX.Mail.Client||{},BX.Mail.Client,BX.Mail.Client,BX.Mail.Client,BX.Event);
//# sourceMappingURL=mailer.bundle.map.js