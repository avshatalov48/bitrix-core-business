{"version":3,"file":"check-in.bundle.js","sources":["../src/check-in.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport { UserStatisticsLink as CheckInQrAuthPopup } from 'stafftrack.user-statistics-link';\n\nimport { Analytics } from 'im.v2.lib.analytics';\nimport { BaseMessage } from 'im.v2.component.message.base';\nimport { DefaultMessageContent } from 'im.v2.component.message.elements';\nimport { DefaultMessage } from 'im.v2.component.message.default';\n\nimport './css/check-in.css';\n\nimport type { ImModelMessage } from 'im.v2.model';\n\nconst paramsKey = Object.freeze({\n\turl: 'url',\n\tstatus: 'status',\n\tlocation: 'location',\n});\n\n// @vue/component\nexport const CheckInMessage = {\n\tname: 'CheckInMessage',\n\tcomponents: { BaseMessage, DefaultMessage, DefaultMessageContent },\n\tprops: {\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tmessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\tcomponentParams(): $Values<typeof paramsKey>\n\t\t{\n\t\t\treturn this.message.componentParams;\n\t\t},\n\t\tmapUrl(): string\n\t\t{\n\t\t\tconst origin = window.location.origin;\n\t\t\tconst url = this.componentParams[paramsKey.url];\n\n\t\t\treturn url.startsWith('/') ? origin + url : url;\n\t\t},\n\t\tstatus(): ?string\n\t\t{\n\t\t\treturn this.componentParams[paramsKey.status] ?? '';\n\t\t},\n\t\tlocation(): ?string\n\t\t{\n\t\t\treturn this.componentParams[paramsKey.location] ?? '';\n\t\t},\n\t\thasLocation(): boolean\n\t\t{\n\t\t\treturn Boolean(this.location);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tonClick()\n\t\t{\n\t\t\tthis.showQrPopup();\n\t\t\tAnalytics.getInstance().onOpenCheckInPopup();\n\t\t},\n\t\tshowQrPopup()\n\t\t{\n\t\t\tif (!CheckInQrAuthPopup)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tnew CheckInQrAuthPopup({ intent: 'check-in' }).show();\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseMessage\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:item=\"item\"\n\t\t>\n\t\t\t<div class=\"bx-im-message-check-in__container\">\n\t\t\t\t<div class=\"bx-im-message-check-in__image-container\">\n\t\t\t\t\t<img class=\"bx-im-message-check-in__image\" :src=\"mapUrl\" alt=\"map\" />\n\t\t\t\t\t<div v-if=\"hasLocation\" class=\"bx-im-message-check-in__marker\" />\n\t\t\t\t\t<div v-else class=\"bx-im-message-check-in__status\">\n\t\t\t\t\t\t{{ status }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"hasLocation\" :title=\"location\" class=\"bx-im-message-check-in__location\">\n\t\t\t\t\t{{ location }}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"bx-im-message-check-in__action\" \n\t\t\t\t\t@click=\"onClick\"\n\t\t\t\t\t:title=\"loc('IM_MESSAGE_CHECK_IN_ACTION_TEXT')\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"bx-im-message-check-in__action-icon\"></div>\n\t\t\t\t\t<span>{{ loc('IM_MESSAGE_CHECK_IN_ACTION_TEXT') }}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-message-check-in__bottom-panel\">\n\t\t\t\t\t<DefaultMessageContent :item=\"item\" :dialogId=\"dialogId\" :withText=\"false\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</BaseMessage>\n\t`,\n};\n"],"names":["paramsKey","Object","freeze","url","status","location","CheckInMessage","name","components","BaseMessage","DefaultMessage","DefaultMessageContent","props","item","type","required","dialogId","String","computed","message","componentParams","mapUrl","origin","window","startsWith","hasLocation","Boolean","methods","loc","phraseCode","replacements","Loc","getMessage","onClick","showQrPopup","Analytics","getInstance","onOpenCheckInPopup","CheckInQrAuthPopup","intent","show","template"],"mappings":";;;;;;;;CAYA,MAAMA,SAAS,GAAGC,MAAM,CAACC,MAAM,CAAC;GAC/BC,GAAG,EAAE,KAAK;GACVC,MAAM,EAAE,QAAQ;GAChBC,QAAQ,EAAE;CACX,CAAC,CAAC;;CAEF;AACA,OAAaC,cAAc,GAAG;GAC7BC,IAAI,EAAE,gBAAgB;GACtBC,UAAU,EAAE;kBAAEC,wCAAW;qBAAEC,8CAAc;4BAAEC;IAAuB;GAClEC,KAAK,EAAE;KACNC,IAAI,EAAE;OACLC,IAAI,EAAEb,MAAM;OACZc,QAAQ,EAAE;MACV;KACDC,QAAQ,EAAE;OACTF,IAAI,EAAEG,MAAM;OACZF,QAAQ,EAAE;;IAEX;GACDG,QAAQ,EACR;KACCC,OAAO,GACP;OACC,OAAO,IAAI,CAACN,IAAI;MAChB;KACDO,eAAe,GACf;OACC,OAAO,IAAI,CAACD,OAAO,CAACC,eAAe;MACnC;KACDC,MAAM,GACN;OACC,MAAMC,MAAM,GAAGC,MAAM,CAAClB,QAAQ,CAACiB,MAAM;OACrC,MAAMnB,GAAG,GAAG,IAAI,CAACiB,eAAe,CAACpB,SAAS,CAACG,GAAG,CAAC;OAE/C,OAAOA,GAAG,CAACqB,UAAU,CAAC,GAAG,CAAC,GAAGF,MAAM,GAAGnB,GAAG,GAAGA,GAAG;MAC/C;KACDC,MAAM,GACN;OAAA;OACC,gCAAO,IAAI,CAACgB,eAAe,CAACpB,SAAS,CAACI,MAAM,CAAC,oCAAI,EAAE;MACnD;KACDC,QAAQ,GACR;OAAA;OACC,iCAAO,IAAI,CAACe,eAAe,CAACpB,SAAS,CAACK,QAAQ,CAAC,qCAAI,EAAE;MACrD;KACDoB,WAAW,GACX;OACC,OAAOC,OAAO,CAAC,IAAI,CAACrB,QAAQ,CAAC;;IAE9B;GACDsB,OAAO,EACP;KACCC,GAAG,CAACC,UAAkB,EAAEC,YAAmC,GAAG,EAAE,EAChE;OACC,OAAOC,aAAG,CAACC,UAAU,CAACH,UAAU,EAAEC,YAAY,CAAC;MAC/C;KACDG,OAAO,GACP;OACC,IAAI,CAACC,WAAW,EAAE;OAClBC,6BAAS,CAACC,WAAW,EAAE,CAACC,kBAAkB,EAAE;MAC5C;KACDH,WAAW,GACX;OACC,IAAI,CAACI,gDAAkB,EACvB;SACC;;OAGD,IAAIA,gDAAkB,CAAC;SAAEC,MAAM,EAAE;QAAY,CAAC,CAACC,IAAI,EAAE;;IAEtD;GACDC,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA8BZ,CAAC;;;;;;;;"}