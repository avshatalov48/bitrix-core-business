this.BX=this.BX||{};this.BX.Socialnetwork=this.BX.Socialnetwork||{};(function(e,t,s,i,o,n){"use strict";var a=function(){babelHelpers.createClass(e,null,[{key:"getInstance",value:function t(){if(n.Type.isNull(e.instance)){e.instance=new e}return e.instance}}]);function e(){babelHelpers.classCallCheck(this,e);this.waitTimeout=null;this.waitPopup=null}babelHelpers.createClass(e,[{key:"show",value:function e(t){var s=this;if(t!==0){return this.waitTimeout=setTimeout((function(){s.show(0)}),50)}if(!this.waitPopup){this.waitPopup=new BX.PopupWindow("sonet_common_wait_popup",window,{autoHide:true,lightShadow:true,zIndex:2,content:BX.create("DIV",{props:{className:"sonet-wait-cont"},children:[BX.create("DIV",{props:{className:"sonet-wait-icon"}}),BX.create("DIV",{props:{className:"sonet-wait-text"},html:BX.message("SONET_EXT_COMMON_WAIT")})]})})}else{this.waitPopup.setBindElement(window)}this.waitPopup.show()}},{key:"hide",value:function e(){if(this.waitTimeout){clearTimeout(this.waitTimeout);this.waitTimeout=null}if(this.waitPopup){this.waitPopup.close()}}}]);return e}();babelHelpers.defineProperty(a,"instance",null);var r=function(){function e(){babelHelpers.classCallCheck(this,e);this.menuPopup=null;this.menuItem=null;this.favoritesValue=null}babelHelpers.createClass(e,[{key:"setItemTitle",value:function e(t){if(!n.Type.isDomNode(this.menuItem)){return}this.menuItem.innerHTML=t?n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FAVORITES_REMOVE"):n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FAVORITES_ADD")}}],[{key:"getInstance",value:function t(){var s=this;if(n.Type.isNull(this.instance)){this.instance=new e;BX.addCustomEvent("SidePanel.Slider:onClose",(function(){if(s.instance.menuPopup){s.instance.menuPopup.close()}}));BX.addCustomEvent("BX.Socialnetwork.WorkgroupMenuIcon:onSetFavorites",(function(e){s.getInstance().setItemTitle(e.value)}))}return this.instance}}]);return e}();babelHelpers.defineProperty(r,"instance",null);var c=function(){function e(t){babelHelpers.classCallCheck(this,e);this.successPopup=null;this.groupId=!n.Type.isUndefined(t.GROUP_ID)?Number(t.GROUP_ID):0;this.relationId=!n.Type.isUndefined(t.RELATION_ID)?Number(t.RELATION_ID):0;this.urls={rejectOutgoingRequest:n.Type.isStringFilled(t.URL_REJECT_OUTGOING_REQUEST)?t.URL_REJECT_OUTGOING_REQUEST:"",groupsList:n.Type.isStringFilled(t.URL_GROUPS_LIST)?t.URL_GROUPS_LIST:""};this.project=n.Type.isBoolean(t.PROJECT)?t.PROJECT:false;this.scrum=n.Type.isBoolean(t.SCRUM)?t.SCRUM:false}babelHelpers.createClass(e,[{key:"showPopup",value:function e(){var t=this;if(this.relationId<=0||!n.Type.isStringFilled(this.urls.rejectOutgoingRequest)){return}var o=n.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_TITLE2");var a=n.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_TEXT2");if(this.scrum){o=n.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_TITLE2_SCRUM");a=n.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_TEXT2_SCRUM")}else if(this.project){o=n.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_TITLE2_PROJECT");a=n.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_TEXT2_PROJECT")}this.successPopup=new s.Popup("bx-group-join-successfull-request-popup",window,{width:420,autoHide:false,lightShadow:false,zIndex:1e3,overlay:true,cachable:false,content:n.Dom.create("DIV",{children:[n.Dom.create("DIV",{text:o,props:{className:"sonet-group-join-successfull-request-popup-title"}}),n.Dom.create("DIV",{text:a,props:{className:"sonet-group-join-successfull-request-popup-text"}})]}),buttons:[new i.Button({size:i.Button.Size.MEDIUM,text:n.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_CLOSE_BUTTON"),events:{click:function e(s){t.onClose(s.getContainer())}}}),new i.Button({size:i.Button.Size.MEDIUM,color:i.Button.Color.LINK,text:n.Loc.getMessage("SONET_EXT_COMMON_RECALL_JOIN_POPUP_CANCEL_BUTTON"),events:{click:function e(s){t.onCancelRequest(s.getContainer())}}})],closeByEsc:false,closeIcon:false});this.successPopup.show()}},{key:"onClose",value:function t(s){var i=this;if(this.groupId<=0||!n.Type.isDomNode(s)){return}e.showButtonWait(s);n.ajax.runAction("socialnetwork.api.usertogroup.setHideRequestPopup",{data:{groupId:this.groupId}}).then((function(t){e.hideButtonWait(s);i.successPopup.close()}),(function(){e.hideButtonWait(s)}))}},{key:"onCancelRequest",value:function t(s){var i=this;if(this.groupId<=0||!n.Type.isDomNode(s)){return}var o=document.getElementById("bx-group-delete-request-error");e.hideError(o);e.showButtonWait(s);n.ajax.runAction("socialnetwork.api.usertogroup.cancelIncomingRequest",{data:{groupId:this.groupId,userId:parseInt(n.Loc.getMessage("USER_ID"))}}).then((function(t){e.hideButtonWait(s);i.successPopup.destroy();if(n.Type.isStringFilled(i.urls.groupsList)){top.location.href=i.urls.groupsList}i.reload()}))["catch"]((function(t){e.showError(n.Loc.getMessage("SONET_EXT_COMMON_AJAX_ERROR"),o);e.hideButtonWait(s)}))}}],[{key:"showButtonWait",value:function e(t){if(n.Type.isStringFilled(t)){t=document.getElementById(t)}if(!n.Type.isDomNode(t)){return}t.classList.add("ui-btn-clock");t.disabled=true;t.style.cursor="auto"}},{key:"hideButtonWait",value:function e(t){if(n.Type.isStringFilled(t)){t=document.getElementById(t)}if(!n.Type.isDomNode(t)){return}t.classList.remove("ui-btn-clock");t.disabled=false;t.style.cursor="cursor"}},{key:"showError",value:function e(t,s){if(n.Type.isStringFilled(s)){s=document.getElementById(s)}if(!n.Type.isDomNode(s)){return}s.innerHTML=t;s.classList.remove("sonet-ui-form-error-block-invisible")}},{key:"hideError",value:function e(t){if(n.Type.isStringFilled(t)){t=document.getElementById(t)}if(!n.Type.isDomNode(t)){return}t.classList.add("sonet-ui-form-error-block-invisible")}}]);return e}();var l=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"showGroupMenuPopup",value:function e(t){var i=this;var o=t.bindElement;if(n.Type.isStringFilled(o)){o=document.getElementById(o)}var a=parseInt(n.Loc.getMessage("USER_ID"));var c=r.getInstance();if(o.tagName==="BUTTON"){o.classList.add("ui-btn-active")}var l=[];var u="";if(a>0){l.push({text:!!c.favoritesValue?n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FAVORITES_REMOVE"):n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FAVORITES_ADD"),title:!!c.favoritesValue?n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FAVORITES_REMOVE"):n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FAVORITES_ADD"),id:"set-group-favorite",onclick:function e(){var s=c.favoritesValue;c.setItemTitle(!s);c.favoritesValue=!s;i.setFavoritesAjax({groupId:t.groupId,favoritesValue:s,callback:{success:function e(i){BX.onCustomEvent(window,"BX.Socialnetwork.WorkgroupFavorites:onSet",[{id:t.groupId,name:i.NAME,url:i.URL,extranet:!n.Type.isUndefined(i.EXTRANET)?i.EXTRANET:"N"},!s]);BX.onCustomEvent(window,"BX.Socialnetwork.WorkgroupMenu:onSetFavorites",[{groupId:t.groupId,value:!s}]);window.top.BX.SidePanel.Instance.postMessageAll(window,"sonetGroupEvent",{code:"afterSetFavorites",data:{groupId:i.ID,value:i.RESULT==="Y"}})},failure:function e(){c.favoritesValue=s;c.setItemTitle(s)}}})}});if(t.perms.canInitiate){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQU");if(!!t.isScrumProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQU_SCRUM")}else if(!!t.isProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQU_PROJECT")}l.push({text:u,title:u,href:t.urls.requestUser})}if(t.perms.canModify){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_EDIT");if(!!t.isScrumProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_EDIT_SCRUM")}else if(!!t.isProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_EDIT_PROJECT")}l.push({text:u,title:u,href:t.urls.edit});if(!t.hideArchiveLinks){var _={text:n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FEAT"),title:n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_FEAT")};if(t.editFeaturesAllowed){_.href=t.urls.features}else{_.className="menu-popup-item menu-popup-no-icon sonet-common-tariff-lock";_.onclick=function(){n.Runtime.loadExtension("socialnetwork.limit").then((function(e){var t=e.Limit;t.showInstance({featureId:"socialnetwork_projects_access_permissions"})}))}}l.push(_)}u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_DELETE");if(!!t.isScrumProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_DELETE_SCRUM")}else if(!!t.isProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_DELETE_PROJECT")}l.push({text:u,title:u,href:t.urls["delete"]})}l.push({text:t.perms.canModerate?n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_MEMBERS_EDIT"):n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_MEMBERS_VIEW"),title:t.perms.canModerate?n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_MEMBERS_EDIT"):n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_MEMBERS_VIEW"),href:t.urls.members});if(t.perms.canInitiate){if(t.perms.canProcessRequestsIn){l.push({text:n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQ_IN"),title:n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQ_IN"),href:t.urls.requests})}u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQ_OUT");if(!!t.isScrumProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQ_OUT_SCRUM")}else if(!!t.isProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_REQ_OUT_PROJECT")}l.push({text:u,title:u,href:t.urls.requestsOut})}if(t.perms.canCreate){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_COPY");if(!!t.isScrumProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_COPY_SCRUM")}else if(!!t.isProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_COPY_PROJECT")}var d={text:u,title:u};if(t.copyFeatureAllowed){d.href=t.urls.copy}else{d.className="menu-popup-item menu-popup-no-icon sonet-common-tariff-lock";d.onclick=function(){n.Runtime.loadExtension("socialnetwork.limit").then((function(e){var t=e.Limit;t.showInstance({featureId:"socialnetwork_copy_project",limitAnalyticsLabels:{module:"socialnetwork",source:"projectCardActions"}})}))}}if(!t.isScrumProject){l.push(d)}}if((!n.Type.isStringFilled(t.userRole)||t.userRole===n.Loc.getMessage("USER_TO_GROUP_ROLE_REQUEST")&&t.initiatedByType===n.Loc.getMessage("USER_TO_GROUP_INITIATED_BY_GROUP"))&&!t.hideArchiveLinks){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_JOIN");if(!!t.isScrumProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_JOIN_SCRUM")}else if(!!t.isProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_JOIN_PROJECT")}var p={text:u,title:u};if(!!t.isOpened){p.onclick=function(){i.sendJoinRequest(t)}}else{p.href=t.urls.userRequestGroup}l.push(p)}if(n.Type.isStringFilled(t.userRole)&&t.userRole===n.Loc.getMessage("USER_TO_GROUP_ROLE_REQUEST")&&t.initiatedByType===n.Loc.getMessage("USER_TO_GROUP_INITIATED_BY_USER")&&parseInt(t.initiatedByUserId)===a){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_DELETE_REQUEST");l.push({text:u,title:u,onclick:function e(){i.cancelIncomingRequest(t)}})}if(n.Type.isBoolean(t.perms.canLeave)&&t.perms.canLeave||!n.Type.isBoolean(t.perms.canLeave)&&t.userIsMember&&!t.userIsAutoMember&&t.userRole!==n.Loc.getMessage("USER_TO_GROUP_ROLE_OWNER")){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_EXIT");if(!!t.isScrumProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_EXIT_SCRUM")}else if(!!t.isProject){u=n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_EXIT_PROJECT")}l.push({text:u,title:u,href:t.urls.userLeaveGroup})}if(t.canPickTheme){l.push({text:n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_THEME_DIALOG"),title:n.Loc.getMessage("SONET_EXT_COMMON_GROUP_MENU_THEME_DIALOG"),onclick:function e(){BX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(false)}})}}var E=s.MenuManager.create("group-profile-menu",o,l,{offsetTop:5,offsetLeft:o.offsetWidth-18,angle:true,events:{onPopupClose:function e(){if(o.tagName==="BUTTON"){o.classList.remove("ui-btn-active")}}}});var O=E.getMenuItem("set-group-favorite");if(O){c.menuItem=O.layout.text}E.popupWindow.show();c.menuPopup=E}},{key:"sendJoinRequest",value:function e(t){a.getInstance().show();if(r.getInstance()&&r.getInstance().menuPopup){r.getInstance().menuPopup.close()}n.ajax({url:t.urls.userRequestGroup,method:"POST",dataType:"json",data:{groupID:t.groupId,MESSAGE:"",ajax_request:"Y",save:"Y",sessid:n.Loc.getMessage("bitrix_sessid")},onsuccess:function e(s){a.getInstance().hide();if(n.Type.isStringFilled(s.MESSAGE)&&s.MESSAGE==="SUCCESS"&&n.Type.isStringFilled(s.URL)){BX.onCustomEvent(window.top,"sonetGroupEvent",[{code:"afterJoinRequestSend",data:{groupId:t.groupId}}]);top.location.href=s.URL}},onfailure:function e(){a.getInstance().hide()}})}},{key:"cancelIncomingRequest",value:function e(t){var s=this;a.getInstance().show();if(r.getInstance()&&r.getInstance().menuPopup){r.getInstance().menuPopup.close()}n.ajax.runAction("socialnetwork.api.usertogroup.cancelIncomingRequest",{data:{groupId:t.groupId,userId:parseInt(n.Loc.getMessage("USER_ID"))}}).then((function(e){a.getInstance().hide();window.top.BX.SidePanel.Instance.postMessageAll(window,"sonetGroupEvent",{code:"afterIncomingRequestCancel",data:{groupId:t.groupId}});s.reload()}))["catch"]((function(e){a.getInstance().hide()}))}},{key:"setFavoritesAjax",value:function e(t){n.ajax.runAction("socialnetwork.api.workgroup.setFavorites",{data:{params:{groupId:t.groupId,value:t.favoritesValue===false?"Y":"N",getAdditionalResultData:true}},analyticsLabel:{b24statAction:t.favoritesValue?"removeFavSonetGroup":"addFavSonetGroup"}}).then((function(e){t.callback.success(e.data)}))["catch"]((function(e){t.callback.failure({ERROR:e.errors[0].message})}))}},{key:"reload",value:function e(){if(top!==window){if(!n.Type.isUndefined(top.BX.SidePanel)){top.BX.SidePanel.Instance.getSliderByWindow(window).showLoader()}window.location.reload()}else if(!n.Type.isUndefined(top.BX.SidePanel)&&top.BX.SidePanel.Instance.isOpen()){top.location.href=top.BX.SidePanel.Instance.getPageUrl()}else{top.location.reload()}}},{key:"reloadBlock",value:function e(t){if(!n.Type.isPlainObject(t)||!n.Type.isStringFilled(t.blockId)||!document.getElementById(t.blockId)){return}var s="";if(!n.Type.isUndefined(top.BX.SidePanel)&&top.BX.SidePanel.Instance.isOpen()){s=top.BX.SidePanel.Instance.getPageUrl()}else{s=window.location.href}n.ajax.promise({url:s,method:"POST",dataType:"json",data:{BLOCK_RELOAD:"Y",BLOCK_ID:t.blockId}}).then((function(e){if(!n.Type.isUndefined(e.CONTENT)){document.getElementById(t.blockId).innerHTML=e.CONTENT;setTimeout((function(){n.ajax.processRequestData(e.CONTENT,{dataType:"HTML"})}),0)}}))}},{key:"closeGroupCardMenu",value:function e(t){if(!t){return}var s=t.ownerDocument;var i=s.defaultView||s.parentWindow;if(!i||n.Type.isUndefined(i.BX.Socialnetwork.UIGroupMenu)||!i.BX.Socialnetwork.UIGroupMenu.getInstance().menuPopup){return}i.BX.Socialnetwork.UIGroupMenu.getInstance().menuPopup.close()}},{key:"openMessenger",value:function e(s){return n.ajax.runAction("socialnetwork.api.workgroup.getChatId",{data:{groupId:parseInt(s,10)}}).then((function(e){if(e.data){t.Messenger.openChat("chat".concat(parseInt(e.data,10)))}}))["catch"]((function(){}))}}]);return e}();babelHelpers.defineProperty(l,"showError",c.showError);babelHelpers.defineProperty(l,"hideError",c.hideError);babelHelpers.defineProperty(l,"showButtonWait",c.showButtonWait);babelHelpers.defineProperty(l,"hideButtonWait",c.hideButtonWait);var u=function(){function e(){babelHelpers.classCallCheck(this,e);this.widget=null}babelHelpers.createClass(e,[{key:"show",value:function e(t){if(this.widget){if(this.widget.isShown()){this.widget.close();return}}var s=this.getData({targetNode:t});if(n.Type.isNull(s)){return}this.widget=this.getWidget({targetNode:t,data:s});if(this.widget){this.widget.show()}}},{key:"hide",value:function e(){if(this.widget&&this.widget.isShown()){this.widget.close()}}},{key:"getData",value:function e(t){return{}}},{key:"getWidget",value:function e(t){return null}}]);return e}();var _,d,p;var E=function(e){babelHelpers.inherits(t,e);function t(e){var s;babelHelpers.classCallCheck(this,t);s=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));s.groupId=!n.Type.isUndefined(e.groupId)?parseInt(e.groupId):0;s.avatarPath=n.Type.isStringFilled(e.avatarPath)?e.avatarPath:"";s.avatarType=n.Type.isStringFilled(e.avatarType)?e.avatarType:"";s.projectTypeCode=n.Type.isStringFilled(e.projectTypeCode)?e.projectTypeCode:"";s.urls=n.Type.isPlainObject(e.urls)?e.urls:{};s.perms=n.Type.isPlainObject(e.perms)?e.perms:{};s.editRolesAllowed=n.Type.isBoolean(e.editRolesAllowed)?e.editRolesAllowed:false;return s}babelHelpers.createClass(t,[{key:"getData",value:function e(t){var s=null;var i=t.targetNode;if(!n.Type.isDomNode(i)){return s}s=i.getAttribute("data-workgroup");try{s=JSON.parse(s)}catch(e){s=null}return s}},{key:"getWidget",value:function e(t){var s=n.Type.isDomNode(t.targetNode)?t.targetNode:null;if(!s){return null}var i=n.Type.isPlainObject(t.data)?t.data:{};return new o.PopupComponentsMaker({target:s,content:[{html:[{html:this.renderAbout(i)}]},{html:[{html:this.renderMembers(i)},{html:this.renderRoles(i)}]}]})}},{key:"renderAbout",value:function e(){var t=this;var s="<i></i>";if(n.Type.isStringFilled(this.avatarPath)){s="<i style=\"background: #fff url('".concat(encodeURI(this.avatarPath),"') no-repeat; background-size: cover;\"></i>")}var i="";var o="";switch(this.projectTypeCode.toLowerCase()){case"project":i=n.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_TITLE_PROJECT");o=n.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_DESCRIPTION_PROJECT");break;case"scrum":i=n.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_TITLE_SCRUM");o=n.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_DESCRIPTION_SCRUM");break;default:i=n.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_TITLE_GROUP");o=n.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ABOUT_DESCRIPTION_GROUP")}var a=["sonet-common-widget-avatar"];if(!n.Type.isStringFilled(this.avatarPath)&&n.Type.isStringFilled(this.avatarType)){a.push("sonet-common-workgroup-avatar");a.push("--".concat(this.avatarType))}else{a.push("ui-icon");a.push("ui-icon-common-user-group")}var r=n.Tag.render(_||(_=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sonet-common-widget-item">\n\t\t\t\t<div class="sonet-common-widget-item-container">\n\t\t\t\t\t<div class="','">','</div>\n\t\t\t\t\t<div class="sonet-common-widget-item-content">\n\t\t\t\t\t\t<div class="sonet-common-widget-item-title">','</div>\n\t\t\t\t\t\t<div class="sonet-common-widget-item-description">',"</div>\t\t\t\t\t\t\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),a.join(" "),s,i,o);n.Event.bind(r,"click",(function(){if(!n.Type.isStringFilled(t.urls.card)){return}BX.SidePanel.Instance.open(t.urls.card,{width:900,loader:"socialnetwork:group-card"});t.hide()}));return r}},{key:"renderMembers",value:function e(){var t=this;var s=n.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sonet-common-widget-item">\n\t\t\t\t<div class="sonet-common-widget-item-container">\n\t\t\t\t\t<div class="sonet-common-widget-icon ui-icon ui-icon-common-light-company"><i></i></div>\n\t\t\t\t\t<div class="sonet-common-widget-item-content">\n\t\t\t\t\t\t<div class="sonet-common-widget-item-title">',"</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),n.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_MEMBERS_TITLE"));n.Event.bind(s,"click",(function(){if(!n.Type.isStringFilled(t.urls.members)){return}BX.SidePanel.Instance.open(t.urls.members,{width:1200,loader:"group-users-loader"});t.hide()}));return s}},{key:"renderRoles",value:function e(){var t=this;var s=n.Type.isBoolean(this.perms.canModify)&&this.perms.canModify;var i=!s?'data-hint="'.concat(n.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ROLES_TITLE_NO_PERMISSIONS"),'" data-hint-no-icon'):"";var o=this.editRolesAllowed?"sonet-common-widget-item-content":"sonet-common-widget-item-content-lock";var a=this.editRolesAllowed?"--hidden":"";var r=n.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sonet-common-widget-item" ','>\n\t\t\t\t<div class="sonet-common-widget-item-container">\n\t\t\t\t\t<div class="sonet-common-widget-icon ui-icon ui-icon-service-light-roles-rights"><i></i></div>\n\t\t\t\t\t<div class="','">\n\t\t\t\t\t\t<div class="sonet-common-widget-item-title">\n\t\t\t\t\t\t\t','\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class="sonet-common-widget-item-tariff-lock ','"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t'])),i,o,n.Loc.getMessage("SONET_EXT_COMMON_WORKGROUP_WIDGET_ROLES_TITLE"),a);n.Event.bind(r,"click",(function(){if(!s||!n.Type.isStringFilled(t.urls.features)){return}if(t.editRolesAllowed){BX.SidePanel.Instance.open(t.urls.features,{width:800,loader:"group-features-loader"})}else{n.Runtime.loadExtension("socialnetwork.limit").then((function(e){var t=e.Limit;t.showInstance({featureId:"socialnetwork_projects_access_permissions",limitAnalyticsLabels:{module:"socialnetwork",source:"projectWidget"}})}))}t.hide()}));return r}}]);return t}(u);BX.SocialnetworkUICommon=l;BX.SocialnetworkUICommon.Waiter=a;BX.SocialnetworkUICommon.SonetGroupMenu=r;BX.Socialnetwork.UIWorkgroupWidget=E;e.Common=l;e.Waiter=a;e.SonetGroupMenu=r;e.WorkgroupWidget=E;e.RecallJoinRequest=c})(this.BX.Socialnetwork.UI=this.BX.Socialnetwork.UI||{},BX.Messenger.v2.Lib,BX.Main,BX.UI,BX.UI,BX);
//# sourceMappingURL=common.bundle.map.js