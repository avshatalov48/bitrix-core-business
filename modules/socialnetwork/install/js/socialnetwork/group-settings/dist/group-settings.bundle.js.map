{"version":3,"file":"group-settings.bundle.js","sources":["../src/pull-requests.js","../src/layout/edit-description.js","../src/layout/edit-privacy.js","../src/layout/edit-title.js","../src/layout/edit-avatar.js","../src/layout/actions-button.js","../src/layout/members-section.js","../src/theme-slider-adjuster.js","../src/layout/space/feature.js","../src/layout/space/tools.js","../src/layout/space/tags.js","../src/space-settings.js","../src/group-settings.js"],"sourcesContent":["import { EventEmitter } from 'main.core.events';\n\nexport class PullRequests extends EventEmitter\n{\n\t#groupId: number;\n\n\tconstructor(groupId)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Group.Settings.PullRequests');\n\n\t\tthis.#groupId = parseInt(groupId, 10);\n\t}\n\n\tgetModuleId(): string\n\t{\n\t\treturn 'socialnetwork';\n\t}\n\n\tgetMap(): Object\n\t{\n\t\treturn {\n\t\t\tworkgroup_update: this.#update.bind(this),\n\t\t\tworkgroup_user_add: this.#update.bind(this),\n\t\t\tworkgroup_user_delete: this.#update.bind(this),\n\t\t\tworkgroup_user_update: this.#update.bind(this),\n\t\t};\n\t}\n\n\t#update(data): void\n\t{\n\t\tif (parseInt(data.params.GROUP_ID, 10) === this.#groupId)\n\t\t{\n\t\t\tthis.emit('update');\n\t\t}\n\t}\n}\n","import { Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport 'ui.icon-set.actions';\n\ntype Params = {\n\tdescription: string,\n\tcanEdit: boolean,\n\tonChange: void,\n};\n\nexport class EditDescription\n{\n\t#params: Params;\n\t#layout: {\n\t\tdescriptionContainer: HTMLElement,\n\t\tdescriptionText: HTMLElement,\n\t\tdescriptionEditButton: HTMLElement,\n\t\tdescriptionTextarea: HTMLTextAreaElement,\n\t};\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#params = params;\n\t\tthis.#layout = {};\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#layout.descriptionContainer = Tag.render`\n\t\t\t<div class=\"sn-group-settings__description-container\">\n\t\t\t\t<div class=\"sn-group-settings__description\">\n\t\t\t\t\t${this.#renderDescriptionEditText()}\n\t\t\t\t</div>\n\t\t\t\t${this.#renderDescriptionTextarea()}\n\t\t\t<div>\n\t\t`;\n\n\t\treturn this.#layout.descriptionContainer;\n\t}\n\n\t#renderDescriptionEditText(): HTMLElement\n\t{\n\t\tthis.#layout.descriptionText = Tag.render`\n\t\t\t<div>\n\t\t\t\t${this.#getDescriptionText()}\n\t\t\t\t${this.#renderDescriptionEditButton()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#layout.descriptionText;\n\t}\n\n\t#renderDescriptionEditButton(): HTMLElement|string\n\t{\n\t\tif (this.#params.canEdit !== true)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tthis.#layout.descriptionEditButton = Tag.render`\n\t\t\t<div class=\"ui-icon-set --pencil-40\"></div>\n\t\t`;\n\n\t\tEvent.bind(this.#layout.descriptionEditButton, 'click', () => this.#startEditing());\n\n\t\treturn this.#layout.descriptionEditButton;\n\t}\n\n\t#renderDescriptionTextarea(): HTMLElement\n\t{\n\t\tthis.#layout.descriptionTextarea = Tag.render`\n\t\t\t<textarea\n\t\t\t\tclass=\"sn-group-settings__description-textarea\"\n\t\t\t\tmaxlength=\"20000\"\n\t\t\t\trows=\"1\"\n\t\t\t>${Text.encode(this.#params.description)}</textarea>\n\t\t`;\n\n\t\tEvent.bind(this.#layout.descriptionTextarea, 'focus', () => this.#adjustTextareaHeight());\n\n\t\tEvent.bind(this.#layout.descriptionTextarea, 'blur', () => this.#stopEditing());\n\n\t\tEvent.bind(this.#layout.descriptionTextarea, 'keydown', (event: KeyboardEvent) => {\n\t\t\tif (event.key === 'Enter')\n\t\t\t{\n\t\t\t\tthis.#stopEditing();\n\t\t\t}\n\t\t});\n\n\t\tEvent.bind(this.#layout.descriptionTextarea, 'input', () => this.#adjustTextareaHeight());\n\n\t\treturn this.#layout.descriptionTextarea;\n\t}\n\n\t#startEditing()\n\t{\n\t\tDom.addClass(this.#layout.descriptionContainer, '--editing');\n\t\tthis.#layout.descriptionTextarea.focus();\n\t\tthis.#layout.descriptionTextarea.setSelectionRange(20000, 20000);\n\t}\n\n\t#stopEditing()\n\t{\n\t\tDom.removeClass(this.#layout.descriptionContainer, '--editing');\n\t\tthis.#layout.descriptionTextarea.value = this.#layout.descriptionTextarea.value.trim();\n\t\tif (this.#params.description !== this.#layout.descriptionTextarea.value)\n\t\t{\n\t\t\tthis.#params.description = this.#layout.descriptionTextarea.value;\n\t\t\tthis.#layout.descriptionText.innerHTML = this.#getDescriptionText();\n\t\t\tthis.#layout.descriptionText.append(this.#layout.descriptionEditButton);\n\t\t\tthis.#params.onChange(this.#params.description);\n\t\t}\n\t}\n\n\t#getDescriptionText()\n\t{\n\t\tif (Type.isStringFilled(this.#params.description?.trim()))\n\t\t{\n\t\t\treturn Text.encode(this.#params.description);\n\t\t}\n\n\t\treturn Loc.getMessage('SN_GROUP_SETTINGS_NO_DESCRIPTION');\n\t}\n\n\t#adjustTextareaHeight(): void\n\t{\n\t\tDom.style(this.#layout.descriptionTextarea, 'height', 0);\n\t\tDom.style(this.#layout.descriptionTextarea, 'maxHeight', 0);\n\n\t\tconst height = this.#layout.descriptionTextarea.scrollHeight;\n\t\tDom.style(this.#layout.descriptionTextarea, 'height', `${height}px`);\n\t\tDom.style(this.#layout.descriptionTextarea, 'maxHeight', `${height}px`);\n\t}\n}","import { Event, Tag } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { GroupPrivacy } from 'socialnetwork.group-privacy';\nimport 'ui.icon-set.actions';\n\ntype Params = {\n\tprivacyCode: 'open' | 'closed' | 'secret',\n\tcanEdit: boolean,\n\tonChange: void,\n}\n\nexport class EditPrivacy\n{\n\t#params: Params;\n\t#privacyPopup: GroupPrivacy;\n\t#layout: {\n\t\tprivacy: HTMLElement,\n\t\tprivacyText: HTMLElement,\n\t};\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#layout = {};\n\t\tthis.#params = params;\n\t\tthis.#privacyPopup = this.#createPrivacyPopup();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst canEdit = this.#params.canEdit === true;\n\n\t\tthis.#layout.privacyText = Tag.render`\n\t\t\t<div class=\"sn-group-settings__privacy\">\n\t\t\t\t${this.#privacyPopup.getLabel()}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#layout.privacy = Tag.render`\n\t\t\t<div class=\"sn-group-settings__privacy-container ${!canEdit ? '--readonly' : ''}\">\n\t\t\t\t${this.#layout.privacyText}\n\t\t\t\t<div class=\"ui-icon-set --chevron-down\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tif (canEdit)\n\t\t{\n\t\t\tEvent.bind(this.#layout.privacy, 'click', this.#showPrivacy.bind(this));\n\t\t}\n\n\t\treturn this.#layout.privacy;\n\t}\n\n\t#createPrivacyPopup(): GroupPrivacy\n\t{\n\t\tconst privacyPopup = new GroupPrivacy({\n\t\t\tprivacyCode: this.#params.privacyCode,\n\t\t});\n\n\t\tprivacyPopup.subscribe('changePrivacy', this.#changePrivacy.bind(this));\n\n\t\treturn privacyPopup;\n\t}\n\n\t#showPrivacy(event)\n\t{\n\t\tthis.#privacyPopup.show(event.target);\n\t}\n\n\t#changePrivacy(baseEvent: BaseEvent)\n\t{\n\t\tconst privacyCode: 'open' | 'closed' | 'secret' = baseEvent.getData();\n\n\t\tthis.setPrivacy(privacyCode);\n\n\t\tthis.#params.onChange(privacyCode);\n\t}\n\n\tsetPrivacy(privacyCode: 'open' | 'closed' | 'secret')\n\t{\n\t\tthis.#params.privacyCode = privacyCode;\n\t\tthis.#privacyPopup.setPrivacy(this.#params.privacyCode);\n\t\tthis.#layout.privacyText.innerText = this.#privacyPopup.getLabel();\n\t}\n}","import { Dom, Event, Tag, Text, Type } from 'main.core';\nimport 'ui.icon-set.actions';\n\ntype Params = {\n\tname: string,\n\tcanEdit: boolean,\n\tonChange: void,\n}\n\nexport class EditTitle\n{\n\t#params: Params;\n\t#layout: {\n\t\teditTitleContainer: HTMLElement,\n\t\ttitleText: HTMLElement,\n\t\teditTitleButton: HTMLElement,\n\t\teditTitleInput: HTMLInputElement,\n\t};\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#layout = {};\n\t\tthis.#params = params;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#layout.editTitleContainer = Tag.render`\n\t\t\t<div class=\"sn-group-settings__title-edit-container\">\n\t\t\t\t<div class=\"sn-group-settings__title-edit\">\n\t\t\t\t\t${this.#renderTitleText()}\n\t\t\t\t\t${this.#renderEditTitleButton()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"\n\t\t\t\t\tui-ctl ui-ctl-textbox ui-ctl--w100 ui-ctl--transp ui-ctl-no-border ui-ctl-xs ui-ctl-no-padding\n\t\t\t\t\tsn-group-settings__title-edit-input\n\t\t\t\t\">\n\t\t\t\t\t${this.#renderEditTitleInput()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#layout.editTitleContainer;\n\t}\n\n\t#renderTitleText(): HTMLElement\n\t{\n\t\tthis.#layout.titleText = Tag.render`\n\t\t\t<div class=\"sn-group-settings__title-edit-text\">${Text.encode(this.#params.name)}</div>\n\t\t`;\n\n\t\treturn this.#layout.titleText;\n\t}\n\n\t#renderEditTitleButton(): HTMLElement|string\n\t{\n\t\tif (this.#params.canEdit !== true)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tthis.#layout.editTitleButton = Tag.render`\n\t\t\t<div class=\"ui-icon-set --pencil-40\"></div>\n\t\t`;\n\n\t\tEvent.bind(this.#layout.editTitleButton, 'click', () => this.#startEditing());\n\n\t\treturn this.#layout.editTitleButton;\n\t}\n\n\t#renderEditTitleInput(): HTMLInputElement\n\t{\n\t\tthis.#layout.editTitleInput = Tag.render`\n\t\t\t<input type=\"text\" value=\"${Text.encode(this.#params.name)}\" class=\"ui-ctl-element\">\n\t\t`;\n\n\t\tEvent.bind(this.#layout.editTitleInput, 'blur', () => this.#stopEditing());\n\n\t\tEvent.bind(this.#layout.editTitleInput, 'keydown', (event: KeyboardEvent) => {\n\t\t\tif (event.key === 'Enter')\n\t\t\t{\n\t\t\t\tthis.#stopEditing();\n\t\t\t}\n\t\t});\n\n\t\treturn this.#layout.editTitleInput;\n\t}\n\n\t#startEditing()\n\t{\n\t\tDom.addClass(this.#layout.editTitleContainer, '--editing');\n\t\tthis.#layout.editTitleInput.focus();\n\t\tthis.#layout.editTitleInput.setSelectionRange(999, 999);\n\t\tthis.#layout.editTitleInput.scrollTo({\n\t\t\tleft: this.#layout.editTitleInput.scrollWidth,\n\t\t\tbehavior: 'smooth',\n\t\t});\n\t}\n\n\t#stopEditing()\n\t{\n\t\tconst name = this.#layout.editTitleInput.value.trim();\n\n\t\tif (Type.isStringFilled(name) && this.#params.name !== name)\n\t\t{\n\t\t\tthis.setTitle(name);\n\t\t\tthis.#params.onChange(this.#params.name);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setTitle(this.#params.name);\n\t\t}\n\n\t\tDom.removeClass(this.#layout.editTitleContainer, '--editing');\n\t}\n\n\tsetTitle(title: string): void\n\t{\n\t\tthis.#layout.editTitleInput.value = title;\n\t\tthis.#params.name = title;\n\t\tthis.#layout.titleText.innerHTML = Text.encode(this.#params.name);\n\t}\n}","import { Event, Tag } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Editor as AvatarEditor } from 'ui.avatar-editor';\nimport { Logo, LogoData } from 'socialnetwork.logo';\nimport 'ui.icon-set.actions';\n\ntype Params = {\n\tlogo: LogoData,\n\tcanEdit: boolean,\n\tonChange: void,\n}\n\nexport class EditAvatar\n{\n\t#params: Params;\n\t#layout: {\n\t\tavatar: HTMLElement,\n\t\tavatarEdit: HTMLElement,\n\t};\n\t#avatarEditor: AvatarEditor;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#layout = {};\n\t\tthis.#params = params;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst logo = new Logo(this.#params.logo);\n\n\t\tconst avatarNode = Tag.render`\n\t\t\t<div class=\"sn-group-settings__space-avatar sn-spaces__space-logo ${logo.getClass() ?? ''}\">\n\t\t\t\t${this.#renderAvatarEdit()}\n\t\t\t\t${logo.render()}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#layout.avatar?.replaceWith(avatarNode);\n\t\tthis.#layout.avatar = avatarNode;\n\n\t\treturn this.#layout.avatar;\n\t}\n\n\t#renderAvatarEdit(): HTMLElement|string\n\t{\n\t\tif (this.#params.canEdit !== true)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tthis.#layout.avatarEdit = Tag.render`\n\t\t\t<div class=\"sn-group-settings__space-avatar-edit\">\n\t\t\t\t<div class=\"ui-icon-set --pencil-40\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.#layout.avatarEdit, 'click', this.#chooseSpaceImage.bind(this));\n\n\t\treturn this.#layout.avatarEdit;\n\t}\n\n\t#chooseSpaceImage()\n\t{\n\t\tthis.#getAvatarEditor().show('file');\n\t}\n\n\t#getAvatarEditor(): AvatarEditor\n\t{\n\t\tif (!this.#avatarEditor)\n\t\t{\n\t\t\tthis.#avatarEditor = new AvatarEditor({\n\t\t\t\tenableCamera: false,\n\t\t\t});\n\t\t\tthis.#avatarEditor.subscribe('onApply', (event: BaseEvent) => {\n\t\t\t\tconst [file] = event.getCompatData();\n\t\t\t\tconst avatar = URL.createObjectURL(file);\n\t\t\t\tthis.setAvatar(avatar);\n\t\t\t\tthis.#params.onChange(file);\n\t\t\t});\n\t\t}\n\n\t\treturn this.#avatarEditor;\n\t}\n\n\tsetAvatar(avatar: string)\n\t{\n\t\tthis.#params.logo = {\n\t\t\tid: avatar,\n\t\t\ttype: 'image',\n\t\t};\n\t\tthis.render();\n\t}\n}","import { Loc, Tag, Text } from 'main.core';\nimport { Menu, Popup } from 'main.popup';\nimport { Button, ButtonColor, ButtonSize } from 'ui.buttons';\nimport type { Perms } from '../type';\n\ntype Params = {\n\tisPin: boolean,\n\tisSubscribed: boolean,\n\tactions: Perms,\n\tpinChanged: void,\n\tfollowChanged: void,\n\tleave: void,\n\tdelete: void,\n}\n\nexport class ActionsButton\n{\n\t#params: Params;\n\t#layout: {\n\t\tbutton: HTMLElement,\n\t};\n\n\t#empty: boolean;\n\n\t#actionsMenu: Menu;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#layout = {};\n\t\tthis.#params = params;\n\n\t\tthis.#actionsMenu = this.#createActionsMenu();\n\n\t\tthis.#empty = this.#actionsMenu.getMenuItems().length === 0;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#empty)\n\t\t{\n\t\t\treturn Tag.render`<div></div>`;\n\t\t}\n\n\t\tthis.#layout.button = new Button({\n\t\t\ttext: Loc.getMessage('SN_GROUP_SETTINGS_ACTIONS'),\n\t\t\tcolor: ButtonColor.SUCCESS,\n\t\t\tsize: ButtonSize.MEDIUM,\n\t\t\tdropdown: true,\n\t\t\tround: true,\n\t\t\tonclick: this.#showActionsMenu.bind(this),\n\t\t}).render();\n\n\t\treturn this.#layout.button;\n\t}\n\n\t#showActionsMenu(): void\n\t{\n\t\tthis.#getActionsMenu().show();\n\t}\n\n\t#getActionsMenu(): Menu\n\t{\n\t\treturn this.#actionsMenu;\n\t}\n\n\t#createActionsMenu(): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: `sn-group-settings__actions-menu-${Text.getRandom()}`,\n\t\t\tbindElement: this.#layout.button,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\tif (this.#params.actions.canPin)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\ttext: this.#getPinText(),\n\t\t\t\tdataset: { id: 'sn-group-settings__actions-pin' },\n\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\tthis.#params.isPin = !this.#params.isPin;\n\t\t\t\t\titem.setText(this.#getPinText());\n\t\t\t\t\tthis.#params.pinChanged(this.#params.isPin);\n\t\t\t\t\tmenu.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (this.#params.actions.canFollow)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\ttext: this.#getFollowText(),\n\t\t\t\tdataset: { id: 'sn-group-settings__actions-follow' },\n\t\t\t\tonclick: (event, item) => {\n\t\t\t\t\tthis.#params.isSubscribed = !this.#params.isSubscribed;\n\t\t\t\t\titem.setText(this.#getFollowText());\n\t\t\t\t\tthis.#params.followChanged(this.#params.isSubscribed);\n\t\t\t\t\tmenu.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (this.#params.actions.canLeave)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\ttext: Loc.getMessage('SN_GROUP_SETTINGS_LEAVE_SPACE'),\n\t\t\t\tdataset: { id: 'sn-group-settings__actions-leave' },\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.#showDangerPopup(\n\t\t\t\t\t\t() => this.#params.leave(),\n\t\t\t\t\t\tLoc.getMessage('SN_GROUP_SETTINGS_CONFIRM_LEAVE'),\n\t\t\t\t\t\tLoc.getMessage('SN_GROUP_SETTINGS_LEAVE'),\n\t\t\t\t\t);\n\t\t\t\t\tmenu.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (this.#params.actions.canEdit)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\ttext: Loc.getMessage('SN_GROUP_SETTINGS_DELETE_SPACE'),\n\t\t\t\tdataset: { id: 'sn-group-settings__actions-delete' },\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.#showDangerPopup(\n\t\t\t\t\t\t() => this.#params.delete(),\n\t\t\t\t\t\tLoc.getMessage('SN_GROUP_SETTINGS_CONFIRM_DELETE'),\n\t\t\t\t\t\tLoc.getMessage('SN_GROUP_SETTINGS_DELETE'),\n\t\t\t\t\t);\n\t\t\t\t\tmenu.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn menu;\n\t}\n\n\t#showDangerPopup(action, message, okCaption)\n\t{\n\t\tconst popup = new Popup({\n\t\t\tbindElement: null,\n\t\t\tcontent: Tag.render`\n\t\t\t\t<div class=\"socialnetwork-danger-popup\">\n\t\t\t\t\t${message}\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tbuttons: [\n\t\t\t\tnew Button({\n\t\t\t\t\tid: 'socialnetwork-danger-popup-btn-action',\n\t\t\t\t\tsize: ButtonSize.SMALL,\n\t\t\t\t\tcolor: ButtonColor.DANGER,\n\t\t\t\t\ttext: okCaption,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\taction();\n\t\t\t\t\t\t\tpopup.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew Button({\n\t\t\t\t\tid: 'socialnetwork-danger-popup-btn-cancel',\n\t\t\t\t\tsize: ButtonSize.SMALL,\n\t\t\t\t\tcolor: ButtonColor.LIGHT_BORDER,\n\t\t\t\t\ttext: Loc.getMessage('SN_GROUP_SETTINGS_CANCEL'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: () => popup.close(),\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t\tminHeight: 120,\n\t\t\tminWidth: 350,\n\t\t\tmaxWidth: 350,\n\t\t\tanimation: 'fading-slide',\n\t\t});\n\n\t\tpopup.show();\n\t}\n\n\t#getPinText(): string\n\t{\n\t\treturn Loc.getMessage(`SN_GROUP_SETTINGS_MENU_PIN_${this.#params.isPin ? 'N' : 'Y'}`);\n\t}\n\n\t#getFollowText(): string\n\t{\n\t\treturn Loc.getMessage(`SN_GROUP_SETTINGS_MENU_FOLLOW_${this.#params.isSubscribed ? 'N' : 'Y'}`);\n\t}\n}\n","import { Event, Loc, Tag, Text, Type } from 'main.core';\nimport { Button, ButtonColor, ButtonSize } from 'ui.buttons';\nimport 'ui.icon-set.main';\n\ntype Params = {\n\tlistOfMembers: Array,\n\tonShowMembers: void,\n}\n\nexport class MembersSection\n{\n\t#params: Params;\n\n\t#layout: {\n\t\twrap: HTMLElement,\n\t};\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#params = params;\n\n\t\tthis.#layout = {};\n\t}\n\n\tsetMembers(listOfMembers: Array): void\n\t{\n\t\tthis.#params.listOfMembers = listOfMembers;\n\n\t\tthis.render();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst owner = this.#params.listOfMembers.find((member) => member.isOwner);\n\t\tconst moderators = this.#params.listOfMembers.filter((member) => member.isModerator);\n\t\tconst members = this.#params.listOfMembers.filter((member) => !member.isOwner && !member.isModerator);\n\n\t\tconst wrap = Tag.render`\n\t\t\t<div class=\"sn-group-settings__members-section\">\n\t\t\t\t${this.#renderRoleLine(Loc.getMessage('SN_GROUP_SETTINGS_OWNER'), this.#renderOwner(owner))}\n\t\t\t\t${this.#renderModeratorsLine(moderators)}\n\t\t\t\t${this.#renderRoleLine(Loc.getMessage('SN_GROUP_SETTINGS_MEMBERS'), this.#renderMembers(members))}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#layout.wrap?.replaceWith(wrap);\n\t\tthis.#layout.wrap = wrap;\n\n\t\treturn this.#layout.wrap;\n\t}\n\n\t#renderOwner(owner): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__owner\">\n\t\t\t\t${this.#renderAvatar(owner.photo)}\n\t\t\t\t<div class=\"sn-group-settings__owner-info\">\n\t\t\t\t\t<a\n\t\t\t\t\t\tclass=\"sn-group-settings__member-name\"\n\t\t\t\t\t\thref=\"${this.#getUserProfileUrl(owner.id)}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Text.encode(`${owner.name} ${owner.lastName}`)}\n\t\t\t\t\t</a>\n\t\t\t\t\t<div class=\"sn-group-settings__owner-position\">\n\t\t\t\t\t\t${Text.encode(owner.position)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderModeratorsLine(moderators: Array): HTMLElement\n\t{\n\t\treturn this.#renderRoleLine(\n\t\t\tLoc.getMessage('SN_GROUP_SETTINGS_MODERATORS'),\n\t\t\tthis.#renderModerators(moderators),\n\t\t\t'--moderators',\n\t\t);\n\t}\n\n\t#renderModerators(moderators: Array): HTMLElement\n\t{\n\t\tif (moderators.length === 0)\n\t\t{\n\t\t\treturn this.#renderModeratorsEmptyState();\n\t\t}\n\n\t\tconst maxModerators = 4;\n\t\tconst moreModerators = moderators.length - maxModerators;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__moderator-list\">\n\t\t\t\t${moderators.slice(0, maxModerators).map((moderator) => this.#renderModerator(moderator))}\n\t\t\t\t${this.#renderMoreModerators(moreModerators)}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderMoreModerators(count: number): HTMLElement|string\n\t{\n\t\tif (count <= 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst moreModeratorsNode = Tag.render`\n\t\t\t<div class=\"sn-group-settings__more-moderators\">\n\t\t\t\t${Loc.getMessage('SN_GROUP_SETTINGS_MORE_MODERATORS', { '#COUNT#': count })}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(moreModeratorsNode, 'click', this.#params.onShowMembers);\n\n\t\treturn moreModeratorsNode;\n\t}\n\n\t#renderModeratorsEmptyState(): HTMLElement\n\t{\n\t\treturn this.#renderMembersLineEmptyState(\n\t\t\t'--person',\n\t\t\tLoc.getMessage('SN_GROUP_SETTINGS_EMPTY_STATE_MODERATORS'),\n\t\t);\n\t}\n\n\t#renderModerator(moderator: any): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__moderator\">\n\t\t\t\t<div class=\"sn-group-settings__moderator-avatar-container\">\n\t\t\t\t\t${this.#renderAvatar(moderator.photo)}\n\t\t\t\t</div>\n\t\t\t\t<a\n\t\t\t\t\tclass=\"sn-group-settings__member-name\"\n\t\t\t\t\thref=\"${this.#getUserProfileUrl(moderator.id)}\"\n\t\t\t\t>\n\t\t\t\t\t${Text.encode(`${moderator.name} ${moderator.lastName}`)}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getUserProfileUrl(userId: number): string\n\t{\n\t\treturn `/company/personal/user/${userId}/`;\n\t}\n\n\t#renderMembers(members: Array): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__members\">\n\t\t\t\t${members.length > 0 ? this.#renderAvatarsLine(members) : this.#renderMembersEmptyState()}\n\t\t\t\t${this.#renderMembersButton()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderAvatarsLine(members: Array): HTMLElement\n\t{\n\t\tconst maxMembersCount = 5;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__members-line\">\n\t\t\t\t${members.slice(0, maxMembersCount).map((member) => this.#renderMember(member))}\n\t\t\t\t${this.#renderPlusMembers(members.length - maxMembersCount)}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderMembersEmptyState(): HTMLElement\n\t{\n\t\treturn this.#renderMembersLineEmptyState(\n\t\t\t'--persons-3',\n\t\t\tLoc.getMessage('SN_GROUP_SETTINGS_EMPTY_STATE_MEMBERS'),\n\t\t);\n\t}\n\n\t#renderMembersLineEmptyState(iconClass: string, text: string): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__members-empty-state\">\n\t\t\t\t<div class=\"sn-group-settings__members-empty-state-icon\">\n\t\t\t\t\t<div class=\"ui-icon-set ${iconClass}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-group-settings__members-empty-state-text\">${text}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderMember(member: any): HTMLElement\n\t{\n\t\treturn this.#renderAvatar(member.photo);\n\t}\n\n\t#renderPlusMembers(count: number): HTMLElement|string\n\t{\n\t\tif (count <= 0)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__plus-members\">+ ${count}</div>\n\t\t`;\n\t}\n\n\t#renderAvatar(avatar: string, className = ''): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"ui-icon ui-icon-common-user ${className}\">\n\t\t\t\t<i style=\"${this.#isAvatar(avatar) ? `background-image: url('${avatar}')` : ''}\"></i>\n\t\t\t</span>\n\t\t`;\n\t}\n\n\t#renderMembersButton(): HTMLElement\n\t{\n\t\treturn new Button({\n\t\t\tclassName: 'sn-group-settings__members-button',\n\t\t\ttext: Loc.getMessage('SN_GROUP_SETTINGS_MEMBERS'),\n\t\t\tcolor: ButtonColor.LIGHT_BORDER,\n\t\t\tsize: ButtonSize.EXTRA_SMALL,\n\t\t\tround: true,\n\t\t\tonclick: this.#params.onShowMembers,\n\t\t}).render();\n\t}\n\n\t#renderRoleLine(role: string, usersNode: HTMLElement, className: string): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__role-line ${className}\">\n\t\t\t\t<div class=\"sn-group-settings__role\">${role}</div>\n\t\t\t\t${usersNode}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#isAvatar(avatar: string): boolean\n\t{\n\t\treturn Type.isStringFilled(avatar) && avatar !== '/bitrix/images/1.gif';\n\t}\n}","import { Dom, Event } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\ntype Params = {\n\tsliderWidth: number,\n\tcheckSlider: void,\n}\n\nexport class ThemeSliderAdjuster\n{\n\t#params: Params;\n\t#slider;\n\t#layout: {\n\t\tthemeBackgroundContainer: HTMLElement,\n\t};\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#params = params;\n\t\tthis.#layout = {};\n\t}\n\n\tbindSliderEvents()\n\t{\n\t\tEventEmitter.subscribe('SidePanel.Slider:onOpenStart', (event) => {\n\t\t\tif (this.#params.checkSlider(event.target))\n\t\t\t{\n\t\t\t\tthis.#slider = event.target;\n\t\t\t\tthis.#updateSliderTheme();\n\n\t\t\t\tDom.removeClass(this.#getImBar(), 'bx-im-bar-default');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(this.#getImBar(), 'bx-im-bar-default');\n\t\t\t}\n\t\t});\n\n\t\tEventEmitter.subscribe('SidePanel.Slider:onCloseComplete', () => {\n\t\t\tDom.removeClass(this.#getImBar(), 'bx-im-bar-default');\n\t\t\tif (BX.SidePanel.Instance.getTopSlider() && BX.SidePanel.Instance.getTopSlider() !== this.#slider)\n\t\t\t{\n\t\t\t\tDom.addClass(this.#getImBar(), 'bx-im-bar-default');\n\t\t\t}\n\t\t});\n\n\t\tnew MutationObserver(() => {\n\t\t\tconst theme = BX.Intranet.Bitrix24.ThemePicker.Singleton.getAppliedThemeId();\n\t\t\tconst themeStyles = document.head.querySelectorAll(`link[data-theme-id=\"${theme}\"`);\n\t\t\tPromise.all([...themeStyles].map((link) => new Promise((resolve) => {\n\t\t\t\tEvent.bind(link, 'load', resolve);\n\t\t\t}))).then(() => this.#updateSliderTheme());\n\t\t}).observe(document.head, { childList: true, subtree: false });\n\t}\n\n\t#updateSliderTheme()\n\t{\n\t\tconst backgroundNode = this.#getBackgroundNode();\n\t\tthis.#applyMainThemeStyles(backgroundNode);\n\n\t\tconst mainThemeVideo = this.#getMainThemeVideo();\n\t\tif (!mainThemeVideo)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Dom.attr(mainThemeVideo, 'data-theme-id') !== BX.Intranet.Bitrix24.ThemePicker.Singleton.getAppliedThemeId())\n\t\t{\n\t\t\tmainThemeVideo?.remove();\n\t\t\treturn;\n\t\t}\n\n\t\tDom.clean(backgroundNode);\n\t\tDom.append(this.#getSliderThemeVideo(mainThemeVideo), backgroundNode);\n\n\t\tconst mainVideo = mainThemeVideo.querySelector('video');\n\t\tif (!mainVideo.dataset.pausePlayEventsBinded)\n\t\t{\n\t\t\tmainVideo.addEventListener('pause', () => {\n\t\t\t\tconst sliderVideo = backgroundNode.querySelector('.theme-video-container video');\n\t\t\t\tsliderVideo.currentTime = mainVideo.currentTime;\n\t\t\t\tsliderVideo.pause();\n\t\t\t});\n\t\t\tmainVideo.addEventListener('play', () => {\n\t\t\t\tconst sliderVideo = backgroundNode.querySelector('.theme-video-container video');\n\t\t\t\tsliderVideo.currentTime = mainVideo.currentTime;\n\t\t\t\tsliderVideo.play();\n\t\t\t});\n\t\t\tmainVideo.dataset.pausePlayEventsBinded = true;\n\t\t}\n\t}\n\n\t#applyMainThemeStyles(themeNode: HTMLElement): void\n\t{\n\t\tconst mainStyles = getComputedStyle(document.body);\n\t\tDom.style(themeNode, 'backgroundColor', mainStyles.backgroundColor);\n\t\tDom.style(themeNode, 'backgroundImage', mainStyles.backgroundImage);\n\t\tDom.style(themeNode, 'backgroundSize', mainStyles.backgroundSize);\n\t\tDom.style(themeNode, 'backgroundPositionX', this.#getSliderBackgroundOffset());\n\t}\n\n\t#getMainThemeVideo()\n\t{\n\t\treturn document.querySelector('.theme-video-container[data-theme-id]');\n\t}\n\n\t#getSliderThemeVideo(mainThemeVideo: HTMLElement): HTMLElement\n\t{\n\t\tconst copiedThemeVideo = mainThemeVideo.cloneNode(true);\n\t\tDom.attr(copiedThemeVideo, 'data-theme-id', null);\n\t\tDom.style(copiedThemeVideo, 'zIndex', 1);\n\t\tDom.style(copiedThemeVideo, 'width', '100vw');\n\t\tDom.style(copiedThemeVideo, 'height', '100vh');\n\n\t\tconst copiedVideo = copiedThemeVideo.querySelector('video');\n\t\tDom.style(copiedVideo, 'transform', `translateX(${this.#getSliderBackgroundOffset()})`);\n\n\t\tconst mainVideo = mainThemeVideo.querySelector('video');\n\t\tif (mainVideo.paused)\n\t\t{\n\t\t\tcopiedVideo.pause();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tcopiedVideo.play();\n\t\t}\n\t\tcopiedVideo.currentTime = mainVideo.currentTime;\n\n\t\treturn copiedThemeVideo;\n\t}\n\n\t#getSliderBackgroundOffset(): string\n\t{\n\t\treturn `calc(-100vw + ${this.#params.sliderWidth}px + ${this.#getImBar().offsetWidth}px)`;\n\t}\n\n\t#getBackgroundNode()\n\t{\n\t\tif (!this.#slider.getContainer().contains(this.#layout.themeBackgroundContainer))\n\t\t{\n\t\t\tthis.#layout.themeBackgroundContainer?.remove();\n\t\t\tthis.#layout.themeBackgroundContainer = BX.Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tdata-id=\"slider-theme-background-container\"\n\t\t\t\t\tstyle=\"\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tinset: 0;\n\t\t\t\t\t\twidth: 100vw;\n\t\t\t\t\t\theight: 100vh;\n\t\t\t\t\t\"\n\t\t\t\t>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tthis.#slider.getContainer().prepend(this.#layout.themeBackgroundContainer);\n\t\t}\n\n\t\tthis.#layout.themeBackgroundContainer.querySelector('.theme-video-container')?.remove();\n\n\t\treturn this.#layout.themeBackgroundContainer;\n\t}\n\n\t#getImBar()\n\t{\n\t\treturn document.getElementById('bx-im-bar');\n\t}\n}","import { Dom, Event, Tag } from 'main.core';\n\nexport class Feature\n{\n\t#name: string;\n\t#icon: string;\n\n\tconstructor(name: string)\n\t{\n\t\tthis.#name = name;\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.#name;\n\t}\n\n\tgetIcon(): string\n\t{\n\t\treturn this.#icon;\n\t}\n\n\trenderContent(): HTMLElement\n\t{\n\t\treturn Tag.render``;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tconst { node, headerElement, toolsMore } = Tag.render`\n\t\t\t<div ref=\"node\" class=\"ui-slider-section sn-side-panel__space-settings_section --active\">\n\t\t\t\t<div ref=\"headerElement\" class=\"sn-side-panel__space-settings_section-title\">\n\t\t\t\t\t<div class=\"ui-icon-set --${this.getIcon()}\"></div>\n\t\t\t\t\t<div class=\"sn-side-panel__space-settings_section-title-text\">\n\t\t\t\t\t\t${this.getName()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-icon-set --chevron-down\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-side-panel__space-settings_section-content\">\n\t\t\t\t\t${this.renderContent()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(toolsMore, 'click', () => {\n\t\t\tconsole.log('show helper sidePanel');\n\t\t});\n\n\t\tEvent.bind(headerElement, 'click', () => {\n\t\t\tDom.toggleClass(node, '--active');\n\t\t});\n\n\t\treturn node;\n\t}\n}\n","import { Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { Switcher } from 'ui.switcher';\nimport { Feature } from './feature';\n\nimport type { GroupFeature } from '../../type';\nimport { Controller } from 'socialnetwork.controller';\n\nexport class Tools extends Feature\n{\n\t#groupId: number;\n\t#features: Map<GroupFeature>;\n\t#name: string;\n\t#icon: string;\n\n\tconstructor(groupId: number, features: Array<GroupFeature>)\n\t{\n\t\tsuper();\n\n\t\tconst availableFeaturesList = new Set(['tasks', 'calendar', 'files']);\n\n\t\tconst availableFeatures = features\n\t\t\t.filter((feature: GroupFeature) => availableFeaturesList.has(feature.featureName))\n\t\t;\n\n\t\tthis.#groupId = Type.isUndefined(groupId) ? 0 : parseInt(groupId, 10);\n\t\tthis.#features = new Map();\n\t\tthis.#name = Loc.getMessage('SN_SIDE_PANEL_SPACE_SETTINGS');\n\t\tthis.#icon = 'settings';\n\n\t\tavailableFeatures.forEach((feature: GroupFeature) => {\n\t\t\tthis.#features.set(feature.id, feature);\n\t\t});\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.#name;\n\t}\n\n\tgetIcon(): string\n\t{\n\t\treturn this.#icon;\n\t}\n\n\trenderContent(): HTMLElement\n\t{\n\t\tconst { node } = Tag.render`\n\t\t\t<div ref=\"node\" class=\"sn-side-panel__space-settings_section-content-wrapper\">\n\t\t\t\t<div class=\"sn-side-panel__space-settings_section-content-wrapper-block\">\n\t\t\t\t\t<div class=\"ui-alert ui-alert-primary ui-alert-xs\">\n\t\t\t\t\t\t<div class=\"ui-alert-message\">\n\t\t\t\t\t\t\t<div class=\"sn-side-panel__space-settings_alert-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('SN_GROUP_SPACE_SETTINGS_TOOLS')}\n\t\t\t\t\t\t\t\t<span ref=\"toolsMore\" class=\"sn-side-panel__space-settings_alert-text-more\">\n\t\t\t\t\t\t\t\t\t<!--${Loc.getMessage('SN_GROUP_SPACE_SETTINGS_TOOLS_MORE')}-->\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.#switcherItems(this.#features)}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn node;\n\t}\n\n\t#switcherItems(features: Map<GroupFeature>): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-side-panel__space-settings_section-content-wrapper-block-content\">\n\t\t\t\t${[...features.values()].map((feature: GroupFeature) => this.#switcherItemRender(feature))}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#switcherItemRender(feature: GroupFeature): HTMLElement\n\t{\n\t\tconst name = feature.customName === '' ? feature.name : feature.customName;\n\t\tconst featureCustom = feature.customName === '' ? '--standard' : '--custom';\n\n\t\tconst { node, switcherToggle, switcherContainer, editButton, refreshButton, inputFeature } = Tag.render`\n\t\t\t<div ref=\"node\" class=\"sn-side-panel__space-settings_section-item ${featureCustom}\">\n\t\t\t\t<div class=\"sn-side-panel__space-settings_section-switcher-toggle\">\n\t\t\t\t\t<div ref=\"switcherContainer\" class=\"sn-side-panel__space-settings_switcher\"></div>\n\t\t\t\t\t<div ref=\"switcherToggle\" class=\"sn-side-panel__space-settings_section-item-text\">\n\t\t\t\t\t\t${Text.encode(feature.name)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-textbox ui-ctl-inline sn-side-panel__space-settings_section-item-input-block\">\n\t\t\t\t\t\t<input ref=\"inputFeature\"  name=\"tasks_name\" type=\"text\" class=\"ui-ctl-element\" data-role=\"feature-input-text\" value=\"${Text.encode(name)}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t<div ref=\"editButton\" class=\"ui-icon-set --pencil-40 sn-side-panel__space-settings_edit-btn\" style=\"--ui-icon-set__icon-size: 19px;\"></div>\n\t\t\t<div ref=\"refreshButton\" class=\"ui-icon-set --undo-1 sn-side-panel__space-settings_refresh\" style=\"--ui-icon-set__icon-size: 19px;\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tconst switcher = new Switcher({\n\t\t\tnode: switcherContainer,\n\t\t\tsize: 'extra-small',\n\t\t\tcolor: 'primary',\n\t\t\tchecked: feature.active,\n\t\t\thandlers: {\n\t\t\t\ttoggled: () => {\n\t\t\t\t\tthis.#toggleActive(feature.id);\n\t\t\t\t\tthis.#save(feature.id);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tEvent.bind(switcherToggle, 'click', () => {\n\t\t\tswitcher.check(!feature.active);\n\t\t});\n\n\t\tEvent.bind(editButton, 'click', () => {\n\t\t\tDom.removeClass(node, '--standard');\n\t\t\tDom.addClass(node, '--custom');\n\t\t});\n\n\t\tEvent.bind(refreshButton, 'click', () => {\n\t\t\tDom.addClass(node, '--standard');\n\t\t\tDom.removeClass(node, '--custom');\n\t\t\tthis.#changeName(feature.id);\n\t\t\tinputFeature.value = feature.name;\n\t\t});\n\n\t\tEvent.bind(inputFeature, 'blur', () => {\n\t\t\tthis.#changeName(feature.id, inputFeature.value.trim());\n\t\t});\n\n\t\treturn node;\n\t}\n\n\t#save(featureId: number)\n\t{\n\t\tController.changeFeature(this.#groupId, this.#features.get(featureId));\n\t}\n\n\t#toggleActive(featureId: number)\n\t{\n\t\tconst feature = this.#features.get(featureId);\n\t\tfeature.active = !feature.active;\n\n\t\tthis.#features.set(featureId, feature);\n\t}\n\n\t#changeName(featureId: number, name: string)\n\t{\n\t\tif (name)\n\t\t{\n\t\t\tthis.#features.get(featureId).customName = name;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#features.get(featureId).customName = null;\n\t\t}\n\n\t\tController.changeFeature(this.#groupId, this.#features.get(featureId));\n\t}\n}\n","import { Loc, Tag } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { TagSelector } from 'ui.entity-selector';\nimport { Feature } from './feature';\nimport { Controller } from 'socialnetwork.controller';\n\nexport class Tags extends Feature\n{\n\t#groupId: number;\n\t#name: string;\n\t#icon: string;\n\n\t#layout: {\n\t\tcontainer: HTMLElement,\n\t\tselectorContainer: HTMLElement,\n\t};\n\n\tconstructor(groupId: number)\n\t{\n\t\tsuper();\n\n\t\tthis.#groupId = groupId;\n\n\t\tthis.#layout = {};\n\t\tthis.#name = Loc.getMessage('SN_SIDE_PANEL_SPACE_TAGS');\n\t\tthis.#icon = 'tag';\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn this.#name;\n\t}\n\n\tgetIcon(): string\n\t{\n\t\treturn this.#icon;\n\t}\n\n\trenderContent(): HTMLElement\n\t{\n\t\tconst { node, selector } = Tag.render`\n\t\t\t<div ref=\"node\" class=\"sn-side-panel__space-settings_section-content-wrapper\">\n\t\t\t\t<div\n\t\t\t\t\tref=\"selector\"\n\t\t\t\t\tclass=\"sn-side-panel__space-settings_section-content-wrapper-block\"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#layout.container = node;\n\t\tthis.#layout.selectorContainer = selector;\n\n\t\treturn node;\n\t}\n\n\trenderSelector(): void\n\t{\n\t\tconst saveTags = (selectedTags: Array) => {\n\t\t\tconst tags = [];\n\t\t\tselectedTags.forEach((item) => {\n\t\t\t\ttags.push(item.id);\n\t\t\t});\n\n\t\t\tController.changeTags(this.#groupId, tags);\n\t\t};\n\n\t\tconst tagSelector = new TagSelector({\n\t\t\taddButtonCaption: Loc.getMessage('SN_SIDE_PANEL_SPACE_TAGS_ADD'),\n\t\t\taddButtonCaptionMore: Loc.getMessage('SN_SIDE_PANEL_SPACE_TAGS_ADD_TAG'),\n\t\t\tdialogOptions: {\n\t\t\t\twidth: 350,\n\t\t\t\theight: 300,\n\t\t\t\toffsetLeft: 50,\n\t\t\t\tcompactView: true,\n\t\t\t\tpreload: true,\n\t\t\t\tcontext: 'PROJECT_TAG',\n\t\t\t\tsearchTabOptions: {\n\t\t\t\t\tstubOptions: {\n\t\t\t\t\t\ttitle: Loc.getMessage('SN_SIDE_PANEL_SPACE_TAGS_SEARCH_FAILED'),\n\t\t\t\t\t\tsubtitle: Loc.getMessage('SN_SIDE_PANEL_SPACE_TAGS_SEARCH_ADD_HINT'),\n\t\t\t\t\t\tarrow: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project-tag',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tgroupId: this.#groupId,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tsearchOptions: {\n\t\t\t\t\tallowCreateItem: true,\n\t\t\t\t\tfooterOptions: {\n\t\t\t\t\t\tlabel: Loc.getMessage('SN_SIDE_PANEL_SPACE_TAGS_ADD_FOOTER_LABEL'),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\tsaveTags(event.getTarget().getSelectedItems());\n\t\t\t\t\t},\n\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\tsaveTags(event.getTarget().getSelectedItems());\n\t\t\t\t\t},\n\t\t\t\t\t'Search:onItemCreateAsync': (event: BaseEvent) => {\n\t\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\t\tconst { searchQuery } = event.getData();\n\t\t\t\t\t\t\tconst name = searchQuery.getQuery().toLowerCase();\n\t\t\t\t\t\t\tconst dialog = event.getTarget();\n\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tconst tagsList = name.split(',');\n\n\t\t\t\t\t\t\t\ttagsList.forEach((tag) => {\n\t\t\t\t\t\t\t\t\tconst item = dialog.addItem({\n\t\t\t\t\t\t\t\t\t\tid: tag,\n\t\t\t\t\t\t\t\t\t\tentityId: 'project-tag',\n\t\t\t\t\t\t\t\t\t\ttitle: tag,\n\t\t\t\t\t\t\t\t\t\ttabs: ['all', 'recents'],\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\titem.select();\n\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\ttagSelector.renderTo(this.#layout.selectorContainer);\n\t}\n}\n","import { Loc, Tag } from 'main.core';\nimport { Label, LabelColor } from 'ui.label';\nimport { Controller } from 'socialnetwork.controller';\n\nimport type { GroupData } from './type';\n\nimport { Tools } from './layout/space/tools';\nimport { Tags } from './layout/space/tags';\n\nimport 'ui.alerts';\nimport 'ui.icon-set.main';\nimport 'ui.sidepanel-content';\n\ntype Params = {\n\twidth: number,\n\tspaceId: number,\n}\n\nexport class SpaceSettings\n{\n\t#params: Params;\n\n\t#tools: ?Tools = null;\n\t#tags: ?Tags = null;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#params = params;\n\t}\n\n\topenInSlider(): void\n\t{\n\t\tBX.SidePanel.Instance.open('spaces-settings-space-settings', {\n\t\t\tcacheable: false,\n\t\t\ttitle: Loc.getMessage('SN_GROUP_SPACE_SETTINGS_TOOLS_TITLE'),\n\t\t\tcontentCallback: () => {\n\t\t\t\treturn Controller.getGroupData(\n\t\t\t\t\tthis.#params.spaceId,\n\t\t\t\t\t[\n\t\t\t\t\t\t'FEATURES',\n\t\t\t\t\t],\n\t\t\t\t)\n\t\t\t\t\t.then((groupData: GroupData) => {\n\t\t\t\t\t\tthis.#tools = new Tools(this.#params.spaceId, groupData.features);\n\t\t\t\t\t\tthis.#tags = new Tags(this.#params.spaceId);\n\n\t\t\t\t\t\treturn this.#render();\n\t\t\t\t\t})\n\t\t\t\t;\n\t\t\t},\n\t\t\twidth: this.#params.width,\n\t\t\tevents: {\n\t\t\t\tonLoad: this.#onLoad.bind(this),\n\t\t\t},\n\t\t});\n\t}\n\n\t#onLoad()\n\t{\n\t\tthis.#tags.renderSelector();\n\t}\n\n\t#render(): HTMLElement\n\t{\n\t\tconst uiStyles = 'ui-sidepanel-layout-content ui-sidepanel-layout-content-margin';\n\n\t\tconst { node } = Tag.render`\n\t\t\t<div ref=\"node\" class=\"ui-sidepanel-layout\">\n\t\t\t\t<div class=\"ui-sidepanel-layout-header\">\n\t\t\t\t\t<div class=\"ui-sidepanel-layout-title\">\n\t\t\t\t\t\t${Loc.getMessage('SN_GROUP_SPACE_SETTINGS_TOOLS_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"${uiStyles} sn-side-panel__space-settings\">\n\t\t\t\t\t${this.#tools.render()}\n\t\t\t\t\t${this.#tags.render()}\n\t\t\t\t\t${this.#renderOtherBlock()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn node;\n\t}\n\n\t#renderOtherBlock(): HTMLElement\n\t{\n\t\tconst { node } = Tag.render`\n\t\t\t<div ref=\"node\" class=\"ui-slider-section sn-side-panel__space-settings_section --disabled\">\n\t\t\t\t<div class=\"sn-side-panel__space-settings_section-title\">\n\t\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t\t\t<div class=\"sn-side-panel__space-settings_section-title-text\">\n\t\t\t\t\t\t${Loc.getMessage('SN_SIDE_PANEL_SPACE_OTHER')}\n\t\t\t\t\t\t${this.#renderLabel()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-side-panel__space-settings_section-content\">\n\t\t\t\t\t<div class=\"sn-side-panel__space-settings_section-content-wrapper\">\n\t\t\t\t\t<div class=\"sn-side-panel__space-settings_section-content-wrapper-block\">\n\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn node;\n\t}\n\n\t#renderLabel(): Label\n\t{\n\t\tconst label = new Label({\n\t\t\ttext: Loc.getMessage('SN_SIDE_PANEL_SPACE_SETTINGS_SOON'),\n\t\t\tcolor: LabelColor.PRIMARY,\n\t\t\tfill: true,\n\t\t});\n\n\t\treturn label.render();\n\t}\n}\n","import { Dom, Event, Loc, Runtime, Tag, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { PULL as Pull } from 'pull.client';\nimport { Button, ButtonSize, ButtonColor } from 'ui.buttons';\nimport { PullRequests } from './pull-requests';\nimport { EditDescription } from './layout/edit-description';\nimport { EditPrivacy } from './layout/edit-privacy';\nimport { EditTitle } from './layout/edit-title';\nimport { EditAvatar } from './layout/edit-avatar';\nimport { ActionsButton } from './layout/actions-button';\nimport { MembersSection } from './layout/members-section';\nimport { ThemeSliderAdjuster } from './theme-slider-adjuster';\nimport { Controller } from 'socialnetwork.controller';\nimport { SpaceSettings } from './space-settings';\nimport { MessageBox, MessageBoxButtons } from 'ui.dialogs.messagebox';\nimport type { GroupData } from './type';\nimport type { LogoData } from 'socialnetwork.logo';\n\nimport './group-settings.css';\nimport 'ui.icon-set.main';\nimport 'ui.icon-set.actions';\n\ntype Params = {\n\tgroupData: GroupData,\n\tlogo: LogoData,\n}\n\nexport class GroupSettings extends EventEmitter\n{\n\t#groupData: GroupData;\n\t#logo: LogoData;\n\n\t#circle: any;\n\t#layout: {\n\t\twrap: HTMLElement,\n\t\tactionsButton: ActionsButton,\n\t\teditAvatar: EditAvatar,\n\t\teditTitle: EditTitle,\n\t\teditPrivacy: EditPrivacy,\n\t\teditDescription: EditDescription,\n\t\tmembersSection: MembersSection,\n\t\tefficiencyHelper: HTMLElement,\n\t};\n\n\tSLIDER_WIDTH = 491;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Settings.Page');\n\n\t\tthis.#groupData = params.groupData;\n\t\tthis.#logo = params.logo;\n\n\t\tif (this.#isAvatar(this.#groupData.avatar))\n\t\t{\n\t\t\tthis.#logo.id = encodeURI(this.#groupData.avatar);\n\t\t}\n\n\t\tthis.#layout = {};\n\n\t\tthis.#subscribeToPull();\n\n\t\tnew ThemeSliderAdjuster({\n\t\t\tsliderWidth: this.SLIDER_WIDTH,\n\t\t\tcheckSlider: (slider) => slider.options.data?.spaceSettingsSliderId === this.#groupData.id,\n\t\t}).bindSliderEvents();\n\t}\n\n\topenInSlider(): void\n\t{\n\t\tBX.SidePanel.Instance.open('spaces-settings-space-info-page', {\n\t\t\tcacheable: false,\n\t\t\tcontentCallback: (slider) => {\n\t\t\t\tDom.addClass(slider.getOverlay(), 'sn-group-settings_overlay');\n\n\t\t\t\treturn this.#render();\n\t\t\t},\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tdata: {\n\t\t\t\tspaceSettingsSliderId: this.#groupData.id,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonBeforeCloseComplete: this.#beforeCloseComplete.bind(this),\n\t\t\t},\n\t\t});\n\t}\n\n\t#beforeCloseComplete()\n\t{\n\t\tif (this.#circle)\n\t\t{\n\t\t\tthis.#circle.stop();\n\t\t}\n\t}\n\n\t#subscribeToPull()\n\t{\n\t\tconst pullRequests = new PullRequests(this.#groupData.id);\n\t\tpullRequests.subscribe('update', this.#handleUpdateSpace.bind(this));\n\n\t\tPull.subscribe(pullRequests);\n\t}\n\n\t#handleUpdateSpace()\n\t{\n\t\tController.getGroupData(\n\t\t\tthis.#groupData.id,\n\t\t\t[\n\t\t\t\t'AVATAR',\n\t\t\t\t'ACTIONS',\n\t\t\t\t'NUMBER_OF_MEMBERS',\n\t\t\t\t'LIST_OF_MEMBERS',\n\t\t\t\t'GROUP_MEMBERS_LIST',\n\t\t\t\t'PRIVACY_TYPE',\n\t\t\t\t'PIN',\n\t\t\t\t'USER_DATA',\n\t\t\t\t'COUNTERS',\n\t\t\t\t'DESCRIPTION',\n\t\t\t\t'EFFICIENCY',\n\t\t\t\t'SUBJECT_DATA',\n\t\t\t\t'DATE_CREATE',\n\t\t\t],\n\t\t).then((groupData: GroupData) => {\n\t\t\tthis.#groupData = groupData;\n\t\t\tthis.#update(this.#groupData);\n\t\t});\n\t}\n\n\t#update(groupData: GroupData): void\n\t{\n\t\tthis.#groupData = groupData;\n\n\t\tif (this.#isAvatar(this.#groupData.avatar))\n\t\t{\n\t\t\tthis.#logo = {\n\t\t\t\tid: this.#groupData.avatar,\n\t\t\t\ttype: 'image',\n\t\t\t};\n\n\t\t\tthis.#layout.editAvatar.setAvatar(this.#groupData.avatar);\n\t\t}\n\n\t\tthis.#layout.editTitle.setTitle(this.#groupData.name);\n\t\tthis.#layout.editPrivacy.setPrivacy(this.#groupData.privacyCode);\n\t\tthis.#layout.membersSection.setMembers(this.#groupData.listOfMembers);\n\t}\n\n\t#render(): HTMLElement\n\t{\n\t\tthis.#layout.wrap = Tag.render`\n\t\t\t<div class=\"sn-group-settings__container\">\n\t\t\t\t<div class=\"sn-group-settings__toolbar\">\n\t\t\t\t\t${this.#renderActionsButton()}\n\t\t\t\t</div>\n\t\t\t\t${this.#renderSpaceCard()}\n\t\t\t\t${this.#renderFooterSection()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#layout.wrap;\n\t}\n\n\t#renderThemesButton(): HTMLElement | string\n\t{\n\t\tif (!this.#groupData.actions.canEdit)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn new Button({\n\t\t\tclassName: 'sn-group-settings__icon-themes',\n\t\t\ttext: Loc.getMessage('SN_GROUP_SETTINGS_THEMES'),\n\t\t\tcolor: ButtonColor.LIGHT_BORDER,\n\t\t\tsize: ButtonSize.MEDIUM,\n\t\t\tdependOnTheme: true,\n\t\t\tround: true,\n\t\t\tonclick: () => BX.Intranet.Bitrix24.ThemePicker.Singleton.showDialog(),\n\t\t}).render();\n\t}\n\n\t#renderActionsButton(): HTMLElement\n\t{\n\t\tthis.#layout.actionsButton = new ActionsButton({\n\t\t\tisPin: this.#groupData.isPin,\n\t\t\tisSubscribed: this.#groupData.isSubscribed,\n\t\t\tactions: this.#groupData.actions,\n\t\t\tpinChanged: (isPin) => {\n\t\t\t\tthis.#groupData.isPin = isPin;\n\t\t\t\tController.changePin(this.#groupData.id, this.#groupData.isPin);\n\t\t\t},\n\t\t\tfollowChanged: (isSubscribed) => {\n\t\t\t\tthis.#groupData.isSubscribed = isSubscribed;\n\t\t\t\tController.setSubscription(this.#groupData.id, this.#groupData.isSubscribed);\n\t\t\t},\n\t\t\tleave: () => Controller\n\t\t\t\t.leaveGroup(this.#groupData.id)\n\t\t\t\t.then(() => Controller.openCommonSpace()),\n\t\t\tdelete: () => {\n\t\t\t\tController.deleteGroup(this.#groupData.id).then((response) => {\n\t\t\t\t\tconst errorMessage = response.data;\n\n\t\t\t\t\tif (Type.isStringFilled(errorMessage))\n\t\t\t\t\t{\n\t\t\t\t\t\tnew MessageBox({\n\t\t\t\t\t\t\tmessage: errorMessage,\n\t\t\t\t\t\t\tbuttons: MessageBoxButtons.OK,\n\t\t\t\t\t\t}).show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tController.openCommonSpace();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\n\t\treturn this.#layout.actionsButton.render();\n\t}\n\n\t#renderSpaceCard(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__card\">\n\t\t\t\t${this.#renderHeaderSection()}\n\t\t\t\t${this.#renderMembersSection()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderHeaderSection(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__header-section\">\n\t\t\t\t<div class=\"sn-group-settings__header\">\n\t\t\t\t\t${this.#renderSpaceAvatar()}\n\t\t\t\t\t<div class=\"sn-group-settings__header-title\">\n\t\t\t\t\t\t${this.#renderSpaceTitleEdit()}\n\t\t\t\t\t\t${this.#renderSpacePrivacy()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.#renderDescription()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderSpaceAvatar(): HTMLElement\n\t{\n\t\tthis.#layout.editAvatar = new EditAvatar({\n\t\t\tlogo: this.#logo,\n\t\t\tcanEdit: this.#groupData.actions.canEdit,\n\t\t\tonChange: (file) => {\n\t\t\t\tController.updatePhoto(this.#groupData.id, file);\n\t\t\t\tthis.emit('changeAvatar', file);\n\t\t\t},\n\t\t});\n\n\t\treturn this.#layout.editAvatar.render();\n\t}\n\n\t#renderSpaceTitleEdit(): HTMLElement\n\t{\n\t\tthis.#layout.editTitle = new EditTitle({\n\t\t\tname: this.#groupData.name,\n\t\t\tcanEdit: this.#groupData.actions.canEdit,\n\t\t\tonChange: (name) => {\n\t\t\t\tthis.#groupData.name = name;\n\t\t\t\tController.changeTitle(this.#groupData.id, this.#groupData.name);\n\t\t\t\tthis.emit('changeTitle', this.#groupData.name);\n\t\t\t},\n\t\t});\n\n\t\treturn this.#layout.editTitle.render();\n\t}\n\n\t#renderSpacePrivacy(): HTMLElement\n\t{\n\t\tthis.#layout.editPrivacy = new EditPrivacy({\n\t\t\tprivacyCode: this.#groupData.privacyCode,\n\t\t\tcanEdit: this.#groupData.actions.canEdit,\n\t\t\tonChange: (privacyCode) => {\n\t\t\t\tthis.#groupData.privacyCode = privacyCode;\n\t\t\t\tController.changePrivacy(this.#groupData.id, this.#groupData.privacyCode);\n\t\t\t\tthis.emit('changePrivacy', this.#groupData.privacyCode);\n\t\t\t},\n\t\t});\n\n\t\treturn this.#layout.editPrivacy.render();\n\t}\n\n\t#renderDescription(): HTMLElement\n\t{\n\t\tthis.#layout.editDescription = new EditDescription({\n\t\t\tdescription: this.#groupData.description,\n\t\t\tcanEdit: this.#groupData.actions.canEdit,\n\t\t\tonChange: (description) => {\n\t\t\t\tthis.#groupData.description = description;\n\t\t\t\tController.changeDescription(this.#groupData.id, this.#groupData.description);\n\t\t\t},\n\t\t});\n\n\t\treturn this.#layout.editDescription.render();\n\t}\n\n\t#renderMembersSection(): HTMLElement\n\t{\n\t\tthis.#layout.membersSection = new MembersSection({\n\t\t\tlistOfMembers: this.#groupData.listOfMembers,\n\t\t\tonShowMembers: () => Controller.openGroupUsers('all'),\n\t\t});\n\n\t\treturn this.#layout.membersSection.render();\n\t}\n\n\t#isAvatar(avatar): boolean\n\t{\n\t\treturn Type.isStringFilled(avatar) && avatar !== '/bitrix/images/1.gif';\n\t}\n\n\t#renderFooterSection(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__footer-section\">\n\t\t\t\t<div class=\"sn-group-settings__footer-main\">\n\t\t\t\t\t${this.#renderEfficiency()}\n\t\t\t\t\t<div class=\"sn-group-settings__footer-buttons-container\">\n\t\t\t\t\t\t${this.#renderAccess()}\n\t\t\t\t\t\t${this.#renderSettings()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-group-settings__footer\">\n\t\t\t\t\t${this.#getFooterText()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getFooterText(): string\n\t{\n\t\treturn Loc.getMessage('SN_GROUP_SETTINGS_SPACE_CARD_FOOTER', {\n\t\t\t'#DATE#': this.#groupData.dateCreate,\n\t\t});\n\t}\n\n\t#renderEfficiency(): HTMLElement\n\t{\n\t\tif (!Type.isNumber(this.#groupData.efficiency))\n\t\t{\n\t\t\treturn this.#renderEfficiencyEmptyState();\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__efficiency-container\">\n\t\t\t\t${this.#renderEfficiencyNode()}\n\t\t\t\t<div class=\"sn-group-settings__efficiency-text\">\n\t\t\t\t\t${Loc.getMessage('SN_GROUP_SETTINGS_SPACE_EFFICIENCY')}\n\t\t\t\t</div>\n\t\t\t\t${this.#renderEfficiencyHelper()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderEfficiencyEmptyState()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-group-settings__efficiency-container\">\n\t\t\t\t<div class=\"sn-group-settings__efficiency-container-empty-state-icon\"></div>\n\t\t\t\t<div class=\"sn-group-settings__efficiency-text\">\n\t\t\t\t\t${Loc.getMessage('SN_GROUP_SETTINGS_SPACE_EFFICIENCY_UNAVAILABLE')}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderEfficiencyHelper(): HTMLElement\n\t{\n\t\tthis.#layout.efficiencyHelper = Tag.render`\n\t\t\t<div class=\"sn-group-settings__efficiency-helper\">\n\t\t\t\t${Loc.getMessage('SN_GROUP_SETTINGS_SPACE_EFFICIENCY_HELPER')}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(this.#layout.efficiencyHelper, 'click', () => {\n\t\t\ttop.BX.Helper.show('redirect=detail&code=6576263');\n\t\t});\n\n\t\treturn this.#layout.efficiencyHelper;\n\t}\n\n\t#renderEfficiencyNode(): HTMLElement\n\t{\n\t\tconst efficiencyNode = Tag.render`\n\t\t\t<div class=\"sn-group-settings__efficiency\"></div>\n\t\t`;\n\n\t\tRuntime.loadExtension('ui.graph.circle').then((exports) => {\n\t\t\tconst { Circle } = exports;\n\t\t\tthis.#circle = new Circle(efficiencyNode, 100, this.#groupData.efficiency, null, null);\n\t\t\tthis.#circle.show();\n\t\t});\n\n\t\treturn efficiencyNode;\n\t}\n\n\t#renderAccess(): HTMLElement\n\t{\n\t\tconst canEdit = this.#groupData.actions.canEditFeatures;\n\n\t\tconst rolesNode = Tag.render`\n\t\t\t<div class=\"sn-group-settings__footer-button ${canEdit ? '' : '--disabled'}\">\n\t\t\t\t<div class=\"ui-icon-set --lock\"></div>\n\t\t\t\t<div>${Loc.getMessage('SN_GROUP_SETTINGS_MENU_ROLES')}</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tif (canEdit)\n\t\t{\n\t\t\tEvent.bind(rolesNode, 'click', () => Controller.openGroupFeatures());\n\t\t}\n\n\t\treturn rolesNode;\n\t}\n\n\t#renderSettings(): HTMLElement\n\t{\n\t\tconst canEdit = this.#groupData.actions.canEdit;\n\n\t\tconst settingsNode = Tag.render`\n\t\t\t<div class=\"sn-group-settings__footer-button ${canEdit ? '' : '--disabled'}\">\n\t\t\t\t<div class=\"ui-icon-set --settings-4\"></div>\n\t\t\t\t<div>${Loc.getMessage('SN_GROUP_SETTINGS_SPACE_SETTINGS')}</div>\n\t\t\t</div>\n\t\t`;\n\n\t\tif (canEdit)\n\t\t{\n\t\t\tEvent.bind(settingsNode, 'click', this.#openSpaceSettings.bind(this));\n\t\t}\n\n\t\treturn settingsNode;\n\t}\n\n\t#openSpaceSettings(): void\n\t{\n\t\tnew SpaceSettings({\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tspaceId: this.#groupData.id,\n\t\t}).openInSlider();\n\t}\n}\n"],"names":["PullRequests","EventEmitter","constructor","groupId","setEventNamespace","parseInt","getModuleId","getMap","workgroup_update","bind","workgroup_user_add","workgroup_user_delete","workgroup_user_update","data","params","GROUP_ID","emit","EditDescription","render","descriptionContainer","Tag","descriptionText","canEdit","descriptionEditButton","Event","descriptionTextarea","Text","encode","description","event","key","Dom","addClass","focus","setSelectionRange","removeClass","value","trim","innerHTML","append","onChange","Type","isStringFilled","Loc","getMessage","style","height","scrollHeight","EditPrivacy","privacyText","getLabel","privacy","setPrivacy","privacyCode","innerText","privacyPopup","GroupPrivacy","subscribe","show","target","baseEvent","getData","EditTitle","editTitleContainer","setTitle","title","editTitleInput","name","titleText","editTitleButton","scrollTo","left","scrollWidth","behavior","EditAvatar","logo","Logo","avatarNode","getClass","avatar","replaceWith","setAvatar","id","type","avatarEdit","AvatarEditor","enableCamera","file","getCompatData","URL","createObjectURL","ActionsButton","getMenuItems","length","button","Button","text","color","ButtonColor","SUCCESS","size","ButtonSize","MEDIUM","dropdown","round","onclick","menu","Menu","getRandom","bindElement","closeByEsc","actions","canPin","addMenuItem","dataset","item","isPin","setText","pinChanged","close","canFollow","isSubscribed","followChanged","canLeave","leave","delete","action","message","okCaption","popup","Popup","content","buttons","SMALL","DANGER","events","click","LIGHT_BORDER","minHeight","minWidth","maxWidth","animation","MembersSection","setMembers","listOfMembers","owner","find","member","isOwner","moderators","filter","isModerator","members","wrap","photo","lastName","position","maxModerators","moreModerators","slice","map","moderator","count","moreModeratorsNode","onShowMembers","userId","maxMembersCount","iconClass","className","EXTRA_SMALL","role","usersNode","ThemeSliderAdjuster","bindSliderEvents","checkSlider","BX","SidePanel","Instance","getTopSlider","MutationObserver","theme","Intranet","Bitrix24","ThemePicker","Singleton","getAppliedThemeId","themeStyles","document","head","querySelectorAll","Promise","all","link","resolve","then","observe","childList","subtree","backgroundNode","mainThemeVideo","attr","remove","clean","mainVideo","querySelector","pausePlayEventsBinded","addEventListener","sliderVideo","currentTime","pause","play","themeNode","mainStyles","getComputedStyle","body","backgroundColor","backgroundImage","backgroundSize","copiedThemeVideo","cloneNode","copiedVideo","paused","sliderWidth","offsetWidth","getContainer","contains","themeBackgroundContainer","prepend","getElementById","Feature","getName","getIcon","renderContent","node","headerElement","toolsMore","console","log","toggleClass","Tools","features","availableFeaturesList","Set","availableFeatures","feature","has","featureName","isUndefined","Map","forEach","set","values","customName","featureCustom","switcherToggle","switcherContainer","editButton","refreshButton","inputFeature","switcher","Switcher","checked","active","handlers","toggled","check","featureId","Controller","changeFeature","get","Tags","selector","container","selectorContainer","renderSelector","saveTags","selectedTags","tags","push","changeTags","tagSelector","TagSelector","addButtonCaption","addButtonCaptionMore","dialogOptions","width","offsetLeft","compactView","preload","context","searchTabOptions","stubOptions","subtitle","arrow","entities","options","searchOptions","allowCreateItem","footerOptions","label","getTarget","getSelectedItems","searchQuery","getQuery","toLowerCase","dialog","setTimeout","tagsList","split","tag","addItem","entityId","tabs","select","renderTo","SpaceSettings","openInSlider","open","cacheable","contentCallback","getGroupData","spaceId","groupData","onLoad","uiStyles","Label","LabelColor","PRIMARY","fill","GroupSettings","SLIDER_WIDTH","encodeURI","slider","spaceSettingsSliderId","getOverlay","onBeforeCloseComplete","stop","pullRequests","Pull","editAvatar","editTitle","editPrivacy","membersSection","dependOnTheme","showDialog","actionsButton","changePin","setSubscription","leaveGroup","openCommonSpace","deleteGroup","response","errorMessage","MessageBox","MessageBoxButtons","OK","updatePhoto","changeTitle","changePrivacy","editDescription","changeDescription","openGroupUsers","dateCreate","isNumber","efficiency","efficiencyHelper","top","Helper","efficiencyNode","Runtime","loadExtension","exports","Circle","canEditFeatures","rolesNode","openGroupFeatures","settingsNode"],"mappings":"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"}