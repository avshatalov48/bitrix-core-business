{"version":3,"file":"logger.bundle.js","sources":["../src/logger.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Logger class\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2019 Bitrix\n */\n\nclass Logger\n{\n\t#types = {};\n\t#config = {};\n\t#custom = {};\n\n\tconstructor()\n\t{\n\t\tthis.#types = {\n\t\t\tdesktop: true,\n\t\t\tlog: false,\n\t\t\tinfo: false,\n\t\t\twarn: false,\n\t\t\terror: true,\n\t\t\ttrace: true,\n\t\t};\n\n\t\tthis.#config = this.#types;\n\n\t\tthis.__load();\n\t}\n\n\tsetConfig(types)\n\t{\n\t\tfor (let type in types)\n\t\t{\n\t\t\tif (\n\t\t\t\ttypes.hasOwnProperty(type)\n\t\t\t\t&& typeof this.#types[type] !== 'undefined'\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.#types[type] = !!types[type];\n\t\t\t\tthis.#config[type] = !!types[type];\n\t\t\t}\n\t\t}\n\n\t\tthis.__load();\n\t}\n\n\tenable(type)\n\t{\n\t\tif (typeof this.#types[type] === 'undefined')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.#types[type] = true;\n\t\tthis.#custom[type] = true;\n\n\t\tthis.__save();\n\n\t\treturn true;\n\t}\n\n\tdisable(type)\n\t{\n\t\tif (typeof this.#types[type] === 'undefined')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.#types[type] = false;\n\t\tthis.#custom[type] = false;\n\n\t\tthis.__save();\n\n\t\treturn true;\n\t}\n\n\tisEnabled(type)\n\t{\n\t\treturn this.#types[type] === true;\n\t}\n\n\tdesktop(...params)\n\t{\n\t\tif (this.isEnabled('desktop'))\n\t\t{\n\t\t\tconsole.log(...[...this.__getStyles('desktop'), ...params]);\n\t\t}\n\t}\n\n\tlog(...params)\n\t{\n\t\tif (this.isEnabled('log'))\n\t\t{\n\t\t\tconsole.log(...[...this.__getStyles('log'), ...params]);\n\t\t}\n\t}\n\n\tinfo(...params)\n\t{\n\t\tif (this.isEnabled('info'))\n\t\t{\n\t\t\tconsole.info(...[...this.__getStyles('info'), ...params]);\n\t\t}\n\t}\n\n\twarn(...params)\n\t{\n\t\tif (this.isEnabled('warn'))\n\t\t{\n\t\t\tconsole.warn(...[...this.__getStyles('warn'), ...params]);\n\t\t}\n\t}\n\n\terror(...params)\n\t{\n\t\tif (this.isEnabled('error'))\n\t\t{\n\t\t\tconsole.error(...[...this.__getStyles('error'), ...params]);\n\t\t}\n\t}\n\n\ttrace(...params)\n\t{\n\t\tif (this.isEnabled('trace'))\n\t\t{\n\t\t\tconsole.trace(...params);\n\t\t}\n\t}\n\n\t__save()\n\t{\n\t\tif (typeof window.localStorage !== 'undefined')\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tlet custom = {};\n\t\t\t\tfor (let type in this.#custom)\n\t\t\t\t{\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.#custom.hasOwnProperty(type)\n\t\t\t\t\t\t&& this.#config[type] !== this.#custom[type]\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tcustom[type] = !!this.#custom[type];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconsole.warn(JSON.stringify(custom));\n\n\t\t\t\twindow.localStorage.setItem('bx-messenger-logger', JSON.stringify(custom));\n\t\t\t}\n\t\t\tcatch(e) {}\n\t\t}\n\t}\n\n\t__load()\n\t{\n\t\tif (typeof window.localStorage !== 'undefined')\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tlet custom = window.localStorage.getItem('bx-messenger-logger');\n\t\t\t\tif (typeof custom === 'string')\n\t\t\t\t{\n\t\t\t\t\tthis.#custom = JSON.parse(custom);\n\t\t\t\t\tthis.#types = {...this.#types, ...this.#custom};\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch(e) {}\n\t\t}\n\t}\n\n\t__getStyles(type = 'all')\n\t{\n\t\tconst styles = {\n\t\t\t'desktop': [\"%cDESKTOP\", \"color: white; font-style: italic; background-color: #29619b; padding: 0 6\\px\"],\n\t\t\t'log': [\"%cLOG\", \"color: #2a323b; font-style: italic; background-color: #ccc; padding: 0 6\\px\"],\n\t\t\t'info': [\"%cINFO\", \"color: #fff; font-style: italic; background-color: #6b7f96; padding: 0 6\\px\"],\n\t\t\t'warn': [\"%cWARNING\", \"color: white; font-style: italic; padding: 0 6\\px; border: 1px solid #f0a74f\"],\n\t\t\t'error': [\"%cERROR\", \"color: white; font-style: italic; padding: 0 6\\px; border: 1px solid #8a3232\"],\n\t\t};\n\n\t\tif (type === 'all')\n\t\t{\n\t\t\treturn styles;\n\t\t}\n\n\t\tif (styles[type])\n\t\t{\n\t\t\treturn styles[type];\n\t\t}\n\n\t\treturn [];\n\t}\n\n\t__getRemoveString()\n\t{\n\t\tconst styles = this.__getStyles();\n\t\tconst result = [];\n\t\tfor (let type in styles)\n\t\t{\n\t\t\tif (styles.hasOwnProperty(type))\n\t\t\t{\n\t\t\t\tresult.push(styles[type][1]);\n\t\t\t}\n\t\t}\n\t\treturn result;\n\t}\n}\n\nlet logger = new Logger();\n\nexport {logger as Logger};"],"names":["Logger","desktop","log","info","warn","error","trace","__load","types","type","hasOwnProperty","__save","isEnabled","params","console","__getStyles","window","localStorage","custom","JSON","stringify","setItem","e","getItem","parse","styles","result","push","logger"],"mappings":";;;;;;;;;;;CAAA;;;;;;;;KASMA;CAML,oBACA;CAAA;;CAAA;CAAA;CAAA,aALS;CAKT;;CAAA;CAAA;CAAA,aAJU;CAIV;;CAAA;CAAA;CAAA,aAHU;CAGV;;CACC,oDAAc;CACbC,MAAAA,OAAO,EAAE,IADI;CAEbC,MAAAA,GAAG,EAAE,KAFQ;CAGbC,MAAAA,IAAI,EAAE,KAHO;CAIbC,MAAAA,IAAI,EAAE,KAJO;CAKbC,MAAAA,KAAK,EAAE,IALM;CAMbC,MAAAA,KAAK,EAAE;CANM,KAAd;CASA,uFAAe,IAAf;;CAEA,SAAKC,MAAL;CACA;;;;+BAESC,OACV;CACC,WAAK,IAAIC,IAAT,IAAiBD,KAAjB,EACA;CACC,YACCA,KAAK,CAACE,cAAN,CAAqBD,IAArB,KACG,OAAO,gDAAYA,IAAZ,CAAP,KAA6B,WAFjC,EAIA;CACC,0DAAYA,IAAZ,IAAoB,CAAC,CAACD,KAAK,CAACC,IAAD,CAA3B;CACA,2DAAaA,IAAb,IAAqB,CAAC,CAACD,KAAK,CAACC,IAAD,CAA5B;CACA;CACD;;CAED,WAAKF,MAAL;CACA;;;4BAEME,MACP;CACC,UAAI,OAAO,gDAAYA,IAAZ,CAAP,KAA6B,WAAjC,EACA;CACC,eAAO,KAAP;CACA;;CAED,sDAAYA,IAAZ,IAAoB,IAApB;CACA,uDAAaA,IAAb,IAAqB,IAArB;;CAEA,WAAKE,MAAL;;CAEA,aAAO,IAAP;CACA;;;6BAEOF,MACR;CACC,UAAI,OAAO,gDAAYA,IAAZ,CAAP,KAA6B,WAAjC,EACA;CACC,eAAO,KAAP;CACA;;CAED,sDAAYA,IAAZ,IAAoB,KAApB;CACA,uDAAaA,IAAb,IAAqB,KAArB;;CAEA,WAAKE,MAAL;;CAEA,aAAO,IAAP;CACA;;;+BAESF,MACV;CACC,aAAO,gDAAYA,IAAZ,MAAsB,IAA7B;CACA;;;+BAGD;CACC,UAAI,KAAKG,SAAL,CAAe,SAAf,CAAJ,EACA;CAAA;;CAAA,0CAHUC,MAGV;CAHUA,UAAAA,MAGV;CAAA;;CACC,oBAAAC,OAAO,EAACZ,GAAR,0DAAmB,KAAKa,WAAL,CAAiB,SAAjB,CAAnB,GAAmDF,MAAnD;CACA;CACD;;;2BAGD;CACC,UAAI,KAAKD,SAAL,CAAe,KAAf,CAAJ,EACA;CAAA;;CAAA,2CAHMC,MAGN;CAHMA,UAAAA,MAGN;CAAA;;CACC,qBAAAC,OAAO,EAACZ,GAAR,2DAAmB,KAAKa,WAAL,CAAiB,KAAjB,CAAnB,GAA+CF,MAA/C;CACA;CACD;;;4BAGD;CACC,UAAI,KAAKD,SAAL,CAAe,MAAf,CAAJ,EACA;CAAA;;CAAA,2CAHOC,MAGP;CAHOA,UAAAA,MAGP;CAAA;;CACC,qBAAAC,OAAO,EAACX,IAAR,2DAAoB,KAAKY,WAAL,CAAiB,MAAjB,CAApB,GAAiDF,MAAjD;CACA;CACD;;;4BAGD;CACC,UAAI,KAAKD,SAAL,CAAe,MAAf,CAAJ,EACA;CAAA;;CAAA,2CAHOC,MAGP;CAHOA,UAAAA,MAGP;CAAA;;CACC,qBAAAC,OAAO,EAACV,IAAR,2DAAoB,KAAKW,WAAL,CAAiB,MAAjB,CAApB,GAAiDF,MAAjD;CACA;CACD;;;6BAGD;CACC,UAAI,KAAKD,SAAL,CAAe,OAAf,CAAJ,EACA;CAAA;;CAAA,2CAHQC,MAGR;CAHQA,UAAAA,MAGR;CAAA;;CACC,qBAAAC,OAAO,EAACT,KAAR,2DAAqB,KAAKU,WAAL,CAAiB,OAAjB,CAArB,GAAmDF,MAAnD;CACA;CACD;;;6BAGD;CACC,UAAI,KAAKD,SAAL,CAAe,OAAf,CAAJ,EACA;CAAA;;CACC,qBAAAE,OAAO,EAACR,KAAR;CACA;CACD;;;8BAGD;CACC,UAAI,OAAOU,MAAM,CAACC,YAAd,KAA+B,WAAnC,EACA;CACC,YACA;CACC,cAAIC,MAAM,GAAG,EAAb;;CACA,eAAK,IAAIT,IAAT,sCAAiB,IAAjB,YACA;CACC,gBACC,iDAAaC,cAAb,CAA4BD,IAA5B,KACG,iDAAaA,IAAb,MAAuB,iDAAaA,IAAb,CAF3B,EAIA;CACCS,cAAAA,MAAM,CAACT,IAAD,CAAN,GAAe,CAAC,CAAC,iDAAaA,IAAb,CAAjB;CACA;CACD;;CAEDK,UAAAA,OAAO,CAACV,IAAR,CAAae,IAAI,CAACC,SAAL,CAAeF,MAAf,CAAb;CAEAF,UAAAA,MAAM,CAACC,YAAP,CAAoBI,OAApB,CAA4B,qBAA5B,EAAmDF,IAAI,CAACC,SAAL,CAAeF,MAAf,CAAnD;CACA,SAjBD,CAkBA,OAAMI,CAAN,EAAS;CACT;CACD;;;8BAGD;CACC,UAAI,OAAON,MAAM,CAACC,YAAd,KAA+B,WAAnC,EACA;CACC,YACA;CACC,cAAIC,MAAM,GAAGF,MAAM,CAACC,YAAP,CAAoBM,OAApB,CAA4B,qBAA5B,CAAb;;CACA,cAAI,OAAOL,MAAP,KAAkB,QAAtB,EACA;CACC,6DAAeC,IAAI,CAACK,KAAL,CAAWN,MAAX,CAAf;CACA,4HAAkB,IAAlB,6CAAkC,IAAlC;CACA;CACD,SARD,CASA,OAAMI,CAAN,EAAS;CACT;CACD;;;mCAGD;CAAA,UADYb,IACZ,uEADmB,KACnB;CACC,UAAMgB,MAAM,GAAG;CACd,mBAAW,CAAC,WAAD,EAAc,8EAAd,CADG;CAEd,eAAO,CAAC,OAAD,EAAU,6EAAV,CAFO;CAGd,gBAAQ,CAAC,QAAD,EAAW,6EAAX,CAHM;CAId,gBAAQ,CAAC,WAAD,EAAc,8EAAd,CAJM;CAKd,iBAAS,CAAC,SAAD,EAAY,8EAAZ;CALK,OAAf;;CAQA,UAAIhB,IAAI,KAAK,KAAb,EACA;CACC,eAAOgB,MAAP;CACA;;CAED,UAAIA,MAAM,CAAChB,IAAD,CAAV,EACA;CACC,eAAOgB,MAAM,CAAChB,IAAD,CAAb;CACA;;CAED,aAAO,EAAP;CACA;;;yCAGD;CACC,UAAMgB,MAAM,GAAG,KAAKV,WAAL,EAAf;;CACA,UAAMW,MAAM,GAAG,EAAf;;CACA,WAAK,IAAIjB,IAAT,IAAiBgB,MAAjB,EACA;CACC,YAAIA,MAAM,CAACf,cAAP,CAAsBD,IAAtB,CAAJ,EACA;CACCiB,UAAAA,MAAM,CAACC,IAAP,CAAYF,MAAM,CAAChB,IAAD,CAAN,CAAa,CAAb,CAAZ;CACA;CACD;;CACD,aAAOiB,MAAP;CACA;;;;;AAGF,KAAIE,MAAM,GAAG,IAAI5B,MAAJ,EAAb;;;;;;;;"}