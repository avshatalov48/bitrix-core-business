this.BX=this.BX||{};this.BX.UI=this.BX.UI||{};(function(e,s,a,l,t){"use strict";const i={LOW:1,NORMAL:2,HIGH:3,CRITICAL:4};const r={IDLE:"idle",RUNNING:"running",DONE:"done"};var o=babelHelpers.classPrivateFieldLooseKey("id");var b=babelHelpers.classPrivateFieldLooseKey("callback");var n=babelHelpers.classPrivateFieldLooseKey("priority");var c=babelHelpers.classPrivateFieldLooseKey("delay");var d=babelHelpers.classPrivateFieldLooseKey("allowLaunchAfterOthers");var p=babelHelpers.classPrivateFieldLooseKey("forceShowOnTop");var u=babelHelpers.classPrivateFieldLooseKey("state");var v=babelHelpers.classPrivateFieldLooseKey("context");class h extends t.EventEmitter{constructor(e){super();Object.defineProperty(this,o,{writable:true,value:null});Object.defineProperty(this,b,{writable:true,value:null});Object.defineProperty(this,n,{writable:true,value:i.NORMAL});Object.defineProperty(this,c,{writable:true,value:5e3});Object.defineProperty(this,d,{writable:true,value:false});Object.defineProperty(this,p,{writable:true,value:false});Object.defineProperty(this,u,{writable:true,value:r.IDLE});Object.defineProperty(this,v,{writable:true,value:{}});const s=l.Type.isPlainObject(e)?e:{};if(!l.Type.isFunction(s.callback)){throw new TypeError('BX.Launcher: "callback" parameter is required.')}babelHelpers.classPrivateFieldLooseBase(this,b)[b]=s.callback;babelHelpers.classPrivateFieldLooseBase(this,o)[o]=l.Type.isStringFilled(s.id)?s.id:`launch-item-${BX.Text.getRandom().toLowerCase()}`;babelHelpers.classPrivateFieldLooseBase(this,n)[n]=l.Type.isNumber(s.priority)?s.priority:babelHelpers.classPrivateFieldLooseBase(this,n)[n];babelHelpers.classPrivateFieldLooseBase(this,c)[c]=l.Type.isNumber(s.delay)&&s.delay>=0?s.delay:babelHelpers.classPrivateFieldLooseBase(this,c)[c];babelHelpers.classPrivateFieldLooseBase(this,d)[d]=s.allowLaunchAfterOthers===true;babelHelpers.classPrivateFieldLooseBase(this,p)[p]=l.Type.isBoolean(s.forceShowOnTop)||l.Type.isFunction(s.forceShowOnTop)?s.forceShowOnTop:babelHelpers.classPrivateFieldLooseBase(this,p)[p];babelHelpers.classPrivateFieldLooseBase(this,v)[v]=l.Type.isPlainObject(s.context)?s.context:{};this.setEventNamespace("BX.Main.Launcher.Item")}launch(e){if(babelHelpers.classPrivateFieldLooseBase(this,u)[u]!==r.IDLE){return}babelHelpers.classPrivateFieldLooseBase(this,u)[u]=r.RUNNING;const s=()=>{babelHelpers.classPrivateFieldLooseBase(this,u)[u]=r.DONE;e()};babelHelpers.classPrivateFieldLooseBase(this,b)[b](s)}getId(){return babelHelpers.classPrivateFieldLooseBase(this,o)[o]}getState(){return babelHelpers.classPrivateFieldLooseBase(this,u)[u]}getPriority(){return babelHelpers.classPrivateFieldLooseBase(this,n)[n]}getDelay(){return babelHelpers.classPrivateFieldLooseBase(this,c)[c]}getContext(){return babelHelpers.classPrivateFieldLooseBase(this,v)[v]}canLaunchAfterOthers(){return babelHelpers.classPrivateFieldLooseBase(this,d)[d]}canShowOnTop(){if(l.Type.isFunction(babelHelpers.classPrivateFieldLooseBase(this,p)[p])){return babelHelpers.classPrivateFieldLooseBase(this,p)[p]()}return babelHelpers.classPrivateFieldLooseBase(this,p)[p]}}const P={IDLE:"idle",WAITING_READY:"waiting_ready",READY:"ready"};var L=babelHelpers.classPrivateFieldLooseKey("enabled");var F=babelHelpers.classPrivateFieldLooseKey("queue");var H=babelHelpers.classPrivateFieldLooseKey("currentItem");var B=babelHelpers.classPrivateFieldLooseKey("state");var f=babelHelpers.classPrivateFieldLooseKey("documentReady");var y=babelHelpers.classPrivateFieldLooseKey("launchCount");var w=babelHelpers.classPrivateFieldLooseKey("launchTimeoutId");var O=babelHelpers.classPrivateFieldLooseKey("startDebounced");var g=babelHelpers.classPrivateFieldLooseKey("hasOpenPopup");var I=babelHelpers.classPrivateFieldLooseKey("hasOpenSlider");var T=babelHelpers.classPrivateFieldLooseKey("hasOverlayDialog");var m=babelHelpers.classPrivateFieldLooseKey("hasOpenViewer");var E=babelHelpers.classPrivateFieldLooseKey("start");var j=babelHelpers.classPrivateFieldLooseKey("tryDequeue");class D{constructor(){Object.defineProperty(this,j,{value:R});Object.defineProperty(this,E,{value:C});Object.defineProperty(this,L,{writable:true,value:true});Object.defineProperty(this,F,{writable:true,value:null});Object.defineProperty(this,H,{writable:true,value:null});Object.defineProperty(this,B,{writable:true,value:P.IDLE});Object.defineProperty(this,f,{writable:true,value:false});Object.defineProperty(this,y,{writable:true,value:0});Object.defineProperty(this,w,{writable:true,value:null});Object.defineProperty(this,O,{writable:true,value:null});babelHelpers.classPrivateFieldLooseBase(this,F)[F]=new s.OrderedArray(((e,s)=>{const a=s.getPriority()-e.getPriority();return a===0?-1:a}));babelHelpers.classPrivateFieldLooseBase(this,O)[O]=l.Runtime.debounce(babelHelpers.classPrivateFieldLooseBase(this,E)[E],1e3,this)}static canShowOnTop(e={}){return!babelHelpers.classPrivateFieldLooseBase(this,g)[g]()&&!babelHelpers.classPrivateFieldLooseBase(this,I)[I](e)&&!babelHelpers.classPrivateFieldLooseBase(this,T)[T]()&&!babelHelpers.classPrivateFieldLooseBase(this,m)[m]()}register(e,s={}){const a=new h({callback:e,...s});babelHelpers.classPrivateFieldLooseBase(this,F)[F].add(a);babelHelpers.classPrivateFieldLooseBase(this,O)[O]()}unregister(e){for(const s of babelHelpers.classPrivateFieldLooseBase(this,F)[F]){if(s.getId()===e){babelHelpers.classPrivateFieldLooseBase(this,F)[F].delete(s);break}}if(babelHelpers.classPrivateFieldLooseBase(this,H)[H]!==null&&babelHelpers.classPrivateFieldLooseBase(this,H)[H].getId()===e){babelHelpers.classPrivateFieldLooseBase(this,j)[j]()}}isEnabled(){return babelHelpers.classPrivateFieldLooseBase(this,L)[L]}enable(){babelHelpers.classPrivateFieldLooseBase(this,L)[L]=true;babelHelpers.classPrivateFieldLooseBase(this,O)[O]()}disable(){babelHelpers.classPrivateFieldLooseBase(this,L)[L]=false;babelHelpers.classPrivateFieldLooseBase(this,B)[B]=P.IDLE}}function K(){const e=l.Reflection.getClass("BX.Main.PopupManager");if(e){const s=e.getPopups();for(const e of s){if(!e.isShown()){continue}if(e.getId().startsWith("timeman_weekly_report_popup_")||e.getId().startsWith("timeman_daily_report_popup_")||BX.Dom.hasClass(e.getPopupContainer(),"b24-whatsnew__popup")){return true}}}return false}function S(e){const s=l.Reflection.getClass("BX.SidePanel.Instance");if(s){var a;const l=s.getTopSlider();if(l===null||l===e.slider||l.getUrl()===e.sliderId){return false}const t=window!==window.top;const i=t&&((a=s.getTopSlider())==null?void 0:a.getWindow())===window;if(!i&&s.getOpenSlidersCount()>0){return true}}return false}function X(){const e=a.ZIndexManager.getStack(document.body);const s=e===null?[]:e.getComponents();for(const e of s){if(e.getOverlay()!==null&&e.getOverlay().offsetWidth>0){return true}}return false}function A(){const e=l.Reflection.getClass("BX.UI.Viewer.Instance");return e!==null&&e.isOpen()}function C(){if(!this.isEnabled()||babelHelpers.classPrivateFieldLooseBase(this,B)[B]!==P.IDLE){return}const e=()=>{babelHelpers.classPrivateFieldLooseBase(this,f)[f]=true;babelHelpers.classPrivateFieldLooseBase(this,B)[B]=P.READY;setTimeout((()=>{babelHelpers.classPrivateFieldLooseBase(this,j)[j]()}),1e3)};if(babelHelpers.classPrivateFieldLooseBase(this,f)[f]){e()}else{babelHelpers.classPrivateFieldLooseBase(this,B)[B]=P.WAITING_READY;if(l.Type.isUndefined(window.frameCacheVars)){l.Event.ready(e)}else{var s,a;const i=((s=BX)==null?void 0:(a=s.frameCache)==null?void 0:a.frameDataInserted)===true||!l.Type.isUndefined(window.frameRequestFail);if(i){e()}else{t.EventEmitter.subscribe("onFrameDataProcessed",e);t.EventEmitter.subscribe("onFrameDataRequestFail",e)}}}}function R(){clearTimeout(babelHelpers.classPrivateFieldLooseBase(this,w)[w]);babelHelpers.classPrivateFieldLooseBase(this,H)[H]=babelHelpers.classPrivateFieldLooseBase(this,F)[F].getFirst();if(babelHelpers.classPrivateFieldLooseBase(this,H)[H]===null){return}babelHelpers.classPrivateFieldLooseBase(this,F)[F].delete(babelHelpers.classPrivateFieldLooseBase(this,H)[H]);if(!babelHelpers.classPrivateFieldLooseBase(this,H)[H].canLaunchAfterOthers()&&babelHelpers.classPrivateFieldLooseBase(this,y)[y]>0){babelHelpers.classPrivateFieldLooseBase(this,j)[j]()}else if(this.constructor.canShowOnTop(babelHelpers.classPrivateFieldLooseBase(this,H)[H].getContext())||babelHelpers.classPrivateFieldLooseBase(this,H)[H].canShowOnTop()){babelHelpers.classPrivateFieldLooseBase(this,w)[w]=setTimeout((()=>{if(this.constructor.canShowOnTop(babelHelpers.classPrivateFieldLooseBase(this,H)[H].getContext())||babelHelpers.classPrivateFieldLooseBase(this,H)[H].canShowOnTop()){babelHelpers.classPrivateFieldLooseBase(this,y)[y]++;babelHelpers.classPrivateFieldLooseBase(this,H)[H].launch((()=>{babelHelpers.classPrivateFieldLooseBase(this,j)[j]()}))}else{babelHelpers.classPrivateFieldLooseBase(this,j)[j]()}}),babelHelpers.classPrivateFieldLooseBase(this,H)[H].getDelay())}else{babelHelpers.classPrivateFieldLooseBase(this,j)[j]()}}Object.defineProperty(D,m,{value:A});Object.defineProperty(D,T,{value:X});Object.defineProperty(D,I,{value:S});Object.defineProperty(D,g,{value:K});const N=new D;e.AutoLauncher=N;e.Launcher=D;e.LaunchItem=h;e.LaunchPriority=i})(this.BX.UI.AutoLaunch=this.BX.UI.AutoLaunch||{},BX.Collections,BX,BX,BX.Event);
//# sourceMappingURL=auto-launch.bundle.map.js