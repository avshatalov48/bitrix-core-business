{"version":3,"file":"init.bundle.js","sources":["../src/init.js"],"sourcesContent":["import { Core } from 'im.v2.application.core';\nimport { CallManager } from 'im.v2.lib.call';\nimport { PhoneManager } from 'im.v2.lib.phone';\nimport { SmileManager } from 'im.v2.lib.smile-manager';\nimport { UserManager } from 'im.v2.lib.user';\nimport { CounterManager } from 'im.v2.lib.counter';\nimport { Logger } from 'im.v2.lib.logger';\nimport { NotifierManager } from 'im.v2.lib.notifier';\nimport { MarketManager } from 'im.v2.lib.market';\nimport { DesktopManager } from 'im.v2.lib.desktop';\nimport { PromoManager } from 'im.v2.lib.promo';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { UpdateStateManager } from 'im.v2.lib.update-state.manager';\n\nexport class InitManager\n{\n\tstatic #started: boolean = false;\n\n\tstatic start()\n\t{\n\t\tif (this.#started)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#initLogger();\n\t\tLogger.warn('InitManager: start');\n\t\tthis.#initCurrentUser();\n\t\tthis.#initSettings();\n\n\t\tCounterManager.init();\n\t\tPermissionManager.init();\n\t\tPromoManager.init();\n\t\tMarketManager.init();\n\t\tPhoneManager.init();\n\t\tCallManager.init();\n\t\tSmileManager.init();\n\t\tNotifierManager.init();\n\t\tDesktopManager.init();\n\t\tUpdateStateManager.init();\n\n\t\tthis.#started = true;\n\t}\n\n\tstatic #initCurrentUser()\n\t{\n\t\tconst { currentUser } = Core.getApplicationData();\n\t\tif (!currentUser)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tnew UserManager().setUsersToModel([currentUser]);\n\t}\n\n\tstatic #initLogger()\n\t{\n\t\tconst { loggerConfig } = Core.getApplicationData();\n\t\tif (!loggerConfig)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tLogger.setConfig(loggerConfig);\n\t}\n\n\tstatic #initSettings()\n\t{\n\t\tconst { settings } = Core.getApplicationData();\n\t\tif (!settings)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tLogger.warn('InitManager: settings', settings);\n\t\tCore.getStore().dispatch('application/settings/set', settings);\n\t}\n}\n"],"names":["InitManager","start","Logger","warn","CounterManager","init","PermissionManager","PromoManager","MarketManager","PhoneManager","CallManager","SmileManager","NotifierManager","DesktopManager","UpdateStateManager","currentUser","Core","getApplicationData","UserManager","setUsersToModel","loggerConfig","setConfig","settings","getStore","dispatch"],"mappings":";;;;;;;CAYoE;CAAA;CAAA;CAAA;AAEpE,CAAO,MAAMA,WAAW,CACxB;GAGC,OAAOC,KAAK,GACZ;KACC,4CAAI,IAAI,uBACR;OACC;;KAGD,4CAAI;KACJC,uBAAM,CAACC,IAAI,CAAC,oBAAoB,CAAC;KACjC,4CAAI;KACJ,4CAAI;KAEJC,gCAAc,CAACC,IAAI,EAAE;KACrBC,sCAAiB,CAACD,IAAI,EAAE;KACxBE,4BAAY,CAACF,IAAI,EAAE;KACnBG,8BAAa,CAACH,IAAI,EAAE;KACpBI,4BAAY,CAACJ,IAAI,EAAE;KACnBK,0BAAW,CAACL,IAAI,EAAE;KAClBM,mCAAY,CAACN,IAAI,EAAE;KACnBO,kCAAe,CAACP,IAAI,EAAE;KACtBQ,gCAAc,CAACR,IAAI,EAAE;KACrBS,gDAAkB,CAACT,IAAI,EAAE;KAEzB,4CAAI,wBAAY,IAAI;;CAoCtB;CAAC,6BAhCA;GACC,MAAM;KAAEU;IAAa,GAAGC,2BAAI,CAACC,kBAAkB,EAAE;GACjD,IAAI,CAACF,WAAW,EAChB;KACC;;GAGD,IAAIG,0BAAW,EAAE,CAACC,eAAe,CAAC,CAACJ,WAAW,CAAC,CAAC;CACjD;CAAC,wBAGD;GACC,MAAM;KAAEK;IAAc,GAAGJ,2BAAI,CAACC,kBAAkB,EAAE;GAClD,IAAI,CAACG,YAAY,EACjB;KACC;;GAGDlB,uBAAM,CAACmB,SAAS,CAACD,YAAY,CAAC;CAC/B;CAAC,0BAGD;GACC,MAAM;KAAEE;IAAU,GAAGN,2BAAI,CAACC,kBAAkB,EAAE;GAC9C,IAAI,CAACK,QAAQ,EACb;KACC;;GAGDpB,uBAAM,CAACC,IAAI,CAAC,uBAAuB,EAAEmB,QAAQ,CAAC;GAC9CN,2BAAI,CAACO,QAAQ,EAAE,CAACC,QAAQ,CAAC,0BAA0B,EAAEF,QAAQ,CAAC;CAC/D;CAAC,sBA9DWtB,WAAW;GAAA;CAAA;CAAA,sBAAXA,WAAW;GAAA;CAAA;CAAA,sBAAXA,WAAW;GAAA;CAAA;CAAA,sBAAXA,WAAW;GAAA;GAAA,OAEI;CAAK;;;;;;;;"}