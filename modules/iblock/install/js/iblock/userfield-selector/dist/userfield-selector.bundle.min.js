this.BX=this.BX||{},function(e,t,i,a){"use strict";var l,s,r;function n(e,t){h(e,t),t.add(e)}function c(e,t,i){h(e,t),t.set(e,i)}function h(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function b(e,t,i){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return i}var o="iblock_section",p="iblock_element",d=new WeakMap,v=new WeakMap,u=new WeakMap,w=new WeakMap,f=new WeakMap,m=new WeakMap,H=new WeakMap,F=new WeakMap,k=new WeakMap,S=new WeakSet,P=new WeakSet,g=new WeakSet,W=new WeakSet,y=new WeakSet,G=new WeakSet,T=new WeakSet,E=new WeakSet,I=new WeakSet,M=new WeakSet,N=new WeakSet,D=function(){function e(t){babelHelpers.classCallCheck(this,e),n(this,N),n(this,M),n(this,I),n(this,E),n(this,T),n(this,G),n(this,y),n(this,W),n(this,g),n(this,P),n(this,S),c(this,d,{writable:!0,value:void 0}),c(this,v,{writable:!0,value:void 0}),c(this,u,{writable:!0,value:void 0}),c(this,w,{writable:!0,value:void 0}),c(this,f,{writable:!0,value:void 0}),c(this,m,{writable:!0,value:void 0}),c(this,H,{writable:!0,value:void 0}),c(this,F,{writable:!0,value:void 0}),c(this,k,{writable:!0,value:void 0}),babelHelpers.classPrivateFieldSet(this,d,JSON.parse(t)),b(this,S,B).call(this)}return babelHelpers.createClass(e,[{key:"renderTo",value:function(e){t.Dom.clean(e),b(this,P,X).call(this,e),b(this,W,R).call(this),b(this,y,C).call(this,e),b(this,T,U).call(this)}}]),e}();function B(){var e=babelHelpers.classPrivateFieldGet(this,d),i=e.fieldName,a=e.value,l=e.isMultiple,s=e.iblockId,r=e.type;if(!t.Type.isStringFilled(i))throw new RangeError("fieldName must be a string");if(![o,p].includes(r))throw new RangeError("type must be a ".concat(o," or ").concat(p));if(!t.Type.isNumber(s)||s<=0)throw new RangeError("iblockId must be a number and greater than 0");babelHelpers.classPrivateFieldSet(this,v,i),babelHelpers.classPrivateFieldSet(this,u,(t.Type.isArray(a)?a:[]).filter((function(e){return!Number.isNaN(e)&&e>0}))),babelHelpers.classPrivateFieldSet(this,w,!0===l),babelHelpers.classPrivateFieldSet(this,f,s),babelHelpers.classPrivateFieldSet(this,m,r)}function X(e){var i=b(this,g,L).call(this);t.Dom.append(i,e)}function L(){return babelHelpers.classPrivateFieldGet(this,F)||babelHelpers.classPrivateFieldSet(this,F,t.Tag.render(l||(l=babelHelpers.taggedTemplateLiteral(["<span></span>"])))),babelHelpers.classPrivateFieldGet(this,F)}function R(){var e=b(this,g,L).call(this);t.Dom.clean(e);var i=babelHelpers.classPrivateFieldGet(this,w)?"".concat(babelHelpers.classPrivateFieldGet(this,v),"[]"):babelHelpers.classPrivateFieldGet(this,v);(t.Type.isArrayFilled(babelHelpers.classPrivateFieldGet(this,u))?babelHelpers.classPrivateFieldGet(this,u):[null]).forEach((function(a){var l=t.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<input type="hidden" name="','" value="','">\n\t\t\t'])),i,null===a?"":Number(a));t.Dom.append(l,e)}))}function C(e){var i=b(this,G,A).call(this);t.Dom.append(i,e)}function A(){return babelHelpers.classPrivateFieldGet(this,k)||babelHelpers.classPrivateFieldSet(this,k,t.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(["<span></span>"])))),babelHelpers.classPrivateFieldGet(this,k)}function U(){var e=b(this,G,A).call(this);b(this,E,_).call(this).renderTo(e)}function _(){var e=this;return babelHelpers.classPrivateFieldGet(this,H)||babelHelpers.classPrivateFieldSet(this,H,new a.TagSelector({multiple:babelHelpers.classPrivateFieldGet(this,w),dialogOptions:{context:"USER_FIELD",preselectedItems:b(this,M,j).call(this),entities:[{id:b(this,N,x).call(this),dynamicLoad:!0,dynamicSearch:!0,options:{iblockId:babelHelpers.classPrivateFieldGet(this,f)}}],events:{"Item:onSelect":function(){b(e,I,O).call(e)},"Item:onDeselect":function(){b(e,I,O).call(e)}}}})),babelHelpers.classPrivateFieldGet(this,H)}function O(){var e=b(this,E,_).call(this).getDialog().getSelectedItems(),t=[];e.forEach((function(e){t.push(e.getId())})),babelHelpers.classPrivateFieldSet(this,u,t),b(this,W,R).call(this),i.EventEmitter.emit(this,"change",{values:t})}function j(){var e=this;return t.Runtime.clone(t.Type.isArray(babelHelpers.classPrivateFieldGet(this,u))?babelHelpers.classPrivateFieldGet(this,u):[babelHelpers.classPrivateFieldGet(this,u)]).map((function(t){return[b(e,N,x).call(e),Number(t)]}))}function x(){return babelHelpers.classPrivateFieldGet(this,m)===o?"iblock-property-section":"iblock-property-element"}e.UserFieldSelector=D}(this.BX.Iblock=this.BX.Iblock||{},BX,BX.Event,BX.UI.EntitySelector);
//# sourceMappingURL=userfield-selector.bundle.map.js