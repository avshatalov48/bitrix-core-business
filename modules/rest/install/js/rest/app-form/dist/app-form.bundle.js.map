{"version":3,"file":"app-form.bundle.js","sources":["../src/providers/provider.js","../src/providers/config-provider.js","../src/providers/event-type.js","../src/app-form.js"],"sourcesContent":["export class Provider\n{\n\tfetch(): Promise\n\t{\n\t\treturn new Promise();\n\t}\n}\n","import { ajax } from 'main.core';\nimport type { EventType } from './event-type';\nimport { Provider } from './provider';\n\nexport class ConfigProvider extends Provider\n{\n\t#clientId: string;\n\t#type: EventType;\n\n\tconstructor(clientId: string, eventType: EventType)\n\t{\n\t\tsuper();\n\t\tthis.#clientId = clientId;\n\t\tthis.#type = eventType;\n\t}\n\n\tfetch(): Promise\n\t{\n\t\treturn ajax.runAction('rest.controller.appform.getConfig', {\n\t\t\tdata: {\n\t\t\t\tclientId: this.#clientId,\n\t\t\t\ttype: this.#type,\n\t\t\t},\n\t\t});\n\t}\n}\n","export const EventType = {\n\tINSTALL: 'OnAppSettingsInstall',\n\tCHANGE: 'OnAppSettingsChange',\n\tDISPLAY: 'OnAppSettingsDisplay',\n};\n","import { ConfigProvider } from './providers/config-provider';\nimport { EventType } from './providers/event-type';\nimport { Loader } from 'main.loader';\n\nexport type FormConfig = {\n\tconfig: string\n}\n\nexport class AppForm\n{\n\t#url = '/marketplace/app/settings/';\n\t#width = 575;\n\t#options: FormConfig;\n\n\tconstructor(options: FormConfig)\n\t{\n\t\tthis.#options = options;\n\t}\n\n\tshow(): void\n\t{\n\t\ttop.BX.SidePanel.Instance.open(this.#url, {\n\t\t\twidth: this.#width,\n\t\t\trequestMethod: 'post',\n\t\t\trequestParams: this.#options,\n\t\t\tallowChangeHistory: false,\n\t\t});\n\t}\n\n\tstatic sliderLoader()\n\t{\n\t\ttop.BX.SidePanel.Instance.open('rest:app-form.loader', {\n\t\t\twidth: 575,\n\t\t\tcontentCallback: (slider) => {\n\t\t\t\tconst loader = new Loader({\n\t\t\t\t\ttarget: slider.getFrameWindow(),\n\t\t\t\t});\n\n\t\t\t\treturn loader.show();\n\t\t\t},\n\t\t\trequestMethod: 'post',\n\t\t\tallowChangeHistory: false,\n\t\t});\n\t}\n\n\tstatic buildByApp(clientId: string, eventType: EventType): Promise\n\t{\n\t\tconst provider = new ConfigProvider(clientId, eventType);\n\n\t\treturn provider.fetch().then((response) => {\n\t\t\treturn (new AppForm(response.data));\n\t\t});\n\t}\n\n\tstatic buildByAppWithLoader(clientId: string, eventType: EventType): Promise\n\t{\n\t\tconst provider = new ConfigProvider(clientId, eventType);\n\t\tAppForm.sliderLoader();\n\n\t\treturn provider.fetch().then((response) => {\n\t\t\ttop.BX.SidePanel.Instance.close(true);\n\t\t\ttop.BX.SidePanel.Instance.destroy('loader');\n\n\t\t\treturn (new AppForm(response.data));\n\t\t});\n\t}\n}\n\nexport {\n\tEventType,\n};\n"],"names":["Provider","Promise","ConfigProvider","clientId","eventType","ajax","runAction","data","type","EventType","INSTALL","CHANGE","DISPLAY","AppForm","options","_classPrivateFieldInitSpec","top","BX","SidePanel","Instance","open","width","requestMethod","requestParams","allowChangeHistory","contentCallback","slider","loader","Loader","target","getFrameWindow","show","provider","fetch","then","response","sliderLoader","close","destroy"],"mappings":";;;;;KAAaA,QAAQ;GAAA;KAAA;;GAAA;KAAA;KAAA,wBAGpB;OACC,OAAO,IAAIC,OAAO,EAAE;;;GACpB;CAAA;;;;ACLF,CAEsC;CAAA;AAEtC,KAAaC,cAAc;GAAA;GAK1B,wBAAYC,QAAgB,EAAEC,SAAoB,EAClD;KAAA;KAAA;KACC;KAAQ;OAAA;OAAA;;KAAA;OAAA;OAAA;;KACR,wFAAiBD,QAAQ;KACzB,oFAAaC,SAAS;KAAC;;GACvB;KAAA;KAAA,wBAGD;OACC,OAAOC,cAAI,CAACC,SAAS,CAAC,mCAAmC,EAAE;SAC1DC,IAAI,EAAE;WACLJ,QAAQ,oCAAE,IAAI,YAAU;WACxBK,IAAI,oCAAE,IAAI;;QAEX,CAAC;;;GACF;CAAA,EApBkCR,QAAQ;;KCJ/BS,SAAS,GAAG;GACxBC,OAAO,EAAE,sBAAsB;GAC/BC,MAAM,EAAE,qBAAqB;GAC7BC,OAAO,EAAE;CACV,CAAC;;;;ACJD,CAEqC;CAAA;CAAA;AAMrC,KAAaC,OAAO;GAMnB,iBAAYC,OAAmB,EAC/B;KAAA;KAAAC;OAAA;OAAA,OALO;;KAA4BA;OAAA;OAAA,OAC1B;;KAAGA;OAAA;OAAA;;KAKX,sCAAI,YAAYD,OAAO;;GACvB;KAAA;KAAA,uBAGD;OACCE,GAAG,CAACC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,mCAAC,IAAI,SAAO;SACzCC,KAAK,oCAAE,IAAI,SAAO;SAClBC,aAAa,EAAE,MAAM;SACrBC,aAAa,oCAAE,IAAI,WAAS;SAC5BC,kBAAkB,EAAE;QACpB,CAAC;;;KACF;KAAA,+BAGD;OACCR,GAAG,CAACC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAAC,sBAAsB,EAAE;SACtDC,KAAK,EAAE,GAAG;SACVI,eAAe,EAAE,yBAACC,MAAM,EAAK;WAC5B,IAAMC,MAAM,GAAG,IAAIC,kBAAM,CAAC;aACzBC,MAAM,EAAEH,MAAM,CAACI,cAAc;YAC7B,CAAC;WAEF,OAAOH,MAAM,CAACI,IAAI,EAAE;UACpB;SACDT,aAAa,EAAE,MAAM;SACrBE,kBAAkB,EAAE;QACpB,CAAC;;;KACF;KAAA,2BAEiBrB,QAAgB,EAAEC,SAAoB,EACxD;OACC,IAAM4B,QAAQ,GAAG,IAAI9B,cAAc,CAACC,QAAQ,EAAEC,SAAS,CAAC;OAExD,OAAO4B,QAAQ,CAACC,KAAK,EAAE,CAACC,IAAI,CAAC,UAACC,QAAQ,EAAK;SAC1C,OAAQ,IAAItB,OAAO,CAACsB,QAAQ,CAAC5B,IAAI,CAAC;QAClC,CAAC;;;KACF;KAAA,qCAE2BJ,QAAgB,EAAEC,SAAoB,EAClE;OACC,IAAM4B,QAAQ,GAAG,IAAI9B,cAAc,CAACC,QAAQ,EAAEC,SAAS,CAAC;OACxDS,OAAO,CAACuB,YAAY,EAAE;OAEtB,OAAOJ,QAAQ,CAACC,KAAK,EAAE,CAACC,IAAI,CAAC,UAACC,QAAQ,EAAK;SAC1CnB,GAAG,CAACC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACkB,KAAK,CAAC,IAAI,CAAC;SACrCrB,GAAG,CAACC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACmB,OAAO,CAAC,QAAQ,CAAC;SAE3C,OAAQ,IAAIzB,OAAO,CAACsB,QAAQ,CAAC5B,IAAI,CAAC;QAClC,CAAC;;;GACF;CAAA;;;;;;;;;"}