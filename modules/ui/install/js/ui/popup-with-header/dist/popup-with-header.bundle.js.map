{"version":3,"file":"popup-with-header.bundle.js","sources":["../src/round-player.js","../src/header-builder.js","../src/popup-header.js","../src/popup-with-header.js","../src/templates/base-template.js","../src/templates/sale-template.js"],"sourcesContent":["import { Dom, Tag, Text, Type } from 'main.core';\nimport { Loader } from 'main.loader';\nimport { ProgressRound } from 'ui.progressround'\nimport './player.css';\n\nexport type PlayerOptions = {\n\twrapper: HTMLElement,\n\twidth: number,\n\tscale: ?number,\n\tposterUrl: ?string,\n\tvideos: Array<{url: string, type: string}>,\n\tloop: boolean,\n\tautoplay: boolean,\n\tmuted: boolean,\n\tanalyticsCallback: ?Function,\n}\n\nexport class RoundPlayer\n{\n\tstatic PLAY_STATE_BACKGROUND = 'background';\n\tstatic PLAY_STATE_USER = 'user';\n\n\t#pausePlayerWidth: number;\n\t#scale: number;\n\t#videos: Array;\n\t#loop: true;\n\t#autoplay: false;\n\t#muted: true;\n\t#content: HTMLElement;\n\t#videoNode: HTMLVideoElement;\n\t#playerNode: HTMLElement;\n\t#progressBar: ProgressRound;\n\t#barPadding: number = 3;\n\t#posterUrl: string;\n\t#loader: Loader;\n\t#currentPlayState: string = RoundPlayer.PLAY_STATE_BACKGROUND;\n\t#playButton: HTMLElement;\n\t#stopButton: HTMLElement;\n\t#wrapper: HTMLElement;\n\t#analyticsCallback: ?Function;\n\n\tconstructor(options: PlayerOptions)\n\t{\n\t\tthis.#wrapper = options.wrapper;\n\t\tthis.#pausePlayerWidth = options.width ?? 86;\n\t\tthis.#scale = Type.isNumber(options.scale) ? options.scale : 1;\n\t\tthis.#videos = Type.isArrayFilled(options.videos) ? options.videos : [];\n\t\tthis.#loop = Type.isBoolean(options.loop) ? options.loop : true;\n\t\tthis.#autoplay = Type.isBoolean(options.autoplay) ? options.autoplay : true;\n\t\tthis.#muted = Type.isBoolean(options.muted) ? options.muted : true;\n\t\tthis.#posterUrl = options.posterUrl;\n\t\tthis.#analyticsCallback = Type.isFunction(options.analyticsCallback) ? options.analyticsCallback : null;\n\n\t\tthis.#playerNode = Tag.render`<div class=\"ui-popupcomponentmaker__round-player\"></div>`;\n\t\tthis.#playButton = Tag.render`<div class=\"ui-popupcomponentmaker__round-player-btn\"></div>`;\n\t\tthis.#stopButton = Tag.render`<div class=\"ui-popupcomponentmaker__round-player-btn --stop-btn\"></div>`;\n\t\tlet poster = '';\n\t\tif (Type.isStringFilled(this.#posterUrl))\n\t\t{\n\t\t\tthis.#playerNode.style.backgroundImage = 'url(\"'+Text.encode(this.#posterUrl)+'\")';\n\t\t\tposter = 'poster=\"'+Text.encode(this.#posterUrl)+'\"';\n\t\t}\n\n\t\tconst autoplay = this.#autoplay ? 'autoplay' : '';\n\t\tconst muted = this.#muted ? 'muted' : '';\n\t\tthis.#videoNode = Tag.render`<video ${poster} ${autoplay} ${muted}></video>`;\n\t\tthis.#videoNode.muted = this.#muted;\n\t\tthis.#videoNode.autoplay = this.#autoplay;\n\t\t// this.#videoNode.loop = this.#loop;\n\n\t\tthis.#loader = new Loader({\n\t\t\tsize: 40\n\t\t});\n\t\tthis.#playerNode.style.width = this.#pausePlayerWidth + 'px';\n\n\t\tthis.#videoNode.addEventListener('timeupdate', this.#onTick.bind(this));\n\t\tthis.#videoNode.addEventListener('loadedmetadata', this.#onInitVideoMetadata.bind(this));\n\t\tthis.#playerNode.addEventListener('click', this.#onClickPlayer.bind(this));\n\t\tthis.#videoNode.addEventListener('ended', this.#onVideoEnded.bind(this));\n\t\tthis.#videoNode.addEventListener('play', this.#onPlay.bind(this));\n\t\tthis.#videoNode.addEventListener('pause', this.#onPause.bind(this));\n\t\tthis.#playButton.addEventListener('click', this.#onClickPlayer.bind(this));\n\t\tthis.#stopButton.addEventListener('click', this.#onClickStopButton.bind(this));\n\n\t\tthis.#videoNode.addEventListener('canplay', () => {\n\t\t\tthis.#loader.hide();\n\t\t});\n\t\tthis.#videoNode.addEventListener('waiting', () => {\n\t\t\tthis.#loader.show(this.#playerNode);\n\t\t});\n\t}\n\n\trender()\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\n\t\tthis.#videos.forEach((video) => {\n\t\t\tDom.append(Tag.render`<source src=\"${video.url}\" type=\"${video.type}\">`, this.#videoNode);\n\t\t});\n\n\t\tDom.append(this.#videoNode, this.#playerNode);\n\t\tDom.append(this.#playButton, this.#wrapper);\n\t\tDom.append(this.#stopButton, this.#wrapper);\n\t\tDom.append(this.#playerNode, this.#wrapper);\n\n\t\tthis.#content = this.#wrapper;\n\n\t\treturn this.#content;\n\t}\n\n\trenderTo(wrapper: HTMLElement): HTMLElement\n\t{\n\t\tDom.append(wrapper, this.render());\n\n\t\treturn wrapper;\n\t}\n\n\t#onInitVideoMetadata(event): void\n\t{\n\t\tthis.#progressBar = new ProgressRound({\n\t\t\twidth: this.#pausePlayerWidth - 2 * this.#barPadding,\n\t\t\tlineSize: 2,\n\t\t\tmaxValue: this.#videoNode.duration,\n\t\t\tvalue: this.#videoNode.currentTime,\n\t\t\tcolorBar: '#fff',\n\t\t\tcolorTrack: 'rgba(0, 0, 0, 0)',\n\t\t});\n\n\t\tif (this.#autoplay)\n\t\t{\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\t#onTick(): void\n\t{\n\t\tthis.#progressBar.update(this.#videoNode.currentTime);\n\t}\n\n\t#onClickPlayer(): void\n\t{\n\t\tif (this.#currentPlayState === RoundPlayer.PLAY_STATE_BACKGROUND)\n\t\t{\n\t\t\tthis.userPlay();\n\t\t\tDom.removeClass(this.render(), '--stop');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#videoNode.paused ? this.play() : this.pause();\n\t\t}\n\n\t\tif (this.#analyticsCallback)\n\t\t{\n\t\t\tthis.#analyticsCallback('click-player');\n\t\t}\n\t}\n\n\t#onClickStopButton(): void\n\t{\n\t\tif (this.#analyticsCallback)\n\t\t{\n\t\t\tthis.#analyticsCallback('click-player');\n\t\t}\n\n\t\tthis.stop();\n\t}\n\n\t#onVideoEnded(): void\n\t{\n\t\tthis.stop();\n\t\tDom.remove(this.#progressBar.getContainer());\n\t\tthis.setMute(true);\n\t\tif (this.#loop)\n\t\t{\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\t#scaleTo(x: number)\n\t{\n\t\tthis.#playerNode.style.transform = `scale(${x})`;\n\t}\n\n\t#onPause(): void\n\t{\n\t\tthis.#scaleTo(1);\n\n\t\tif (this.#analyticsCallback)\n\t\t{\n\t\t\tthis.#analyticsCallback('on-pause');\n\t\t}\n\t}\n\n\t#onPlay(): void\n\t{\n\t\tthis.#scaleTo(this.#scale);\n\n\t\tif (this.#analyticsCallback)\n\t\t{\n\t\t\tthis.#analyticsCallback('on-play');\n\t\t}\n\t}\n\n\tplay(): void\n\t{\n\t\tthis.#videoNode.play();\n\t\tDom.removeClass(this.render(), '--stop');\n\t}\n\n\tsetMute(mute: boolean): void\n\t{\n\t\tthis.#videoNode.muted = mute;\n\t}\n\n\tgetPlayState(): string\n\t{\n\t\treturn this.#currentPlayState;\n\t}\n\n\tpause(): void\n\t{\n\t\tthis.#videoNode.pause();\n\t}\n\n\tstop(): void\n\t{\n\t\tthis.pause();\n\t\tthis.#currentPlayState = RoundPlayer.PLAY_STATE_BACKGROUND;\n\t\tthis.#videoNode.currentTime = 0;\n\t\tDom.addClass(this.render(), '--stop');\n\t}\n\n\tuserPlay()\n\t{\n\t\tthis.stop();\n\t\tthis.#currentPlayState = RoundPlayer.PLAY_STATE_USER;\n\t\tthis.#progressBar.setValue(0);\n\t\tDom.remove(this.#progressBar.getContainer());\n\t\tthis.#progressBar.renderTo(this.#playerNode);\n\t\tthis.setMute(false);\n\t\tthis.play();\n\t}\n}\n","import { Tag, Type, Dom } from 'main.core';\nimport { RoundPlayer, PlayerOptions } from './round-player';\nimport { PopupComponentsMakerItem } from 'ui.popupcomponentsmaker';\nimport { Button, ButtonColor, ButtonSize } from 'ui.buttons';\n\nexport type TitleHeaderOptions = {\n\ttitle: string,\n\tsubtitle: ?string\n}\n\nexport type ButtonOptions = {\n\tlabel: string,\n\turl: string,\n}\n\nexport type DescriptionHeaderOptions = {\n\ttitle: string,\n\tsubtitle: ?string,\n\tsubtitleDescription: ?string,\n\tmoreLabel: ?string,\n\tcode: ?string,\n\troundContent: PlayerOptions | string\n}\n\nexport type TariffHeaderOptions = {\n\ticonClass: ?string,\n\ttop: TitleHeaderOptions,\n\tinfo: DescriptionHeaderOptions,\n\tbutton: ?ButtonOptions,\n\tanalyticsCallback: ?Function,\n}\n\nexport class HeaderBuilder\n{\n\t#options: TariffHeaderOptions = null;\n\t#content: HTMLElement;\n\t#player: ?RoundPlayer;\n\n\tconstructor(options: TariffHeaderOptions)\n\t{\n\t\tthis.#options = options;\n\t}\n\n\tbuildPlayer(playerOptions: PlayerOptions): RoundPlayer\n\t{\n\t\treturn new RoundPlayer({\n\t\t\twrapper: playerOptions.wrapper,\n\t\t\tpausePlayerWidth: playerOptions.width,\n\t\t\tscale: playerOptions.scale,\n\t\t\tposterUrl: playerOptions.posterUrl,\n\t\t\tvideos: playerOptions.videos,\n\t\t\tloop:  playerOptions.loop,\n\t\t\tautoplay: playerOptions.autoplay,\n\t\t\tmuted:  playerOptions.muted,\n\t\t\tanalyticsCallback: this.#options.analyticsCallback,\n\t\t});\n\t}\n\n\trenderPlayer(playerOptions: PlayerOptions): HTMLElement\n\t{\n\t\tif (this.#player)\n\t\t{\n\t\t\treturn this.#player\n\t\t}\n\n\t\tconst wrapper = Tag.render`<div class=\"ui-popupcomponentsmaker__round-player-box\"/>`;\n\t\tthis.#player = this.buildPlayer({ ...playerOptions, wrapper: wrapper });\n\n\t\tif (this.#player)\n\t\t{\n\t\t\treturn this.#player.render();\n\t\t}\n\n\t\treturn Tag.render``;\n\t}\n\n\tgetPlayer(): RoundPlayer\n\t{\n\t\treturn this.#player;\n\t}\n\n\trenderTitle(titleOptions: TitleHeaderOptions): HTMLElement\n\t{\n\t\tconst title = Tag.render`\n\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__header-content\">\n\t\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__title\">${titleOptions.title}</div>\n\t\t\t</div>\n\t\t`;\n\t\tif (!Type.isNil(titleOptions.subtitle))\n\t\t{\n\t\t\tDom.append(Tag.render`<div class=\"ui-popupcomponentsmaker-header-tariff__subtitle\">${titleOptions.subtitle}</div>`, title);\n\t\t}\n\n\t\treturn title;\n\t}\n\n\trenderDescription(descriptionOptions: DescriptionHeaderOptions): HTMLElement\n\t{\n\t\tconst descriptionText = Tag.render`\n\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__box\">\n\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__title\">${descriptionOptions.title}</div>\n\t\t</div>`;\n\t\tif (!Type.isNil(descriptionOptions.subtitle))\n\t\t{\n\t\t\tDom.append(Tag.render`<div class=\"ui-popupcomponentsmaker-header-tariff__subtitle\">${descriptionOptions.subtitle}</div>`, descriptionText);\n\t\t}\n\n\t\tif (!Type.isNil(descriptionOptions.subtitleDescription))\n\t\t{\n\t\t\tDom.append(Tag.render`<div class=\"ui-popupcomponentsmaker-header-tariff__text\">${descriptionOptions.subtitleDescription}</div>`, descriptionText);\n\t\t}\n\n\t\tif (!Type.isNil(descriptionOptions.code))\n\t\t{\n\t\t\tconst onclick = (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\tBX.UI.InfoHelper.getInstance({ code: descriptionOptions.code }).show();\n\t\t\t};\n\t\t\tDom.append(Tag.render`<a onclick=\"${onclick}\" target=\"_blank\" class=\"ui-popupcomponentsmaker-header-tariff__more\">${descriptionOptions.moreLabel}<div class=\"ui-icon-set --chevron-right ui-popupcomponentsmaker-header-tariff__more-icon\"></div></a>`, descriptionText);\n\t\t}\n\n\t\tlet roundContent = '';\n\t\tif (Type.isObject(descriptionOptions.roundContent))\n\t\t{\n\t\t\troundContent = this.renderPlayer(descriptionOptions.roundContent);\n\t\t}\n\t\telse if (Type.isStringFilled(descriptionOptions.roundContent))\n\t\t{\n\t\t\troundContent = this.renderIcon(descriptionOptions.roundContent);\n\t\t}\n\n\t\tconst descriptionBlock = Tag.render`\n\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__message-wrapper\">\n\t\t\t\t${roundContent}\n\t\t\t\t${descriptionText}\n\t\t\t</div>\n\t\t`;\n\n\t\tconst description = new PopupComponentsMakerItem({\n\t\t\thtml: descriptionBlock,\n\t\t\twithoutBackground: false,\n\t\t});\n\n\t\tDom.addClass(description.getContainer(), 'ui-popupcomponentsmaker-header-tariff__section-message-wrapper');\n\t\tdescription.getContainer().style.marginTop = '14px';\n\t\tdescription.getContainer().classList.add('--transparent');\n\n\t\treturn description.getContainer();\n\t}\n\n\trenderBtn(btnOptions: ButtonOptions): HTMLElement\n\t{\n\t\tconst btn = new Button({\n\t\t\ttext: btnOptions.label,\n\t\t\tcolor: ButtonColor.LIGHT_BORDER,\n\t\t\tsize: ButtonSize.SMALL,\n\t\t\tlink: btnOptions.url,\n\t\t\tonclick: () => {\n\t\t\t\tif (this.#options.analyticsCallback)\n\t\t\t\t{\n\t\t\t\t\tthis.#options.analyticsCallback('click-button-header', btnOptions.url);\n\t\t\t\t}\n\t\t\t},\n\t\t\tround: true,\n\t\t\tnoCaps: true,\n\t\t\tclassName: 'ui-popupcomponentsmaker-header-tariff__button ui-btn-themes'\n\t\t});\n\n\t\treturn btn.render();\n\t}\n\n\trenderIcon(iconClass: string): HTMLElement\n\t{\n\t\tif (Type.isStringFilled(iconClass))\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__icon\">\n\t\t\t\t\t<div class=\"ui-icon-set ${iconClass}\"></div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render``;\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tif (this.#content)\n\t\t{\n\t\t\treturn this.#content;\n\t\t}\n\t\tlet btnContent = '';\n\t\tif (this.#options.button)\n\t\t{\n\t\t\tbtnContent = Tag.render`\n\t\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__button-bar\">\n\t\t\t\t\t${this.renderBtn(this.#options.button)}\n\t\t\t\t</div>`;\n\t\t}\n\t\tthis.#content = Tag.render`\n\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__wrapper\">\n\t\t\t\t<div class=\"ui-popupcomponentsmaker-header-tariff__title-section\">\n\t\t\t\t\t${this.renderIcon(this.#options.iconClass)}\n\t\t\t\t\t${this.renderTitle(this.#options.top)}\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t${this.renderDescription(this.#options.info)}\n\t\t\t\t${btnContent}\n\t\t\t\t\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#content;\n\t}\n}\n","import { Dom, Tag, Text } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { PopupComponentsMakerItem } from 'ui.popupcomponentsmaker';\nimport type { TariffHeaderOptions } from './header-builder';\nimport { HeaderBuilder } from './header-builder';\nimport './header.css';\n\nexport class PopupHeader extends PopupComponentsMakerItem\n{\n\tconstructor(options = {})\n\t{\n\t\toptions.withoutBackground = true;\n\t\toptions.backgroundColor = null;\n\t\toptions.backgroundImage = null;\n\t\tsuper(options);\n\t}\n\n\tgetContainer(): HTMLElement\n\t{\n\t\tif (!this.layout.container)\n\t\t{\n\t\t\tconst theme = this.#getThemePicker().getAppliedTheme();\n\t\t\tthis.layout.container = Tag.render`<div class=\"ui-popupcomponentsmaker__header\">${this.getContent()}</div>`;\n\t\t\tthis.bacgroundNode = Tag.render`<div class=\"ui-popupcomponentsmaker__header-background\"></div>`;\n\t\t\tDom.append(this.bacgroundNode, this.layout.container);\n\t\t\tthis.#applyTheme(this.bacgroundNode, theme);\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\t'BX.Intranet.Bitrix24:ThemePicker:onThemeApply',\n\t\t\t\t(event) =>\n\t\t\t\t{\n\t\t\t\t\tthis.#applyTheme(this.bacgroundNode, event.data.theme);\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn super.getContainer();\n\t}\n\n\t#getThemePicker(): BX.Intranet.Bitrix24.ThemePicker\n\t{\n\t\treturn BX.Intranet.Bitrix24.ThemePicker.Singleton ?? top.BX.Intranet.Bitrix24.ThemePicker.Singleton;\n\t}\n\n\t#applyTheme(container, theme): void\n\t{\n\t\tconst previewImage = `url('${Text.encode(theme.previewImage)}')`;\n\t\tDom.style(container, 'backgroundImage', previewImage);\n\t\tDom.removeClass(this.layout.container, 'bitrix24-theme-default bitrix24-theme-dark bitrix24-theme-light');\n\t\tlet themeClass = 'bitrix24-theme-default';\n\n\t\tif (theme.id !== 'default')\n\t\t{\n\t\t\tthemeClass = String(theme.id).indexOf('dark:') === 0 ? 'bitrix24-theme-dark' : 'bitrix24-theme-light';\n\t\t}\n\n\t\tDom.addClass(this.layout.container, themeClass);\n\t}\n\n\tstatic createByJson(popupId: string, options: TariffHeaderOptions): PopupHeader\n\t{\n\t\tconst builder = new HeaderBuilder(options);\n\t\tconst header = new PopupHeader({\n\t\t\thtml: builder.render(),\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Main.Popup:onClose', (event) => {\n\t\t\tif (popupId === event.target.uniquePopupId)\n\t\t\t{\n\t\t\t\tbuilder.getPlayer()?.stop();\n\t\t\t}\n\t\t});\n\n\t\treturn header;\n\t}\n}\n","import { Dom, Tag, Text, Type, Event } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { PopupComponentsMaker } from 'ui.popupcomponentsmaker';\nimport { PopupHeader } from './popup-header';\nimport { Popup } from 'main.popup';\nimport { BaseTemplate } from 'ui.popup-with-header';\nimport './styles.css';\n\nexport class PopupWithHeader extends PopupComponentsMaker\n{\n\theaderWrapper: ?HTMLElement;\n\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.header = (options.header instanceof PopupHeader) ? options.header : null;\n\t\tthis.template = options.template instanceof BaseTemplate ? options.template : null;\n\t\tthis.asyncData = options.asyncData instanceof BX.Promise ? options.asyncData : null;\n\t\tthis.analyticsCallback = Type.isFunction(options.analyticsCallback) ? options.analyticsCallback : null;\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\tif (!this.popup)\n\t\t{\n\t\t\tconst popupWidth = this.width ? this.width : 344;\n\t\t\tconst popupId = this.id ? `${this.id}-popup` : null;\n\t\t\tlet content = [];\n\n\t\t\tif (!this.asyncData)\n\t\t\t{\n\t\t\t\tcontent = Tag.render`\n\t\t\t\t\t<div>\n\t\t\t\t\t\t${this.getHeaderWrapper()}\n\t\t\t\t\t<div>\n\t\t\t\t`;\n\t\t\t\tif (this.content.length > 0)\n\t\t\t\t{\n\t\t\t\t\tcontent.append(Tag.render`<div style=\"padding: 0 ${this.padding}px ${this.padding}px ${this.padding}px\">${this.getContentWrapper()}</div>`);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.popup = new Popup(popupId, this.target, {\n\t\t\t\tclassName: 'ui-popupcomponentmaker',\n\t\t\t\tcontentBackground: 'transparent',\n\t\t\t\tcontentPadding: this.contentPadding,\n\t\t\t\tangle: this.useAngle\n\t\t\t\t\t? {\n\t\t\t\t\t\toffset: (popupWidth / 2) - 16,\n\t\t\t\t\t}\n\t\t\t\t\t: false,\n\t\t\t\toffsetTop: this.offsetTop,\n\t\t\t\twidth: popupWidth,\n\t\t\t\toffsetLeft: -(popupWidth / 2) + (this.target ? this.target.offsetWidth / 2 : 0) + 40,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t\tcontent: content,\n\t\t\t\tcacheable: this.cacheable,\n\t\t\t});\n\n\t\t\tif (this.blurBlackground)\n\t\t\t{\n\t\t\t\tDom.addClass(this.popup.getPopupContainer(), 'popup-with-radius');\n\t\t\t\tthis.setBlurBackground();\n\t\t\t\tEventEmitter.subscribe(\n\t\t\t\t\tEventEmitter.GLOBAL_TARGET,\n\t\t\t\t\t'BX.Intranet.Bitrix24:ThemePicker:onThemeApply',\n\t\t\t\t\t() => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.setBlurBackground();\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (this.asyncData)\n\t\t\t{\n\t\t\t\tconst container = this.popup.getContentContainer();\n\t\t\t\tDom.clean(container);\n\t\t\t\tDom.append(this.getSkeleton(), container);\n\t\t\t\tthis.preparePopupAngly(container);\n\n\t\t\t\tif (Type.isDomNode(container.parentNode))\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(container.parentNode, '--with-header');\n\t\t\t\t}\n\n\t\t\t\tthis.asyncData.then((response) => {\n\t\t\t\t\tthis.popup.show();\n\t\t\t\t\tDom.clean(container);\n\t\t\t\t\tresponse.data.header.analyticsCallback = this.analyticsCallback;\n\t\t\t\t\tthis.header = PopupHeader.createByJson(popupId, response.data.header);\n\t\t\t\t\tcontent = Tag.render`\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t${this.getHeaderWrapper()}\n\t\t\t\t\t\t<div>\n\t\t\t\t\t`;\n\n\t\t\t\t\tlet hasContent = response.data.items && this.template;\n\n\t\t\t\t\tif (hasContent)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.template.setOptions({\n\t\t\t\t\t\t\titems: response.data.items,\n\t\t\t\t\t\t\tanalyticsCallback: this.analyticsCallback,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.content = this.template.getContent();\n\t\t\t\t\t\tthis.contentWrapper = null;\n\n\t\t\t\t\t\tif (Dom.hasClass(this.getHeaderWrapper(), '--empty-content'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.removeClass(this.getHeaderWrapper(), '--empty-content');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t!this.getHeaderWrapper().querySelector('.ui-popupcomponentsmaker__round-player-box')\n\t\t\t\t\t\t\t&& !Dom.hasClass(this.getHeaderWrapper(), '--without-video')\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.addClass(this.getHeaderWrapper(), '--without-video');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.content.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontent.append(Tag.render`<div class=\"ui-popupcomponentmaker__content-wrap\">${this.getContentWrapper()}</div>`);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thasContent = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tDom.append(content, container);\n\n\t\t\t\t\tif (hasContent)\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.getContentWrapper(), 'ui-popup-with-header__content');\n\n\t\t\t\t\t\tif (this.popup.isBottomAngle())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.style(this.getContentWrapper(), 'transition', 'none');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (this.getContentWrapper().scrollHeight > 287 && !Dom.hasClass(this.getContentWrapper(), '--active-scroll'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.style(this.getContentWrapper(), 'height', '287px');\n\t\t\t\t\t\t\tDom.style(this.getContentWrapper(), 'overflow-y', 'scroll');\n\t\t\t\t\t\t\tDom.addClass(content, 'active-scroll');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.style(this.getContentWrapper(), 'height', `${this.getContentWrapper().scrollHeight}px`);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.popup.adjustPosition({ forceBindPosition: true, position: this.popup.isBottomAngle() ? 'top' : 'bottom' });\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.popup.adjustPosition({forceBindPosition: true, position: this.popup.isBottomAngle() ? 'top' : 'bottom' });\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.popup.getContentContainer().style.overflowX = null;\n\t\t}\n\n\t\treturn this.popup;\n\t}\n\n\tgetSkeleton(): HTMLElement\n\t{\n\t\tif (!this.skeleton)\n\t\t{\n\t\t\tthis.skeleton = Tag.render`\n\t\t\t\t<div class=\"popup-with-header-skeleton__wrap\">\n\t\t\t\t\t<div class=\"popup-with-header-skeleton__header\">\n\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-top\">\n\t\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-circle\">\n\t\t\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-circle-inner\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style=\"width: 100%;\">\n\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 12px; max-width: 219px; height: 6px; background: rgba(255,255,255,.8);\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t\t<div style=\"max-width: 119px; height: 4px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-bottom\">\n\t\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-bottom-circle-box\">\n\t\t\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-bottom-circle\"></div>\n\t\t\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__header-bottom-circle-blue\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div style=\"width: 100%;\">\n\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 193px; height: 5px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 15px; max-width: 163px; height: 5px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 156px; height: 2px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 93px; height: 2px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"popup-with-header-skeleton__bottom\">\n\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__bottom-inner\">\n\t\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__bottom-left\">\n\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 11px; max-width: 193px; height: 5px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 17px; max-width: 163px; height: 5px;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 168px; height: 3px; background: rgba(149,156,164,.23);\" class=\"popup-with-header-skeleton__line --dark-animation\"></div>\n\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 131px; height: 3px; background: rgba(149,156,164,.23);\" class=\"popup-with-header-skeleton__line --dark-animation\"></div>\n\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 150px; height: 3px; background: rgba(149,156,164,.23);\" class=\"popup-with-header-skeleton__line --dark-animation\"></div>\n\t\t\t\t\t\t\t\t<div style=\"margin-bottom: 9px; max-width: 56px; height: 5px; background: rgba(32,102,176,.23);\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"popup-with-header-skeleton__bottom-right\">\n\t\t\t\t\t\t\t\t<div class=\"popup-with-header-skeleton-btn\"></div>\n\t\t\t\t\t\t\t\t<div style=\"margin: 0 auto; max-width: 36px; height: 3px; background: #d9d9d9;\" class=\"popup-with-header-skeleton__line\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tconst theme = this.#getThemePicker().getAppliedTheme();\n\t\t\tconst headerContainer = this.skeleton.querySelector('.popup-with-header-skeleton__header');\n\t\t\tthis.#applyTheme(headerContainer, theme);\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\t'BX.Intranet.Bitrix24:ThemePicker:onThemeApply',\n\t\t\t\t(event) =>\n\t\t\t\t{\n\t\t\t\t\tthis.#applyTheme(headerContainer, event.data.theme);\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\treturn this.skeleton;\n\t}\n\n\tpreparePopupAngly(popupContainer: HTMLElement): void\n\t{\n\t\tconst angly = popupContainer?.parentNode?.querySelector('.popup-window-angly--arrow');\n\n\t\tif (Type.isDomNode(angly))\n\t\t{\n\t\t\tconst theme = this.#getThemePicker().getAppliedTheme()\n\t\t\tthis.#applyTheme(angly, theme);\n\n\t\t\tEventEmitter.subscribe(\n\t\t\t\t'BX.Intranet.Bitrix24:ThemePicker:onThemeApply',\n\t\t\t\t(event) =>\n\t\t\t\t{\n\t\t\t\t\tthis.#applyTheme(angly, event.data.theme);\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tDom.style(angly, 'background-position', 'center top');\n\t\t\tDom.addClass(popupContainer?.parentNode, '--with-header');\n\t\t}\n\t}\n\n\t#getThemePicker(): BX.Intranet.Bitrix24.ThemePicker\n\t{\n\t\treturn BX.Intranet.Bitrix24.ThemePicker.Singleton ?? top.BX.Intranet.Bitrix24.ThemePicker.Singleton;\n\t}\n\n\t#applyTheme(container, theme): void\n\t{\n\t\tconst previewImage = `url('${Text.encode(theme.previewImage)}')`;\n\t\tDom.style(container, 'backgroundImage', previewImage);\n\t\tDom.removeClass(container, 'bitrix24-theme-default bitrix24-theme-dark bitrix24-theme-light');\n\t\tlet themeClass = 'bitrix24-theme-default';\n\n\t\tif (theme.id !== 'default')\n\t\t{\n\t\t\tthemeClass = String(theme.id).indexOf('dark:') === 0 ? 'bitrix24-theme-dark' : 'bitrix24-theme-light';\n\t\t}\n\n\t\tDom.addClass(container, themeClass);\n\t}\n\n\tgetHeaderWrapper(): ?HTMLElement\n\t{\n\t\tif (!this.header)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.headerWrapper)\n\t\t{\n\t\t\tthis.headerWrapper = Tag.render`\n\t\t\t\t<div class=\"ui-popupcomponentmaker__header-content\"></div>\n\t\t\t`;\n\n\t\t\tif (this.content.length <= 0)\n\t\t\t{\n\t\t\t\tthis.headerWrapper.classList.add('--empty-content');\n\t\t\t}\n\n\t\t\tconst sectionNode = this.getSection();\n\n\t\t\tif (this.header?.marginBottom)\n\t\t\t{\n\t\t\t\tType.isNumber(this.header.marginBottom)\n\t\t\t\t\t? sectionNode.style.marginBottom = `${this.header.marginBottom}px`\n\t\t\t\t\t: null;\n\t\t\t}\n\n\t\t\tif (this.header?.className)\n\t\t\t{\n\t\t\t\tDom.addClass(sectionNode, this.header.className);\n\t\t\t}\n\n\t\t\tif (Type.isDomNode(this.header?.html))\n\t\t\t{\n\t\t\t\tsectionNode.appendChild(this.getItem(this.header).getContainer());\n\t\t\t\tthis.headerWrapper.appendChild(sectionNode);\n\t\t\t}\n\n\t\t\tif (Type.isFunction(this.header?.html?.then))\n\t\t\t{\n\t\t\t\tthis.adjustPromise(this.header, sectionNode);\n\t\t\t\tthis.headerWrapper.appendChild(sectionNode);\n\t\t\t}\n\t\t}\n\n\t\treturn this.headerWrapper;\n\t}\n}\n","import type { ResultContent } from '../types/template';\n\nexport class BaseTemplate\n{\n\tgetContent(): Array<ResultContent>\n\t{\n\t\tthrow new Error('Must be implemented in a child class');\n\t}\n\n\tsetOptions(options): void\n\t{\n\t\tthis.options = options;\n\t}\n}","import { Cache, Dom, Tag } from 'main.core';\nimport { Button } from 'ui.buttons';\nimport type {\n\tButtonConfig,\n\tMoreLinkConfig,\n\tSalePopupTemplateOptions,\n\tTextConfig,\n\tResultContent,\n\tSalePopupTemplateItemConfig,\n} from '../types/template';\nimport { BaseTemplate } from './base-template';\n\nexport class SaleTemplate extends BaseTemplate\n{\n\t#cache = new Cache.MemoryCache();\n\toptions: SalePopupTemplateOptions;\n\n\tconstructor(options: SalePopupTemplateOptions = {})\n\t{\n\t\tsuper();\n\t\tthis.options = options;\n\t}\n\n\tgetContent(): Array<ResultContent>\n\t{\n\t\treturn this.#cache.remember('popup-content', () => {\n\t\t\tconst content = [];\n\n\t\t\tthis.options.items.forEach((item, index) => {\n\t\t\t\tconst itemContent = this.#getItemContent(item);\n\n\t\t\t\tif (item.styles?.color)\n\t\t\t\t{\n\t\t\t\t\tDom.style(itemContent, 'color', item.styles.color);\n\t\t\t\t}\n\n\t\t\t\tcontent.push({\n\t\t\t\t\thtml: itemContent,\n\t\t\t\t\tbackground: item.styles?.background,\n\t\t\t\t\tmargin: index === 0 ? '12px 0 0 0' : null,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn content;\n\t\t});\n\t}\n\n\t#getItemContent(config: SalePopupTemplateItemConfig): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-popupconstructor-content-item-wrapper\">\n\t\t\t\t<div class=\"ui-popupconstructor-content-item-wrapper_information\">\n\t\t\t\t\t<div class=\"ui-popupconstructor-content-item-wrapper-title\">\n\t\t\t\t\t\t${config.icon ? this.#getIcon(config.icon) : null}\n\t\t\t\t\t\t${config.title ? this.#getTitle(config.title) : null}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t${config.description ? this.#getDescription(config.description) : null}\n\t\t\t\t\t\t${config.more ? this.#getMoreLink(config.more) : null}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-popupconstructor-content-item-wrapper_button\">\n\t\t\t\t\t${config.button ? this.#getButton(config.button) : null}\n\t\t\t\t\t${config.button.description ? this.#getButtonDescription(config.button.description) : null}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#getTitle(config: TextConfig): HTMLElement\n\t{\n\t\tconst title = Tag.render`\n\t\t\t<div class=\"ui-popupconstructor-content-item__title\">${config.text}</div>\n\t\t`;\n\n\t\tthis.#setTextStyles(title, config);\n\n\t\treturn title;\n\t}\n\n\t#getIcon(config: Object): HTMLElement\n\t{\n\t\tconst icon = Tag.render`\n\t\t\t<div class=\"ui-popupconstructor-content-item__icon ui-icon-set --${config.name}\"></div>\n\t\t`;\n\n\t\tif (config.color)\n\t\t{\n\t\t\tDom.style(icon, 'background-color', config.color);\n\t\t}\n\n\t\treturn icon;\n\t}\n\n\t#getDescription(config: TextConfig): HTMLElement\n\t{\n\t\tconst description = Tag.render`\n\t\t\t<div class=\"ui-popupconstructor-content-item__description\">\n\t\t\t\t${config.text}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#setTextStyles(description, config);\n\n\t\treturn description;\n\t}\n\n\t#getMoreLink(config: MoreLinkConfig): HTMLElement\n\t{\n\t\tconst onclick = () => {\n\t\t\ttop.BX.Helper.show(`redirect=detail&code=${config.code}`);\n\t\t};\n\n\t\tconst moreLink = Tag.render`\n\t\t\t<div class=\"ui-popupconstructor-content-item__more-link\" onclick=\"${onclick}\">${config.text.text}</div>\n\t\t`;\n\t\tthis.#setTextStyles(moreLink, config.text);\n\n\t\treturn moreLink;\n\t}\n\n\t#getButton(config: ButtonConfig): HTMLElement\n\t{\n\t\tconst button = new Button({\n\t\t\tround: true,\n\t\t\ttext: config.text,\n\t\t\tsize: Button.Size.EXTRA_SMALL,\n\t\t\tcolor: Button.Color.SUCCESS,\n\t\t\tnoCaps: true,\n\t\t\tlink: config.url,\n\t\t\tonclick: () => {\n\t\t\t\tif (this.options?.analyticsCallback)\n\t\t\t\t{\n\t\t\t\t\tthis.options.analyticsCallback('click-button', config.url);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tif (config.backgroundColor)\n\t\t{\n\t\t\tDom.style(button.render(), 'background-color', config.backgroundColor);\n\t\t\tbutton.setColor(Button.Color.LIGHT);\n\t\t}\n\n\t\treturn button.render();\n\t}\n\n\t#getButtonDescription(config: TextConfig): HTMLElement\n\t{\n\t\tconst buttonDescription = Tag.render`\n\t\t\t<div class=\"ui-popupconstructor-content-item__button-description\">\n\t\t\t\t${config.text}\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#setTextStyles(buttonDescription, config);\n\n\t\treturn buttonDescription;\n\t}\n\n\t#setTextStyles(element: HTMLElement, config: TextConfig): void\n\t{\n\t\tif (config.color)\n\t\t{\n\t\t\tDom.style(element, 'color', config.color);\n\t\t}\n\n\t\tif (config.fontSize)\n\t\t{\n\t\t\tDom.style(element, 'font-size', config.fontSize);\n\t\t}\n\n\t\tif (config.weight)\n\t\t{\n\t\t\tDom.style(element, 'font-weight', config.weight);\n\t\t}\n\t}\n}\n"],"names":["RoundPlayer","constructor","options","PLAY_STATE_BACKGROUND","wrapper","width","Type","isNumber","scale","isArrayFilled","videos","isBoolean","loop","autoplay","muted","posterUrl","isFunction","analyticsCallback","Tag","render","poster","isStringFilled","style","backgroundImage","Text","encode","Loader","size","addEventListener","bind","hide","show","forEach","video","Dom","append","url","type","renderTo","play","removeClass","setMute","mute","getPlayState","pause","stop","currentTime","addClass","userPlay","PLAY_STATE_USER","setValue","remove","getContainer","event","ProgressRound","lineSize","maxValue","duration","value","colorBar","colorTrack","update","paused","x","transform","HeaderBuilder","buildPlayer","playerOptions","pausePlayerWidth","renderPlayer","getPlayer","renderTitle","titleOptions","title","isNil","subtitle","renderDescription","descriptionOptions","descriptionText","subtitleDescription","code","onclick","e","stopPropagation","BX","UI","InfoHelper","getInstance","moreLabel","roundContent","isObject","renderIcon","descriptionBlock","description","PopupComponentsMakerItem","html","withoutBackground","marginTop","classList","add","renderBtn","btnOptions","btn","Button","text","label","color","ButtonColor","LIGHT_BORDER","ButtonSize","SMALL","link","round","noCaps","className","iconClass","btnContent","button","top","info","PopupHeader","backgroundColor","layout","container","theme","getAppliedTheme","getContent","bacgroundNode","EventEmitter","subscribe","data","createByJson","popupId","builder","header","target","uniquePopupId","Intranet","Bitrix24","ThemePicker","Singleton","previewImage","themeClass","id","String","indexOf","PopupWithHeader","PopupComponentsMaker","template","BaseTemplate","asyncData","Promise","getPopup","popup","popupWidth","content","getHeaderWrapper","length","padding","getContentWrapper","Popup","contentBackground","contentPadding","angle","useAngle","offset","offsetTop","offsetLeft","offsetWidth","autoHide","closeByEsc","animation","cacheable","blurBlackground","getPopupContainer","setBlurBackground","GLOBAL_TARGET","setTimeout","getContentContainer","clean","getSkeleton","preparePopupAngly","isDomNode","parentNode","then","response","hasContent","items","setOptions","contentWrapper","hasClass","querySelector","isBottomAngle","scrollHeight","adjustPosition","forceBindPosition","position","overflowX","skeleton","headerContainer","popupContainer","angly","headerWrapper","sectionNode","getSection","marginBottom","appendChild","getItem","adjustPromise","Error","SaleTemplate","Cache","MemoryCache","remember","item","index","itemContent","styles","push","background","margin","config","icon","more","name","Helper","moreLink","Size","EXTRA_SMALL","Color","SUCCESS","setColor","LIGHT","buttonDescription","element","fontSize","weight"],"mappings":"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"}