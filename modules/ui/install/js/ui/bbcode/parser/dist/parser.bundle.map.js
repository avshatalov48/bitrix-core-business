{"version":3,"file":"parser.bundle.map.js","names":["this","BX","UI","exports","main_core","ui_bbcode_model","getByIndex","array","index","Type","isArray","TypeError","isInteger","preparedIndex","length","ParserScheme","BBCodeScheme","getTagScheme","tagName","BBCodeTagScheme","name","convertChild","child","scheme","includes","getName","createText","toString","isAllowedTag","isChildAllowed","parent","TAG_REGEX","isSpecialChar","symbol","isList","String","toLowerCase","isListItem","parserScheme","BBCodeParser","constructor","options","setScheme","DefaultBBCodeScheme","isFunction","onUnknown","setOnUnknown","defaultOnUnknownHandler","getScheme","handler","onUnknownHandler","getOnUnknownHandler","static","node","getType","BBCodeNode","ELEMENT_NODE","nodeName","replace","createElement","children","getChildren","openingTag","getOpeningTag","closingTag","getClosingTag","value","isStringFilled","parseText","text","reduce","acc","push","lastItem","isNil","map","fragment","createNewLine","createTab","content","bbcode","startIndex","nextContent","slice","nextTag","match","RegExp","indexOf","source","test","parseAttributes","sourceAttributes","result","attributes","startsWith","trimQuotes","trim","split","filter","Boolean","item","key","parse","createRoot","firstTagIndex","findNextTagIndex","textBeforeFirstTag","appendChild","stack","wasOpened","current","level","fullTag","slash","attrs","isOpeningTag","lowerCaseTagName","isPotentiallyVoid","tagScheme","isAllowedVoidTag","isVoid","Object","fromEntries","nextTagIndex","openedTagIndex","splice","getFinalLineBreaksIndexes","skip","reduceRight","flattenAst","forEach","finalLinebreaksIndexes","setChildren","Bbcode"],"sources":["parser.bundle.js"],"mappings":"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"}