{"version":3,"file":"auto-launch.bundle.js","sources":["../src/launch-priority.js","../src/launch-state.js","../src/launch-item.js","../src/launcher.js","../src/auto-launcher.js"],"sourcesContent":["export const LaunchPriority = {\n\tLOW: 1,\n\tNORMAL: 2,\n\tHIGH: 3,\n\tCRITICAL: 4,\n};\n","export const LaunchState = {\n\tIDLE: 'idle',\n\tRUNNING: 'running',\n\tDONE: 'done',\n};\n","import { Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { LaunchPriority } from './launch-priority';\nimport { LaunchState } from './launch-state';\n\nimport type { LaunchItemOptions, LaunchItemCallback, LaunchItemContext } from './launch-item-options';\n\nexport default class LaunchItem extends EventEmitter\n{\n\t#id: string = null;\n\t#callback: LaunchItemCallback = null;\n\t#priority: LaunchPriority = LaunchPriority.NORMAL;\n\t#delay: number = 5000;\n\t#allowLaunchAfterOthers: boolean = false;\n\t#forceShowOnTop: boolean | Function = false;\n\t#state: LaunchState = LaunchState.IDLE;\n\t#context: LaunchItemContext = {};\n\n\tconstructor(itemOptions: LaunchItemOptions)\n\t{\n\t\tsuper();\n\n\t\tconst options: LaunchItemOptions = Type.isPlainObject(itemOptions) ? itemOptions : {};\n\t\tif (!Type.isFunction(options.callback))\n\t\t{\n\t\t\tthrow new TypeError('BX.Launcher: \"callback\" parameter is required.');\n\t\t}\n\n\t\tthis.#callback = options.callback;\n\t\tthis.#id = Type.isStringFilled(options.id) ? options.id : `launch-item-${BX.Text.getRandom().toLowerCase()}`;\n\t\tthis.#priority = Type.isNumber(options.priority) ? options.priority : this.#priority;\n\t\tthis.#delay = Type.isNumber(options.delay) && options.delay >= 0 ? options.delay : this.#delay;\n\t\tthis.#allowLaunchAfterOthers = options.allowLaunchAfterOthers === true;\n\t\tthis.#forceShowOnTop = (\n\t\t\tType.isBoolean(options.forceShowOnTop) || Type.isFunction(options.forceShowOnTop)\n\t\t\t\t? options.forceShowOnTop\n\t\t\t\t: this.#forceShowOnTop\n\t\t);\n\n\t\tthis.#context = Type.isPlainObject(options.context) ? options.context : {};\n\n\t\tthis.setEventNamespace('BX.Main.Launcher.Item');\n\t}\n\n\tlaunch(done: Function)\n\t{\n\t\tif (this.#state !== LaunchState.IDLE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#state = LaunchState.RUNNING;\n\n\t\tconst onDone = () => {\n\t\t\tthis.#state = LaunchState.DONE;\n\t\t\tdone();\n\t\t};\n\n\t\tthis.#callback(onDone);\n\t}\n\n\tgetId(): string\n\t{\n\t\treturn this.#id;\n\t}\n\n\tgetState(): LaunchState\n\t{\n\t\treturn this.#state;\n\t}\n\n\tgetPriority(): number\n\t{\n\t\treturn this.#priority;\n\t}\n\n\tgetDelay(): number\n\t{\n\t\treturn this.#delay;\n\t}\n\n\tgetContext(): LaunchItemContext\n\t{\n\t\treturn this.#context;\n\t}\n\n\tcanLaunchAfterOthers(): boolean\n\t{\n\t\treturn this.#allowLaunchAfterOthers;\n\t}\n\n\tcanShowOnTop(): boolean\n\t{\n\t\tif (Type.isFunction(this.#forceShowOnTop))\n\t\t{\n\t\t\treturn this.#forceShowOnTop();\n\t\t}\n\n\t\treturn this.#forceShowOnTop;\n\t}\n}\n","import { Type, Reflection, Event, Runtime } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { OrderedArray } from 'main.core.collections';\nimport { ZIndexManager } from 'main.core.z-index-manager';\nimport { type PopupManager } from 'main.popup';\n\nimport LaunchItem from './launch-item';\nimport type { LaunchItemCallback, LaunchItemContext, LaunchItemOptions } from './launch-item-options';\n\nexport const LauncherState = {\n\tIDLE: 'idle',\n\tWAITING_READY: 'waiting_ready',\n\tREADY: 'ready',\n};\n\nexport default class Launcher\n{\n\t#enabled: boolean = true;\n\t#queue: OrderedArray<LaunchItem> = null;\n\t#currentItem: LaunchItem | null = null;\n\t#state: LauncherState = LauncherState.IDLE;\n\t#documentReady: boolean = false;\n\t#launchCount: number = 0;\n\t#launchTimeoutId: ?number = null;\n\t#startDebounced: Function = null;\n\n\tconstructor()\n\t{\n\t\tthis.#queue = new OrderedArray((itemA: LaunchItem, itemB: LaunchItem) => {\n\t\t\tconst result = itemB.getPriority() - itemA.getPriority();\n\n\t\t\treturn result === 0 ? -1 : result;\n\t\t});\n\n\t\tthis.#startDebounced = Runtime.debounce(this.#start, 1000, this);\n\t}\n\n\tstatic canShowOnTop(context: LaunchItemContext = {}): boolean\n\t{\n\t\treturn (\n\t\t\t!this.#hasOpenPopup()\n\t\t\t&& !this.#hasOpenSlider(context)\n\t\t\t&& !this.#hasOverlayDialog()\n\t\t\t&& !this.#hasOpenViewer()\n\t\t);\n\t}\n\n\tstatic #hasOpenPopup(): boolean\n\t{\n\t\tconst popupManager: Class<PopupManager> = Reflection.getClass('BX.Main.PopupManager');\n\t\tif (popupManager)\n\t\t{\n\t\t\tconst popups = popupManager.getPopups();\n\t\t\tfor (const popup of popups)\n\t\t\t{\n\t\t\t\tif (!popup.isShown())\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\tpopup.getId().startsWith('timeman_weekly_report_popup_')\n\t\t\t\t\t|| popup.getId().startsWith('timeman_daily_report_popup_')\n\t\t\t\t\t|| BX.Dom.hasClass(popup.getPopupContainer(), 'b24-whatsnew__popup')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic #hasOpenSlider(context: LaunchItemContext): boolean\n\t{\n\t\tconst sidePanel: BX.SidePanel.Manager = Reflection.getClass('BX.SidePanel.Instance');\n\t\tif (sidePanel)\n\t\t{\n\t\t\tconst topSlider = sidePanel.getTopSlider();\n\t\t\tif (topSlider === null || topSlider === context.slider || topSlider.getUrl() === context.sliderId)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst isIframe: boolean = window !== window.top;\n\t\t\tconst isInsideTopSlider: boolean = isIframe && sidePanel.getTopSlider()?.getWindow() === window;\n\t\t\tif (!isInsideTopSlider && sidePanel.getOpenSlidersCount() > 0)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic #hasOverlayDialog(): boolean\n\t{\n\t\tconst stack = ZIndexManager.getStack(document.body);\n\t\tconst components = stack === null ? [] : stack.getComponents();\n\t\tfor (const component of components)\n\t\t{\n\t\t\tif (component.getOverlay() !== null && component.getOverlay().offsetWidth > 0)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic #hasOpenViewer(): boolean\n\t{\n\t\tconst viewer = Reflection.getClass('BX.UI.Viewer.Instance');\n\n\t\treturn viewer !== null && viewer.isOpen();\n\t}\n\n\tregister(callback: LaunchItemCallback, options: LaunchItemOptions = {})\n\t{\n\t\tconst launchItem = new LaunchItem({\n\t\t\tcallback,\n\t\t\t...options,\n\t\t});\n\n\t\tthis.#queue.add(launchItem);\n\n\t\tthis.#startDebounced();\n\t}\n\n\tunregister(id: string)\n\t{\n\t\tfor (const launchItem of this.#queue)\n\t\t{\n\t\t\tif (launchItem.getId() === id)\n\t\t\t{\n\t\t\t\tthis.#queue.delete(launchItem);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (this.#currentItem !== null && this.#currentItem.getId() === id)\n\t\t{\n\t\t\tthis.#tryDequeue();\n\t\t}\n\t}\n\n\tisEnabled(): boolean\n\t{\n\t\treturn this.#enabled;\n\t}\n\n\tenable(): void\n\t{\n\t\tthis.#enabled = true;\n\t\tthis.#startDebounced();\n\t}\n\n\tdisable(): void\n\t{\n\t\tthis.#enabled = false;\n\t\tthis.#state = LauncherState.IDLE;\n\t}\n\n\t#start(): void\n\t{\n\t\tif (!this.isEnabled() || this.#state !== LauncherState.IDLE)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst onReady = () => {\n\t\t\tthis.#documentReady = true;\n\t\t\tthis.#state = LauncherState.READY;\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.#tryDequeue();\n\t\t\t}, 1000);\n\t\t};\n\n\t\tif (this.#documentReady)\n\t\t{\n\t\t\tonReady();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#state = LauncherState.WAITING_READY;\n\t\t\tif (Type.isUndefined(window.frameCacheVars))\n\t\t\t{\n\t\t\t\tEvent.ready(onReady);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst compositeReady = (\n\t\t\t\t\tBX?.frameCache?.frameDataInserted === true || !Type.isUndefined(window.frameRequestFail)\n\t\t\t\t);\n\n\t\t\t\tif (compositeReady)\n\t\t\t\t{\n\t\t\t\t\tonReady();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tEventEmitter.subscribe('onFrameDataProcessed', onReady);\n\t\t\t\t\tEventEmitter.subscribe('onFrameDataRequestFail', onReady);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t#tryDequeue(): void\n\t{\n\t\tclearTimeout(this.#launchTimeoutId);\n\t\tthis.#currentItem = this.#queue.getFirst();\n\t\tif (this.#currentItem === null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#queue.delete(this.#currentItem);\n\n\t\tif (!this.#currentItem.canLaunchAfterOthers() && this.#launchCount > 0)\n\t\t{\n\t\t\tthis.#tryDequeue();\n\t\t}\n\t\telse if (this.constructor.canShowOnTop(this.#currentItem.getContext()) || this.#currentItem.canShowOnTop())\n\t\t{\n\t\t\tthis.#launchTimeoutId = setTimeout(() => {\n\t\t\t\tif (this.constructor.canShowOnTop(this.#currentItem.getContext()) || this.#currentItem.canShowOnTop())\n\t\t\t\t{\n\t\t\t\t\tthis.#launchCount++;\n\t\t\t\t\tthis.#currentItem.launch(() => {\n\t\t\t\t\t\tthis.#tryDequeue();\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.#tryDequeue();\n\t\t\t\t}\n\t\t\t}, this.#currentItem.getDelay());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#tryDequeue();\n\t\t}\n\t}\n}\n","import Launcher from './launcher';\n\nexport const AutoLauncher = new Launcher();\n"],"names":["LaunchPriority","LOW","NORMAL","HIGH","CRITICAL","LaunchState","IDLE","RUNNING","DONE","LaunchItem","EventEmitter","constructor","itemOptions","options","Type","isPlainObject","isFunction","callback","TypeError","isStringFilled","id","BX","Text","getRandom","toLowerCase","isNumber","priority","delay","allowLaunchAfterOthers","isBoolean","forceShowOnTop","context","setEventNamespace","launch","done","onDone","getId","getState","getPriority","getDelay","getContext","canLaunchAfterOthers","canShowOnTop","LauncherState","WAITING_READY","READY","Launcher","OrderedArray","itemA","itemB","result","Runtime","debounce","register","launchItem","add","unregister","delete","isEnabled","enable","disable","popupManager","Reflection","getClass","popups","getPopups","popup","isShown","startsWith","Dom","hasClass","getPopupContainer","sidePanel","topSlider","getTopSlider","slider","getUrl","sliderId","isIframe","window","top","isInsideTopSlider","getWindow","getOpenSlidersCount","stack","ZIndexManager","getStack","document","body","components","getComponents","component","getOverlay","offsetWidth","viewer","isOpen","onReady","setTimeout","isUndefined","frameCacheVars","Event","ready","compositeReady","frameCache","frameDataInserted","frameRequestFail","subscribe","clearTimeout","getFirst","AutoLauncher"],"mappings":"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"}