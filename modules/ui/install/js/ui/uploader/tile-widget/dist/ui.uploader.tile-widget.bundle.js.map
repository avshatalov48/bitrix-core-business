{"version":3,"file":"ui.uploader.tile-widget.bundle.js","sources":["../src/components/settings-button.js","../src/components/drop-area.js","../src/components/upload-loader.js","../src/components/error-popup.js","../src/components/file-icon.js","../src/components/tile-item.js","../src/components/tile-more-item.js","../src/components/tile-list.js","../src/mixins/drag-over-mixin.js","../src/components/tile-widget-component.js","../src/tile-widget.js","../src/tile-widget-slot.js"],"sourcesContent":["import type { BitrixVueComponentProps } from 'ui.vue3';\n\nexport const SettingsButton: BitrixVueComponentProps = {\n\tinject: ['widgetOptions', 'emitter'],\n\tdata: () => ({\n\t\tselected: false,\n\t}),\n\tmethods: {\n\t\thandleSettingsClick(): void\n\t\t{\n\t\t\tthis.emitter.emit(\n\t\t\t\t'SettingsButton:onClick',\n\t\t\t\t{\n\t\t\t\t\tcontainer: this.$refs['container'],\n\t\t\t\t\tbutton: this,\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\n\t\tgetContainer(): HTMLElement\n\t\t{\n\t\t\treturn this.$refs['container'];\n\t\t},\n\n\t\tselect(): void\n\t\t{\n\t\t\tthis.selected = true;\n\t\t},\n\n\t\tdeselect(): void\n\t\t{\n\t\t\tthis.selected = false;\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div \n\t\t\tclass=\"ui-tile-uploader-settings\" \n\t\t\t:class=\"{ '--selected': this.selected }\" \n\t\t\t@click=\"handleSettingsClick\" \n\t\t\tref=\"container\"\n\t\t></div>\n\t`\n};\n","import { Loc } from 'main.core';\n\nimport { SettingsButton } from './settings-button';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\nexport const DropArea: BitrixVueComponentProps = {\n\tinject: ['uploader', 'widgetOptions', 'emitter'],\n\tcomponents: {\n\t\tSettingsButton,\n\t},\n\tmounted(): void\n\t{\n\t\tthis.uploader.assignBrowse(this.$refs.dropArea);\n\t},\n\tcomputed: {\n\t\tdropLabel(): string {\n\t\t\treturn Loc.getMessage('TILE_UPLOADER_DROP_FILES_HERE');\n\t\t}\n\t},\n\tmethods: {\n\t\thandleSettingsClick()\n\t\t{\n\t\t\tthis.emitter.emit('onSettingsButtonClick', { button: this.$refs['ui-tile-uploader-settings'] });\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-tile-uploader-drop-area\">\n\t\t\t<div class=\"ui-tile-uploader-drop-box\">\n\t\t\t\t<label class=\"ui-tile-uploader-drop-label\" ref=\"dropArea\">{{dropLabel}}</label>\n\t\t\t\t<SettingsButton v-if=\"widgetOptions.showSettingsButton\" />\n\t\t\t</div>\n\t\t</div>\n\t`\n};\n","import { ProgressRound } from 'ui.progressround';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\n/**\n * @memberof BX.UI.Uploader\n */\nexport const UploadLoader: BitrixVueComponentProps = {\n\tprops: {\n\t\tprogress: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0,\n\t\t},\n\t\twidth: {\n\t\t\ttype: Number,\n\t\t\tdefault: 45,\n\t\t},\n\t\tlineSize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 3,\n\t\t},\n\t\tcolorTrack: {\n\t\t\ttype: String,\n\t\t\tdefault: '#eeeff0',\n\t\t},\n\t\tcolorBar: {\n\t\t\ttype: String,\n\t\t\tdefault: '#2fc6f6',\n\t\t},\n\t\trotation: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tmounted()\n\t{\n\t\tthis.createProgressbar();\n\t},\n\twatch: {\n\t\tprogress()\n\t\t{\n\t\t\tthis.updateProgressbar();\n\t\t},\n\t},\n\tmethods: {\n\t\tcreateProgressbar()\n\t\t{\n\t\t\tthis.loader = new ProgressRound({\n\t\t\t\twidth: this.width,\n\t\t\t\tlineSize: this.lineSize,\n\t\t\t\tcolorBar: this.colorBar,\n\t\t\t\tcolorTrack: this.colorTrack,\n\t\t\t\trotation: this.rotation,\n\t\t\t\tvalue: this.progress,\n\t\t\t\tcolor: ProgressRound.Color.SUCCESS,\n\t\t\t});\n\n\t\t\tthis.loader.renderTo(this.$refs.container);\n\t\t},\n\t\tupdateProgressbar()\n\t\t{\n\t\t\tif (!this.loader)\n\t\t\t{\n\t\t\t\tthis.createProgressbar();\n\t\t\t}\n\n\t\t\tthis.loader.update(this.progress);\n\t\t},\n\t},\n\ttemplate: `<span ref=\"container\"></span>`\n};\n","import { Popup } from 'main.popup';\nimport { Type } from 'main.core';\n\nimport type { UploaderError } from 'ui.uploader.core';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\n/**\n * @memberof BX.UI.Uploader\n */\nexport const ErrorPopup: BitrixVueComponentProps = {\n\tprops: {\n\t\terror: {\n\t\t\ttype: [Object, String],\n\t\t},\n\t\talignArrow: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tpopupOptions: {\n\t\t\ttype: Object,\n\t\t\tdefault()\n\t\t\t{\n\t\t\t\treturn {};\n\t\t\t}\n\t\t},\n\t},\n\temits: ['onDestroy'],\n\twatch: {\n\t\terror(newValue): void\n\t\t{\n\t\t\tif (this.errorPopup)\n\t\t\t{\n\t\t\t\tthis.errorPopup.destroy();\n\t\t\t}\n\n\t\t\tthis.errorPopup = this.createPopup(newValue);\n\t\t\tthis.errorPopup.show();\n\t\t}\n\t},\n\tcreated(): void\n\t{\n\t\tthis.errorPopup = null;\n\t},\n\tmounted(): void\n\t{\n\t\tif (this.error)\n\t\t{\n\t\t\tthis.errorPopup = this.createPopup(this.error);\n\t\t\tthis.errorPopup.show();\n\t\t}\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tif (this.errorPopup)\n\t\t{\n\t\t\tthis.errorPopup.destroy();\n\t\t\tthis.errorPopup = null;\n\t\t}\n\t},\n\tmethods: {\n\t\tcreateContent(error: UploaderError | string): string\n\t\t{\n\t\t\tif (Type.isStringFilled(error))\n\t\t\t{\n\t\t\t\treturn error;\n\t\t\t}\n\t\t\telse if (Type.isObject(error))\n\t\t\t{\n\t\t\t\treturn error.message + '<br>' + error.description;\n\t\t\t}\n\n\t\t\treturn '';\n\t\t},\n\n\t\tcreatePopup(error: UploaderError | string): Popup\n\t\t{\n\t\t\tconst content = this.createContent(error);\n\t\t\tlet defaultOptions;\n\t\t\tif (this.alignArrow && Type.isElementNode(this.popupOptions.bindElement))\n\t\t\t{\n\t\t\t\tconst targetNode = this.popupOptions.bindElement;\n\t\t\t\tconst targetNodeWidth = targetNode.offsetWidth;\n\n\t\t\t\tdefaultOptions = {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\tcontent,\n\t\t\t\t\t// minWidth: 300,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonDestroy: () => {\n\t\t\t\t\t\t\tthis.$emit('onDestroy', error);\n\t\t\t\t\t\t\tthis.errorPopup = null;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonShow: function(event) {\n\t\t\t\t\t\t\tconst popup = event.getTarget();\n\t\t\t\t\t\t\tpopup.getPopupContainer().style.display = 'block';\n\n\t\t\t\t\t\t\tconst popupWidth = popup.getPopupContainer().offsetWidth;\n\t\t\t\t\t\t\tconst offsetLeft = (targetNodeWidth / 2) - (popupWidth / 2);\n\t\t\t\t\t\t\tconst angleShift = Popup.getOption('angleLeftOffset') - Popup.getOption('angleMinTop');\n\n\t\t\t\t\t\t\tpopup.setAngle({ offset: popupWidth / 2 - angleShift });\n\t\t\t\t\t\t\tpopup.setOffset({ offsetLeft: offsetLeft + Popup.getOption('angleLeftOffset') });\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tdefaultOptions = {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tanimation: 'fading-slide',\n\t\t\t\t\tcontent,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonDestroy: () => {\n\t\t\t\t\t\t\tthis.$emit('onDestroy', error);\n\t\t\t\t\t\t\tthis.errorPopup = null;\n\t\t\t\t\t\t},\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst options = Object.assign({}, defaultOptions, this.popupOptions);\n\n\t\t\treturn new Popup(options);\n\t\t}\n\t},\n\ttemplate: '<span></span>',\n};\n","import { FileIcon } from 'ui.icons.generator';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n/**\n * @memberof BX.UI.Uploader\n */\nexport const FileIconComponent: BitrixVueComponentProps = {\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t},\n\t\ttype: {\n\t\t\ttype: String,\n\t\t},\n\t\tcolor: {\n\t\t\ttype: String,\n\t\t},\n\t\tsize: {\n\t\t\ttype: Number,\n\t\t\tdefault: 36,\n\t\t},\n\t},\n\tmounted(): void\n\t{\n\t\tconst icon = new FileIcon({\n\t\t\tname: this.name,\n\t\t\tfileType: this.type,\n\t\t\tcolor: this.color,\n\t\t\tsize: this.size,\n\t\t});\n\n\t\ticon.renderTo(this.$el);\n\t},\n\ttemplate: '<span></span>',\n};\n","import { PopupOptions, MenuManager } from 'main.popup';\nimport { Text, Loc, Type } from 'main.core';\nimport { FileOrigin, FileStatus, FileStatusType } from 'ui.uploader.core';\n\nimport { UploadLoader } from './upload-loader';\nimport { ErrorPopup } from './error-popup';\nimport { FileIconComponent } from './file-icon';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\nimport { TileWidgetSlot } from 'ui.uploader.tile-widget';\n\nexport const TileItem: BitrixVueComponentProps = {\n\tcomponents: {\n\t\tUploadLoader,\n\t\tErrorPopup,\n\t\tFileIconComponent,\n\t},\n\tinject: ['uploader', 'widgetOptions', 'emitter'],\n\tprops: {\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\tdefault: {}\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\ttileId: 'tile-uploader-' + Text.getRandom().toLowerCase(),\n\t\t\tshowError: false,\n\t\t};\n\t},\n\tcomputed: {\n\t\tFileStatus: (): FileStatusType => FileStatus,\n\t\tstatus(): string\n\t\t{\n\t\t\tif (this.item.status === FileStatus.UPLOADING)\n\t\t\t{\n\t\t\t\treturn this.item.progress + '%';\n\t\t\t}\n\t\t\telse if (this.item.status === FileStatus.LOAD_FAILED || this.item.status === FileStatus.UPLOAD_FAILED)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('TILE_UPLOADER_ERROR_STATUS');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('TILE_UPLOADER_WAITING_STATUS');\n\t\t\t}\n\t\t},\n\t\tfileSize(): string\n\t\t{\n\t\t\tif (\n\t\t\t\t[FileStatus.LOADING, FileStatus.LOAD_FAILED].includes(this.item.status)\n\t\t\t\t&& this.item.origin === FileOrigin.SERVER\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\treturn this.item.sizeFormatted;\n\t\t},\n\t\terrorPopupOptions(): PopupOptions\n\t\t{\n\t\t\tconst targetNode = this.$refs.container;\n\t\t\tconst targetNodeWidth = targetNode.offsetWidth;\n\n\t\t\treturn {\n\t\t\t\tbindElement: targetNode,\n\t\t\t\tdarkMode: true,\n\t\t\t\toffsetTop: 6,\n\t\t\t\tminWidth: targetNodeWidth,\n\t\t\t\tmaxWidth: 500,\n\t\t\t};\n\t\t},\n\t\tclampedFileName(): string\n\t\t{\n\t\t\tconst nameParts = this.item.name.split('.');\n\t\t\tif (nameParts.length > 1)\n\t\t\t{\n\t\t\t\tnameParts.pop();\n\t\t\t}\n\n\t\t\tconst nameWithoutExtension = nameParts.join('.');\n\t\t\tif (nameWithoutExtension.length > 27)\n\t\t\t{\n\t\t\t\treturn nameWithoutExtension.substr(0, 17) + '...' + nameWithoutExtension.substr(-5);\n\t\t\t}\n\n\t\t\treturn nameWithoutExtension;\n\t\t},\n\n\t\tshowItemMenuButton(): boolean\n\t\t{\n\t\t\tif (Type.isBoolean(this.widgetOptions.showItemMenuButton))\n\t\t\t{\n\t\t\t\treturn this.widgetOptions.showItemMenuButton;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn this.menuItems.length > 0;\n\t\t\t}\n\t\t},\n\n\t\tmenuItems(): Array\n\t\t{\n\t\t\tconst items = [];\n\n\t\t\tif (Type.isStringFilled(this.item.downloadUrl))\n\t\t\t{\n\t\t\t\titems.push({\n\t\t\t\t\tid: 'download',\n\t\t\t\t\ttext: Loc.getMessage('TILE_UPLOADER_MENU_DOWNLOAD'),\n\t\t\t\t\thref: this.item.downloadUrl,\n\t\t\t\t\tonclick: (): void => {\n\t\t\t\t\t\tif (this.menu)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.menu.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\titems.push({\n\t\t\t\t\tid: 'remove',\n\t\t\t\t\ttext: Loc.getMessage('TILE_UPLOADER_MENU_REMOVE'),\n\t\t\t\t\tonclick: (): void => {\n\t\t\t\t\t\tthis.remove();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn items;\n\t\t},\n\t\textraAction(): ?BitrixVueComponentProps\n\t\t{\n\t\t\treturn (\n\t\t\t\tthis.widgetOptions.slots && this.widgetOptions.slots[TileWidgetSlot.ITEM_EXTRA_ACTION]\n\t\t\t\t? this.widgetOptions.slots[TileWidgetSlot.ITEM_EXTRA_ACTION]\n\t\t\t\t: null\n\t\t\t);\n\t\t},\n\t},\n\tcreated(): void\n\t{\n\t\tthis.menu = null;\n\t},\n\tbeforeUnmount(): void\n\t{\n\t\tif (this.menu)\n\t\t{\n\t\t\tthis.menu.destroy();\n\t\t\tthis.menu = null;\n\t\t}\n\t},\n\tmethods: {\n\t\tremove(): void\n\t\t{\n\t\t\tthis.uploader.removeFile(this.item.id);\n\t\t},\n\n\t\thandleMouseEnter(item): void\n\t\t{\n\t\t\tif (item.error)\n\t\t\t{\n\t\t\t\tthis.showError = true;\n\t\t\t}\n\t\t},\n\n\t\thandleMouseLeave(): void\n\t\t{\n\t\t\tthis.showError = false;\n\t\t},\n\n\t\ttoggleMenu(): void\n\t\t{\n\t\t\tif (this.menu)\n\t\t\t{\n\t\t\t\tif (this.menu.getPopupWindow().isShown())\n\t\t\t\t{\n\t\t\t\t\tthis.menu.close();\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.menu.destroy();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.menu = MenuManager.create({\n\t\t\t\tid: this.tileId,\n\t\t\t\tbindElement: this.$refs.menu,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 13,\n\t\t\t\tminWidth: 100,\n\t\t\t\tcacheable: false,\n\t\t\t\titems: this.menuItems,\n\t\t\t\tevents: {\n\t\t\t\t\tonDestroy: () => this.menu = null,\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tthis.emitter.emit('TileItem:onMenuCreate', { menu: this.menu, item: this.item })\n\n\t\t\tthis.menu.show();\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t<div\n\t\tclass=\"ui-tile-uploader-item\"\n\t\t:class=\"['ui-tile-uploader-item--' + item.status, { '--image': item.isImage, '--selected': item.tileWidgetData?.selected } ]\"\n\t\tref=\"container\"\n\t>\n\t\t<ErrorPopup v-if=\"item.error && showError\" :error=\"item.error\" :popup-options=\"errorPopupOptions\"/>\n\t\t<div \n\t\t\tclass=\"ui-tile-uploader-item-content\"\n\t\t\t@mouseenter=\"handleMouseEnter(item)\" \n\t\t\t@mouseleave=\"handleMouseLeave(item)\"\n\t\t>\n\t\t\t<div v-if=\"item.status !== FileStatus.COMPLETE\" class=\"ui-tile-uploader-item-state\">\n\t\t\t\t<div class=\"ui-tile-uploader-item-loader\" v-if=\"item.status === FileStatus.UPLOADING\">\n\t\t\t\t\t<UploadLoader :progress=\"item.progress\" :width=\"20\" colorTrack=\"#73d8f8\" colorBar=\"#fff\" />\n\t\t\t\t</div>\n\t\t\t\t<div v-else class=\"ui-tile-uploader-item-state-icon\"></div>\n\t\t\t\t<div class=\"ui-tile-uploader-item-status\">\n\t\t\t\t\t<div class=\"ui-tile-uploader-item-status-name\">{{status}}</div>\n\t\t\t\t\t<div v-if=\"fileSize\" class=\"ui-tile-uploader-item-state-desc\">{{fileSize}}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-tile-uploader-item-state-remove\" @click=\"remove\" key=\"aaa\"></div>\n\t\t\t</div>\n\t\t\t<template v-else>\n\t\t\t\t<div class=\"ui-tile-uploader-item-remove\" @click=\"remove\" key=\"remove\"></div>\n\t\t\t\t<div class=\"ui-tile-uploader-item-actions\" key=\"actions\">\n\t\t\t\t\t<div class=\"ui-tile-uploader-item-actions-pad\">\n\t\t\t\t\t\t<div v-if=\"extraAction\" class=\"ui-tile-uploader-item-extra-actions\">\n\t\t\t\t\t\t\t<component :is=\"extraAction\" :item=\"this.item\"></component>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-if=\"showItemMenuButton\" class=\"ui-tile-uploader-item-menu\" @click=\"toggleMenu\" ref=\"menu\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<div class=\"ui-tile-uploader-item-preview\">\n\t\t\t\t<div\n\t\t\t\t\tv-if=\"item.previewUrl\"\n\t\t\t\t\tclass=\"ui-tile-uploader-item-image\"\n\t\t\t\t\t:class=\"{ 'ui-tile-uploader-item-image-default': item.previewUrl === null }\"\n\t\t\t\t\t:style=\"{ backgroundImage: item.previewUrl !== null ? 'url(' + item.previewUrl + ')' : '' }\">\n\t\t\t\t</div>\n\t\t\t\t<div \n\t\t\t\t\tv-else-if=\"item.name\" \n\t\t\t\t\tclass=\"ui-tile-uploader-item-file-icon\"\n\t\t\t\t>\n\t\t\t\t\t<FileIconComponent :name=\"item.extension ? item.extension : '...'\" />\n\t\t\t\t</div>\n\t\t\t\t<div \n\t\t\t\t\tv-else \n\t\t\t\t\tclass=\"ui-tile-uploader-item-file-default\"\n\t\t\t\t>\n\t\t\t\t\t<FileIconComponent :name=\"item.extension ? item.extension : '...'\" :size=\"36\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if=\"item.name\" class=\"ui-tile-uploader-item-name-box\" :title=\"item.name\">\n\t\t\t\t<div class=\"ui-tile-uploader-item-name\">\n\t\t\t\t\t<span class=\"ui-tile-uploader-item-name-title\">{{clampedFileName}}</span><!--\n\t\t\t\t\t--><span v-if=\"item.extension\" class=\"ui-tile-uploader-item-name-extension\">.{{item.extension}}</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n\t`\n};\n","import type { BitrixVueComponentProps } from 'ui.vue3';\nimport { ErrorPopup, UploadLoader } from 'ui.uploader.tile-widget';\nimport { FileIconComponent } from './file-icon';\nimport { Loc } from 'main.core';\n\nexport const TileMoreItem: BitrixVueComponentProps = {\n\tcomponents: {\n\t\tUploadLoader,\n\t\tErrorPopup,\n\t\tFileIconComponent,\n\t},\n\temit: ['onClick'],\n\tprops: {\n\t\thiddenFilesCount: {\n\t\t\ttype: Number,\n\t\t\tdefault: 0\n\t\t},\n\t},\n\tcomputed: {\n\t\tmoreButtonCaption(): string {\n\t\t\treturn Loc.getMessage(\n\t\t\t\t'TILE_UPLOADER_MORE_BUTTON_CAPTION',\n\t\t\t\t{\n\t\t\t\t\t'#COUNT#': `<span class=\"ui-tile-uploader-item-more-count\">${this.hiddenFilesCount}</span>`\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-tile-uploader-item\" @click=\"$emit('onClick')\">\n\t\t\t<div class=\"ui-tile-uploader-item-more\">\n\t\t\t\t<div class=\"ui-tile-uploader-item-more-icon\"></div>\n\t\t\t\t<div class=\"ui-tile-uploader-item-more-label\" v-html=\"moreButtonCaption\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};","import { TileItem } from './tile-item';\nimport { TileMoreItem } from './tile-more-item';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\nimport type { TileWidgetItem } from '../tile-widget-item';\n\n/**\n * @memberof BX.UI.Uploader\n */\nexport const TileList: BitrixVueComponentProps = {\n\tcomponents: {\n\t\tTileItem,\n\t\tTileMoreItem,\n\t},\n\temits: ['onUnmount'],\n\tprops: {\n\t\tautoCollapse: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\tdefault: []\n\t\t}\n\t},\n\tdata: (): Object => ({\n\t\tpageSize: 5,\n\t\tfirstHiddenItem: null,\n\t\tlastHiddenItem: null,\n\t}),\n\tcreated(): void\n\t{\n\t\tthis.moreItemBlocked = false;\n\n\t\tif (!this.autoCollapse)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.items.length > this.pageSize)\n\t\t{\n\t\t\tthis.firstHiddenItem = this.items[this.pageSize];\n\t\t\tthis.lastHiddenItem = this.items[this.items.length - 1];\n\t\t}\n\t},\n\tunmounted(): void\n\t{\n\t\tthis.$emit('onUnmount');\n\t},\n\tcomputed: {\n\t\tvisibleItems(): TileWidgetItem[]\n\t\t{\n\t\t\tif (this.firstHiddenItem === null)\n\t\t\t{\n\t\t\t\treturn this.items;\n\t\t\t}\n\n\t\t\tconst index = this.items.indexOf(this.firstHiddenItem);\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.resetMoreItem();\n\n\t\t\t\treturn this.items;\n\t\t\t}\n\n\t\t\treturn this.items.slice(0, index);\n\t\t},\n\n\t\trealtimeItems(): TileWidgetItem[]\n\t\t{\n\t\t\tif (this.lastHiddenItem === null)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst index = this.items.indexOf(this.lastHiddenItem);\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.resetMoreItem();\n\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\treturn this.items.slice(index + 1);\n\t\t},\n\n\t\thiddenFilesCount(): number\n\t\t{\n\t\t\tif (this.lastHiddenItem === null)\n\t\t\t{\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\tconst firstIndex = this.items.indexOf(this.firstHiddenItem);\n\t\t\tconst lastIndex = this.items.indexOf(this.lastHiddenItem);\n\n\t\t\tif (firstIndex === -1 || lastIndex === -1)\n\t\t\t{\n\t\t\t\tthis.resetMoreItem();\n\n\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn lastIndex - firstIndex + 1;\n\t\t},\n\t},\n\tmethods: {\n\t\tgetMore(): void\n\t\t{\n\t\t\tif (this.moreItemBlocked)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.pageSize = Math.min(this.pageSize + 5, 30);\n\n\t\t\tconst currentFirstIndex = this.items.indexOf(this.firstHiddenItem);\n\t\t\tconst lastIndex = this.items.indexOf(this.lastHiddenItem);\n\n\t\t\tconst newFirstIndex: number = currentFirstIndex + this.pageSize;\n\t\t\tconst nextFirstIndex: number = newFirstIndex > lastIndex ? lastIndex + 1 : newFirstIndex;\n\t\t\tlet itemsToShow: number = nextFirstIndex - currentFirstIndex;\n\n\t\t\tfor (let i = currentFirstIndex, delay = 0; i < nextFirstIndex; i++, delay++)\n\t\t\t{\n\t\t\t\tthis.moreItemBlocked = true;\n\t\t\t\tsetTimeout((): void => {\n\t\t\t\t\tif (i === lastIndex)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.resetMoreItem();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.firstHiddenItem = this.items[i + 1];\n\t\t\t\t\t}\n\n\t\t\t\t\titemsToShow--;\n\t\t\t\t\tif (itemsToShow === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.moreItemBlocked = false;\n\t\t\t\t\t}\n\n\t\t\t\t}, 100 * delay);\n\t\t\t}\n\t\t},\n\t\tresetMoreItem(): void\n\t\t{\n\t\t\tthis.firstHiddenItem = null;\n\t\t\tthis.lastHiddenItem = null;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-tile-uploader-items\">\n\t\t\t<transition-group name=\"ui-tile-uploader-item\" type=\"animation\">\n\t\t\t\t<TileItem v-for=\"item in visibleItems\" :key=\"item.id\" :item=\"item\" />\n\t\t\t</transition-group>\n\t\t\t<transition name=\"ui-tile-uploader-item\" type=\"animation\">\n\t\t\t\t<TileMoreItem v-if=\"hiddenFilesCount > 0\" :hidden-files-count=\"hiddenFilesCount\" @onClick=\"getMore\"/>\n\t\t\t</transition>\n\t\t\t<transition-group name=\"ui-tile-uploader-item\" type=\"animation\">\n\t\t\t\t<TileItem v-for=\"item in realtimeItems\" :key=\"item.id\" :item=\"item\" />\n\t\t\t</transition-group>\n\t\t</div>\n\t`\n};\n","import { Event } from 'main.core';\nimport { hasDataTransferOnlyFiles } from 'ui.uploader.core';\n/**\n * @memberof BX.UI.Uploader\n */\nexport const DragOverMixin = {\n\tdirectives: {\n\t\tdrop: {\n\t\t\tbeforeMount(el, binding, vnode): void\n\t\t\t{\n\t\t\t\tfunction addClass(): void\n\t\t\t\t{\n\t\t\t\t\tbinding.instance.dragOver = true;\n\t\t\t\t\tel.classList.add('--drag-over');\n\t\t\t\t}\n\n\t\t\t\tfunction removeClass(): void\n\t\t\t\t{\n\t\t\t\t\tbinding.instance.dragOver = false;\n\t\t\t\t\tel.classList.remove('--drag-over');\n\t\t\t\t}\n\n\t\t\t\tlet lastEnterTarget = null;\n\t\t\t\tEvent.bind(el, 'dragenter', (event: DragEvent): void => {\n\t\t\t\t\thasDataTransferOnlyFiles(event.dataTransfer, false).then((success): void => {\n\t\t\t\t\t\tif (success)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\t\t\tlastEnterTarget = event.target;\n\t\t\t\t\t\t\taddClass();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tEvent.bind(el, 'dragleave', (event: DragEvent): void => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\tif (lastEnterTarget === event.target)\n\t\t\t\t\t{\n\t\t\t\t\t\tremoveClass();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tEvent.bind(el, 'drop', (event: DragEvent): void => {\n\t\t\t\t\tremoveClass();\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tunmounted(el, binding, vnode)\n\t\t\t{\n\t\t\t\tbinding.instance.dragOver = false;\n\t\t\t\tEvent.unbindAll(el, 'dragenter');\n\t\t\t\tEvent.unbindAll(el, 'dragleave');\n\t\t\t\tEvent.unbindAll(el, 'drop');\n\t\t\t}\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {\n\t\t\tdragOver: false,\n\t\t}\n\t},\n };","import { Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { VueUploaderComponent } from 'ui.uploader.vue';\nimport { TileWidgetSlot } from 'ui.uploader.tile-widget';\n\nimport { DropArea } from './drop-area';\nimport { TileList } from './tile-list';\nimport { ErrorPopup } from './error-popup';\nimport { DragOverMixin } from '../mixins/drag-over-mixin';\n\nimport type { UploaderFileInfo } from 'ui.uploader.core';\nimport type { BitrixVueComponentProps } from 'ui.vue3';\nimport type { PopupOptions } from 'main.popup';\n\n/**\n * @memberof BX.UI.Uploader\n */\nexport const TileWidgetComponent: BitrixVueComponentProps = {\n\tname: 'TileWidget',\n\textends: VueUploaderComponent,\n\tcomponents: {\n\t\tDropArea,\n\t\tTileList,\n\t\tErrorPopup,\n\t},\n\tmixins: [\n\t\tDragOverMixin,\n\t],\n\tdata() {\n\t\treturn {\n\t\t\tisMounted: false,\n\t\t\tautoCollapse: false,\n\t\t}\n\t},\n\tcomputed: {\n\t\terrorPopupOptions(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\tbindElement: this.$refs.container,\n\t\t\t\tcloseIcon: true,\n\t\t\t\tpadding: 20,\n\t\t\t\toffsetLeft: 45,\n\t\t\t\tangle: true,\n\t\t\t\tdarkMode: true,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t\tforceTop: true,\n\t\t\t\t},\n\t\t\t};\n\t\t},\n\t\tTileWidgetSlot: () => TileWidgetSlot,\n\t\tslots(): TileWidgetSlot\n\t\t{\n\t\t\tconst slots = Type.isPlainObject(this.widgetOptions.slots) ? this.widgetOptions.slots : {};\n\n\t\t\treturn {\n\t\t\t\t[TileWidgetSlot.BEFORE_TILE_LIST]: slots[TileWidgetSlot.BEFORE_TILE_LIST],\n\t\t\t\t[TileWidgetSlot.AFTER_TILE_LIST]: slots[TileWidgetSlot.AFTER_TILE_LIST],\n\t\t\t\t[TileWidgetSlot.BEFORE_DROP_AREA]: slots[TileWidgetSlot.BEFORE_DROP_AREA],\n\t\t\t\t[TileWidgetSlot.AFTER_DROP_AREA]: slots[TileWidgetSlot.AFTER_DROP_AREA],\n\t\t\t}\n\t\t}\n\t},\n\tcreated(): void\n\t{\n\t\tthis.autoCollapse =\n\t\t\tType.isBoolean(this.widgetOptions.autoCollapse)\n\t\t\t\t? this.widgetOptions.autoCollapse\n\t\t\t\t: this.items.length > 0\n\t\t;\n\n\t\t// Current Items\n\t\tthis.items.forEach(item => {\n\t\t\titem['tileWidgetData'] = {};\n\t\t});\n\n\t\t// New Items\n\t\tthis.adapter.subscribe('Item:onBeforeAdd', (event: BaseEvent): void => {\n\t\t\tconst item: UploaderFileInfo = event.getData().item;\n\t\t\titem['tileWidgetData'] = {};\n\t\t});\n\n\t\tthis.adapter.subscribe('Item:onAdd', (event: BaseEvent): void => {\n\t\t\tthis.uploaderError = null;\n\t\t});\n\n\t\tthis.adapter.subscribe('Item:onRemove', (event: BaseEvent): void => {\n\t\t\tthis.uploaderError = null;\n\t\t});\n\t},\n\tmounted(): void\n\t{\n\t\tthis.uploader.assignDropzone(this.$refs.container);\n\t\tthis.isMounted = true;\n\t},\n\tmethods: {\n\t\tenableAutoCollapse(): void\n\t\t{\n\t\t\tthis.autoCollapse = true;\n\t\t},\n\n\t\tdisableAutoCollapse(): void\n\t\t{\n\t\t\tthis.autoCollapse = false;\n\t\t},\n\n\t\thandlePopupDestroy(error)\n\t\t{\n\t\t\tif (this.uploaderError === error)\n\t\t\t{\n\t\t\t\tthis.uploaderError = null;\n\t\t\t}\n\t\t}\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"ui-tile-uploader\" ref=\"container\" v-drop>\n\t\t\t<component :is=\"slots[TileWidgetSlot.BEFORE_TILE_LIST]\"></component>\n\t\t\t<TileList \n\t\t\t\tv-if=\"items.length !== 0\" \n\t\t\t\t:items=\"items\" \n\t\t\t\t:auto-collapse=\"autoCollapse\" \n\t\t\t\t@onUnmount=\"this.autoCollapse = false\"\n\t\t\t/>\n\t\t\t<component :is=\"slots[TileWidgetSlot.AFTER_TILE_LIST]\"></component>\n\t\t\t<component :is=\"slots[TileWidgetSlot.BEFORE_DROP_AREA]\"></component>\n\t\t\t<DropArea />\n\t\t\t<component :is=\"slots[TileWidgetSlot.AFTER_DROP_AREA]\"></component>\n\t\t</div>\n\t\t<ErrorPopup\n\t\t\tv-if=\"uploaderError && isMounted\"\n\t\t\t:alignArrow=\"false\"\n\t\t\t:error=\"uploaderError\"\n\t\t\t:popup-options=\"errorPopupOptions\"\n\t\t\t@onDestroy=\"handlePopupDestroy\"\n\t\t/>\n\t`\n};\n","import { Type } from 'main.core';\nimport { VueUploaderWidget } from 'ui.uploader.vue';\n\nimport { TileWidgetComponent } from './components/tile-widget-component';\n\nimport type { UploaderOptions } from 'ui.uploader.core';\nimport type { TileWidgetOptions } from './tile-widget-options';\n\n/**\n * @memberof BX.UI.Uploader\n */\nexport default class TileWidget extends VueUploaderWidget\n{\n\tconstructor(uploaderOptions: UploaderOptions, tileWidgetOptions: TileWidgetOptions)\n\t{\n\t\tconst widgetOptions = Type.isPlainObject(tileWidgetOptions) ? Object.assign({}, tileWidgetOptions) : {};\n\t\tsuper(uploaderOptions, widgetOptions);\n\t}\n\n\tdefineComponent(): ?Function\n\t{\n\t\treturn TileWidgetComponent;\n\t}\n}\n","export const TileWidgetSlot: Object<string, string> = {\n\tBEFORE_TILE_LIST: 'beforeTileList',\n\tAFTER_TILE_LIST: 'afterTileList',\n\tBEFORE_DROP_AREA: 'beforeDropArea',\n\tAFTER_DROP_AREA: 'afterDropArea',\n\tITEM_EXTRA_ACTION: 'Item:extraAction',\n};"],"names":["SettingsButton","inject","data","selected","methods","handleSettingsClick","emitter","emit","container","$refs","button","getContainer","select","deselect","template","DropArea","components","mounted","uploader","assignBrowse","dropArea","computed","dropLabel","Loc","getMessage","UploadLoader","props","progress","type","Number","default","width","lineSize","colorTrack","String","colorBar","rotation","Boolean","createProgressbar","watch","updateProgressbar","loader","ProgressRound","value","color","Color","SUCCESS","renderTo","update","ErrorPopup","error","Object","alignArrow","popupOptions","emits","newValue","errorPopup","destroy","createPopup","show","created","beforeUnmount","createContent","Type","isStringFilled","isObject","message","description","content","defaultOptions","isElementNode","bindElement","targetNode","targetNodeWidth","offsetWidth","cacheable","animation","events","onDestroy","$emit","onShow","event","popup","getTarget","getPopupContainer","style","display","popupWidth","offsetLeft","angleShift","Popup","getOption","setAngle","offset","setOffset","options","assign","FileIconComponent","name","size","icon","FileIcon","fileType","$el","TileItem","item","tileId","Text","getRandom","toLowerCase","showError","FileStatus","status","UPLOADING","LOAD_FAILED","UPLOAD_FAILED","fileSize","LOADING","includes","origin","FileOrigin","SERVER","sizeFormatted","errorPopupOptions","darkMode","offsetTop","minWidth","maxWidth","clampedFileName","nameParts","split","length","pop","nameWithoutExtension","join","substr","showItemMenuButton","isBoolean","widgetOptions","menuItems","items","downloadUrl","push","id","text","href","onclick","menu","close","remove","extraAction","slots","TileWidgetSlot","ITEM_EXTRA_ACTION","removeFile","handleMouseEnter","handleMouseLeave","toggleMenu","getPopupWindow","isShown","MenuManager","create","angle","TileMoreItem","hiddenFilesCount","moreButtonCaption","TileList","autoCollapse","Array","pageSize","firstHiddenItem","lastHiddenItem","moreItemBlocked","unmounted","visibleItems","index","indexOf","resetMoreItem","slice","realtimeItems","firstIndex","lastIndex","getMore","Math","min","currentFirstIndex","newFirstIndex","nextFirstIndex","itemsToShow","i","delay","setTimeout","DragOverMixin","directives","drop","beforeMount","el","binding","vnode","addClass","instance","dragOver","classList","add","removeClass","lastEnterTarget","Event","bind","hasDataTransferOnlyFiles","dataTransfer","then","success","preventDefault","stopPropagation","target","unbindAll","TileWidgetComponent","extends","VueUploaderComponent","mixins","isMounted","closeIcon","padding","bindOptions","position","forceTop","isPlainObject","BEFORE_TILE_LIST","AFTER_TILE_LIST","BEFORE_DROP_AREA","AFTER_DROP_AREA","forEach","adapter","subscribe","getData","uploaderError","assignDropzone","enableAutoCollapse","disableAutoCollapse","handlePopupDestroy","TileWidget","VueUploaderWidget","constructor","uploaderOptions","tileWidgetOptions","defineComponent"],"mappings":"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"}