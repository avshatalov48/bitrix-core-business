{"version":3,"file":"registry.bundle.js","sources":["../src/application.js","../src/callapplication.js","../src/messages.js","../src/dialogues.js","../src/users.js","../src/files.js","../src/recent.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Application model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {DeviceType, DeviceOrientation} from 'im.const';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcommon:\n\t\t\t{\n\t\t\t\thost: this.getVariable('common.host', location.protocol+'//'+location.host),\n\t\t\t\tsiteId: this.getVariable('common.siteId', 'default'),\n\t\t\t\tuserId: this.getVariable('common.userId', 0),\n\t\t\t\tlanguageId: this.getVariable('common.languageId', 'en'),\n\t\t\t},\n\t\t\tdialog:\n\t\t\t{\n\t\t\t\tdialogId: this.getVariable('dialog.dialogId', '0'),\n\t\t\t\tchatId: this.getVariable('dialog.chatId', 0),\n\t\t\t\tdiskFolderId: this.getVariable('dialog.diskFolderId', 0),\n\t\t\t\tmessageLimit: this.getVariable('dialog.messageLimit', 20),\n\t\t\t\tenableReadMessages: this.getVariable('dialog.enableReadMessages', true),\n\t\t\t\tmessageExtraCount: 0,\n\t\t\t},\n\t\t\tdisk:\n\t\t\t{\n\t\t\t\tenabled: false,\n\t\t\t\tmaxFileSize: 5242880,\n\t\t\t},\n\t\t\tcall:\n\t\t\t{\n\t\t\t\tserverEnabled: false,\n\t\t\t\tmaxParticipants: 24,\n\t\t\t},\n\t\t\tmobile:\n\t\t\t{\n\t\t\t\tkeyboardShow: false,\n\t\t\t},\n\t\t\tdevice:\n\t\t\t{\n\t\t\t\ttype: this.getVariable('device.type', DeviceType.desktop),\n\t\t\t\torientation: this.getVariable('device.orientation', DeviceOrientation.portrait),\n\t\t\t},\n\t\t\toptions:\n\t\t\t{\n\t\t\t\tquoteEnable: this.getVariable('options.quoteEnable', true),\n\t\t\t\tquoteFromRight: this.getVariable('options.quoteFromRight', true),\n\t\t\t\tautoplayVideo: this.getVariable('options.autoplayVideo', true),\n\t\t\t\tdarkBackground: this.getVariable('options.darkBackground', false),\n\t\t\t\tshowSmiles: false\n\t\t\t},\n\t\t\terror:\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\tcode: '',\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn Object.assign({\n\t\t\tcommon: this.getVariable('saveException.common', null),\n\t\t\tdialog: this.getVariable('saveException.dialog', null),\n\t\t\tmobile: this.getVariable('saveException.mobile', null),\n\t\t\tdevice: this.getVariable('saveException.device', null),\n\t\t\terror: this.getVariable('saveException.error', null)\n\t\t});\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('set', this.validate(payload));\n\t\t\t},\n\t\t\tshowSmiles: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('showSmiles')\n\t\t\t},\n\t\t\thideSmiles: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('hideSmiles');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tlet hasChange = false;\n\t\t\t\tfor (let group in payload)\n\t\t\t\t{\n\t\t\t\t\tif (!payload.hasOwnProperty(group))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let field in payload[group])\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!payload[group].hasOwnProperty(field))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate[group][field] = payload[group][field];\n\t\t\t\t\t\thasChange = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (hasChange && this.isSaveNeeded(payload))\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tincreaseDialogExtraCount(state, payload = {})\n\t\t\t{\n\t\t\t\tlet {count = 1} = payload;\n\n\t\t\t\tstate.dialog.messageExtraCount += count;\n\t\t\t},\n\t\t\tdecreaseDialogExtraCount(state, payload = {})\n\t\t\t{\n\t\t\t\tlet {count = 1} = payload;\n\n\t\t\t\tlet newCounter = state.dialog.messageExtraCount - count;\n\t\t\t\tif (newCounter <= 0)\n\t\t\t\t{\n\t\t\t\t\tnewCounter = 0;\n\t\t\t\t}\n\n\t\t\t\tstate.dialog.messageExtraCount = newCounter;\n\t\t\t},\n\t\t\tclearDialogExtraCount(state)\n\t\t\t{\n\t\t\t\tstate.dialog.messageExtraCount = 0;\n\t\t\t},\n\t\t\tshowSmiles(state)\n\t\t\t{\n\t\t\t\tstate.options.showSmiles = true;\n\t\t\t},\n\t\t\thideSmiles(state)\n\t\t\t{\n\t\t\t\tstate.options.showSmiles = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tvalidate(fields)\n\t{\n\t\tconst result = {};\n\n\t\tif (typeof fields.common === 'object' && fields.common)\n\t\t{\n\t\t\tresult.common = {};\n\n\t\t\tif (typeof fields.common.userId === 'number')\n\t\t\t{\n\t\t\t\tresult.common.userId = fields.common.userId;\n\t\t\t}\n\n\t\t\tif (typeof fields.common.languageId === 'string')\n\t\t\t{\n\t\t\t\tresult.common.languageId = fields.common.languageId;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.dialog === 'object' && fields.dialog)\n\t\t{\n\t\t\tresult.dialog = {};\n\n\t\t\tif (typeof fields.dialog.dialogId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.dialogId = fields.dialog.dialogId.toString();\n\t\t\t\tresult.dialog.chatId = 0;\n\t\t\t}\n\t\t\telse if (typeof fields.dialog.dialogId === 'string')\n\t\t\t{\n\t\t\t\tresult.dialog.dialogId = fields.dialog.dialogId;\n\n\t\t\t\tif (typeof fields.dialog.chatId !== 'number')\n\t\t\t\t{\n\t\t\t\t\tlet chatId = fields.dialog.dialogId;\n\t\t\t\t\tif (chatId.startsWith('chat'))\n\t\t\t\t\t{\n\t\t\t\t\t\tchatId = fields.dialog.dialogId.substr(4);\n\t\t\t\t\t}\n\n\t\t\t\t\tchatId = parseInt(chatId);\n\n\t\t\t\t\tresult.dialog.chatId = !isNaN(chatId)? chatId: 0;\n\t\t\t\t\tfields.dialog.chatId = result.dialog.chatId;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.chatId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.chatId = fields.dialog.chatId;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.diskFolderId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.diskFolderId = fields.dialog.diskFolderId;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.messageLimit === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.messageLimit = fields.dialog.messageLimit;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.messageExtraCount === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.messageExtraCount = fields.dialog.messageExtraCount;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.enableReadMessages === 'boolean')\n\t\t\t{\n\t\t\t\tresult.dialog.enableReadMessages = fields.dialog.enableReadMessages;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.disk === 'object' && fields.disk)\n\t\t{\n\t\t\tresult.disk = {};\n\n\t\t\tif (typeof fields.disk.enabled === 'boolean')\n\t\t\t{\n\t\t\t\tresult.disk.enabled = fields.disk.enabled;\n\t\t\t}\n\n\t\t\tif (typeof fields.disk.maxFileSize === 'number')\n\t\t\t{\n\t\t\t\tresult.disk.maxFileSize = fields.disk.maxFileSize;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.call === 'object' && fields.call)\n\t\t{\n\t\t\tresult.call = {};\n\n\t\t\tif (typeof fields.call.serverEnabled === 'boolean')\n\t\t\t{\n\t\t\t\tresult.call.serverEnabled = fields.call.serverEnabled;\n\t\t\t}\n\n\t\t\tif (typeof fields.call.maxParticipants === 'number')\n\t\t\t{\n\t\t\t\tresult.call.maxParticipants = fields.call.maxParticipants;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.mobile === 'object' && fields.mobile)\n\t\t{\n\t\t\tresult.mobile = {};\n\n\t\t\tif (typeof fields.mobile.keyboardShow === 'boolean')\n\t\t\t{\n\t\t\t\tresult.mobile.keyboardShow = fields.mobile.keyboardShow;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.device === 'object' && fields.device)\n\t\t{\n\t\t\tresult.device = {};\n\n\t\t\tif (typeof fields.device.type === 'string' && typeof DeviceType[fields.device.type] !== 'undefined')\n\t\t\t{\n\t\t\t\tresult.device.type = fields.device.type;\n\t\t\t}\n\n\t\t\tif (typeof fields.device.orientation === 'string' && typeof DeviceOrientation[fields.device.orientation] !== 'undefined')\n\t\t\t{\n\t\t\t\tresult.device.orientation = fields.device.orientation;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.error === 'object' && fields.error)\n\t\t{\n\t\t\tif (typeof fields.error.active === 'boolean')\n\t\t\t{\n\t\t\t\tresult.error = {\n\t\t\t\t\tactive: fields.error.active,\n\t\t\t\t\tcode: fields.error.code.toString() || '',\n\t\t\t\t\tdescription: fields.error.description.toString() || '',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}","/**\n * Bitrix Messenger\n * Call Application model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {CallStateType} from 'im.const';\n\nexport class CallApplicationModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'callApplication';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcommon:\n\t\t\t{\n\t\t\t\tinited: false,\n\t\t\t\tpassChecked: true,\n\t\t\t\tshowChat: false,\n\t\t\t\tuserCount: 0,\n\t\t\t\tuserInCallCount: 0,\n\t\t\t\tstate: CallStateType.preparation,\n\t\t\t\tshowSmiles: false,\n\t\t\t\terror: '',\n\t\t\t\tconferenceTitle: '',\n\t\t\t\talias: '',\n\t\t\t\tconferenceStarted: null,\n\t\t\t\tconferenceStartDate: null,\n\t\t\t\tjoinWithVideo: null,\n\t\t\t\tuserReadyToJoin: false\n\t\t\t},\n\t\t\tuser:\n\t\t\t{\n\t\t\t\tid: -1,\n\t\t\t\thash: ''\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tcommon: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.inited === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.inited = payload.inited;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.passChecked === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.passChecked = payload.passChecked;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.showChat === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.showChat = payload.showChat;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.userCount === 'number' || typeof payload.userCount === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.userCount = parseInt(payload.userCount);\n\t\t\t\t}\n\t\t\t\tif (typeof payload.userInCallCount === 'number' || typeof payload.userInCallCount === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.userInCallCount = parseInt(payload.userInCallCount);\n\t\t\t\t}\n\t\t\t\tif (typeof payload.componentError === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.componentError = payload.componentError;\n\t\t\t\t}\n\t\t\t},\n\t\t\tuser: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.id === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.user.id = payload.id;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.hash === 'string' && payload.hash !== state.user.hash)\n\t\t\t\t{\n\t\t\t\t\tstate.user.hash = payload.hash;\n\t\t\t\t}\n\t\t\t\tif (this.isSaveNeeded({user: payload}))\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tstartCall: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.state = CallStateType.call;\n\t\t\t},\n\t\t\tendCall: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.state = CallStateType.preparation;\n\t\t\t},\n\t\t\treturnToPreparation: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.state = CallStateType.preparation;\n\t\t\t},\n\t\t\ttoggleSmiles: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.showSmiles = !state.common.showSmiles;\n\t\t\t},\n\t\t\tsetError: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.errorCode === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.error = payload.errorCode;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetConferenceTitle: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.conferenceTitle === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.conferenceTitle = payload.conferenceTitle;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetAlias: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.alias === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.alias = payload.alias;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetJoinType: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.joinWithVideo === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.joinWithVideo = payload.joinWithVideo;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetConferenceStatus: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.conferenceStarted === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.conferenceStarted = payload.conferenceStarted;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetConferenceStartDate: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (payload.conferenceStartDate instanceof Date)\n\t\t\t\t{\n\t\t\t\t\tstate.common.conferenceStartDate = payload.conferenceStartDate;\n\t\t\t\t}\n\t\t\t},\n\t\t\tsetUserReadyToJoin: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.userReadyToJoin = true;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn {\n\t\t\tcommon: {\n\t\t\t\tinited: null,\n\t\t\t\tstate: null,\n\t\t\t\tshowSmiles: null,\n\t\t\t\tuserCount: null,\n\t\t\t\tuserInCallCount: null,\n\t\t\t\terror: null,\n\t\t\t\tconferenceTitle: null,\n\t\t\t\talias: null,\n\t\t\t\tconferenceStarted: null,\n\t\t\t\tconferenceStartDate: null,\n\t\t\t\tjoinWithVideo: null,\n\t\t\t\tuserReadyToJoin: null\n\t\t\t},\n\t\t}\n\t}\n}","/**\n * Bitrix Messenger\n * Messages model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {MutationType, StorageLimit} from 'im.const';\nimport {Utils} from \"im.lib.utils\";\n\nconst IntersectionType = {\n\tempty: 'empty',\n\tequal: 'equal',\n\tnone: 'none',\n\tfound: 'found',\n\tfoundReverse: 'foundReverse',\n};\n\nexport class MessagesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'messages';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcreated: 0,\n\t\t\tcollection: {},\n\t\t\tmutationType: {},\n\t\t\tsaveMessageList: {},\n\t\t\tsaveFileList: {},\n\t\t\tsaveUserList: {},\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t}\n\t}\n\n\tgetElementState()\n\t{\n\t\treturn {\n\t\t\ttemplateId: 0,\n\t\t\ttemplateType: 'message',\n\n\t\t\tid: 0,\n\t\t\tchatId: 0,\n\t\t\tauthorId: 0,\n\t\t\tdate: new Date(),\n\t\t\ttext: \"\",\n\t\t\ttextConverted: \"\",\n\t\t\tparams: {\n\t\t\t\tTYPE : 'default',\n\t\t\t\tCOMPONENT_ID : 'bx-im-view-message',\n\t\t\t},\n\n\t\t\tpush: false,\n\t\t\tunread: false,\n\t\t\tsending: false,\n\t\t\terror: false,\n\t\t\tretry: false,\n\t\t\tblink: false,\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\n\t\t\tgetMutationType: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.mutationType[chatId])\n\t\t\t\t{\n\t\t\t\t\treturn {initialType: MutationType.none, appliedType: MutationType.none};\n\t\t\t\t}\n\n\t\t\t\treturn state.mutationType[chatId];\n\t\t\t},\n\t\t\tgetLastId: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tlet lastId = 0;\n\n\t\t\t\tfor (let i = 0; i < state.collection[chatId].length; i++)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[chatId][i];\n\t\t\t\t\tif (\n\t\t\t\t\t\telement.push\n\t\t\t\t\t\t|| element.sending\n\t\t\t\t\t\t|| element.id.toString().startsWith('temporary')\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lastId < element.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tlastId = element.id;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn lastId? lastId: null;\n\t\t\t},\n\t\t\tgetMessage: state => (chatId, messageId) =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tfor (let index = state.collection[chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tif (state.collection[chatId][index].id === messageId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.collection[chatId][index];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tget: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[chatId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState();\n\t\t\t},\n\t\t\tgetSaveFileList: state => params =>\n\t\t\t{\n\t\t\t\treturn state.saveFileList;\n\t\t\t},\n\t\t\tgetSaveUserList: state => params =>\n\t\t\t{\n\t\t\t\treturn state.saveUserList;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tadd: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload));\n\t\t\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\t\t\tresult.id = 'temporary' + (new Date).getTime() + store.state.created;\n\t\t\t\tresult.templateId = result.id;\n\t\t\t\tresult.unread = false;\n\n\t\t\t\tstore.commit('add', Object.assign({}, this.getElementState(), result));\n\n\t\t\t\tif (payload.sending !== false)\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch('actionStart', {\n\t\t\t\t\t\tid: result.id,\n\t\t\t\t\t\tchatId: result.chatId,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn result.id;\n\t\t\t},\n\t\t\tactionStart: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: true}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tactionError: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: false, error: true, retry: payload.retry !== false}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tactionFinish: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: false, error: false, retry: false}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => this.prepareMessage(message, {host: store.state.host}));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.prepareMessage(payload, {host: store.state.host});\n\t\t\t\t\t(payload = []).push(result);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.set,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetAfter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => this.prepareMessage(message));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.prepareMessage(payload);\n\t\t\t\t\t(payload = []).push(result);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.setAfter,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetBefore: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => this.prepareMessage(message));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.prepareMessage(payload);\n\t\t\t\t\t(payload = []).push(result);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.setBefore,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\t\t\t\tif (/^\\d+$/.test(payload.chatId))\n\t\t\t\t{\n\t\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('initCollection', {chatId: payload.chatId});\n\n\t\t\t\tlet index = store.state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\tif (index < 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet result = this.validate(Object.assign({}, payload.fields));\n\n\t\t\t\tif (result.params)\n\t\t\t\t{\n\t\t\t\t\tresult.params = Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.getElementState().params,\n\t\t\t\t\t\tstore.state.collection[payload.chatId][index].params,\n\t\t\t\t\t\tresult.params\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\tindex : index,\n\t\t\t\t\tfields : result\n\t\t\t\t});\n\n\t\t\t\tif (payload.fields.blink)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\t\tfields : {blink: false}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (!(payload.id instanceof Array))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = [payload.id];\n\t\t\t\t}\n\n\t\t\t\tpayload.id = payload.id.map(id => {\n\t\t\t\t\tif (/^\\d+$/.test(id))\n\t\t\t\t\t{\n\t\t\t\t\t\tid = parseInt(id);\n\t\t\t\t\t}\n\t\t\t\t\treturn id;\n\t\t\t\t});\n\n\t\t\t\tstore.commit('delete', {\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\telements : payload.id,\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tclear: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tstore.commit('clear', {\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tapplyMutationType: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tstore.commit('applyMutationType', {\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\treadMessages: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.readId = parseInt(payload.readId) || 0;\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tif (typeof store.state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\treturn {count: 0}\n\t\t\t\t}\n\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let index = store.state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = store.state.collection[payload.chatId][index];\n\t\t\t\t\tif (!element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (payload.readId === 0 || element.id <= payload.readId)\n\t\t\t\t\t{\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstore.commit('readMessages', {\n\t\t\t\t\tchatId: payload.chatId,\n\t\t\t\t\treadId: payload.readId,\n\t\t\t\t});\n\n\t\t\t\treturn {count};\n\t\t\t},\n\t\t\tunreadMessages: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.unreadId = parseInt(payload.unreadId) || 0;\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tif (typeof store.state.collection[payload.chatId] === 'undefined' || !payload.unreadId)\n\t\t\t\t{\n\t\t\t\t\treturn {count: 0}\n\t\t\t\t}\n\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let index = store.state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = store.state.collection[payload.chatId][index];\n\t\t\t\t\tif (element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (element.id >= payload.unreadId)\n\t\t\t\t\t{\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstore.commit('unreadMessages', {\n\t\t\t\t\tchatId: payload.chatId,\n\t\t\t\t\tunreadId: payload.unreadId,\n\t\t\t\t});\n\n\t\t\t\treturn {count};\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\treturn this.initCollection(state, payload);\n\t\t\t},\n\t\t\tadd: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\t\t\t\tthis.setMutationType(state, {chatId: payload.chatId, initialType: MutationType.add});\n\n\t\t\t\tstate.collection[payload.chatId].push(payload);\n\t\t\t\tstate.saveMessageList[payload.chatId].push(payload.id);\n\n\t\t\t\tstate.created += 1;\n\n\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tlet chats = [];\n\t\t\t\tlet chatsSave = [];\n\t\t\t\tlet mutationType = {};\n\n\t\t\t\tmutationType.initialType = payload.insertType;\n\n\t\t\t\tif (payload.insertType === MutationType.set)\n\t\t\t\t{\n\t\t\t\t\tpayload.insertType = MutationType.setAfter;\n\n\t\t\t\t\tlet elements = {};\n\t\t\t\t\tpayload.data.forEach(element => {\n\t\t\t\t\t\tif (!elements[element.chatId])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\telements[element.chatId] = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telements[element.chatId].push(element.id);\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let chatId in elements)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!elements.hasOwnProperty(chatId))\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tthis.initCollection(state, {chatId});\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstate.saveMessageList[chatId].length > elements[chatId].length\n\t\t\t\t\t\t\t|| elements[chatId].length < StorageLimit.messages\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[chatId] = state.collection[chatId].filter(element => elements[chatId].includes(element.id));\n\t\t\t\t\t\t\tstate.saveMessageList[chatId] = state.saveMessageList[chatId].filter(id => elements[chatId].includes(id));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet intersection = this.manageCacheBeforeSet(\n\t\t\t\t\t\t\t[...state.saveMessageList[chatId].reverse()],\n\t\t\t\t\t\t\telements[chatId]\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (intersection.type === IntersectionType.none)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (intersection.foundElements.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstate.collection[chatId] = state.collection[chatId].filter(element => !intersection.foundElements.includes(element.id));\n\t\t\t\t\t\t\t\tstate.saveMessageList[chatId] = state.saveMessageList[chatId].filter(id => !intersection.foundElements.includes(id));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.removeIntersectionCacheElements = state.collection[chatId].map(element => element.id);\n\n\t\t\t\t\t\t\tclearTimeout(this.removeIntersectionCacheTimeout);\n\t\t\t\t\t\t\tthis.removeIntersectionCacheTimeout = setTimeout(() => {\n\t\t\t\t\t\t\t\tstate.collection[chatId] = state.collection[chatId].filter(element => !this.removeIntersectionCacheElements.includes(element.id));\n\t\t\t\t\t\t\t\tstate.saveMessageList[chatId] = state.saveMessageList[chatId].filter(id => !this.removeIntersectionCacheElements.includes(id));\n\t\t\t\t\t\t\t\tthis.removeIntersectionCacheElements = [];\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (intersection.type === IntersectionType.foundReverse)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpayload.insertType = MutationType.setBefore;\n\t\t\t\t\t\t\t\tpayload.data = payload.data.reverse();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (intersection.foundElements.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (intersection.type === IntersectionType.found && intersection.noneElements[0])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmutationType.scrollStickToTop = false;\n\t\t\t\t\t\t\t\tmutationType.scrollMessageId = intersection.foundElements[intersection.foundElements.length-1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmutationType.scrollStickToTop = false;\n\t\t\t\t\t\t\t\tmutationType.scrollMessageId = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (intersection.type === IntersectionType.none)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmutationType.scrollStickToTop = false;\n\t\t\t\t\t\t\tmutationType.scrollMessageId = payload.data[0].id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmutationType.appliedType = payload.insertType;\n\n\t\t\t\tfor (let element of payload.data)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {chatId: element.chatId});\n\n\t\t\t\t\tlet index = state.collection[element.chatId].findIndex(el => el.id === element.id);\n\t\t\t\t\tif (index > -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete element.templateId;\n\n\t\t\t\t\t\tstate.collection[element.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[element.chatId][index],\n\t\t\t\t\t\t\telement\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.insertType === MutationType.setBefore)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].unshift(element);\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.insertType === MutationType.setAfter)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].push(element);\n\t\t\t\t\t}\n\n\t\t\t\t\tchats.push(element.chatId);\n\n\t\t\t\t\tif (this.store.getters['dialogues/canSaveChat'] && this.store.getters['dialogues/canSaveChat'](element.chatId))\n\t\t\t\t\t{\n\t\t\t\t\t\tchatsSave.push(element.chatId);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tchats = [...new Set(chats)];\n\t\t\t\tchatsSave = [...new Set(chatsSave)];\n\n\t\t\t\t// check array for correct order of messages\n\t\t\t\tif (mutationType.initialType === MutationType.set)\n\t\t\t\t{\n\t\t\t\t\tchats.forEach(chatId =>\n\t\t\t\t\t{\n\t\t\t\t\t\tlet lastElementId = 0;\n\t\t\t\t\t\tlet needApplySort = false;\n\t\t\t\t\t\tfor (let i = 0; i < state.collection[chatId].length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet element = state.collection[chatId][i];\n\t\t\t\t\t\t\tif (element.id < lastElementId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tneedApplySort = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlastElementId = element.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (needApplySort)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[chatId].sort((a, b) => a.id - b.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tchats.forEach(chatId => {\n\t\t\t\t\tthis.setMutationType(state, {chatId: chatId, ...mutationType});\n\t\t\t\t});\n\n\t\t\t\tif (mutationType.initialType !== MutationType.setBefore)\n\t\t\t\t{\n\t\t\t\t\tchatsSave.forEach(chatId => {\n\t\t\t\t\t\tthis.saveState(state, chatId);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\n\t\t\t\tlet index = -1;\n\t\t\t\tif (typeof payload.index !== 'undefined' && state.collection[payload.chatId][payload.index])\n\t\t\t\t{\n\t\t\t\t\tindex = payload.index;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tindex = state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\t}\n\n\t\t\t\tif (index >= 0)\n\t\t\t\t{\n\t\t\t\t\tlet isSaveState = (\n\t\t\t\t\t\tstate.saveMessageList[payload.chatId].includes(state.collection[payload.chatId][index].id)\n\t\t\t\t\t\t|| payload.fields.id && !payload.fields.id.toString().startsWith('temporary') && state.collection[payload.chatId][index].id.toString().startsWith('temporary')\n\t\t\t\t\t);\n\n\t\t\t\t\tdelete payload.fields.templateId;\n\n\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\tpayload.fields\n\t\t\t\t\t);\n\n\t\t\t\t\tif (isSaveState)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\t\t\t\tthis.setMutationType(state, {chatId: payload.chatId, initialType: MutationType.delete});\n\n\t\t\t\tstate.collection[payload.chatId] = state.collection[payload.chatId].filter(element => !payload.elements.includes(element.id));\n\n\t\t\t\tif (state.saveMessageList[payload.chatId].length > 0)\n\t\t\t\t{\n\t\t\t\t\tfor (let id of payload.elements)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (state.saveMessageList[payload.chatId].includes(id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.saveState(state, payload.chatId);\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tclear: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\t\t\t\tthis.setMutationType(state, {chatId: payload.chatId, initialType: 'clear'});\n\n\t\t\t\tstate.collection[payload.chatId] = [];\n\t\t\t\tstate.saveMessageList[payload.chatId] = [];\n\t\t\t},\n\t\t\tapplyMutationType: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.mutationType[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.mutationType, payload.chatId, {applied: false, initialType: MutationType.none, appliedType: MutationType.none, scrollStickToTop: 0, scrollMessageId: 0});\n\t\t\t\t}\n\n\t\t\t\tstate.mutationType[payload.chatId].applied = true;\n\t\t\t},\n\t\t\treadMessages: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\n\t\t\t\tlet saveNeeded = false;\n\t\t\t\tfor (let index = state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[payload.chatId][index];\n\t\t\t\t\tif (!element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (payload.readId === 0 || element.id <= payload.readId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\t\t{unread: false}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsaveNeeded = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (saveNeeded)\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t\t}\n\t\t\t},\n\t\t\tunreadMessages: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\n\t\t\t\tlet saveNeeded = false;\n\t\t\t\tfor (let index = state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[payload.chatId][index];\n\t\t\t\t\tif (element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (element.id >= payload.unreadId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\t\t{unread: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsaveNeeded = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (saveNeeded)\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t\t\tthis.updateSubordinateStates();\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof payload.chatId === 'undefined')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\ttypeof payload.chatId === 'undefined'\n\t\t\t|| typeof state.collection[payload.chatId] !== 'undefined'\n\t\t)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tVue.set(state.collection, payload.chatId, payload.messages? [].concat(payload.messages): []);\n\t\tVue.set(state.mutationType, payload.chatId, {applied: false, initialType: MutationType.none, appliedType: MutationType.none, scrollStickToTop: 0, scrollMessageId: 0});\n\t\tVue.set(state.saveMessageList, payload.chatId, []);\n\t\tVue.set(state.saveFileList, payload.chatId, []);\n\t\tVue.set(state.saveUserList, payload.chatId, []);\n\n\t\treturn true;\n\t}\n\n\tsetMutationType(state, payload)\n\t{\n\t\tlet mutationType = {\n\t\t\tapplied: false,\n\t\t\tinitialType: MutationType.none,\n\t\t\tappliedType: MutationType.none,\n\t\t\tscrollStickToTop: false,\n\t\t\tscrollMessageId: 0\n\t\t};\n\n\t\tif (payload.initialType && !payload.appliedType)\n\t\t{\n\t\t\tpayload.appliedType = payload.initialType;\n\t\t}\n\n\t\tif (typeof state.mutationType[payload.chatId] === 'undefined')\n\t\t{\n\t\t\tVue.set(state.mutationType, payload.chatId, mutationType);\n\t\t}\n\n\t\tstate.mutationType[payload.chatId] = {...mutationType, ...payload};\n\n\t\treturn true;\n\t}\n\n\tprepareMessage(message, options = {})\n\t{\n\t\tlet result = this.validate(Object.assign({}, message), options);\n\n\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\tresult.templateId = result.id;\n\n\t\treturn Object.assign({}, this.getElementState(), result);\n\t}\n\n\tmanageCacheBeforeSet(cache, elements, recursive = false)\n\t{\n\t\tlet result = {\n\t\t\ttype: IntersectionType.empty,\n\t\t\tfoundElements: [],\n\t\t\tnoneElements: []\n\t\t};\n\n\t\tif (!cache || cache.length <= 0)\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tfor (let id of elements)\n\t\t{\n\t\t\tif (cache.includes(id))\n\t\t\t{\n\t\t\t\tif (result.type === IntersectionType.empty)\n\t\t\t\t{\n\t\t\t\t\tresult.type = IntersectionType.found;\n\t\t\t\t}\n\t\t\t\tresult.foundElements.push(id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (result.type === IntersectionType.empty)\n\t\t\t\t{\n\t\t\t\t\tresult.type = IntersectionType.none;\n\t\t\t\t}\n\t\t\t\tresult.noneElements.push(id);\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tresult.type === IntersectionType.found\n\t\t\t&& cache.length === elements.length\n\t\t\t&& result.foundElements.length === elements.length\n\t\t)\n\t\t{\n\t\t\tresult.type = IntersectionType.equal;\n\t\t}\n\t\telse if (\n\t\t\tresult.type === IntersectionType.none\n\t\t\t&& !recursive\n\t\t\t&& result.foundElements.length > 0\n\t\t)\n\t\t{\n\t\t\tlet reverseResult = this.manageCacheBeforeSet(cache.reverse(), elements.reverse(), true);\n\t\t\tif (reverseResult.type === IntersectionType.found)\n\t\t\t{\n\t\t\t\treverseResult.type = IntersectionType.foundReverse;\n\t\t\t\treturn reverseResult;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tupdateSaveLists(state, chatId)\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (\n\t\t\t!chatId\n\t\t\t|| !this.store.getters['dialogues/canSaveChat']\n\t\t\t|| !this.store.getters['dialogues/canSaveChat'](chatId)\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.initCollection(state, {chatId: chatId});\n\n\t\tlet count = 0;\n\t\tlet saveMessageList = [];\n\t\tlet saveFileList = [];\n\t\tlet saveUserList = [];\n\n\t\tlet dialog = this.store.getters['dialogues/getByChatId'](chatId);\n\t\tif (dialog && dialog.type === 'private')\n\t\t{\n\t\t\tsaveUserList.push(parseInt(dialog.dialogId));\n\t\t}\n\n\t\tfor (let index = state.collection[chatId].length-1; index >= 0; index--)\n\t\t{\n\t\t\tif (state.collection[chatId][index].id.toString().startsWith('temporary'))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (count >= StorageLimit.messages && !state.collection[chatId][index].unread)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tsaveMessageList.unshift(state.collection[chatId][index].id);\n\n\t\t\tcount++;\n\t\t}\n\n\t\tsaveMessageList = saveMessageList.slice(0, StorageLimit.messages);\n\n\t\tstate.collection[chatId].filter(element => saveMessageList.includes(element.id)).forEach(element =>\n\t\t{\n\t\t\tif (element.authorId > 0)\n\t\t\t{\n\t\t\t\tsaveUserList.push(element.authorId);\n\t\t\t}\n\n\t\t\tif (element.params.FILE_ID instanceof Array)\n\t\t\t{\n\t\t\t\tsaveFileList = element.params.FILE_ID.concat(saveFileList);\n\t\t\t}\n\t\t});\n\n\t\tstate.saveMessageList[chatId] = saveMessageList;\n\t\tstate.saveFileList[chatId] = [...new Set(saveFileList)];\n\t\tstate.saveUserList[chatId] = [...new Set(saveUserList)];\n\n\t\treturn true;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 150;\n\t}\n\n\tsaveState(state, chatId)\n\t{\n\t\tif (!this.updateSaveLists(state, chatId))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t\tsaveMessageList: {},\n\t\t\t\tsaveUserList: {},\n\t\t\t\tsaveFileList: {},\n\t\t\t};\n\n\t\t\tfor (let chatId in state.saveMessageList)\n\t\t\t{\n\t\t\t\tif (!state.saveMessageList.hasOwnProperty(chatId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!state.collection[chatId])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!storedState.collection[chatId])\n\t\t\t\t{\n\t\t\t\t\tstoredState.collection[chatId] = [];\n\t\t\t\t}\n\n\t\t\t\tstate.collection[chatId]\n\t\t\t\t\t.filter(element => state.saveMessageList[chatId].includes(element.id))\n\t\t\t\t\t.forEach(element => storedState.collection[chatId].push(element))\n\t\t\t\t;\n\n\t\t\t\tstoredState.saveMessageList[chatId] = state.saveMessageList[chatId];\n\t\t\t\tstoredState.saveFileList[chatId] = state.saveFileList[chatId];\n\t\t\t\tstoredState.saveUserList[chatId] = state.saveUserList[chatId];\n\t\t\t}\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tupdateSubordinateStates()\n\t{\n\t\tthis.store.dispatch('users/saveState');\n\t\tthis.store.dispatch('files/saveState');\n\t}\n\n\tvalidate(fields, options)\n\t{\n\t\tconst result = {};\n\n\t\tif (typeof fields.id === \"number\")\n\t\t{\n\t\t\tresult.id = fields.id;\n\t\t}\n\t\telse if (typeof fields.id === \"string\")\n\t\t{\n\t\t\tif (fields.id.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.id = fields.id;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.id = parseInt(fields.id);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.templateId === \"number\")\n\t\t{\n\t\t\tresult.templateId = fields.templateId;\n\t\t}\n\t\telse if (typeof fields.templateId === \"string\")\n\t\t{\n\t\t\tif (fields.templateId.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.templateId = fields.templateId;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.templateId = parseInt(fields.templateId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.chat_id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.chat_id;\n\t\t}\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\t\tif (typeof fields.date !== \"undefined\")\n\t\t{\n\t\t\tresult.date = Utils.date.cast(fields.date);\n\t\t}\n\n\t\t// previous P&P format\n\t\tif (typeof fields.textOriginal === \"string\" || typeof fields.textOriginal === \"number\")\n\t\t{\n\t\t\tresult.text = fields.textOriginal.toString();\n\n\t\t\tif (typeof fields.text === \"string\" || typeof fields.text === \"number\")\n\t\t\t{\n\t\t\t\tresult.textConverted = this.convertToHtml({\n\t\t\t\t\ttext: fields.text.toString(),\n\t\t\t\t\tisConverted: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse // modern format\n\t\t{\n\t\t\tif (typeof fields.text_converted !== 'undefined')\n\t\t\t{\n\t\t\t\tfields.textConverted = fields.text_converted;\n\t\t\t}\n\t\t\tif (typeof fields.textConverted === \"string\" || typeof fields.textConverted === \"number\")\n\t\t\t{\n\t\t\t\tresult.textConverted = fields.textConverted.toString();\n\t\t\t}\n\t\t\tif (typeof fields.text === \"string\" || typeof fields.text === \"number\")\n\t\t\t{\n\t\t\t\tresult.text = fields.text.toString();\n\n\t\t\t\tlet isConverted = typeof result.textConverted !== 'undefined';\n\n\t\t\t\tresult.textConverted = this.convertToHtml({\n\t\t\t\t\ttext: isConverted? result.textConverted: result.text,\n\t\t\t\t\tisConverted\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.senderId !== 'undefined')\n\t\t{\n\t\t\tfields.authorId = fields.senderId;\n\t\t}\n\t\telse if (typeof fields.author_id !== 'undefined')\n\t\t{\n\t\t\tfields.authorId = fields.author_id;\n\t\t}\n\t\tif (typeof fields.authorId === \"number\" || typeof fields.authorId === \"string\")\n\t\t{\n\t\t\tif (fields.system === true || fields.system === 'Y')\n\t\t\t{\n\t\t\t\tresult.authorId = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.authorId = parseInt(fields.authorId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.params === \"object\" && fields.params !== null)\n\t\t{\n\t\t\tconst params = this.validateParams(fields.params, options);\n\t\t\tif (params)\n\t\t\t{\n\t\t\t\tresult.params = params;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.push === \"boolean\")\n\t\t{\n\t\t\tresult.push = fields.push;\n\t\t}\n\n\t\tif (typeof fields.sending === \"boolean\")\n\t\t{\n\t\t\tresult.sending = fields.sending;\n\t\t}\n\n\t\tif (typeof fields.unread === \"boolean\")\n\t\t{\n\t\t\tresult.unread = fields.unread;\n\t\t}\n\n\t\tif (typeof fields.blink === \"boolean\")\n\t\t{\n\t\t\tresult.blink = fields.blink;\n\t\t}\n\n\t\tif (typeof fields.error === \"boolean\" || typeof fields.error === \"string\")\n\t\t{\n\t\t\tresult.error = fields.error;\n\t\t}\n\n\t\tif (typeof fields.retry === \"boolean\")\n\t\t{\n\t\t\tresult.retry = fields.retry;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateParams(params, options)\n\t{\n\t\tconst result = {};\n\t\ttry\n\t\t{\n\t\t\tfor (let field in params)\n\t\t\t{\n\t\t\t\tif (!params.hasOwnProperty(field))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (field === 'COMPONENT_ID')\n\t\t\t\t{\n\t\t\t\t\tif (typeof params[field] === \"string\" && BX.Vue.isComponent(params[field]))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[field] = params[field];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (field === 'LIKE')\n\t\t\t\t{\n\t\t\t\t\tif (params[field] instanceof Array)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult['REACTION'] = {like: params[field].map(element => parseInt(element))};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (field === 'CHAT_LAST_DATE')\n\t\t\t\t{\n\t\t\t\t\tresult[field] = Utils.date.cast(params[field]);\n\t\t\t\t}\n\t\t\t\telse if (field === 'AVATAR')\n\t\t\t\t{\n\t\t\t\t\tif (params[field])\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[field] = params[field].startsWith('http') ? params[field] : options.host + params[field];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (field === 'NAME')\n\t\t\t\t{\n\t\t\t\t\tif (params[field])\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[field] = params[field];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (field === 'ATTACH')\n\t\t\t\t{\n\t\t\t\t\tresult[field] = this.decodeAttach(params[field]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult[field] = params[field];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\tlet hasResultElements = false;\n\t\tfor (let field in result)\n\t\t{\n\t\t\tif (!result.hasOwnProperty(field))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\thasResultElements = true;\n\t\t\tbreak\n\t\t}\n\n\t\treturn hasResultElements? result: null;\n\t}\n\n\tconvertToHtml(params = {})\n\t{\n\t\tlet {\n\t\t\tquote = true,\n\t\t\timage = true,\n\t\t\ttext = '',\n\t\t\thighlightText = '',\n\t\t\tisConverted = false,\n\t\t\tenableBigSmile = true\n\t\t} = params;\n\n\t\ttext = text.trim();\n\n\t\tif (!isConverted)\n\t\t{\n\t\t\ttext = text.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\t\t}\n\n\t\tif (text.startsWith('/me'))\n\t\t{\n\t\t\ttext = `<i>${text.substr(4)}</i>`;\n\t\t}\n\t\telse if (text.startsWith('/loud'))\n\t\t{\n\t\t\ttext = `<b>${text.substr(6)}</b>`;\n\t\t}\n\n\t\tconst quoteSign = \"&gt;&gt;\";\n\t\tif (quote && text.indexOf(quoteSign) >= 0)\n\t\t{\n\t\t\tlet textPrepareFlag = false;\n\t\t\tlet textPrepare = text.split(isConverted? \"<br />\": \"\\n\");\n\t\t\tfor (let i = 0; i < textPrepare.length; i++)\n\t\t\t{\n\t\t\t\tif (textPrepare[i].startsWith(quoteSign))\n\t\t\t\t{\n\t\t\t\t\ttextPrepare[i] = textPrepare[i].replace(quoteSign, '<div class=\"bx-im-message-content-quote\"><div class=\"bx-im-message-content-quote-wrap\">');\n\t\t\t\t\twhile (++i < textPrepare.length && textPrepare[i].startsWith(quoteSign))\n\t\t\t\t\t{\n\t\t\t\t\t\ttextPrepare[i] = textPrepare[i].replace(quoteSign, '');\n\t\t\t\t\t}\n\t\t\t\t\ttextPrepare[i - 1] += '</div></div><br>';\n\t\t\t\t\ttextPrepareFlag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttext = textPrepare.join(\"<br />\");\n\t\t}\n\n\t\ttext = text.replace(/\\n/gi, '<br />');\n\n\t\ttext = text.replace(/\\t/gi, '&nbsp;&nbsp;&nbsp;&nbsp;');\n\n\t\ttext = this.decodeBbCode(text, false, enableBigSmile);\n\n\t\tif (quote)\n\t\t{\n\t\t\ttext = text.replace(/------------------------------------------------------<br \\/>(.*?)\\[(.*?)\\]<br \\/>(.*?)------------------------------------------------------(<br \\/>)?/g, function (whole, p1, p2, p3, p4, offset) {\n\t\t\t\treturn (offset > 0? '<br>': '') + \"<div class=\\\"bx-im-message-content-quote\\\"><div class=\\\"bx-im-message-content-quote-wrap\\\"><div class=\\\"bx-im-message-content-quote-name\\\"><span class=\\\"bx-im-message-content-quote-name-text\\\">\" + p1 + \"</span><span class=\\\"bx-im-message-content-quote-name-time\\\">\" + p2 + \"</span></div>\" + p3 + \"</div></div><br />\";\n\t\t\t});\n\t\t\ttext = text.replace(/------------------------------------------------------<br \\/>(.*?)------------------------------------------------------(<br \\/>)?/g, function (whole, p1, p2, p3, offset) {\n\t\t\t\treturn (offset > 0? '<br>': '') + \"<div class=\\\"bx-im-message-content-quote\\\"><div class=\\\"bx-im-message-content-quote-wrap\\\">\" + p1 + \"</div></div><br />\";\n\t\t\t});\n\t\t}\n\n\t\tif (image)\n\t\t{\n\t\t\tlet changed = false;\n\t\t\ttext = text.replace(/<a(.*?)>(http[s]{0,1}:\\/\\/.*?)<\\/a>/ig, function(whole, aInner, text, offset)\n\t\t\t{\n\t\t\t\tif(!text.match(/(\\.(jpg|jpeg|png|gif|webp)\\?|\\.(jpg|jpeg|png|gif|webp)$)/i) || text.indexOf(\"/docs/pub/\") > 0 || text.indexOf(\"logout=yes\") > 0)\n\t\t\t\t{\n\t\t\t\t\treturn whole;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tchanged = true;\n\t\t\t\t\treturn (offset > 0? '<br />':'')+'<a' +aInner+ ' target=\"_blank\" class=\"bx-im-element-file-image\"><img src=\"'+text+'\" class=\"bx-im-element-file-image-source-text\" onerror=\"BX.Messenger.Model.MessagesModel.hideErrorImage(this)\"></a></span>';\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (changed)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<\\/span>(\\n?)<br(\\s\\/?)>/ig, '</span>').replace(/<br(\\s\\/?)>(\\n?)<br(\\s\\/?)>(\\n?)<span/ig, '<br /><span');\n\t\t\t}\n\t\t}\n\n\t\tif (highlightText)\n\t\t{\n\t\t\ttext = text.replace(new RegExp(\"(\" + highlightText.replace(/[\\-\\[\\]\\/{}()*+?.\\\\^$|]/g, \"\\\\$&\") + \")\", 'ig'), '<span class=\"bx-messenger-highlight\">$1</span>');\n\t\t}\n\n\t\tif (enableBigSmile)\n\t\t{\n\t\t\ttext = text.replace(\n\t\t\t\t/^(\\s*<img\\s+src=[^>]+?data-code=[^>]+?data-definition=\"UHD\"[^>]+?style=\"width:)(\\d+)(px[^>]+?height:)(\\d+)(px[^>]+?class=\"bx-smile\"\\s*\\/?>\\s*)$/,\n\t\t\t\tfunction doubleSmileSize(match, start, width, middle, height, end) {\n\t\t\t\t\treturn start + (parseInt(width, 10) * 1.7) + middle + (parseInt(height, 10) * 1.7) + end;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (text.substr(-6) == '<br />')\n\t\t{\n\t\t\ttext = text.substr(0, text.length - 6);\n\t\t}\n\t\ttext = text.replace(/<br><br \\/>/ig, '<br />');\n\t\ttext = text.replace(/<br \\/><br>/ig, '<br />');\n\n\t\treturn text;\n\t};\n\n\tdecodeBbCode(text, textOnly = false, enableBigSmile = true)\n\t{\n\t\treturn MessagesModel.decodeBbCode({text, textOnly, enableBigSmile})\n\t}\n\n\tdecodeAttach(item)\n\t{\n\t\tif (Array.isArray(item))\n\t\t{\n\t\t\titem.forEach(arrayElement => {\n\t\t\t\tarrayElement = this.decodeAttach(arrayElement);\n\t\t\t});\n\t\t}\n\t\telse if (typeof item === 'object' && item !== null)\n\t\t{\n\t\t\tfor (const prop in item)\n\t\t\t{\n\t\t\t\tif (item.hasOwnProperty(prop))\n\t\t\t\t{\n\t\t\t\t\titem[prop] = this.decodeAttach(item[prop]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (typeof item === 'string')\n\t\t\t{\n\t\t\t\titem = Utils.text.htmlspecialcharsback(item);\n\t\t\t}\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tstatic decodeBbCode(params = {})\n\t{\n\t\tlet {text, textOnly = false, enableBigSmile = true} = params;\n\n\t\tlet codeReplacement = [];\n\n\t\ttext = text.replace(/\\[CODE\\]\\n?(.*?)\\[\\/CODE\\]/sig, function(whole, text) {\n\t\t\tlet id = codeReplacement.length;\n\t\t\tcodeReplacement.push(text);\n\t\t\treturn '####REPLACEMENT_MARK_'+id+'####';\n\t\t});\n\n\t\ttext = text.replace(/\\[url=([^\\]]+)\\](.*?)\\[\\/url\\]/ig, function(whole, link, text)\n\t\t{\n\t\t\tlet tag = document.createElement('a');\n\t\t\ttag.href = Utils.text.htmlspecialcharsback(link);\n\t\t\ttag.target = '_blank';\n\t\t\ttag.text = Utils.text.htmlspecialcharsback(text);\n\n\t\t\tlet allowList = [\n\t\t\t\t\"http:\",\n\t\t\t\t\"https:\",\n\t\t\t\t\"ftp:\",\n\t\t\t\t\"file:\",\n\t\t\t\t\"tel:\",\n\t\t\t\t\"callto:\",\n\t\t\t\t\"mailto:\",\n\t\t\t\t\"skype:\",\n\t\t\t\t\"viber:\",\n\t\t\t];\n\t\t\tif (allowList.indexOf(tag.protocol) <= -1)\n\t\t\t{\n\t\t\t\treturn whole;\n\t\t\t}\n\n\t\t\treturn tag.outerHTML;\n\t\t});\n\n\t\ttext = text.replace(/\\[url\\]([^\\]]+)\\[\\/url\\]/ig, function(whole, link)\n\t\t{\n\t\t\tlink = Utils.text.htmlspecialcharsback(link);\n\n\t\t\tlet tag = document.createElement('a');\n\t\t\ttag.href = link;\n\t\t\ttag.target = '_blank';\n\t\t\ttag.text = link;\n\n\t\t\tlet allowList = [\n\t\t\t\t\"http:\",\n\t\t\t\t\"https:\",\n\t\t\t\t\"ftp:\",\n\t\t\t\t\"file:\",\n\t\t\t\t\"tel:\",\n\t\t\t\t\"callto:\",\n\t\t\t\t\"mailto:\",\n\t\t\t\t\"skype:\",\n\t\t\t\t\"viber:\",\n\t\t\t];\n\t\t\tif (allowList.indexOf(tag.protocol) <= -1)\n\t\t\t{\n\t\t\t\treturn whole;\n\t\t\t}\n\n\t\t\treturn tag.outerHTML;\n\t\t});\n\n\t\ttext = text.replace(/\\[LIKE\\]/ig, '<span class=\"bx-smile bx-im-smile-like\"></span>');\n\t\ttext = text.replace(/\\[DISLIKE\\]/ig, '<span class=\"bx-smile bx-im-smile-dislike\"></span>');\n\n\t\ttext = text.replace(/\\[BR\\]/ig, '<br/>');\n\t\ttext = text.replace(/\\[([buis])\\](.*?)\\[(\\/[buis])\\]/ig, (whole, open, inner, close) => '<'+open+'>'+inner+'<'+close+'>'); // TODO tag USER\n\n\t\t// this code needs to be ported to im/install/js/im/view/message/body/src/body.js:229\n\t\ttext = text.replace(/\\[CHAT=(imol\\|)?([0-9]{1,})\\](.*?)\\[\\/CHAT\\]/ig, (whole, openlines, chatId, inner) => openlines? inner: '<span class=\"bx-im-mention\" data-type=\"CHAT\" data-value=\"chat'+chatId+'\">'+inner+'</span>'); // TODO tag CHAT\n\n\t\tif (false && Utils.device.isMobile())\n\t\t{\n\t\t\tlet replacements = [];\n\t\t\ttext = text.replace(/\\[CALL(?:=(.+?))?\\](.+?)?\\[\\/CALL\\]/ig, (whole, number, text) => {\n\t\t\t\tlet index = replacements.length;\n\t\t\t\treplacements.push({number, text});\n\t\t\t\treturn `####REPLACEMENT_MARK_${index}####`;\n\t\t\t});\n\n\t\t\ttext = text.replace(/[+]{0,1}(?:[-\\/. ()\\[\\]~;#,]*[0-9]){10,}[^\\n\\r<][-\\/. ()\\[\\]~;#,0-9^]*/g, (number) => {\n\t\t\t\tlet pureNumber = number.replace(/\\D/g, '');\n\t\t\t\treturn `[CALL=${pureNumber}]${number}[/CALL]`;\n\t\t\t});\n\n\t\t\treplacements.forEach((item, index) => {\n\t\t\t\ttext = text.replace(`####REPLACEMENT_MARK_${index}####`, `[CALL=${item.number}]${item.text}[/CALL]`)\n\t\t\t});\n\t\t}\n\n\t\ttext = text.replace(/\\[CALL(?:=(.+?))?\\](.+?)?\\[\\/CALL\\]/ig, (whole, number, text) => '<span class=\"bx-im-mention\" data-type=\"CALL\" data-value=\"'+Utils.text.htmlspecialchars(number)+'\">'+text+'</span>'); // TODO tag CHAT\n\n\t\ttext = text.replace(/\\[PCH=([0-9]{1,})\\](.*?)\\[\\/PCH\\]/ig, (whole, historyId, text) => text); // TODO tag PCH\n\n\t\ttext = text.replace(/\\[SEND(?:=(.+?))?\\](.+?)?\\[\\/SEND\\]/ig, (whole, command, text) =>\n\t\t{\n\t\t\tlet html = '';\n\n\t\t\ttext = text? text: command;\n\t\t\tcommand = (command? command: text).replace('<br />', '\\n');\n\n\t\t\tif (!textOnly && text)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<([\\w]+)[^>]*>(.*?)<\\\\1>/i, \"$2\", text);\n\t\t\t\ttext = text.replace(/\\[([\\w]+)[^\\]]*\\](.*?)\\[\\/\\1\\]/i, \"$2\", text);\n\n\t\t\t\thtml = '<span class=\"bx-im-message-command-wrap\">'+\n\t\t\t\t\t'<span class=\"bx-im-message-command\" data-entity=\"send\">'+text+'</span>'+\n\t\t\t\t\t'<span class=\"bx-im-message-command-data\">'+command+'</span>'+\n\t\t\t\t'</span>';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = text;\n\t\t\t}\n\n\t\t\treturn html;\n\t\t});\n\n\t\ttext = text.replace(/\\[PUT(?:=(.+?))?\\](.+?)?\\[\\/PUT\\]/ig, (whole, command, text) =>\n\t\t{\n\t\t\tlet html = '';\n\n\t\t\ttext = text? text: command;\n\t\t\tcommand = (command? command: text).replace('<br />', '\\n');\n\n\t\t\tif (!textOnly && text)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<([\\w]+)[^>]*>(.*?)<\\/\\1>/i, \"$2\", text);\n\t\t\t\ttext = text.replace(/\\[([\\w]+)[^\\]]*\\](.*?)\\[\\/\\1\\]/i, \"$2\", text);\n\n\t\t\t\thtml = '<span class=\"bx-im-message-command\" data-entity=\"put\">'+text+'</span>';\n\t\t\t\thtml += '<span class=\"bx-im-message-command-data\">'+command+'</span>';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = text;\n\t\t\t}\n\n\t\t\treturn html;\n\t\t});\n\n\t\tlet textElementSize = 0;\n\t\tif (enableBigSmile)\n\t\t{\n\t\t\ttextElementSize = text.replace(/\\[icon\\=([^\\]]*)\\]/ig, '').trim().length;\n\t\t}\n\n\t\ttext = text.replace(/\\[icon\\=([^\\]]*)\\]/ig, (whole) =>\n\t\t{\n\t\t\tlet url = whole.match(/icon\\=(\\S+[^\\s.,> )\\];\\'\\\"!?])/i);\n\t\t\tif (url && url[1])\n\t\t\t{\n\t\t\t\turl = url[1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tlet attrs = {'src': url, 'border': 0};\n\n\t\t\tlet size = whole.match(/size\\=(\\d+)/i);\n\t\t\tif (size && size[1])\n\t\t\t{\n\t\t\t\tattrs['width'] = size[1];\n\t\t\t\tattrs['height'] = size[1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet width = whole.match(/width\\=(\\d+)/i);\n\t\t\t\tif (width && width[1])\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = width[1];\n\t\t\t\t}\n\n\t\t\t\tlet height = whole.match(/height\\=(\\d+)/i);\n\t\t\t\tif (height && height[1])\n\t\t\t\t{\n\t\t\t\t\tattrs['height'] = height[1];\n\t\t\t\t}\n\n\t\t\t\tif (attrs['width'] && !attrs['height'])\n\t\t\t\t{\n\t\t\t\t\tattrs['height'] = attrs['width'];\n\t\t\t\t}\n\t\t\t\telse if (attrs['height'] && !attrs['width'])\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = attrs['height'];\n\t\t\t\t}\n\t\t\t\telse if (attrs['height'] && attrs['width'])\n\t\t\t\t{}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = 20;\n\t\t\t\t\tattrs['height'] = 20;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tattrs['width'] = attrs['width']>100? 100: attrs['width'];\n\t\t\tattrs['height'] = attrs['height']>100? 100: attrs['height'];\n\n\t\t\tif (enableBigSmile && textElementSize === 0 && attrs['width'] === attrs['height'] && attrs['width'] === 20)\n\t\t\t{\n\t\t\t\tattrs['width'] = 40;\n\t\t\t\tattrs['height'] = 40;\n\t\t\t}\n\n\t\t\tlet title = whole.match(/title\\=(.*[^\\s\\]])/i);\n\t\t\tif (title && title[1])\n\t\t\t{\n\t\t\t\ttitle = title[1];\n\t\t\t\tif (title.indexOf('width=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('width='))\n\t\t\t\t}\n\t\t\t\tif (title.indexOf('height=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('height='))\n\t\t\t\t}\n\t\t\t\tif (title.indexOf('size=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('size='))\n\t\t\t\t}\n\t\t\t\tif (title)\n\t\t\t\t{\n\t\t\t\t\tattrs['title'] = Utils.text.htmlspecialchars(title).trim();\n\t\t\t\t\tattrs['alt'] = attrs['title'];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet attributes = '';\n\t\t\tfor (let name in attrs)\n\t\t\t{\n\t\t\t\tif (attrs.hasOwnProperty(name))\n\t\t\t\t{\n\t\t\t\t\tattributes += name+'=\"'+attrs[name]+'\" ';\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\treturn '<img class=\"bx-smile bx-icon\" '+attributes+'>';\n\t\t});\n\n\t\tcodeReplacement.forEach((code, index) => {\n\t\t\ttext = text.replace('####REPLACEMENT_MARK_'+index+'####',\n\t\t\t\t!textOnly? '<div class=\"bx-im-message-content-code\">'+code+'</div>': code\n\t\t\t)\n\t\t});\n\n\t\treturn text;\n\t}\n\n\tstatic hideErrorImage(element)\n\t{\n\t\tif (element.parentNode && element.parentNode)\n\t\t{\n\t\t\telement.parentNode.innerHTML = '<a href=\"'+element.src+'\" target=\"_blank\">'+element.src+'</a>';\n\t\t}\n\t\treturn true;\n\t};\n}","/**\n * Bitrix Messenger\n * Dialogues model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {StorageLimit} from \"im.const\";\nimport {Utils} from \"im.lib.utils\";\n\nexport class DialoguesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'dialogues';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {},\n\t\t\tsaveDialogList: [],\n\t\t\tsaveChatList: [],\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn {\n\t\t\thost: null\n\t\t}\n\t}\n\n\tgetElementStateSaveException()\n\t{\n\t\treturn {\n\t\t\twritingList: null,\n\t\t\tquoteId: null\n\t\t}\n\t}\n\n\tgetElementState()\n\t{\n\t\treturn {\n\t\t\tdialogId: '0',\n\t\t\tchatId: 0,\n\t\t\tcounter: 0,\n\t\t\tuserCounter: 0,\n\t\t\tunreadId: 0,\n\t\t\tunreadLastId: 0,\n\t\t\tmanagerList: [],\n\t\t\treadedList: [],\n\t\t\twritingList: [],\n\t\t\ttextareaMessage: \"\",\n\t\t\tquoteId: 0,\n\t\t\teditId: 0,\n\t\t\tinit: false,\n\n\t\t\tname: \"\",\n\t\t\towner: 0,\n\t\t\textranet: false,\n\t\t\tavatar: \"\",\n\t\t\tcolor: \"#17A3EA\",\n\t\t\ttype: \"chat\",\n\t\t\tentityType: \"\",\n\t\t\tentityId: \"\",\n\t\t\tentityData1: \"\",\n\t\t\tentityData2: \"\",\n\t\t\tentityData3: \"\",\n\t\t\tdateCreate: new Date(),\n\t\t\trestrictions: {\n\t\t\t\tavatar: true,\n\t\t\t\textend: true,\n\t\t\t\tleave: true,\n\t\t\t\tleaveOwner: true,\n\t\t\t\trename: true\n\t\t\t},\n\t\t\tpublic: {\n\t\t\t\tcode: '',\n\t\t\t\tlink: ''\n\t\t\t}\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => dialogId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[dialogId];\n\t\t\t},\n\t\t\tgetByChatId: state => chatId =>\n\t\t\t{\n\t\t\t\tchatId = parseInt(chatId);\n\n\t\t\t\tfor (let dialogId in state.collection)\n\t\t\t\t{\n\t\t\t\t\tif (!state.collection.hasOwnProperty(dialogId))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (state.collection[dialogId].chatId === chatId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.collection[dialogId];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState();\n\t\t\t},\n\t\t\tgetQuoteId: state => dialogId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t{\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[dialogId].quoteId;\n\t\t\t},\n\t\t\tgetEditId: state => dialogId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t{\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[dialogId].editId;\n\t\t\t},\n\t\t\tcanSaveChat: state => chatId =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(chatId))\n\t\t\t\t{\n\t\t\t\t\tchatId = parseInt(chatId);\n\t\t\t\t}\n\t\t\t\treturn state.saveChatList.includes(parseInt(chatId));\n\t\t\t},\n\t\t\tcanSaveDialog: state => dialogId =>\n\t\t\t{\n\t\t\t\treturn state.saveDialogList.includes(dialogId.toString());\n\t\t\t},\n\t\t\tisPrivateDialog: state => dialogId =>\n\t\t\t{\n\t\t\t\tdialogId = dialogId.toString();\n\t\t\t\treturn state.collection[dialogId.toString()] && state.collection[dialogId].type === 'private';\n\t\t\t},\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(dialog => {\n\t\t\t\t\t\treturn Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tthis.validate(Object.assign({}, dialog), {host: store.state.host}),\n\t\t\t\t\t\t\t{init: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\tresult.push(Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.validate(Object.assign({}, payload), {host: store.state.host}),\n\t\t\t\t\t\t{init: true}\n\t\t\t\t\t));\n\t\t\t\t\tpayload = result;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', payload);\n\t\t\t},\n\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields : this.validate(Object.assign({}, payload.fields), {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', payload.dialogId);\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tupdateWriting: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet index = store.state.collection[payload.dialogId].writingList.findIndex(el => el.userId === payload.userId);\n\t\t\t\tif (payload.action)\n\t\t\t\t{\n\t\t\t\t\tif (index >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlet writingList = [].concat(store.state.collection[payload.dialogId].writingList);\n\t\t\t\t\t\twritingList.unshift({\n\t\t\t\t\t\t\tuserId: payload.userId,\n\t\t\t\t\t\t\tuserName: payload.userName,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tactionName: 'updateWriting/1',\n\t\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\t\tfields : this.validate({writingList}, {host: store.state.host})\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (index >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet writingList = store.state.collection[payload.dialogId].writingList.filter(el => el.userId !== payload.userId);\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tactionName: 'updateWriting/2',\n\t\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\t\tfields : this.validate({writingList}, {host: store.state.host})\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tupdateReaded: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet readedList = store.state.collection[payload.dialogId].readedList.filter(el => el.userId !== payload.userId);\n\n\t\t\t\tif (payload.action)\n\t\t\t\t{\n\t\t\t\t\treadedList.push({\n\t\t\t\t\t\tuserId: payload.userId,\n\t\t\t\t\t\tuserName: payload.userName || '',\n\t\t\t\t\t\tmessageId: payload.messageId,\n\t\t\t\t\t\tdate: payload.date || (new Date()),\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tactionName: 'updateReaded',\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields : this.validate({readedList}, {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tincreaseCounter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet counter = store.state.collection[payload.dialogId].counter;\n\t\t\t\tif (counter === 100)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet increasedCounter = counter + payload.count;\n\t\t\t\tif (increasedCounter > 100)\n\t\t\t\t{\n\t\t\t\t\tincreasedCounter = 100;\n\t\t\t\t}\n\n\t\t\t\tlet fields = {\n\t\t\t\t\tcounter: increasedCounter\n\t\t\t\t};\n\n\t\t\t\tif (typeof payload.unreadLastId !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tfields.unreadLastId = payload.unreadLastId;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tactionName: 'increaseCounter',\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tdecreaseCounter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet counter = store.state.collection[payload.dialogId].counter;\n\t\t\t\tif (counter === 100)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet decreasedCounter = counter - payload.count;\n\t\t\t\tif (decreasedCounter < 0)\n\t\t\t\t{\n\t\t\t\t\tdecreasedCounter = 0;\n\t\t\t\t}\n\n\t\t\t\tlet unreadId = payload.unreadId > store.state.collection[payload.dialogId].unreadId? payload.unreadId: store.state.collection[payload.dialogId].unreadId;\n\n\t\t\t\tif (\n\t\t\t\t\tstore.state.collection[payload.dialogId].unreadId !== unreadId\n\t\t\t\t\t|| store.state.collection[payload.dialogId].counter !== decreasedCounter\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tif (decreasedCounter === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tunreadId = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tactionName: 'decreaseCounter',\n\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\tfields : {\n\t\t\t\t\t\t\tcounter: decreasedCounter,\n\t\t\t\t\t\t\tunreadId: unreadId\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tsaveDialog: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('saveDialog', {\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t};\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\t\t\t},\n\t\t\tsaveDialog: (state, payload) =>\n\t\t\t{\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update this flag\n\t\t\t\tif (!(payload.chatId > 0 && payload.dialogId.length > 0))\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet saveDialogList = state.saveDialogList.filter(function(element) {\n\t\t\t\t\treturn element !== payload.dialogId;\n\t\t\t\t});\n\n\t\t\t\tsaveDialogList.unshift(payload.dialogId);\n\n\t\t\t\tsaveDialogList = saveDialogList.slice(0, StorageLimit.dialogues);\n\n\t\t\t\tif (state.saveDialogList.join(',') === saveDialogList.join(','))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstate.saveDialogList = saveDialogList;\n\n\n\t\t\t\tlet saveChatList = state.saveChatList.filter(function(element) {\n\t\t\t\t\treturn element !== payload.chatId;\n\t\t\t\t});\n\n\t\t\t\tsaveChatList.unshift(payload.chatId);\n\n\t\t\t\tstate.saveChatList = saveChatList.slice(0, StorageLimit.dialogues);\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {dialogId: element.dialogId});\n\n\t\t\t\t\tstate.collection[element.dialogId] = Object.assign(\n\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\tstate.collection[element.dialogId],\n\t\t\t\t\t\telement\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update cache\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.dialogId] = Object.assign(\n\t\t\t\t\tstate.collection[payload.dialogId],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update cache\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tdelete state.collection[payload.dialogId];\n\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update cache\n\t\t\t\tthis.saveState(state);\n\t\t\t}\n\t\t};\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof state.collection[payload.dialogId] !== 'undefined')\n\t\t{\n\t\t\treturn true\n\t\t}\n\n\t\tVue.set(state.collection, payload.dialogId, this.getElementState());\n\n\t\tif (payload.fields)\n\t\t{\n\t\t\tstate.collection[payload.dialogId] = Object.assign(\n\t\t\t\tstate.collection[payload.dialogId],\n\t\t\t\tthis.validate(Object.assign({}, payload.fields), {host: state.host})\n\t\t\t);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 100;\n\t}\n\n\tsaveState(state = {})\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t\tsaveDialogList: [].concat(state.saveDialogList),\n\t\t\t\tsaveChatList: [].concat(state.saveChatList),\n\t\t\t};\n\n\t\t\tstate.saveDialogList.forEach(dialogId => {\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t\treturn false;\n\n\t\t\t\tstoredState.collection[dialogId] = Object.assign(\n\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\tthis.cloneState(state.collection[dialogId], this.getElementStateSaveException())\n\t\t\t\t);\n\t\t\t});\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.dialog_id !== 'undefined')\n\t\t{\n\t\t\tfields.dialogId = fields.dialog_id;\n\t\t}\n\t\tif (typeof fields.dialogId === \"number\" || typeof fields.dialogId === \"string\")\n\t\t{\n\t\t\tresult.dialogId = fields.dialogId.toString();\n\t\t}\n\n\t\tif (typeof fields.chat_id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.chat_id;\n\t\t}\n\t\telse if (typeof fields.id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.id;\n\t\t}\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\t\tif (typeof fields.quoteId === \"number\")\n\t\t{\n\t\t\tresult.quoteId = parseInt(fields.quoteId);\n\t\t}\n\t\tif (typeof fields.editId === \"number\")\n\t\t{\n\t\t\tresult.editId = parseInt(fields.editId);\n\t\t}\n\n\t\tif (typeof fields.counter === \"number\" || typeof fields.counter === \"string\")\n\t\t{\n\t\t\tresult.counter = parseInt(fields.counter);\n\t\t}\n\n\t\tif (typeof fields.user_counter === \"number\" || typeof fields.user_counter === \"string\")\n\t\t{\n\t\t\tresult.userCounter = parseInt(fields.user_counter);\n\t\t}\n\t\tif (typeof fields.userCounter === \"number\" || typeof fields.userCounter === \"string\")\n\t\t{\n\t\t\tresult.userCounter = parseInt(fields.userCounter);\n\t\t}\n\n\t\tif (typeof fields.unread_id !== 'undefined')\n\t\t{\n\t\t\tfields.unreadId = fields.unread_id;\n\t\t}\n\t\tif (typeof fields.unreadId === \"number\" || typeof fields.unreadId === \"string\")\n\t\t{\n\t\t\tresult.unreadId = parseInt(fields.unreadId);\n\t\t}\n\n\t\tif (typeof fields.unread_last_id !== 'undefined')\n\t\t{\n\t\t\tfields.unreadLastId = fields.unread_last_id;\n\t\t}\n\t\tif (typeof fields.unreadLastId === \"number\" || typeof fields.unreadLastId === \"string\")\n\t\t{\n\t\t\tresult.unreadLastId = parseInt(fields.unreadLastId);\n\t\t}\n\n\t\tif (typeof fields.readed_list !== 'undefined')\n\t\t{\n\t\t\tfields.readedList = fields.readed_list;\n\t\t}\n\t\tif (typeof fields.readedList !== 'undefined')\n\t\t{\n\t\t\tresult.readedList = [];\n\n\t\t\tif (fields.readedList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.readedList.forEach(element =>\n\t\t\t\t{\n\t\t\t\t\tlet record = {};\n\t\t\t\t\tif (typeof element.user_id !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.userId = element.user_id;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof element.user_name !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.userName = element.user_name;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof element.message_id !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.messageId = element.message_id;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!element.userId || !element.userName || !element.messageId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\trecord.userId = parseInt(element.userId);\n\t\t\t\t\trecord.userName = element.userName.toString();\n\t\t\t\t\trecord.messageId = parseInt(element.messageId);\n\n\t\t\t\t\trecord.date = Utils.date.cast(element.date);\n\n\t\t\t\t\tresult.readedList.push(record);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.writing_list !== 'undefined')\n\t\t{\n\t\t\tfields.writingList = fields.writing_list;\n\t\t}\n\t\tif (typeof fields.writingList !== 'undefined')\n\t\t{\n\t\t\tresult.writingList = [];\n\n\t\t\tif (fields.writingList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.writingList.forEach(element =>\n\t\t\t\t{\n\t\t\t\t\tlet record = {};\n\n\t\t\t\t\tif (!element.userId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\trecord.userId = parseInt(element.userId);\n\t\t\t\t\trecord.userName = Utils.text.htmlspecialcharsback(element.userName);\n\n\t\t\t\t\tresult.writingList.push(record);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.manager_list !== 'undefined')\n\t\t{\n\t\t\tfields.managerList = fields.manager_list;\n\t\t}\n\t\tif (typeof fields.managerList !== 'undefined')\n\t\t{\n\t\t\tresult.managerList = [];\n\n\t\t\tif (fields.managerList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.managerList.forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tuserId = parseInt(userId);\n\t\t\t\t\tif (userId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.managerList.push(userId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.mute_list !== 'undefined')\n\t\t{\n\t\t\tfields.muteList = fields.mute_list;\n\t\t}\n\t\tif (typeof fields.muteList !== 'undefined')\n\t\t{\n\t\t\tresult.muteList = [];\n\n\t\t\tif (fields.muteList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.muteList.forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tuserId = parseInt(userId);\n\t\t\t\t\tif (userId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.muteList.push(userId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.textareaMessage !== 'undefined')\n\t\t{\n\t\t\tresult.textareaMessage = fields.textareaMessage.toString();\n\t\t}\n\n\t\tif (typeof fields.title !== 'undefined')\n\t\t{\n\t\t\tfields.name = fields.title;\n\t\t}\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = Utils.text.htmlspecialcharsback(fields.name.toString());\n\t\t}\n\n\t\tif (typeof fields.owner !== 'undefined')\n\t\t{\n\t\t\tfields.ownerId = fields.owner;\n\t\t}\n\t\tif (typeof fields.ownerId === \"number\" || typeof fields.ownerId === \"string\")\n\t\t{\n\t\t\tresult.ownerId = parseInt(fields.ownerId);\n\t\t}\n\n\t\tif (typeof fields.extranet === \"boolean\")\n\t\t{\n\t\t\tresult.extranet = fields.extranet;\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tlet avatar;\n\n\t\t\tif (!fields.avatar || fields.avatar.endsWith('/js/im/images/blank.gif'))\n\t\t\t{\n\t\t\t\tavatar = '';\n\t\t\t}\n\t\t\telse if (fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tavatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatar = options.host + fields.avatar;\n\t\t\t}\n\n\t\t\tif (avatar)\n\t\t\t{\n\t\t\t\tresult.avatar = encodeURI(avatar);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.color === \"string\")\n\t\t{\n\t\t\tresult.color = fields.color.toString();\n\t\t}\n\n\t\tif (typeof fields.type === \"string\")\n\t\t{\n\t\t\tresult.type = fields.type.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_type !== 'undefined')\n\t\t{\n\t\t\tfields.entityType = fields.entity_type;\n\t\t}\n\t\tif (typeof fields.entityType === \"string\")\n\t\t{\n\t\t\tresult.entityType = fields.entityType.toString();\n\t\t}\n\t\tif (typeof fields.entity_id !== 'undefined')\n\t\t{\n\t\t\tfields.entityId = fields.entity_id;\n\t\t}\n\t\tif (typeof fields.entityId === \"string\" || typeof fields.entityId === \"number\")\n\t\t{\n\t\t\tresult.entityId = fields.entityId.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_1 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData1 = fields.entity_data_1;\n\t\t}\n\t\tif (typeof fields.entityData1 === \"string\")\n\t\t{\n\t\t\tresult.entityData1 = fields.entityData1.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_2 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData2 = fields.entity_data_2;\n\t\t}\n\t\tif (typeof fields.entityData2 === \"string\")\n\t\t{\n\t\t\tresult.entityData2 = fields.entityData2.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_3 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData3 = fields.entity_data_3;\n\t\t}\n\t\tif (typeof fields.entityData3 === \"string\")\n\t\t{\n\t\t\tresult.entityData3 = fields.entityData3.toString();\n\t\t}\n\n\t\tif (typeof fields.date_create !== 'undefined')\n\t\t{\n\t\t\tfields.dateCreate = fields.date_create;\n\t\t}\n\n\t\tif (typeof fields.dateCreate !== \"undefined\")\n\t\t{\n\t\t\tresult.dateCreate = Utils.date.cast(fields.dateCreate);\n\t\t}\n\n\t\tif (typeof fields.dateLastOpen !== \"undefined\")\n\t\t{\n\t\t\tresult.dateLastOpen = Utils.date.cast(fields.dateLastOpen);\n\t\t}\n\n\t\tif (typeof fields.restrictions === 'object' && fields.restrictions)\n\t\t{\n\t\t\tresult.restrictions = {};\n\n\t\t\tif (typeof fields.restrictions.AVATAR === 'boolean')\n\t\t\t{\n\t\t\t\tresult.restrictions.avatar = fields.restrictions.AVATAR;\n\t\t\t}\n\n\t\t\tif (typeof fields.restrictions.EXTEND === 'boolean')\n\t\t\t{\n\t\t\t\tresult.restrictions.extend = fields.restrictions.EXTEND;\n\t\t\t}\n\n\t\t\tif (typeof fields.restrictions.LEAVE === 'boolean')\n\t\t\t{\n\t\t\t\tresult.restrictions.leave = fields.restrictions.LEAVE;\n\t\t\t}\n\n\t\t\tif (typeof fields.restrictions.LEAVE_OWNER === 'boolean')\n\t\t\t{\n\t\t\t\tresult.restrictions.leaveOwner = fields.restrictions.LEAVE_OWNER;\n\t\t\t}\n\n\t\t\tif (typeof fields.restrictions.RENAME === 'boolean')\n\t\t\t{\n\t\t\t\tresult.restrictions.rename = fields.restrictions.RENAME;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.public === 'object' && fields.public)\n\t\t{\n\t\t\tresult.public = {};\n\n\t\t\tif (typeof fields.public.code === 'string')\n\t\t\t{\n\t\t\t\tresult.public.code = fields.public.code;\n\t\t\t}\n\n\t\t\tif (typeof fields.public.link === 'string')\n\t\t\t{\n\t\t\t\tresult.public.link = fields.public.link;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}","/**\n * Bitrix Messenger\n * Users model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {Utils} from \"im.lib.utils\";\n\nexport class UsersModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'users';\n\t}\n\n\tgetState()\n\t{\n\t\tthis.startOnlineCheckInterval();\n\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {},\n\t\t\tonlineList: [],\n\t\t\tmobileOnlineList: [],\n\t\t\tabsentList: []\n\t\t}\n\t}\n\n\tgetElementState(params = {})\n\t{\n\t\tlet {\n\t\t\tid = 0,\n\t\t\tname = this.getVariable('default.name', ''),\n\t\t\tfirstName = this.getVariable('default.name', ''),\n\t\t\tlastName = '',\n\t\t} = params;\n\n\t\treturn {\n\t\t\tid,\n\t\t\tname,\n\t\t\tfirstName,\n\t\t\tlastName,\n\t\t\tworkPosition: \"\",\n\t\t\tcolor: \"#048bd0\",\n\t\t\tavatar: \"\",\n\t\t\tgender: \"M\",\n\t\t\tbirthday: false,\n\t\t\tisBirthday: false,\n\t\t\textranet: false,\n\t\t\tnetwork: false,\n\t\t\tbot: false,\n\t\t\tconnector: false,\n\t\t\texternalAuthId: \"default\",\n\t\t\tstatus: \"online\",\n\t\t\tidle: false,\n\t\t\tlastActivityDate: false,\n\t\t\tmobileLastDate: false,\n\t\t\tisOnline: false,\n\t\t\tisMobileOnline: false,\n\t\t\tabsent: false,\n\t\t\tisAbsent: false,\n\t\t\tdepartments: [],\n\t\t\tphones: {\n\t\t\t\tworkPhone: \"\",\n\t\t\t\tpersonalMobile: \"\",\n\t\t\t\tpersonalPhone: \"\",\n\t\t\t\tinnerPhone: \"\",\n\t\t\t},\n\t\t\tinit: false\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => (userId, getTemporary = false) =>\n\t\t\t{\n\t\t\t\tuserId = parseInt(userId);\n\n\t\t\t\tif (userId <= 0)\n\t\t\t\t{\n\t\t\t\t\tif (getTemporary)\n\t\t\t\t\t{\n\t\t\t\t\t\tuserId = 0;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!getTemporary\n\t\t\t\t\t&& (!state.collection[userId] || !state.collection[userId].init)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (!state.collection[userId])\n\t\t\t\t{\n\t\t\t\t\treturn this.getElementState({id: userId});\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[userId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState(params);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(user => {\n\t\t\t\t\t\treturn Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\t\tthis.validate(Object.assign({}, user), {host: store.state.host}),\n\t\t\t\t\t\t\t{init: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\tresult.push(Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\tthis.validate(Object.assign({}, payload), {host: store.state.host}),\n\t\t\t\t\t\t{init: true}\n\t\t\t\t\t));\n\t\t\t\t\tpayload = result;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', payload);\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.id = parseInt(payload.id);\n\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.id] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.id].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tfields : this.validate(Object.assign({}, payload.fields), {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', payload.id);\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tsaveState: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('saveState', {});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {id: element.id});\n\n\t\t\t\t\tstate.collection[element.id] = element;\n\n\t\t\t\t\tlet status = Utils.user.getOnlineStatus(element);\n\t\t\t\t\tif (status.isOnline)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.id].isOnline = true;\n\t\t\t\t\t\tthis.addToOnlineList(state, element.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet mobileStatus = Utils.user.isMobileActive(element);\n\t\t\t\t\tif (mobileStatus)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.id].isMobileOnline = true;\n\t\t\t\t\t\tthis.addToMobileOnlineList(state, element.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (element.birthday)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet today = Utils.date.format(new Date(), \"d-m\");\n\t\t\t\t\t\tif (element.birthday === today)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[element.id].isBirthday = true;\n\n\t\t\t\t\t\t\tlet timeToNextMidnight = this.getTimeToNextMidnight();\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tstate.collection[element.id].isBirthday = false;\n\t\t\t\t\t\t\t}, timeToNextMidnight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (element.absent)\n\t\t\t\t\t{\n\t\t\t\t\t\telement.isAbsent = true;\n\n\t\t\t\t\t\tif (!state.absentList.includes(element.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.addToAbsentList(state, element.id);\n\n\t\t\t\t\t\t\tlet timeToNextMidnight = this.getTimeToNextMidnight();\n\t\t\t\t\t\t\tlet timeToNextDay = 1000*60*60*24;\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tsetInterval(() => this.startAbsentCheckInterval(state), timeToNextDay);\n\t\t\t\t\t\t\t}, timeToNextMidnight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tif (typeof payload.fields.lastActivityDate !== 'undefined' && state.collection[payload.id].lastActivityDate)\n\t\t\t\t{\n\t\t\t\t\tlet lastActivityDate = state.collection[payload.id].lastActivityDate.getTime();\n\t\t\t\t\tlet newActivityDate = payload.fields.lastActivityDate.getTime();\n\t\t\t\t\tif (newActivityDate > lastActivityDate)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet status = Utils.user.getOnlineStatus(payload.fields);\n\t\t\t\t\t\tif (status.isOnline)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[payload.id].isOnline = true;\n\t\t\t\t\t\t\tthis.addToOnlineList(state, payload.fields.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\ttypeof payload.fields.mobileLastDate !== 'undefined'\n\t\t\t\t\t&& state.collection[payload.id].mobileLastDate !== payload.fields.mobileLastDate\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tlet mobileStatus = Utils.user.isMobileActive(payload.fields);\n\t\t\t\t\tif (mobileStatus)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[payload.id].isMobileOnline = true;\n\t\t\t\t\t\tthis.addToMobileOnlineList(state, payload.fields.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstate.collection[payload.id] = Object.assign(\n\t\t\t\t\tstate.collection[payload.id],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tdelete state.collection[payload.id];\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tsaveState: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t}\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof state.collection[payload.id] !== 'undefined')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tVue.set(state.collection, payload.id, this.getElementState());\n\n\t\treturn true;\n\t}\n\n\tgetSaveUserList()\n\t{\n\t\tif (!this.db)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!this.store.getters['messages/getSaveUserList'])\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tlet list = this.store.getters['messages/getSaveUserList']();\n\t\tif (!list)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 250;\n\t}\n\n\tsaveState(state)\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet list = this.getSaveUserList();\n\t\t\tif (!list)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t};\n\n\t\t\tlet exceptionList = {\n\t\t\t\tabsent: true,\n\t\t\t\tidle: true,\n\t\t\t\tmobileLastDate: true,\n\t\t\t\tlastActivityDate: true,\n\t\t\t};\n\n\t\t\tfor (let chatId in list)\n\t\t\t{\n\t\t\t\tif (!list.hasOwnProperty(chatId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlist[chatId].forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tif (!state.collection[userId])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tstoredState.collection[userId] = this.cloneState(state.collection[userId], exceptionList);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.id === \"number\" || typeof fields.id === \"string\")\n\t\t{\n\t\t\tresult.id = parseInt(fields.id);\n\t\t}\n\n\t\tif (typeof fields.first_name !== \"undefined\")\n\t\t{\n\t\t\tfields.firstName = Utils.text.htmlspecialcharsback(fields.first_name);\n\t\t}\n\t\tif (typeof fields.last_name !== \"undefined\")\n\t\t{\n\t\t\tfields.lastName = Utils.text.htmlspecialcharsback(fields.last_name);\n\t\t}\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tfields.name = Utils.text.htmlspecialcharsback(fields.name.toString());\n\t\t\tresult.name = fields.name;\n\n\t\t\tif (\n\t\t\t\ttypeof fields.firstName === \"undefined\"\n\t\t\t\t|| typeof fields.firstName !== \"undefined\" && !fields.firstName\n\t\t\t)\n\t\t\t{\n\t\t\t\tlet elementsOfName = fields.name.split(' ');\n\t\t\t\tif (elementsOfName.length > 1)\n\t\t\t\t{\n\t\t\t\t\tdelete elementsOfName[elementsOfName.length-1];\n\t\t\t\t\tfields.firstName = elementsOfName.join(' ').trim();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfields.firstName = result.name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttypeof fields.lastName === \"undefined\"\n\t\t\t\t|| typeof fields.lastName !== \"undefined\" && !fields.lastName)\n\t\t\t{\n\t\t\t\tlet elementsOfName = fields.name.split(' ');\n\t\t\t\tif (elementsOfName.length > 1)\n\t\t\t\t{\n\t\t\t\t\tfields.lastName = elementsOfName[elementsOfName.length-1];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfields.lastName = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.firstName === \"string\" || typeof fields.firstName === \"number\")\n\t\t{\n\t\t\tresult.firstName = Utils.text.htmlspecialcharsback(fields.firstName.toString());\n\t\t}\n\t\tif (typeof fields.lastName === \"string\" || typeof fields.lastName === \"number\")\n\t\t{\n\t\t\tresult.lastName = Utils.text.htmlspecialcharsback(fields.lastName.toString());\n\t\t}\n\n\t\tif (typeof fields.work_position !== \"undefined\")\n\t\t{\n\t\t\tfields.workPosition = fields.work_position;\n\t\t}\n\t\tif (typeof fields.workPosition === \"string\" || typeof fields.workPosition === \"number\")\n\t\t{\n\t\t\tresult.workPosition = fields.workPosition.toString();\n\t\t}\n\n\t\tif (typeof fields.color === \"string\")\n\t\t{\n\t\t\tresult.color = fields.color;\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tlet avatar;\n\n\t\t\tif (!fields.avatar || fields.avatar.endsWith('/js/im/images/blank.gif'))\n\t\t\t{\n\t\t\t\tavatar = '';\n\t\t\t}\n\t\t\telse if (fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tavatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatar = options.host + fields.avatar;\n\t\t\t}\n\n\t\t\tif (avatar)\n\t\t\t{\n\t\t\t\tresult.avatar = encodeURI(avatar);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.gender !== 'undefined')\n\t\t{\n\t\t\tresult.gender = fields.gender === 'F'? 'F': 'M';\n\t\t}\n\n\t\tif (typeof fields.birthday === \"string\")\n\t\t{\n\t\t\tresult.birthday = fields.birthday;\n\t\t}\n\n\t\tif (typeof fields.extranet === \"boolean\")\n\t\t{\n\t\t\tresult.extranet = fields.extranet;\n\t\t}\n\n\t\tif (typeof fields.network === \"boolean\")\n\t\t{\n\t\t\tresult.network = fields.network;\n\t\t}\n\n\t\tif (typeof fields.bot === \"boolean\")\n\t\t{\n\t\t\tresult.bot = fields.bot;\n\t\t}\n\n\t\tif (typeof fields.connector === \"boolean\")\n\t\t{\n\t\t\tresult.connector = fields.connector;\n\t\t}\n\n\t\tif (typeof fields.external_auth_id !== \"undefined\")\n\t\t{\n\t\t\tfields.externalAuthId = fields.external_auth_id;\n\t\t}\n\t\tif (typeof fields.externalAuthId === \"string\" && fields.externalAuthId)\n\t\t{\n\t\t\tresult.externalAuthId = fields.externalAuthId;\n\t\t}\n\n\t\tif (typeof fields.status === \"string\")\n\t\t{\n\t\t\tresult.status = fields.status;\n\t\t}\n\n\t\tif (typeof fields.idle !== \"undefined\")\n\t\t{\n\t\t\tresult.idle = Utils.date.cast(fields.idle, false);\n\t\t}\n\t\tif (typeof fields.last_activity_date !== \"undefined\")\n\t\t{\n\t\t\tfields.lastActivityDate = fields.last_activity_date;\n\t\t}\n\t\tif (typeof fields.lastActivityDate !== \"undefined\")\n\t\t{\n\t\t\tresult.lastActivityDate = Utils.date.cast(fields.lastActivityDate, false);\n\t\t}\n\t\tif (typeof fields.mobile_last_date !== \"undefined\")\n\t\t{\n\t\t\tfields.mobileLastDate = fields.mobile_last_date;\n\t\t}\n\t\tif (typeof fields.mobileLastDate !== \"undefined\")\n\t\t{\n\t\t\tresult.mobileLastDate = Utils.date.cast(fields.mobileLastDate, false);\n\t\t}\n\n\t\tif (typeof fields.absent !== \"undefined\")\n\t\t{\n\t\t\tresult.absent = Utils.date.cast(fields.absent, false);\n\t\t}\n\n\t\tif (typeof fields.departments !== 'undefined')\n\t\t{\n\t\t\tresult.departments = [];\n\n\t\t\tif (fields.departments instanceof Array)\n\t\t\t{\n\t\t\t\tfields.departments.forEach(departmentId =>\n\t\t\t\t{\n\t\t\t\t\tdepartmentId = parseInt(departmentId);\n\t\t\t\t\tif (departmentId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.departments.push(departmentId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.phones === 'object' && fields.phones)\n\t\t{\n\t\t\tresult.phones = {};\n\n\t\t\tif (typeof fields.phones.work_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.workPhone = fields.phones.work_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.workPhone === 'string' || typeof fields.phones.workPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.workPhone = fields.phones.workPhone.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.personal_mobile !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.personalMobile = fields.phones.personal_mobile;\n\t\t\t}\n\t\t\tif (typeof fields.phones.personalMobile === 'string' || typeof fields.phones.personalMobile === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.personalMobile = fields.phones.personalMobile.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.personal_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.personalPhone = fields.phones.personal_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.personalPhone === 'string' || typeof fields.phones.personalPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.personalPhone = fields.phones.personalPhone.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.inner_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.innerPhone = fields.phones.inner_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.innerPhone === 'string' || typeof fields.phones.innerPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.innerPhone = fields.phones.innerPhone.toString();\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\taddToOnlineList(state, id)\n\t{\n\t\tif (!state.onlineList.includes(id))\n\t\t{\n\t\t\tstate.onlineList.push(id);\n\t\t}\n\t}\n\n\taddToMobileOnlineList(state, id)\n\t{\n\t\tif (!state.mobileOnlineList.includes(id))\n\t\t{\n\t\t\tstate.mobileOnlineList.push(id);\n\t\t}\n\t}\n\n\taddToAbsentList(state, id)\n\t{\n\t\tif (!state.absentList.includes(id))\n\t\t{\n\t\t\tstate.absentList.push(id);\n\t\t}\n\t}\n\n\tgetTimeToNextMidnight()\n\t{\n\t\tlet nextMidnight = new Date(new Date().setHours(24,0,0)).getTime();\n\t\treturn nextMidnight - new Date();\n\t}\n\n\tstartAbsentCheckInterval(state)\n\t{\n\t\tfor (let userId of state.absentList)\n\t\t{\n\t\t\tlet user = state.collection[userId];\n\n\t\t\tif (!user)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet currentTime = new Date().getTime();\n\t\t\tlet absentEnd = new Date(state.collection[userId].absent).getTime();\n\n\t\t\tif (absentEnd <= currentTime)\n\t\t\t{\n\t\t\t\tstate.absentList = state.absentList.filter(element => {\n\t\t\t\t\treturn element !== userId;\n\t\t\t\t});\n\t\t\t\tuser.isAbsent = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tstartOnlineCheckInterval()\n\t{\n\t\tconst intervalTime = 60000;\n\n\t\tsetInterval(() => {\n\t\t\tfor (let userId of this.store.state.users.onlineList)\n\t\t\t{\n\t\t\t\tlet user = this.store.state.users.collection[userId];\n\n\t\t\t\tif (!user)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet status = Utils.user.getOnlineStatus(user);\n\t\t\t\tif (status.isOnline)\n\t\t\t\t{\n\t\t\t\t\tuser.isOnline = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tuser.isOnline = false;\n\t\t\t\t\tthis.store.state.users.onlineList = this.store.state.users.onlineList.filter(element => {\n\t\t\t\t\t\treturn element !== userId\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let userId of this.store.state.users.mobileOnlineList)\n\t\t\t{\n\t\t\t\tlet user = this.store.state.users.collection[userId];\n\n\t\t\t\tif (!user)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet mobileStatus = Utils.user.isMobileActive(user);\n\t\t\t\tif (mobileStatus)\n\t\t\t\t{\n\t\t\t\t\tuser.isMobileOnline = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tuser.isMobileOnline = false;\n\t\t\t\t\tthis.store.state.users.mobileOnlineList = this.store.state.users.mobileOnlineList.filter(element => {\n\t\t\t\t\t\treturn element !== userId\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, intervalTime);\n\t}\n}","/**\n * Bitrix Messenger\n * Files model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {FileStatus, FileType, MutationType} from 'im.const';\nimport {Utils} from \"im.lib.utils\";\n\nexport class FilesModel extends VuexBuilderModel\n{\n\tstatic maxDiskFileSize = 5242880;\n\n\tgetName()\n\t{\n\t\treturn 'files';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcreated: 0,\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {},\n\t\t\tindex: {},\n\t\t}\n\t}\n\n\tgetElementState(params = {})\n\t{\n\t\tlet {\n\t\t\tid = 0,\n\t\t\tchatId = 0,\n\t\t\tname = this.getVariable('default.name', ''),\n\t\t} = params;\n\n\t\treturn {\n\t\t\tid,\n\t\t\tchatId,\n\t\t\tname,\n\t\t\ttemplateId: id,\n\t\t\tdate: new Date(),\n\t\t\ttype: 'file',\n\t\t\textension: \"\",\n\t\t\ticon: \"empty\",\n\t\t\tsize: 0,\n\t\t\timage: false,\n\t\t\tstatus: FileStatus.done,\n\t\t\tprogress: 100,\n\t\t\tauthorId: 0,\n\t\t\tauthorName: \"\",\n\t\t\turlPreview: \"\",\n\t\t\turlShow: \"\",\n\t\t\turlDownload: \"\",\n\t\t\tinit: false,\n\t\t\tviewerAttrs: {}\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => (chatId, fileId, getTemporary = false) =>\n\t\t\t{\n\t\t\t\tif (!chatId || !fileId)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (!state.index[chatId] || !state.index[chatId][fileId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (!getTemporary && !state.index[chatId][fileId].init)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.index[chatId][fileId];\n\t\t\t},\n\t\t\tgetList: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.index[chatId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.index[chatId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState(params);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tadd: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\tresult.id = 'temporary' + (new Date).getTime() + store.state.created;\n\t\t\t\tresult.templateId = result.id;\n\t\t\t\tresult.init = true;\n\n\t\t\t\tstore.commit('add', Object.assign({}, this.getElementState(), result));\n\n\t\t\t\treturn result.id;\n\t\t\t},\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(file => {\n\t\t\t\t\t\tlet result = this.validate(Object.assign({}, file), {host: store.state.host});\n\t\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\t\treturn Object.assign({}, this.getElementState(), result, {init: true});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\tpayload = [];\n\t\t\t\t\tpayload.push(\n\t\t\t\t\t\tObject.assign({}, this.getElementState(), result, {init: true})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.setAfter,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetBefore: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(file => {\n\t\t\t\t\t\tlet result = this.validate(Object.assign({}, file), {host: store.state.host});\n\t\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\t\treturn Object.assign({}, this.getElementState(), result, {init: true});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\tpayload = [];\n\t\t\t\t\tpayload.push(\n\t\t\t\t\t\tObject.assign({}, this.getElementState(), result, {init: true})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tactionName: 'setBefore',\n\t\t\t\t\tinsertType : MutationType.setBefore,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload.fields), {host: store.state.host});\n\n\t\t\t\tstore.commit('initCollection', {chatId: payload.chatId});\n\n\t\t\t\tlet index = store.state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\tif (index < 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\tindex : index,\n\t\t\t\t\tfields : result\n\t\t\t\t});\n\n\t\t\t\tif (payload.fields.blink)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\t\tfields : {blink: false}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tsaveState: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('saveState', {});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\t\t\t},\n\t\t\tadd: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.chatId].push(payload);\n\t\t\t\tstate.index[payload.chatId][payload.id] = payload;\n\n\t\t\t\tstate.created += 1;\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload.data)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {chatId: element.chatId});\n\n\t\t\t\t\tlet index = state.collection[element.chatId].findIndex(el => el.id === element.id);\n\t\t\t\t\tif (index > -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete element.templateId;\n\t\t\t\t\t\tstate.collection[element.chatId][index] = Object.assign(state.collection[element.chatId][index], element);\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.insertType === MutationType.setBefore)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].unshift(element);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].push(element);\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.index[element.chatId][element.id] = element;\n\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tlet index = -1;\n\t\t\t\tif (typeof payload.index !== 'undefined' && state.collection[payload.chatId][payload.index])\n\t\t\t\t{\n\t\t\t\t\tindex = payload.index;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tindex = state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\t}\n\n\t\t\t\tif (index >= 0)\n\t\t\t\t{\n\t\t\t\t\tdelete payload.fields.templateId;\n\t\t\t\t\tlet element = Object.assign(\n\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\tpayload.fields\n\t\t\t\t\t);\n\t\t\t\t\tstate.collection[payload.chatId][index] = element;\n\t\t\t\t\tstate.index[payload.chatId][element.id] = element;\n\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.chatId] = state.collection[payload.chatId].filter(element => element.id !== payload.id);\n\t\t\t\tdelete state.index[payload.chatId][payload.id];\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tsaveState: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t}\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof state.collection[payload.chatId] !== 'undefined')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tVue.set(state.collection, payload.chatId, []);\n\t\tVue.set(state.index, payload.chatId, {});\n\n\t\treturn true;\n\t}\n\n\tgetLoadedState(state)\n\t{\n\t\tif (!state || typeof state !== 'object')\n\t\t{\n\t\t\treturn state;\n\t\t}\n\n\t\tif (typeof state.collection !== 'object')\n\t\t{\n\t\t\treturn state;\n\t\t}\n\n\t\tstate.index = {};\n\n\t\tfor (let chatId in state.collection)\n\t\t{\n\t\t\tif (!state.collection.hasOwnProperty(chatId))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tstate.index[chatId] = {};\n\n\t\t\tstate.collection[chatId]\n\t\t\t\t.filter(file => file != null)\n\t\t\t\t.forEach(file => {\n\t\t\t\t\tstate.index[chatId][file.id] = file;\n\t\t\t});\n\t\t}\n\n\t\treturn state;\n\t}\n\n\tgetSaveFileList()\n\t{\n\t\tif (!this.db)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!this.store.getters['messages/getSaveFileList'])\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tlet list = this.store.getters['messages/getSaveFileList']();\n\t\tif (!list)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 250;\n\t}\n\n\tsaveState(state)\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet list = this.getSaveFileList();\n\t\t\tif (!list)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t};\n\n\t\t\tfor (let chatId in list)\n\t\t\t{\n\t\t\t\tif (!list.hasOwnProperty(chatId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlist[chatId].forEach(fileId =>\n\t\t\t\t{\n\t\t\t\t\tif (!state.index[chatId])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!state.index[chatId][fileId])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!storedState.collection[chatId])\n\t\t\t\t\t{\n\t\t\t\t\t\tstoredState.collection[chatId] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tstoredState.collection[chatId].push(\n\t\t\t\t\t\tstate.index[chatId][fileId]\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.id === \"number\")\n\t\t{\n\t\t\tresult.id = fields.id;\n\t\t}\n\t\telse if (typeof fields.id === \"string\")\n\t\t{\n\t\t\tif (fields.id.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.id = fields.id;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.id = parseInt(fields.id);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.templateId === \"number\")\n\t\t{\n\t\t\tresult.templateId = fields.templateId;\n\t\t}\n\t\telse if (typeof fields.templateId === \"string\")\n\t\t{\n\t\t\tif (fields.templateId.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.templateId = fields.templateId;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.templateId = parseInt(fields.templateId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\n\t\tif (typeof fields.date !== \"undefined\")\n\t\t{\n\t\t\tresult.date = Utils.date.cast(fields.date);\n\t\t}\n\n\t\tif (typeof fields.type === \"string\")\n\t\t{\n\t\t\tresult.type = fields.type;\n\t\t}\n\n\t\tif (typeof fields.extension === \"string\")\n\t\t{\n\t\t\tresult.extension = fields.extension.toString();\n\n\t\t\tif (result.type === 'image')\n\t\t\t{\n\t\t\t\tresult.icon = 'img';\n\t\t\t}\n\t\t\telse if (result.type === 'video')\n\t\t\t{\n\t\t\t\tresult.icon = 'mov';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.icon = FilesModel.getIconType(result.extension);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = fields.name.toString();\n\t\t}\n\n\n\t\tif (typeof fields.size === \"number\" || typeof fields.size === \"string\")\n\t\t{\n\t\t\tresult.size = parseInt(fields.size);\n\t\t}\n\n\t\tif (typeof fields.image === 'boolean')\n\t\t{\n\t\t\tresult.image = false;\n\t\t}\n\t\telse if (typeof fields.image === 'object' && fields.image)\n\t\t{\n\t\t\tresult.image = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t};\n\n\t\t\tif (typeof fields.image.width === \"string\" || typeof fields.image.width === \"number\")\n\t\t\t{\n\t\t\t\tresult.image.width = parseInt(fields.image.width);\n\t\t\t}\n\t\t\tif (typeof fields.image.height === \"string\" || typeof fields.image.height === \"number\")\n\t\t\t{\n\t\t\t\tresult.image.height = parseInt(fields.image.height);\n\t\t\t}\n\n\t\t\tif (result.image.width <= 0 || result.image.height <= 0)\n\t\t\t{\n\t\t\t\tresult.image = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.status === \"string\" && typeof FileStatus[fields.status] !== 'undefined')\n\t\t{\n\t\t\tresult.status = fields.status;\n\t\t}\n\n\t\tif (typeof fields.progress === \"number\" || typeof fields.progress === \"string\")\n\t\t{\n\t\t\tresult.progress = parseInt(fields.progress);\n\t\t}\n\n\t\tif (typeof fields.authorId === \"number\" || typeof fields.authorId === \"string\")\n\t\t{\n\t\t\tresult.authorId = parseInt(fields.authorId);\n\t\t}\n\n\t\tif (typeof fields.authorName === \"string\" || typeof fields.authorName === \"number\")\n\t\t{\n\t\t\tresult.authorName = fields.authorName.toString();\n\t\t}\n\n\t\tif (typeof fields.urlPreview === 'string')\n\t\t{\n\t\t\tif (\n\t\t\t\t!fields.urlPreview\n\t\t\t\t|| fields.urlPreview.startsWith('http')\n\t\t\t\t|| fields.urlPreview.startsWith('bx')\n\t\t\t\t|| fields.urlPreview.startsWith('file')\n\t\t\t\t|| fields.urlPreview.startsWith('blob')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.urlPreview = fields.urlPreview;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlPreview = options.host+fields.urlPreview;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.urlDownload === 'string')\n\t\t{\n\t\t\tif (\n\t\t\t\t!fields.urlDownload\n\t\t\t\t|| fields.urlDownload.startsWith('http')\n\t\t\t\t|| fields.urlDownload.startsWith('bx')\n\t\t\t\t|| fields.urlPreview.startsWith('file')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.urlDownload = fields.urlDownload;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlDownload = options.host+fields.urlDownload;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.urlShow === 'string')\n\t\t{\n\t\t\tif (\n\t\t\t\t!fields.urlShow\n\t\t\t\t|| fields.urlShow.startsWith('http')\n\t\t\t\t|| fields.urlShow.startsWith('bx')\n\t\t\t\t|| fields.urlShow.startsWith('file')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.urlShow = fields.urlShow;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlShow = options.host+fields.urlShow;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.viewerAttrs === 'object')\n\t\t{\n\t\t\tif (result.type === 'image' && !Utils.platform.isBitrixMobile())\n\t\t\t{\n\t\t\t\tresult.viewerAttrs = fields.viewerAttrs;\n\t\t\t}\n\n\t\t\tif (result.type === 'video' && !Utils.platform.isBitrixMobile() && result.size > FilesModel.maxDiskFileSize)\n\t\t\t{\n\t\t\t\tresult.viewerAttrs = fields.viewerAttrs;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic getType(type)\n\t{\n\t\ttype = type.toString().toLowerCase().split('.').splice(-1)[0];\n\n\t\tswitch(type)\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\tcase 'webp':\n\t\t\t\treturn FileType.image;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\treturn FileType.video;\n\n\t\t\tcase 'mp3':\n\t\t\t\treturn FileType.audio;\n\t\t}\n\n\t\treturn FileType.file\n\t}\n\n\tstatic getIconType(extension)\n\t{\n\t\tlet icon = 'empty';\n\n\t\tswitch(extension.toString())\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\tcase 'webp':\n\t\t\t\ticon = 'img';\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\ticon = 'mov';\n\t\t\t\tbreak;\n\n\t\t\tcase 'txt':\n\t\t\t\ticon = 'txt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'doc':\n\t\t\tcase 'docx':\n\t\t\t\ticon = 'doc';\n\t\t\t\tbreak;\n\n\t\t\tcase 'xls':\n\t\t\tcase 'xlsx':\n\t\t\t\ticon = 'xls';\n\t\t\t\tbreak;\n\n\t\t\tcase 'php':\n\t\t\t\ticon = 'php';\n\t\t\t\tbreak;\n\n\t\t\tcase 'pdf':\n\t\t\t\ticon = 'pdf';\n\t\t\t\tbreak;\n\n\t\t\tcase 'ppt':\n\t\t\tcase 'pptx':\n\t\t\t\ticon = 'ppt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'rar':\n\t\t\t\ticon = 'rar';\n\t\t\t\tbreak;\n\n\t\t\tcase 'zip':\n\t\t\tcase '7z':\n\t\t\tcase 'tar':\n\t\t\tcase 'gz':\n\t\t\tcase 'gzip':\n\t\t\t\ticon = 'zip';\n\t\t\t\tbreak;\n\n\t\t\tcase 'set':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\n\t\t\tcase 'conf':\n\t\t\tcase 'ini':\n\t\t\tcase 'plist':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn icon;\n\t}\n}","/**\n * Bitrix Messenger\n * Recent model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class RecentModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'recent';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {\n\t\t\t\tpinned: [],\n\t\t\t\tgeneral: []\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElementState(params = {})\n\t{\n\t\treturn {\n\t\t\tid: 0,\n\t\t\ttemplateId: '',\n\t\t\ttemplate: 'item',\n\t\t\tchatType: 'chat',\n\t\t\tsectionCode: 'general',\n\t\t\tavatar: '',\n\t\t\tcolor: '#048bd0',\n\t\t\ttitle: '',\n\t\t\tlines: {id: 0, status: 0},\n\t\t\tmessage: {\n\t\t\t\tid: 0,\n\t\t\t\ttext: '',\n\t\t\t\tdate: new Date()\n\t\t\t},\n\t\t\tcounter: 0,\n\t\t\tpinned: false,\n\t\t\tchatId: 0,\n\t\t\tuserId: 0\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => dialogId =>\n\t\t\t{\n\t\t\t\treturn this.findItem(state.collection, dialogId);\n\t\t\t}\n\t\t};\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = {};\n\n\t\t\t\tif (payload.pinned instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tresult.pinned = payload.pinned.map(\n\t\t\t\t\t\trecentItem => this.prepareItem(recentItem, { host: store.state.host, sectionCode: 'pinned' })\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if (typeof payload.pinned !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tlet pinned = [];\n\t\t\t\t\tpinned.push(this.prepareItem(payload.pinned, { host: store.state.host, sectionCode: 'pinned' }));\n\n\t\t\t\t\tresult.pinned = pinned;\n\t\t\t\t}\n\n\t\t\t\tif (payload.general instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tresult.general = payload.general.map(\n\t\t\t\t\t\trecentItem => this.prepareItem(recentItem, { host: store.state.host })\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if (typeof payload.general !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tlet general = [];\n\t\t\t\t\tgeneral.push(this.prepareItem(payload.general, { host: store.state.host }));\n\n\t\t\t\t\tresult.general = general;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', result);\n\t\t\t},\n\n\t\t\tupdatePlaceholders: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (!(payload.items instanceof Array))\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tpayload.items = payload.items.map(element => this.prepareItem(element));\n\n\t\t\t\tpayload.items.forEach((element, index) => {\n\t\t\t\t\tlet placeholderId = 'placeholder' + (payload.firstMessage + index);\n\t\t\t\t\tlet existingPlaceholder = this.findItem(\n\t\t\t\t\t\tstore.state.collection,\n\t\t\t\t\t\tplaceholderId,\n\t\t\t\t\t\t'templateId'\n\t\t\t\t\t);\n\n\t\t\t\t\tlet existingItem = this.findItem(store.state.collection, element.id);\n\n\t\t\t\t\tif (existingItem.element)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tindex: existingItem.index,\n\t\t\t\t\t\t\tfields: Object.assign({}, element),\n\t\t\t\t\t\t\tsection: 'general'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tstore.commit('delete', {\n\t\t\t\t\t\t\tindex: existingPlaceholder.index,\n\t\t\t\t\t\t\tsection: 'general'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tindex: existingPlaceholder.index,\n\t\t\t\t\t\t\tfields: Object.assign({}, element),\n\t\t\t\t\t\t\tsection: 'general'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof payload !== 'object' ||\n\t\t\t\t\tpayload instanceof Array ||\n\t\t\t\t\t!payload.id ||\n\t\t\t\t\t!payload.fields\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (typeof payload.id === 'string' && !payload.id.startsWith('chat') && payload.id !== 'notify')\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\n\t\t\t\tlet existingItem = this.findItem(store.state.collection, payload.id);\n\n\t\t\t\tif (!existingItem.element)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tindex: existingItem.index,\n\t\t\t\t\tfields: Object.assign({}, this.validate(payload.fields)),\n\t\t\t\t\tsection: existingItem.element.sectionCode\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tpin: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof payload !== 'object' ||\n\t\t\t\t\tpayload instanceof Array ||\n\t\t\t\t\t!payload.id ||\n\t\t\t\t\ttypeof payload.action !== 'boolean'\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (typeof payload.id === 'string' && !payload.id.startsWith('chat') && payload.id !== 'notify')\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\n\t\t\t\tlet existingItem = this.findItem(store.state.collection, payload.id, undefined, payload.action? 'general': 'pinned');\n\n\t\t\t\tif (!existingItem.element)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (payload.action)\n\t\t\t\t{\n\t\t\t\t\tstore.state.collection.pinned.push(\n\t\t\t\t\t\tObject.assign({}, existingItem.element, {\n\t\t\t\t\t\t\tsectionCode: 'pinned',\n\t\t\t\t\t\t\tpinned: true\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tstore.state.collection.pinned.sort(this.sortListByMessageDate);\n\n\t\t\t\t\tstore.commit('delete', {\n\t\t\t\t\t\tindex: existingItem.index,\n\t\t\t\t\t\tsection: 'general'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstore.state.collection.general.push(\n\t\t\t\t\t\tObject.assign({}, existingItem.element, {\n\t\t\t\t\t\t\tsectionCode: 'general',\n\t\t\t\t\t\t\tpinned: false\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tstore.state.collection.general.sort(this.sortListByMessageDate);\n\n\t\t\t\t\tstore.commit('delete', {\n\t\t\t\t\t\tindex: existingItem.index,\n\t\t\t\t\t\tsection: 'pinned'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tclearPlaceholders: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.state.collection.general = store.state.collection.general.filter(element => {\n\t\t\t\t\treturn !element.id.toString().startsWith('placeholder');\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof payload !== 'object' ||\n\t\t\t\t\tpayload instanceof Array ||\n\t\t\t\t\t!payload.id\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (typeof payload.id === 'string' && !payload.id.startsWith('chat') && payload.id !== 'notify')\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\n\t\t\t\tlet existingItem = this.findItem(store.state.collection, payload.id);\n\n\t\t\t\tif (!existingItem.element)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('delete', {\n\t\t\t\t\tindex: existingItem.index,\n\t\t\t\t\tsection: existingItem.element.sectionCode\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tset: (state, payload) => {\n\t\t\t\tif (payload.general instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload.general.forEach(element => {\n\t\t\t\t\t\tlet {index, alreadyExists} = this.initCollection(state, element, 'general');\n\n\t\t\t\t\t\tif (alreadyExists)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection.general[index] = Object.assign(\n\t\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t\tstate.collection.general[index],\n\t\t\t\t\t\t\t\telement\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (payload.pinned instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload.pinned.forEach(element => {\n\t\t\t\t\t\tlet {index, alreadyExists} = this.initCollection(state, element, 'pinned');\n\t\t\t\t\t\tif (alreadyExists)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection.pinned[index] = Object.assign(\n\t\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t\tstate.collection.pinned[index],\n\t\t\t\t\t\t\t\telement\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tupdate: (state, payload) => {\n\t\t\t\tif (\n\t\t\t\t\t!payload ||\n\t\t\t\t\tpayload instanceof Array ||\n\t\t\t\t\ttypeof payload.fields !== 'object' ||\n\t\t\t\t\ttypeof payload.index !== 'number' ||\n\t\t\t\t\ttypeof payload.section !== 'string'\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstate.collection[payload.section][payload.index] = Object.assign(\n\t\t\t\t\t{},\n\t\t\t\t\tstate.collection[payload.section][payload.index],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\n\t\t\t\tstate.collection[payload.section].sort(this.sortListByMessageDate);\n\t\t\t},\n\n\t\t\tdelete: (state, payload) => {\n\t\t\t\tif (\n\t\t\t\t\t!payload ||\n\t\t\t\t\tpayload instanceof Array ||\n\t\t\t\t\ttypeof payload.index !== 'number' ||\n\t\t\t\t\ttypeof payload.section !== 'string'\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstate.collection[payload.section].splice(payload.index, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tinitCollection(state, payload, section)\n\t{\n\t\tlet existingItem = this.findItem(state.collection, payload.id, undefined, section);\n\n\t\tif (existingItem.element)\n\t\t{\n\t\t\treturn {index: existingItem.index, alreadyExists: true};\n\t\t}\n\n\t\tlet newLength = state.collection[section].push(Object.assign(\n\t\t\t{},\n\t\t\tthis.getElementState(),\n\t\t\tpayload\n\t\t));\n\n\t\treturn {index: newLength - 1, alreadyExists: false};\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\tif (typeof fields.id === \"number\" || typeof fields.id === \"string\")\n\t\t{\n\t\t\tresult.id = fields.id;\n\t\t}\n\n\t\tif (typeof fields.templateId === 'string')\n\t\t{\n\t\t\tresult.templateId = fields.templateId;\n\t\t}\n\n\t\tif (typeof fields.template === 'string')\n\t\t{\n\t\t\tresult.template = fields.template;\n\t\t}\n\n\t\tif (typeof fields.type === \"string\")\n\t\t{\n\t\t\tif (fields.type === 'chat')\n\t\t\t{\n\t\t\t\tif (fields.chat.type === 'open')\n\t\t\t\t{\n\t\t\t\t\tresult.chatType = 'open';\n\t\t\t\t}\n\t\t\t\telse if (fields.chat.type === 'chat')\n\t\t\t\t{\n\t\t\t\t\tresult.chatType = 'chat';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (fields.type === 'user')\n\t\t\t{\n\t\t\t\tresult.chatType = 'user';\n\t\t\t}\n\t\t\telse if (fields.type === 'notification')\n\t\t\t{\n\t\t\t\tresult.chatType = 'notification';\n\t\t\t\tfields.title = 'Notifications';\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tlet avatar;\n\n\t\t\tif (!fields.avatar || fields.avatar.endsWith('/js/im/images/blank.gif'))\n\t\t\t{\n\t\t\t\tavatar = '';\n\t\t\t}\n\t\t\telse if (fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tavatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatar = options.host + fields.avatar;\n\t\t\t}\n\n\t\t\tif (avatar)\n\t\t\t{\n\t\t\t\tresult.avatar = encodeURI(avatar);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.color === 'string')\n\t\t{\n\t\t\tresult.color = fields.color;\n\t\t}\n\n\t\tif (typeof fields.title === \"string\")\n\t\t{\n\t\t\tresult.title = fields.title;\n\t\t}\n\n\t\tif (\n\t\t\ttypeof fields.message === \"object\" &&\n\t\t\t!(fields.message instanceof Array) &&\n\t\t\tfields.message !== null)\n\t\t{\n\t\t\tresult.message = fields.message;\n\t\t}\n\n\t\tif (typeof fields.counter === 'number')\n\t\t{\n\t\t\tresult.counter = fields.counter;\n\t\t}\n\n\t\tif (typeof fields.pinned === 'boolean')\n\t\t{\n\t\t\tresult.pinned = fields.pinned;\n\t\t}\n\n\t\tif (typeof fields.chatId === 'number')\n\t\t{\n\t\t\tresult.chatId = fields.chatId;\n\t\t}\n\n\t\tif (typeof fields.userId === 'number')\n\t\t{\n\t\t\tresult.userId = fields.userId;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tsortListByMessageDate(a, b)\n\t{\n\t\tif (a.message && b.message)\n\t\t{\n\t\t\tlet timestampA = new Date(a.message.date).getTime();\n\t\t\tlet timestampB = new Date(b.message.date).getTime();\n\n\t\t\treturn timestampB - timestampA;\n\t\t}\n\t}\n\n\tprepareItem(item, options = {})\n\t{\n\t\tlet result = this.validate(Object.assign({}, item));\n\n\t\treturn Object.assign({}, this.getElementState(), result, options);\n\t}\n\n\tfindItem(store, value, key = 'id', section = 'general')\n\t{\n\t\tlet result = {};\n\t\tif (typeof store[section] === undefined)\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tlet elementIndex = store[section].findIndex((element, index) => {\n\t\t\treturn element[key] === value;\n\t\t});\n\n\t\tif (elementIndex !== -1)\n\t\t{\n\t\t\tresult.index = elementIndex;\n\t\t\tresult.element = store[section][elementIndex];\n\n\t\t\treturn result;\n\t\t}\n\n\t\treturn result;\n\t}\n}"],"names":["ApplicationModel","common","host","getVariable","location","protocol","siteId","userId","languageId","dialog","dialogId","chatId","diskFolderId","messageLimit","enableReadMessages","messageExtraCount","disk","enabled","maxFileSize","call","serverEnabled","maxParticipants","mobile","keyboardShow","device","type","DeviceType","desktop","orientation","DeviceOrientation","portrait","options","quoteEnable","quoteFromRight","autoplayVideo","darkBackground","showSmiles","error","active","code","description","Object","assign","set","store","payload","commit","validate","hideSmiles","state","hasChange","group","hasOwnProperty","field","isSaveNeeded","saveState","increaseDialogExtraCount","count","decreaseDialogExtraCount","newCounter","clearDialogExtraCount","fields","result","toString","startsWith","substr","parseInt","isNaN","VuexBuilderModel","CallApplicationModel","inited","passChecked","showChat","userCount","userInCallCount","CallStateType","preparation","conferenceTitle","alias","conferenceStarted","conferenceStartDate","joinWithVideo","userReadyToJoin","user","id","hash","componentError","startCall","endCall","returnToPreparation","toggleSmiles","setError","errorCode","setConferenceTitle","setAlias","setJoinType","setConferenceStatus","setConferenceStartDate","Date","setUserReadyToJoin","IntersectionType","empty","equal","none","found","foundReverse","MessagesModel","created","collection","mutationType","saveMessageList","saveFileList","saveUserList","templateId","templateType","authorId","date","text","textConverted","params","TYPE","COMPONENT_ID","push","unread","sending","retry","blink","getMutationType","initialType","MutationType","appliedType","getLastId","length","lastId","i","element","getMessage","messageId","index","get","getBlank","getElementState","getSaveFileList","getSaveUserList","add","getTime","dispatch","actionStart","test","Vue","nextTick","actionError","actionFinish","Array","map","message","prepareMessage","insertType","data","setAfter","setBefore","update","findIndex","el","setTimeout","delete","elements","clear","applyMutationType","readMessages","readId","unreadMessages","unreadId","initCollection","setMutationType","chats","chatsSave","forEach","StorageLimit","messages","filter","includes","intersection","manageCacheBeforeSet","reverse","foundElements","removeIntersectionCacheElements","clearTimeout","removeIntersectionCacheTimeout","noneElements","scrollStickToTop","scrollMessageId","unshift","getters","Set","lastElementId","needApplySort","sort","a","b","isSaveState","applied","saveNeeded","updateSubordinateStates","concat","cache","recursive","reverseResult","isSaveAvailable","slice","FILE_ID","updateSaveLists","storedState","chat_id","Utils","cast","textOriginal","convertToHtml","isConverted","text_converted","senderId","author_id","system","validateParams","BX","isComponent","like","decodeAttach","e","hasResultElements","quote","image","highlightText","enableBigSmile","trim","replace","quoteSign","indexOf","textPrepare","split","textPrepareFlag","join","decodeBbCode","whole","p1","p2","p3","p4","offset","changed","aInner","match","RegExp","doubleSmileSize","start","width","middle","height","end","textOnly","item","isArray","arrayElement","prop","htmlspecialcharsback","codeReplacement","link","tag","document","createElement","href","target","allowList","outerHTML","open","inner","close","openlines","number","htmlspecialchars","historyId","command","html","textElementSize","url","attrs","size","title","attributes","name","parentNode","innerHTML","src","DialoguesModel","saveDialogList","saveChatList","writingList","quoteId","counter","userCounter","unreadLastId","managerList","readedList","textareaMessage","editId","init","owner","extranet","avatar","color","entityType","entityId","entityData1","entityData2","entityData3","dateCreate","restrictions","extend","leave","leaveOwner","rename","public","getByChatId","getQuoteId","getEditId","canSaveChat","canSaveDialog","isPrivateDialog","updateWriting","action","userName","actionName","updateReaded","increaseCounter","increasedCounter","decreaseCounter","decreasedCounter","saveDialog","dialogues","cloneState","getElementStateSaveException","getState","dialog_id","user_counter","unread_id","unread_last_id","readed_list","record","user_id","user_name","message_id","writing_list","manager_list","mute_list","muteList","ownerId","endsWith","encodeURI","entity_type","entity_id","entity_data_1","entity_data_2","entity_data_3","date_create","dateLastOpen","AVATAR","EXTEND","LEAVE","LEAVE_OWNER","RENAME","UsersModel","startOnlineCheckInterval","onlineList","mobileOnlineList","absentList","firstName","lastName","workPosition","gender","birthday","isBirthday","network","bot","connector","externalAuthId","status","idle","lastActivityDate","mobileLastDate","isOnline","isMobileOnline","absent","isAbsent","departments","phones","workPhone","personalMobile","personalPhone","innerPhone","getTemporary","getOnlineStatus","addToOnlineList","mobileStatus","isMobileActive","addToMobileOnlineList","today","format","timeToNextMidnight","getTimeToNextMidnight","addToAbsentList","timeToNextDay","setInterval","startAbsentCheckInterval","newActivityDate","db","list","exceptionList","first_name","last_name","elementsOfName","work_position","external_auth_id","last_activity_date","mobile_last_date","departmentId","work_phone","personal_mobile","personal_phone","inner_phone","nextMidnight","setHours","currentTime","absentEnd","intervalTime","users","FilesModel","extension","icon","FileStatus","done","progress","authorName","urlPreview","urlShow","urlDownload","viewerAttrs","fileId","getList","file","getIconType","platform","isBitrixMobile","maxDiskFileSize","toLowerCase","splice","FileType","video","audio","RecentModel","pinned","general","template","chatType","sectionCode","lines","findItem","recentItem","prepareItem","updatePlaceholders","items","placeholderId","firstMessage","existingPlaceholder","existingItem","section","pin","undefined","sortListByMessageDate","clearPlaceholders","alreadyExists","newLength","chat","timestampA","timestampB","value","key","elementIndex"],"mappings":"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"}