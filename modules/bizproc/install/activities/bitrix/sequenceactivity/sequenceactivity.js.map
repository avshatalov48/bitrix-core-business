{"version":3,"file":"sequenceactivity.js","sources":["src/index.js"],"sourcesContent":["import { Dom, Tag, Event, Text, Type, Reflection } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Menu, MenuItem } from 'main.popup';\n\nimport './css/style.css';\n\n// eslint-disable-next-line @bitrix24/bitrix24-rules/no-pseudo-private,no-underscore-dangle\nlet _SequenceActivityCurClick = null;\n\n// eslint-disable-next-line @bitrix24/bitrix24-rules/no-pseudo-private,no-underscore-dangle\nfunction _SequenceActivityClick(activityIndex, i, presetId)\n{\n\tconst preset = presetId ? window.arAllActivities[activityIndex].PRESETS.find((item) => item.ID === presetId) : null;\n\tconst defaultProps = preset ? preset.PROPERTIES : {};\n\n\tconst activity = {\n\t\tProperties: {\n\t\t\tTitle: (preset && preset.NAME) || Text.encode(window.arAllActivities[activityIndex].NAME),\n\t\t\t...defaultProps,\n\t\t},\n\t\tType: window.arAllActivities[activityIndex].CLASS,\n\t\tChildren: [],\n\t};\n\n\t_SequenceActivityCurClick.AddActivity(window.CreateActivity(activity), i);\n}\n\n// eslint-disable-next-line @bitrix24/bitrix24-rules/no-pseudo-private,no-underscore-dangle\nfunction _SequenceActivityMyActivityClick(isn, i)\n{\n\tif (\n\t\twindow.arUserParams\n\t\t&& BX.type.isArray(window.arUserParams.SNIPPETS)\n\t\t&& window.arUserParams.SNIPPETS[isn]\n\t)\n\t{\n\t\t_SequenceActivityCurClick.AddActivity(window.CreateActivity(window.arUserParams.SNIPPETS[isn]), i);\n\t}\n}\n\nconst BizProcActivity = window.BizProcActivity;\n\nexport class SequenceActivity extends BizProcActivity\n{\n\t#numberHeadRows: number = 0;\n\n\tchildsContainer;\n\tlastDrop;\n\th1id;\n\th2id;\n\n\t#menuItems: [];\n\n\tconstructor()\n\t{\n\t\tsuper();\n\t\tthis.Type = 'SequenceActivity';\n\t\tthis.childsContainer = null;\n\n\t\tthis.#initDragNDropHandlers();\n\n\t\t// compatibility\n\t\tthis.LineMouseOver = this.#onLineMouseOver;\n\t\tthis.LineMouseOut = this.#onLineMouseOut;\n\t\tthis.OnClick = (event) => {\n\t\t\tthis.#onClick(event.target);\n\t\t};\n\t\tthis.ondragging = this.#onDragging.bind(this);\n\t\tthis.ondrop = this.#onDrop.bind(this);\n\n\t\tthis.ActivityRemoveChild = this.RemoveChild;\n\t\tthis.RemoveChild = this.#removeChild.bind(this);\n\t\tthis.RemoveResources = this.#removeResources.bind(this);\n\t\tthis.AddActivity = this.#addActivity.bind(this);\n\t\tthis.CreateLine = this.#createArrow.bind(this);\n\t\tthis.ActivityDraw = this.Draw;\n\t\tthis.Draw = this.#draw.bind(this);\n\t}\n\n\tget iHead(): number\n\t{\n\t\treturn this.#numberHeadRows;\n\t}\n\n\tset iHead(value: number)\n\t{\n\t\tif (Type.isInteger(value) && value >= 0)\n\t\t{\n\t\t\tthis.#numberHeadRows = value;\n\t\t}\n\t}\n\n\t#onLineMouseOver()\n\t{\n\t\tDom.style(this.parentNode, 'backgroundImage', 'url(/bitrix/images/bizproc/arr_over.gif)');\n\t}\n\n\t#onLineMouseOut()\n\t{\n\t\tDom.style(this.parentNode, 'backgroundImage', 'url(/bitrix/images/bizproc/arr.gif)');\n\t}\n\n\t#initDragNDropHandlers()\n\t{\n\t\tthis.lastDrop = false;\n\t\tthis.h1id = window.DragNDrop.AddHandler('ondragging', this.#onDragging.bind(this));\n\t\tthis.h2id = window.DragNDrop.AddHandler('ondrop', this.#onDrop.bind(this));\n\t}\n\n\t#onDragging(event, x, y)\n\t{\n\t\tif (this.childsContainer)\n\t\t{\n\t\t\tfor (let i = 0; i <= this.childActivities.length; i++)\n\t\t\t{\n\t\t\t\tconst arrow = this.childsContainer.rows[i * 2 + this.iHead].cells[0].childNodes[0];\n\t\t\t\tconst position = Dom.getPosition(arrow);\n\n\t\t\t\tif (position.left < x && x < position.right && position.top < y && y < position.bottom)\n\t\t\t\t{\n\t\t\t\t\tarrow.onmouseover();\n\t\t\t\t\tthis.lastDrop = arrow;\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.lastDrop)\n\t\t\t{\n\t\t\t\tthis.lastDrop.onmouseout();\n\t\t\t\tthis.lastDrop = false;\n\t\t\t}\n\t\t}\n\t}\n\n\t#onDrop(x, y, event)\n\t{\n\t\tif (this.childsContainer && this.lastDrop)\n\t\t{\n\t\t\tif (window.DragNDrop.obj.parentActivity && (event.ctrlKey === false && event.metaKey === false))\n\t\t\t{\n\t\t\t\tthis.#moveActivityToPosition(window.DragNDrop.obj, this.lastDrop);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.#copyActivityToPosition(window.DragNDrop.obj, this.lastDrop);\n\t\t\t}\n\t\t\tthis.lastDrop.onmouseout();\n\t\t\tthis.lastDrop = false;\n\t\t}\n\t}\n\n\t#moveActivityToPosition(originalActivity, positionNode)\n\t{\n\t\tconst parentActivity = originalActivity.parentActivity;\n\t\tconst childPosition = parentActivity.childActivities.findIndex((child) => child.Name === originalActivity.Name);\n\t\tconst position = positionNode.ind;\n\n\t\tif (\n\t\t\tparentActivity.Name !== this.Name\n\t\t\t|| (childPosition !== position && (childPosition + 1 !== position))\n\t\t)\n\t\t{\n\t\t\tif (this.#checkMovingCycle(originalActivity))\n\t\t\t{\n\t\t\t\tparentActivity.childsContainer.deleteRow(childPosition * 2 + 1 + parentActivity.iHead);\n\t\t\t\tparentActivity.childsContainer.deleteRow(childPosition * 2 + 1 + parentActivity.iHead);\n\n\t\t\t\tparentActivity.childActivities.splice(childPosition, 1);\n\t\t\t\tthis.#refreshArrows(parentActivity);\n\n\t\t\t\t// after refresh arrows position changed\n\t\t\t\tthis.#addActivity(originalActivity, positionNode.ind);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-native-dialogs,no-alert\n\t\t\t\talert(window.BPMESS.BPSA_ERROR_MOVE_1);\n\t\t\t}\n\t\t}\n\t}\n\n\t#checkMovingCycle(originalActivity): boolean\n\t{\n\t\t// eslint-disable-next-line unicorn/no-this-assignment\n\t\tlet activity = this;\n\t\twhile (activity)\n\t\t{\n\t\t\tif (originalActivity.Name === activity.Name)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tactivity = activity.parentActivity;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t#copyActivityToPosition(originalActivity, positionNode)\n\t{\n\t\tconst copiedActivity = window.CreateActivity(originalActivity);\n\t\tthis.AddActivity(copiedActivity, positionNode.ind);\n\t}\n\n\t#removeChild(child)\n\t{\n\t\tconst index = this.childActivities.indexOf(child);\n\t\tif (index >= 0)\n\t\t{\n\t\t\tthis.ActivityRemoveChild(child);\n\n\t\t\tif (this.childsContainer)\n\t\t\t{\n\t\t\t\tthis.childsContainer.deleteRow([index * 2 + 1 + this.iHead]);\n\t\t\t\tthis.childsContainer.deleteRow([index * 2 + 1 + this.iHead]);\n\n\t\t\t\tthis.#refreshArrows(this);\n\t\t\t}\n\t\t}\n\t}\n\n\t#refreshArrows(activity)\n\t{\n\t\tfor (let i = 0; i <= activity.childActivities.length; i++)\n\t\t{\n\t\t\t// eslint-disable-next-line no-param-reassign\n\t\t\tactivity.childsContainer.rows[i * 2 + activity.iHead].cells[0].childNodes[0].ind = i;\n\t\t}\n\t}\n\n\t#removeResources()\n\t{\n\t\twindow.DragNDrop.RemoveHandler('ondragging', this.h1id);\n\t\twindow.DragNDrop.RemoveHandler('ondrop', this.h2id);\n\n\t\tif (this.childsContainer && this.childsContainer.parentNode)\n\t\t{\n\t\t\tDom.remove(this.childsContainer);\n\t\t\tthis.childsContainer = null;\n\t\t}\n\t}\n\n\t#onClick(bindElement)\n\t{\n\t\t// eslint-disable-next-line unicorn/no-this-assignment\n\t\t_SequenceActivityCurClick = this;\n\n\t\tconst menu = new Menu({\n\t\t\tbindElement,\n\t\t\tid: `all-worfklow-activity-${Text.getRandom()}`,\n\t\t\tminWidth: 190,\n\t\t\tautoHide: true,\n\t\t\tzIndexOptions: { alwaysOnTop: true },\n\t\t\tcacheable: false,\n\t\t\titems: this.#getAllActivitiesMenuItems(),\n\t\t\tsubMenuOptions: {\n\t\t\t\tmaxWidth: 850,\n\t\t\t\tmaxHeight: 600,\n\t\t\t},\n\t\t});\n\t\tmenu.show();\n\t}\n\n\t#getAllActivitiesMenuItems(): []\n\t{\n\t\tif (this.#menuItems)\n\t\t{\n\t\t\tthis.#addMyActivitiesMenuItem();\n\n\t\t\treturn this.#menuItems;\n\t\t}\n\n\t\tconst items = this.#getGroupMenuItems();\n\t\tObject.entries(window.arAllActivities).forEach(([id, description]) => {\n\t\t\tif (\n\t\t\t\t(id !== 'setstateactivity' || window.rootActivity.Type !== this.Type)\n\t\t\t\t&& !description.EXCLUDED\n\t\t\t\t&& description.CATEGORY\n\t\t\t)\n\t\t\t{\n\t\t\t\tconst groupId = description.CATEGORY.OWN_ID ?? description.CATEGORY.ID;\n\t\t\t\tif (items[groupId])\n\t\t\t\t{\n\t\t\t\t\titems[groupId].items.push(this.#getActivityMenuItem(id, description));\n\n\t\t\t\t\tif (Type.isArrayFilled(description.PRESETS))\n\t\t\t\t\t{\n\t\t\t\t\t\tdescription.PRESETS.forEach((preset) => {\n\t\t\t\t\t\t\titems[groupId].items.push(this.#getActivityMenuItem(id, description, preset));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (items.rest && Reflection.getClass('BX.rest.Marketplace'))\n\t\t{\n\t\t\titems.rest.items.push({\n\t\t\t\tclassName: 'bizproc-designer-sequence-activity-menu-item-icon',\n\t\t\t\thtml: this.#renderActivityMenuItemNode(\n\t\t\t\t\twindow.BPMESS.BPSA_MARKETPLACE_ADD_TITLE_2,\n\t\t\t\t\twindow.BPMESS.BPSA_MARKETPLACE_ADD_DESCR_3,\n\t\t\t\t),\n\t\t\t\ttitle: window.BPMESS.BPSA_MARKETPLACE_ADD_DESCR_3,\n\t\t\t\tdataset: {\n\t\t\t\t\ticon: '/bitrix/images/bizproc/act_icon_plus.png',\n\t\t\t\t\tname: window.BPMESS.BPSA_MARKETPLACE_ADD_TITLE_2,\n\t\t\t\t},\n\t\t\t\tonclick: (event, menuItem: MenuItem) => {\n\t\t\t\t\tBX.rest.Marketplace.open({}, 'auto_pb');\n\t\t\t\t\tmenuItem.getMenuWindow().getParentMenuWindow().close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.#menuItems = Object.values(items).filter((item) => item.items.length > 0);\n\n\t\tthis.#addMyActivitiesMenuItem();\n\n\t\treturn this.#menuItems;\n\t}\n\n\t#getGroupMenuItems(): {}\n\t{\n\t\tconst items = {};\n\t\tObject.entries(window.arAllActGroups).forEach(([id, title]) => {\n\t\t\titems[id] = {\n\t\t\t\tid,\n\t\t\t\ttext: title,\n\t\t\t\titems: [],\n\t\t\t\tevents: { 'SubMenu:onShow': this.#onGroupItemSubMenuShow },\n\t\t\t};\n\t\t});\n\n\t\treturn items;\n\t}\n\n\t#addMyActivitiesMenuItem()\n\t{\n\t\tconst index = this.#menuItems.findIndex((item) => item.id === 'MyActivity');\n\t\tif (index >= 0)\n\t\t{\n\t\t\tthis.#menuItems.splice(index, 1);\n\t\t}\n\n\t\tif (window.arUserParams && Type.isArrayFilled(window.arUserParams.SNIPPETS))\n\t\t{\n\t\t\tconst item = {\n\t\t\t\tid: 'MyActivity',\n\t\t\t\ttext: window.BPMESS.BPSA_MY_ACTIVITIES_1,\n\t\t\t\titems: [],\n\t\t\t\tevents: { 'SubMenu:onShow': this.#onGroupItemSubMenuShow },\n\t\t\t};\n\n\t\t\twindow.arUserParams.SNIPPETS.forEach((snippet, index) => {\n\t\t\t\titem.items.push({\n\t\t\t\t\tclassName: 'bizproc-designer-sequence-activity-menu-item-icon',\n\t\t\t\t\thtml: this.#renderActivityMenuItemNode(snippet.Properties.Title, ''),\n\t\t\t\t\tdataset: {\n\t\t\t\t\t\ticon: snippet.Icon ?? '/bitrix/images/bizproc/act_icon.gif',\n\t\t\t\t\t\tname: snippet.Properties.Title,\n\t\t\t\t\t},\n\t\t\t\t\ttitle: snippet.Properties.Title,\n\t\t\t\t\tonclick: (event, menuItem: MenuItem) => {\n\t\t\t\t\t\t_SequenceActivityMyActivityClick(\n\t\t\t\t\t\t\tindex,\n\t\t\t\t\t\t\tmenuItem.getMenuWindow().getParentMenuWindow().bindElement.ind,\n\t\t\t\t\t\t);\n\t\t\t\t\t\tmenuItem.getMenuWindow().getParentMenuWindow().close()\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.#menuItems.push(item);\n\t\t}\n\t}\n\n\t#getActivityMenuItem(id: string, description: {}, preset: {}): {}\n\t{\n\t\tconst descriptionText = preset && preset.DESCRIPTION ? preset.DESCRIPTION : description.DESCRIPTION;\n\n\t\treturn {\n\t\t\tonclick: (event: PointerEvent, menuItem: MenuItem) => {\n\t\t\t\t_SequenceActivityClick(\n\t\t\t\t\tid,\n\t\t\t\t\tmenuItem.getMenuWindow().getParentMenuWindow().bindElement.ind,\n\t\t\t\t\tpreset ? preset.ID : null,\n\t\t\t\t);\n\t\t\t\tmenuItem.getMenuWindow().getParentMenuWindow().close()\n\t\t\t},\n\t\t\tclassName: 'bizproc-designer-sequence-activity-menu-item-icon',\n\t\t\thtml: this.#renderActivityMenuItemNode(preset ? preset.NAME : description.NAME, descriptionText),\n\t\t\ttitle: descriptionText,\n\t\t\tdataset: {\n\t\t\t\ticon: description.ICON ?? '/bitrix/images/bizproc/act_icon.gif',\n\t\t\t\tname: description.NAME,\n\t\t\t},\n\t\t};\n\t}\n\n\t#renderActivityMenuItemNode(title, description): HTMLDivElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div style=\"line-height: normal; overflow: hidden; text-overflow: ellipsis;\">\n\t\t\t\t<span><b>${Text.encode(title)}</b></span>\n\t\t\t\t<br/>\n\t\t\t\t<span>${Text.encode(description)}</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#onGroupItemSubMenuShow(event: BaseEvent)\n\t{\n\t\tconst groupItem: MenuItem = event.getTarget();\n\t\tif (groupItem.getSubMenu() && groupItem.getSubMenu().getMenuItems())\n\t\t{\n\t\t\tgroupItem.getSubMenu().getMenuItems().forEach((item) => {\n\t\t\t\tconst iconNode = item.layout.item.querySelector('.menu-popup-item-icon');\n\t\t\t\tDom.append(\n\t\t\t\t\tTag.render`<img src=\"${Text.encode(item.dataset.icon)}\" alt=\"${Text.encode(item.dataset.name)}\"/>`,\n\t\t\t\t\ticonNode,\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n\n\t#addActivity(newActivity, position)\n\t{\n\t\tthis.childActivities.splice(position, 0, newActivity);\n\t\t// eslint-disable-next-line no-param-reassign\n\t\tnewActivity.parentActivity = this;\n\t\tnewActivity.setCanBeActivated(this.getCanBeActivatedChild());\n\n\t\tconst row = this.childsContainer.insertRow(position * 2 + 1 + this.iHead).insertCell(-1);\n\t\tDom.attr(row, { align: 'center', vAlign: 'center' });\n\n\t\tnewActivity.Draw(row);\n\n\t\tconst row2 = this.childsContainer.insertRow(position * 2 + 2 + this.iHead).insertCell(-1);\n\t\tDom.attr(row2, { align: 'center', vAlign: 'center' });\n\n\t\tthis.#createArrow(position + 1);\n\n\t\tthis.#refreshArrows(this);\n\n\t\twindow.BPTemplateIsModified = true;\n\t}\n\n\t#createArrow(index)\n\t{\n\t\tDom.style(\n\t\t\tthis.childsContainer.rows[index * 2 + this.iHead].cells[0],\n\t\t\t{\n\t\t\t\theight: '40px',\n\t\t\t\tbackground: 'url(/bitrix/images/bizproc/arr.gif) no-repeat scroll 50% 50%',\n\t\t\t},\n\t\t);\n\n\t\tconst image = BX.Dom.create('img', {\n\t\t\tattrs: {\n\t\t\t\tsrc: '/bitrix/images/1.gif',\n\t\t\t\twidth: '28',\n\t\t\t\theight: '21',\n\t\t\t},\n\t\t});\n\t\timage.onmouseover = this.#onLineMouseOver;\n\t\timage.onmouseout = this.#onLineMouseOut;\n\t\timage.ind = index;\n\t\tEvent.bind(image, 'click', this.#onClick.bind(this, image));\n\t\tDom.append(image, this.childsContainer.rows[index * 2 + this.iHead].cells[0]);\n\t}\n\n\t#draw(wrapper)\n\t{\n\t\tconst rows = Array.from(\n\t\t\t{ length: this.iHead + this.childActivities.length * 2 },\n\t\t\t() => Tag.render`\n\t\t\t\t<tr><td align=\"center\" valign=\"center\"></td></tr>\n\t\t\t`,\n\t\t);\n\n\t\tthis.childsContainer = Tag.render`\n\t\t\t<table \n\t\t\t\tclass=\"seqactivitycontainer\"\n\t\t\t\tid=\"${Text.encode(this.Name)}\"\n\t\t\t\twidth=\"100%\"\n\t\t\t\tcellspacing=\"0\"\n\t\t\t\tcellpadding=\"0\"\n\t\t\t\tborder=\"0\"\n\t\t\t>\n\t\t\t\t<tbody>\n\t\t\t\t\t<tr><td align=\"center\" valign=\"center\"></td></tr>\n\t\t\t\t\t${rows}\n\t\t\t\t</tbody>\n\t\t\t</table>\n\t\t`;\n\t\tDom.append(this.childsContainer, wrapper);\n\t\tthis.#createArrow(0);\n\t\tthis.childActivities.forEach((child, index) => {\n\t\t\tchild.Draw(this.childsContainer.rows[index * 2 + 1 + this.iHead].cells[0]);\n\t\t\tthis.#createArrow(Text.toInteger(index) + 1);\n\t\t});\n\n\t\tif (this.AfterSDraw)\n\t\t{\n\t\t\tthis.AfterSDraw();\n\t\t}\n\t}\n}\n"],"names":["_SequenceActivityCurClick","_SequenceActivityClick","activityIndex","i","presetId","preset","window","arAllActivities","PRESETS","find","item","ID","defaultProps","PROPERTIES","activity","Properties","Title","NAME","Text","encode","Type","CLASS","Children","AddActivity","CreateActivity","_SequenceActivityMyActivityClick","isn","arUserParams","BX","type","isArray","SNIPPETS","BizProcActivity","SequenceActivity","constructor","childsContainer","LineMouseOver","LineMouseOut","OnClick","event","target","ondragging","bind","ondrop","ActivityRemoveChild","RemoveChild","RemoveResources","CreateLine","ActivityDraw","Draw","iHead","value","isInteger","Dom","style","parentNode","lastDrop","h1id","DragNDrop","AddHandler","h2id","x","y","childActivities","length","arrow","rows","cells","childNodes","position","getPosition","left","right","top","bottom","onmouseover","onmouseout","obj","parentActivity","ctrlKey","metaKey","originalActivity","positionNode","childPosition","findIndex","child","Name","ind","deleteRow","splice","alert","BPMESS","BPSA_ERROR_MOVE_1","copiedActivity","index","indexOf","RemoveHandler","remove","bindElement","menu","Menu","id","getRandom","minWidth","autoHide","zIndexOptions","alwaysOnTop","cacheable","items","subMenuOptions","maxWidth","maxHeight","show","Object","entries","forEach","description","rootActivity","EXCLUDED","CATEGORY","groupId","OWN_ID","push","isArrayFilled","rest","Reflection","getClass","className","html","BPSA_MARKETPLACE_ADD_TITLE_2","BPSA_MARKETPLACE_ADD_DESCR_3","title","dataset","icon","name","onclick","menuItem","Marketplace","open","getMenuWindow","getParentMenuWindow","close","values","filter","arAllActGroups","text","events","BPSA_MY_ACTIVITIES_1","snippet","Icon","descriptionText","DESCRIPTION","ICON","Tag","render","groupItem","getTarget","getSubMenu","getMenuItems","iconNode","layout","querySelector","append","newActivity","setCanBeActivated","getCanBeActivatedChild","row","insertRow","insertCell","attr","align","vAlign","row2","BPTemplateIsModified","height","background","image","create","attrs","src","width","Event","wrapper","Array","from","toInteger","AfterSDraw"],"mappings":"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"}