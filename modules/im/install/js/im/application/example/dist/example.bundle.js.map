{"version":3,"file":"example.bundle.js","sources":["../src/example.js"],"sourcesContent":["/**\n * Bitrix Im\n * Core application\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\nimport {Core} from \"im.application.core\";\nimport {VueVendorV2} from \"ui.vue\";\nimport {Logger} from \"im.lib.logger\";\n\nexport class ExampleApplication\n{\n\t/* region 01. Initialize */\n\n\tconstructor(params = {})\n\t{\n\t\tthis.inited = false;\n\t\tthis.initPromise = new BX.Promise;\n\n\t\tthis.params = params;\n\n\t\tthis.rootNode = this.params.node || document.createElement('div');\n\n\t\tthis.template = null;\n\n\t\tthis.eventBus = new VueVendorV2;\n\n\t\tCore.ready()\n\t\t\t.then(result => this.initParams(result))\n\t\t\t.then(() => this.initComponent())\n\t\t\t.then(() => this.initComplete())\n\t\t;\n\t}\n\n\tinitParams(controller)\n\t{\n\t\tthis.controller = controller;\n\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\tinitComponent()\n\t{\n\t\treturn this.controller.createVue(this, {\n\t\t\tel: this.rootNode,\n\t\t\ttemplate: `<div>test2 {{store.application.common.host}}</div>`,\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\tstore()\n\t\t\t\t{\n\t\t\t\t\treturn this.$store.state;\n\t\t\t\t}\n\t\t\t},\n\t\t}).then(vue => {\n\t\t\tthis.template = vue;\n\t\t\treturn new Promise((resolve, reject) => resolve());\n\t\t});\n\t}\n\n\tinitComplete()\n\t{\n\t\tthis.inited = true;\n\t\tthis.initPromise.resolve(this);\n\n\t\treturn this.requestData();\n\t}\n\n\trequestData()\n\t{\n\t\tLogger.log('Requested data!');\n\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\tready()\n\t{\n\t\tif (this.inited)\n\t\t{\n\t\t\tlet promise = new BX.Promise;\n\t\t\tpromise.resolve(this);\n\n\t\t\treturn promise;\n\t\t}\n\n\t\treturn this.initPromise;\n\t}\n\n\t/* endregion 01. Initialize */\n\n\t/* region 02. Event Bus */\n\temit(eventName, params = {})\n\t{\n\t\tthis.eventBus.$emit(eventName, params);\n\n\t\treturn true;\n\t}\n\n\tlisten(eventName, callback)\n\t{\n\t\tif (typeof callback !== 'function')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.eventBus.$on(eventName, callback);\n\n\t\treturn true;\n\t}\n\t/* endregion 02. Event Bus */\n}"],"names":["ExampleApplication","params","inited","initPromise","BX","Promise","rootNode","node","document","createElement","template","eventBus","VueVendorV2","Core","ready","then","result","initParams","initComponent","initComplete","controller","resolve","reject","createVue","el","computed","store","$store","state","vue","requestData","Logger","log","promise","eventName","$emit","callback","$on"],"mappings":";;;;;CAAA;;;;;;;;AAQA,KAIaA,kBAAb;CAEC;CAEA,gCACA;CAAA;;CAAA,QADYC,MACZ,uEADqB,EACrB;CAAA;CACC,SAAKC,MAAL,GAAc,KAAd;CACA,SAAKC,WAAL,GAAmB,IAAIC,EAAE,CAACC,OAAP,EAAnB;CAEA,SAAKJ,MAAL,GAAcA,MAAd;CAEA,SAAKK,QAAL,GAAgB,KAAKL,MAAL,CAAYM,IAAZ,IAAoBC,QAAQ,CAACC,aAAT,CAAuB,KAAvB,CAApC;CAEA,SAAKC,QAAL,GAAgB,IAAhB;CAEA,SAAKC,QAAL,GAAgB,IAAIC,kBAAJ,EAAhB;CAEAC,IAAAA,wBAAI,CAACC,KAAL,GACEC,IADF,CACO,UAAAC,MAAM;CAAA,aAAI,KAAI,CAACC,UAAL,CAAgBD,MAAhB,CAAJ;CAAA,KADb,EAEED,IAFF,CAEO;CAAA,aAAM,KAAI,CAACG,aAAL,EAAN;CAAA,KAFP,EAGEH,IAHF,CAGO;CAAA,aAAM,KAAI,CAACI,YAAL,EAAN;CAAA,KAHP;CAKA;;CAtBF;CAAA;CAAA,+BAwBYC,UAxBZ,EAyBC;CACC,WAAKA,UAAL,GAAkBA,UAAlB;CAEA,aAAO,IAAIf,OAAJ,CAAY,UAACgB,OAAD,EAAUC,MAAV;CAAA,eAAqBD,OAAO,EAA5B;CAAA,OAAZ,CAAP;CACA;CA7BF;CAAA;CAAA,oCAgCC;CAAA;;CACC,aAAO,KAAKD,UAAL,CAAgBG,SAAhB,CAA0B,IAA1B,EAAgC;CACtCC,QAAAA,EAAE,EAAE,KAAKlB,QAD6B;CAEtCI,QAAAA,QAAQ,sDAF8B;CAGtCe,QAAAA,QAAQ,EACR;CACCC,UAAAA,KADD,mBAEC;CACC,mBAAO,KAAKC,MAAL,CAAYC,KAAnB;CACA;CAJF;CAJsC,OAAhC,EAUJb,IAVI,CAUC,UAAAc,GAAG,EAAI;CACd,QAAA,MAAI,CAACnB,QAAL,GAAgBmB,GAAhB;CACA,eAAO,IAAIxB,OAAJ,CAAY,UAACgB,OAAD,EAAUC,MAAV;CAAA,iBAAqBD,OAAO,EAA5B;CAAA,SAAZ,CAAP;CACA,OAbM,CAAP;CAcA;CA/CF;CAAA;CAAA,mCAkDC;CACC,WAAKnB,MAAL,GAAc,IAAd;CACA,WAAKC,WAAL,CAAiBkB,OAAjB,CAAyB,IAAzB;CAEA,aAAO,KAAKS,WAAL,EAAP;CACA;CAvDF;CAAA;CAAA,kCA0DC;CACCC,MAAAA,oBAAM,CAACC,GAAP,CAAW,iBAAX;CAEA,aAAO,IAAI3B,OAAJ,CAAY,UAACgB,OAAD,EAAUC,MAAV;CAAA,eAAqBD,OAAO,EAA5B;CAAA,OAAZ,CAAP;CACA;CA9DF;CAAA;CAAA,4BAiEC;CACC,UAAI,KAAKnB,MAAT,EACA;CACC,YAAI+B,OAAO,GAAG,IAAI7B,EAAE,CAACC,OAAP,EAAd;CACA4B,QAAAA,OAAO,CAACZ,OAAR,CAAgB,IAAhB;CAEA,eAAOY,OAAP;CACA;;CAED,aAAO,KAAK9B,WAAZ;CACA;CAED;;CAEA;;CA/ED;CAAA;CAAA,yBAgFM+B,SAhFN,EAiFC;CAAA,UADgBjC,MAChB,uEADyB,EACzB;CACC,WAAKU,QAAL,CAAcwB,KAAd,CAAoBD,SAApB,EAA+BjC,MAA/B;CAEA,aAAO,IAAP;CACA;CArFF;CAAA;CAAA,2BAuFQiC,SAvFR,EAuFmBE,QAvFnB,EAwFC;CACC,UAAI,OAAOA,QAAP,KAAoB,UAAxB,EACA;CACC,eAAO,KAAP;CACA;;CAED,WAAKzB,QAAL,CAAc0B,GAAd,CAAkBH,SAAlB,EAA6BE,QAA7B;CAEA,aAAO,IAAP;CACA;CACD;;CAlGD;CAAA;CAAA;;;;;;;;"}