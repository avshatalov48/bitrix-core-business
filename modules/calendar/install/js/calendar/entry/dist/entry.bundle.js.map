{"version":3,"file":"entry.bundle.js","sources":["../src/entrymanager.js","../src/entry.js"],"sourcesContent":["import { Entry } from './entry';\nimport { SectionManager } from 'calendar.sectionmanager';\nimport { Util } from 'calendar.util';\nimport {Dom, Event, Loc, Tag, Type} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { CompactEventForm } from 'calendar.compacteventform';\nimport 'ui.notification';\nimport { RoomsManager } from 'calendar.roomsmanager';\nimport {MessageBox} from \"ui.dialogs.messagebox\";\n\nexport class EntryManager {\n\tstatic newEntryName = '';\n\tstatic userIndex = {};\n\tstatic delayedActionList = [];\n\tstatic DELETE_DELAY_TIMEOUT = 4000;\n\tstatic slidersMap = new WeakMap();\n\n\tstatic getNewEntry(options)\n\t{\n\t\tconst newEntryData = {};\n\t\tconst dateTime = EntryManager.getNewEntryTime(new Date());\n\t\tconst userSettings = Util.getUserSettings();\n\t\tconst userId = Util.getCurrentUserId();\n\n\t\tnewEntryData.ID = null;\n\t\tnewEntryData.NAME = EntryManager.getNewEntryName();\n\t\tnewEntryData.dateFrom = dateTime.from;\n\t\tnewEntryData.dateTo = dateTime.to;\n\t\tif(options.type === 'location')\n\t\t{\n\t\t\tnewEntryData.SECT_ID = RoomsManager.getNewEntrySectionId(options.type, parseInt(options.ownerId));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tnewEntryData.SECT_ID = SectionManager.getNewEntrySectionId(options.type, parseInt(options.ownerId));\n\t\t}\n\t\tnewEntryData.REMIND = EntryManager.getNewEntryReminders();\n\n\t\tnewEntryData.attendeesEntityList = [{entityId: 'user', id: userId}];\n\t\tnewEntryData.ATTENDEE_LIST = [{id: Util.getCurrentUserId(), status: \"H\"}];\n\n\t\tif (options.type === 'user' && userId !== options.ownerId)\n\t\t{\n\t\t\tnewEntryData.attendeesEntityList.push({entityId: 'user', id: options.ownerId});\n\t\t\tnewEntryData.ATTENDEE_LIST = [\n\t\t\t\t{id: options.ownerId, status: \"H\"},\n\t\t\t\t{id: Util.getCurrentUserId(), status: \"Y\"}\n\t\t\t];\n\t\t}\n\t\telse if (options.type === 'group')\n\t\t{\n\t\t\tnewEntryData.attendeesEntityList.push({entityId: 'project', id: options.ownerId});\n\t\t}\n\n\t\tnewEntryData.TZ_FROM = userSettings.timezoneName || userSettings.timezoneDefaultName || '';\n\t\tnewEntryData.TZ_TO = userSettings.timezoneName || userSettings.timezoneDefaultName || '';\n\n\t\treturn new Entry({data: newEntryData});\n\t}\n\n\tstatic getNewEntryTime(date, duration)\n\t{\n\t\tdate = Util.getUsableDateTime(date);\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst displayedViewRange = calendarContext.getDisplayedViewRange();\n\t\t\tif (Type.isDate(displayedViewRange?.start))\n\t\t\t{\n\t\t\t\tconst dateTime = date.getTime();\n\t\t\t\tif (\n\t\t\t\t\tdateTime < displayedViewRange.start.getTime()\n\t\t\t\t\t|| dateTime > displayedViewRange.end.getTime()\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tconst startDate = new Date(displayedViewRange.start.getTime());\n\t\t\t\t\tconst workTime = calendarContext.util.getWorkTime();\n\t\t\t\t\tstartDate.setHours(workTime.start, 0, 0,0);\n\t\t\t\t\tdate = Util.getUsableDateTime(startDate);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tfrom : date,\n\t\t\tto : new Date(date.getTime() + (duration || 3600) * 1000)\n\t\t}\n\t}\n\n\tstatic getNewEntryName(): string\n\t{\n\t\treturn (EntryManager.newEntryName || '');\n\t}\n\n\tstatic setNewEntryName(newEntryName)\n\t{\n\t\tEntryManager.newEntryName = newEntryName;\n\t}\n\n\tstatic showEditEntryNotification(entryId)\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CALENDAR_SAVE_EVENT_NOTIFICATION'),\n\t\t\t[{\n\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_VIEW'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: function(event, balloon, action) {\n\n\t\t\t\t\t\tEntryManager.openViewSlider(entryId);\n\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t)\n\t}\n\n\tstatic showNewEntryNotification(entryId)\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CALENDAR_NEW_EVENT_NOTIFICATION'),\n\t\t\t[{\n\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_VIEW'),\n\t\t\t\tevents: {\n\t\t\t\t\tclick: (event, balloon, action) => {\n\n\t\t\t\t\t\tEntryManager.openViewSlider(entryId);\n\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}]\n\t\t)\n\t}\n\n\tstatic showDeleteEntryNotification(entry)\n\t{\n\t\tif (entry && entry instanceof Entry)\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tid: 'calendar' + entry.getUniqueId(),\n\t\t\t\tcontent: Loc.getMessage('CALENDAR_DELETE_EVENT_NOTIFICATION'),\n\t\t\t\tactions: [{\n\t\t\t\t\ttitle: Loc.getMessage('CALENDAR_EVENT_DO_CANCEL'),\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: (event, balloon, action) => {\n\t\t\t\t\t\t\tentry.cancelDelete();\n\t\t\t\t\t\t\tballoon.close();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}]\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showReleaseLocationNotification()\n\t{\n\t\tBX.UI.Notification.Center.notify({\n\t\t\tcontent: Loc.getMessage('CALENDAR_RELEASE_LOCATION_NOTIFICATION'),\n\t\t});\n\t}\n\n\tstatic closeDeleteNotificationBalloon(entry)\n\t{\n\t\tif (entry && entry instanceof Entry)\n\t\t{\n\t\t\tconst balloon = BX.UI.Notification.Center.getBalloonById('calendar' + entry.getUniqueId());\n\t\t\tif (balloon)\n\t\t\t{\n\t\t\t\tballoon.close();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic openEditSlider(options = {})\n\t{\n\t\tconst bx = Util.getBX();\n\n\t\tif (bx.Calendar && bx.Calendar.SliderLoader)\n\t\t{\n\t\t\tnew bx.Calendar.SliderLoader(\n\t\t\t\toptions.entry ? 'EDIT' + options.entry.id : 'NEW',\n\t\t\t\t{\n\t\t\t\t\tcalendarContext: options.calendarContext || bx.Calendar.Util.getCalendarContext(),\n\t\t\t\t\tentry: options.entry || null,\n\t\t\t\t\ttype: options.type,\n\t\t\t\t\tisLocationCalendar: options.isLocationCalendar || false,\n\t\t\t\t\troomsManager: options.roomsManager || null,\n\t\t\t\t\tlocationAccess: options.locationAccess || false,\n\t\t\t\t\tlocationCapacity: options.locationCapacity || 0,\n\t\t\t\t\townerId: options.ownerId || 0,\n\t\t\t\t\tuserId: options.userId,\n\t\t\t\t\tformDataValue: options.formDataValue || null,\n\t\t\t\t\tjumpToControl: options.jumpToControl,\n\t\t\t\t}\n\t\t\t).show();\n\t\t}\n\t}\n\n\tstatic openViewSlider(eventId = null, options = {})\n\t{\n\t\tif (!Type.isNull(eventId))\n\t\t{\n\t\t\tconst bx = Util.getBX();\n\t\t\tif (bx.Calendar && bx.Calendar.SliderLoader)\n\t\t\t{\n\t\t\t\tnew bx.Calendar.SliderLoader(eventId, {\n\t\t\t\t\tentryDateFrom: options.from,\n\t\t\t\t\ttimezoneOffset: options.timezoneOffset,\n\t\t\t\t\tcalendarContext: options.calendarContext || null,\n\t\t\t\t\tlink: options.link,\n\t\t\t\t}).show();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic deleteEntry(entry, calendarContext = null)\n\t{\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tconst slider = Util.getBX().SidePanel.Instance.getTopSlider();\n\t\t\tconst beforeDeleteHandler = () => {\n\t\t\t\tif (slider && slider.options.type === 'calendar:slider')\n\t\t\t\t{\n\t\t\t\t\tUtil.getBX().SidePanel.Instance.close();\n\t\t\t\t}\n\t\t\t};\n\t\t\tEventEmitter.subscribe('BX.Calendar.Entry:beforeDelete', beforeDeleteHandler);\n\n\t\t\tconst deleteHandler = () => {\n\t\t\t\tconst calendar = Util.getCalendarContext();\n\n\t\t\t\tif (calendar)\n\t\t\t\t{\n\t\t\t\t\tcalendar.reload();\n\t\t\t\t}\n\t\t\t\telse if (calendarContext)\n\t\t\t\t{\n\t\t\t\t\tcalendarContext.reload();\n\t\t\t\t}\n\t\t\t\tEventEmitter.unsubscribe('BX.Calendar.Entry:delete', deleteHandler);\n\t\t\t\tEventEmitter.unsubscribe('BX.Calendar.Entry:beforeDelete', beforeDeleteHandler);\n\t\t\t};\n\n\t\t\tEventEmitter.subscribe('BX.Calendar.Entry:delete', deleteHandler);\n\n\t\t\tentry.delete();\n\t\t}\n\t}\n\n\tstatic setMeetingStatus(entry, status, params = {})\n\t{\n\t\treturn new Promise(resolve => {\n\t\t\tif (!Type.isPlainObject(params))\n\t\t\t{\n\t\t\t\tparams = {};\n\t\t\t}\n\t\t\tparams.recursionMode = params.recursionMode || false;\n\n\t\t\tif (status === 'N' && !params.confirmed)\n\t\t\t{\n\t\t\t\tif (entry.isRecursive() && !entry.isOpenEvent())\n\t\t\t\t{\n\t\t\t\t\tthis.showConfirmStatusDialog(entry, resolve);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tBX.ajax.runAction('calendar.api.calendarajax.setMeetingStatus', {\n\t\t\t\tdata: {\n\t\t\t\t\tentryId: entry.id,\n\t\t\t\t\tentryParentId: entry.parentId,\n\t\t\t\t\tstatus: status,\n\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\tcurrentDateFrom: Util.formatDate(entry.from)\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tBX.Event.EventEmitter.emit(\n\t\t\t\t\t\t'BX.Calendar.Entry:onChangeMeetingStatus',\n\t\t\t\t\t\tnew Event.BaseEvent({\n\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\tentry: entry,\n\t\t\t\t\t\t\t\tstatus: status,\n\t\t\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\t\t\tcurrentDateFrom: entry.from,\n\t\t\t\t\t\t\t\tcounters: response.data.counters\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\n\t\t\t\t\tif (entry instanceof Entry)\n\t\t\t\t\t{\n\t\t\t\t\t\tentry.setCurrentStatus(status);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tentry: entry,\n\t\t\t\t\t\tstatus: status,\n\t\t\t\t\t\trecursionMode: params.recursionMode,\n\t\t\t\t\t\tcurrentDateFrom: entry.from\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\t}\n\n\tstatic showConfirmStatusDialog(entry, resolvePromiseCallback = null)\n\t{\n\t\tif (!this.confirmDeclineDialog)\n\t\t{\n\t\t\tthis.confirmDeclineDialog = this.createConfirmStatusDialog();\n\t\t}\n\n\t\tthis.confirmDeclineDialog.show();\n\t\tthis.confirmDeclineDialog.unsubscribeAll('onDecline');\n\t\tthis.confirmDeclineDialog.subscribe('onDecline', function(event)\n\t\t{\n\t\t\tif (event && Type.isFunction(event.getData))\n\t\t\t{\n\t\t\t\tEntryManager.setMeetingStatus(\n\t\t\t\t\tentry,\n\t\t\t\t\t'N',\n\t\t\t\t\t{recursionMode: event.getData().recursionMode, confirmed: true}\n\t\t\t\t).then(() => {\n\t\t\t\t\tif (Type.isFunction(resolvePromiseCallback))\n\t\t\t\t\t{\n\t\t\t\t\t\tresolvePromiseCallback();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic showConfirmEditDialog(options)\n\t{\n\t\tif (!this.confirmEditDialog)\n\t\t{\n\t\t\tthis.confirmEditDialog = this.createConfirmEditDialog();\n\t\t}\n\n\t\tthis.confirmEditDialog.show(options);\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.confirmEditDialog.unsubscribeAll('onEdit');\n\t\t\tthis.confirmEditDialog.subscribe('onEdit', (event) => {\n\t\t\t\tif (event && Type.isFunction(event.getData))\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showReInviteUsersDialog(options)\n\t{\n\t\tif (!this.reinviteUsersDialog)\n\t\t{\n\t\t\tthis.reinviteUsersDialog = this.createReinviteUserDialog();\n\t\t}\n\t\tthis.reinviteUsersDialog.show();\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.reinviteUsersDialog.unsubscribeAll('onSelect');\n\t\t\tthis.reinviteUsersDialog.subscribe('onSelect', function(event)\n\t\t\t{\n\t\t\t\tif (event && Type.isFunction(event.getData))\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic showConfirmedEmailDialog(options = {})\n\t{\n\t\tif (!this.confirmedEmailDialog)\n\t\t{\n\t\t\tthis.confirmedEmailDialog = this.createConfirmedEmailDialog();\n\t\t}\n\t\tthis.confirmedEmailDialog.show();\n\n\t\tif (Type.isFunction(options.callback))\n\t\t{\n\t\t\tthis.confirmedEmailDialog.unsubscribeAll('onSelect');\n\t\t\tthis.confirmedEmailDialog.subscribe('onSelect', function(event)\n\t\t\t{\n\t\t\t\tif (event && Type.isFunction(event.getData))\n\t\t\t\t{\n\t\t\t\t\toptions.callback(event.getData());\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic getLocationRepeatBusyErrorPopup(options = {})\n\t{\n\t\treturn new MessageBox({\n\t\t\ttitle: Loc.getMessage('EC_LOCATION_REPEAT_BUSY_POPUP_TITLE'),\n\t\t\tmessage: Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-messagebox-text-with-title\">\n\t\t\t\t\t${options.message}\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\tminHeight: 100,\n\t\t\tminWidth: 300,\n\t\t\tmaxWidth: 690,\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.YES_CANCEL,\n\t\t\tonYes: options.onYesCallback,\n\t\t\tonCancel: options.onCancelCallback,\n\t\t\tyesCaption: Loc.getMessage('EC_LOCATION_REPEAT_BUSY_POPUP_SAVE_WITHOUT_ROOM'),\n\t\t\tcancelCaption: Loc.getMessage('EC_LOCATION_REPEAT_BUSY_POPUP_RETURN_TO_EDIT'),\n\t\t\tmediumButtonSize: false,\n\t\t\tpopupOptions: {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: options.onPopupCloseCallback,\n\t\t\t\t},\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic showEmailLimitationDialog(options = {})\n\t{\n\t\tif (!this.limitationEmailDialog)\n\t\t{\n\t\t\tthis.limitationEmailDialog = this.createEmailLimitationDialog();\n\t\t}\n\t\tthis.limitationEmailDialog.subscribe('onSaveWithoutAttendees', () => {\n\t\t\tif (Type.isFunction(options.callback))\n\t\t\t{\n\t\t\t\toptions.callback();\n\t\t\t}\n\t\t});\n\t\tthis.limitationEmailDialog.show();\n\t}\n\n\tstatic getCompactViewForm(create = true)\n\t{\n\t\tif (!EntryManager.compactEntryForm && create)\n\t\t{\n\t\t\tEntryManager.compactEntryForm = new CompactEventForm();\n\t\t}\n\n\t\treturn EntryManager.compactEntryForm;\n\t}\n\n\tstatic openCompactViewForm(options = {})\n\t{\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (!compactForm.isShown())\n\t\t{\n\t\t\tcompactForm.unsubscribeAll('onClose');\n\t\t\tif (Type.isFunction(options.closeCallback))\n\t\t\t{\n\t\t\t\tcompactForm.subscribe('onClose', options.closeCallback);\n\t\t\t}\n\t\t\tcompactForm.showInViewMode(options);\n\t\t}\n\t}\n\n\tstatic openCompactEditForm(options = {})\n\t{\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (!compactForm.isShown())\n\t\t{\n\t\t\tcompactForm.unsubscribeAll('onClose');\n\t\t\tif (Type.isFunction(options.closeCallback))\n\t\t\t{\n\t\t\t\tcompactForm.subscribe('onClose', options.closeCallback);\n\t\t\t}\n\t\t\tcompactForm.showInEditMode(options);\n\t\t}\n\t}\n\n\tstatic getEntryInstance(entry, userIndex, options = {})\n\t{\n\t\tlet entryInstance = null;\n\t\tif (entry instanceof Entry)\n\t\t{\n\t\t\tentryInstance = entry;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (Type.isObject(entry) && Type.isObject(entry.data))\n\t\t\t{\n\t\t\t\tentryInstance = new Entry({data: entry.data, userIndex: userIndex});\n\t\t\t}\n\t\t\telse if (Type.isObject(entry))\n\t\t\t{\n\t\t\t\tentryInstance = new Entry({data: entry, userIndex: userIndex});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tentryInstance = EntryManager.getNewEntry(options);\n\t\t\t}\n\t\t}\n\n\t\treturn entryInstance;\n\t}\n\n\tstatic getUserIndex(options = {})\n\t{\n\t\treturn EntryManager.userIndex\n\t}\n\n\tstatic setUserIndex(userIndex)\n\t{\n\t\tEntryManager.userIndex = userIndex;\n\t}\n\n\thandlePullChanges(params)\n\t{\n\t\tif (['edit_event_location', 'delete_event_location'].includes(params.command))\n\t\t{\n\t\t\ttop.BX.Calendar?.Controls?.Location?.handlePull(params);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (!BX.Calendar.Util.checkRequestId(params.requestUid))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst compactForm = EntryManager.getCompactViewForm();\n\t\tif (\n\t\t\tcompactForm\n\t\t\t&& compactForm.isShown()\n\t\t)\n\t\t{\n\t\t\tcompactForm.handlePull(params);\n\t\t}\n\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tconst data = EntryManager.slidersMap.get(slider);\n\t\t\tif (\n\t\t\t\tdata\n\t\t\t\t&& data.entry\n\t\t\t\t&& data.entry.parentId === parseInt(params?.fields?.PARENT_ID)\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\tparams.command === 'delete_event'\n\t\t\t\t\t&& data.entry.getType() === params?.fields?.CAL_TYPE\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tslider.close();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (params.command === 'set_meeting_status')\n\t\t{\n\t\t\ttop.BX.Event.EventEmitter.emit('BX.Calendar:doReloadCounters');\n\t\t}\n\n\t\tif (params.command === 'delete_event' || params.command === 'edit_event')\n\t\t{\n\t\t\tif (\n\t\t\t\t!params.fields\n\t\t\t\t||\n\t\t\t\t(params?.fields?.IS_MEETING && params?.fields?.MEETING_STATUS === 'Q')\n\t\t\t)\n\t\t\t{\n\t\t\t\ttop.BX.Event.EventEmitter.emit('BX.Calendar:doReloadCounters');\n\t\t\t}\n\t\t}\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tconst entrySectionId = parseInt(params?.fields?.SECTION_ID);\n\t\tlet sectionDisplayed = Type.isArray(params.sections)\n\t\t\t&& params.sections.find(section => {\n\t\t\t\treturn section.id === entrySectionId && section.isShown();\n\t\t\t});\n\n\t\tlet loadedEntry = params?.fields\n\t\t\t? EntryManager.getEntryInstance(\n\t\t\t\tcalendarContext.getView().getEntryById(EntryManager.getEntryUniqueId(params.fields)),\n\t\t\t)\n\t\t\t: null;\n\n\t\tif ((sectionDisplayed || loadedEntry) && calendarContext)\n\t\t{\n\t\t\tcalendarContext.reloadDebounce();\n\t\t}\n\t}\n\n\tstatic registerDeleteTimeout(params)\n\t{\n\t\tEntryManager.delayedActionList.push(params);\n\t}\n\n\tstatic unregisterDeleteTimeout({action, data})\n\t{\n\t\tEntryManager.delayedActionList = EntryManager.delayedActionList.filter((item) => {\n\t\t\treturn item.action !== action\n\t\t\t\t|| item.data.entryId !== data.entryId\n\t\t\t\t|| item.data.recursionMode !== data.recursionMode\n\t\t\t\t|| item.data.excludeDate !== data.excludeDate;\n\t\t});\n\t}\n\n\tstatic doDelayedActions()\n\t{\n\t\tlet requestList = [];\n\t\treturn new Promise(resolve => {\n\t\t\tif(!EntryManager.delayedActionList.length)\n\t\t\t{\n\t\t\t\tresolve();\n\t\t\t}\n\n\t\t\tEntryManager.delayedActionList.forEach(({action, data, params}) => {\n\n\t\t\t\tconst requestUid = parseInt(data.requestUid);\n\t\t\t\trequestList.push(data.requestUid);\n\n\t\t\t\tif (params.entry)\n\t\t\t\t{\n\t\t\t\t\tEntryManager.closeDeleteNotificationBalloon(params.entry);\n\t\t\t\t}\n\n\t\t\t\tBX.ajax.runAction(\n\t\t\t\t\t`calendar.api.calendarajax.${action}`,\n\t\t\t\t\t{data: data}\n\t\t\t\t).then(\n\t\t\t\t\t() => {\n\t\t\t\t\t\tType.isFunction(params.callback)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tparams.callback();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trequestList = requestList.filter(uid => {return uid !== requestUid});\n\t\t\t\t\t\tif (!requestList.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t() => {\n\t\t\t\t\t\trequestList = requestList.filter(uid => {return uid !== requestUid});\n\t\t\t\t\t\tif (!requestList.length)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t\tEntryManager.unregisterDeleteTimeout({action, data, params});\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic getEntryUniqueId(entryData, entry)\n\t{\n\t\tlet sid = entryData.PARENT_ID || entryData.ID;\n\t\tif (entryData.RRULE)\n\t\t{\n\t\t\tsid += '|' + (entry ? Util.formatDate(entry.from) : Util.formatDate(BX.parseDate(entryData.DATE_FROM)));\n\t\t}\n\n\t\tif (entryData['~TYPE'] === 'tasks')\n\t\t{\n\t\t\tsid += '|' + 'task';\n\t\t}\n\t\treturn sid;\n\t}\n\n\tstatic registerEntrySlider(entry, control)\n\t{\n\t\tconst slider = Util.getBX().SidePanel.Instance.getTopSlider();\n\t\tif (slider)\n\t\t{\n\t\t\tEntryManager.slidersMap.set(slider, {entry, control});\n\t\t}\n\t}\n\n\tstatic getNewEntryReminders(type = 'withTime')\n\t{\n\t\tconst userSettings = Util.getUserSettings();\n\t\tif (Type.isObjectLike(userSettings.defaultReminders)\n\t\t\t&& Type.isArray(userSettings.defaultReminders[type])\n\t\t\t&& userSettings.defaultReminders[type].length)\n\t\t{\n\t\t\treturn userSettings.defaultReminders[type];\n\t\t}\n\n\t\treturn type === 'withTime'\n\t\t\t? [{type: 'min', count: 15}]\n\t\t\t: [{type: 'daybefore', before: 0, time: 480}];\n\t}\n\n\tstatic setNewEntryReminders(type = 'withTime', reminders)\n\t{\n\t\tconst userSettings = Util.getUserSettings();\n\t\tif (Type.isObjectLike(userSettings.defaultReminders))\n\t\t{\n\t\t\tuserSettings.defaultReminders[type] = reminders;\n\t\t}\n\t\tUtil.setUserSettings(userSettings);\n\t}\n\n\t// this is because extensions cant be loaded in iframe with import\n\tstatic createConfirmEditDialog()\n\t{\n\t\tconst bx = Util.getBX();\n\n\t\treturn new bx.Calendar.Controls.ConfirmEditDialog();\n\t}\n\n\tstatic createConfirmStatusDialog()\n\t{\n\t\tconst bx = Util.getBX();\n\n\t\treturn new bx.Calendar.Controls.ConfirmStatusDialog();\n\t}\n\n\tstatic createReinviteUserDialog()\n\t{\n\t\tconst bx = Util.getBX();\n\n\t\treturn new bx.Calendar.Controls.ReinviteUserDialog();\n\t}\n\n\tstatic createConfirmedEmailDialog()\n\t{\n\t\tconst bx = Util.getBX();\n\n\t\treturn new bx.Calendar.Controls.ConfirmedEmailDialog();\n\t}\n\n\tstatic createEmailLimitationDialog()\n\t{\n\t\tconst bx = Util.getBX();\n\n\t\treturn new bx.Calendar.Controls.EmailLimitationDialog();\n\t}\n\n\tstatic async downloadIcs(eventId: number): void\n\t{\n\t\tconst { status, data } = await Util.getBX().ajax.runAction('calendar.api.calendarentryajax.getIcsContent', {\n\t\t\tdata: {\n\t\t\t\teventId,\n\t\t\t},\n\t\t});\n\n\t\tif (status !== 'success')\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tUtil.downloadIcsFile(data, 'event');\n\t}\n}\n","import { Util } from 'calendar.util';\nimport { EntryManager } from \"./entrymanager\";\nimport { Type, Loc } from 'main.core';\n\nexport {EntryManager};\n\nexport class Entry\n{\n\tFULL_DAY_LENGTH = 86400;\n\n\tstatic CAL_TYPES = {\n\t\t'user': 'user',\n\t\t'group': 'group',\n\t\t'company': 'company_calendar',\n\t};\n\tconstructor(options = {})\n\t{\n\t\tthis.prepareData(options.data);\n\t\tthis.parts = [];\n\n\t\tif (options.userIndex)\n\t\t{\n\t\t\tthis.setUserIndex(options.userIndex);\n\t\t}\n\n\t\tthis.delayTimeoutMap = new Map();\n\t}\n\n\tprepareData(data)\n\t{\n\t\tthis.data = data;\n\t\tthis.id = parseInt(this.data.ID || 0);\n\t\tthis.parentId = parseInt(this.data.PARENT_ID || 0);\n\n\t\tif (!this.data.DT_SKIP_TIME)\n\t\t{\n\t\t\tthis.data.DT_SKIP_TIME = this.data.SKIP_TIME ? 'Y' : 'N';\n\t\t}\n\t\tif (!Type.isString(this.data.NAME))\n\t\t{\n\t\t\tthis.data.NAME = Loc.getMessage('CALENDAR_DEFAULT_ENTRY_NAME');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.data.NAME = this.data.NAME.replaceAll(/\\r\\n|\\r|\\n/g, ' ');\n\t\t}\n\n\t\tthis.fullDay = this.data.DT_SKIP_TIME === 'Y';\n\t\tthis.accessibility = this.data.ACCESSIBILITY || 'busy';\n\t\tthis.important = this.data.IMPORTANCE === 'high';\n\t\tthis.private = !!this.data.PRIVATE_EVENT;\n\t\tthis.setSectionId(this.data.SECT_ID);\n\t\tthis.name = this.data.NAME;\n\n\t\tthis.userTimezoneOffsetFrom = parseInt(this.data['~USER_OFFSET_FROM']) || 0;\n\t\tthis.userTimezoneOffsetTo = parseInt(this.data['~USER_OFFSET_TO']) || this.userTimezoneOffsetFrom;\n\n\t\tif (!this.data.DT_LENGTH)\n\t\t{\n\t\t\tthis.data.DT_LENGTH = this.data.DURATION || 0;\n\t\t}\n\t\tif (this.fullDay && !this.data.DT_LENGTH)\n\t\t{\n\t\t\tthis.data.DT_LENGTH = this.FULL_DAY_LENGTH;\n\t\t}\n\n\t\tif (\n\t\t\t!Type.isString(this.data.DATE_FROM) && !Type.isString(this.data.DATE_TO)\n\t\t\t&& Type.isDate(this.data.dateFrom) && Type.isDate(this.data.dateTo)\n\t\t)\n\t\t{\n\t\t\tthis.from = this.data.dateFrom;\n\t\t\tthis.to = this.data.dateTo;\n\n\t\t\tthis.data.DT_LENGTH = Math.round((this.to.getTime() - this.from.getTime()) / 1000);\n\t\t\tthis.data.DURATION = this.data.DT_LENGTH;\n\n\t\t\tif (this.fullDay)\n\t\t\t{\n\t\t\t\tthis.data.DATE_FROM = Util.formatDate(this.from.getTime());\n\t\t\t\tthis.data.DATE_TO = Util.formatDate(this.to.getTime());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.from = new Date(this.from.getTime() - (parseInt(this.data['~USER_OFFSET_FROM']) || 0) * 1000);\n\t\t\t\tthis.to = new Date(this.to.getTime() - (parseInt(this.data['~USER_OFFSET_TO']) || 0) * 1000);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (this.isTask())\n\t\t\t{\n\t\t\t\tthis.from = BX.parseDate(this.data.DATE_FROM) || new Date();\n\t\t\t\tthis.to = BX.parseDate(this.data.DATE_TO) || this.from;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.from = BX.parseDate(this.data.DATE_FROM) || new Date();\n\t\t\t\tthis.to = BX.parseDate(this.data.DATE_TO) || this.from;\n\t\t\t}\n\t\t}\n\n\t\tif (this.fullDay)\n\t\t{\n\t\t\tthis.from.setHours(0, 0, 0, 0);\n\t\t\tthis.to.setHours(0, 0, 0, 0);\n\t\t}\n\n\t\tif (!this.data.ATTENDEES_CODES && !this.isTask())\n\t\t{\n\t\t\tif (this.data.CAL_TYPE === 'user' && this.data.OWNER_ID)\n\t\t\t{\n\t\t\t\tthis.data.ATTENDEES_CODES = ['U' + this.data.OWNER_ID];\n\t\t\t}\n\t\t\telse if (this.data.CREATED_BY)\n\t\t\t{\n\t\t\t\tthis.data.ATTENDEES_CODES = ['U' + this.data.CREATED_BY];\n\t\t\t}\n\t\t}\n\n\t\tthis.startDayCode = this.from;\n\t\tthis.endDayCode = this.to;\n\n\t\tif (!Type.isArray(this.data.REMIND) && Type.isArray(this.data.remind))\n\t\t{\n\t\t\tthis.data.REMIND = [];\n\t\t\tthis.data.remind.forEach(function(value)\n\t\t\t{\n\t\t\t\tthis.data.REMIND.push({type: 'min', count: value});\n\t\t\t}, this);\n\t\t\tdelete this.data.remind;\n\t\t}\n\n\t\tif (this.data.permissions)\n\t\t{\n\t\t\tthis.permissions = this.data.permissions;\n\t\t}\n\t}\n\n\tgetAttendeesCodes()\n\t{\n\t\treturn this.data.ATTENDEES_CODES || [];\n\t}\n\n\tgetAttendeesEntityList()\n\t{\n\t\treturn this.data.attendeesEntityList || [];\n\t}\n\n\tgetAttendees()\n\t{\n\t\tif (!this.attendeeList)\n\t\t{\n\t\t\tthis.attendeeList = [];\n\t\t\tif (Type.isArray(this.data['ATTENDEE_LIST']))\n\t\t\t{\n\t\t\t\tconst userIndex = this.getUserIndex();\n\t\t\t\tthis.data['ATTENDEE_LIST'].forEach((user) => {\n\t\t\t\t\tif (userIndex[user.id])\n\t\t\t\t\t{\n\t\t\t\t\t\tlet attendee = BX.clone(userIndex[user.id]);\n\t\t\t\t\t\tattendee.STATUS = user.status;\n\t\t\t\t\t\tattendee.ENTRY_ID = user.entryId || false;\n\t\t\t\t\t\tthis.attendeeList.push(attendee);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn this.attendeeList;\n\t}\n\n\tsetUserIndex(userIndex)\n\t{\n\t\tthis.userIndex = userIndex;\n\t}\n\n\tgetUserIndex()\n\t{\n\t\treturn this.userIndex || EntryManager.getUserIndex();\n\t}\n\n\tcleanParts()\n\t{\n\t\tthis.parts = [];\n\t}\n\n\tstartPart(part)\n\t{\n\t\tpart.partIndex = this.parts.length;\n\t\tthis.parts.push(part);\n\t\treturn this.parts[part.partIndex];\n\t}\n\n\tregisterPartNode(part, params)\n\t{\n\t\tpart.params = params;\n\t}\n\n\tcheckPartIsRegistered(part)\n\t{\n\t\treturn Type.isPlainObject(part.params);\n\t}\n\n\tgetPart(partIndex)\n\t{\n\t\treturn this.parts[partIndex] || false;\n\t}\n\n\tgetWrap(partIndex)\n\t{\n\t\treturn this.parts[partIndex || 0].params.wrapNode;\n\t}\n\n\tgetSectionName()\n\t{\n\t\t//return this.calendar.sectionController.getSection(this.sectionId).name || '';\n\t}\n\n\tgetDescription()\n\t{\n\t\treturn this.data.DESCRIPTION || '';\n\t}\n\n\tapplyViewRange(viewRange)\n\t{\n\t\tlet\n\t\t\tviewRangeStart = viewRange.start.getTime(),\n\t\t\tviewRangeEnd = viewRange.end.getTime(),\n\t\t\tfromTime = this.from.getTime(),\n\t\t\ttoTime = this.to.getTime();\n\n\t\tif (toTime < viewRangeStart || fromTime > viewRangeEnd)\n\t\t\treturn false;\n\n\t\tif (fromTime < viewRangeStart)\n\t\t{\n\t\t\tthis.displayFrom = viewRange.start;\n\t\t\tthis.startDayCode = this.displayFrom;\n\t\t}\n\n\t\tif (toTime > viewRangeEnd)\n\t\t{\n\t\t\tthis.displayTo = viewRange.end;\n\t\t\tthis.endDayCode = this.displayTo;\n\t\t}\n\t\treturn true;\n\t}\n\n\tisPersonal()\n\t{\n\t\t//return (this.data.CAL_TYPE === 'user' && this.data.OWNER_ID == this.calendar.util.userId);\n\t}\n\n\tisMeeting()\n\t{\n\t\treturn !!this.data.IS_MEETING;\n\t}\n\n\tisPrivate()\n\t{\n\t\treturn this.private;\n\t}\n\n\tisResourcebooking()\n\t{\n\t\treturn this.data.EVENT_TYPE === '#resourcebooking#';\n\t}\n\n\tisTask()\n\t{\n\t\treturn this.data['~TYPE'] === 'tasks';\n\t}\n\n\tisSharingEvent()\n\t{\n\t\treturn this.data['EVENT_TYPE'] === '#shared#' || this.data['EVENT_TYPE'] === '#shared_crm#';\n\t}\n\n\tisInvited()\n\t{\n\t\treturn this.getCurrentStatus() === 'Q';\n\t}\n\n\tisLocation()\n\t{\n\t\treturn this.getType() === 'location';\n\t}\n\n\tisFullDay()\n\t{\n\t\treturn this.fullDay;\n\t}\n\n\tisLongWithTime()\n\t{\n\t\treturn !this.fullDay && Util.getDayCode(this.from) !== Util.getDayCode(this.to);\n\t}\n\n\tisExpired()\n\t{\n\t\treturn this.to.getTime() < new Date().getTime();\n\t}\n\n\thasEmailAttendees()\n\t{\n\t\tif (this.emailAttendeesCache === undefined)\n\t\t{\n\t\t\tconst userIndex = EntryManager.getUserIndex();\n\t\t\tfor (let i = 0; i < this.data['ATTENDEE_LIST'].length; i++)\n\t\t\t{\n\t\t\t\tlet user = this.data['ATTENDEE_LIST'][i];\n\t\t\t\tif ((user.status === 'Y' || user.status === 'Q')\n\t\t\t\t\t&& userIndex[user.id]\n\t\t\t\t\t&& userIndex[user.id].EMAIL_USER\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tthis.emailAttendeesCache = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn this.emailAttendeesCache;\n\t}\n\n\townerIsEmailUser()\n\t{\n\t\tif (this.ownerIsEmailUserCache === undefined)\n\t\t{\n\t\t\tconst userIndex = EntryManager.getUserIndex();\n\t\t\tthis.ownerIsEmailUserCache = userIndex[parseInt(this.data.MEETING_HOST)]\n\t\t\t\t&& userIndex[parseInt(this.data.MEETING_HOST)].EMAIL_USER;\n\t\t}\n\t\treturn this.ownerIsEmailUserCache;\n\t}\n\n\tisSelected()\n\t{\n\t\treturn !!this.selected;\n\t}\n\n\tisCrm()\n\t{\n\t\treturn !!this.data.UF_CRM_CAL_EVENT;\n\t}\n\n\tisFirstReccurentEntry()\n\t{\n\t\treturn (this.data.DATE_FROM_TS_UTC === Math.floor(BX.parseDate(this.data['~DATE_FROM']).getTime() / 1000) * 1000\n\t\t\t||\n\t\t\tBX.parseDate(this.data['DATE_FROM']).getTime() === BX.parseDate(this.data['~DATE_FROM']).getTime()\n\t\t) && !this.data.RECURRENCE_ID;\n\t}\n\n\tisRecursive()\n\t{\n\t\treturn !!this.data.RRULE;\n\t}\n\n\tisFirstInstance()\n\t{\n\t\treturn this.data.RRULE && this.data.RINDEX === 0;\n\t}\n\n\tgetMeetingHost()\n\t{\n\t\treturn parseInt(this.data.MEETING_HOST);\n\t}\n\n\tgetMeetingNotify()\n\t{\n\t\treturn this.data.MEETING.NOTIFY;\n\t}\n\n\tgetHideGuests()\n\t{\n\t\treturn this.data.MEETING && BX.Type.isBoolean(this.data.MEETING.HIDE_GUESTS)\n\t\t\t? this.data.MEETING.HIDE_GUESTS\n\t\t\t: true;\n\t}\n\n\tgetRrule()\n\t{\n\t\treturn this.data.RRULE;\n\t}\n\n\tgetRRuleDescription()\n\t{\n\t\treturn this.data['~RRULE_DESCRIPTION'];\n\t}\n\n\thasRecurrenceId()\n\t{\n\t\treturn this.data.RECURRENCE_ID;\n\t}\n\n\twasEverRecursive()\n\t{\n\t\treturn this.data.RRULE || this.data.RECURRENCE_ID;\n\t}\n\n\tdeselect()\n\t{\n\t\tthis.selected = false;\n\t}\n\n\tselect()\n\t{\n\t\tthis.selected = true;\n\t}\n\n\tdeleteParts(recursionMode)\n\t{\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst wrap = calendarContext.getView().getContainer();\n\n\t\t\tif (recursionMode === 'all')\n\t\t\t{\n\t\t\t\tcalendarContext.getView().entries.forEach((entry) => {\n\t\t\t\t\tconst entryRecurrenceId = parseInt(entry.data.RECURRENCE_ID);\n\n\t\t\t\t\tif (parseInt(entry.id) === this.id\n\t\t\t\t\t\t|| (entryRecurrenceId > 0 && entryRecurrenceId === this.id)\n\t\t\t\t\t\t|| (entryRecurrenceId > 0 && entryRecurrenceId === parseInt(this.data.RECURRENCE_ID))\n\t\t\t\t\t\t|| (entryRecurrenceId > 0 && parseInt(entry.id) === parseInt(this.data.RECURRENCE_ID))\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst entryPart = wrap.querySelector('div[data-bx-calendar-entry=\"' + entry.uid + '\"]');\n\t\t\t\t\t\tif (entryPart)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentryPart.style.opacity = 0;\n\t\t\t\t\t\t\tsetTimeout(()=>{entryPart.style.display = 'none';}, 200);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (recursionMode === 'next')\n\t\t\t{\n\t\t\t\tcalendarContext.getView().entries.forEach((entry) => {\n\t\t\t\t\tif ((parseInt(entry.id) === this.id\n\t\t\t\t\t\t|| parseInt(entry.data.RECURRENCE_ID) === this.id\n\t\t\t\t\t\t|| parseInt(entry.data.RECURRENCE_ID) === parseInt(this.data.RECURRENCE_ID)\n\t\t\t\t\t\t|| parseInt(entry.id) === parseInt(this.data.RECURRENCE_ID))\n\t\t\t\t\t\t&& entry.from.getTime() > this.from.getTime()\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tconst entryPart = wrap.querySelector('div[data-bx-calendar-entry=\"' + entry.uid + '\"]');\n\t\t\t\t\t\tif (entryPart)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentryPart.style.opacity = 0;\n\t\t\t\t\t\t\tsetTimeout(()=>{entryPart.style.display = 'none';}, 200);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (recursionMode === 'this' || !recursionMode)\n\t\t\t{\n\t\t\t\tconst parts = wrap.querySelectorAll('div[data-bx-calendar-entry=\"' + this.getUniqueId() + '\"]');\n\t\t\t\tparts.forEach((entryPart)=>{\n\t\t\t\t\tentryPart.style.opacity = 0;\n\t\t\t\t\tsetTimeout(()=>{entryPart.style.display = 'none';}, 200);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetUniqueId()\n\t{\n\t\treturn EntryManager.getEntryUniqueId(this.data, this);\n\t}\n\n\tgetCurrentStatus()\n\t{\n\t\tlet\n\t\t\tuserId = Util.getCurrentUserId(),\n\t\t\tstatus = false,\n\t\t\ti, user;\n\n\t\tif (this.isMeeting())\n\t\t{\n\t\t\tif (userId === parseInt(this.data.CREATED_BY))\n\t\t\t{\n\t\t\t\tstatus = this.data.MEETING_STATUS || 'Q';\n\t\t\t}\n\t\t\telse if (userId === parseInt(this.data.MEETING_HOST))\n\t\t\t{\n\t\t\t\tstatus = 'H';\n\t\t\t\t//status = this.data.MEETING_STATUS || 'H';\n\t\t\t}\n\t\t\telse if (Type.isArray(this.data['ATTENDEE_LIST']))\n\t\t\t{\n\t\t\t\tfor (i = 0; i < this.data['ATTENDEE_LIST'].length; i++)\n\t\t\t\t{\n\t\t\t\t\tuser = this.data['ATTENDEE_LIST'][i];\n\t\t\t\t\tif (parseInt(user.id) === userId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstatus = user.status;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse if (userId === parseInt(this.data.CREATED_BY))\n\t\t{\n\t\t\tstatus = this.data.MEETING_STATUS || 'H';\n\t\t}\n\n\t\treturn Util.getMeetingStatusList().includes(status) ? status : false;\n\t}\n\n\tsetCurrentStatus(status)\n\t{\n\t\tif (this.isMeeting() && Util.getMeetingStatusList().includes(status))\n\t\t{\n\t\t\tthis.data.MEETING_STATUS = status;\n\n\t\t\tconst userId = Util.getCurrentUserId();\n\t\t\tif (Type.isArray(this.data['ATTENDEE_LIST']))\n\t\t\t{\n\t\t\t\tfor (let i = 0; i < this.data['ATTENDEE_LIST'].length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (parseInt(this.data['ATTENDEE_LIST'][i].id) === userId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.data['ATTENDEE_LIST'][i].status = status;\n\t\t\t\t\t\tthis.attendeeList = null;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetReminders()\n\t{\n\t\tlet res = [];\n\t\tif (this.data && this.data.REMIND)\n\t\t{\n\t\t\tthis.data.REMIND.forEach(function (remind)\n\t\t\t{\n\t\t\t\tswitch(remind.type)\n\t\t\t\t{\n\t\t\t\t\tcase 'min':\n\t\t\t\t\t\tres.push(remind.count);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'hour':\n\t\t\t\t\t\tres.push(parseInt(remind.count) * 60);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'day':\n\t\t\t\t\t\tres.push(parseInt(remind.count) * 60 * 24);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'daybefore':\n\t\t\t\t\t\tres.push(remind);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'date':\n\t\t\t\t\t\tif (!Type.isDate(remind.value))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tremind.value = Util.parseDate(remind.value);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isDate(remind.value))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tres.push(remind);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\treturn res;\n\t}\n\n\tgetLengthInDays()\n\t{\n\t\tlet\n\t\t\tfrom = new Date(this.from.getFullYear(), this.from.getMonth(), this.from.getDate(), 0, 0, 0),\n\t\t\tto = new Date(this.to.getFullYear(), this.to.getMonth(), this.to.getDate(), 0, 0, 0);\n\n\t\treturn Math.round((to.getTime() - from.getTime()) / Util.getDayLength()) + 1;\n\t}\n\n\tgetName(): string\n\t{\n\t\treturn (this.name || '');\n\t}\n\n\tgetColor()\n\t{\n\t\treturn this.data.COLOR;\n\t}\n\n\tgetType()\n\t{\n\t\treturn this.data.CAL_TYPE;\n\t}\n\n\tgetOwnerId()\n\t{\n\t\treturn this.data.OWNER_ID;\n\t}\n\n\tdelete(params)\n\t{\n\t\tparams = Type.isPlainObject(params) ? params : {};\n\t\tlet recursionMode = params.recursionMode || false;\n\n\t\tif (this.wasEverRecursive() && !params.confirmed)\n\t\t{\n\t\t\treturn this.showConfirmDeleteDialog({entry: this});\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// Broadcast event\n\t\t\tBX.onCustomEvent('BX.Calendar.Entry:beforeDelete', [{entryId: this.id, recursionMode: recursionMode, entryData: this.data}]);\n\n\t\t\tEntryManager.showDeleteEntryNotification(this);\n\t\t\tthis.deleteParts(recursionMode);\n\n\t\t\tconst action = 'deleteCalendarEntry';\n\t\t\tconst data = {\n\t\t\t\tentryId: this.parentId,\n\t\t\t\trecursionMode: params.recursionMode || false,\n\t\t\t\trequestUid: Util.registerRequestId(),\n\t\t\t};\n\n\t\t\tEntryManager.registerDeleteTimeout({\n\t\t\t\taction,\n\t\t\t\tdata,\n\t\t\t\tparams: {\n\t\t\t\t\tentry: this,\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:delete', [{entryId: this.id, recursionMode: recursionMode}]);\n\t\t\t\t\t}\n\t\t\t\t}});\n\n\t\t\tthis.deleteTimeout = setTimeout(EntryManager.doDelayedActions, EntryManager.DELETE_DELAY_TIMEOUT);\n\t\t\tthis.delayTimeoutMap.set(this.deleteTimeout, {action, data});\n\t\t}\n\t}\n\n\tdeleteThis()\n\t{\n\t\tlet recursionMode = 'this';\n\t\tif (this.isRecursive())\n\t\t{\n\t\t\tBX.onCustomEvent('BX.Calendar.Entry:beforeDelete', [{entryId: this.id, recursionMode: recursionMode, entryData: this.data}]);\n\n\t\t\tEntryManager.showDeleteEntryNotification(this);\n\t\t\tthis.deleteParts(recursionMode);\n\n\t\t\tconst action = 'excludeRecursionDate';\n\t\t\tconst data = {\n\t\t\t\tentryId: this.parentId,\n\t\t\t\trecursionMode: recursionMode,\n\t\t\t\texcludeDate: this.data.DATE_FROM,\n\t\t\t};\n\n\t\t\tEntryManager.registerDeleteTimeout({\n\t\t\t\taction,\n\t\t\t\tdata,\n\t\t\t\tparams: {\n\t\t\t\t\tentry: this,\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:delete', [data]);\n\t\t\t\t\t}\n\t\t\t\t}});\n\n\t\t\tthis.deleteTimeout = setTimeout(EntryManager.doDelayedActions, EntryManager.DELETE_DELAY_TIMEOUT);\n\t\t\tthis.delayTimeoutMap.set(this.deleteTimeout, {action, data});\n\t\t}\n\t\telse if (this.hasRecurrenceId())\n\t\t{\n\t\t\tthis.delete({confirmed: true, recursionMode: 'this'});\n\t\t}\n\t}\n\n\tdeleteNext()\n\t{\n\t\tlet recursionMode = 'next';\n\t\tif (this.isRecursive() && this.isFirstReccurentEntry())\n\t\t{\n\t\t\tthis.deleteAll();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.onCustomEvent('BX.Calendar.Entry:beforeDelete', [{entryId: this.id, recursionMode: recursionMode}]);\n\n\t\t\tEntryManager.showDeleteEntryNotification(this);\n\t\t\tthis.deleteParts(recursionMode);\n\n\t\t\tconst action = 'changeRecurciveEntryUntil';\n\t\t\tconst data = {\n\t\t\t\tentryId: this.parentId,\n\t\t\t\trecursionMode: recursionMode,\n\t\t\t\tuntilDate: Util.formatDate(this.from.getTime() - Util.getDayLength()),\n\t\t\t};\n\t\t\tEntryManager.registerDeleteTimeout({\n\t\t\t\taction,\n\t\t\t\tdata,\n\t\t\t\tparams: {\n\t\t\t\t\tentry: this,\n\t\t\t\t\tcallback: () => {\n\t\t\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:delete', [data]);\n\t\t\t\t\t}\n\t\t\t\t}});\n\n\t\t\tthis.deleteTimeout = setTimeout(EntryManager.doDelayedActions, EntryManager.DELETE_DELAY_TIMEOUT);\n\t\t\tthis.delayTimeoutMap.set(this.deleteTimeout, {action, data});\n\t\t}\n\t}\n\n\tdeleteAll()\n\t{\n\t\treturn this.delete({confirmed: true, recursionMode: 'all'});\n\t}\n\n\tcancelDelete()\n\t{\n\t\tif (this.deleteTimeout)\n\t\t{\n\t\t\tconst deleteTimeoutData = this.delayTimeoutMap.get(this.deleteTimeout);\n\t\t\tif (deleteTimeoutData)\n\t\t\t{\n\t\t\t\tEntryManager.unregisterDeleteTimeout(deleteTimeoutData);\n\t\t\t\tBX.onCustomEvent('BX.Calendar.Entry:cancelDelete', [{entryId: this.id, entryData: this.data}]);\n\t\t\t\tthis.delayTimeoutMap.delete(this.delayTimeoutMap);\n\t\t\t}\n\t\t\tclearTimeout(this.deleteTimeout);\n\t\t\tthis.deleteTimeout = null;\n\t\t}\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext.reload();\n\t\t}\n\t}\n\n\tshowConfirmDeleteDialog(params)\n\t{\n\t\tif (!this.confirmDeleteDialog)\n\t\t{\n\t\t\tthis.confirmDeleteDialog = new (window.BX || window.top.BX).Calendar.Controls\n\t\t\t\t.ConfirmDeleteDialog({entry: params.entry});\n\t\t}\n\t\tthis.confirmDeleteDialog.show();\n\t}\n\n\tsave()\n\t{\n\t}\n\n\tgetLocation()\n\t{\n\t\treturn this.data.LOCATION;\n\t}\n\n\tsetTimezone(timezoneFrom, timezoneTo = null)\n\t{\n\t\tif(Type.isString(timezoneFrom))\n\t\t{\n\t\t\tthis.data.TZ_FROM = timezoneFrom;\n\t\t\tif (Type.isNull(timezoneTo))\n\t\t\t{\n\t\t\t\tthis.data.TZ_TO = timezoneFrom;\n\t\t\t}\n\t\t}\n\t\tif(Type.isString(timezoneTo))\n\t\t{\n\t\t\tthis.data.TZ_TO = timezoneTo;\n\t\t}\n\t}\n\n\tgetTimezoneFrom()\n\t{\n\t\treturn this.data.TZ_FROM || '';\n\t}\n\n\tgetTimezoneTo()\n\t{\n\t\treturn this.data.TZ_TO || '';\n\t}\n\n\tsetSectionId(value)\n\t{\n\t\tthis.data.SECT_ID = this.sectionId = this.isTask() ? 'tasks' : parseInt(value);\n\t}\n\n\tsetDateTimeValue({from, to})\n\t{\n\t\tif (Type.isDate(from) && Type.isDate(to))\n\t\t{\n\t\t\tthis.from = this.data.dateFrom = from;\n\t\t\tthis.to = this.data.dateTo = to;\n\n\t\t\tthis.data.DT_LENGTH = Math.round((this.to.getTime() - this.from.getTime()) / 1000);\n\t\t\tthis.data.DURATION = this.data.DT_LENGTH;\n\n\t\t\tif (this.fullDay)\n\t\t\t{\n\t\t\t\tthis.data.DATE_FROM = Util.formatDate(this.from.getTime());\n\t\t\t\tthis.data.DATE_TO = Util.formatDate(this.to.getTime());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.data.DATE_FROM = Util.formatDateTime(this.from.getTime());\n\t\t\t\tthis.data.DATE_TO = Util.formatDateTime(this.to.getTime());\n\t\t\t}\n\t\t}\n\t}\n\n\tisOpenEvent(): boolean\n\t{\n\t\treturn this.getType() === 'open_event';\n\t}\n}\n"],"names":["EntryManager","getNewEntry","options","newEntryData","dateTime","getNewEntryTime","Date","userSettings","Util","getUserSettings","userId","getCurrentUserId","ID","NAME","getNewEntryName","dateFrom","from","dateTo","to","type","SECT_ID","RoomsManager","getNewEntrySectionId","parseInt","ownerId","SectionManager","REMIND","getNewEntryReminders","attendeesEntityList","entityId","id","ATTENDEE_LIST","status","push","TZ_FROM","timezoneName","timezoneDefaultName","TZ_TO","Entry","data","date","duration","getUsableDateTime","calendarContext","getCalendarContext","displayedViewRange","getDisplayedViewRange","Type","isDate","start","getTime","end","startDate","workTime","util","getWorkTime","setHours","newEntryName","setNewEntryName","showEditEntryNotification","entryId","showNotification","Loc","getMessage","title","events","click","event","balloon","action","openViewSlider","close","showNewEntryNotification","showDeleteEntryNotification","entry","BX","UI","Notification","Center","notify","getUniqueId","content","actions","cancelDelete","showReleaseLocationNotification","closeDeleteNotificationBalloon","getBalloonById","openEditSlider","bx","getBX","Calendar","SliderLoader","isLocationCalendar","roomsManager","locationAccess","locationCapacity","formDataValue","jumpToControl","show","eventId","isNull","entryDateFrom","timezoneOffset","link","deleteEntry","slider","SidePanel","Instance","getTopSlider","beforeDeleteHandler","EventEmitter","subscribe","deleteHandler","calendar","reload","unsubscribe","delete","setMeetingStatus","params","Promise","resolve","isPlainObject","recursionMode","confirmed","isRecursive","isOpenEvent","showConfirmStatusDialog","ajax","runAction","entryParentId","parentId","currentDateFrom","formatDate","then","response","Event","emit","BaseEvent","counters","setCurrentStatus","resolvePromiseCallback","confirmDeclineDialog","createConfirmStatusDialog","unsubscribeAll","isFunction","getData","showConfirmEditDialog","confirmEditDialog","createConfirmEditDialog","callback","showReInviteUsersDialog","reinviteUsersDialog","createReinviteUserDialog","showConfirmedEmailDialog","confirmedEmailDialog","createConfirmedEmailDialog","getLocationRepeatBusyErrorPopup","MessageBox","message","Tag","render","minHeight","minWidth","maxWidth","buttons","Dialogs","MessageBoxButtons","YES_CANCEL","onYes","onYesCallback","onCancel","onCancelCallback","yesCaption","cancelCaption","mediumButtonSize","popupOptions","onPopupClose","onPopupCloseCallback","closeByEsc","padding","contentPadding","animation","showEmailLimitationDialog","limitationEmailDialog","createEmailLimitationDialog","getCompactViewForm","create","compactEntryForm","CompactEventForm","openCompactViewForm","compactForm","isShown","closeCallback","showInViewMode","openCompactEditForm","showInEditMode","getEntryInstance","userIndex","entryInstance","isObject","getUserIndex","setUserIndex","handlePullChanges","includes","command","top","Controls","Location","handlePull","checkRequestId","requestUid","getOpenSliders","forEach","slidersMap","get","fields","PARENT_ID","getType","CAL_TYPE","IS_MEETING","MEETING_STATUS","entrySectionId","SECTION_ID","sectionDisplayed","isArray","sections","find","section","loadedEntry","getView","getEntryById","getEntryUniqueId","reloadDebounce","registerDeleteTimeout","delayedActionList","unregisterDeleteTimeout","filter","item","excludeDate","doDelayedActions","requestList","length","uid","entryData","sid","RRULE","parseDate","DATE_FROM","registerEntrySlider","control","set","isObjectLike","defaultReminders","count","before","time","setNewEntryReminders","reminders","setUserSettings","ConfirmEditDialog","ConfirmStatusDialog","ReinviteUserDialog","ConfirmedEmailDialog","EmailLimitationDialog","downloadIcs","downloadIcsFile","DELETE_DELAY_TIMEOUT","WeakMap","constructor","FULL_DAY_LENGTH","prepareData","parts","delayTimeoutMap","Map","DT_SKIP_TIME","SKIP_TIME","isString","replaceAll","fullDay","accessibility","ACCESSIBILITY","important","IMPORTANCE","private","PRIVATE_EVENT","setSectionId","name","userTimezoneOffsetFrom","userTimezoneOffsetTo","DT_LENGTH","DURATION","DATE_TO","Math","round","isTask","ATTENDEES_CODES","OWNER_ID","CREATED_BY","startDayCode","endDayCode","remind","value","permissions","getAttendeesCodes","getAttendeesEntityList","getAttendees","attendeeList","user","attendee","clone","STATUS","ENTRY_ID","cleanParts","startPart","part","partIndex","registerPartNode","checkPartIsRegistered","getPart","getWrap","wrapNode","getSectionName","getDescription","DESCRIPTION","applyViewRange","viewRange","viewRangeStart","viewRangeEnd","fromTime","toTime","displayFrom","displayTo","isPersonal","isMeeting","isPrivate","isResourcebooking","EVENT_TYPE","isSharingEvent","isInvited","getCurrentStatus","isLocation","isFullDay","isLongWithTime","getDayCode","isExpired","hasEmailAttendees","emailAttendeesCache","undefined","i","EMAIL_USER","ownerIsEmailUser","ownerIsEmailUserCache","MEETING_HOST","isSelected","selected","isCrm","UF_CRM_CAL_EVENT","isFirstReccurentEntry","DATE_FROM_TS_UTC","floor","RECURRENCE_ID","isFirstInstance","RINDEX","getMeetingHost","getMeetingNotify","MEETING","NOTIFY","getHideGuests","isBoolean","HIDE_GUESTS","getRrule","getRRuleDescription","hasRecurrenceId","wasEverRecursive","deselect","select","deleteParts","wrap","getContainer","entries","entryRecurrenceId","entryPart","querySelector","style","opacity","setTimeout","display","querySelectorAll","getMeetingStatusList","getReminders","res","getLengthInDays","getFullYear","getMonth","getDate","getDayLength","getName","getColor","COLOR","getOwnerId","showConfirmDeleteDialog","onCustomEvent","registerRequestId","deleteTimeout","deleteThis","deleteNext","deleteAll","untilDate","deleteTimeoutData","clearTimeout","confirmDeleteDialog","window","ConfirmDeleteDialog","save","getLocation","LOCATION","setTimezone","timezoneFrom","timezoneTo","getTimezoneFrom","getTimezoneTo","sectionId","setDateTimeValue","formatDateTime","CAL_TYPES"],"mappings":"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"}