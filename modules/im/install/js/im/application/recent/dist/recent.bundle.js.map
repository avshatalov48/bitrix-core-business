{"version":3,"file":"recent.bundle.js","sources":["../src/recent.js"],"sourcesContent":["/**\n * Bitrix Im\n * Core application\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\nimport {Core} from \"im.application.core\";\nimport {VueVendorV2} from \"ui.vue\";\n\n// vue components\nimport 'im.component.recent';\n\nexport class RecentApplication\n{\n\t/* region 01. Initialize */\n\n\tconstructor(params = {})\n\t{\n\t\tthis.inited = false;\n\t\tthis.initPromise = new BX.Promise;\n\n\t\tthis.params = params;\n\n\t\tthis.template = null;\n\t\tthis.rootNode = this.params.node || document.createElement('div');\n\n\t\tthis.isMessenger = params.hasDialog === true;\n\n\t\tthis.templateTemp = null;\n\t\tthis.rootNodeTemp = this.params.nodeTemp || document.createElement('div');\n\n\t\tthis.eventBus = new VueVendorV2;\n\n\t\tthis.initCore()\n\t\t\t.then(result => this.initParams(result))\n\t\t\t.then(() => this.initComponent())\n\t\t\t.then(() => this.initComplete())\n\t\t;\n\t}\n\n\tinitCore()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tCore.ready().then(controller => {\n\t\t\t\tthis.controller = controller;\n\t\t\t\tresolve();\n\t\t\t})\n\t\t});\n\t}\n\n\tinitParams(controller)\n\t{\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\tinitComponent()\n\t{\n\t\treturn this.controller.createVue(this, {\n\t\t\tel: this.rootNode,\n\t\t\ttemplate: `<bx-im-component-recent :hasDialog=\"${this.isMessenger}\"/>`,\n\t\t})\n\t\t.then(vue => {\n\t\t\tthis.template = vue;\n\t\t\treturn new Promise((resolve, reject) => resolve());\n\t\t})\n\t}\n\n\tinitComplete()\n\t{\n\t\tthis.inited = true;\n\t\tthis.initPromise.resolve(this);\n\t}\n\n\tready()\n\t{\n\t\tif (this.inited)\n\t\t{\n\t\t\tlet promise = new BX.Promise;\n\t\t\tpromise.resolve(this);\n\n\t\t\treturn promise;\n\t\t}\n\n\t\treturn this.initPromise;\n\t}\n\n\t/* endregion 01. Initialize */\n\n\t/* region 02. Event Bus */\n\temit(eventName, params = {})\n\t{\n\t\tthis.eventBus.$emit(eventName, params);\n\n\t\treturn true;\n\t}\n\n\tlisten(eventName, callback)\n\t{\n\t\tif (typeof callback !== 'function')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.eventBus.$on(eventName, callback);\n\n\t\treturn true;\n\t}\n\t/* endregion 02. Event Bus */\n}"],"names":["RecentApplication","params","inited","initPromise","BX","Promise","template","rootNode","node","document","createElement","isMessenger","hasDialog","templateTemp","rootNodeTemp","nodeTemp","eventBus","VueVendorV2","initCore","then","result","initParams","initComponent","initComplete","resolve","reject","Core","ready","controller","createVue","el","vue","promise","eventName","$emit","callback","$on"],"mappings":"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"}