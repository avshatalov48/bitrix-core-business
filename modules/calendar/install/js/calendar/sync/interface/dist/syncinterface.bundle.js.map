{"version":3,"file":"syncinterface.bundle.js","sources":["../src/controls/statusblock.js","../src/auxiliarysyncpanel.js","../src/syncpanelunit.js","../src/syncpanel.js","../src/gridunit.js","../src/controls/connectioncontrols.js","../src/controls/mobilesyncbanner.js","../src/itemstemplate/interfacetemplate.js","../src/itemstemplate/caldavinterfacetemplate.js","../src/itemstemplate/caldavtemplate.js","../src/itemstemplate/exchangetemplate.js","../src/syncwizard/syncwizard.js","../src/syncwizard/syncstageunit.js","../src/syncwizard/googlesyncwizard.js","../src/itemstemplate/googletemplate.js","../src/controls/icloudauthdialog.js","../src/syncwizard/icloudsyncwizard.js","../src/controls/warnsynciclouddialog.js","../src/itemstemplate/icloudtemplate.js","../src/syncwizard/office365syncwizard.js","../src/itemstemplate/office365template.js","../src/itemstemplate/mactemplate.js","../src/itemstemplate/outlooktemplate.js","../src/itemstemplate/yandextemplate.js","../src/itemstemplate/mobileinterfacetemplate.js","../src/itemstemplate/androidtemplate.js","../src/itemstemplate/iphonetemplate.js","../src/controls/icalsyncpopup.js","../src/controls/aftersynctour.js"],"sourcesContent":["// @flow\n'use strict';\n\nimport {Loc, Tag} from \"main.core\";\nimport {SyncStatusPopup} from \"calendar.sync.manager\";\n\nexport default class StatusBlock\n{\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connections = options.connections;\n\t\tthis.withStatusLabel = options.withStatusLabel;\n\t\tthis.popupWithUpdateButton = options.popupWithUpdateButton;\n\t\tthis.popupId = options.popupId;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tsetStatus(status)\n\t{\n\t\tthis.status = status;\n\n\t\treturn this;\n\t}\n\n\tsetConnections(connections)\n\t{\n\t\tthis.connections = connections;\n\n\t\treturn this;\n\t}\n\n\tgetContent()\n\t{\n\t\tlet statusInfoBlock;\n\t\tif (this.status === 'success')\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-success calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_SUCCESS')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse if (this.status === 'failed')\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-danger calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_ALERT')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tstatusInfoBlock = Tag.render `\n\t\t\t\t<div id=\"status-info-block\" class=\"ui-alert ui-alert-primary calendar-sync-status-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage('SYNC_STATUS_NOT_CONNECTED')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\tstatusInfoBlock.addEventListener('mouseenter', () => {\n\t\t\tthis.handlerMouseEnter(statusInfoBlock);\n\t\t});\n\n\t\tstatusInfoBlock.addEventListener('mouseleave', () => {\n\t\t\tthis.handlerMouseLeave();\n\t\t});\n\n\t\tthis.statusBlock = Tag.render `\n\t\t\t<div class=\"calendar-sync-status-block\" id=\"calendar-sync-status-block\">\n\t\t\t\t${this.getStatusTextLabel()}\n\t\t\t\t${statusInfoBlock}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.statusBlock;\n\t}\n\n\tgetStatusTextLabel()\n\t{\n\t\treturn this.withStatusLabel\n\t\t\t? Tag.render`\n\t\t\t\t<div class=\"calendar-sync-status-subtitle\">\n\t\t\t\t\t<span data-hint=\"\"></span>\n\t\t\t\t\t<span class=\"calendar-sync-status-text\">${Loc.getMessage('LABEL_STATUS_INFO')}:</span>\n\t\t\t\t</div>`\n\t\t\t: ''\n\t\t;\n\t}\n\n\thandlerMouseEnter(statusBlock)\n\t{\n\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\tthis.buttonEnterTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.statusBlockEnterTimeout = null;\n\t\t\t\tthis.showPopup(statusBlock);\n\t\t\t}, 500\n\t\t);\n\t}\n\n\thandlerMouseLeave()\n\t{\n\t\tif (this.statusBlockEnterTimeout !== null)\n\t\t{\n\t\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\t\tthis.statusBlockEnterTimeout = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.statusBlockLeaveTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.hidePopup();\n\t\t\t}, 500\n\t\t);\n\t}\n\n\tshowPopup(node)\n\t{\n\t\tif(this.status !== 'not_connected')\n\t\t{\n\t\t\tthis.popup = this.getPopup(node);\n\t\t\tthis.popup.show();\n\n\t\t\tthis.addPopupHandlers();\n\t\t}\n\t}\n\n\thidePopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.hide();\n\t\t}\n\t}\n\n\taddPopupHandlers()\n\t{\n\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseenter', () =>\n\t\t{\n\t\t\tclearTimeout(this.statusBlockEnterTimeout);\n\t\t\tclearTimeout(this.statusBlockLeaveTimeout);\n\t\t});\n\n\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseleave', () =>\n\t\t{\n\t\t\tthis.hidePopup();\n\t\t});\n\t}\n\n\tgetPopup(node)\n\t{\n\t\treturn SyncStatusPopup.createInstance({\n\t\t\tconnections: this.connections,\n\t\t\twithUpdateButton: this.popupWithUpdateButton,\n\t\t\tnode: node,\n\t\t\tid: this.popupId,\n\t\t});\n\t}\n\n\trefresh(status, connections)\n\t{\n\t\tthis.status = status;\n\t\tthis.connections = connections;\n\n\t\treturn this;\n\t}\n}","// @flow\n'use strict';\n\nimport {Dom, Loc, Tag, Cache} from \"main.core\";\nimport StatusBlock from \"./controls/statusblock\";\nimport {ConnectionItem} from \"calendar.sync.manager\";\n\nexport default class AuxiliarySyncPanel\n{\n\tMAIN_SYNC_SLIDER_NAME = 'calendar:auxiliary-sync-slider';\n\tSLIDER_WIDTH = 684;\n\tLOADER_NAME = \"calendar:loader\";\n\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connectionsProviders = options.connectionsProviders;\n\t\tthis.userId = options.userId;\n\n\t\tthis.statusBlockEnterTimeout = null;\n\t\tthis.statusBlockLeaveTimeout = null;\n\t}\n\n\topenSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(this.MAIN_SYNC_SLIDER_NAME, {\n\t\t\tcontentCallback: (slider) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(this.getContent());\n\t\t\t\t});\n\t\t\t},\n\t\t\tallowChangeHistory:false,\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.setGridContent();\n\t\t\t\t},\n\t\t\t\t// onMessage: (event) => {\n\t\t\t\t// \tif (event.getEventId() === 'refreshSliderGrid')\n\t\t\t\t// \t{\n\t\t\t\t// \t\tthis.refreshData();\n\t\t\t\t// \t}\n\t\t\t\t// },\n\t\t\t\t// onClose: (event) => {\n\t\t\t\t// \tBX.SidePanel.Instance.postMessageTop(window.top.BX.SidePanel.Instance.getTopSlider(), \"refreshCalendarGrid\", {});\n\t\t\t\t// },\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tloader: this.LOADER_NAME,\n\t\t});\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap\">\n\t\t\t\t${this.getHeader()}\n\t\t\t\t${this.getMobileHeader()}\n\t\t\t\t${this.getMobileContentWrapper()}\n\t\t\t\t${this.getWebHeader()}\n\t\t\t\t${this.getWebContentWrapper()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHeader()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t${this.getMainHeader()}\n\t\t\t\t${this.getStatusBlockContent(this.getConnections())}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetMainHeader()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-mainHeader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<span class=\"calendar-sync-header-text\">${Loc.getMessage('SYNC_CALENDAR_HEADER_NEW')}</span>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetMobileContentWrapper()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-mobileContentWrapper', () => {\n\t\t\treturn Tag.render`\n\t\t\t<div id=\"calendar-sync-mobile\" class=\"calendar-sync-mobile\"></div>\n\t\t`;\n\t\t});\n\n\t}\n\n\tgetWebContentWrapper()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-webContentWrapper', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div id=\"calendar-sync-web\" class=\"calendar-sync-web\"></div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetMobileHeader()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-mobileHeader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-sync-title\">${Loc.getMessage('SYNC_MOBILE_HEADER')}</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetWebHeader()\n\t{\n\t\treturn this.cache.remember('calendar-syncPanel-webHeader', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-sync-title\">${Loc.getMessage('SYNC_WEB_HEADER')}</div>\n\t\t`;\n\t\t});\n\t}\n\n\tgetStatusBlockContent(connections)\n\t{\n\t\tthis.statusBlock = StatusBlock.createInstance({\n\t\t\tstatus: this.status,\n\t\t\tconnections: connections,\n\t\t\twithStatusLabel: true,\n\t\t\tpopupWithUpdateButton: true,\n\t\t\tpopupId: 'calendar-syncPanel-status',\n\t\t});\n\n\t\tthis.statusBlockContent =  this.statusBlock.getContent()\n\t\treturn this.statusBlockContent;\n\t}\n\n\tgetConnections()\n\t{\n\t\tconst connections = [];\n\t\tconst items = Object.values(this.connectionsProviders);\n\t\titems.forEach(item =>\n\t\t{\n\t\t\tconst itemConnections = item.getConnections();\n\t\t\tif (itemConnections.length > 0)\n\t\t\t{\n\t\t\t\titemConnections.forEach(connection => {\n\n\t\t\t\t\tif (ConnectionItem.isConnectionItem(connection) && connection.getConnectStatus() === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsetGridContent()\n\t{\n\t\tconst items = Object.values(this.connectionsProviders);\n\n\t\tthis.showWebGridContent(items.filter(item => {\n\t\t\treturn item.mainPanel === false && item.getViewClassification() === 'web';\n\t\t}));\n\n\t\tthis.showMobileGridContent(items.filter(item => {\n\t\t\treturn item.mainPanel === false && item.getViewClassification() === 'mobile';\n\t\t}));\n\t}\n\n\tshowWebGridContent(items)\n\t{\n\t\tconst wrapper = this.getWebContentWrapper();\n\t\tDom.clean(wrapper);\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems: items,\n\t\t\tcontainer: wrapper,\n\t\t\tsizeRatio: \"55%\",\n\t\t\titemMinWidth: 180,\n\t\t\ttileMargin: 7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t\tuserId: this.userId,\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\tshowMobileGridContent(items)\n\t{\n\t\tconst wrapper = this.getMobileContentWrapper();\n\t\tDom.clean(wrapper);\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems:  items,\n\t\t\tcontainer: wrapper,\n\t\t\tsizeRatio:  \"55%\",\n\t\t\titemMinWidth:  180,\n\t\t\ttileMargin:  7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\trefresh(status, connectionsProviders)\n\t{\n\t\tthis.status = status;\n\t\tthis.connectionsProviders = connectionsProviders;\n\t\tthis.blockStatusContent = this.statusBlock.refresh(status, this.getConnections()).getContent();\n\t\tDom.replace(document.querySelector('#calendar-sync-status-block'), this.blockStatusContent);\n\t\tthis.setGridContent();\n\t}\n}","// @flow\n\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport { Dom, Event, Loc, Tag, Type, Text } from 'main.core';\n\nexport default class SyncPanelUnit\n{\n\tCOUNTER_FAILED = 1;\n\tlogoClassName = '';\n\n\tconstructor(options)\n\t{\n\t\tthis.options = options;\n\t\tthis.connectionProvider = this.options.connectionProvider;\n\t}\n\n\tgetConnectionTemplate()\n\t{\n\t\tif (!this.connectionTemplate)\n\t\t{\n\t\t\tthis.connectionTemplate = this.connectionProvider.getClassTemplateItem().createInstance(\n\t\t\t\tthis.connectionProvider,\n\t\t\t\tthis.connectionProvider.getConnection(),\n\t\t\t);\n\t\t}\n\n\t\treturn this.connectionTemplate;\n\t}\n\n\trenderTo(outerWrapper)\n\t{\n\t\tif (Type.isElementNode(outerWrapper))\n\t\t{\n\t\t\tDom.append(this.getContent(), outerWrapper);\n\t\t}\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.unitNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__calendar-item\">\n\t\t\t\t<div class=\"calendar-sync__calendar-item--logo\">\n\t\t\t\t\t${this.getLogoNode()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__calendar-item--container\">\n\t\t\t\t\t<div class=\"calendar-sync__calendar-item--title\">\n\t\t\t\t\t\t${this.getTitle()}\n\t\t\t\t\t\t${this.getSyncInfoWrap()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getButtonsWrap()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.unitNode;\n\t}\n\n\tgetLogoNode()\n\t{\n\t\treturn Tag.render`<div class=\"calendar-sync__calendar-item--logo-image ${this.connectionProvider.getSyncPanelLogo()}\"></div>`;\n\t}\n\n\tgetTitle()\n\t{\n\t\treturn this.connectionProvider.getSyncPanelTitle();\n\t}\n\n\tgetSyncInfoWrap()\n\t{\n\t\tthis.syncInfoWrap = Tag.render`\n\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t<span data-role=\"sync_info_text\" />\n\t\t\t</div>\n\t\t`;\n\t\treturn this.syncInfoWrap;\n\t}\n\n\tsetSyncStatus(mode)\n\t{\n\t\tthis.unitNode.className = 'calendar-sync__calendar-item';\n\t\tthis.syncInfoWrap.className = 'calendar-sync__account-info';\n\n\t\tswitch (mode)\n\t\t{\n\t\t\tcase this.connectionProvider.STATUS_REFUSED:\n\t\t\t\tDom.addClass(this.unitNode, '--refused');\n\t\t\t\tthis.setSyncInfoStatusText(Loc.getMessage('CAL_SYNC_INFO_STATUS_REFUSED'), false);\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_SUCCESS:\n\t\t\t\tDom.addClass(this.unitNode, '--complete');\n\t\t\t\tthis.setSyncInfoStatusText(this.formatSyncTime(this.connectionProvider.getSyncDate()));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_FAILED:\n\t\t\t\tif (this.connectionProvider.doSupportReconnectionScenario())\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.unitNode, '--error-reconnect');\n\t\t\t\t\tDom.addClass(this.syncInfoWrap, '--error-reconnect');\n\t\t\t\t\tconst connectionType = this.connectionProvider.getFailedConnectionName();\n\n\t\t\t\t\tthis.setSyncInfoStatusText(\n\t\t\t\t\t\tLoc.getMessage(\n\t\t\t\t\t\t\t'CAL_SYNC_INFO_STATUS_ERROR_RECONNECT',\n\t\t\t\t\t\t\t{ '#TYPE#': connectionType === 'iCloud' ? 'iCloud' : Text.capitalize(connectionType) },\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.unitNode, '--error');\n\t\t\t\t\tthis.setSyncInfoStatusText(Loc.getMessage('CAL_SYNC_INFO_STATUS_ERROR'));\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_PENDING:\n\t\t\t\tDom.addClass(this.unitNode, '--pending');\n\t\t\t\tthis.setSyncInfoStatusText('');\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_SYNCHRONIZING:\n\t\t\t\tDom.addClass(this.unitNode, '--active');\n\t\t\t\tthis.setSyncInfoStatusText(Loc.getMessage('CAL_SYNC_INFO_STATUS_SYNCHRONIZING'));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_NOT_CONNECTED:\n\t\t\t\tif (this.connectionProvider.isGoogleApplicationRefused)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.unitNode, '--off');\n\t\t\t\t\tthis.setSyncInfoStatusText(Loc.getMessage('CAL_SYNC_INFO_STATUS_REFUSED'), false);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.setSyncInfoStatusText('');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\n\t\tthis.refreshButton();\n\t}\n\n\tsetSyncInfoStatusText(text, upperCase = true)\n\t{\n\t\tconst syncInfoStatusText = this.syncInfoWrap.querySelector('[data-role=\"sync_info_text\"]');\n\t\tif (Type.isElementNode(syncInfoStatusText))\n\t\t{\n\t\t\tsyncInfoStatusText.innerHTML = upperCase ? Text.encode(text).toUpperCase() : Text.encode(text);\n\t\t}\n\t}\n\n\tgetButtonsWrap()\n\t{\n\t\tif (!Type.isElementNode(this.buttonsWrap))\n\t\t{\n\t\t\tthis.buttonsWrap = Tag.render`<div class=\"calendar-sync__calendar-item--buttons\">\n\t\t\t\t${this.getButton()}\n\t\t\t\t${this.getMoreButton()}\n\t\t\t</div>`;\n\t\t}\n\n\t\treturn this.buttonsWrap;\n\t}\n\n\trefreshButton()\n\t{\n\t\tDom.clean(this.buttonsWrap);\n\t\tDom.append(this.getButton(), this.buttonsWrap);\n\t\tDom.append(this.getMoreButton(), this.buttonsWrap);\n\t}\n\n\tgetButton()\n\t{\n\t\tif (this.connectionProvider.isGoogleApplicationRefused)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tswitch (this.connectionProvider.getStatus())\n\t\t{\n\t\t\tcase this.connectionProvider.STATUS_SUCCESS:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-success\" class=\"ui-btn ui-btn-icon-success ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_SUCCESS')}\n\t\t\t\t\t</a>\n\t\t\t\t`;\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_FAILED:\n\t\t\t\tif (this.connectionProvider.doSupportReconnectionScenario())\n\t\t\t\t{\n\t\t\t\t\tconst failedConnectionsCount = this.connectionProvider.getFailedConnectionsCount();\n\n\t\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t\t<button data-role=\"status-failed-reconnect\" class=\"ui-btn ui-btn-light-border ui-btn-round\">\n\t\t\t\t\t\t\t<div class=\"ui-icon-set --refresh-6 calendar-sync__calendar-item_buttons-error\"></div>\n\t\t\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_FAILED_RECONNECT')}\n\t\t\t\t\t\t\t<div class=\"calendar-sync__calendar-item_buttons-counter\">${failedConnectionsCount}</div>\n\t\t\t\t\t\t</button>\n\t\t\t\t\t`;\n\n\t\t\t\t\tEvent.bind(this.button, 'click', () => this.getConnectionTemplate().reconnect());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t\t<a data-role=\"status-failed\" class=\"ui-btn ui-btn-icon-fail ui-btn-link\">\n\t\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_FAILED')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t`;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_PENDING:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-pending\" class=\"ui-btn ui-btn-disabled ui-btn-link\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_PENDING')}\n\t\t\t\t\t</a>\n\t\t\t\t`;\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_NOT_CONNECTED:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-not_connected\" class=\"ui-btn ui-btn-success ui-btn-round\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_NOT_CONNECTED')}\n\t\t\t\t\t</a>\n\t\t\t\t`;\n\t\t\t\tEvent.bind(this.button, 'click', this.handleItemClick.bind(this));\n\t\t\t\tbreak;\n\t\t\tcase this.connectionProvider.STATUS_SYNCHRONIZING:\n\t\t\t\tthis.button = Tag.render`\n\t\t\t\t\t<a data-role=\"status-not_connected\" class=\"ui-btn ui-btn-success ui-btn-round ui-btn-clock ui-btn-disabled\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_SUCCESS')}\n\t\t\t\t\t</a>\n\t\t\t\t`;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t\treturn this.button;\n\t}\n\n\tgetMoreButton()\n\t{\n\t\tthis.moreButton = Tag.render`\n\t\t\t<div\n\t\t\t\tdata-role=\"more-button\" \n\t\t\t\tclass=\"ui-btn ui-btn-round ui-btn-light-border calendar-sync__calendar-item--more\"\n\t\t\t></div>\n\t\t`;\n\n\t\tEvent.bind(this.moreButton, 'click', this.handleItemClick.bind(this));\n\n\t\treturn this.moreButton;\n\t}\n\n\thandleItemClick(e)\n\t{\n\t\tconst status = this.connectionProvider.getStatus();\n\n\t\tif ([this.connectionProvider.STATUS_SUCCESS, this.connectionProvider.STATUS_FAILED, this.connectionProvider.STATUS_REFUSED].includes(status))\n\t\t{\n\t\t\tif (this.connectionProvider.hasMenu())\n\t\t\t{\n\t\t\t\tthis.connectionProvider.showMenu(getComputedStyle(this.moreButton).display !== 'none' ? this.moreButton : this.button);\n\t\t\t}\n\t\t\telse if (this.connectionProvider.getConnectStatus())\n\t\t\t{\n\t\t\t\tthis.connectionProvider.openActiveConnectionSlider(this.connectionProvider.getConnection());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.connectionProvider.openInfoConnectionSlider();\n\t\t\t}\n\t\t}\n\t\telse if (status === this.connectionProvider.STATUS_NOT_CONNECTED)\n\t\t{\n\t\t\tthis.getConnectionTemplate().handleConnectButton();\n\t\t}\n\t}\n\n\tformatSyncTime(date)\n\t{\n\t\tconst now = new Date();\n\t\tlet timestamp = date;\n\t\tif (Type.isDate(date))\n\t\t{\n\t\t\ttimestamp = Math.round(date.getTime() / 1000);\n\t\t\tconst secondsAgo = parseInt((now - date) / 1000, 10);\n\t\t\tif (secondsAgo < 60)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('CAL_JUST');\n\t\t\t}\n\t\t}\n\n\t\tif (timestamp === null)\n\t\t{\n\t\t\treturn Loc.getMessage('CAL_JUST');\n\t\t}\n\n\t\treturn BX.date.format(\n\t\t\t[\n\t\t\t\t[\"tommorow\", \"tommorow, H:i:s\"],\n\t\t\t\t[\"i\" , \"iago\"],\n\t\t\t\t[\"H\", \"Hago\"],\n\t\t\t\t[\"d\", \"dago\"],\n\t\t\t\t[\"m100\", \"mago\"],\n\t\t\t\t[\"m\", \"mago\"],\n\t\t\t\t[\"-\", \"\"],\n\t\t\t],\n\t\t\ttimestamp,\n\t\t);\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Dom, Loc, Tag, Cache, Event} from \"main.core\";\nimport {ConnectionItem} from \"calendar.sync.manager\";\nimport AuxiliarySyncPanel from \"./auxiliarysyncpanel\";\nimport SyncPanelUnit from './syncpanelunit';\n\nexport default class SyncPanel\n{\n\tMAIN_SYNC_SLIDER_NAME = 'calendar:sync-slider';\n\tHELPDESK_CODE = 11828176;\n\tSLIDER_WIDTH = 770;\n\tLOADER_NAME = \"calendar:loader\";\n\tcache = new Cache.MemoryCache();\n\n\tconstructor(options)\n\t{\n\t\tthis.status = options.status;\n\t\tthis.connectionsProviders = options.connectionsProviders;\n\t\tthis.userId = options.userId;\n\t\tthis.BX = window.top.BX || window.BX;\n\t}\n\n\topenSlider()\n\t{\n\t\tBX.SidePanel.Instance.open(this.MAIN_SYNC_SLIDER_NAME, {\n\t\t\tcontentCallback: (slider) => {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(this.getContent());\n\t\t\t\t});\n\t\t\t},\n\t\t\tallowChangeHistory: false,\n\t\t\tevents: {\n\t\t\t\tonLoad: () => {\n\t\t\t\t\tthis.displayConnectionUnits();\n\t\t\t\t}\n\t\t\t},\n\t\t\tcacheable: false,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tloader: this.LOADER_NAME,\n\t\t});\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__wrapper calendar-sync__scope\">\n\t\t\t\t${this.getHeaderWrapper()}\n\t\t\t\t<div class=\"calendar-sync__content\">\n\t\t\t\t${this.getUnitsContentWrapper()}\n\t\t\t\t${this.getFooterWrapper()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHeaderWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__header\">\n\t\t\t\t<div class=\"calendar-sync__header-logo\"></div>\n\t\t\t\t<div class=\"calendar-sync__header-container\">\n\t\t\t\t\t<div class=\"calendar-sync__header-title\">${Loc.getMessage('CAL_SYNC_TITLE_NEW')}</div>\n\t\t\t\t\t<div class=\"calendar-sync__header-sub-title\">${Loc.getMessage('CAL_SYNC_SUB_TITLE')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetUnitsContentWrapper()\n\t{\n\t\tthis.unitsContentWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__calendar-list\">\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.unitsContentWrapper;\n\t}\n\n\tgetFooterWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom --space-left\">\n\t\t\t\t${this.getExtraInfoWithCheckIcon()}\n\t\t\t</div>\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom --space-left--double\">\n\t\t\t\t${this.getOpenAuxiliaryPanelLink()}\n\t\t\t</div>\n\t\t\t<div class=\"calendar-sync__content-block --space-left--double\">\n\t\t\t\t${this.getOpenHelpLink()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetExtraInfoWithCheckIcon()\n\t{\n\t\tconst alreadyConnected = Object.values(this.connectionsProviders).filter(item => {\n\t\t\treturn item.mainPanel && item.status;\n\t\t}).length > 0;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__content-text --icon-check${(alreadyConnected ? ' --disabled' : '')}\">\n\t\t\t\t${Loc.getMessage('CAL_SYNC_INFO_PROMO')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetOpenAuxiliaryPanelLink()\n\t{\n\t\tconst link = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-link\">\n\t\t\t\t${Loc.getMessage('CAL_OPEN_AUXILIARY_PANEL')}\n\t\t\t</div>\n\t\t`;\n\t\tEvent.bind(link, 'click', () => {\n\t\t\t\tthis.auxiliarySyncPanel = new AuxiliarySyncPanel({\n\t\t\t\t\tconnectionsProviders: this.connectionsProviders,\n\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\tstatus: this.status,\n\t\t\t\t});\n\t\t\t\tthis.auxiliarySyncPanel.openSlider();\n\t\t});\n\n\t\treturn link;\n\t}\n\n\tgetOpenHelpLink()\n\t{\n\t\tconst link = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-link\">${Loc.getMessage('CAL_SHOW_SYNC_HELP')}</divclass>\n\t\t`;\n\t\tEvent.bind(link, 'click', () => {\n\t\t\tif(this.BX.Helper)\n\t\t\t{\n\t\t\t\tthis.BX.Helper.show(\"redirect=detail&code=\" + this.HELPDESK_CODE);\n\t\t\t}\n\t\t});\n\n\t\treturn link;\n\t}\n\n\tgetConnections()\n\t{\n\t\tconst connections = [];\n\t\tconst items = Object.values(this.connectionsProviders);\n\t\titems.forEach(item =>\n\t\t{\n\t\t\tconst itemConnections = item.getConnections();\n\t\t\tif (itemConnections.length > 0)\n\t\t\t{\n\t\t\t\titemConnections.forEach(connection => {\n\n\t\t\t\t\tif (ConnectionItem.isConnectionItem(connection) && connection.getConnectStatus() === true)\n\t\t\t\t\t{\n\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tdisplayConnectionUnits()\n\t{\n\t\tconst items = Object.values(this.connectionsProviders).filter(item => {\n\t\t\treturn item.mainPanel || item.connected;\n\t\t});\n\n\t\tthis.renderConnectionUnits(items);\n\t}\n\n\trenderConnectionUnits(providers)\n\t{\n\t\tDom.clean(this.unitsContentWrapper);\n\t\tproviders.forEach((provider) => {\n\t\t\tconst interfaceUnit = new SyncPanelUnit({connectionProvider: provider});\n\t\t\tprovider.setInterfaceUnit(interfaceUnit);\n\t\t\tinterfaceUnit.renderTo(this.unitsContentWrapper);\n\t\t\tinterfaceUnit.setSyncStatus(provider.getStatus());\n\t\t});\n\t}\n\n\tshowWebGridContent(items)\n\t{\n\t\tconst wrapper = this.getWebContentWrapper();\n\t\tDom.clean(wrapper);\n\t\tconst grid = new BX.TileGrid.Grid({\n\t\t\tid: 'calendar_sync',\n\t\t\titems: items,\n\t\t\tcontainer: wrapper,\n\t\t\tsizeRatio: \"55%\",\n\t\t\titemMinWidth: 180,\n\t\t\ttileMargin: 7,\n\t\t\titemType: 'BX.Calendar.Sync.Interface.GridUnit',\n\t\t\tuserId: this.userId,\n\t\t});\n\n\t\tgrid.draw();\n\t}\n\n\trefresh(status, connectionsProviders)\n\t{\n\t\tthis.status = status;\n\t\tthis.connectionsProviders = connectionsProviders;\n\t\tDom.replace(document.querySelector('#calendar-sync-status-block'), this.blockStatusContent);\n\t\tthis.displayConnectionUnits();\n\t\tthis.auxiliarySyncPanel?.refresh(status, connectionsProviders);\n\t}\n}\n","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport { Tag } from \"main.core\";\n\nexport default class GridUnit extends BX.TileGrid.Item\n{\n\tconstructor(item)\n\t{\n\t\tsuper({\n\t\t\tid: item.type,\n\t\t});\n\t\tthis.item = item;\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.gridUnit = Tag.render`<div class=\"calendar-sync-item ${this.getAdditionalContentClass()}\" style=\"${this.getContentStyles()}\">\n\t\t\t<div class=\"calendar-item-content\">\n\t\t\t\t${this.getImage()}\n\t\t\t\t${this.getTitle()}\n\t\t\t\t${(this.isActive() ? this.getStatus() : '')}\n\t\t\t</div>\n\t\t</div>`;\n\n\t\tthis.gridUnit.addEventListener('click', this.onClick.bind(this));\n\n\t\treturn this.gridUnit;\n\t}\n\n\tgetTitle()\n\t{\n\t\tif (!this.layout.title)\n\t\t{\n\t\t\tthis.layout.title = Tag.render `\n\t\t\t\t<div class=\"calendar-sync-item-title\">${BX.util.htmlspecialchars(this.item.getGridTitle())}</div>`;\n\t\t}\n\n\t\treturn this.layout.title;\n\t}\n\n\tgetImage()\n\t{\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-item-image\">\n\t\t\t\t<div class=\"calendar-sync-item-image-item\" style=\"background-image: ${'url(' + this.item.getGridIcon() + ')'}\"></div>\n\t\t\t</div>`;\n\t}\n\n\tgetStatus()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\treturn Tag.render `\n\t\t\t\t<div class=\"calendar-sync-item-status\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tisActive()\n\t{\n\t\treturn this.item.getConnectStatus();\n\t}\n\n\tgetAdditionalContentClass()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\tif (this.item.getSyncStatus())\n\t\t\t{\n\t\t\t\treturn 'calendar-sync-item-selected';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn 'calendar-sync-item-failed';\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetContentStyles()\n\t{\n\t\tif (this.isActive())\n\t\t{\n\t\t\treturn 'background-color:' + this.item.getGridColor() + ';';\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn '';\n\t\t}\n\t}\n\n\tonClick()\n\t{\n\t\tif (this.item.hasMenu())\n\t\t{\n\t\t\tthis.item.showMenu(this.gridUnit);\n\t\t}\n\t\telse if (this.item.getConnectStatus())\n\t\t{\n\t\t\tthis.item.openActiveConnectionSlider(this.item.getConnection());\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.item.openInfoConnectionSlider();\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc, Tag} from \"main.core\";\n\nexport default class ConnectionControls\n{\n\tuserName = null;\n\tserver = null;\n\tconnectionName = null;\n\n\tconstructor(options = null)\n\t{\n\t\tthis.addButtonText = Loc.getMessage('CAL_UPPER_CONNECT');\n\t\tthis.removeButtonText = Loc.getMessage('CAL_UPPER_DISCONNECT');\n\t\tthis.saveButtonText = Loc.getMessage('CAL_UPPER_SAVE');\n\n\t\tif (options !== null)\n\t\t{\n\t\t\tthis.userName = BX.util.htmlspecialchars(options.userName);\n\t\t\tthis.server = BX.util.htmlspecialchars(options.server);\n\t\t\tthis.connectionName = BX.util.htmlspecialchars(options.connectionName);\n\t\t}\n\t}\n\n\tgetWrapper()\n\t{\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-form\"></div>\n\t\t`;\n\t}\n\n\tgetForm()\n\t{\n\t\treturn Tag.render`\n\t\t\t<form class=\"calendar-sync-slider-form\" action=\"\">\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_NAME')}\\\" name=\"name\" value=\"${this.connectionName || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_SERVER_ADDRESS')}\\\" name=\"server\" value=\"${this.server || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"text\" class=\"ui-ctl-element\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_USER_NAME')}\\\" name=\"user_name\" value=\"${this.userName || ''}\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-field\">\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-textbox\">\n\t\t\t\t\t\t<input type=\"password\" class=\"ui-ctl-element\" name=\"password\" placeholder=\\\"${Loc.getMessage('CAL_TEXT_PASSWORD')}\\\">\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</form>\n\t\t`;\n\t}\n\n\tgetAddButton()\n\t{\n\t\treturn Tag.render `\n\t\t\t<button id=\"connect-button\" class=\"ui-btn ui-btn-light-border\">${this.addButtonText}</button>\n\t\t`;\n\t}\n\n\tgetDisconnectButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"disconnect-button\" class=\"calendar-sync-slider-btn ui-btn ui-btn-light-border\">${this.removeButtonText}</button>\n\t\t`;\n\t}\n\n\tgetSaveButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"edit-connect-button\" class=\"calendar-sync-slider-btn ui-btn ui-btn-light-border\">${this.saveButtonText}</button>\n\t\t`;\n\t}\n\n\tgetButtonWrapper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-form-btn\"></div>\n\t\t`;\n\t}\n}","import { Loc } from 'main.core';\nimport { Util } from \"calendar.util\";\nimport { QrAuthorization } from 'ui.qrauthorization';\n\nexport default class MobileSyncBanner\n{\n\tzIndex = 3100;\n\tDOM = {};\n\tQRC = null;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.type = options.type;\n\t\tthis.helpDeskCode = options.helpDeskCode || '11828176';\n\t\tthis.alreadyConnectedToNew = this.type === 'android'\n\t\t\t? Util.isGoogleConnected()\n\t\t\t: Util.isIcloudConnected()\n\t\t;\n\n\t\tthis.qrAuth = null;\n\t}\n\n\tshow()\n\t{\n\t\tthis.qrAuth ??= new QrAuthorization({\n\t\t\ttitle: Loc.getMessage('SYNC_BANNER_MOBILE_TITLE'),\n\t\t\tcontent: Loc.getMessage('SYNC_MOBILE_NOTICE'),\n\t\t\tintent: this.type ? 'calendar_sync_slider' : 'calendar_sync_banner',\n\t\t\tshowFishingWarning: true,\n\t\t\tshowBottom: false,\n\t\t});\n\n\t\tthis.qrAuth.show();\n\t}\n}\n","// @flow\n\n'use strict';\n\nimport { Loc, Tag, Dom, Event, Type, Text } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Util } from 'calendar.util';\n\nexport class InterfaceTemplate extends EventEmitter\n{\n\tCOUNTER_FAILED = 1;\n\tstatic SLIDER_WIDTH = 606;\n\tsliderWidth = 840;\n\tstatic SLIDER_PREFIX = 'calendar:connection-sync-';\n\tIS_UPDATING = false;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.InterfaceTemplate');\n\n\t\tthis.title = options.title;\n\t\tthis.helpdeskCode = options.helpDeskCode;\n\t\tthis.titleInfoHeader = options.titleInfoHeader;\n\t\tthis.descriptionInfoHeader = options.descriptionInfoHeader;\n\t\tthis.titleActiveHeader = options.titleActiveHeader;\n\t\tthis.descriptionActiveHeader = options.descriptionActiveHeader;\n\t\tthis.sliderIconClass = options.sliderIconClass;\n\t\tthis.iconPath = options.iconPath;\n\t\tthis.iconLogoClass = options.iconLogoClass || '';\n\t\tthis.color = options.color;\n\t\tthis.provider = options.provider;\n\t\tthis.connection = options.connection;\n\t\tthis.popupWithUpdateButton = options.popupWithUpdateButton;\n\t}\n\n\tstatic createInstance(provider, connection = null)\n\t{\n\t\treturn new this(provider, connection);\n\t}\n\n\tgetInfoConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t${this.getContentInfoBody()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? `${Util.formatDateUsable(timestamp)} ${BX.date.format(Util.getTimeFormatShort(), timestamp)}`\n\t\t\t: '';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account ${this.getSyncStatusClassName()}\">\n\t\t\t\t<div class=\"calendar-sync__account-logo\">\n\t\t\t\t\t<div class=\"calendar-sync__account-logo--image ${this.getLogoIconClass()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__account-content\">\n\t\t\t\t\t${BX.util.htmlspecialchars(this.connection.getConnectionName())}\n\t\t\t\t\t${this.getAccountInfo(syncTime)}\n\t\t\t\t</div>\n\t\t\t\t${this.getActionButton()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetAccountInfo(syncTime: string): HTMLElement\n\t{\n\t\tif (this.connection.status === false && this.provider.getStatus() === 'failed' && this.provider.doSupportReconnectionScenario())\n\t\t{\n\t\t\tconst connectionType = Text.encode(this.provider.getFailedConnectionName());\n\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-sync__account-info calendar-sync__account-info-template-reconnection\">\n\t\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t\t${Loc.getMessage(\n\t\t\t\t'CAL_SYNC_INFO_STATUS_ERROR_RECONNECT',\n\t\t\t\t{ '#TYPE#': connectionType === 'iCloud' ? 'iCloud' : Text.capitalize(connectionType) },\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t${syncTime}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetActiveConnectionContent()\n\t{\n\t\tthis.disconnectButton = this.getDisconnectButton();\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__scope\">\n\t\t\t\t\t<div class=\"calendar-sync__content --border-radius\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t\t\t${this.getContentActiveBody()}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__disconnect-button-container\">\n\t\t\t\t\t${this.disconnectButton}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetActionButton(): HTMLElement\n\t{\n\t\tif (this.connection.status === false && this.provider.getStatus() === 'failed' && this.provider.doSupportReconnectionScenario())\n\t\t{\n\t\t\tthis.actionButton = Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-round calendar-sync__account-btn\">\n\t\t\t\t\t<div class=\"ui-icon-set --refresh-4\"></div>\n\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_STATUS_FAILED_RECONNECT')}\n\t\t\t\t\t<div class=\"calendar-sync__account-counter\">${this.COUNTER_FAILED}</div>\n\t\t\t\t</button>\n\t\t\t`;\n\n\t\t\tEvent.bind(this.actionButton, 'click', () => this.reconnect());\n\t\t}\n\t\telse if (this.provider.getStatus() === 'pending')\n\t\t{\n\t\t\tthis.actionButton = Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-clock ui-btn-round calendar-sync__account-btn\">\n\t\t\t\t\t<div class=\"calendar-sync__account-counter\">${this.COUNTER_FAILED}</div>\n\t\t\t\t</button>\n\t\t\t`;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst { root, icon } = Tag.render`\n\t\t\t\t<button class=\"ui-btn ui-btn-primary ui-btn-round calendar-sync__account-btn\">\n\t\t\t\t\t<div ref=\"icon\" class=\"ui-icon-set --refresh-4\"></div>\n\t\t\t\t\t${Loc.getMessage('CAL_REFRESH')}\n\t\t\t\t</button>\n\t\t\t`;\n\t\t\tthis.actionButton = root;\n\t\t\tthis.actionButtonIcon = icon;\n\n\t\t\tEvent.bind(this.actionButton, 'click', () => this.updateConnection());\n\t\t}\n\n\t\treturn this.actionButton;\n\t}\n\n\tupdateConnection()\n\t{\n\t\tif (this.IS_UPDATING)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.onUpdateConnectionStart();\n\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.updateConnection', {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: 'user',\n\t\t\t\t\trequestUid: Util.registerRequestId(),\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tEventEmitter.emit('BX.Calendar.Sync.Interface.InterfaceTemplate:onRefresh', {\n\t\t\t\t\tdata: response.data,\n\t\t\t\t\tevent: { doRefreshMainSlider: true },\n\t\t\t\t});\n\t\t\t\tthis.onUpdateConnectionEnd();\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t}\n\n\tonUpdateConnectionStart()\n\t{\n\t\tthis.IS_UPDATING = true;\n\t\tDom.addClass(this.actionButtonIcon, '--hidden');\n\t\tDom.addClass(this.actionButton, 'ui-btn-clock');\n\t\tDom.addClass(this.disconnectButton, 'ui-btn-disabled');\n\t\tDom.addClass(this.sectionListNode, '--disabled');\n\t}\n\n\tonUpdateConnectionEnd()\n\t{\n\t\tthis.IS_UPDATING = false;\n\t\tDom.removeClass(this.actionButtonIcon, '--hidden');\n\t\tDom.removeClass(this.actionButton, 'ui-btn-clock');\n\t\tDom.removeClass(this.disconnectButton, 'ui-btn-disabled');\n\t\tDom.removeClass(this.sectionListNode, '--disabled');\n\t\tthis.provider.closeSlider();\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t${this.getContentActiveBodySectionsHeader()}\n\t\t\t${this.getContentActiveBodySectionsManager()}\n\t\t`;\n\t}\n\n\tshowHelp(event)\n\t{\n\t\tif (top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show(`redirect=detail&code=${this.helpdeskCode}`);\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\tgetHelpdeskLink()\n\t{\n\t\treturn `https://helpdesk.bitrix24.ru/open/${this.helpdeskCode}`;\n\t}\n\n\tgetHeaderTitle()\n\t{\n\t\treturn this.title;\n\t}\n\n\tgetLogoIconClass()\n\t{\n\t\treturn this.iconLogoClass;\n\t}\n\n\tgetContentInfoBodyHeader()\n\t{\n\t\tif (!this.infoBodyHeader)\n\t\t{\n\t\t\tthis.infoBodyHeader = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-flex-wrap\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t\t\t<div class=\"calendar-sync-slider-title\">\n\t\t\t\t\t\t\t${this.titleInfoHeader}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t\t\t${this.descriptionInfoHeader}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${this.getContentInfoBodyHeaderHelper()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.infoBodyHeader;\n\t}\n\n\tgetContentInfoBodyHeaderHelper()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t\t</a>\n\t\t\t\t</span>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentInfoWarning()\n\t{\n\t\tconst mobileSyncButton = this.getMobileSyncControlButton();\n\t\tif (this.alreadyConnectedToNew)\n\t\t{\n\t\t\tEvent.bind(mobileSyncButton, 'click', this.handleMobileButtonOtherSyncInfo.bind(this));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tEvent.bind(mobileSyncButton, 'click', this.handleMobileButtonConnectClick.bind(this));\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-section-warning calendar-sync-slider-section-col\">\n\t\t\t\t<div class=\"ui-alert ui-alert-warning ui-alert-icon-info\">\n\t\t\t\t\t<span class=\"ui-alert-message\">${this.warningText}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-button-warning\">${mobileSyncButton}</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetMobileSyncControlButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-success ui-btn-sm ui-btn-round\">\n\t\t\t\t${this.mobileSyncButtonText}\n\t\t\t</button>\n\t\t`;\n\t}\n\n\tsetProvider(provider)\n\t{\n\t\tthis.provider = provider;\n\t}\n\n\t// TODO: move logic to provider\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.removeConnection', {\n\t\t\tdata: {\n\t\t\t\tconnectionId: id,\n\t\t\t\tremoveCalendars: 'Y', //by default\n\t\t\t}\n\t\t}).then(() => {\n\t\t\tBX.reload();\n\t\t});\n\t}\n\n\trunUpdateInfo()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setSectionStatus', {\n\t\t\tdata: {\n\t\t\t\tsectionStatus: this.sectionStatusObject,\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tthis.emit('reDrawCalendarGrid', {});\n\t\t});\n\t}\n\n\trefresh(connection)\n\t{\n\t\tthis.connection = connection;\n\t\tif (this.connection)\n\t\t{\n\t\t\tthis.statusBlock\n\t\t\t\t?.setStatus(this.connection.getStatus())\n\t\t\t\t.setConnections([this.connection])\n\t\t\t;\n\t\t}\n\n\t\tDom.replace(document.getElementById('status-info-block'), this.statusBlock?.getContent());\n\t}\n\n\treconnect()\n\t{\n\t\tif (!this.provider.doSupportReconnectionScenario())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.provider.startReconnecting();\n\t\tthis.handleConnectButton();\n\t\tthis.provider.closeSlider();\n\t}\n\n\thandleConnectButton()\n\t{\n\t}\n\n\tgetDisconnectButton()\n\t{\n\t\t// <button class=\"ui-btn ui-btn-primary ui-btn-round calendar-sync__account-btn\">\n\t\t// \t<div class=\"ui-icon-set --refresh-4\"></div>\n\t\t// \t${Loc.getMessage('CAL_SYNC_DISCONNECT_BUTTON')}\n\t\t// \t<div class=\"calendar-sync__account-counter\">${this.COUNTER_FAILED}</div>\n\t\t// </button>\n\t\t//\n\t\t// <button class=\"ui-btn ui-btn-primary ui-btn-clock ui-btn-round\">${Loc.getMessage('CAL_SYNC_DISCONNECT_BUTTON')}</button>\n\t\tconst button = Tag.render`\n\t\t\t<button class=\"ui-btn ui-btn-light-border ui-btn-round calendar-sync__account-btn\">\n\t\t\t\t${Loc.getMessage('CAL_SYNC_DISCONNECT_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(button, 'click', this.handleDisconnectButton.bind(this));\n\n\t\treturn button;\n\t}\n\n\tgetSyncStatusClassName(): string\n\t{\n\t\treturn this.provider.getStatus() === 'success' || this.connection.status === true\n\t\t\t? '--complete'\n\t\t\t: (this.provider.doSupportReconnectionScenario() ? '--error-reconnect' : '--error')\n\t\t;\n\t}\n\n\tgetContentActiveBodySectionsHeader()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account-desc\">${Loc.getMessage('CAL_SYNC_SELECTED_LIST_TITLE')}</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodySectionsManager()\n\t{\n\t\tthis.sectionListNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__account-check-list\">\n\t\t\t\t${this.getContentActiveBodySections()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.sectionListNode;\n\t}\n\n\tgetContentActiveBodySections()\n\t{\n\t\tconst sectionList = [];\n\t\tthis.sectionList.forEach((section) => {\n\t\t\tsectionList.push(Tag.render`\n\t\t\t\t<label class=\"calendar-sync__account-check-list-label\">\n\t\t\t\t\t<input type=\"checkbox\" class=\"calendar-sync__account-check-list-input\"\n\t\t\t\t\t\tvalue=\"${BX.util.htmlspecialchars(section.ID)}\" \n\t\t\t\t\t\tonclick=\"${this.onClickCheckSection.bind(this)}\" ${section.ACTIVE === 'Y' ? 'checked' : ''}/>\n\t\t\t\t\t<span class=\"calendar-sync__account-check-list-text\">${BX.util.htmlspecialchars(section.NAME)}</span>\n\t\t\t\t</label>\n\t\t\t`);\n\t\t});\n\n\t\treturn sectionList;\n\t}\n\n\tshowUpdateSectionListNotification()\n\t{\n\t\tUtil.showNotification(\n\t\t\tLoc.getMessage('CAL_SYNC_CALENDAR_LIST_UPDATED'),\n\t\t);\n\t}\n\n\thandleDisconnectButton(event)\n\t{\n\t\tif (Type.isElementNode(this.disconnectButton))\n\t\t{\n\t\t\tDom.addClass(this.disconnectButton, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t}\n\t\tevent.preventDefault();\n\t\t// this.provider.removeConnection();\n\t\tthis.sendRequestRemoveConnection(this.connection.getId());\n\t}\n\n\tdeactivateConnection(id)\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.deactivateConnection', {\n\t\t\tdata: {\n\t\t\t\tconnectionId: id,\n\t\t\t\tremoveCalendars: 'N', //by default\n\t\t\t},\n\t\t}).then(() => {\n\t\t\tthis.provider.closeSlider();\n\t\t\tthis.provider.setStatus(this.provider.STATUS_NOT_CONNECTED);\n\t\t\tthis.provider.getInterfaceUnit().refreshButton();\n\t\t\tthis.provider.getInterfaceUnit().setSyncStatus(this.provider.STATUS_NOT_CONNECTED);\n\n\t\t\tthis.emit('reDrawCalendarGrid', {});\n\t\t});\n\t}\n}\n","// @flow\n'use strict';\n\nimport {InterfaceTemplate} from './interfacetemplate';\nimport {Dom, Loc, Tag} from \"main.core\";\nimport ConnectionControls from \"../controls/connectioncontrols\";\n\nexport class CaldavInterfaceTemplate extends InterfaceTemplate\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\tlet options = null;\n\t\tif (this.connection !== null)\n\t\t{\n\t\t\toptions = {\n\t\t\t\tserver: this.connection.addParams.server,\n\t\t\t\tuserName: this.connection.addParams.userName,\n\t\t\t\tconnectionName: this.connection.connectionName,\n\t\t\t};\n\t\t}\n\n\t\tconst formObject = new ConnectionControls(options);\n\t\tconst formBlock = formObject.getWrapper();\n\t\tconst form = formObject.getForm();\n\t\tconst button = formObject.getAddButton();\n\t\tconst buttonWrapper = formObject.getButtonWrapper();\n\t\tconst bodyHeader = this.getContentInfoBodyHeader();\n\n\t\tbutton.addEventListener('click', (event) => {\n\t\t\tDom.addClass(button, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t\tevent.preventDefault();\n\t\t\tthis.sendRequestAddConnection(form);\n\t\t});\n\n\t\tDom.append(button, buttonWrapper);\n\t\tDom.append(buttonWrapper, form);\n\t\tDom.append(form, formBlock);\n\n\t\treturn Tag.render`\n\t\t\t${bodyHeader}\n\t\t\t${formBlock}\n\t\t`;\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\tconst formObject = new ConnectionControls({\n\t\t\tserver: this.connection.addParams.server,\n\t\t\tuserName: this.connection.addParams.userName,\n\t\t\tconnectionName: this.connection.connectionName,\n\t\t});\n\t\tconst formBlock = formObject.getWrapper();\n\t\tconst form = formObject.getForm();\n\t\tconst bodyHeader = this.getContentActiveBodyHeader();\n\t\tDom.append(form, formBlock);\n\n\t\treturn Tag.render`\n\t\t\t${bodyHeader}\n\t\t\t${formBlock}\n\t\t`;\n\t}\n\n\tsendRequestAddConnection(form)\n\t{\n\t\tconst fd = new FormData(form);\n\t\tBX.ajax.runAction('calendar.api.syncajax.addConnection', {\n\t\t\tdata: {\n\t\t\t\tname: fd.get('name'),\n\t\t\t\tserver: fd.get('server'),\n\t\t\t\tuserName: fd.get('user_name'),\n\t\t\t\tpass: fd.get('password'),\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tBX.reload();\n\t\t}, response => {\n\t\t\tconst button = form.querySelector('#connect-button');\n\t\t\tthis.showAlertPopup(response.errors[0], button);\n\t\t});\n\t}\n\n\tshowAlertPopup(alert, button)\n\t{\n\t\tlet message = '';\n\t\tif (alert.code === 'incorrect_parameters')\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_INCORRECT_PARAMETERS');\n\t\t}\n\t\telse if (alert.code === 'tech_problem')\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_TECH_PROBLEM');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tmessage = Loc.getMessage('CAL_TEXT_ALERT_DEFAULT');\n\t\t}\n\n\t\tconst messageBox = new BX.UI.Dialogs.MessageBox({\n\t\t\tmessage: message,\n\t\t\ttitle: alert.message,\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tokCaption: Loc.getMessage('CAL_TEXT_BUTTON_RETURN_TO_SETTINGS'),\n\t\t\tminWidth: 358,\n\t\t\tmediumButtonSize: false,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndex: 3021,\n\t\t\t\theight: 166,\n\t\t\t\twidth: 358,\n\t\t\t\tclassName: 'calendar-alert-popup-connection'\n\t\t\t},\n\t\t\tonOk: () => {\n\t\t\t\tDom.removeClass(button, ['ui-btn-clock', 'ui-btn-disabled']);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\n\t\tmessageBox.show();\n\t}\n\n\thandleConnectButton(): void\n\t{\n\t\tthis.provider.openInfoConnectionSlider(this.provider.getFirstFailedConnection());\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {CaldavInterfaceTemplate} from \"./caldavinterfacetemplate\";\n\nexport default class CaldavTemplate extends CaldavInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_CALDAV\"),\n\t\t\thelpDeskCode: '5697365',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_CALDAV_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_CALDAV_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_CALDAV_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_CALDAV_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-caldav',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/caldav.svg',\n\t\t\tcolor: '#1eae43',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport { Loc, Tag } from 'main.core';\nimport { InterfaceTemplate } from './interfacetemplate';\nimport { Util } from 'calendar.util';\n\nexport default class ExchangeTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_EXCHANGE\"),\n\t\t\thelpDeskCode: '9860971',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_EXCHANGE_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_EXCHANGE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_EXCHANGE_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_EXCHANGE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-office',\n\t\t\ticonLogoClass: '--exchange',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/exchange.svg',\n\t\t\tcolor: '#54d0df',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t${this.getContentBody()}\n\t\t\t${this.getHelpdeskBlock()}\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account ${this.getSyncStatusClassName()}\">\n\t\t\t\t<div class=\"calendar-sync__account-logo\">\n\t\t\t\t\t<div class=\"calendar-sync__account-logo--image ${this.getLogoIconClass()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__account-content\">\n\t\t\t\t\t${BX.util.htmlspecialchars(this.connection.getConnectionName())}\n\t\t\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t\t\t${syncTime}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tgetContentBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__account-desc\">\n\t\t\t\t${Loc.getMessage('CAL_EXCHANGE_SELECTED_DESCRIPTION')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHelpdeskBlock()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div>\n\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\t}\n}","// @flow\n\n'use strict';\n\nimport { Cache, Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { Entry } from 'calendar.entry';\nimport { EventEmitter } from 'main.core.events';\n\nexport default class SyncWizard extends EventEmitter\n{\n\tTYPE = 'undefined';\n\tSLIDER_NAME = 'calendar:sync-wizard-slider';\n\tSLIDER_WIDTH = 450;\n\tLOADER_NAME = \"calendar:loader\";\n\tcache = new Cache.MemoryCache();\n\tsyncStagesList = [];\n\taccountName = '';\n\tHELPDESK_CODE = 11828176;\n\tMIN_UPDATE_STATE_DELAY = 1500; // in ms\n\tCONFETTI_DELAY = 1000;\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.SyncWizard');\n\n\t\tthis.BX = window.top.BX || window.BX;\n\n\t\tthis.pullWizardEventHandler = this.handlePullNewEvent.bind(this);\n\t\tthis.lastUpdateStateTimestamp = Date.now();\n\t\tthis.logoIconClass = '';\n\n\t\tthis.mode = Type.isStringFilled(options.mode) ? this.getValidatedMode(options.mode) : 'default';\n\t}\n\n\tgetValidatedMode(mode: string): string\n\t{\n\t\tif (['default', 'reconnect'].includes(mode))\n\t\t{\n\t\t\treturn mode;\n\t\t}\n\n\t\treturn 'default';\n\t}\n\n\topenSlider()\n\t{\n\t\tconst content = this.getContent();\n\t\tif (this.mode !== 'reconnect')\n\t\t{\n\t\t\tBX.SidePanel.Instance.open(this.SLIDER_NAME, {\n\t\t\t\tcontentCallback: (slider) => {\n\t\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\tresolve(content);\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\tevents: {\n\t\t\t\t\tonLoad: () => {\n\t\t\t\t\t\tthis.displaySyncStages();\n\t\t\t\t\t\tthis.bindButtonsHandlers();\n\t\t\t\t\t},\n\t\t\t\t\tonDestroy: this.handleCloseWizard.bind(this),\n\t\t\t\t},\n\t\t\t\tcacheable: false,\n\t\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\t\tloader: this.LOADER_NAME,\n\t\t\t});\n\t\t}\n\n\t\tthis.slider = BX.SidePanel.Instance.getTopSlider();\n\t\tthis.syncIsFinished = false;\n\t\tthis.errorStatus = false;\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__wrapper calendar-sync__scope\">\n\t\t\t\t<div class=\"calendar-sync__content --border-radius\">\n\t\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t\t${this.getTitleWrapper()}\n\t\t\t\t\t\t${this.getSyncStagesWrapper()}\n\t\t\t\t\t\t${this.getInfoStatusWrapper()}\n\t\t\t\t\t\t${this.getErrorWrapper()}\n\t\t\t\t\t\t${this.getFinalCheckWrapper()}\n\t\t\t\t\t\t${this.getHelpLinkWrapper()}\n\t\t\t\t\t\t${this.getButtonWrapper()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetTitleWrapper()\n\t{\n\t\tthis.syncTitleWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__account\">\n\t\t\t\t<div class=\"calendar-sync__account-logo\">\n\t\t\t\t\t<div class=\"calendar-sync__account-logo--image ${this.getLogoIconClass()}\"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__account-content\">\n\t\t\t\t\t${this.getAccountNameNode()}\n\t\t\t\t\t<div class=\"calendar-sync__account-info\">\n\t\t\t\t\t\t<div class=\"calendar-sync__account-info--icon --animate\"></div>\n\t\t\t\t\t\t${this.getActiveStatusNode()}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.syncTitleWrapper;\n\t}\n\n\tgetSyncStagesWrapper()\n\t{\n\t\tthis.syncStagesWrapper = Tag.render`<div class=\"calendar-sync-stages-wrap\"></div>`;\n\t\treturn this.syncStagesWrapper;\n\t}\n\n\tgetInfoStatusWrapper()\n\t{\n\t\tthis.infoStatusWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom-xl\" style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__notification\">\n\t\t\t\t\t<div class=\"calendar-sync__notification-title\">${Loc.getMessage('CAL_INFO_STATUS_CONG_1')}</div>\n\t\t\t\t\t<div class=\"calendar-sync__notification-message\">${Loc.getMessage('CAL_INFO_STATUS_CONG_2')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.infoStatusWrapper;\n\t}\n\n\tgetErrorWrapper()\n\t{\n\t\tthis.errorWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom-xl\" style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__error\">\n\t\t\t\t\t<div class=\"calendar-sync__notification-message\">\n\t\t\t\t\t\t<div class=\"calendar-sync__notification-message-inner\">\n\t\t\t\t\t\t\t${Loc.getMessage('CAL_ERROR_WARN_1')}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t${Loc.getMessage('CAL_ERROR_WARN_2')}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t\treturn this.errorWrapper;\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\tthis.helpLinkWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block\" style=\"display: none;\"></div>\n\t\t`;\n\t\treturn this.helpLinkWrapper;\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block\" style=\"display: none;\"></div>\n\t\t`;\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tgetButtonWrapper()\n\t{\n\t\tthis.buttonWrapper = Tag.render`\n\t\t\t<div style=\"display: none\" class=\"calendar-sync__content-block --align-center\">\n\t\t\t\t<a class=\"ui-btn ui-btn-lg ui-btn-primary ui-btn-round\" data-role=\"continue_btn\">\n\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_CONTINUE')}\n\t\t\t\t</a>\n\t\t\t\t<a style=\"display: none\" class=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\" data-role=\"everything_is_fine_btn\">\n\t\t\t\t\t${Loc.getMessage('CAL_BUTTON_EVERYTHING_IS_FINE')}\n\t\t\t\t</a>\n\t\t\t\t<a style=\"display: none\" class=\"ui-btn ui-btn-lg ui-btn-light-border ui-btn-round\" data-role=\"close_button\">\n\t\t\t\t\t${Loc.getMessage('CAL_ERROR_CLOSE')}\n\t\t\t\t</a>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.buttonWrapper;\n\t}\n\n\tgetNewEventCardWrapper()\n\t{\n\t\tthis.newEventCardWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom\" style=\"display: none;\"></div>\n\t\t`;\n\t\treturn this.newEventCardWrapper;\n\t}\n\n\tgetSkeletonWrapper()\n\t{\n\t\tthis.skeletonWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --skeleton\">\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-box\">\n\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-inline-box\">\n\t\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-circle\"></div>\n\t\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-line\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"calendar-sync__balloon__skeleton-line\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text\">${this.getSkeletonTitle()}</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t`;\n\t\treturn this.skeletonWrapper;\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn '';\n\t}\n\n\tgetExtraInfoWithCheckIcon()\n\t{\n\t\tconst alreadyConnected = Object.values(this.connectionsProviders).filter(item => {\n\t\t\treturn item.mainPanel && item.status;\n\t\t}).length > 0;\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync__content-text --icon-check${(alreadyConnected ? ' --disabled' : '')}\">\n\t\t\t\t${Loc.getMessage('CAL_SYNC_INFO_PROMO')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetAccountNameNode()\n\t{\n\t\tif (!Type.isElementNode(this.accountNameNode))\n\t\t{\n\t\t\tthis.accountNameNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__account-title\">${this.getAccountName()}</div>\n\t\t`;\n\t\t}\n\t\treturn this.accountNameNode;\n\t}\n\n\tsetAccountName(value)\n\t{\n\t\tthis.accountName = value;\n\t}\n\n\tgetAccountName()\n\t{\n\t\treturn this.accountName;\n\t}\n\n\tgetActiveStatusNode()\n\t{\n\t\tif (!Type.isElementNode(this.activeStatusNode))\n\t\t{\n\t\t\tthis.activeStatusNode = Tag.render`\n\t\t\t\t<span class=\"calendar-active-status-node-carousel\">\n\t\t\t\t\t<span class=\"calendar-active-status-node-phrase\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS')}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t`;\n\n\t\t\tthis.startStatusCarousel(this.activeStatusNode);\n\t\t}\n\n\t\treturn this.activeStatusNode;\n\t}\n\n\tstartStatusCarousel(statusNode)\n\t{\n\t\tconst progressStatuses = [\n\t\t\tLoc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS_STATUSES_FIRST'),\n\t\t\tLoc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS_STATUSES_SECOND')\n\t\t];\n\n\t\tlet dotCycle = 1;\n\n\t\tthis.statusCarouselInterval = setInterval(() => {\n\t\t\tconst currentPhraseNode = statusNode.firstElementChild;\n\t\t\tif (this.countDots(currentPhraseNode.innerText) < 3)\n\t\t\t{\n\t\t\t\tcurrentPhraseNode.innerText += '.';\n\t\t\t\tstatusNode.style.width = (currentPhraseNode.offsetWidth + 1) + 'px';\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (dotCycle < 2)\n\t\t\t{\n\t\t\t\tdotCycle++;\n\t\t\t\tcurrentPhraseNode.innerText = currentPhraseNode.innerText.slice(0, -3);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tdotCycle = 1;\n\n\t\t\tif (progressStatuses.length > 0)\n\t\t\t{\n\t\t\t\tconst status = progressStatuses.shift();\n\t\t\t\tthis.animateNextStatus(statusNode, status);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst almostDoneStatus = Loc.getMessage('CAL_STATUS_SYNC_IN_PROGRESS_ALMOST_DONE');\n\t\t\t\tthis.animateNextStatus(statusNode, almostDoneStatus);\n\t\t\t\tstatusNode.style.width = '';\n\t\t\t\tclearInterval(this.statusCarouselInterval);\n\t\t\t}\n\t\t}, 900);\n\t}\n\n\tanimateNextStatus(carousel, phraseText)\n\t{\n\t\tconst currentPhraseNode = carousel.firstElementChild;\n\t\tconst nextPhraseNode = Tag.render`\n\t\t\t<span class=\"calendar-active-status-node-phrase\">${phraseText}</span>\n\t\t`;\n\t\tcarousel.append(nextPhraseNode);\n\n\t\tconst maxWidth = Math.max(nextPhraseNode.offsetWidth, currentPhraseNode.offsetWidth);\n\t\tcarousel.style.width = (maxWidth + 1) + 'px';\n\n\t\tcurrentPhraseNode.style.transition = ''; // turn on animation\n\t\tcurrentPhraseNode.style.transform = `translateX(-${currentPhraseNode.offsetWidth}px)`;\n\t\tnextPhraseNode.style.transform = `translateX(-${currentPhraseNode.offsetWidth}px)`;\n\n\t\tsetTimeout(() => {\n\t\t\tcurrentPhraseNode.remove();\n\t\t\tnextPhraseNode.style.transition = 'none'; // turn off animation\n\t\t\tnextPhraseNode.style.transform = '';\n\t\t}, 300);\n\t}\n\n\tcountDots(string)\n\t{\n\t\treturn (string.match(/\\./g) || []).length;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [];\n\t}\n\n\tgetSyncStages()\n\t{\n\t\treturn this.syncStagesList;\n\t}\n\n\tgetHelpDeskCode()\n\t{\n\t\treturn this.HELPDESK_CODE;\n\t}\n\n\tdisplaySyncStages()\n\t{\n\t\tDom.clean(this.syncStagesWrapper);\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tstage.renderTo(this.syncStagesWrapper);\n\t\t});\n\t}\n\n\tbindButtonsHandlers()\n\t{\n\t\tconst continueButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"continue_btn\"]');\n\t\tif (Type.isElementNode(continueButton))\n\t\t{\n\t\t\tEvent.bind(continueButton, 'click', this.handleContinueButtonClick.bind(this));\n\t\t}\n\n\t\tconst eifButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"everything_is_fine_btn\"]');\n\t\tif (Type.isElementNode(eifButton))\n\t\t{\n\t\t\tEvent.bind(eifButton, 'click', this.handleFinalCloseButtonClick.bind(this));\n\t\t}\n\t}\n\n\thandleContinueButtonClick()\n\t{\n\t\tthis.showFinalStage();\n\t}\n\n\tshowFinalStage()\n\t{\n\t\tthis.syncIsFinished = true;\n\n\t\tconst eifButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"everything_is_fine_btn\"]');\n\t\tif (Type.isElementNode(eifButton))\n\t\t{\n\t\t\teifButton.style.display = '';\n\t\t}\n\n\t\tconst continueButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"continue_btn\"]');\n\t\tif (Type.isElementNode(continueButton))\n\t\t{\n\t\t\tcontinueButton.style.display = 'none';\n\t\t}\n\n\t\tthis.showFinalCheckWrapper();\n\t\tthis.showHelpLinkWrapper();\n\t\tthis.hideSyncStagesWrapper();\n\t\tthis.hideInfoStatusWrapper();\n\n\t\tUtil.getBX().Event.EventEmitter.subscribe(\n\t\t\t'onPullEvent-calendar',\n\t\t\tthis.pullWizardEventHandler\n\t\t);\n\n\t\tthis.emit('startWizardWaitingMode');\n\t}\n\n\tisSyncFinished()\n\t{\n\t\treturn this.syncIsFinished;\n\t}\n\n\thandleFinalCloseButtonClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:sync-slider', 'calendar:section-slider', this.SLIDER_NAME].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\t}\n\n\thandleUpdateState(stateData)\n\t{\n\t\tconst currentTimestamp = Date.now();\n\t\tif (currentTimestamp - this.lastUpdateStateTimestamp > this.MIN_UPDATE_STATE_DELAY)\n\t\t{\n\t\t\tthis.updateState(stateData);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.handleUpdateState(stateData);\n\t\t\t}, this.MIN_UPDATE_STATE_DELAY);\n\t\t}\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tif (this.errorStatus)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (stateData.stage === 'connection_created'\n\t\t\t&& stateData.accountName\n\t\t\t&& Type.isElementNode(this.accountNameNode)\n\t\t)\n\t\t{\n\t\t\tthis.setAccountName(stateData.accountName);\n\t\t\tthis.accountNameNode.innerHTML = Text.encode(stateData.accountName)\n\t\t}\n\n\t\tthis.lastUpdateStateTimestamp = Date.now();\n\t}\n\n\tsetActiveStatusFinished()\n\t{\n\t\tthis.activeStatusNode.style.width = '';\n\t\tclearInterval(this.statusCarouselInterval);\n\t\tthis.syncIsFinished = true;\n\t\tif (Type.isElementNode(this.activeStatusNode))\n\t\t{\n\t\t\tthis.activeStatusNode.innerHTML = Text.encode(Loc.getMessage('CAL_STATUS_SYNC_SUCCESS').toUpperCase())\n\t\t\tDom.remove(this.syncTitleWrapper.querySelector('.calendar-sync__account-info--icon'));\n\t\t}\n\t}\n\n\tshowButtonWrapper()\n\t{\n\t\tif (Type.isElementNode(this.buttonWrapper))\n\t\t{\n\t\t\tthis.buttonWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideButtonWrapper()\n\t{\n\t\tif (Type.isElementNode(this.buttonWrapper))\n\t\t{\n\t\t\tthis.buttonWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowInfoStatusWrapper()\n\t{\n\t\tif (Type.isElementNode(this.infoStatusWrapper))\n\t\t{\n\t\t\tthis.infoStatusWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideInfoStatusWrapper()\n\t{\n\t\tif (Type.isElementNode(this.infoStatusWrapper))\n\t\t{\n\t\t\tthis.infoStatusWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowErrorWrapper()\n\t{\n\t\tif (Type.isElementNode(this.errorWrapper))\n\t\t{\n\t\t\tthis.errorWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideErrorWrapper()\n\t{\n\t\tif (Type.isElementNode(this.errorWrapper))\n\t\t{\n\t\t\tthis.errorWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowFinalCheckWrapper()\n\t{\n\t\tif (Type.isElementNode(this.finalCheckWrapper))\n\t\t{\n\t\t\tthis.finalCheckWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideFinalCheckWrapper()\n\t{\n\t\tif (Type.isElementNode(this.finalCheckWrapper))\n\t\t{\n\t\t\tthis.finalCheckWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowSyncStagesWrapper()\n\t{\n\t\tif (Type.isElementNode(this.syncStagesWrapper))\n\t\t{\n\t\t\tthis.syncStagesWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideSyncStagesWrapper()\n\t{\n\t\tif (Type.isElementNode(this.syncStagesWrapper))\n\t\t{\n\t\t\tthis.syncStagesWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\tshowHelpLinkWrapper()\n\t{\n\t\tif (Type.isElementNode(this.helpLinkWrapper))\n\t\t{\n\t\t\tthis.helpLinkWrapper.style.display = '';\n\t\t}\n\t}\n\n\thideHelpLinkWrapper()\n\t{\n\t\tif (Type.isElementNode(this.helpLinkWrapper))\n\t\t{\n\t\t\tthis.helpLinkWrapper.style.display = 'none';\n\t\t}\n\t}\n\n\thandlePullNewEvent(event)\n\t{\n\t\tif (event && Type.isFunction(event.getData))\n\t\t{\n\t\t\tconst data = {\n\t\t\t\tcommand: event.getData()[0],\n\t\t\t\t...event.getData()[1]\n\t\t\t};\n\n\t\t\tif (\n\t\t\t\tdata.command === 'edit_event'\n\t\t\t\t&& data.newEvent\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (Type.isElementNode(this.finalCheckWrapper))\n\t\t\t\t{\n\t\t\t\t\tconst syncBalloon = this.finalCheckWrapper.querySelector('.calendar-sync__balloon');\n\t\t\t\t\tif (Type.isElementNode(syncBalloon) && Dom.hasClass(syncBalloon, '--progress'))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(syncBalloon, '--progress');\n\t\t\t\t\t\tDom.addClass(syncBalloon, '--done');\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst entry = new Entry({ data: data.fields });\n\t\t\t\tthis.displayNewEvent(entry);\n\n\t\t\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t\t\t'onPullEvent-calendar',\n\t\t\t\t\tthis.pullWizardEventHandler\n\t\t\t\t);\n\n\t\t\t\tconst eifButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"everything_is_fine_btn\"]');\n\t\t\t\tif (Type.isElementNode(eifButton))\n\t\t\t\t{\n\t\t\t\t\teifButton.innerHTML = Text.encode(Loc.getMessage('CAL_BUTTON_KEEP_GOING'));\n\t\t\t\t\tDom.addClass(eifButton, 'ui-btn-primary');\n\t\t\t\t\tDom.removeClass(eifButton, 'ui-btn-light-border');\n\t\t\t\t}\n\n\t\t\t\tthis.emit('endWizardWaitingMode');\n\t\t\t}\n\t\t}\n\t}\n\n\tdisplayNewEvent(entry)\n\t{\n\t\t// Hide skeleton\n\t\tif (Type.isElementNode(this.skeletonWrapper))\n\t\t{\n\t\t\tDom.remove(this.skeletonWrapper);\n\t\t}\n\n\t\tif (Type.isElementNode(this.newEventCardWrapper))\n\t\t{\n\t\t\tthis.newEventCardWrapper.style.display = '';\n\t\t\tDom.clean(this.newEventCardWrapper);\n\t\t\tthis.newEventCardWrapper.appendChild(this.getNewEventCard(entry));\n\t\t}\n\t}\n\n\tgetNewEventCard(entry)\n\t{\n\t\tconst from = new Date(entry.from.getTime() - (parseInt(entry.data['~USER_OFFSET_FROM']) || 0) * 1000);\n\t\tconst to = new Date(entry.to.getTime() - (parseInt(entry.data['~USER_OFFSET_TO']) || 0) * 1000);\n\t\tconst fromTimestamp = from.getTime();\n\t\tconst dateFrom = BX.date.format(Util.getDayMonthFormat(), fromTimestamp / 1000);\n\t\tconst timeFrom = Util.formatTime(from.getHours(), from.getMinutes());\n\t\tconst timeTo = Util.formatTime(to.getHours(), to.getMinutes());\n\t\tconst timeField = entry.isFullDay()\n\t\t\t\t? Loc.getMessage('CAL_WIZARD_FULL_DAY')\n\t\t\t\t: timeFrom + ' - ' + timeTo;\n\n\t\tthis.newEventCard = Tag.render`\n\t\t\t<div class=\"calendar-sync__balloon --calendar ${entry.isFullDay() ? '--fullday-event' : ''}\">\n\t\t\t\t<div class=\"calendar-sync__content-text\">\n\t\t\t\t\t${dateFrom}\n\t\t\t\t\t<span class=\"calendar-date-year\">\n\t\t\t\t\t\t${BX.date.format('Y', fromTimestamp / 1000)}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__content-text\">${BX.date.format('l', fromTimestamp / 1000)}</div>\n\t\t\t\t<div class=\"calendar-sync__time-box\">\n\t\t\t\t\t<div class=\"calendar-sync__time\">\n\t\t\t\t\t\t<div class=\"calendar-sync__time-date\">${timeFrom}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__time-line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync__time-notification-box\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text\">${Text.encode(entry.getName())}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text\">${timeField}</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync__time\">\n\t\t\t\t\t\t<div class=\"calendar-sync__time-date\">${timeTo}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__time-line\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.newEventCard;\n\t}\n\n\thandleCloseWizard()\n\t{\n\t\tthis.slider = null;\n\n\t\tclearInterval(this.statusCarouselInterval);\n\n\t\tUtil.getBX().Event.EventEmitter.unsubscribe(\n\t\t\t'onPullEvent-calendar',\n\t\t\tthis.pullWizardEventHandler\n\t\t);\n\n\t\tthis.emit('onClose');\n\t}\n\n\tshowConfetti()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tconst bx = Util.getBX();\n\t\t\tbx.UI.Confetti.fire({\n\t\t\t\tparticleCount: 240,\n\t\t\t\tspread: 170,\n\t\t\t\torigin: { y: 0.3, x: 0.9 },\n\t\t\t\tzIndex: (bx.SidePanel.Instance.getTopSlider().getZindex() + 1)\n\t\t\t});\n\t\t}, this.CONFETTI_DELAY);\n\t}\n\n\tgetLogoIconClass()\n\t{\n\t\treturn this.logoIconClass;\n\t}\n\n\tgetSlider()\n\t{\n\t\treturn this.slider;\n\t}\n\n\tsetErrorState()\n\t{\n\t\tthis.errorStatus = true;\n\t\tthis.showErrorWrapper();\n\t\tthis.hideInfoStatusWrapper();\n\t\tthis.hideSyncStagesWrapper();\n\t\tthis.showButtonWrapper();\n\t\tDom.addClass(this.syncTitleWrapper, '--error');\n\t\tif (Type.isElementNode(this.activeStatusNode))\n\t\t{\n\t\t\tthis.activeStatusNode.innerHTML = Text.encode(Loc.getMessage('CAL_STATUS_SYNC_ERROR').toUpperCase())\n\t\t}\n\n\t\tconst closeButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"close_button\"]');\n\t\tif (Type.isElementNode(closeButton))\n\t\t{\n\t\t\tcloseButton.style.display = '';\n\t\t\tEvent.bind(closeButton, 'click', () => {\n\t\t\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t\t\t{\n\t\t\t\t\tif (['calendar:sync-slider', 'calendar:section-slider', this.SLIDER_NAME].includes(slider.getUrl()))\n\t\t\t\t\t{\n\t\t\t\t\t\tslider.close();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tBX.reload();\n\t\t\t});\n\t\t}\n\n\t\tconst continueButton = this.buttonWrapper.querySelector('.ui-btn[data-role=\"continue_btn\"]');\n\t\tif (Type.isElementNode(continueButton))\n\t\t{\n\t\t\tcontinueButton.style.display = 'none';\n\t\t}\n\t}\n}\n","// @flow\n'use strict';\n\nimport 'ui.tilegrid';\nimport 'ui.forms';\nimport { Dom, Loc, Tag, Type, Event} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nexport default class SyncStageUnit\n{\n\tconstructor(options)\n\t{\n\t\tthis.name = options.name || '';\n\t\tthis.title = options.title || '';\n\t\tthis.doneStatus = false;\n\t}\n\n\trenderTo(outerWrapper)\n\t{\n\t\tif (Type.isElementNode(outerWrapper))\n\t\t{\n\t\t\touterWrapper.appendChild(this.getContent());\n\t\t}\n\n\t\tEventEmitter.emit('BX.Calendar.Sync.Interface.SyncStageUnit:onRenderDone');\n\t}\n\n\tgetContent()\n\t{\n\t\tthis.contentNode = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --space-bottom-xl\">\n\t\t\t\t<div class=\"calendar-sync__content-text --icon-check --disabled\">${this.title}</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.contentNode;\n\t}\n\n\tsetDone()\n\t{\n\t\tthis.doneStatus = true;\n\t\tDom.removeClass(this.contentNode?.querySelector('.--icon-check'), '--disabled');\n\t}\n\n\tsetUndone()\n\t{\n\t\tthis.doneStatus = false;\n\t\tDom.addClass(this.contentNode?.querySelector('.--icon-check'), '--disabled');\n\t}\n}\n","// @flow\n\n'use strict';\n\nimport { Loc, Tag, Event } from 'main.core';\nimport SyncWizard from './syncwizard';\nimport SyncStageUnit from './syncstageunit';\nimport { Util } from 'calendar.util';\n\nexport default class GoogleSyncWizard extends SyncWizard\n{\n\tTYPE = 'google';\n\tSLIDER_NAME = 'calendar:sync-wizard-google';\n\tSTAGE_1_CODE = 'google-to-b24';\n\tSTAGE_2_CODE = 'b24-to-google';\n\tSTAGE_3_CODE = 'b24-events-to-google';\n\tGOOGLE_ON_MOBILE_HELPDESK = 15_456_338;\n\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.GoogleSyncWizard');\n\t\tthis.setAccountName(Loc.getMessage('CALENDAR_TITLE_GOOGLE'));\n\t\tthis.setSyncStages();\n\t\tthis.logoIconClass = '--google';\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\tlet link = '';\n\t\tthis.helpLinkWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync__content-block --align-center --space-bottom\" style=\"display: none;\">\n\t\t\t\t${link = Tag.render`<a href=\"#\" class=\"calendar-sync__content-link\">\n\t\t\t\t\t${Loc.getMessage('CAL_SYNC_NO_GOOGLE_ON_PHONE')}\n\t\t\t\t</a>`}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(link, 'click', () => {\n\t\t\tconst helper = Util.getBX().Helper;\n\t\t\tif (helper)\n\t\t\t{\n\t\t\t\thelper.show(`redirect=detail&code=${this.GOOGLE_ON_MOBILE_HELPDESK}`);\n\t\t\t}\n\t\t});\n\n\t\treturn this.helpLinkWrapper;\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --progress\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-progress\">${Loc.getMessage('CAL_SYNC_LETS_CHECK')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-progress\">${Loc.getMessage('CAL_SYNC_CREATE_EVENT_GOOGLE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_ADDED_GOOGLE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_YOULL_SEE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon--icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getSkeletonWrapper()}\n\t\t\t\t${this.getNewEventCardWrapper()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_1_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_GOOGLE_1'),\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_2_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_GOOGLE_2'),\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_3_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_GOOGLE_3'),\n\t\t\t}),\n\t\t];\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tsuper.updateState(stateData);\n\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tif (\n\t\t\t\tstateData.stage === 'connection_created'\n\t\t\t\t&& stage.name === this.STAGE_1_CODE\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tstateData.stage === 'import_finished'\n\t\t\t\t&& (stage.name === this.STAGE_1_CODE || stage.name === this.STAGE_2_CODE)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === 'export_finished')\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t\tif (stage.name === this.STAGE_3_CODE)\n\t\t\t\t{\n\t\t\t\t\tif (this.mode === 'reconnecting')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.handleCloseWizard();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setActiveStatusFinished();\n\t\t\t\t\t\tthis.showButtonWrapper();\n\t\t\t\t\t\tthis.showInfoStatusWrapper();\n\t\t\t\t\t}\n\t\t\t\t\tthis.showConfetti();\n\n\t\t\t\t\tthis.emit('onConnectionCreated');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn Loc.getMessage('CAL_SYNC_NEW_EVENT_GOOGLE_TITLE');\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Event, Runtime } from 'main.core';\nimport { InterfaceTemplate } from \"./interfacetemplate\";\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { Util } from 'calendar.util';\nimport GoogleSyncWizard from \"../syncwizard/googlesyncwizard\"\n\nexport default class GoogleTemplate extends InterfaceTemplate\n{\n\tHANDLE_CONNECTION_DELAY = 500;\n\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_GOOGLE\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_GOOGLE_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_GOOGLE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_GOOGLE_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_GOOGLE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-google',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/google.svg',\n\t\t\ticonLogoClass: '--google',\n\t\t\tcolor: '#387ced',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t\tthis.sectionList = [];\n\n\t\tthis.handleSuccessConnectionDebounce = Runtime.debounce(this.handleSuccessConnection, this.HANDLE_CONNECTION_DELAY, this);\n\t}\n\n\tcreateConnection()\n\t{\n\t\tconst syncLink = this.provider.getSyncLink();\n\t\tBX.util.popup(syncLink, 500, 600);\n\n\t\tEvent.bind(window, 'hashchange', this.handleSuccessConnectionDebounce);\n\t\tEvent.bind(window, 'message', this.handleSuccessConnectionDebounce);\n\t}\n\n\thandleSuccessConnection(event)\n\t{\n\t\tif (\n\t\t\twindow.location.hash === '#googleAuthSuccess'\n\t\t\t|| (event.data.title === 'googleAuthSuccess')\n\t\t)\n\t\t{\n\t\t\tUtil.removeHash();\n\t\t\tthis.provider.setWizardSyncMode(true);\n\n\t\t\tthis.provider.saveConnection();\n\t\t\tthis.openSyncWizard();\n\t\t\tthis.provider.setStatus(this.provider.STATUS_SYNCHRONIZING);\n\t\t\tthis.provider.getInterfaceUnit().setSyncStatus(this.provider.STATUS_SYNCHRONIZING);\n\t\t\tthis.provider.getInterfaceUnit().refreshButton();\n\n\t\t\tif (this.provider.isReconnecting())\n\t\t\t{\n\t\t\t\tthis.provider.emit('onReconnecting');\n\t\t\t}\n\n\t\t\tEvent.unbind(window, 'hashchange', this.handleSuccessConnectionDebounce);\n\t\t\tEvent.unbind(window, 'message', this.handleSuccessConnectionDebounce);\n\t\t}\n\t}\n\n\tgetSectionsForGoogle()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAllSectionsForGoogle', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: this.connection.addParams.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.sectionList = response.data;\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t\t})\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\t\tthis.runUpdateInfo();\n\t\tthis.showUpdateSectionListNotification();\n\t}\n\n\tshowAlertPopup()\n\t{\n\t\tconst messageBox = new MessageBox({\n\t\t\tclassName: this.id,\n\t\t\tmessage: Loc.getMessage('GOOGLE_IS_NOT_CALDAV_SETTINGS_WARNING_MESSAGE'),\n\t\t\twidth: 500,\n\t\t\toffsetLeft: 60,\n\t\t\toffsetTop: 5,\n\t\t\tpadding: 7,\n\t\t\tonOk: () => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tokCaption: 'OK',\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndexAbsolute: 4020,\n\t\t\t\tautoHide: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t},\n\t\t});\n\t\tmessageBox.show();\n\t}\n\n\thandleConnectButton()\n\t{\n\t\tif (this.provider.hasSetSyncGoogleSettings())\n\t\t{\n\t\t\tthis.createConnection();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.provider.endReconnecting();\n\t\t\tthis.showAlertPopup();\n\t\t}\n\t}\n\n\topenSyncWizard()\n\t{\n\t\tif (!this.wizard)\n\t\t{\n\t\t\tconst mode = this.provider.isStartedReconnecting ? 'reconnect' : 'default';\n\t\t\tthis.wizard = new GoogleSyncWizard({ mode });\n\t\t\tthis.wizard.openSlider();\n\t\t\tthis.provider.setActiveWizard(this.wizard);\n\t\t}\n\t}\n\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tthis.deactivateConnection(id);\n\t}\n}\n","// @flow\n'use strict';\nimport { Tag, Loc, Dom, Event } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { Popup } from 'main.popup';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nexport default class IcloudAuthDialog extends EventEmitter\n{\n\tzIndex = 3100;\n\tDOM = {};\n\tappPasswordTemplate = 'xxxx-xxxx-xxxx-xxxx';\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.type = options.type;\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Icloud');\n\t\tthis.keyHandler = this.handleKeyPress.bind(this);\n\t\tthis.checkOutsideClickClose = this.checkOutsideClickClose.bind(this);\n\t\tthis.outsideMouseDownClose = this.outsideMouseDownClose.bind(this);\n\t\tthis.initAlertBlock();\n\t}\n\n\tshow()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: 'calendar-sync__auth-popup calendar-sync__scope',\n\t\t\ttitleBar: Loc.getMessage('CAL_ICLOUD_AUTH_TITLE'),\n\t\t\tdraggable: true,\n\t\t\tcontent: this.getContainer(),\n\t\t\twidth: 475,\n\t\t\tanimation: 'fading-slide',\n\t\t\tzIndexAbsolute: this.zIndex,\n\t\t\tcacheable: false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\tcontentBackground: \"#fff\",\n\t\t\toverlay: {opacity: 15},\n\t\t\tlightShadow: true,\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('CAL_ICLOUD_CONNECT_BUTTON'),\n\t\t\t\t\tclassName: `ui-btn ui-btn-md ui-btn-success ui-btn-round`,\n\t\t\t\t\tevents : {click : this.authorize.bind(this)},\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-light-border ui-btn-round',\n\t\t\t\t\tevents : {click : this.close.bind(this)}\n\t\t\t\t})\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonPopupClose: this.close.bind(this)\n\t\t\t},\n\t\t});\n\t\tthis.popup.show();\n\t\t\n\t\tEvent.bind(document, 'keydown', this.keyHandler);\n\t\tEvent.bind(document, 'mouseup', this.checkOutsideClickClose);\n\t\tEvent.bind(document, 'mousedown', this.outsideMouseDownClose);\n\t}\n\t\n\tauthorize()\n\t{\n\t\tif (this.isFormDataValid())\n\t\t{\n\t\t\tconst saveBtn = this.popup.getButtons()[0];\n\t\t\tsaveBtn.setClocking(true);\n\t\t\tsaveBtn.setDisabled(true);\n\t\t\tconst cancelButton = this.popup.getButtons()[1];\n\t\t\tcancelButton.setDisabled(true);\n\t\t\tif (this.DOM.container.contains(this.DOM.alertBlock))\n\t\t\t{\n\t\t\t\tDom.remove(this.DOM.alertBlock);\n\t\t\t}\n\n\t\t\tthis.emit('onSubmit', new BaseEvent({\n\t\t\t\tdata: {\n\t\t\t\t\tappleId: this.DOM.appleIdInput.value.toString().trim(),\n\t\t\t\t\tappPassword: this.DOM.appPasswordInput.value.toString().trim()\n\t\t\t\t}\n\t\t\t}));\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.highlightInvalidFormData();\n\t\t}\n\t}\n\n\tisFormDataValid()\n\t{\n\t\treturn this.DOM.appleIdInput.value.toString().trim() !== ''\n\t\t\t&& this.DOM.appPasswordInput.value.toString().trim() !== ''\n\t}\n\n\thighlightInvalidFormData()\n\t{\n\t\tconst saveBtn = this.popup.getButtons()[0];\n\t\tsaveBtn.setClocking(false);\n\t\tsaveBtn.setDisabled(false);\n\t\tconst cancelButton = this.popup.getButtons()[1];\n\t\tcancelButton.setDisabled(false);\n\n\t\tif (this.DOM.appleIdInput.value.toString().trim() === '')\n\t\t{\n\t\t\tthis.highlightInvalidAppleIdInput();\n\t\t}\n\t\tif (this.DOM.appPasswordInput.value.toString().trim() === '')\n\t\t{\n\t\t\tthis.highlightInvalidPasswordInput();\n\t\t}\n\t}\n\n\thighlightInvalidAppleIdInput()\n\t{\n\t\tDom.addClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\n\t\tconst clearInvalidation = () => {\n\t\t\tDom.removeClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t\tEvent.unbind(this.DOM.appleIdInput, 'change', clearInvalidation);\n\t\t\tEvent.unbind(this.DOM.appleIdInput, 'keyup', clearInvalidation);\n\t\t};\n\t\tEvent.bind(this.DOM.appleIdInput, 'change', clearInvalidation);\n\t\tEvent.bind(this.DOM.appleIdInput, 'keyup', clearInvalidation);\n\t}\n\n\thighlightInvalidPasswordInput()\n\t{\n\t\tDom.addClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\n\t\tconst clearInvalidation = () => {\n\t\t\tDom.removeClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t\tEvent.unbind(this.DOM.appPasswordInput, 'change', clearInvalidation);\n\t\t\tEvent.unbind(this.DOM.appPasswordInput, 'keyup', clearInvalidation);\n\t\t};\n\t\tEvent.bind(this.DOM.appPasswordInput, 'change', clearInvalidation);\n\t\tEvent.bind(this.DOM.appPasswordInput, 'keyup', clearInvalidation);\n\t\tthis.DOM.appPasswordInput.focus();\n\n\t}\n\t\n\tenableSaveButton()\n\t{\n\t\tconst saveBtn = this.popup.getButtons()[0];\n\t\tsaveBtn.setDisabled(false);\n\t\tconst cancelButton = this.popup.getButtons()[1];\n\t\tcancelButton.setDisabled(false);\n\t}\n\n\tgetContainer()\n\t{\n\t\tthis.DOM.container = Tag.render `\n\t\t\t<div>\n\t\t\t\t${this.getAppleInfoBlock()}\n\t\t\t\t<div class=\"calendar-sync__auth-popup--row\" id=\"calendar-apple-id-block\">\n\t\t\t\t\t${this.getAppleIdTitle()}\n\t\t\t\t\t${this.getAppleIdInput()}\n\t\t\t\t\t${this.getAppleIdError()}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync__auth-popup--row\" id=\"calendar-apple-pass-block\">\n\t\t\t\t\t<div class=\"calendar-sync__auth-popup--label-block\">\n\t\t\t\t\t\t${this.getAppPasswordTitle()}\n\t\t\t\t\t\t${this.getLearnMoreButton()}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"ui-ctl ui-ctl-w100 ui-ctl-after-icon\">\n\t\t\t\t\t\t${this.getAppPasswordInput()}\n\t\t\t\t\t\t${this.getShowHidePasswordIcon()}\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.getAppPasswordError()}\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.DOM.container;\n\t}\n\n\tgetAppleInfoBlock()\n\t{\n\t\tif (!this.DOM.appleInfo)\n\t\t{\n\t\t\tthis.DOM.appleInfo = Tag.render`\n\t\t\t\t<div class=\"calendar-sync__auth-popup--info\">\n\t\t\t\t\t<div class=\"calendar-sync__auth-popup--logo-image --icloud\"></div>\n\t\t\t\t\t<div class=\"calendar-sync__auth-popup--logo-text\">${Loc.getMessage('CAL_ICLOUD_INFO_BLOCK')}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.DOM.appleInfo;\n\t}\n\t\n\tgetAppleIdTitle()\n\t{\n\t\tif (!this.DOM.appleIdTitle)\n\t\t{\n\t\t\tthis.DOM.appleIdTitle = Tag.render`\n\t\t\t<p class=\"calendar-sync__auth-popup--label-text\">\n\t\t\t\t${Loc.getMessage('CAL_ICLOUD_APPLE_ID_PLACEHOLDER')}\n\t\t\t</p>\n\t\t\t`;\n\t\t}\n\t\t\n\t\treturn this.DOM.appleIdTitle;\n\t}\n\t\n\tgetAppPasswordTitle()\n\t{\n\t\tif (!this.DOM.appPasswordTitle)\n\t\t{\n\t\t\tthis.DOM.appPasswordTitle = Tag.render`\n\t\t\t\t<p class=\"calendar-sync__auth-popup--label-text\">\n\t\t\t\t\t${Loc.getMessage('CAL_ICLOUD_PASS_PLACEHOLDER')}\n\t\t\t\t</p>\n\t\t\t`;\n\t\t}\n\t\t\n\t\treturn this.DOM.appPasswordTitle;\n\t}\n\t\n\tgetAppleIdError()\n\t{\n\t\tif (!this.DOM.appleIdError)\n\t\t{\n\t\t\tthis.DOM.appleIdError = Tag.render`\n\t\t\t\t<div class=\"calendar-sync__auth-popup--label-text --error\">\n\t\t\t\t\t${Loc.getMessage('CAL_ICLOUD_APPLE_ID_ERROR')}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t\t\n\t\treturn this.DOM.appleIdError;\n\t}\n\t\n\tgetAppPasswordError()\n\t{\n\t\tif (!this.DOM.appPasswordError)\n\t\t{\n\t\t\tthis.DOM.appPasswordError = Tag.render`\n\t\t\t\t<div class=\"calendar-sync__auth-popup--label-text --error\">\n\t\t\t\t\t${Loc.getMessage(\n\t\t\t\t\t\t'CAL_ICLOUD_APP_PASSWORD_ERROR',\n\t\t\t\t\t{\n\t\t\t\t\t\t\t'#LINK_START#': '<a href=\"#\" data-role=\"open-helpdesk-password\">',\n\t\t\t\t\t\t\t'#LINK_END#': '</a>',\n\t\t\t\t\t\t}\n\t\t\t\t\t)}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tconst link = this.DOM.appPasswordError.querySelector('a[data-role=\"open-helpdesk-password\"]');\n\t\t\tif (link)\n\t\t\t{\n\t\t\t\tEvent.bind(link, 'click', this.openHelpDesk.bind(this));\n\t\t\t}\n\t\t}\n\n\t\treturn this.DOM.appPasswordError;\n\t}\n\n\tgetAppleIdInput()\n\t{\n\t\tif (!this.DOM.appleIdInput)\n\t\t{\n\t\t\tthis.DOM.appleIdInput = Tag.render `\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder=\"${Loc.getMessage('CAL_ICLOUD_AUTH_EMAIL_PLACEHOLDER')}\"\n\t\t\t\t\tclass=\"calendar-field-string ui-ctl-element\"\n\t\t\t\t/>\n\t\t\t`;\n\t\t\tthis.DOM.appleIdInput.onfocus = () => {\n\t\t\t\tif (Dom.hasClass(this.DOM.appleIdInput, 'calendar-field-string-error'))\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t\t\t\tDom.removeClass(this.DOM.appleIdError, 'show');\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tthis.DOM.appleIdInput.onblur = () => {\n\t\t\t\tif (\n\t\t\t\t\t!this.validateAppleIdInput()\n\t\t\t\t\t&& !Dom.hasClass(this.DOM.appleIdInput, 'calendar-field-string-error')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t\t\t\tDom.addClass(this.DOM.appleIdError, 'show');\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\treturn this.DOM.appleIdInput;\n\t}\n\n\tgetAppPasswordInput()\n\t{\n\t\tif (!this.DOM.appPasswordInput)\n\t\t{\n\t\t\tthis.DOM.appPasswordInput = Tag.render `\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder=\"${Loc.getMessage('CAL_ICLOUD_AUTH_APPPASS_PLACEHOLDER')}\"\n\t\t\t\t\tclass=\"calendar-field-string ui-ctl-element\"\n\t\t\t\t\trequired maxlength=\"19\"\n\t\t\t\t/>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.appPasswordInput, 'input', this.validateAppPasswordInput.bind(this));\n\t\t}\n\n\t\treturn this.DOM.appPasswordInput;\n\t}\n\t\n\tgetShowHidePasswordIcon()\n\t{\n\t\tif (!this.DOM.showHidePasswordIcon)\n\t\t{\n\t\t\tthis.DOM.showHidePasswordIcon = Tag.render`\n\t\t\t\t<div class=\"ui-ctl-after calendar-sync__auth-popup--icon-adjust-password\"></div>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.showHidePasswordIcon, 'click', this.switchPasswordVisibility.bind(this));\n\t\t}\n\t\t\n\t\treturn this.DOM.showHidePasswordIcon;\n\t}\n\t\n\tgetLearnMoreButton()\n\t{\n\t\tif (!this.DOM.learnMoreButton)\n\t\t{\n\t\t\tthis.DOM.learnMoreButton = Tag.render`\n\t\t\t\t<span class=\"calendar-sync__auth-popup--learn-more\">${Loc.getMessage('CAL_ICLOUD_AUTH_APPPASS_ABOUT')}</span>\n\t\t\t`;\n\t\t\tEvent.bind(this.DOM.learnMoreButton, 'click', this.openHelpDesk.bind(this));\n\t\t}\n\t\t\n\t\treturn this.DOM.learnMoreButton;\n\t}\n\n\tinitAlertBlock()\n\t{\n\t\tif (!this.DOM.alertBlock)\n\t\t{\n\t\t\tthis.DOM.alertBlock = Tag.render`\n\t\t\t\t<div class=\"ui-alert ui-alert-danger calendar-sync__auth-error\">\n\t                <span class=\"ui-alert-message\">${Loc.getMessage('CAL_ICLOUD_AUTH_ERROR')}</span>\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\t}\n\n\tshowErrorAuthorizationAlert()\n\t{\n\t\tthis.highlightInvalidAppleIdInput();\n\t\tthis.highlightInvalidPasswordInput();\n\t\tthis.enableSaveButton();\n\t\tif (!this.DOM.container.contains(this.DOM.alertBlock))\n\t\t{\n\t\t\tDom.append(this.DOM.alertBlock, this.DOM.container);\n\t\t}\n\t}\n\t\n\tvalidateAppleIdInput()\n\t{\n\t\tconst emailRegExp = /^[a-zA-Z\\d.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z\\d-]+(?:\\.[a-zA-Z\\d-]+)*$/;\n\t\tconst input = this.DOM.appleIdInput.value.toString().trim();\n\t\tif (input === '')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn emailRegExp.test(input);\n\t}\n\t\n\tvalidateAppPasswordInput()\n\t{\n\t\tconst appPasswordRegExp = /^[a-z]{4}-[a-z]{4}-[a-z]{4}-[a-z]{4}$/;\n\t\tconst input = this.completeWithTemplate(this.DOM.appPasswordInput.value.toString().trim());\n\t\tif (appPasswordRegExp.test(input))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t\tDom.removeClass(this.DOM.appPasswordError, 'show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t\tDom.addClass(this.DOM.appPasswordError, 'show');\n\t\t}\n\t}\n\t\n\tswitchPasswordVisibility()\n\t{\n\t\tif (Dom.hasClass(this.DOM.showHidePasswordIcon, '--hide'))\n\t\t{\n\t\t\tthis.DOM.appPasswordInput.type = 'password';\n\t\t\tDom.removeClass(this.DOM.showHidePasswordIcon, '--hide');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.appPasswordInput.type = 'text';\n\t\t\tDom.addClass(this.DOM.showHidePasswordIcon, '--hide');\n\t\t}\n\t}\n\t\n\tclearForm()\n\t{\n\t\tthis.DOM.appPasswordInput.value = '';\n\t\tthis.DOM.appleIdInput.value = '';\n\t\tif (Dom.hasClass(this.DOM.appleIdInput, 'calendar-field-string-error'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appleIdInput, 'calendar-field-string-error');\n\t\t}\n\t\tif (Dom.hasClass(this.DOM.appPasswordInput, 'calendar-field-string-error'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appPasswordInput, 'calendar-field-string-error');\n\t\t}\n\t\tif (Dom.hasClass(this.DOM.appleIdError, 'show'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appleIdError, 'show');\n\t\t}\n\t\tif (Dom.hasClass(this.DOM.appPasswordError, 'show'))\n\t\t{\n\t\t\tDom.removeClass(this.DOM.appPasswordError, 'show');\n\t\t}\n\t}\n\t\n\tcompleteWithTemplate(password)\n\t{\n\t\tconst addition = this.appPasswordTemplate.slice(password.length, this.appPasswordTemplate.length);\n\t\tpassword += addition;\n\t\treturn password;\n\t}\n\t\n\topenHelpDesk()\n\t{\n\t\tconst helpDeskCode = '15426356';\n\t\ttop.BX.Helper.show('redirect=detail&code=' + helpDeskCode);\n\t}\n\t\n\thandleKeyPress(e)\n\t{\n\t\tif (e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.authorize();\n\t\t}\n\t\telse if (e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t}\n\t\n\tcheckOutsideClickClose(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tthis.outsideMouseUp = !target.closest('div.popup-window');\n\t\tif (this.outsideMouseUp && this.outsideMouseDown && this.checkTopSlider())\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t}\n\t\n\toutsideMouseDownClose(e)\n\t{\n\t\tlet target = e.target || e.srcElement;\n\t\tthis.outsideMouseDown = !target.closest('div.popup-window');\n\t}\n\t\n\tclose()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\t\tEvent.unbind(document, 'keydown', this.keyHandler);\n\t\tEvent.unbind(document, 'mouseup', this.checkOutsideClickClose);\n\t\tEvent.unbind(document, 'mousedown', this.outsideMouseDownClose);\n\t\tthis.clearForm();\n\t}\n\t\n\tcheckTopSlider()\n\t{\n\t\treturn !Util.getBX().SidePanel.Instance.getTopSlider();\n\t}\n}\n","// @flow\n\n'use strict';\n\nimport { Loc, Tag } from 'main.core';\nimport SyncWizard from './syncwizard';\nimport SyncStageUnit from './syncstageunit';\n\nexport default class IcloudSyncWizard extends SyncWizard\n{\n\tTYPE = 'icloud';\n\tSLIDER_NAME = 'calendar:sync-wizard-icloud';\n\tSTAGE_1_CODE = 'icloud-to-b24';\n\tSTAGE_2_CODE = 'b24-events-to-icloud';\n\tSTAGE_3_CODE = 'b24-to-icloud';\n\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.IcloudSyncWizard');\n\t\tthis.setAccountName(Loc.getMessage('CALENDAR_TITLE_ICLOUD'));\n\t\tthis.setSyncStages();\n\t\tthis.logoIconClass = '--icloud';\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\treturn '';\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --progress\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-progress\">${Loc.getMessage('CAL_SYNC_LETS_CHECK')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-progress\">${Loc.getMessage('CAL_SYNC_CREATE_EVENT_ICLOUD')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_ADDED_FROM_ICLOUD')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_YOULL_SEE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon--icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getSkeletonWrapper()}\n\t\t\t\t${this.getNewEventCardWrapper()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_1_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_ICLOUD_1'),\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_2_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_ICLOUD_2'),\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_3_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_ICLOUD_3'),\n\t\t\t}),\n\t\t];\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tsuper.updateState(stateData);\n\n\t\tthis.getSyncStages().forEach(stage => {\n\t\t\tif (\n\t\t\t\tstateData.stage === 'connection_created'\n\t\t\t\t&& stage.name === this.STAGE_1_CODE\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tstateData.stage === 'import_finished'\n\t\t\t\t&& (stage.name === this.STAGE_1_CODE || stage.name === this.STAGE_2_CODE)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === 'export_finished')\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t\tif (stage.name === this.STAGE_3_CODE)\n\t\t\t\t{\n\t\t\t\t\tif (this.mode === 'reconnecting')\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.handleCloseWizard();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setActiveStatusFinished();\n\t\t\t\t\t\tthis.showButtonWrapper();\n\t\t\t\t\t\tthis.showInfoStatusWrapper();\n\t\t\t\t\t}\n\t\t\t\t\tthis.showConfetti();\n\n\t\t\t\t\tthis.emit('onConnectionCreated');\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn Loc.getMessage('CAL_SYNC_NEW_EVENT_ICLOUD_TITLE');\n\t}\n}\n","// @flow\n'use strict';\nimport { Dom, Loc, Tag } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { Popup } from 'main.popup';\n\nexport default class WarnSyncIcloudDialog\n{\n\tzIndex = 3100;\n\tDOM = {};\n\t\n\tconstructor(options = {})\n\t{\n\t\tthis.authDialog = options.authDialog;\n\t}\n\t\n\tshow()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: 'calendar-sync__auth-popup calendar-sync__scope',\n\t\t\ttitleBar: Loc.getMessage('CAL_ICLOUD_ALERT_OTHER_APPLE_SYNC_TITLE'),\n\t\t\twidth: 500,\n\t\t\tdraggable: true,\n\t\t\tcontent: this.getContainer(),\n\t\t\tcacheable: false,\n\t\t\tcloseByEsc: true,\n\t\t\tcloseIcon: true,\n\t\t\tcontentBackground: \"#fff\",\n\t\t\toverlay: { opacity: 15 },\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('CAL_ICLOUD_ALERT_OTHER_APPLE_SYNC_LEARN_MORE'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-primary',\n\t\t\t\t\tevents: { click: this.openHelpDesk.bind(this) }\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext: Loc.getMessage('CAL_BUTTON_CONTINUE'),\n\t\t\t\t\tclassName: 'ui-btn ui-btn-md ui-btn-light',\n\t\t\t\t\tevents: { click: this.openAuthDialog.bind(this) }\n\t\t\t\t}),\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tonPopupClose: this.close.bind(this)\n\t\t\t},\n\t\t});\n\t\t\n\t\tthis.popup.show();\n\t}\n\t\n\tgetContainer()\n\t{\n\t\tthis.DOM.container = Tag.render`\n\t\t\t<div>\n\t\t\t\t${this.getAlertInformation()}\n\t\t\t</div>\n\t\t`;\n\t\t\n\t\treturn this.DOM.container;\n\t}\n\t\n\tgetAlertInformation()\n\t{\n\t\tthis.DOM.alertBlock = new BX.UI.Alert({\n\t\t\ttext: Loc.getMessage('CAL_ICLOUD_ALERT_OTHER_APPLE_SYNC_INFO'),\n\t\t\tcolor: BX.UI.Alert.Color.WARNING,\n\t\t\ticon: BX.UI.Alert.Icon.INFO\n\t\t});\n\t\t\n\t\tconst container = this.DOM.alertBlock.getContainer();\n\t\tconst text = container.querySelector('.ui-alert-message');\n\t\tDom.addClass(text, 'calendar-sync__alert-popup--text')\n\t\t\n\t\treturn container;\n\t}\n\t\n\topenHelpDesk()\n\t{\n\t\tconst helpDeskCode = '16020988';\n\t\ttop.BX.Helper.show('redirect=detail&code=' + helpDeskCode);\n\t}\n\t\n\tdisableConnection()\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.disableIphoneOrMacConnection').then(() => {\n\t\t\tthis.authDialog.show();\n\t\t\tthis.close();\n\t\t\tUtil.setIphoneConnectionStatus(false);\n\t\t\tUtil.setMacConnectionStatus(false);\n\t\t})\n\t}\n\t\n\topenAuthDialog()\n\t{\n\t\tthis.authDialog.show();\n\t\tthis.close();\n\t}\n\t\n\tclose()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.destroy();\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport { Loc } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { InterfaceTemplate } from './interfacetemplate';\nimport IcloudAuthDialog from '../controls/icloudauthdialog';\nimport IcloudSyncWizard from '../syncwizard/icloudsyncwizard';\nimport { EventEmitter } from 'main.core.events';\nimport WarnSyncIcloudDialog from '../controls/warnsynciclouddialog';\nimport GoogleSyncWizard from '../syncwizard/googlesyncwizard';\n\nexport default class IcloudTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_ICLOUD\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_ICLOUD_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_ICLOUD_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_ICLOUD_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-icloud',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/icloud.svg',\n\t\t\ticonLogoClass: '--icloud',\n\t\t\tcolor: '#95a0af',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t\tthis.sectionList = [];\n\t}\n\n\tcreateConnection(data)\n\t{\n\t\tthis.provider.setWizardSyncMode(true);\n\t\tthis.provider.getInterfaceUnit().setSyncStatus(this.provider.STATUS_SYNCHRONIZING);\n\n\t\tBX.ajax.runAction('calendar.api.syncajax.createIcloudConnection', {\n\t\t\tdata: {\n\t\t\t\tappleId: data.appleId,\n\t\t\t\tappPassword: data.appPassword,\n\t\t\t},\n\t\t}).then(\n\t\t\t(response) => {\n\t\t\t\tconst result = response.data;\n\t\t\t\t\n\t\t\t\tif (result.status === 'success' && result.connectionId)\n\t\t\t\t{\n\t\t\t\t\tthis.openSyncWizard(data.appleId);\n\t\t\t\t\tvoid this.syncCalendarsWithIcloud(result.connectionId);\n\t\t\t\t}\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.authDialog.showErrorAuthorizationAlert();\n\t\t\t}\n\t\t);\n\t}\n\n\tsyncCalendarsWithIcloud(connectionId)\n\t{\n\t\tthis.authDialog.close();\n\t\t\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.syncIcloudConnection', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: connectionId,\n\t\t\t\t}\n\t\t\t}).then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_SUCCESS);\n\t\t\t\t\tthis.provider.getInterfaceUnit().setSyncStatus(this.provider.STATUS_SUCCESS);\n\t\t\t\t\tif (connectionId)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.provider.getConnection().setId(connectionId);\n\t\t\t\t\t\tthis.provider.getConnection().setStatus(true);\n\t\t\t\t\t\tthis.provider.getConnection().setConnected(true);\n\t\t\t\t\t\tthis.provider.getConnection().setSyncDate(new Date());\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.provider.setStatus(this.provider.STATUS_FAILED);\n\t\t\t\t\tthis.provider.setWizardState(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstatus: this.provider.ERROR_CODE,\n\t\t\t\t\t\t\tvendorName: this.provider.type,\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tresolve(response.errors);\n\t\t\t\t});\n\t\t})\n\t}\n\n\tgetSectionsForIcloud()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAllSectionsForIcloud', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: this.connection.addParams.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tthis.sectionList = response.data;\n\t\t\t\t\tresolve(response.data);\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tresolve(response.errors);\n\t\t\t\t}\n\t\t\t)\n\t\t})\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\t\tthis.runUpdateInfo();\n\t\tthis.showUpdateSectionListNotification();\n\t}\n\n\thandleConnectButton()\n\t{\n\t\tthis.initPopup();\n\t\tif (Util.isIphoneConnected() || Util.isMacConnected())\n\t\t{\n\t\t\tthis.alertSyncPopup.show();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.authDialog.show();\n\t\t}\n\t}\n\t\n\tinitPopup()\n\t{\n\t\tif (!this.authDialog)\n\t\t{\n\t\t\tthis.authDialog = new IcloudAuthDialog();\n\t\t\t\n\t\t\tEventEmitter.unsubscribeAll('BX.Calendar.Sync.Icloud:onSubmit');\n\t\t\tEventEmitter.subscribe('BX.Calendar.Sync.Icloud:onSubmit', (e) => {\n\t\t\t\tthis.createConnection(e.data);\n\t\t\t})\n\t\t}\n\t\t\n\t\tif (!this.alertSyncPopup)\n\t\t{\n\t\t\tthis.alertSyncPopup = new WarnSyncIcloudDialog({\n\t\t\t\tauthDialog: this.authDialog\n\t\t\t})\n\t\t}\n\t}\n\n\topenSyncWizard(appleId)\n\t{\n\t\tthis.provider.setWizardSyncMode(true);\n\t\tconst mode = this.provider.isStartedReconnecting ? 'reconnect' : 'default';\n\t\tthis.wizard = new IcloudSyncWizard({ mode });\n\t\tthis.wizard.openSlider();\n\t\tthis.provider.setActiveWizard(this.wizard);\n\n\t\tEventEmitter.subscribeOnce('BX.Calendar.Sync.Interface.SyncStageUnit:onRenderDone', () => {\n\t\t\tthis.wizard.updateState({\n\t\t\t\tstage: 'connection_created',\n\t\t\t\tvendorName: 'icloud',\n\t\t\t\taccountName: appleId,\n\t\t\t})\n\t\t})\n\t}\n\t\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tthis.deactivateConnection(id);\n\t}\n}\n","// @flow\n\n'use strict';\n\nimport { Loc, Tag } from 'main.core';\nimport SyncWizard from './syncwizard';\nimport SyncStageUnit from './syncstageunit';\n\nexport default class Office365SyncWizard extends SyncWizard\n{\n\tTYPE = 'office365';\n\tSLIDER_NAME = 'calendar:sync-wizard-office365';\n\tSTAGE_1_CODE = 'office365-to-b24';\n\tSTAGE_2_CODE = 'sections_sync_finished';\n\tSTAGE_3_CODE = 'events_sync_finished';\n\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.Office365SyncWizard');\n\t\tthis.setAccountName(Loc.getMessage('CALENDAR_TITLE_OFFICE365'));\n\t\tthis.setSyncStages();\n\t\tthis.logoIconClass = '--office365';\n\t}\n\n\tgetHelpLinkWrapper()\n\t{\n\t\treturn '';\n\t}\n\n\tgetFinalCheckWrapper()\n\t{\n\t\tthis.finalCheckWrapper = Tag.render`\n\t\t\t<div style=\"display: none;\">\n\t\t\t\t<div class=\"calendar-sync__content-block --space-bottom\">\n\t\t\t\t\t<div class=\"calendar-sync__balloon --progress\">\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-progress\">${Loc.getMessage('CAL_SYNC_LETS_CHECK')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-progress\">${Loc.getMessage('CAL_SYNC_CREATE_EVENT_OFFICE365')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-title --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_ADDED_FROM_OFFICE365')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__content-text calendar-sync__content-subtitle --show-for-done\">${Loc.getMessage('CAL_SYNC_NEW_EVENT_YOULL_SEE')}</div>\n\t\t\t\t\t\t<div class=\"calendar-sync__balloon--icon\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t${this.getSkeletonWrapper()}\n\t\t\t\t${this.getNewEventCardWrapper()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.finalCheckWrapper;\n\t}\n\n\tsetSyncStages()\n\t{\n\t\tthis.syncStagesList = [\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_1_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_OFFICE365_1'),\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_2_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_OFFICE365_2'),\n\t\t\t}),\n\t\t\tnew SyncStageUnit({\n\t\t\t\tname: this.STAGE_3_CODE,\n\t\t\t\ttitle: Loc.getMessage('CAL_SYNC_STAGE_OFFICE365_3'),\n\t\t\t}),\n\t\t];\n\t}\n\n\tupdateState(stateData)\n\t{\n\t\tsuper.updateState(stateData);\n\n\t\tthis.getSyncStages().forEach((stage) => {\n\t\t\tif (\n\t\t\t\tstateData.stage === 'connection_created'\n\t\t\t\t&& stage.name === this.STAGE_1_CODE\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tstateData.stage === 'import_finished'\n\t\t\t\t&& (stage.name === this.STAGE_1_CODE || stage.name === this.STAGE_2_CODE)\n\t\t\t)\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t}\n\t\t\telse if (stateData.stage === 'export_finished')\n\t\t\t{\n\t\t\t\tstage.setDone();\n\t\t\t\tif (this.mode === 'reconnecting')\n\t\t\t\t{\n\t\t\t\t\tthis.handleCloseWizard();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.setActiveStatusFinished();\n\t\t\t\t\tthis.showButtonWrapper();\n\t\t\t\t\tthis.showInfoStatusWrapper();\n\t\t\t\t}\n\t\t\t\tthis.showConfetti();\n\n\t\t\t\tthis.emit('onConnectionCreated');\n\t\t\t}\n\t\t});\n\t}\n\n\tgetSkeletonTitle()\n\t{\n\t\treturn Loc.getMessage('CAL_SYNC_NEW_EVENT_OFFICE365_TITLE');\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Loc, Event, Runtime } from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport Office365SyncWizard from '../syncwizard/office365syncwizard';\nimport { Util } from 'calendar.util';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport GoogleSyncWizard from '../syncwizard/googlesyncwizard';\n\nexport default class Office365template extends InterfaceTemplate\n{\n\tHANDLE_CONNECTION_DELAY = 500;\n\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_OFFICE365\"),\n\t\t\thelpDeskCode: '6030429',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_OFFICE365_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_OFFICE365_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_OFFICE365_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_OFFICE365_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-office365',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/office365.svg',\n\t\t\ticonLogoClass: '--office365',\n\t\t\tcolor: '#fc1d1d',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\n\t\tthis.sectionStatusObject = {};\n\t\tthis.sectionList = [];\n\n\t\tthis.handleSuccessConnectionDebounce = Runtime.debounce(this.handleSuccessConnection, this.HANDLE_CONNECTION_DELAY, this)\n\t}\n\n\tcreateConnection()\n\t{\n\t\tconst syncLink = this.provider.getSyncLink();\n\t\tBX.util.popup(syncLink, 500, 600);\n\n\t\tEvent.bind(window, 'hashchange', this.handleSuccessConnectionDebounce);\n\t}\n\n\thandleSuccessConnection(event)\n\t{\n\t\tif (window.location.hash === '#office365AuthSuccess')\n\t\t{\n\t\t\tUtil.removeHash();\n\t\t\tthis.provider.setWizardSyncMode(true);\n\n\t\t\tthis.provider.saveConnection();\n\t\t\tthis.openSyncWizard();\n\t\t\tthis.provider.setStatus(this.provider.STATUS_SYNCHRONIZING);\n\t\t\tthis.provider.getInterfaceUnit().setSyncStatus(this.provider.STATUS_SYNCHRONIZING);\n\t\t\tthis.provider.getInterfaceUnit().refreshButton();\n\n\t\t\tif (this.provider.isReconnecting())\n\t\t\t{\n\t\t\t\tthis.provider.emit('onReconnecting');\n\t\t\t}\n\n\t\t\tEvent.unbind(window, 'hashchange', this.handleSuccessConnectionDebounce);\n\t\t}\n\t}\n\n\tonClickCheckSection(event)\n\t{\n\t\tthis.sectionStatusObject[event.target.value] = event.target.checked;\n\t\tthis.runUpdateInfo();\n\t\tthis.showUpdateSectionListNotification();\n\t}\n\n\thandleConnectButton()\n\t{\n\t\tif (this.provider.hasSetSyncOffice365Settings())\n\t\t{\n\t\t\tthis.createConnection();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showAlertPopup();\n\t\t}\n\t}\n\n\topenSyncWizard()\n\t{\n\t\tconst mode = this.provider.isStartedReconnecting ? 'reconnect' : 'default';\n\t\tthis.wizard = new Office365SyncWizard({ mode });\n\t\tthis.wizard.openSlider();\n\t\tthis.provider.setActiveWizard(this.wizard);\n\t}\n\n\tgetSectionsForOffice365()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getAllSectionsForOffice365', {\n\t\t\t\tdata: {\n\t\t\t\t\tconnectionId: this.connection.addParams.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tthis.sectionList = response.data;\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tresolve(response.errors);\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t})\n\t}\n\n\tsendRequestRemoveConnection(id)\n\t{\n\t\tthis.deactivateConnection(id);\n\t}\n\n\tshowAlertPopup()\n\t{\n\t\tconst messageBox = new MessageBox({\n\t\t\tclassName: this.id,\n\t\t\tmessage: Loc.getMessage('OFFICE365_IS_NOT_CALDAV_SETTINGS_WARNING_MESSAGE'),\n\t\t\twidth: 500,\n\t\t\toffsetLeft: 60,\n\t\t\toffsetTop: 5,\n\t\t\tpadding: 7,\n\t\t\tonOk: () => {\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tokCaption: 'OK',\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndexAbsolute: 4020,\n\t\t\t\tautoHide: true,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t},\n\t\t});\n\t\tmessageBox.show();\n\t}\n}\n","// @flow\n'use strict';\n\nimport { Dom, Event, Loc, Tag } from 'main.core';\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport { Util } from 'calendar.util';\n\nexport default class MacTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_MAC\"),\n\t\t\thelpDeskCode: '5684075',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_MAC_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_MAC_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_MAC_CALENDAR_IS_CONNECT_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_MAC_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-mac',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/mac.svg',\n\t\t\tcolor: '#ff5752',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\n\t\tthis.alreadyConnectedToNew = Util.isIcloudConnected();\n\t\tif (this.alreadyConnectedToNew)\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC_CONNECTED');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CHECK_ICLOUD_SETTINGS');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CONNECT_ICLOUD');\n\t\t}\n\t}\n\n\tgetPortalAddress()\n\t{\n\t\treturn this.portalAddress;\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render `\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t\t${this.getContentInfoWarning()}\n\t\t`;\n\t}\n\n\n\tgetActiveConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t</div>\n\t\t\t\t${this.getContentActiveBody()}\n\t\t\t</div>\n\t\t`\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-banner\">\n\t\t\t\t${this.getContentBodyConnect()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section\">\n\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t<div class=\"calendar-sync-slider-title\">${this.titleActiveHeader}</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_SYNC_LAST_SYNC_DATE')}</span>\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-time\">${syncTime}</span>\n\t\t\t\t</div>\n\t\t\t\t\t<a class=\"calendar-sync-slider-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}</a>\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t}\n\n\tgetContentInfoBodyHeaderHelper()\n\t{\n\t\tif (!this.headerHelper)\n\t\t{\n\t\t\tthis.headerHelper = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\">\n\t\t\t\t\t\t\t${Loc.getMessage('CAL_CONNECT_PC')}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tEvent.bind(this.headerHelper, 'click', this.showExtendedInfoMacOs.bind(this));\n\t\t}\n\n\t\treturn this.headerHelper;\n\t}\n\n\tshowExtendedInfoMacOs()\n\t{\n\t\tthis.headerHelper.style.display = 'none';\n\t\tDom.append(this.getContentBodyConnect(), this.infoBodyHeader);\n\t}\n\n\tgetContentBodyConnect()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-slider-section calendar-sync-slider-section-col\">\n\t\t\t\t<div class=\"calendar-sync-slider-header calendar-sync-slider-header-divide\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-subtitle\">${Loc.getMessage('CAL_MAC_INSTRUCTION_HEADER')}</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_DESCRIPTION')}:</span>\n\t\t\t\t\t<ol class=\"calendar-sync-slider-info-list\">\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FIRST')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SECOND')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_THIRD')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FOURTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_FIFTH', { '#PORTAL_ADDRESS#': this.provider.getPortalAddress() })}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SIXTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t\t<li class=\"calendar-sync-slider-info-item\">\n\t\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_POINT_SEVENTH')}</span>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t</ol>\n\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_MAC_INSTRUCTION_CONCLUSION')}</span>\n\t\t\t\t\t<div class=\"calendar-sync-slider-info\" style=\"margin-top: 20px\">\n\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\" href=\"javascript:void(0);\" onclick=\"${this.showHelp.bind(this)}\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC')}\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\thandleMobileButtonConnectClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-mac'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.getConnectionTemplate()\n\t\t\t\t.handleConnectButton();\n\t\t}\n\t}\n\n\thandleMobileButtonOtherSyncInfo()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-mac'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst connectionProvider = calendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.connectionProvider\n\t\t\t;\n\n\t\t\tconnectionProvider.openActiveConnectionSlider(connectionProvider.getConnection());\n\t\t}\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\n\nexport default class OutlookTemplate extends InterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_MAC\"),\n\t\t\thelpDeskCode: '5684075',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_MAC_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_MAC_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_MAC_CALENDAR_IS_CONNECT_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_MAC_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-mac',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/mac.svg',\n\t\t\tcolor: '#ff5752',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\t}\n}","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport {CaldavInterfaceTemplate} from \"./caldavinterfacetemplate\";\n\nexport default class YandexTemplate extends CaldavInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_YANDEX\"),\n\t\t\thelpDeskCode: '12925048',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_YANDEX_CALENDAR'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_YANDEX_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_YANDEX_CALENDAR_IS_CONNECT'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_YANDEX_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-yandex',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/yandex.svg',\n\t\t\ticonLogoClass: '--yandex',\n\t\t\tcolor: '#f9c500',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: true,\n\t\t});\n\t}\n}","import {Loc, Tag, Type, Event, Dom} from \"main.core\";\nimport {InterfaceTemplate} from \"./interfacetemplate\";\nimport MobileSyncBanner from \"../controls/mobilesyncbanner\";\nimport {Util} from \"calendar.util\";\n\nexport default class MobileInterfaceTemplate extends InterfaceTemplate\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\n\t\tthis.banner = new MobileSyncBanner({\n\t\t\ttype: this.provider.getType(),\n\t\t\thelpDeskCode: options.helpDeskCode,\n\t\t});\n\n\t\tif (this.status)\n\t\t{\n\t\t\tthis.syncDate = Type.isDate(this.data.syncDate) ? this.data.syncDate : Util.parseDate(this.data.syncDate);\n\t\t}\n\t}\n\n\tgetContentInfoBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentInfoBodyHeader()}\n\t\t\t${this.getContentInfoWarning()}\n\t\t`;\n\t}\n\n\tgetContentInfoBodyHeaderHelper()\n\t{\n\t\tif (!this.headerHelper)\n\t\t{\n\t\t\tthis.headerHelper = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t${this.getContentInfoBodyHeaderHelperConnect()}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.headerHelper;\n\t}\n\n\tgetContentInfoBodyHeaderHelperConnect()\n\t{\n\t\tif (!this.headerHelperConnect)\n\t\t{\n\t\t\tthis.headerHelperConnect = Tag.render`\n\t\t\t\t<div class=\"calendar-sync-slider-info-text\">\n\t\t\t\t\t<a class=\"calendar-sync-slider-info-link\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_CONNECT_PHONE')}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tEvent.bind(this.headerHelperConnect, 'click', this.showMobileSyncBanner.bind(this));\n\t\t}\n\n\t\treturn this.headerHelperConnect;\n\t}\n\n\tshowMobileSyncBanner()\n\t{\n\t\tthis.banner.show();\n\t}\n\n\tgetContentActiveBody()\n\t{\n\t\treturn Tag.render`\n\t\t\t${this.getContentActiveBodyHeader()}\t\t\t\n\t\t\t${this.getContentInfoWarning()}\n\t\t`;\n\t}\n\n\tgetContentActiveBodyHeader()\n\t{\n\t\tconst timestamp = this.connection.getSyncDate().getTime() / 1000;\n\t\tconst syncTime = timestamp\n\t\t\t? Util.formatDateUsable(timestamp) + ' ' + BX.date.format(Util.getTimeFormatShort(), timestamp)\n\t\t\t: '';\n\n\t\treturn Tag.render `\n\t\t\t<div class=\"calendar-sync-slider-section\">\n\t\t\t\t<div class=\"calendar-sync-slider-header-icon ${this.sliderIconClass}\"></div>\n\t\t\t\t<div class=\"calendar-sync-slider-header\">\n\t\t\t\t\t<div class=\"calendar-sync-slider-title\">${this.titleActiveHeader}</div>\n\t\t\t\t\t<div class=\"calendar-sync-slider-info\">\n\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-text\">${Loc.getMessage('CAL_SYNC_LAST_SYNC_DATE')}</span>\n\t\t\t\t\t\t<span class=\"calendar-sync-slider-info-time\">${syncTime}</span>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync-slider-desc\">${Loc.getMessage('CAL_SYNC_DISABLE')}</div>\n\t\t\t\t\t${this.getContentInfoBodyHeaderHelper()}\n\t\t\t\t</div>\n\t\t\t</div>`;\n\t}\n\n\tgetActiveConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\" style=\"justify-content: start;\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t\t${this.getHeaderHint()}\n\t\t\t\t</div>\n\t\t\t\t${this.getContentActiveBody()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetInfoConnectionContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-sync-wrap calendar-sync-wrap-detail\">\n\t\t\t\t<div class=\"calendar-sync-header\" style=\"justify-content: start;\">\n\t\t\t\t\t<span class=\"calendar-sync-header-text\">${this.getHeaderTitle()}</span>\n\t\t\t\t\t${this.getHeaderHint()}\n\t\t\t\t</div>\n\t\t\t\t${this.getContentInfoBody()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetHeaderHint()\n\t{\n\t\tthis.hintNode ??= BX.UI.Hint.createNode(Loc.getMessage('CAL_TEXT_ABOUT_WORK_SYNC'));\n\t\tEvent.bind(this.hintNode, 'click', this.showHelp.bind(this));\n\n\t\treturn this.hintNode;\n\t}\n}\n","// @flow\n'use strict';\n\nimport {Loc} from \"main.core\";\nimport MobileInterfaceTemplate from \"./mobileinterfacetemplate\";\nimport { Util } from 'calendar.util';\n\nexport default class AndroidTemplate extends MobileInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_ANDROID\"),\n\t\t\thelpDeskCode: '5686179',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_ANDROID_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_ANDROID_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_SYNC_CONNECTED_ANDROID_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_ANDROID_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-android',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/android.svg',\n\t\t\tcolor: '#9ece03',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\n\t\tthis.alreadyConnectedToNew = Util.isGoogleConnected();\n\t\tif (this.alreadyConnectedToNew)\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_ANDROID_CONNECTED');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CHECK_GOOGLE_SETTINGS');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_ANDROID');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CONNECT_GOOGLE');\n\t\t}\n\t}\n\n\thandleMobileButtonConnectClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-android'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getGoogleProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.getConnectionTemplate()\n\t\t\t\t.handleConnectButton();\n\t\t}\n\t}\n\n\thandleMobileButtonOtherSyncInfo()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-android'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst connectionProvider = calendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getGoogleProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.connectionProvider\n\t\t\t;\n\n\t\t\tconnectionProvider.openActiveConnectionSlider(connectionProvider.getConnection());\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\nimport { Loc, Tag } from \"main.core\";\nimport MobileInterfaceTemplate from \"./mobileinterfacetemplate\";\nimport { Util } from 'calendar.util';\n\nexport default class IphoneTemplate extends MobileInterfaceTemplate\n{\n\tconstructor(provider, connection = null)\n\t{\n\t\tsuper({\n\t\t\ttitle: Loc.getMessage(\"CALENDAR_TITLE_IPHONE\"),\n\t\t\thelpDeskCode: '5686207',\n\t\t\ttitleInfoHeader: Loc.getMessage('CAL_CONNECT_IPHONE_CALENDAR_TITLE'),\n\t\t\tdescriptionInfoHeader: Loc.getMessage('CAL_IPHONE_CONNECT_DESCRIPTION'),\n\t\t\ttitleActiveHeader: Loc.getMessage('CAL_SYNC_CONNECTED_IPHONE_TITLE'),\n\t\t\tdescriptionActiveHeader: Loc.getMessage('CAL_IPHONE_SELECTED_DESCRIPTION'),\n\t\t\tsliderIconClass: 'calendar-sync-slider-header-icon-iphone',\n\t\t\ticonPath: '/bitrix/images/calendar/sync/iphone.svg',\n\t\t\tcolor: '#2fc6f6',\n\t\t\tprovider: provider,\n\t\t\tconnection: connection,\n\t\t\tpopupWithUpdateButton: false,\n\t\t});\n\n\t\tthis.alreadyConnectedToNew = Util.isIcloudConnected();\n\t\tif (this.alreadyConnectedToNew)\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC_CONNECTED');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CHECK_ICLOUD_SETTINGS');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.warningText = Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC');\n\t\t\tthis.mobileSyncButtonText = Loc.getMessage('CALENDAR_CONNECT_ICLOUD');\n\t\t}\n\t\t// this.warningText = this.alreadyConnectedToNew\n\t\t// \t? Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC_CONNECTED')\n\t\t// \t: Loc.getMessage('CAL_SYNC_WARNING_IPHONE_AND_MAC');\n\t}\n\n\thandleMobileButtonConnectClick()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-iphone'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.getConnectionTemplate()\n\t\t\t\t.handleConnectButton();\n\t\t}\n\t}\n\n\thandleMobileButtonOtherSyncInfo()\n\t{\n\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t{\n\t\t\tif (['calendar:auxiliary-sync-slider', 'calendar:item-sync-connect-iphone'].includes(slider.getUrl()))\n\t\t\t{\n\t\t\t\tslider.close();\n\t\t\t}\n\t\t});\n\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tconst connectionProvider = calendarContext\n\t\t\t\t.syncInterface\n\t\t\t\t.getIcloudProvider()\n\t\t\t\t.getInterfaceUnit()\n\t\t\t\t.connectionProvider\n\t\t\t;\n\n\t\t\tconnectionProvider.openActiveConnectionSlider(connectionProvider.getConnection());\n\t\t}\n\t}\n}","// @flow\n'use strict';\n\n\nimport {Popup} from 'main.popup';\nimport {Util} from 'calendar.util';\nimport {Loc, Tag} from \"main.core\";\nimport \"../css/icalpopup.css\"\n\nexport default class IcalSyncPopup\n{\n\tLINK_LENGTH = 112;\n\n\tconstructor(options)\n\t{\n\t\tthis.link = this.getIcalLink(options);\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tshow()\n\t{\n\t\tthis.createPopup().show();\n\t\tthis.startSync();\n\t}\n\n\tstartSync()\n\t{\n\t\tBX.ajax.get(this.link + '&check=Y', \"\", (result) =>\n\t\t{\n\t\t\tsetTimeout(() =>\n\t\t\t{\n\t\t\t\tif (!result || result.length <= 0 || result.toUpperCase().indexOf('BEGIN:VCALENDAR') === -1)\n\t\t\t\t{\n\t\t\t\t\tthis.showPopupWithSyncDataError();\n\t\t\t\t}\n\t\t\t}, 300);\n\t\t});\n\t}\n\n\tgetContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-ical-popup-wrapper\">\n\t\t\t\t<h3>${Loc.getMessage('EC_JS_EXPORT_TILE')}</h3>\n\t\t\t\t<div class=\"calendar-ical-popup-label-text\"><span>${Loc.getMessage('EC_EXP_TEXT')}</span></div>\n\t\t\t\t${this.getLinkBlock()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tcreatePopup()\n\t{\n\t\treturn this.popup = new Popup({\n\t\t\twidth: 400,\n\t\t\tzIndexOptions: 4000,\n\t\t\tautoHide: false,\n\t\t\tcloseByEsc: true,\n\t\t\tdraggable: true,\n\t\t\tcloseIcon: {right: \"12px\", top: \"10px\"},\n\t\t\tclassName: \"bxc-popup-window\",\n\t\t\tcontent: this.getContent(),\n\t\t\tbuttons: [\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('EC_JS_ICAL_COPY_ICAL_SYNC_LINK'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.PRIMARY,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.copyLink(event);\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\tnew BX.UI.Button({\n\t\t\t\t\ttext : Loc.getMessage('EC_SEC_SLIDER_CLOSE'),\n\t\t\t\t\tcolor: BX.UI.Button.Color.LINK,\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.popup.close();\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t],\n\t\t});\n\t}\n\n\tgetIcalLink(options)\n\t{\n\t\treturn options.calendarPath\n\t\t\t+ ((options.calendarPath.indexOf('?') >= 0) ? '&' : '?')\n\t\t\t+ 'action=export'\n\t\t\t+ options.sectionLink;\n\t}\n\n\tgetLinkBlock()\n\t{\n\t\treturn Tag.render`\n\t\t\t\t<div class=\"calendar-ical-popup-link-block\">\n\t\t\t\t\t<a class=\"ui-link ui-link-primary \" target=\"_blank\" href=\"${BX.util.htmlspecialchars(this.link)}\">\n\t\t\t\t\t\t${BX.util.htmlspecialchars(this.getShortenLink(this.link))}\n\t\t\t\t\t</a>\n\t\t\t\t</div>\n\t\t\t`;\n\t}\n\n\tstatic checkPathes(options)\n\t{\n\t\treturn (!!options.sectionLink || !!options.calendarPath)\n\t}\n\n\tstatic showPopupWithPathesError()\n\t{\n\t\tBX.UI.Dialogs.MessageBox.alert(Loc.getMessage('EC_JS_ICAL_ERROR_WITH_PATHES'));\n\t}\n\n\tshowPopupWithSyncDataError()\n\t{\n\t\tBX.UI.Dialogs.MessageBox.alert(Loc.getMessage('EC_EDEV_EXP_WARN'));\n\t}\n\n\tcopyLink(event)\n\t{\n\t\twindow.BX.clipboard.copy(this.link)\n\t\t\t? this.#showSuccessCopyNotification()\n\t\t\t: this.#showFailedCopyNotification();\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t}\n\n\tgetShortenLink(link)\n\t{\n\t\treturn link.length < this.LINK_LENGTH ? link : link.substr(0, 105) + '...' + link.slice(-7);\n\t}\n\n\t#showSuccessCopyNotification()\n\t{\n\t\tthis.#showResultNotification(Loc.getMessage('EC_JS_ICAL_COPY_ICAL_SYNC_LINK_SUCCESS'));\n\t}\n\n\t#showFailedCopyNotification()\n\t{\n\t\tthis.#showResultNotification(Loc.getMessage('EC_JS_ICAL_COPY_ICAL_SYNC_LINK_FAILED'));\n\t}\n\n\t#showResultNotification(message)\n\t{\n\t\tUtil.showNotification(message);\n\t}\n}\n","// @flow\n'use strict';\nimport {Type, Tag, Loc, Runtime, Dom} from 'main.core';\nimport {Util} from \"calendar.util\";\nimport {Popup} from 'main.popup';\n\nexport default class AfterSyncTour\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.options = options;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tloadExtension()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tRuntime.loadExtension('ui.tour').then((exports) => {\n\t\t\t\tif (exports && exports['Guide'] && exports['Manager'])\n\t\t\t\t{\n\t\t\t\t\tresolve();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconsole.error(`Extension \"ui.tour\" not found`);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tthis.loadExtension()\n\t\t\t.then(() => {\n\t\t\t\tthis.guide = new BX.UI.Tour.Guide({\n\t\t\t\t\tsteps: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttarget: this.getTarget(),\n\t\t\t\t\t\t\ttitle: Loc.getMessage('CAL_AFTER_SYNC_AHA_TITLE'),\n\t\t\t\t\t\t\ttext: Loc.getMessage('CAL_AFTER_SYNC_AHA_TEXT'),\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tonEvents: true\n\t\t\t\t});\n\n\t\t\t\tthis.guide.start();\n\t\t\t});\n\t}\n\n\tgetTarget()\n\t{\n\t\tlet target;\n\t\tconst view = this.options.view;\n\t\tconst viewWrap = view.getContainer();\n\n\t\tif (view.getName() === 'month')\n\t\t{\n\t\t\ttarget = viewWrap.querySelectorAll(\".calendar-grid-today\")[0];\n\t\t}\n\t\telse if (view.getName() === 'day'\n\t\t|| view.getName() === 'week')\n\t\t{\n\t\t\tconst dayCode = Util.getDayCode(new Date());\n\t\t\ttarget = viewWrap.querySelector('div[data-bx-calendar-timeline-day=\"' + dayCode + '\"] .calendar-grid-cell-inner');\n\t\t}\n\t\telse\n\t\t{\n\t\t\ttarget = document.querySelector('span[data-role=\"addButton\"]');\n\t\t}\n\n\t\treturn target;\n\t}\n}\n"],"names":["StatusBlock","constructor","options","status","connections","withStatusLabel","popupWithUpdateButton","popupId","createInstance","setStatus","setConnections","getContent","statusInfoBlock","Tag","render","Loc","getMessage","addEventListener","handlerMouseEnter","handlerMouseLeave","statusBlock","getStatusTextLabel","clearTimeout","statusBlockEnterTimeout","buttonEnterTimeout","setTimeout","showPopup","statusBlockLeaveTimeout","hidePopup","node","popup","getPopup","show","addPopupHandlers","hide","getPopupContainer","SyncStatusPopup","withUpdateButton","id","refresh","_t","_t2","_t3","_t4","_t5","AuxiliarySyncPanel","MAIN_SYNC_SLIDER_NAME","SLIDER_WIDTH","LOADER_NAME","cache","Cache","MemoryCache","connectionsProviders","userId","openSlider","BX","SidePanel","Instance","open","contentCallback","slider","Promise","resolve","reject","allowChangeHistory","events","onLoad","setGridContent","cacheable","width","loader","getHeader","getMobileHeader","getMobileContentWrapper","getWebHeader","getWebContentWrapper","getMainHeader","getStatusBlockContent","getConnections","remember","statusBlockContent","items","Object","values","forEach","item","itemConnections","length","connection","ConnectionItem","isConnectionItem","getConnectStatus","push","showWebGridContent","filter","mainPanel","getViewClassification","showMobileGridContent","wrapper","Dom","clean","grid","TileGrid","Grid","container","sizeRatio","itemMinWidth","tileMargin","itemType","draw","blockStatusContent","replace","document","querySelector","_t6","_t7","SyncPanelUnit","COUNTER_FAILED","logoClassName","connectionProvider","getConnectionTemplate","connectionTemplate","getClassTemplateItem","getConnection","renderTo","outerWrapper","Type","isElementNode","append","unitNode","getLogoNode","getTitle","getSyncInfoWrap","getButtonsWrap","getSyncPanelLogo","getSyncPanelTitle","syncInfoWrap","setSyncStatus","mode","className","STATUS_REFUSED","addClass","setSyncInfoStatusText","STATUS_SUCCESS","formatSyncTime","getSyncDate","STATUS_FAILED","doSupportReconnectionScenario","connectionType","getFailedConnectionName","Text","capitalize","STATUS_PENDING","STATUS_SYNCHRONIZING","STATUS_NOT_CONNECTED","isGoogleApplicationRefused","refreshButton","text","upperCase","syncInfoStatusText","innerHTML","encode","toUpperCase","buttonsWrap","getButton","getMoreButton","getStatus","button","failedConnectionsCount","getFailedConnectionsCount","Event","bind","reconnect","handleItemClick","moreButton","e","includes","hasMenu","showMenu","getComputedStyle","display","openActiveConnectionSlider","openInfoConnectionSlider","handleConnectButton","date","now","Date","timestamp","isDate","Math","round","getTime","secondsAgo","parseInt","format","SyncPanel","HELPDESK_CODE","window","top","displayConnectionUnits","getHeaderWrapper","getUnitsContentWrapper","getFooterWrapper","unitsContentWrapper","getExtraInfoWithCheckIcon","getOpenAuxiliaryPanelLink","getOpenHelpLink","alreadyConnected","link","auxiliarySyncPanel","Helper","connected","renderConnectionUnits","providers","provider","interfaceUnit","setInterfaceUnit","GridUnit","Item","type","gridUnit","getAdditionalContentClass","getContentStyles","getImage","isActive","onClick","layout","title","util","htmlspecialchars","getGridTitle","getGridIcon","getSyncStatus","getGridColor","ConnectionControls","userName","server","connectionName","addButtonText","removeButtonText","saveButtonText","getWrapper","getForm","getAddButton","getDisconnectButton","getSaveButton","getButtonWrapper","MobileSyncBanner","zIndex","DOM","QRC","helpDeskCode","alreadyConnectedToNew","Util","isGoogleConnected","isIcloudConnected","qrAuth","QrAuthorization","content","intent","showFishingWarning","showBottom","_t8","_t9","_t10","_t11","InterfaceTemplate","EventEmitter","sliderWidth","IS_UPDATING","setEventNamespace","helpdeskCode","titleInfoHeader","descriptionInfoHeader","titleActiveHeader","descriptionActiveHeader","sliderIconClass","iconPath","iconLogoClass","color","getInfoConnectionContent","getHeaderTitle","getContentInfoBody","getContentActiveBodyHeader","syncTime","formatDateUsable","getTimeFormatShort","getSyncStatusClassName","getLogoIconClass","getConnectionName","getAccountInfo","getActionButton","getActiveConnectionContent","disconnectButton","getContentActiveBody","actionButton","root","icon","actionButtonIcon","updateConnection","onUpdateConnectionStart","ajax","runAction","data","requestUid","registerRequestId","then","response","emit","event","doRefreshMainSlider","onUpdateConnectionEnd","sectionListNode","removeClass","closeSlider","getContentInfoBodyHeader","getContentActiveBodySectionsHeader","getContentActiveBodySectionsManager","showHelp","preventDefault","getHelpdeskLink","infoBodyHeader","getContentInfoBodyHeaderHelper","getContentInfoWarning","mobileSyncButton","getMobileSyncControlButton","handleMobileButtonOtherSyncInfo","handleMobileButtonConnectClick","warningText","mobileSyncButtonText","setProvider","sendRequestRemoveConnection","connectionId","removeCalendars","reload","runUpdateInfo","sectionStatus","sectionStatusObject","getElementById","startReconnecting","handleDisconnectButton","getContentActiveBodySections","sectionList","section","ID","onClickCheckSection","ACTIVE","NAME","showUpdateSectionListNotification","showNotification","getId","deactivateConnection","getInterfaceUnit","SLIDER_PREFIX","CaldavInterfaceTemplate","addParams","formObject","formBlock","form","buttonWrapper","bodyHeader","sendRequestAddConnection","fd","FormData","name","get","pass","showAlertPopup","errors","alert","message","code","messageBox","UI","Dialogs","MessageBox","buttons","MessageBoxButtons","OK","okCaption","minWidth","mediumButtonSize","popupOptions","height","onOk","getFirstFailedConnection","CaldavTemplate","ExchangeTemplate","getContentBody","getHelpdeskBlock","_t12","_t13","_t14","_t15","SyncWizard","TYPE","SLIDER_NAME","syncStagesList","accountName","MIN_UPDATE_STATE_DELAY","CONFETTI_DELAY","pullWizardEventHandler","handlePullNewEvent","lastUpdateStateTimestamp","logoIconClass","isStringFilled","getValidatedMode","displaySyncStages","bindButtonsHandlers","onDestroy","handleCloseWizard","getTopSlider","syncIsFinished","errorStatus","getTitleWrapper","getSyncStagesWrapper","getInfoStatusWrapper","getErrorWrapper","getFinalCheckWrapper","getHelpLinkWrapper","syncTitleWrapper","getAccountNameNode","getActiveStatusNode","syncStagesWrapper","infoStatusWrapper","errorWrapper","helpLinkWrapper","finalCheckWrapper","getNewEventCardWrapper","newEventCardWrapper","getSkeletonWrapper","skeletonWrapper","getSkeletonTitle","accountNameNode","getAccountName","setAccountName","value","activeStatusNode","startStatusCarousel","statusNode","progressStatuses","dotCycle","statusCarouselInterval","setInterval","currentPhraseNode","firstElementChild","countDots","innerText","style","offsetWidth","slice","shift","animateNextStatus","almostDoneStatus","clearInterval","carousel","phraseText","nextPhraseNode","maxWidth","max","transition","transform","remove","string","match","setSyncStages","getSyncStages","getHelpDeskCode","stage","continueButton","handleContinueButtonClick","eifButton","handleFinalCloseButtonClick","showFinalStage","showFinalCheckWrapper","showHelpLinkWrapper","hideSyncStagesWrapper","hideInfoStatusWrapper","getBX","subscribe","isSyncFinished","getOpenSliders","getUrl","close","handleUpdateState","stateData","currentTimestamp","updateState","setActiveStatusFinished","showButtonWrapper","hideButtonWrapper","showInfoStatusWrapper","showErrorWrapper","hideErrorWrapper","hideFinalCheckWrapper","showSyncStagesWrapper","hideHelpLinkWrapper","isFunction","getData","command","newEvent","syncBalloon","hasClass","entry","Entry","fields","displayNewEvent","unsubscribe","appendChild","getNewEventCard","from","to","fromTimestamp","dateFrom","getDayMonthFormat","timeFrom","formatTime","getHours","getMinutes","timeTo","timeField","isFullDay","newEventCard","getName","showConfetti","bx","Confetti","fire","particleCount","spread","origin","y","x","getZindex","getSlider","setErrorState","closeButton","SyncStageUnit","doneStatus","contentNode","setDone","setUndone","GoogleSyncWizard","STAGE_1_CODE","STAGE_2_CODE","STAGE_3_CODE","GOOGLE_ON_MOBILE_HELPDESK","helper","GoogleTemplate","HANDLE_CONNECTION_DELAY","handleSuccessConnectionDebounce","Runtime","debounce","handleSuccessConnection","createConnection","syncLink","getSyncLink","location","hash","removeHash","setWizardSyncMode","saveConnection","openSyncWizard","isReconnecting","unbind","getSectionsForGoogle","target","checked","offsetLeft","offsetTop","padding","zIndexAbsolute","autoHide","animation","hasSetSyncGoogleSettings","endReconnecting","wizard","isStartedReconnecting","setActiveWizard","IcloudAuthDialog","appPasswordTemplate","keyHandler","handleKeyPress","checkOutsideClickClose","outsideMouseDownClose","initAlertBlock","Popup","titleBar","draggable","getContainer","closeByEsc","closeIcon","contentBackground","overlay","opacity","lightShadow","Button","click","authorize","onPopupClose","isFormDataValid","saveBtn","getButtons","setClocking","setDisabled","cancelButton","contains","alertBlock","BaseEvent","appleId","appleIdInput","toString","trim","appPassword","appPasswordInput","highlightInvalidFormData","highlightInvalidAppleIdInput","highlightInvalidPasswordInput","clearInvalidation","focus","enableSaveButton","getAppleInfoBlock","getAppleIdTitle","getAppleIdInput","getAppleIdError","getAppPasswordTitle","getLearnMoreButton","getAppPasswordInput","getShowHidePasswordIcon","getAppPasswordError","appleInfo","appleIdTitle","appPasswordTitle","appleIdError","appPasswordError","openHelpDesk","onfocus","onblur","validateAppleIdInput","validateAppPasswordInput","showHidePasswordIcon","switchPasswordVisibility","learnMoreButton","showErrorAuthorizationAlert","emailRegExp","input","test","appPasswordRegExp","completeWithTemplate","clearForm","password","addition","keyCode","getKeyCode","srcElement","outsideMouseUp","closest","outsideMouseDown","checkTopSlider","destroy","IcloudSyncWizard","WarnSyncIcloudDialog","authDialog","openAuthDialog","getAlertInformation","Alert","Color","WARNING","Icon","INFO","disableConnection","setIphoneConnectionStatus","setMacConnectionStatus","IcloudTemplate","result","syncCalendarsWithIcloud","setId","setConnected","setSyncDate","setWizardState","ERROR_CODE","vendorName","getSectionsForIcloud","initPopup","isIphoneConnected","isMacConnected","alertSyncPopup","unsubscribeAll","subscribeOnce","Office365SyncWizard","Office365template","hasSetSyncOffice365Settings","getSectionsForOffice365","MacTemplate","getPortalAddress","portalAddress","getContentBodyConnect","headerHelper","showExtendedInfoMacOs","calendarContext","getCalendarContext","syncInterface","getIcloudProvider","OutlookTemplate","YandexTemplate","MobileInterfaceTemplate","banner","getType","syncDate","parseDate","getContentInfoBodyHeaderHelperConnect","headerHelperConnect","showMobileSyncBanner","getHeaderHint","hintNode","Hint","createNode","AndroidTemplate","getGoogleProvider","IphoneTemplate","IcalSyncPopup","LINK_LENGTH","getIcalLink","createPopup","startSync","indexOf","showPopupWithSyncDataError","getLinkBlock","zIndexOptions","right","PRIMARY","onclick","copyLink","LINK","calendarPath","sectionLink","getShortenLink","checkPathes","showPopupWithPathesError","clipboard","copy","stopPropagation","substr","AfterSyncTour","loadExtension","exports","console","error","guide","Tour","Guide","steps","getTarget","onEvents","start","view","viewWrap","querySelectorAll","dayCode","getDayCode"],"mappings":";;;;;;;CACa;GAAA;GAAA;GAAA;GAAA;GAAA;AAEb,CAGe,MAAMA,WAAW,CAChC;GACCC,WAAW,CAACC,OAAO,EACnB;KACC,IAAI,CAACC,MAAM,GAAGD,OAAO,CAACC,MAAM;KAC5B,IAAI,CAACC,WAAW,GAAGF,OAAO,CAACE,WAAW;KACtC,IAAI,CAACC,eAAe,GAAGH,OAAO,CAACG,eAAe;KAC9C,IAAI,CAACC,qBAAqB,GAAGJ,OAAO,CAACI,qBAAqB;KAC1D,IAAI,CAACC,OAAO,GAAGL,OAAO,CAACK,OAAO;;GAG/B,OAAOC,cAAc,CAACN,OAAO,EAC7B;KACC,OAAO,IAAI,IAAI,CAACA,OAAO,CAAC;;GAGzBO,SAAS,CAACN,MAAM,EAChB;KACC,IAAI,CAACA,MAAM,GAAGA,MAAM;KAEpB,OAAO,IAAI;;GAGZO,cAAc,CAACN,WAAW,EAC1B;KACC,IAAI,CAACA,WAAW,GAAGA,WAAW;KAE9B,OAAO,IAAI;;GAGZO,UAAU,GACV;KACC,IAAIC,eAAe;KACnB,IAAI,IAAI,CAACT,MAAM,KAAK,SAAS,EAC7B;OACCS,eAAe,GAAGC,aAAG,CAACC,MAAM,cAAE;;sCAEG,CAAwC;;IAEzE,GAFmCC,aAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC,CAEvE;MACD,MACI,IAAI,IAAI,CAACb,MAAM,KAAK,QAAQ,EACjC;OACCS,eAAe,GAAGC,aAAG,CAACC,MAAM,gBAAE;;sCAEG,CAAsC;;IAEvE,GAFmCC,aAAG,CAACC,UAAU,CAAC,mBAAmB,CAAC,CAErE;MACD,MAED;OACCJ,eAAe,GAAGC,aAAG,CAACC,MAAM,gBAAE;;sCAEG,CAA8C;;IAE/E,GAFmCC,aAAG,CAACC,UAAU,CAAC,2BAA2B,CAAC,CAE7E;;KAGFJ,eAAe,CAACK,gBAAgB,CAAC,YAAY,EAAE,MAAM;OACpD,IAAI,CAACC,iBAAiB,CAACN,eAAe,CAAC;MACvC,CAAC;KAEFA,eAAe,CAACK,gBAAgB,CAAC,YAAY,EAAE,MAAM;OACpD,IAAI,CAACE,iBAAiB,EAAE;MACxB,CAAC;KAEF,IAAI,CAACC,WAAW,GAAGP,aAAG,CAACC,MAAM,gBAAE;;MAE7B,CAA4B;MAC5B,CAAkB;;GAEpB,GAHI,IAAI,CAACO,kBAAkB,EAAE,EACzBT,eAAe,CAElB;KAED,OAAO,IAAI,CAACQ,WAAW;;GAGxBC,kBAAkB,GAClB;KACC,OAAO,IAAI,CAAChB,eAAe,GACxBQ,aAAG,CAACC,MAAM,gBAAC;;;+CAG6B,CAAsC;WACzE,GADqCC,aAAG,CAACC,UAAU,CAAC,mBAAmB,CAAC,IAE7E,EAAE;;GAINE,iBAAiB,CAACE,WAAW,EAC7B;KACCE,YAAY,CAAC,IAAI,CAACC,uBAAuB,CAAC;KAC1C,IAAI,CAACC,kBAAkB,GAAGC,UAAU,CAAC,MACpC;OACC,IAAI,CAACF,uBAAuB,GAAG,IAAI;OACnC,IAAI,CAACG,SAAS,CAACN,WAAW,CAAC;MAC3B,EAAE,GAAG,CACN;;GAGFD,iBAAiB,GACjB;KACC,IAAI,IAAI,CAACI,uBAAuB,KAAK,IAAI,EACzC;OACCD,YAAY,CAAC,IAAI,CAACC,uBAAuB,CAAC;OAC1C,IAAI,CAACA,uBAAuB,GAAG,IAAI;OACnC;;KAGD,IAAI,CAACI,uBAAuB,GAAGF,UAAU,CAAC,MACzC;OACC,IAAI,CAACG,SAAS,EAAE;MAChB,EAAE,GAAG,CACN;;GAGFF,SAAS,CAACG,IAAI,EACd;KACC,IAAG,IAAI,CAAC1B,MAAM,KAAK,eAAe,EAClC;OACC,IAAI,CAAC2B,KAAK,GAAG,IAAI,CAACC,QAAQ,CAACF,IAAI,CAAC;OAChC,IAAI,CAACC,KAAK,CAACE,IAAI,EAAE;OAEjB,IAAI,CAACC,gBAAgB,EAAE;;;GAIzBL,SAAS,GACT;KACC,IAAI,IAAI,CAACE,KAAK,EACd;OACC,IAAI,CAACA,KAAK,CAACI,IAAI,EAAE;;;GAInBD,gBAAgB,GAChB;KACC,IAAI,CAACH,KAAK,CAACC,QAAQ,EAAE,CAACI,iBAAiB,EAAE,CAAClB,gBAAgB,CAAC,YAAY,EAAE,MACzE;OACCK,YAAY,CAAC,IAAI,CAACC,uBAAuB,CAAC;OAC1CD,YAAY,CAAC,IAAI,CAACK,uBAAuB,CAAC;MAC1C,CAAC;KAEF,IAAI,CAACG,KAAK,CAACC,QAAQ,EAAE,CAACI,iBAAiB,EAAE,CAAClB,gBAAgB,CAAC,YAAY,EAAE,MACzE;OACC,IAAI,CAACW,SAAS,EAAE;MAChB,CAAC;;GAGHG,QAAQ,CAACF,IAAI,EACb;KACC,OAAOO,qCAAe,CAAC5B,cAAc,CAAC;OACrCJ,WAAW,EAAE,IAAI,CAACA,WAAW;OAC7BiC,gBAAgB,EAAE,IAAI,CAAC/B,qBAAqB;OAC5CuB,IAAI,EAAEA,IAAI;OACVS,EAAE,EAAE,IAAI,CAAC/B;MACT,CAAC;;GAGHgC,OAAO,CAACpC,MAAM,EAAEC,WAAW,EAC3B;KACC,IAAI,CAACD,MAAM,GAAGA,MAAM;KACpB,IAAI,CAACC,WAAW,GAAGA,WAAW;KAE9B,OAAO,IAAI;;CAEb;;CC1Ka;GAAAoC;GAAAC;GAAAC;GAAAC;GAAAC;GAAA;GAAA;AAEb,CAIe,MAAMC,kBAAkB,CACvC;GAOC5C,WAAW,CAACC,OAAO,EACnB;KAAA,KAPA4C,qBAAqB,GAAG,gCAAgC;KAAA,KACxDC,YAAY,GAAG,GAAG;KAAA,KAClBC,WAAW,GAAG,iBAAiB;KAAA,KAE/BC,KAAK,GAAG,IAAIC,eAAK,CAACC,WAAW,EAAE;KAI9B,IAAI,CAAChD,MAAM,GAAGD,OAAO,CAACC,MAAM;KAC5B,IAAI,CAACiD,oBAAoB,GAAGlD,OAAO,CAACkD,oBAAoB;KACxD,IAAI,CAACC,MAAM,GAAGnD,OAAO,CAACmD,MAAM;KAE5B,IAAI,CAAC9B,uBAAuB,GAAG,IAAI;KACnC,IAAI,CAACI,uBAAuB,GAAG,IAAI;;GAGpC2B,UAAU,GACV;KACCC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAAC,IAAI,CAACZ,qBAAqB,EAAE;OACtDa,eAAe,EAAGC,MAAM,IAAK;SAC5B,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;WACvCD,OAAO,CAAC,IAAI,CAACnD,UAAU,EAAE,CAAC;UAC1B,CAAC;QACF;OACDqD,kBAAkB,EAAC,KAAK;OACxBC,MAAM,EAAE;SACPC,MAAM,EAAE,MAAM;WACb,IAAI,CAACC,cAAc,EAAE;;;;;;;;;;;QAWtB;;OACDC,SAAS,EAAE,KAAK;OAChBC,KAAK,EAAE,IAAI,CAACtB,YAAY;OACxBuB,MAAM,EAAE,IAAI,CAACtB;MACb,CAAC;;GAGHrC,UAAU,GACV;KACC,OAAOE,aAAG,CAACC,MAAM,oBAAC;;MAEhB,CAAmB;MACnB,CAAyB;MACzB,CAAiC;MACjC,CAAsB;MACtB,CAA8B;;GAEhC,GANI,IAAI,CAACyD,SAAS,EAAE,EAChB,IAAI,CAACC,eAAe,EAAE,EACtB,IAAI,CAACC,uBAAuB,EAAE,EAC9B,IAAI,CAACC,YAAY,EAAE,EACnB,IAAI,CAACC,oBAAoB,EAAE;;GAKhCJ,SAAS,GACT;KACC,OAAO1D,aAAG,CAACC,MAAM,sBAAC;;MAEhB,CAAuB;MACvB,CAAoD;;GAEtD,GAHI,IAAI,CAAC8D,aAAa,EAAE,EACpB,IAAI,CAACC,qBAAqB,CAAC,IAAI,CAACC,cAAc,EAAE,CAAC;;GAKtDF,aAAa,GACb;KACC,OAAO,IAAI,CAAC3B,KAAK,CAAC8B,QAAQ,CAAC,+BAA+B,EAAE,MAAM;OACjE,OAAOlE,aAAG,CAACC,MAAM,sBAAC;8CACuB,CAA6C;IACtF,GAD2CC,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC;MAErF,CAAC;;GAGHyD,uBAAuB,GACvB;KACC,OAAO,IAAI,CAACxB,KAAK,CAAC8B,QAAQ,CAAC,yCAAyC,EAAE,MAAM;OAC3E,OAAOlE,aAAG,CAACC,MAAM,sBAAC;;GAEnB;MACC,CAAC;;GAIH6D,oBAAoB,GACpB;KACC,OAAO,IAAI,CAAC1B,KAAK,CAAC8B,QAAQ,CAAC,sCAAsC,EAAE,MAAM;OACxE,OAAOlE,aAAG,CAACC,MAAM,sBAAC;;IAElB;MACA,CAAC;;GAGH0D,eAAe,GACf;KACC,OAAO,IAAI,CAACvB,KAAK,CAAC8B,QAAQ,CAAC,iCAAiC,EAAE,MAAM;OACnE,OAAOlE,aAAG,CAACC,MAAM,kBAAC;uCACgB,CAAuC;IACzE,GADoCC,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC;MAExE,CAAC;;GAGH0D,YAAY,GACZ;KACC,OAAO,IAAI,CAACzB,KAAK,CAAC8B,QAAQ,CAAC,8BAA8B,EAAE,MAAM;OAChE,OAAOlE,aAAG,CAACC,MAAM,kBAAC;uCACgB,CAAoC;GACvE,GADqCC,aAAG,CAACC,UAAU,CAAC,iBAAiB,CAAC;MAErE,CAAC;;GAGH6D,qBAAqB,CAACzE,WAAW,EACjC;KACC,IAAI,CAACgB,WAAW,GAAGpB,WAAW,CAACQ,cAAc,CAAC;OAC7CL,MAAM,EAAE,IAAI,CAACA,MAAM;OACnBC,WAAW,EAAEA,WAAW;OACxBC,eAAe,EAAE,IAAI;OACrBC,qBAAqB,EAAE,IAAI;OAC3BC,OAAO,EAAE;MACT,CAAC;KAEF,IAAI,CAACyE,kBAAkB,GAAI,IAAI,CAAC5D,WAAW,CAACT,UAAU,EAAE;KACxD,OAAO,IAAI,CAACqE,kBAAkB;;GAG/BF,cAAc,GACd;KACC,MAAM1E,WAAW,GAAG,EAAE;KACtB,MAAM6E,KAAK,GAAGC,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC/B,oBAAoB,CAAC;KACtD6B,KAAK,CAACG,OAAO,CAACC,IAAI,IAClB;OACC,MAAMC,eAAe,GAAGD,IAAI,CAACP,cAAc,EAAE;OAC7C,IAAIQ,eAAe,CAACC,MAAM,GAAG,CAAC,EAC9B;SACCD,eAAe,CAACF,OAAO,CAACI,UAAU,IAAI;WAErC,IAAIC,oCAAc,CAACC,gBAAgB,CAACF,UAAU,CAAC,IAAIA,UAAU,CAACG,gBAAgB,EAAE,KAAK,IAAI,EACzF;aACCvF,WAAW,CAACwF,IAAI,CAACJ,UAAU,CAAC;;UAE7B,CAAC;;MAEH,CAAC;KAEF,OAAOpF,WAAW;;GAGnB+D,cAAc,GACd;KACC,MAAMc,KAAK,GAAGC,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC/B,oBAAoB,CAAC;KAEtD,IAAI,CAACyC,kBAAkB,CAACZ,KAAK,CAACa,MAAM,CAACT,IAAI,IAAI;OAC5C,OAAOA,IAAI,CAACU,SAAS,KAAK,KAAK,IAAIV,IAAI,CAACW,qBAAqB,EAAE,KAAK,KAAK;MACzE,CAAC,CAAC;KAEH,IAAI,CAACC,qBAAqB,CAAChB,KAAK,CAACa,MAAM,CAACT,IAAI,IAAI;OAC/C,OAAOA,IAAI,CAACU,SAAS,KAAK,KAAK,IAAIV,IAAI,CAACW,qBAAqB,EAAE,KAAK,QAAQ;MAC5E,CAAC,CAAC;;GAGJH,kBAAkB,CAACZ,KAAK,EACxB;KACC,MAAMiB,OAAO,GAAG,IAAI,CAACvB,oBAAoB,EAAE;KAC3CwB,aAAG,CAACC,KAAK,CAACF,OAAO,CAAC;KAClB,MAAMG,IAAI,GAAG,IAAI9C,EAAE,CAAC+C,QAAQ,CAACC,IAAI,CAAC;OACjCjE,EAAE,EAAE,eAAe;OACnB2C,KAAK,EAAEA,KAAK;OACZuB,SAAS,EAAEN,OAAO;OAClBO,SAAS,EAAE,KAAK;OAChBC,YAAY,EAAE,GAAG;OACjBC,UAAU,EAAE,CAAC;OACbC,QAAQ,EAAE,qCAAqC;OAC/CvD,MAAM,EAAE,IAAI,CAACA;MACb,CAAC;KAEFgD,IAAI,CAACQ,IAAI,EAAE;;GAGZZ,qBAAqB,CAAChB,KAAK,EAC3B;KACC,MAAMiB,OAAO,GAAG,IAAI,CAACzB,uBAAuB,EAAE;KAC9C0B,aAAG,CAACC,KAAK,CAACF,OAAO,CAAC;KAClB,MAAMG,IAAI,GAAG,IAAI9C,EAAE,CAAC+C,QAAQ,CAACC,IAAI,CAAC;OACjCjE,EAAE,EAAE,eAAe;OACnB2C,KAAK,EAAGA,KAAK;OACbuB,SAAS,EAAEN,OAAO;OAClBO,SAAS,EAAG,KAAK;OACjBC,YAAY,EAAG,GAAG;OAClBC,UAAU,EAAG,CAAC;OACdC,QAAQ,EAAE;MACV,CAAC;KAEFP,IAAI,CAACQ,IAAI,EAAE;;GAGZtE,OAAO,CAACpC,MAAM,EAAEiD,oBAAoB,EACpC;KACC,IAAI,CAACjD,MAAM,GAAGA,MAAM;KACpB,IAAI,CAACiD,oBAAoB,GAAGA,oBAAoB;KAChD,IAAI,CAAC0D,kBAAkB,GAAG,IAAI,CAAC1F,WAAW,CAACmB,OAAO,CAACpC,MAAM,EAAE,IAAI,CAAC2E,cAAc,EAAE,CAAC,CAACnE,UAAU,EAAE;KAC9FwF,aAAG,CAACY,OAAO,CAACC,QAAQ,CAACC,aAAa,CAAC,6BAA6B,CAAC,EAAE,IAAI,CAACH,kBAAkB,CAAC;KAC3F,IAAI,CAAC3C,cAAc,EAAE;;CAEvB;;CCrNa;GAAA3B;GAAAC;GAAAC;GAAAC;GAAAC;GAAAsE;GAAAC;GAAA;GAAA;GAAA;GAAA;AAEb,CAIe,MAAMC,aAAa,CAClC;GAICnH,WAAW,CAACC,OAAO,EACnB;KAAA,KAJAmH,cAAc,GAAG,CAAC;KAAA,KAClBC,aAAa,GAAG,EAAE;KAIjB,IAAI,CAACpH,OAAO,GAAGA,OAAO;KACtB,IAAI,CAACqH,kBAAkB,GAAG,IAAI,CAACrH,OAAO,CAACqH,kBAAkB;;GAG1DC,qBAAqB,GACrB;KACC,IAAI,CAAC,IAAI,CAACC,kBAAkB,EAC5B;OACC,IAAI,CAACA,kBAAkB,GAAG,IAAI,CAACF,kBAAkB,CAACG,oBAAoB,EAAE,CAAClH,cAAc,CACtF,IAAI,CAAC+G,kBAAkB,EACvB,IAAI,CAACA,kBAAkB,CAACI,aAAa,EAAE,CACvC;;KAGF,OAAO,IAAI,CAACF,kBAAkB;;GAG/BG,QAAQ,CAACC,YAAY,EACrB;KACC,IAAIC,cAAI,CAACC,aAAa,CAACF,YAAY,CAAC,EACpC;OACC1B,aAAG,CAAC6B,MAAM,CAAC,IAAI,CAACrH,UAAU,EAAE,EAAEkH,YAAY,CAAC;;;GAI7ClH,UAAU,GACV;KACC,IAAI,CAACsH,QAAQ,GAAGpH,aAAG,CAACC,MAAM,oBAAC;;;OAGxB,CAAqB;;;;QAIpB,CAAkB;QAClB,CAAyB;;OAE1B,CAAwB;;;GAG3B,GAVK,IAAI,CAACoH,WAAW,EAAE,EAIjB,IAAI,CAACC,QAAQ,EAAE,EACf,IAAI,CAACC,eAAe,EAAE,EAEvB,IAAI,CAACC,cAAc,EAAE,CAGzB;KAED,OAAO,IAAI,CAACJ,QAAQ;;GAGrBC,WAAW,GACX;KACC,OAAOrH,aAAG,CAACC,MAAM,sBAAC,wDAAqD,CAA6C,UAAQ,GAAnD,IAAI,CAACyG,kBAAkB,CAACe,gBAAgB,EAAE;;GAGpHH,QAAQ,GACR;KACC,OAAO,IAAI,CAACZ,kBAAkB,CAACgB,iBAAiB,EAAE;;GAGnDH,eAAe,GACf;KACC,IAAI,CAACI,YAAY,GAAG3H,aAAG,CAACC,MAAM,sBAAC;;;;;GAK/B,EAAC;KACD,OAAO,IAAI,CAAC0H,YAAY;;GAGzBC,aAAa,CAACC,IAAI,EAClB;KACC,IAAI,CAACT,QAAQ,CAACU,SAAS,GAAG,8BAA8B;KACxD,IAAI,CAACH,YAAY,CAACG,SAAS,GAAG,6BAA6B;KAE3D,QAAQD,IAAI;OAEX,KAAK,IAAI,CAACnB,kBAAkB,CAACqB,cAAc;SAC1CzC,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACZ,QAAQ,EAAE,WAAW,CAAC;SACxC,IAAI,CAACa,qBAAqB,CAAC/H,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC,EAAE,KAAK,CAAC;SACjF;OACD,KAAK,IAAI,CAACuG,kBAAkB,CAACwB,cAAc;SAC1C5C,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACZ,QAAQ,EAAE,YAAY,CAAC;SACzC,IAAI,CAACa,qBAAqB,CAAC,IAAI,CAACE,cAAc,CAAC,IAAI,CAACzB,kBAAkB,CAAC0B,WAAW,EAAE,CAAC,CAAC;SACtF;OACD,KAAK,IAAI,CAAC1B,kBAAkB,CAAC2B,aAAa;SACzC,IAAI,IAAI,CAAC3B,kBAAkB,CAAC4B,6BAA6B,EAAE,EAC3D;WACChD,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACZ,QAAQ,EAAE,mBAAmB,CAAC;WAChD9B,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACL,YAAY,EAAE,mBAAmB,CAAC;WACpD,MAAMY,cAAc,GAAG,IAAI,CAAC7B,kBAAkB,CAAC8B,uBAAuB,EAAE;WAExE,IAAI,CAACP,qBAAqB,CACzB/H,aAAG,CAACC,UAAU,CACb,sCAAsC,EACtC;aAAE,QAAQ,EAAEoI,cAAc,KAAK,QAAQ,GAAG,QAAQ,GAAGE,cAAI,CAACC,UAAU,CAACH,cAAc;YAAG,CACtF,EACD,KAAK,CACL;UACD,MAED;WACCjD,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACZ,QAAQ,EAAE,SAAS,CAAC;WACtC,IAAI,CAACa,qBAAqB,CAAC/H,aAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC,CAAC;;SAEzE;OACD,KAAK,IAAI,CAACuG,kBAAkB,CAACiC,cAAc;SAC1CrD,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACZ,QAAQ,EAAE,WAAW,CAAC;SACxC,IAAI,CAACa,qBAAqB,CAAC,EAAE,CAAC;SAC9B;OACD,KAAK,IAAI,CAACvB,kBAAkB,CAACkC,oBAAoB;SAChDtD,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACZ,QAAQ,EAAE,UAAU,CAAC;SACvC,IAAI,CAACa,qBAAqB,CAAC/H,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,CAAC;SAChF;OACD,KAAK,IAAI,CAACuG,kBAAkB,CAACmC,oBAAoB;SAChD,IAAI,IAAI,CAACnC,kBAAkB,CAACoC,0BAA0B,EACtD;WACCxD,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACZ,QAAQ,EAAE,OAAO,CAAC;WACpC,IAAI,CAACa,qBAAqB,CAAC/H,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC,EAAE,KAAK,CAAC;UACjF,MAED;WACC,IAAI,CAAC8H,qBAAqB,CAAC,EAAE,CAAC;;SAE/B;OACD;SACC;;KAGF,IAAI,CAACc,aAAa,EAAE;;GAGrBd,qBAAqB,CAACe,IAAI,EAAEC,SAAS,GAAG,IAAI,EAC5C;KACC,MAAMC,kBAAkB,GAAG,IAAI,CAACvB,YAAY,CAACvB,aAAa,CAAC,8BAA8B,CAAC;KAC1F,IAAIa,cAAI,CAACC,aAAa,CAACgC,kBAAkB,CAAC,EAC1C;OACCA,kBAAkB,CAACC,SAAS,GAAGF,SAAS,GAAGR,cAAI,CAACW,MAAM,CAACJ,IAAI,CAAC,CAACK,WAAW,EAAE,GAAGZ,cAAI,CAACW,MAAM,CAACJ,IAAI,CAAC;;;GAIhGxB,cAAc,GACd;KACC,IAAI,CAACP,cAAI,CAACC,aAAa,CAAC,IAAI,CAACoC,WAAW,CAAC,EACzC;OACC,IAAI,CAACA,WAAW,GAAGtJ,aAAG,CAACC,MAAM,sBAAC;MAC7B,CAAmB;MACnB,CAAuB;UAClB,GAFH,IAAI,CAACsJ,SAAS,EAAE,EAChB,IAAI,CAACC,aAAa,EAAE,CAChB;;KAGR,OAAO,IAAI,CAACF,WAAW;;GAGxBP,aAAa,GACb;KACCzD,aAAG,CAACC,KAAK,CAAC,IAAI,CAAC+D,WAAW,CAAC;KAC3BhE,aAAG,CAAC6B,MAAM,CAAC,IAAI,CAACoC,SAAS,EAAE,EAAE,IAAI,CAACD,WAAW,CAAC;KAC9ChE,aAAG,CAAC6B,MAAM,CAAC,IAAI,CAACqC,aAAa,EAAE,EAAE,IAAI,CAACF,WAAW,CAAC;;GAGnDC,SAAS,GACT;KACC,IAAI,IAAI,CAAC7C,kBAAkB,CAACoC,0BAA0B,EACtD;OACC,OAAO,IAAI;;KAGZ,QAAQ,IAAI,CAACpC,kBAAkB,CAAC+C,SAAS,EAAE;OAE1C,KAAK,IAAI,CAAC/C,kBAAkB,CAACwB,cAAc;SAC1C,IAAI,CAACwB,MAAM,GAAG1J,aAAG,CAACC,MAAM,sBAAC;;QAEvB,CAA8C;;KAEhD,GAFIC,aAAG,CAACC,UAAU,CAAC,2BAA2B,CAAC,CAE9C;SACD;OACD,KAAK,IAAI,CAACuG,kBAAkB,CAAC2B,aAAa;SACzC,IAAI,IAAI,CAAC3B,kBAAkB,CAAC4B,6BAA6B,EAAE,EAC3D;WACC,MAAMqB,sBAAsB,GAAG,IAAI,CAACjD,kBAAkB,CAACkD,yBAAyB,EAAE;WAElF,IAAI,CAACF,MAAM,GAAG1J,aAAG,CAACC,MAAM,sBAAC;;;UAGtB,CAAuD;mEACE,CAAyB;;MAErF,GAHKC,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,EACKwJ,sBAAsB,CAEnF;WAEDE,eAAK,CAACC,IAAI,CAAC,IAAI,CAACJ,MAAM,EAAE,OAAO,EAAE,MAAM,IAAI,CAAC/C,qBAAqB,EAAE,CAACoD,SAAS,EAAE,CAAC;UAChF,MAED;WACC,IAAI,CAACL,MAAM,GAAG1J,aAAG,CAACC,MAAM,sBAAC;;SAEvB,CAA6C;;MAE/C,GAFIC,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC,CAE7C;;SAEF;OACD,KAAK,IAAI,CAACuG,kBAAkB,CAACiC,cAAc;SAC1C,IAAI,CAACe,MAAM,GAAG1J,aAAG,CAACC,MAAM,kBAAC;;QAEvB,CAA8C;;KAEhD,GAFIC,aAAG,CAACC,UAAU,CAAC,2BAA2B,CAAC,CAE9C;SACD;OACD,KAAK,IAAI,CAACuG,kBAAkB,CAACmC,oBAAoB;SAChD,IAAI,CAACa,MAAM,GAAG1J,aAAG,CAACC,MAAM,kBAAC;;QAEvB,CAAoD;;KAEtD,GAFIC,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC,CAEpD;SACD0J,eAAK,CAACC,IAAI,CAAC,IAAI,CAACJ,MAAM,EAAE,OAAO,EAAE,IAAI,CAACM,eAAe,CAACF,IAAI,CAAC,IAAI,CAAC,CAAC;SACjE;OACD,KAAK,IAAI,CAACpD,kBAAkB,CAACkC,oBAAoB;SAChD,IAAI,CAACc,MAAM,GAAG1J,aAAG,CAACC,MAAM,oBAAC;;QAEvB,CAA8C;;KAEhD,GAFIC,aAAG,CAACC,UAAU,CAAC,2BAA2B,CAAC,CAE9C;SACD;OACD;SACC;;KAEF,OAAO,IAAI,CAACuJ,MAAM;;GAGnBF,aAAa,GACb;KACC,IAAI,CAACS,UAAU,GAAGjK,aAAG,CAACC,MAAM,oBAAC;;;;;GAK7B,EAAC;KAED4J,eAAK,CAACC,IAAI,CAAC,IAAI,CAACG,UAAU,EAAE,OAAO,EAAE,IAAI,CAACD,eAAe,CAACF,IAAI,CAAC,IAAI,CAAC,CAAC;KAErE,OAAO,IAAI,CAACG,UAAU;;GAGvBD,eAAe,CAACE,CAAC,EACjB;KACC,MAAM5K,MAAM,GAAG,IAAI,CAACoH,kBAAkB,CAAC+C,SAAS,EAAE;KAElD,IAAI,CAAC,IAAI,CAAC/C,kBAAkB,CAACwB,cAAc,EAAE,IAAI,CAACxB,kBAAkB,CAAC2B,aAAa,EAAE,IAAI,CAAC3B,kBAAkB,CAACqB,cAAc,CAAC,CAACoC,QAAQ,CAAC7K,MAAM,CAAC,EAC5I;OACC,IAAI,IAAI,CAACoH,kBAAkB,CAAC0D,OAAO,EAAE,EACrC;SACC,IAAI,CAAC1D,kBAAkB,CAAC2D,QAAQ,CAACC,gBAAgB,CAAC,IAAI,CAACL,UAAU,CAAC,CAACM,OAAO,KAAK,MAAM,GAAG,IAAI,CAACN,UAAU,GAAG,IAAI,CAACP,MAAM,CAAC;QACtH,MACI,IAAI,IAAI,CAAChD,kBAAkB,CAAC5B,gBAAgB,EAAE,EACnD;SACC,IAAI,CAAC4B,kBAAkB,CAAC8D,0BAA0B,CAAC,IAAI,CAAC9D,kBAAkB,CAACI,aAAa,EAAE,CAAC;QAC3F,MAED;SACC,IAAI,CAACJ,kBAAkB,CAAC+D,wBAAwB,EAAE;;MAEnD,MACI,IAAInL,MAAM,KAAK,IAAI,CAACoH,kBAAkB,CAACmC,oBAAoB,EAChE;OACC,IAAI,CAAClC,qBAAqB,EAAE,CAAC+D,mBAAmB,EAAE;;;GAIpDvC,cAAc,CAACwC,IAAI,EACnB;KACC,MAAMC,GAAG,GAAG,IAAIC,IAAI,EAAE;KACtB,IAAIC,SAAS,GAAGH,IAAI;KACpB,IAAI1D,cAAI,CAAC8D,MAAM,CAACJ,IAAI,CAAC,EACrB;OACCG,SAAS,GAAGE,IAAI,CAACC,KAAK,CAACN,IAAI,CAACO,OAAO,EAAE,GAAG,IAAI,CAAC;OAC7C,MAAMC,UAAU,GAAGC,QAAQ,CAAC,CAACR,GAAG,GAAGD,IAAI,IAAI,IAAI,EAAE,EAAE,CAAC;OACpD,IAAIQ,UAAU,GAAG,EAAE,EACnB;SACC,OAAOjL,aAAG,CAACC,UAAU,CAAC,UAAU,CAAC;;;KAInC,IAAI2K,SAAS,KAAK,IAAI,EACtB;OACC,OAAO5K,aAAG,CAACC,UAAU,CAAC,UAAU,CAAC;;KAGlC,OAAOuC,EAAE,CAACiI,IAAI,CAACU,MAAM,CACpB,CACC,CAAC,UAAU,EAAE,iBAAiB,CAAC,EAC/B,CAAC,GAAG,EAAG,MAAM,CAAC,EACd,CAAC,GAAG,EAAE,MAAM,CAAC,EACb,CAAC,GAAG,EAAE,MAAM,CAAC,EACb,CAAC,MAAM,EAAE,MAAM,CAAC,EAChB,CAAC,GAAG,EAAE,MAAM,CAAC,EACb,CAAC,GAAG,EAAE,EAAE,CAAC,CACT,EACDP,SAAS,CACT;;CAEH;;CCtTa;GAAAnJ;GAAAC;GAAAC;GAAAC;GAAAC;GAAAsE;GAAAC;AAEb,CAKe,MAAMgF,SAAS,CAC9B;GAOClM,WAAW,CAACC,OAAO,EACnB;KAAA,KAPA4C,qBAAqB,GAAG,sBAAsB;KAAA,KAC9CsJ,aAAa,GAAG,QAAQ;KAAA,KACxBrJ,YAAY,GAAG,GAAG;KAAA,KAClBC,WAAW,GAAG,iBAAiB;KAAA,KAC/BC,KAAK,GAAG,IAAIC,eAAK,CAACC,WAAW,EAAE;KAI9B,IAAI,CAAChD,MAAM,GAAGD,OAAO,CAACC,MAAM;KAC5B,IAAI,CAACiD,oBAAoB,GAAGlD,OAAO,CAACkD,oBAAoB;KACxD,IAAI,CAACC,MAAM,GAAGnD,OAAO,CAACmD,MAAM;KAC5B,IAAI,CAACE,EAAE,GAAG8I,MAAM,CAACC,GAAG,CAAC/I,EAAE,IAAI8I,MAAM,CAAC9I,EAAE;;GAGrCD,UAAU,GACV;KACCC,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAAC,IAAI,CAACZ,qBAAqB,EAAE;OACtDa,eAAe,EAAGC,MAAM,IAAK;SAC5B,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;WACvCD,OAAO,CAAC,IAAI,CAACnD,UAAU,EAAE,CAAC;UAC1B,CAAC;QACF;OACDqD,kBAAkB,EAAE,KAAK;OACzBC,MAAM,EAAE;SACPC,MAAM,EAAE,MAAM;WACb,IAAI,CAACqI,sBAAsB,EAAE;;QAE9B;OACDnI,SAAS,EAAE,KAAK;OAChBC,KAAK,EAAE,IAAI,CAACtB,YAAY;OACxBuB,MAAM,EAAE,IAAI,CAACtB;MACb,CAAC;;GAGHrC,UAAU,GACV;KACC,OAAOE,aAAG,CAACC,MAAM,oBAAC;;MAEhB,CAA0B;;MAE1B,CAAgC;MAChC,CAA0B;;;GAG5B,GANI,IAAI,CAAC0L,gBAAgB,EAAE,EAEvB,IAAI,CAACC,sBAAsB,EAAE,EAC7B,IAAI,CAACC,gBAAgB,EAAE;;GAM5BF,gBAAgB,GAChB;KACC,OAAO3L,aAAG,CAACC,MAAM,sBAAC;;;;gDAI0B,CAAuC;oDACnC,CAAuC;;;GAGvF,GAJ8CC,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC,EAChCD,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC;;GAMvFyL,sBAAsB,GACtB;KACC,IAAI,CAACE,mBAAmB,GAAG9L,aAAG,CAACC,MAAM,sBAAC;;;GAGtC,EAAC;KAED,OAAO,IAAI,CAAC6L,mBAAmB;;GAGhCD,gBAAgB,GAChB;KACC,OAAO7L,aAAG,CAACC,MAAM,sBAAC;;MAEhB,CAAmC;;;MAGnC,CAAmC;;;MAGnC,CAAyB;;GAE3B,GARI,IAAI,CAAC8L,yBAAyB,EAAE,EAGhC,IAAI,CAACC,yBAAyB,EAAE,EAGhC,IAAI,CAACC,eAAe,EAAE;;GAK3BF,yBAAyB,GACzB;KACC,MAAMG,gBAAgB,GAAG7H,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC/B,oBAAoB,CAAC,CAAC0C,MAAM,CAACT,IAAI,IAAI;OAChF,OAAOA,IAAI,CAACU,SAAS,IAAIV,IAAI,CAAClF,MAAM;MACpC,CAAC,CAACoF,MAAM,GAAG,CAAC;KAEb,OAAO1E,aAAG,CAACC,MAAM,sBAAC;yDACmC,CAA0C;MAC7F,CAAwC;;GAE1C,GAHwDiM,gBAAgB,GAAG,aAAa,GAAG,EAAE,EACzFhM,aAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC;;GAK1C6L,yBAAyB,GACzB;KACC,MAAMG,IAAI,GAAGnM,aAAG,CAACC,MAAM,sBAAC;;MAEtB,CAA6C;;GAE/C,GAFIC,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC,CAE7C;KACD0J,eAAK,CAACC,IAAI,CAACqC,IAAI,EAAE,OAAO,EAAE,MAAM;OAC9B,IAAI,CAACC,kBAAkB,GAAG,IAAIpK,kBAAkB,CAAC;SAChDO,oBAAoB,EAAE,IAAI,CAACA,oBAAoB;SAC/CC,MAAM,EAAE,IAAI,CAACA,MAAM;SACnBlD,MAAM,EAAE,IAAI,CAACA;QACb,CAAC;OACF,IAAI,CAAC8M,kBAAkB,CAAC3J,UAAU,EAAE;MACrC,CAAC;KAEF,OAAO0J,IAAI;;GAGZF,eAAe,GACf;KACC,MAAME,IAAI,GAAGnM,aAAG,CAACC,MAAM,sBAAC;8CACkB,CAAuC;GACjF,GAD4CC,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC,CAC/E;KACD0J,eAAK,CAACC,IAAI,CAACqC,IAAI,EAAE,OAAO,EAAE,MAAM;OAC/B,IAAG,IAAI,CAACzJ,EAAE,CAAC2J,MAAM,EACjB;SACC,IAAI,CAAC3J,EAAE,CAAC2J,MAAM,CAAClL,IAAI,CAAC,uBAAuB,GAAG,IAAI,CAACoK,aAAa,CAAC;;MAElE,CAAC;KAEF,OAAOY,IAAI;;GAGZlI,cAAc,GACd;KACC,MAAM1E,WAAW,GAAG,EAAE;KACtB,MAAM6E,KAAK,GAAGC,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC/B,oBAAoB,CAAC;KACtD6B,KAAK,CAACG,OAAO,CAACC,IAAI,IAClB;OACC,MAAMC,eAAe,GAAGD,IAAI,CAACP,cAAc,EAAE;OAC7C,IAAIQ,eAAe,CAACC,MAAM,GAAG,CAAC,EAC9B;SACCD,eAAe,CAACF,OAAO,CAACI,UAAU,IAAI;WAErC,IAAIC,oCAAc,CAACC,gBAAgB,CAACF,UAAU,CAAC,IAAIA,UAAU,CAACG,gBAAgB,EAAE,KAAK,IAAI,EACzF;aACCvF,WAAW,CAACwF,IAAI,CAACJ,UAAU,CAAC;;UAE7B,CAAC;;MAEH,CAAC;KAEF,OAAOpF,WAAW;;GAGnBmM,sBAAsB,GACtB;KACC,MAAMtH,KAAK,GAAGC,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC/B,oBAAoB,CAAC,CAAC0C,MAAM,CAACT,IAAI,IAAI;OACrE,OAAOA,IAAI,CAACU,SAAS,IAAIV,IAAI,CAAC8H,SAAS;MACvC,CAAC;KAEF,IAAI,CAACC,qBAAqB,CAACnI,KAAK,CAAC;;GAGlCmI,qBAAqB,CAACC,SAAS,EAC/B;KACClH,aAAG,CAACC,KAAK,CAAC,IAAI,CAACuG,mBAAmB,CAAC;KACnCU,SAAS,CAACjI,OAAO,CAAEkI,QAAQ,IAAK;OAC/B,MAAMC,aAAa,GAAG,IAAInG,aAAa,CAAC;SAACG,kBAAkB,EAAE+F;QAAS,CAAC;OACvEA,QAAQ,CAACE,gBAAgB,CAACD,aAAa,CAAC;OACxCA,aAAa,CAAC3F,QAAQ,CAAC,IAAI,CAAC+E,mBAAmB,CAAC;OAChDY,aAAa,CAAC9E,aAAa,CAAC6E,QAAQ,CAAChD,SAAS,EAAE,CAAC;MACjD,CAAC;;GAGHzE,kBAAkB,CAACZ,KAAK,EACxB;KACC,MAAMiB,OAAO,GAAG,IAAI,CAACvB,oBAAoB,EAAE;KAC3CwB,aAAG,CAACC,KAAK,CAACF,OAAO,CAAC;KAClB,MAAMG,IAAI,GAAG,IAAI9C,EAAE,CAAC+C,QAAQ,CAACC,IAAI,CAAC;OACjCjE,EAAE,EAAE,eAAe;OACnB2C,KAAK,EAAEA,KAAK;OACZuB,SAAS,EAAEN,OAAO;OAClBO,SAAS,EAAE,KAAK;OAChBC,YAAY,EAAE,GAAG;OACjBC,UAAU,EAAE,CAAC;OACbC,QAAQ,EAAE,qCAAqC;OAC/CvD,MAAM,EAAE,IAAI,CAACA;MACb,CAAC;KAEFgD,IAAI,CAACQ,IAAI,EAAE;;GAGZtE,OAAO,CAACpC,MAAM,EAAEiD,oBAAoB,EACpC;KAAA;KACC,IAAI,CAACjD,MAAM,GAAGA,MAAM;KACpB,IAAI,CAACiD,oBAAoB,GAAGA,oBAAoB;KAChD+C,aAAG,CAACY,OAAO,CAACC,QAAQ,CAACC,aAAa,CAAC,6BAA6B,CAAC,EAAE,IAAI,CAACH,kBAAkB,CAAC;KAC3F,IAAI,CAACyF,sBAAsB,EAAE;KAC7B,6BAAI,CAACU,kBAAkB,qBAAvB,sBAAyB1K,OAAO,CAACpC,MAAM,EAAEiD,oBAAoB,CAAC;;CAEhE;;CCjNa;GAAAZ;GAAAC;GAAAC;GAAAC;AAEb,CAIe,MAAM8K,QAAQ,SAASlK,EAAE,CAAC+C,QAAQ,CAACoH,IAAI,CACtD;GACCzN,WAAW,CAACoF,IAAI,EAChB;KACC,KAAK,CAAC;OACL/C,EAAE,EAAE+C,IAAI,CAACsI;MACT,CAAC;KACF,IAAI,CAACtI,IAAI,GAAGA,IAAI;;GAGjB1E,UAAU,GACV;KACC,IAAI,CAACiN,QAAQ,GAAG/M,aAAG,CAACC,MAAM,oBAAC,kCAA+B,CAAmC,YAAS,CAA0B;;MAE9H,CAAkB;MAClB,CAAkB;MAClB,CAA4C;;SAExC,GANsD,IAAI,CAAC+M,yBAAyB,EAAE,EAAY,IAAI,CAACC,gBAAgB,EAAE,EAE3H,IAAI,CAACC,QAAQ,EAAE,EACf,IAAI,CAAC5F,QAAQ,EAAE,EACd,IAAI,CAAC6F,QAAQ,EAAE,GAAG,IAAI,CAAC1D,SAAS,EAAE,GAAG,EAAE,CAErC;KAEP,IAAI,CAACsD,QAAQ,CAAC3M,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAACgN,OAAO,CAACtD,IAAI,CAAC,IAAI,CAAC,CAAC;KAEhE,OAAO,IAAI,CAACiD,QAAQ;;GAGrBzF,QAAQ,GACR;KACC,IAAI,CAAC,IAAI,CAAC+F,MAAM,CAACC,KAAK,EACtB;OACC,IAAI,CAACD,MAAM,CAACC,KAAK,GAAGtN,aAAG,CAACC,MAAM,sBAAE;4CACO,CAAqD,QAAM,GAAzDyC,EAAE,CAAC6K,IAAI,CAACC,gBAAgB,CAAC,IAAI,CAAChJ,IAAI,CAACiJ,YAAY,EAAE,CAAC,CAAQ;;KAGpG,OAAO,IAAI,CAACJ,MAAM,CAACC,KAAK;;GAGzBJ,QAAQ,GACR;KACC,OAAOlN,aAAG,CAACC,MAAM,sBAAE;;0EAEmD,CAAyC;UACxG,GADiE,MAAM,GAAG,IAAI,CAACuE,IAAI,CAACkJ,WAAW,EAAE,GAAG,GAAG;;GAI/GjE,SAAS,GACT;KACC,IAAI,IAAI,CAAC0D,QAAQ,EAAE,EACnB;OACC,OAAOnN,aAAG,CAACC,MAAM,sBAAE;;IAEnB;;KAGD,OAAO,EAAE;;GAGVkN,QAAQ,GACR;KACC,OAAO,IAAI,CAAC3I,IAAI,CAACM,gBAAgB,EAAE;;GAGpCkI,yBAAyB,GACzB;KACC,IAAI,IAAI,CAACG,QAAQ,EAAE,EACnB;OACC,IAAI,IAAI,CAAC3I,IAAI,CAACmJ,aAAa,EAAE,EAC7B;SACC,OAAO,6BAA6B;QACpC,MAED;SACC,OAAO,2BAA2B;;MAEnC,MAED;OACC,OAAO,EAAE;;;GAIXV,gBAAgB,GAChB;KACC,IAAI,IAAI,CAACE,QAAQ,EAAE,EACnB;OACC,OAAO,mBAAmB,GAAG,IAAI,CAAC3I,IAAI,CAACoJ,YAAY,EAAE,GAAG,GAAG;MAC3D,MAED;OACC,OAAO,EAAE;;;GAIXR,OAAO,GACP;KACC,IAAI,IAAI,CAAC5I,IAAI,CAAC4F,OAAO,EAAE,EACvB;OACC,IAAI,CAAC5F,IAAI,CAAC6F,QAAQ,CAAC,IAAI,CAAC0C,QAAQ,CAAC;MACjC,MACI,IAAI,IAAI,CAACvI,IAAI,CAACM,gBAAgB,EAAE,EACrC;OACC,IAAI,CAACN,IAAI,CAACgG,0BAA0B,CAAC,IAAI,CAAChG,IAAI,CAACsC,aAAa,EAAE,CAAC;MAC/D,MAED;OACC,IAAI,CAACtC,IAAI,CAACiG,wBAAwB,EAAE;;;CAGvC;;CCjHa;GAAA9I;GAAAC;GAAAC;GAAAC;GAAAC;GAAAsE;AAEb,CAEe,MAAMwH,kBAAkB,CACvC;GAKCzO,WAAW,CAACC,OAAO,GAAG,IAAI,EAC1B;KAAA,KALAyO,QAAQ,GAAG,IAAI;KAAA,KACfC,MAAM,GAAG,IAAI;KAAA,KACbC,cAAc,GAAG,IAAI;KAIpB,IAAI,CAACC,aAAa,GAAG/N,aAAG,CAACC,UAAU,CAAC,mBAAmB,CAAC;KACxD,IAAI,CAAC+N,gBAAgB,GAAGhO,aAAG,CAACC,UAAU,CAAC,sBAAsB,CAAC;KAC9D,IAAI,CAACgO,cAAc,GAAGjO,aAAG,CAACC,UAAU,CAAC,gBAAgB,CAAC;KAEtD,IAAId,OAAO,KAAK,IAAI,EACpB;OACC,IAAI,CAACyO,QAAQ,GAAGpL,EAAE,CAAC6K,IAAI,CAACC,gBAAgB,CAACnO,OAAO,CAACyO,QAAQ,CAAC;OAC1D,IAAI,CAACC,MAAM,GAAGrL,EAAE,CAAC6K,IAAI,CAACC,gBAAgB,CAACnO,OAAO,CAAC0O,MAAM,CAAC;OACtD,IAAI,CAACC,cAAc,GAAGtL,EAAE,CAAC6K,IAAI,CAACC,gBAAgB,CAACnO,OAAO,CAAC2O,cAAc,CAAC;;;GAIxEI,UAAU,GACV;KACC,OAAOpO,aAAG,CAACC,MAAM,oBAAE;;GAEnB;;GAGDoO,OAAO,GACP;KACC,OAAOrO,aAAG,CAACC,MAAM,sBAAC;;;;gEAI0C,CAAkC,yBAAsB,CAA4B;;;;;gEAKpF,CAA4C,2BAAwB,CAAoB;;;;;gEAKxF,CAAuC,8BAA2B,CAAsB;;;;;oFAKpE,CAAsC;;;;GAItH,GAnB8DC,aAAG,CAACC,UAAU,CAAC,eAAe,CAAC,EAAyB,IAAI,CAAC6N,cAAc,IAAI,EAAE,EAKjF9N,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC,EAA2B,IAAI,CAAC4N,MAAM,IAAI,EAAE,EAKrF7N,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC,EAA8B,IAAI,CAAC2N,QAAQ,IAAI,EAAE,EAKjE5N,aAAG,CAACC,UAAU,CAAC,mBAAmB,CAAC;;GAOtHmO,YAAY,GACZ;KACC,OAAOtO,aAAG,CAACC,MAAM,sBAAE;oEAC6C,CAAqB;GACrF,GADkE,IAAI,CAACgO,aAAa;;GAIrFM,mBAAmB,GACnB;KACC,OAAOvO,aAAG,CAACC,MAAM,sBAAC;gGAC0E,CAAwB;GACpH,GAD8F,IAAI,CAACiO,gBAAgB;;GAIpHM,aAAa,GACb;KACC,OAAOxO,aAAG,CAACC,MAAM,sBAAC;kGAC4E,CAAsB;GACpH,GADgG,IAAI,CAACkO,cAAc;;GAIpHM,gBAAgB,GAChB;KACC,OAAOzO,aAAG,CAACC,MAAM,sBAAC;;GAElB;;CAEF;;CCnFe,MAAMyO,gBAAgB,CACrC;GAKCtP,WAAW,CAACC,OAAO,GAAG,EAAE,EACxB;KAAA,KALAsP,MAAM,GAAG,IAAI;KAAA,KACbC,GAAG,GAAG,EAAE;KAAA,KACRC,GAAG,GAAG,IAAI;KAIT,IAAI,CAAC/B,IAAI,GAAGzN,OAAO,CAACyN,IAAI;KACxB,IAAI,CAACgC,YAAY,GAAGzP,OAAO,CAACyP,YAAY,IAAI,UAAU;KACtD,IAAI,CAACC,qBAAqB,GAAG,IAAI,CAACjC,IAAI,KAAK,SAAS,GACjDkC,kBAAI,CAACC,iBAAiB,EAAE,GACxBD,kBAAI,CAACE,iBAAiB,EAAE;KAG3B,IAAI,CAACC,MAAM,GAAG,IAAI;;GAGnBhO,IAAI,GACJ;KAAA;KACC,oBAAI,CAACgO,MAAM,2BAAX,IAAI,CAACA,MAAM,GAAK,IAAIC,kCAAe,CAAC;OACnC9B,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC;OACjDkP,OAAO,EAAEnP,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC;OAC7CmP,MAAM,EAAE,IAAI,CAACxC,IAAI,GAAG,sBAAsB,GAAG,sBAAsB;OACnEyC,kBAAkB,EAAE,IAAI;OACxBC,UAAU,EAAE;MACZ,CAAC;KAEF,IAAI,CAACL,MAAM,CAAChO,IAAI,EAAE;;CAEpB;;CChCa;GAAAQ;GAAAC;GAAAC;GAAAC;GAAAC;GAAAsE;GAAAC;GAAAmJ;GAAAC;GAAAC;GAAAC;GAAA;GAAA;GAAA;GAAA;GAAA;GAAA;GAAA;AAEb,CAIO,MAAMC,iBAAiB,SAASC,6BAAY,CACnD;GAOC1Q,WAAW,CAACC,OAAO,EACnB;KACC,KAAK,EAAE;KAAC,KARTmH,cAAc,GAAG,CAAC;KAAA,KAElBuJ,WAAW,GAAG,GAAG;KAAA,KAEjBC,WAAW,GAAG,KAAK;KAKlB,IAAI,CAACC,iBAAiB,CAAC,8CAA8C,CAAC;KAEtE,IAAI,CAAC3C,KAAK,GAAGjO,OAAO,CAACiO,KAAK;KAC1B,IAAI,CAAC4C,YAAY,GAAG7Q,OAAO,CAACyP,YAAY;KACxC,IAAI,CAACqB,eAAe,GAAG9Q,OAAO,CAAC8Q,eAAe;KAC9C,IAAI,CAACC,qBAAqB,GAAG/Q,OAAO,CAAC+Q,qBAAqB;KAC1D,IAAI,CAACC,iBAAiB,GAAGhR,OAAO,CAACgR,iBAAiB;KAClD,IAAI,CAACC,uBAAuB,GAAGjR,OAAO,CAACiR,uBAAuB;KAC9D,IAAI,CAACC,eAAe,GAAGlR,OAAO,CAACkR,eAAe;KAC9C,IAAI,CAACC,QAAQ,GAAGnR,OAAO,CAACmR,QAAQ;KAChC,IAAI,CAACC,aAAa,GAAGpR,OAAO,CAACoR,aAAa,IAAI,EAAE;KAChD,IAAI,CAACC,KAAK,GAAGrR,OAAO,CAACqR,KAAK;KAC1B,IAAI,CAACjE,QAAQ,GAAGpN,OAAO,CAACoN,QAAQ;KAChC,IAAI,CAAC9H,UAAU,GAAGtF,OAAO,CAACsF,UAAU;KACpC,IAAI,CAAClF,qBAAqB,GAAGJ,OAAO,CAACI,qBAAqB;;GAG3D,OAAOE,cAAc,CAAC8M,QAAQ,EAAE9H,UAAU,GAAG,IAAI,EACjD;KACC,OAAO,IAAI,IAAI,CAAC8H,QAAQ,EAAE9H,UAAU,CAAC;;GAGtCgM,wBAAwB,GACxB;KACC,OAAO3Q,aAAG,CAACC,MAAM,oBAAC;;;+CAGyB,CAAwB;;MAEjE,CAA4B;;GAE9B,GAJ6C,IAAI,CAAC2Q,cAAc,EAAE,EAE9D,IAAI,CAACC,kBAAkB,EAAE;;GAK9BC,0BAA0B,GAC1B;KACC,MAAMhG,SAAS,GAAG,IAAI,CAACnG,UAAU,CAACyD,WAAW,EAAE,CAAC8C,OAAO,EAAE,GAAG,IAAI;KAChE,MAAM6F,QAAQ,GAAGjG,SAAS,GACtB,GAAEkE,kBAAI,CAACgC,gBAAgB,CAAClG,SAAS,CAAE,IAAGpI,EAAE,CAACiI,IAAI,CAACU,MAAM,CAAC2D,kBAAI,CAACiC,kBAAkB,EAAE,EAAEnG,SAAS,CAAE,EAAC,GAC7F,EAAE;KAEL,OAAO9K,aAAG,CAACC,MAAM,sBAAC;wCACkB,CAAgC;;sDAElB,CAA0B;;;OAGzE,CAAgE;OAChE,CAAgC;;MAEjC,CAAyB;;GAE3B,GAVsC,IAAI,CAACiR,sBAAsB,EAAE,EAEf,IAAI,CAACC,gBAAgB,EAAE,EAGtEzO,EAAE,CAAC6K,IAAI,CAACC,gBAAgB,CAAC,IAAI,CAAC7I,UAAU,CAACyM,iBAAiB,EAAE,CAAC,EAC7D,IAAI,CAACC,cAAc,CAACN,QAAQ,CAAC,EAE9B,IAAI,CAACO,eAAe,EAAE;;GAK3BD,cAAc,CAACN,QAAgB,EAC/B;KACC,IAAI,IAAI,CAACpM,UAAU,CAACrF,MAAM,KAAK,KAAK,IAAI,IAAI,CAACmN,QAAQ,CAAChD,SAAS,EAAE,KAAK,QAAQ,IAAI,IAAI,CAACgD,QAAQ,CAACnE,6BAA6B,EAAE,EAC/H;OACC,MAAMC,cAAc,GAAGE,cAAI,CAACW,MAAM,CAAC,IAAI,CAACqD,QAAQ,CAACjE,uBAAuB,EAAE,CAAC;OAE3E,OAAOxI,aAAG,CAACC,MAAM,sBAAC;;;OAGhB,CAGE;;IAEJ,GALIC,aAAG,CAACC,UAAU,CACjB,sCAAsC,EACtC;SAAE,QAAQ,EAAEoI,cAAc,KAAK,QAAQ,GAAG,QAAQ,GAAGE,cAAI,CAACC,UAAU,CAACH,cAAc;QAAG,CACpF;;KAKJ,OAAOvI,aAAG,CAACC,MAAM,sBAAC;;;MAGhB,CAAW;;GAEb,GAFI8Q,QAAQ;;GAKbQ,0BAA0B,GAC1B;KACC,IAAI,CAACC,gBAAgB,GAAG,IAAI,CAACjD,mBAAmB,EAAE;KAElD,OAAOvO,aAAG,CAACC,MAAM,sBAAC;;;+CAGyB,CAAwB;;;;;SAK9D,CAA8B;;;;;OAKhC,CAAwB;;;GAG3B,GAb6C,IAAI,CAAC2Q,cAAc,EAAE,EAK3D,IAAI,CAACa,oBAAoB,EAAE,EAK7B,IAAI,CAACD,gBAAgB;;GAM3BF,eAAe,GACf;KACC,IAAI,IAAI,CAAC3M,UAAU,CAACrF,MAAM,KAAK,KAAK,IAAI,IAAI,CAACmN,QAAQ,CAAChD,SAAS,EAAE,KAAK,QAAQ,IAAI,IAAI,CAACgD,QAAQ,CAACnE,6BAA6B,EAAE,EAC/H;OACC,IAAI,CAACoJ,YAAY,GAAG1R,aAAG,CAACC,MAAM,sBAAC;;;OAG7B,CAAuD;mDACX,CAAsB;;IAEpE,GAHIC,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC,EACR,IAAI,CAACqG,cAAc,CAElE;OAEDqD,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC4H,YAAY,EAAE,OAAO,EAAE,MAAM,IAAI,CAAC3H,SAAS,EAAE,CAAC;MAC9D,MACI,IAAI,IAAI,CAAC0C,QAAQ,CAAChD,SAAS,EAAE,KAAK,SAAS,EAChD;OACC,IAAI,CAACiI,YAAY,GAAG1R,aAAG,CAACC,MAAM,sBAAC;;mDAEe,CAAsB;;IAEpE,GAFgD,IAAI,CAACuG,cAAc,CAElE;MACD,MAED;OACC,MAAM;SAAEmL,IAAI;SAAEC;QAAM,GAAG5R,aAAG,CAACC,MAAM,sBAAC;;;OAGhC,CAAgC;;IAElC,GAFIC,aAAG,CAACC,UAAU,CAAC,aAAa,CAAC,CAEhC;OACD,IAAI,CAACuR,YAAY,GAAGC,IAAI;OACxB,IAAI,CAACE,gBAAgB,GAAGD,IAAI;OAE5B/H,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC4H,YAAY,EAAE,OAAO,EAAE,MAAM,IAAI,CAACI,gBAAgB,EAAE,CAAC;;KAGtE,OAAO,IAAI,CAACJ,YAAY;;GAGzBI,gBAAgB,GAChB;KACC,IAAI,IAAI,CAAC9B,WAAW,EACpB;OACC;;KAGD,IAAI,CAAC+B,uBAAuB,EAAE;KAE9B,OAAO,IAAI/O,OAAO,CAAEC,OAAO,IAAK;OAC/BP,EAAE,CAACsP,IAAI,CAACC,SAAS,CAAC,wCAAwC,EAAE;SAC3DC,IAAI,EAAE;WACLpF,IAAI,EAAE,MAAM;WACZqF,UAAU,EAAEnD,kBAAI,CAACoD,iBAAiB;;QAEnC,CAAC,CAACC,IAAI,CAAEC,QAAQ,IAAK;SACrBxC,6BAAY,CAACyC,IAAI,CAAC,wDAAwD,EAAE;WAC3EL,IAAI,EAAEI,QAAQ,CAACJ,IAAI;WACnBM,KAAK,EAAE;aAAEC,mBAAmB,EAAE;;UAC9B,CAAC;SACF,IAAI,CAACC,qBAAqB,EAAE;SAC5BzP,OAAO,EAAE;QACT,CAAC;MACF,CAAC;;GAGH8O,uBAAuB,GACvB;KACC,IAAI,CAAC/B,WAAW,GAAG,IAAI;KACvB1K,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAAC6J,gBAAgB,EAAE,UAAU,CAAC;KAC/CvM,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAAC0J,YAAY,EAAE,cAAc,CAAC;KAC/CpM,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACwJ,gBAAgB,EAAE,iBAAiB,CAAC;KACtDlM,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAAC2K,eAAe,EAAE,YAAY,CAAC;;GAGjDD,qBAAqB,GACrB;KACC,IAAI,CAAC1C,WAAW,GAAG,KAAK;KACxB1K,aAAG,CAACsN,WAAW,CAAC,IAAI,CAACf,gBAAgB,EAAE,UAAU,CAAC;KAClDvM,aAAG,CAACsN,WAAW,CAAC,IAAI,CAAClB,YAAY,EAAE,cAAc,CAAC;KAClDpM,aAAG,CAACsN,WAAW,CAAC,IAAI,CAACpB,gBAAgB,EAAE,iBAAiB,CAAC;KACzDlM,aAAG,CAACsN,WAAW,CAAC,IAAI,CAACD,eAAe,EAAE,YAAY,CAAC;KACnD,IAAI,CAAClG,QAAQ,CAACoG,WAAW,EAAE;;GAG5BhC,kBAAkB,GAClB;KACC,OAAO7Q,aAAG,CAACC,MAAM,sBAAC;KACjB,CAAkC;GACnC,GADG,IAAI,CAAC6S,wBAAwB,EAAE;;GAInCrB,oBAAoB,GACpB;KACC,OAAOzR,aAAG,CAACC,MAAM,wBAAC;KACjB,CAAoC;KACpC,CAA4C;KAC5C,CAA6C;GAC9C,GAHG,IAAI,CAAC6Q,0BAA0B,EAAE,EACjC,IAAI,CAACiC,kCAAkC,EAAE,EACzC,IAAI,CAACC,mCAAmC,EAAE;;GAI9CC,QAAQ,CAACT,KAAK,EACd;KACC,IAAI/G,GAAG,CAAC/I,EAAE,CAAC2J,MAAM,EACjB;OACCZ,GAAG,CAAC/I,EAAE,CAAC2J,MAAM,CAAClL,IAAI,CAAE,wBAAuB,IAAI,CAAC+O,YAAa,EAAC,CAAC;OAC/DsC,KAAK,CAACU,cAAc,EAAE;;;GAIxBC,eAAe,GACf;KACC,OAAQ,qCAAoC,IAAI,CAACjD,YAAa,EAAC;;GAGhEU,cAAc,GACd;KACC,OAAO,IAAI,CAACtD,KAAK;;GAGlB6D,gBAAgB,GAChB;KACC,OAAO,IAAI,CAACV,aAAa;;GAG1BqC,wBAAwB,GACxB;KACC,IAAI,CAAC,IAAI,CAACM,cAAc,EACxB;OACC,IAAI,CAACA,cAAc,GAAGpT,aAAG,CAACC,MAAM,wBAAC;;oDAEc,CAAuB;;;SAGlE,CAAuB;;;;UAItB,CAA6B;;;QAG/B,CAAwC;;;IAG3C,GAbiD,IAAI,CAACsQ,eAAe,EAG/D,IAAI,CAACJ,eAAe,EAInB,IAAI,CAACC,qBAAqB,EAG5B,IAAI,CAACiD,8BAA8B,EAAE,CAGzC;;KAGF,OAAO,IAAI,CAACD,cAAc;;GAG3BC,8BAA8B,GAC9B;KACC,OAAOrT,aAAG,CAACC,MAAM,oBAAC;;;qFAG+D,CAA2B;QACxG,CAA6C;;;;GAIjD,GALmF,IAAI,CAACgT,QAAQ,CAACnJ,IAAI,CAAC,IAAI,CAAC,EACrG5J,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC;;GAOjDmT,qBAAqB,GACrB;KACC,MAAMC,gBAAgB,GAAG,IAAI,CAACC,0BAA0B,EAAE;KAC1D,IAAI,IAAI,CAACzE,qBAAqB,EAC9B;OACClF,eAAK,CAACC,IAAI,CAACyJ,gBAAgB,EAAE,OAAO,EAAE,IAAI,CAACE,+BAA+B,CAAC3J,IAAI,CAAC,IAAI,CAAC,CAAC;MACtF,MAED;OACCD,eAAK,CAACC,IAAI,CAACyJ,gBAAgB,EAAE,OAAO,EAAE,IAAI,CAACG,8BAA8B,CAAC5J,IAAI,CAAC,IAAI,CAAC,CAAC;;KAGtF,OAAO9J,aAAG,CAACC,MAAM,oBAAC;;;sCAGgB,CAAmB;;;gDAGT,CAAmB;;GAE/D,GALoC,IAAI,CAAC0T,WAAW,EAGNJ,gBAAgB;;GAK/DC,0BAA0B,GAC1B;KACC,OAAOxT,aAAG,CAACC,MAAM,oBAAC;;MAEhB,CAA4B;;GAE9B,GAFI,IAAI,CAAC2T,oBAAoB;;GAK9BC,WAAW,CAACpH,QAAQ,EACpB;KACC,IAAI,CAACA,QAAQ,GAAGA,QAAQ;;;;GAIzBqH,2BAA2B,CAACrS,EAAE,EAC9B;KACCiB,EAAE,CAACsP,IAAI,CAACC,SAAS,CAAC,wCAAwC,EAAE;OAC3DC,IAAI,EAAE;SACL6B,YAAY,EAAEtS,EAAE;SAChBuS,eAAe,EAAE,GAAG;;MAErB,CAAC,CAAC3B,IAAI,CAAC,MAAM;OACb3P,EAAE,CAACuR,MAAM,EAAE;MACX,CAAC;;GAGHC,aAAa,GACb;KACCxR,EAAE,CAACsP,IAAI,CAACC,SAAS,CAAC,4CAA4C,EAAE;OAC/DC,IAAI,EAAE;SACLiC,aAAa,EAAE,IAAI,CAACC;;MAErB,CAAC,CAAC/B,IAAI,CAAEC,QAAQ,IAAK;OACrB,IAAI,CAACC,IAAI,CAAC,oBAAoB,EAAE,EAAE,CAAC;MACnC,CAAC;;GAGH7Q,OAAO,CAACiD,UAAU,EAClB;KAAA;KACC,IAAI,CAACA,UAAU,GAAGA,UAAU;KAC5B,IAAI,IAAI,CAACA,UAAU,EACnB;OAAA;OACC,yBAAI,CAACpE,WAAW,qBAAhB,kBACGX,SAAS,CAAC,IAAI,CAAC+E,UAAU,CAAC8E,SAAS,EAAE,CAAC,CACvC5J,cAAc,CAAC,CAAC,IAAI,CAAC8E,UAAU,CAAC,CAAC;;KAIpCW,aAAG,CAACY,OAAO,CAACC,QAAQ,CAACkO,cAAc,CAAC,mBAAmB,CAAC,wBAAE,IAAI,CAAC9T,WAAW,qBAAhB,mBAAkBT,UAAU,EAAE,CAAC;;GAG1FiK,SAAS,GACT;KACC,IAAI,CAAC,IAAI,CAAC0C,QAAQ,CAACnE,6BAA6B,EAAE,EAClD;OACC;;KAGD,IAAI,CAACmE,QAAQ,CAAC6H,iBAAiB,EAAE;KACjC,IAAI,CAAC5J,mBAAmB,EAAE;KAC1B,IAAI,CAAC+B,QAAQ,CAACoG,WAAW,EAAE;;GAG5BnI,mBAAmB,GACnB;GAGA6D,mBAAmB,GACnB;;;;;;;;KAQC,MAAM7E,MAAM,GAAG1J,aAAG,CAACC,MAAM,oBAAC;;MAExB,CAA+C;;GAEjD,GAFIC,aAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC,CAE/C;KAED0J,eAAK,CAACC,IAAI,CAACJ,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC6K,sBAAsB,CAACzK,IAAI,CAAC,IAAI,CAAC,CAAC;KAEnE,OAAOJ,MAAM;;GAGdwH,sBAAsB,GACtB;KACC,OAAO,IAAI,CAACzE,QAAQ,CAAChD,SAAS,EAAE,KAAK,SAAS,IAAI,IAAI,CAAC9E,UAAU,CAACrF,MAAM,KAAK,IAAI,GAC9E,YAAY,GACX,IAAI,CAACmN,QAAQ,CAACnE,6BAA6B,EAAE,GAAG,mBAAmB,GAAG,SAAU;;GAIrFyK,kCAAkC,GAClC;KACC,OAAO/S,aAAG,CAACC,MAAM,oBAAC;8CACwB,CAAiD;GAC3F,GAD4CC,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC;;GAI3F6S,mCAAmC,GACnC;KACC,IAAI,CAACL,eAAe,GAAG3S,aAAG,CAACC,MAAM,oBAAC;;MAEhC,CAAsC;;GAExC,GAFI,IAAI,CAACuU,4BAA4B,EAAE,CAEtC;KAED,OAAO,IAAI,CAAC7B,eAAe;;GAG5B6B,4BAA4B,GAC5B;KACC,MAAMC,WAAW,GAAG,EAAE;KACtB,IAAI,CAACA,WAAW,CAAClQ,OAAO,CAAEmQ,OAAO,IAAK;OACrCD,WAAW,CAAC1P,IAAI,CAAC/E,aAAG,CAACC,MAAM,oBAAC;;;eAGlB,CAAuC;iBACrC,CAAsC,KAAE,CAA0C;4DACvC,CAAyC;;IAEhG,GAJYyC,EAAE,CAAC6K,IAAI,CAACC,gBAAgB,CAACkH,OAAO,CAACC,EAAE,CAAC,EAClC,IAAI,CAACC,mBAAmB,CAAC9K,IAAI,CAAC,IAAI,CAAC,EAAK4K,OAAO,CAACG,MAAM,KAAK,GAAG,GAAG,SAAS,GAAG,EAAE,EACpCnS,EAAE,CAAC6K,IAAI,CAACC,gBAAgB,CAACkH,OAAO,CAACI,IAAI,CAAC,EAE7F;MACF,CAAC;KAEF,OAAOL,WAAW;;GAGnBM,iCAAiC,GACjC;KACC/F,kBAAI,CAACgG,gBAAgB,CACpB9U,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC,CAChD;;GAGFoU,sBAAsB,CAAC/B,KAAK,EAC5B;KACC,IAAIvL,cAAI,CAACC,aAAa,CAAC,IAAI,CAACsK,gBAAgB,CAAC,EAC7C;OACClM,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACwJ,gBAAgB,EAAE,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;;KAEzEgB,KAAK,CAACU,cAAc,EAAE;;KAEtB,IAAI,CAACY,2BAA2B,CAAC,IAAI,CAACnP,UAAU,CAACsQ,KAAK,EAAE,CAAC;;GAG1DC,oBAAoB,CAACzT,EAAE,EACvB;KACCiB,EAAE,CAACsP,IAAI,CAACC,SAAS,CAAC,4CAA4C,EAAE;OAC/DC,IAAI,EAAE;SACL6B,YAAY,EAAEtS,EAAE;SAChBuS,eAAe,EAAE,GAAG;;MAErB,CAAC,CAAC3B,IAAI,CAAC,MAAM;OACb,IAAI,CAAC5F,QAAQ,CAACoG,WAAW,EAAE;OAC3B,IAAI,CAACpG,QAAQ,CAAC7M,SAAS,CAAC,IAAI,CAAC6M,QAAQ,CAAC5D,oBAAoB,CAAC;OAC3D,IAAI,CAAC4D,QAAQ,CAAC0I,gBAAgB,EAAE,CAACpM,aAAa,EAAE;OAChD,IAAI,CAAC0D,QAAQ,CAAC0I,gBAAgB,EAAE,CAACvN,aAAa,CAAC,IAAI,CAAC6E,QAAQ,CAAC5D,oBAAoB,CAAC;OAElF,IAAI,CAAC0J,IAAI,CAAC,oBAAoB,EAAE,EAAE,CAAC;MACnC,CAAC;;CAEJ;CAhda1C,iBAAiB,CAGtB3N,YAAY,GAAG,GAAG;CAHb2N,iBAAiB,CAKtBuF,aAAa,GAAG,2BAA2B;;CCZtC;GAAAzT;GAAAC;AAEb,CAIO,MAAMyT,uBAAuB,SAASxF,iBAAiB,CAC9D;GACCzQ,WAAW,CAACC,OAAO,EACnB;KACC,KAAK,CAACA,OAAO,CAAC;;GAGfwR,kBAAkB,GAClB;KACC,IAAIxR,OAAO,GAAG,IAAI;KAClB,IAAI,IAAI,CAACsF,UAAU,KAAK,IAAI,EAC5B;OACCtF,OAAO,GAAG;SACT0O,MAAM,EAAE,IAAI,CAACpJ,UAAU,CAAC2Q,SAAS,CAACvH,MAAM;SACxCD,QAAQ,EAAE,IAAI,CAACnJ,UAAU,CAAC2Q,SAAS,CAACxH,QAAQ;SAC5CE,cAAc,EAAE,IAAI,CAACrJ,UAAU,CAACqJ;QAChC;;KAGF,MAAMuH,UAAU,GAAG,IAAI1H,kBAAkB,CAACxO,OAAO,CAAC;KAClD,MAAMmW,SAAS,GAAGD,UAAU,CAACnH,UAAU,EAAE;KACzC,MAAMqH,IAAI,GAAGF,UAAU,CAAClH,OAAO,EAAE;KACjC,MAAM3E,MAAM,GAAG6L,UAAU,CAACjH,YAAY,EAAE;KACxC,MAAMoH,aAAa,GAAGH,UAAU,CAAC9G,gBAAgB,EAAE;KACnD,MAAMkH,UAAU,GAAG,IAAI,CAAC7C,wBAAwB,EAAE;KAElDpJ,MAAM,CAACtJ,gBAAgB,CAAC,OAAO,EAAGoS,KAAK,IAAK;OAC3ClN,aAAG,CAAC0C,QAAQ,CAAC0B,MAAM,EAAE,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;OACzD8I,KAAK,CAACU,cAAc,EAAE;OACtB,IAAI,CAAC0C,wBAAwB,CAACH,IAAI,CAAC;MACnC,CAAC;KAEFnQ,aAAG,CAAC6B,MAAM,CAACuC,MAAM,EAAEgM,aAAa,CAAC;KACjCpQ,aAAG,CAAC6B,MAAM,CAACuO,aAAa,EAAED,IAAI,CAAC;KAC/BnQ,aAAG,CAAC6B,MAAM,CAACsO,IAAI,EAAED,SAAS,CAAC;KAE3B,OAAOxV,aAAG,CAACC,MAAM,oBAAC;KACjB,CAAa;KACb,CAAY;GACb,GAFG0V,UAAU,EACVH,SAAS;;GAIb/D,oBAAoB,GACpB;KACC,MAAM8D,UAAU,GAAG,IAAI1H,kBAAkB,CAAC;OACzCE,MAAM,EAAE,IAAI,CAACpJ,UAAU,CAAC2Q,SAAS,CAACvH,MAAM;OACxCD,QAAQ,EAAE,IAAI,CAACnJ,UAAU,CAAC2Q,SAAS,CAACxH,QAAQ;OAC5CE,cAAc,EAAE,IAAI,CAACrJ,UAAU,CAACqJ;MAChC,CAAC;KACF,MAAMwH,SAAS,GAAGD,UAAU,CAACnH,UAAU,EAAE;KACzC,MAAMqH,IAAI,GAAGF,UAAU,CAAClH,OAAO,EAAE;KACjC,MAAMsH,UAAU,GAAG,IAAI,CAAC7E,0BAA0B,EAAE;KACpDxL,aAAG,CAAC6B,MAAM,CAACsO,IAAI,EAAED,SAAS,CAAC;KAE3B,OAAOxV,aAAG,CAACC,MAAM,sBAAC;KACjB,CAAa;KACb,CAAY;GACb,GAFG0V,UAAU,EACVH,SAAS;;GAIbI,wBAAwB,CAACH,IAAI,EAC7B;KACC,MAAMI,EAAE,GAAG,IAAIC,QAAQ,CAACL,IAAI,CAAC;KAC7B/S,EAAE,CAACsP,IAAI,CAACC,SAAS,CAAC,qCAAqC,EAAE;OACxDC,IAAI,EAAE;SACL6D,IAAI,EAAEF,EAAE,CAACG,GAAG,CAAC,MAAM,CAAC;SACpBjI,MAAM,EAAE8H,EAAE,CAACG,GAAG,CAAC,QAAQ,CAAC;SACxBlI,QAAQ,EAAE+H,EAAE,CAACG,GAAG,CAAC,WAAW,CAAC;SAC7BC,IAAI,EAAEJ,EAAE,CAACG,GAAG,CAAC,UAAU;;MAExB,CAAC,CAAC3D,IAAI,CAAEC,QAAQ,IAAK;OACrB5P,EAAE,CAACuR,MAAM,EAAE;MACX,EAAE3B,QAAQ,IAAI;OACd,MAAM5I,MAAM,GAAG+L,IAAI,CAACrP,aAAa,CAAC,iBAAiB,CAAC;OACpD,IAAI,CAAC8P,cAAc,CAAC5D,QAAQ,CAAC6D,MAAM,CAAC,CAAC,CAAC,EAAEzM,MAAM,CAAC;MAC/C,CAAC;;GAGHwM,cAAc,CAACE,KAAK,EAAE1M,MAAM,EAC5B;KACC,IAAI2M,OAAO,GAAG,EAAE;KAChB,IAAID,KAAK,CAACE,IAAI,KAAK,sBAAsB,EACzC;OACCD,OAAO,GAAGnW,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC;MAC/D,MACI,IAAIiW,KAAK,CAACE,IAAI,KAAK,cAAc,EACtC;OACCD,OAAO,GAAGnW,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;MACvD,MAED;OACCkW,OAAO,GAAGnW,aAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC;;KAGnD,MAAMoW,UAAU,GAAG,IAAI7T,EAAE,CAAC8T,EAAE,CAACC,OAAO,CAACC,UAAU,CAAC;OAC/CL,OAAO,EAAEA,OAAO;OAChB/I,KAAK,EAAE8I,KAAK,CAACC,OAAO;OACpBM,OAAO,EAAEjU,EAAE,CAAC8T,EAAE,CAACC,OAAO,CAACG,iBAAiB,CAACC,EAAE;OAC3CC,SAAS,EAAE5W,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC;OAC/D4W,QAAQ,EAAE,GAAG;OACbC,gBAAgB,EAAE,KAAK;OACvBC,YAAY,EAAE;SACbtI,MAAM,EAAE,IAAI;SACZuI,MAAM,EAAE,GAAG;SACX1T,KAAK,EAAE,GAAG;SACVsE,SAAS,EAAE;QACX;OACDqP,IAAI,EAAE,MAAM;SACX7R,aAAG,CAACsN,WAAW,CAAClJ,MAAM,EAAE,CAAC,cAAc,EAAE,iBAAiB,CAAC,CAAC;SAC5D,OAAO,IAAI;;MAEZ,CAAC;KAEF6M,UAAU,CAACpV,IAAI,EAAE;;GAGlBuJ,mBAAmB,GACnB;KACC,IAAI,CAAC+B,QAAQ,CAAChC,wBAAwB,CAAC,IAAI,CAACgC,QAAQ,CAAC2K,wBAAwB,EAAE,CAAC;;CAElF;;CCzHe,MAAMC,cAAc,SAAShC,uBAAuB,CACnE;GACCjW,WAAW,CAACqN,QAAQ,EAAE9H,UAAU,GAAG,IAAI,EACvC;KACC,KAAK,CAAC;OACL2I,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC;OAC9C2O,YAAY,EAAE,SAAS;OACvBqB,eAAe,EAAEjQ,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;OAC9DiQ,qBAAqB,EAAElQ,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;OACvEkQ,iBAAiB,EAAEnQ,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;OACnEmQ,uBAAuB,EAAEpQ,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;OAC1EoQ,eAAe,EAAE,yCAAyC;OAC1DC,QAAQ,EAAE,yCAAyC;OACnDE,KAAK,EAAE,SAAS;OAChBjE,QAAQ,EAAEA,QAAQ;OAClB9H,UAAU,EAAEA,UAAU;OACtBlF,qBAAqB,EAAE;MACvB,CAAC;;CAEJ;;CCxBa;GAAAkC;GAAAC;GAAAC;GAAAC;AAEb,CAIe,MAAMwV,gBAAgB,SAASzH,iBAAiB,CAC/D;GACCzQ,WAAW,CAACqN,QAAQ,EAAE9H,UAAU,GAAG,IAAI,EACvC;KACC,KAAK,CAAC;OACL2I,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC;OAChD2O,YAAY,EAAE,SAAS;OACvBqB,eAAe,EAAEjQ,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC;OAChEiQ,qBAAqB,EAAElQ,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC;OACzEkQ,iBAAiB,EAAEnQ,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC;OACrEmQ,uBAAuB,EAAEpQ,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;OAC5EoQ,eAAe,EAAE,yCAAyC;OAC1DE,aAAa,EAAE,YAAY;OAC3BD,QAAQ,EAAE,2CAA2C;OACrDE,KAAK,EAAE,SAAS;OAChBjE,QAAQ,EAAEA,QAAQ;OAClB9H,UAAU,EAAEA,UAAU;OACtBlF,qBAAqB,EAAE;MACvB,CAAC;;GAGHgS,oBAAoB,GACpB;KACC,OAAOzR,aAAG,CAACC,MAAM,oBAAC;KACjB,CAAoC;KACpC,CAAwB;KACxB,CAA0B;GAC3B,GAHG,IAAI,CAAC6Q,0BAA0B,EAAE,EACjC,IAAI,CAACyG,cAAc,EAAE,EACrB,IAAI,CAACC,gBAAgB,EAAE;;GAI3B1G,0BAA0B,GAC1B;KAEC,MAAMhG,SAAS,GAAG,IAAI,CAACnG,UAAU,CAACyD,WAAW,EAAE,CAAC8C,OAAO,EAAE,GAAG,IAAI;KAChE,MAAM6F,QAAQ,GAAGjG,SAAS,GACvBkE,kBAAI,CAACgC,gBAAgB,CAAClG,SAAS,CAAC,GAAG,GAAG,GAAGpI,EAAE,CAACiI,IAAI,CAACU,MAAM,CAAC2D,kBAAI,CAACiC,kBAAkB,EAAE,EAAEnG,SAAS,CAAC,GAC7F,EAAE;KAEL,OAAO9K,aAAG,CAACC,MAAM,sBAAC;wCACkB,CAAgC;;sDAElB,CAA0B;;;OAGzE,CAAgE;;;QAG/D,CAAW;;;;IAId,GAZqC,IAAI,CAACiR,sBAAsB,EAAE,EAEf,IAAI,CAACC,gBAAgB,EAAE,EAGtEzO,EAAE,CAAC6K,IAAI,CAACC,gBAAgB,CAAC,IAAI,CAAC7I,UAAU,CAACyM,iBAAiB,EAAE,CAAC,EAG5DL,QAAQ;;GAOfwG,cAAc,GACd;KACC,OAAOvX,aAAG,CAACC,MAAM,sBAAC;;MAEhB,CAAsD;;GAExD,GAFIC,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;;GAKxDqX,gBAAgB,GAChB;KACC,OAAOxX,aAAG,CAACC,MAAM,sBAAC;;oFAE8D,CAA2B;OACxG,CAA6C;;;GAGhD,GAJkF,IAAI,CAACgT,QAAQ,CAACnJ,IAAI,CAAC,IAAI,CAAC,EACrG5J,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC;;CAKjD;;CC9Ea;GAAAwB;GAAAC;GAAAC;GAAAC;GAAAC;GAAAsE;GAAAC;GAAAmJ;GAAAC;GAAAC;GAAAC;GAAA6H;GAAAC;GAAAC;GAAAC;AAEb,CAKe,MAAMC,UAAU,SAAS/H,6BAAY,CACpD;;;GAYC1Q,WAAW,CAACC,OAAO,GAAG,EAAE,EACxB;KACC,KAAK,EAAE;KAAC,KAbTyY,IAAI,GAAG,WAAW;KAAA,KAClBC,WAAW,GAAG,6BAA6B;KAAA,KAC3C7V,YAAY,GAAG,GAAG;KAAA,KAClBC,WAAW,GAAG,iBAAiB;KAAA,KAC/BC,KAAK,GAAG,IAAIC,eAAK,CAACC,WAAW,EAAE;KAAA,KAC/B0V,cAAc,GAAG,EAAE;KAAA,KACnBC,WAAW,GAAG,EAAE;KAAA,KAChB1M,aAAa,GAAG,QAAQ;KAAA,KACxB2M,sBAAsB,GAAG,IAAI;KAAA,KAC7BC,cAAc,GAAG,IAAI;KAKpB,IAAI,CAAClI,iBAAiB,CAAC,uCAAuC,CAAC;KAE/D,IAAI,CAACvN,EAAE,GAAG8I,MAAM,CAACC,GAAG,CAAC/I,EAAE,IAAI8I,MAAM,CAAC9I,EAAE;KAEpC,IAAI,CAAC0V,sBAAsB,GAAG,IAAI,CAACC,kBAAkB,CAACvO,IAAI,CAAC,IAAI,CAAC;KAChE,IAAI,CAACwO,wBAAwB,GAAGzN,IAAI,CAACD,GAAG,EAAE;KAC1C,IAAI,CAAC2N,aAAa,GAAG,EAAE;KAEvB,IAAI,CAAC1Q,IAAI,GAAGZ,cAAI,CAACuR,cAAc,CAACnZ,OAAO,CAACwI,IAAI,CAAC,GAAG,IAAI,CAAC4Q,gBAAgB,CAACpZ,OAAO,CAACwI,IAAI,CAAC,GAAG,SAAS;;GAGhG4Q,gBAAgB,CAAC5Q,IAAY,EAC7B;KACC,IAAI,CAAC,SAAS,EAAE,WAAW,CAAC,CAACsC,QAAQ,CAACtC,IAAI,CAAC,EAC3C;OACC,OAAOA,IAAI;;KAGZ,OAAO,SAAS;;GAGjBpF,UAAU,GACV;KACC,MAAM4M,OAAO,GAAG,IAAI,CAACvP,UAAU,EAAE;KACjC,IAAI,IAAI,CAAC+H,IAAI,KAAK,WAAW,EAC7B;OACCnF,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACC,IAAI,CAAC,IAAI,CAACkV,WAAW,EAAE;SAC5CjV,eAAe,EAAGC,MAAM,IAAK;WAC5B,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;aACvCD,OAAO,CAACoM,OAAO,CAAC;YAChB,CAAC;UACF;SACDlM,kBAAkB,EAAE,KAAK;SACzBC,MAAM,EAAE;WACPC,MAAM,EAAE,MAAM;aACb,IAAI,CAACqV,iBAAiB,EAAE;aACxB,IAAI,CAACC,mBAAmB,EAAE;YAC1B;WACDC,SAAS,EAAE,IAAI,CAACC,iBAAiB,CAAC/O,IAAI,CAAC,IAAI;UAC3C;SACDvG,SAAS,EAAE,KAAK;SAChBC,KAAK,EAAE,IAAI,CAACtB,YAAY;SACxBuB,MAAM,EAAE,IAAI,CAACtB;QACb,CAAC;;KAGH,IAAI,CAACY,MAAM,GAAGL,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACkW,YAAY,EAAE;KAClD,IAAI,CAACC,cAAc,GAAG,KAAK;KAC3B,IAAI,CAACC,WAAW,GAAG,KAAK;;GAGzBlZ,UAAU,GACV;KACC,OAAOE,aAAG,CAACC,MAAM,oBAAC;;;;QAId,CAAyB;QACzB,CAA8B;QAC9B,CAA8B;QAC9B,CAAyB;QACzB,CAA8B;QAC9B,CAA4B;QAC5B,CAA0B;;;;GAI9B,GAVM,IAAI,CAACgZ,eAAe,EAAE,EACtB,IAAI,CAACC,oBAAoB,EAAE,EAC3B,IAAI,CAACC,oBAAoB,EAAE,EAC3B,IAAI,CAACC,eAAe,EAAE,EACtB,IAAI,CAACC,oBAAoB,EAAE,EAC3B,IAAI,CAACC,kBAAkB,EAAE,EACzB,IAAI,CAAC7K,gBAAgB,EAAE;;GAO9BwK,eAAe,GACf;KACC,IAAI,CAACM,gBAAgB,GAAGvZ,aAAG,CAACC,MAAM,sBAAC;;;sDAGe,CAA0B;;;OAGzE,CAA4B;;;QAG3B,CAA6B;;;;GAIjC,GAVoD,IAAI,CAACkR,gBAAgB,EAAE,EAGtE,IAAI,CAACqI,kBAAkB,EAAE,EAGxB,IAAI,CAACC,mBAAmB,EAAE,CAI/B;KACD,OAAO,IAAI,CAACF,gBAAgB;;GAG7BL,oBAAoB,GACpB;KACC,IAAI,CAACQ,iBAAiB,GAAG1Z,aAAG,CAACC,MAAM,sBAAC,+CAA6C,EAAC;KAClF,OAAO,IAAI,CAACyZ,iBAAiB;;GAG9BP,oBAAoB,GACpB;KACC,IAAI,CAACQ,iBAAiB,GAAG3Z,aAAG,CAACC,MAAM,sBAAC;;;sDAGc,CAA2C;wDACzC,CAA2C;;;GAG/F,GAJoDC,aAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC,EACtCD,aAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC,CAG7F;KACD,OAAO,IAAI,CAACwZ,iBAAiB;;GAG9BP,eAAe,GACf;KACC,IAAI,CAACQ,YAAY,GAAG5Z,aAAG,CAACC,MAAM,sBAAC;;;;;SAK1B,CAAqC;;QAEtC,CAAqC;;;GAGzC,GALOC,aAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC,EAEnCD,aAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC,CAGvC;KACD,OAAO,IAAI,CAACyZ,YAAY;;GAGzBN,kBAAkB,GAClB;KACC,IAAI,CAACO,eAAe,GAAG7Z,aAAG,CAACC,MAAM,sBAAC;;GAElC,EAAC;KACD,OAAO,IAAI,CAAC4Z,eAAe;;GAG5BR,oBAAoB,GACpB;KACC,IAAI,CAACS,iBAAiB,GAAG9Z,aAAG,CAACC,MAAM,sBAAC;;GAEpC,EAAC;KACD,OAAO,IAAI,CAAC6Z,iBAAiB;;GAG9BrL,gBAAgB,GAChB;KACC,IAAI,CAACiH,aAAa,GAAG1V,aAAG,CAACC,MAAM,sBAAC;;;OAG7B,CAAwC;;;OAGxC,CAAkD;;;OAGlD,CAAoC;;;GAGvC,GATKC,aAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC,EAGrCD,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC,EAG/CD,aAAG,CAACC,UAAU,CAAC,iBAAiB,CAAC,CAGrC;KAED,OAAO,IAAI,CAACuV,aAAa;;GAG1BqE,sBAAsB,GACtB;KACC,IAAI,CAACC,mBAAmB,GAAGha,aAAG,CAACC,MAAM,sBAAC;;GAEtC,EAAC;KACD,OAAO,IAAI,CAAC+Z,mBAAmB;;GAGhCC,kBAAkB,GAClB;KACC,IAAI,CAACC,eAAe,GAAGla,aAAG,CAACC,MAAM,wBAAC;;;;;;;;;;iDAUW,CAA0B;;;GAGvE,GAH+C,IAAI,CAACka,gBAAgB,EAAE,CAGrE;KACD,OAAO,IAAI,CAACD,eAAe;;GAG5BC,gBAAgB,GAChB;KACC,OAAO,EAAE;;GAGVpO,yBAAyB,GACzB;KACC,MAAMG,gBAAgB,GAAG7H,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC/B,oBAAoB,CAAC,CAAC0C,MAAM,CAACT,IAAI,IAAI;OAChF,OAAOA,IAAI,CAACU,SAAS,IAAIV,IAAI,CAAClF,MAAM;MACpC,CAAC,CAACoF,MAAM,GAAG,CAAC;KAEb,OAAO1E,aAAG,CAACC,MAAM,wBAAC;yDACmC,CAA0C;MAC7F,CAAwC;;GAE1C,GAHwDiM,gBAAgB,GAAG,aAAa,GAAG,EAAE,EACzFhM,aAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC;;GAK1CqZ,kBAAkB,GAClB;KACC,IAAI,CAACvS,cAAI,CAACC,aAAa,CAAC,IAAI,CAACkT,eAAe,CAAC,EAC7C;OACC,IAAI,CAACA,eAAe,GAAGpa,aAAG,CAACC,MAAM,wBAAC;+CACQ,CAAwB;GACnE,GAD6C,IAAI,CAACoa,cAAc,EAAE,CACjE;;KAED,OAAO,IAAI,CAACD,eAAe;;GAG5BE,cAAc,CAACC,KAAK,EACpB;KACC,IAAI,CAACtC,WAAW,GAAGsC,KAAK;;GAGzBF,cAAc,GACd;KACC,OAAO,IAAI,CAACpC,WAAW;;GAGxBwB,mBAAmB,GACnB;KACC,IAAI,CAACxS,cAAI,CAACC,aAAa,CAAC,IAAI,CAACsT,gBAAgB,CAAC,EAC9C;OACC,IAAI,CAACA,gBAAgB,GAAGxa,aAAG,CAACC,MAAM,wBAAC;;;QAGhC,CAAgD;;;IAGnD,GAHKC,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC,CAGjD;OAED,IAAI,CAACsa,mBAAmB,CAAC,IAAI,CAACD,gBAAgB,CAAC;;KAGhD,OAAO,IAAI,CAACA,gBAAgB;;GAG7BC,mBAAmB,CAACC,UAAU,EAC9B;KACC,MAAMC,gBAAgB,GAAG,CACxBza,aAAG,CAACC,UAAU,CAAC,4CAA4C,CAAC,EAC5DD,aAAG,CAACC,UAAU,CAAC,6CAA6C,CAAC,CAC7D;KAED,IAAIya,QAAQ,GAAG,CAAC;KAEhB,IAAI,CAACC,sBAAsB,GAAGC,WAAW,CAAC,MAAM;OAC/C,MAAMC,iBAAiB,GAAGL,UAAU,CAACM,iBAAiB;OACtD,IAAI,IAAI,CAACC,SAAS,CAACF,iBAAiB,CAACG,SAAS,CAAC,GAAG,CAAC,EACnD;SACCH,iBAAiB,CAACG,SAAS,IAAI,GAAG;SAClCR,UAAU,CAACS,KAAK,CAAC3X,KAAK,GAAIuX,iBAAiB,CAACK,WAAW,GAAG,CAAC,GAAI,IAAI;SACnE;;OAED,IAAIR,QAAQ,GAAG,CAAC,EAChB;SACCA,QAAQ,EAAE;SACVG,iBAAiB,CAACG,SAAS,GAAGH,iBAAiB,CAACG,SAAS,CAACG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;SACtE;;OAEDT,QAAQ,GAAG,CAAC;OAEZ,IAAID,gBAAgB,CAACjW,MAAM,GAAG,CAAC,EAC/B;SACC,MAAMpF,MAAM,GAAGqb,gBAAgB,CAACW,KAAK,EAAE;SACvC,IAAI,CAACC,iBAAiB,CAACb,UAAU,EAAEpb,MAAM,CAAC;QAC1C,MAED;SACC,MAAMkc,gBAAgB,GAAGtb,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC;SAClF,IAAI,CAACob,iBAAiB,CAACb,UAAU,EAAEc,gBAAgB,CAAC;SACpDd,UAAU,CAACS,KAAK,CAAC3X,KAAK,GAAG,EAAE;SAC3BiY,aAAa,CAAC,IAAI,CAACZ,sBAAsB,CAAC;;MAE3C,EAAE,GAAG,CAAC;;GAGRU,iBAAiB,CAACG,QAAQ,EAAEC,UAAU,EACtC;KACC,MAAMZ,iBAAiB,GAAGW,QAAQ,CAACV,iBAAiB;KACpD,MAAMY,cAAc,GAAG5b,aAAG,CAACC,MAAM,wBAAC;sDACgB,CAAa;GAC/D,GADoD0b,UAAU,CAC7D;KACDD,QAAQ,CAACvU,MAAM,CAACyU,cAAc,CAAC;KAE/B,MAAMC,QAAQ,GAAG7Q,IAAI,CAAC8Q,GAAG,CAACF,cAAc,CAACR,WAAW,EAAEL,iBAAiB,CAACK,WAAW,CAAC;KACpFM,QAAQ,CAACP,KAAK,CAAC3X,KAAK,GAAIqY,QAAQ,GAAG,CAAC,GAAI,IAAI;KAE5Cd,iBAAiB,CAACI,KAAK,CAACY,UAAU,GAAG,EAAE,CAAC;KACxChB,iBAAiB,CAACI,KAAK,CAACa,SAAS,GAAI,eAAcjB,iBAAiB,CAACK,WAAY,KAAI;KACrFQ,cAAc,CAACT,KAAK,CAACa,SAAS,GAAI,eAAcjB,iBAAiB,CAACK,WAAY,KAAI;KAElFxa,UAAU,CAAC,MAAM;OAChBma,iBAAiB,CAACkB,MAAM,EAAE;OAC1BL,cAAc,CAACT,KAAK,CAACY,UAAU,GAAG,MAAM,CAAC;OACzCH,cAAc,CAACT,KAAK,CAACa,SAAS,GAAG,EAAE;MACnC,EAAE,GAAG,CAAC;;GAGRf,SAAS,CAACiB,MAAM,EAChB;KACC,OAAO,CAACA,MAAM,CAACC,KAAK,CAAC,KAAK,CAAC,IAAI,EAAE,EAAEzX,MAAM;;GAG1C0X,aAAa,GACb;KACC,IAAI,CAACpE,cAAc,GAAG,EAAE;;GAGzBqE,aAAa,GACb;KACC,OAAO,IAAI,CAACrE,cAAc;;GAG3BsE,eAAe,GACf;KACC,OAAO,IAAI,CAAC/Q,aAAa;;GAG1BmN,iBAAiB,GACjB;KACCpT,aAAG,CAACC,KAAK,CAAC,IAAI,CAACmU,iBAAiB,CAAC;KACjC,IAAI,CAAC2C,aAAa,EAAE,CAAC9X,OAAO,CAACgY,KAAK,IAAI;OACrCA,KAAK,CAACxV,QAAQ,CAAC,IAAI,CAAC2S,iBAAiB,CAAC;MACtC,CAAC;;GAGHf,mBAAmB,GACnB;KACC,MAAM6D,cAAc,GAAG,IAAI,CAAC9G,aAAa,CAACtP,aAAa,CAAC,mCAAmC,CAAC;KAC5F,IAAIa,cAAI,CAACC,aAAa,CAACsV,cAAc,CAAC,EACtC;OACC3S,eAAK,CAACC,IAAI,CAAC0S,cAAc,EAAE,OAAO,EAAE,IAAI,CAACC,yBAAyB,CAAC3S,IAAI,CAAC,IAAI,CAAC,CAAC;;KAG/E,MAAM4S,SAAS,GAAG,IAAI,CAAChH,aAAa,CAACtP,aAAa,CAAC,6CAA6C,CAAC;KACjG,IAAIa,cAAI,CAACC,aAAa,CAACwV,SAAS,CAAC,EACjC;OACC7S,eAAK,CAACC,IAAI,CAAC4S,SAAS,EAAE,OAAO,EAAE,IAAI,CAACC,2BAA2B,CAAC7S,IAAI,CAAC,IAAI,CAAC,CAAC;;;GAI7E2S,yBAAyB,GACzB;KACC,IAAI,CAACG,cAAc,EAAE;;GAGtBA,cAAc,GACd;KACC,IAAI,CAAC7D,cAAc,GAAG,IAAI;KAE1B,MAAM2D,SAAS,GAAG,IAAI,CAAChH,aAAa,CAACtP,aAAa,CAAC,6CAA6C,CAAC;KACjG,IAAIa,cAAI,CAACC,aAAa,CAACwV,SAAS,CAAC,EACjC;OACCA,SAAS,CAACvB,KAAK,CAAC5Q,OAAO,GAAG,EAAE;;KAG7B,MAAMiS,cAAc,GAAG,IAAI,CAAC9G,aAAa,CAACtP,aAAa,CAAC,mCAAmC,CAAC;KAC5F,IAAIa,cAAI,CAACC,aAAa,CAACsV,cAAc,CAAC,EACtC;OACCA,cAAc,CAACrB,KAAK,CAAC5Q,OAAO,GAAG,MAAM;;KAGtC,IAAI,CAACsS,qBAAqB,EAAE;KAC5B,IAAI,CAACC,mBAAmB,EAAE;KAC1B,IAAI,CAACC,qBAAqB,EAAE;KAC5B,IAAI,CAACC,qBAAqB,EAAE;KAE5BhO,kBAAI,CAACiO,KAAK,EAAE,CAACpT,KAAK,CAACiG,YAAY,CAACoN,SAAS,CACxC,sBAAsB,EACtB,IAAI,CAAC9E,sBAAsB,CAC3B;KAED,IAAI,CAAC7F,IAAI,CAAC,wBAAwB,CAAC;;GAGpC4K,cAAc,GACd;KACC,OAAO,IAAI,CAACpE,cAAc;;GAG3B4D,2BAA2B,GAC3B;KACCja,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACwa,cAAc,EAAE,CAAC7Y,OAAO,CAACxB,MAAM,IACrD;OACC,IAAI,CAAC,sBAAsB,EAAE,yBAAyB,EAAE,IAAI,CAACgV,WAAW,CAAC,CAAC5N,QAAQ,CAACpH,MAAM,CAACsa,MAAM,EAAE,CAAC,EACnG;SACCta,MAAM,CAACua,KAAK,EAAE;;MAEf,CAAC;;GAGHC,iBAAiB,CAACC,SAAS,EAC3B;KACC,MAAMC,gBAAgB,GAAG5S,IAAI,CAACD,GAAG,EAAE;KACnC,IAAI6S,gBAAgB,GAAG,IAAI,CAACnF,wBAAwB,GAAG,IAAI,CAACJ,sBAAsB,EAClF;OACC,IAAI,CAACwF,WAAW,CAACF,SAAS,CAAC;MAC3B,MAED;OACC5c,UAAU,CAAC,MAAM;SAChB,IAAI,CAAC2c,iBAAiB,CAACC,SAAS,CAAC;QACjC,EAAE,IAAI,CAACtF,sBAAsB,CAAC;;;GAIjCwF,WAAW,CAACF,SAAS,EACrB;KACC,IAAI,IAAI,CAACxE,WAAW,EACpB;OACC;;KAGD,IAAIwE,SAAS,CAACjB,KAAK,KAAK,oBAAoB,IACxCiB,SAAS,CAACvF,WAAW,IACrBhR,cAAI,CAACC,aAAa,CAAC,IAAI,CAACkT,eAAe,CAAC,EAE5C;OACC,IAAI,CAACE,cAAc,CAACkD,SAAS,CAACvF,WAAW,CAAC;OAC1C,IAAI,CAACmC,eAAe,CAACjR,SAAS,GAAGV,cAAI,CAACW,MAAM,CAACoU,SAAS,CAACvF,WAAW,CAAC;;KAGpE,IAAI,CAACK,wBAAwB,GAAGzN,IAAI,CAACD,GAAG,EAAE;;GAG3C+S,uBAAuB,GACvB;KACC,IAAI,CAACnD,gBAAgB,CAACW,KAAK,CAAC3X,KAAK,GAAG,EAAE;KACtCiY,aAAa,CAAC,IAAI,CAACZ,sBAAsB,CAAC;KAC1C,IAAI,CAAC9B,cAAc,GAAG,IAAI;KAC1B,IAAI9R,cAAI,CAACC,aAAa,CAAC,IAAI,CAACsT,gBAAgB,CAAC,EAC7C;OACC,IAAI,CAACA,gBAAgB,CAACrR,SAAS,GAAGV,cAAI,CAACW,MAAM,CAAClJ,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC,CAACkJ,WAAW,EAAE,CAAC;OACtG/D,aAAG,CAAC2W,MAAM,CAAC,IAAI,CAAC1C,gBAAgB,CAACnT,aAAa,CAAC,oCAAoC,CAAC,CAAC;;;GAIvFwX,iBAAiB,GACjB;KACC,IAAI3W,cAAI,CAACC,aAAa,CAAC,IAAI,CAACwO,aAAa,CAAC,EAC1C;OACC,IAAI,CAACA,aAAa,CAACyF,KAAK,CAAC5Q,OAAO,GAAG,EAAE;;;GAIvCsT,iBAAiB,GACjB;KACC,IAAI5W,cAAI,CAACC,aAAa,CAAC,IAAI,CAACwO,aAAa,CAAC,EAC1C;OACC,IAAI,CAACA,aAAa,CAACyF,KAAK,CAAC5Q,OAAO,GAAG,MAAM;;;GAI3CuT,qBAAqB,GACrB;KACC,IAAI7W,cAAI,CAACC,aAAa,CAAC,IAAI,CAACyS,iBAAiB,CAAC,EAC9C;OACC,IAAI,CAACA,iBAAiB,CAACwB,KAAK,CAAC5Q,OAAO,GAAG,EAAE;;;GAI3CyS,qBAAqB,GACrB;KACC,IAAI/V,cAAI,CAACC,aAAa,CAAC,IAAI,CAACyS,iBAAiB,CAAC,EAC9C;OACC,IAAI,CAACA,iBAAiB,CAACwB,KAAK,CAAC5Q,OAAO,GAAG,MAAM;;;GAI/CwT,gBAAgB,GAChB;KACC,IAAI9W,cAAI,CAACC,aAAa,CAAC,IAAI,CAAC0S,YAAY,CAAC,EACzC;OACC,IAAI,CAACA,YAAY,CAACuB,KAAK,CAAC5Q,OAAO,GAAG,EAAE;;;GAItCyT,gBAAgB,GAChB;KACC,IAAI/W,cAAI,CAACC,aAAa,CAAC,IAAI,CAAC0S,YAAY,CAAC,EACzC;OACC,IAAI,CAACA,YAAY,CAACuB,KAAK,CAAC5Q,OAAO,GAAG,MAAM;;;GAI1CsS,qBAAqB,GACrB;KACC,IAAI5V,cAAI,CAACC,aAAa,CAAC,IAAI,CAAC4S,iBAAiB,CAAC,EAC9C;OACC,IAAI,CAACA,iBAAiB,CAACqB,KAAK,CAAC5Q,OAAO,GAAG,EAAE;;;GAI3C0T,qBAAqB,GACrB;KACC,IAAIhX,cAAI,CAACC,aAAa,CAAC,IAAI,CAAC4S,iBAAiB,CAAC,EAC9C;OACC,IAAI,CAACA,iBAAiB,CAACqB,KAAK,CAAC5Q,OAAO,GAAG,MAAM;;;GAI/C2T,qBAAqB,GACrB;KACC,IAAIjX,cAAI,CAACC,aAAa,CAAC,IAAI,CAACwS,iBAAiB,CAAC,EAC9C;OACC,IAAI,CAACA,iBAAiB,CAACyB,KAAK,CAAC5Q,OAAO,GAAG,EAAE;;;GAI3CwS,qBAAqB,GACrB;KACC,IAAI9V,cAAI,CAACC,aAAa,CAAC,IAAI,CAACwS,iBAAiB,CAAC,EAC9C;OACC,IAAI,CAACA,iBAAiB,CAACyB,KAAK,CAAC5Q,OAAO,GAAG,MAAM;;;GAI/CuS,mBAAmB,GACnB;KACC,IAAI7V,cAAI,CAACC,aAAa,CAAC,IAAI,CAAC2S,eAAe,CAAC,EAC5C;OACC,IAAI,CAACA,eAAe,CAACsB,KAAK,CAAC5Q,OAAO,GAAG,EAAE;;;GAIzC4T,mBAAmB,GACnB;KACC,IAAIlX,cAAI,CAACC,aAAa,CAAC,IAAI,CAAC2S,eAAe,CAAC,EAC5C;OACC,IAAI,CAACA,eAAe,CAACsB,KAAK,CAAC5Q,OAAO,GAAG,MAAM;;;GAI7C8N,kBAAkB,CAAC7F,KAAK,EACxB;KACC,IAAIA,KAAK,IAAIvL,cAAI,CAACmX,UAAU,CAAC5L,KAAK,CAAC6L,OAAO,CAAC,EAC3C;OACC,MAAMnM,IAAI,GAAG;SACZoM,OAAO,EAAE9L,KAAK,CAAC6L,OAAO,EAAE,CAAC,CAAC,CAAC;SAC3B,GAAG7L,KAAK,CAAC6L,OAAO,EAAE,CAAC,CAAC;QACpB;OAED,IACCnM,IAAI,CAACoM,OAAO,KAAK,YAAY,IAC1BpM,IAAI,CAACqM,QAAQ,EAEjB;SACC,IAAItX,cAAI,CAACC,aAAa,CAAC,IAAI,CAAC4S,iBAAiB,CAAC,EAC9C;WACC,MAAM0E,WAAW,GAAG,IAAI,CAAC1E,iBAAiB,CAAC1T,aAAa,CAAC,yBAAyB,CAAC;WACnF,IAAIa,cAAI,CAACC,aAAa,CAACsX,WAAW,CAAC,IAAIlZ,aAAG,CAACmZ,QAAQ,CAACD,WAAW,EAAE,YAAY,CAAC,EAC9E;aACClZ,aAAG,CAACsN,WAAW,CAAC4L,WAAW,EAAE,YAAY,CAAC;aAC1ClZ,aAAG,CAAC0C,QAAQ,CAACwW,WAAW,EAAE,QAAQ,CAAC;;;SAIrC,MAAME,KAAK,GAAG,IAAIC,oBAAK,CAAC;WAAEzM,IAAI,EAAEA,IAAI,CAAC0M;UAAQ,CAAC;SAC9C,IAAI,CAACC,eAAe,CAACH,KAAK,CAAC;SAE3B1P,kBAAI,CAACiO,KAAK,EAAE,CAACpT,KAAK,CAACiG,YAAY,CAACgP,WAAW,CAC1C,sBAAsB,EACtB,IAAI,CAAC1G,sBAAsB,CAC3B;SAED,MAAMsE,SAAS,GAAG,IAAI,CAAChH,aAAa,CAACtP,aAAa,CAAC,6CAA6C,CAAC;SACjG,IAAIa,cAAI,CAACC,aAAa,CAACwV,SAAS,CAAC,EACjC;WACCA,SAAS,CAACvT,SAAS,GAAGV,cAAI,CAACW,MAAM,CAAClJ,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC,CAAC;WAC1EmF,aAAG,CAAC0C,QAAQ,CAAC0U,SAAS,EAAE,gBAAgB,CAAC;WACzCpX,aAAG,CAACsN,WAAW,CAAC8J,SAAS,EAAE,qBAAqB,CAAC;;SAGlD,IAAI,CAACnK,IAAI,CAAC,sBAAsB,CAAC;;;;GAKpCsM,eAAe,CAACH,KAAK,EACrB;;KAEC,IAAIzX,cAAI,CAACC,aAAa,CAAC,IAAI,CAACgT,eAAe,CAAC,EAC5C;OACC5U,aAAG,CAAC2W,MAAM,CAAC,IAAI,CAAC/B,eAAe,CAAC;;KAGjC,IAAIjT,cAAI,CAACC,aAAa,CAAC,IAAI,CAAC8S,mBAAmB,CAAC,EAChD;OACC,IAAI,CAACA,mBAAmB,CAACmB,KAAK,CAAC5Q,OAAO,GAAG,EAAE;OAC3CjF,aAAG,CAACC,KAAK,CAAC,IAAI,CAACyU,mBAAmB,CAAC;OACnC,IAAI,CAACA,mBAAmB,CAAC+E,WAAW,CAAC,IAAI,CAACC,eAAe,CAACN,KAAK,CAAC,CAAC;;;GAInEM,eAAe,CAACN,KAAK,EACrB;KACC,MAAMO,IAAI,GAAG,IAAIpU,IAAI,CAAC6T,KAAK,CAACO,IAAI,CAAC/T,OAAO,EAAE,GAAG,CAACE,QAAQ,CAACsT,KAAK,CAACxM,IAAI,CAAC,mBAAmB,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC;KACrG,MAAMgN,EAAE,GAAG,IAAIrU,IAAI,CAAC6T,KAAK,CAACQ,EAAE,CAAChU,OAAO,EAAE,GAAG,CAACE,QAAQ,CAACsT,KAAK,CAACxM,IAAI,CAAC,iBAAiB,CAAC,CAAC,IAAI,CAAC,IAAI,IAAI,CAAC;KAC/F,MAAMiN,aAAa,GAAGF,IAAI,CAAC/T,OAAO,EAAE;KACpC,MAAMkU,QAAQ,GAAG1c,EAAE,CAACiI,IAAI,CAACU,MAAM,CAAC2D,kBAAI,CAACqQ,iBAAiB,EAAE,EAAEF,aAAa,GAAG,IAAI,CAAC;KAC/E,MAAMG,QAAQ,GAAGtQ,kBAAI,CAACuQ,UAAU,CAACN,IAAI,CAACO,QAAQ,EAAE,EAAEP,IAAI,CAACQ,UAAU,EAAE,CAAC;KACpE,MAAMC,MAAM,GAAG1Q,kBAAI,CAACuQ,UAAU,CAACL,EAAE,CAACM,QAAQ,EAAE,EAAEN,EAAE,CAACO,UAAU,EAAE,CAAC;KAC9D,MAAME,SAAS,GAAGjB,KAAK,CAACkB,SAAS,EAAE,GAC/B1f,aAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC,GACrCmf,QAAQ,GAAG,KAAK,GAAGI,MAAM;KAE7B,IAAI,CAACG,YAAY,GAAG7f,aAAG,CAACC,MAAM,wBAAC;mDACgB,CAA6C;;OAEzF,CAAW;;QAEV,CAA4C;;;+CAGL,CAA4C;;;8CAG7C,CAAW;;;;iDAIR,CAA+B;iDAC/B,CAAY;;;8CAGf,CAAS;;;;;GAKnD,GAvBiDye,KAAK,CAACkB,SAAS,EAAE,GAAG,iBAAiB,GAAG,EAAE,EAEtFR,QAAQ,EAEP1c,EAAE,CAACiI,IAAI,CAACU,MAAM,CAAC,GAAG,EAAE8T,aAAa,GAAG,IAAI,CAAC,EAGFzc,EAAE,CAACiI,IAAI,CAACU,MAAM,CAAC,GAAG,EAAE8T,aAAa,GAAG,IAAI,CAAC,EAG1CG,QAAQ,EAIL7W,cAAI,CAACW,MAAM,CAACsV,KAAK,CAACoB,OAAO,EAAE,CAAC,EAC5BH,SAAS,EAGZD,MAAM,CAKjD;KAED,OAAO,IAAI,CAACG,YAAY;;GAGzBhH,iBAAiB,GACjB;KACC,IAAI,CAAC9V,MAAM,GAAG,IAAI;KAElB0Y,aAAa,CAAC,IAAI,CAACZ,sBAAsB,CAAC;KAE1C7L,kBAAI,CAACiO,KAAK,EAAE,CAACpT,KAAK,CAACiG,YAAY,CAACgP,WAAW,CAC1C,sBAAsB,EACtB,IAAI,CAAC1G,sBAAsB,CAC3B;KAED,IAAI,CAAC7F,IAAI,CAAC,SAAS,CAAC;;GAGrBwN,YAAY,GACZ;KACCnf,UAAU,CAAC,MAAM;OAChB,MAAMof,EAAE,GAAGhR,kBAAI,CAACiO,KAAK,EAAE;OACvB+C,EAAE,CAACxJ,EAAE,CAACyJ,QAAQ,CAACC,IAAI,CAAC;SACnBC,aAAa,EAAE,GAAG;SAClBC,MAAM,EAAE,GAAG;SACXC,MAAM,EAAE;WAAEC,CAAC,EAAE,GAAG;WAAEC,CAAC,EAAE;UAAK;SAC1B5R,MAAM,EAAGqR,EAAE,CAACrd,SAAS,CAACC,QAAQ,CAACkW,YAAY,EAAE,CAAC0H,SAAS,EAAE,GAAG;QAC5D,CAAC;MACF,EAAE,IAAI,CAACrI,cAAc,CAAC;;GAGxBhH,gBAAgB,GAChB;KACC,OAAO,IAAI,CAACoH,aAAa;;GAG1BkI,SAAS,GACT;KACC,OAAO,IAAI,CAAC1d,MAAM;;GAGnB2d,aAAa,GACb;KACC,IAAI,CAAC1H,WAAW,GAAG,IAAI;KACvB,IAAI,CAAC+E,gBAAgB,EAAE;KACvB,IAAI,CAACf,qBAAqB,EAAE;KAC5B,IAAI,CAACD,qBAAqB,EAAE;KAC5B,IAAI,CAACa,iBAAiB,EAAE;KACxBtY,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAACuR,gBAAgB,EAAE,SAAS,CAAC;KAC9C,IAAItS,cAAI,CAACC,aAAa,CAAC,IAAI,CAACsT,gBAAgB,CAAC,EAC7C;OACC,IAAI,CAACA,gBAAgB,CAACrR,SAAS,GAAGV,cAAI,CAACW,MAAM,CAAClJ,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC,CAACkJ,WAAW,EAAE,CAAC;;KAGrG,MAAMsX,WAAW,GAAG,IAAI,CAACjL,aAAa,CAACtP,aAAa,CAAC,mCAAmC,CAAC;KACzF,IAAIa,cAAI,CAACC,aAAa,CAACyZ,WAAW,CAAC,EACnC;OACCA,WAAW,CAACxF,KAAK,CAAC5Q,OAAO,GAAG,EAAE;OAC9BV,eAAK,CAACC,IAAI,CAAC6W,WAAW,EAAE,OAAO,EAAE,MAAM;SACtCje,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACwa,cAAc,EAAE,CAAC7Y,OAAO,CAACxB,MAAM,IACrD;WACC,IAAI,CAAC,sBAAsB,EAAE,yBAAyB,EAAE,IAAI,CAACgV,WAAW,CAAC,CAAC5N,QAAQ,CAACpH,MAAM,CAACsa,MAAM,EAAE,CAAC,EACnG;aACCta,MAAM,CAACua,KAAK,EAAE;;UAEf,CAAC;SACF5a,EAAE,CAACuR,MAAM,EAAE;QACX,CAAC;;KAGH,MAAMuI,cAAc,GAAG,IAAI,CAAC9G,aAAa,CAACtP,aAAa,CAAC,mCAAmC,CAAC;KAC5F,IAAIa,cAAI,CAACC,aAAa,CAACsV,cAAc,CAAC,EACtC;OACCA,cAAc,CAACrB,KAAK,CAAC5Q,OAAO,GAAG,MAAM;;;CAGxC;;CCluBa;GAAA5I;AAEb,CAKe,MAAMif,aAAa,CAClC;GACCxhB,WAAW,CAACC,OAAO,EACnB;KACC,IAAI,CAAC0W,IAAI,GAAG1W,OAAO,CAAC0W,IAAI,IAAI,EAAE;KAC9B,IAAI,CAACzI,KAAK,GAAGjO,OAAO,CAACiO,KAAK,IAAI,EAAE;KAChC,IAAI,CAACuT,UAAU,GAAG,KAAK;;GAGxB9Z,QAAQ,CAACC,YAAY,EACrB;KACC,IAAIC,cAAI,CAACC,aAAa,CAACF,YAAY,CAAC,EACpC;OACCA,YAAY,CAAC+X,WAAW,CAAC,IAAI,CAACjf,UAAU,EAAE,CAAC;;KAG5CgQ,6BAAY,CAACyC,IAAI,CAAC,uDAAuD,CAAC;;GAG3EzS,UAAU,GACV;KACC,IAAI,CAACghB,WAAW,GAAG9gB,aAAG,CAACC,MAAM,oBAAC;;uEAEqC,CAAa;;GAEhF,GAFqE,IAAI,CAACqN,KAAK,CAE9E;KAED,OAAO,IAAI,CAACwT,WAAW;;GAGxBC,OAAO,GACP;KAAA;KACC,IAAI,CAACF,UAAU,GAAG,IAAI;KACtBvb,aAAG,CAACsN,WAAW,sBAAC,IAAI,CAACkO,WAAW,qBAAhB,kBAAkB1a,aAAa,CAAC,eAAe,CAAC,EAAE,YAAY,CAAC;;GAGhF4a,SAAS,GACT;KAAA;KACC,IAAI,CAACH,UAAU,GAAG,KAAK;KACvBvb,aAAG,CAAC0C,QAAQ,uBAAC,IAAI,CAAC8Y,WAAW,qBAAhB,mBAAkB1a,aAAa,CAAC,eAAe,CAAC,EAAE,YAAY,CAAC;;CAE9E;;CC/Ca;GAAAzE;GAAAC;GAAAC;AAEb,CAKe,MAAMof,gBAAgB,SAASpJ,UAAU,CACxD;GAQCzY,WAAW,CAACC,OAAO,GAAG,EAAE,EACxB;KACC,KAAK,CAACA,OAAO,CAAC;KAAC,KAThByY,IAAI,GAAG,QAAQ;KAAA,KACfC,WAAW,GAAG,6BAA6B;KAAA,KAC3CmJ,YAAY,GAAG,eAAe;KAAA,KAC9BC,YAAY,GAAG,eAAe;KAAA,KAC9BC,YAAY,GAAG,sBAAsB;KAAA,KACrCC,yBAAyB,GAAG,QAAU;KAKrC,IAAI,CAACpR,iBAAiB,CAAC,6CAA6C,CAAC;KACrE,IAAI,CAACqK,cAAc,CAACpa,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC,CAAC;KAC5D,IAAI,CAACic,aAAa,EAAE;KACpB,IAAI,CAAC7D,aAAa,GAAG,UAAU;;GAGhCe,kBAAkB,GAClB;KACC,IAAInN,IAAI,GAAG,EAAE;KACb,IAAI,CAAC0N,eAAe,GAAG7Z,aAAG,CAACC,MAAM,oBAAC;;MAEhC,CAEM;;GAER,GAJIkM,IAAI,GAAGnM,aAAG,CAACC,MAAM,sBAAC;OACnB,CAAgD;SAC7C,GADDC,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC,CAC3C,CAEN;KAED0J,eAAK,CAACC,IAAI,CAACqC,IAAI,EAAE,OAAO,EAAE,MAAM;OAC/B,MAAMmV,MAAM,GAAGtS,kBAAI,CAACiO,KAAK,EAAE,CAAC5Q,MAAM;OAClC,IAAIiV,MAAM,EACV;SACCA,MAAM,CAACngB,IAAI,CAAE,wBAAuB,IAAI,CAACkgB,yBAA0B,EAAC,CAAC;;MAEtE,CAAC;KAEF,OAAO,IAAI,CAACxH,eAAe;;GAG5BR,oBAAoB,GACpB;KACC,IAAI,CAACS,iBAAiB,GAAG9Z,aAAG,CAACC,MAAM,sBAAC;;;;kGAI0D,CAAwC;qGACrC,CAAiD;8FACxD,CAAoD;iGACjD,CAAiD;;;;MAI5I,CAA4B;MAC5B,CAAgC;;GAElC,GAVgGC,aAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC,EAClCD,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC,EACrDD,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC,EAC9CD,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC,EAIzI,IAAI,CAAC8Z,kBAAkB,EAAE,EACzB,IAAI,CAACF,sBAAsB,EAAE,CAEhC;KAED,OAAO,IAAI,CAACD,iBAAiB;;GAG9BsC,aAAa,GACb;KACC,IAAI,CAACpE,cAAc,GAAG,CACrB,IAAI4I,aAAa,CAAC;OACjB7K,IAAI,EAAE,IAAI,CAACmL,YAAY;OACvB5T,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,yBAAyB;MAC/C,CAAC,EACF,IAAIygB,aAAa,CAAC;OACjB7K,IAAI,EAAE,IAAI,CAACoL,YAAY;OACvB7T,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,yBAAyB;MAC/C,CAAC,EACF,IAAIygB,aAAa,CAAC;OACjB7K,IAAI,EAAE,IAAI,CAACqL,YAAY;OACvB9T,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,yBAAyB;MAC/C,CAAC,CACF;;GAGFud,WAAW,CAACF,SAAS,EACrB;KACC,KAAK,CAACE,WAAW,CAACF,SAAS,CAAC;KAE5B,IAAI,CAACnB,aAAa,EAAE,CAAC9X,OAAO,CAACgY,KAAK,IAAI;OACrC,IACCiB,SAAS,CAACjB,KAAK,KAAK,oBAAoB,IACrCA,KAAK,CAACxG,IAAI,KAAK,IAAI,CAACmL,YAAY,EAEpC;SACC3E,KAAK,CAACwE,OAAO,EAAE;QACf,MACI,IACJvD,SAAS,CAACjB,KAAK,KAAK,iBAAiB,KACjCA,KAAK,CAACxG,IAAI,KAAK,IAAI,CAACmL,YAAY,IAAI3E,KAAK,CAACxG,IAAI,KAAK,IAAI,CAACoL,YAAY,CAAC,EAE1E;SACC5E,KAAK,CAACwE,OAAO,EAAE;QACf,MACI,IAAIvD,SAAS,CAACjB,KAAK,KAAK,iBAAiB,EAC9C;SACCA,KAAK,CAACwE,OAAO,EAAE;SACf,IAAIxE,KAAK,CAACxG,IAAI,KAAK,IAAI,CAACqL,YAAY,EACpC;WACC,IAAI,IAAI,CAACvZ,IAAI,KAAK,cAAc,EAChC;aACC,IAAI,CAACgR,iBAAiB,EAAE;YACxB,MAED;aACC,IAAI,CAAC8E,uBAAuB,EAAE;aAC9B,IAAI,CAACC,iBAAiB,EAAE;aACxB,IAAI,CAACE,qBAAqB,EAAE;;WAE7B,IAAI,CAACiC,YAAY,EAAE;WAEnB,IAAI,CAACxN,IAAI,CAAC,qBAAqB,CAAC;;;MAGlC,CAAC;;GAGH4H,gBAAgB,GAChB;KACC,OAAOja,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;;CAE1D;;CC7He,MAAMohB,cAAc,SAAS1R,iBAAiB,CAC7D;GAGCzQ,WAAW,CAACqN,QAAQ,EAAE9H,UAAU,GAAG,IAAI,EACvC;KACC,KAAK,CAAC;OACL2I,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC;OAC9C2O,YAAY,EAAE,SAAS;OACvBqB,eAAe,EAAEjQ,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;OAC9DiQ,qBAAqB,EAAElQ,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;OACvEkQ,iBAAiB,EAAEnQ,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;OACnEmQ,uBAAuB,EAAEpQ,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;OAC1EoQ,eAAe,EAAE,yCAAyC;OAC1DC,QAAQ,EAAE,yCAAyC;OACnDC,aAAa,EAAE,UAAU;OACzBC,KAAK,EAAE,SAAS;OAChBjE,QAAQ,EAAEA,QAAQ;OAClB9H,UAAU,EAAEA,UAAU;OACtBlF,qBAAqB,EAAE;MACvB,CAAC;KAAC,KAlBJ+hB,uBAAuB,GAAG,GAAG;KAoB5B,IAAI,CAACpN,mBAAmB,GAAG,EAAE;KAC7B,IAAI,CAACK,WAAW,GAAG,EAAE;KAErB,IAAI,CAACgN,+BAA+B,GAAGC,iBAAO,CAACC,QAAQ,CAAC,IAAI,CAACC,uBAAuB,EAAE,IAAI,CAACJ,uBAAuB,EAAE,IAAI,CAAC;;GAG1HK,gBAAgB,GAChB;KACC,MAAMC,QAAQ,GAAG,IAAI,CAACrV,QAAQ,CAACsV,WAAW,EAAE;KAC5Crf,EAAE,CAAC6K,IAAI,CAACtM,KAAK,CAAC6gB,QAAQ,EAAE,GAAG,EAAE,GAAG,CAAC;KAEjCjY,eAAK,CAACC,IAAI,CAAC0B,MAAM,EAAE,YAAY,EAAE,IAAI,CAACiW,+BAA+B,CAAC;KACtE5X,eAAK,CAACC,IAAI,CAAC0B,MAAM,EAAE,SAAS,EAAE,IAAI,CAACiW,+BAA+B,CAAC;;GAGpEG,uBAAuB,CAACpP,KAAK,EAC7B;KACC,IACChH,MAAM,CAACwW,QAAQ,CAACC,IAAI,KAAK,oBAAoB,IACzCzP,KAAK,CAACN,IAAI,CAAC5E,KAAK,KAAK,mBAAoB,EAE9C;OACC0B,kBAAI,CAACkT,UAAU,EAAE;OACjB,IAAI,CAACzV,QAAQ,CAAC0V,iBAAiB,CAAC,IAAI,CAAC;OAErC,IAAI,CAAC1V,QAAQ,CAAC2V,cAAc,EAAE;OAC9B,IAAI,CAACC,cAAc,EAAE;OACrB,IAAI,CAAC5V,QAAQ,CAAC7M,SAAS,CAAC,IAAI,CAAC6M,QAAQ,CAAC7D,oBAAoB,CAAC;OAC3D,IAAI,CAAC6D,QAAQ,CAAC0I,gBAAgB,EAAE,CAACvN,aAAa,CAAC,IAAI,CAAC6E,QAAQ,CAAC7D,oBAAoB,CAAC;OAClF,IAAI,CAAC6D,QAAQ,CAAC0I,gBAAgB,EAAE,CAACpM,aAAa,EAAE;OAEhD,IAAI,IAAI,CAAC0D,QAAQ,CAAC6V,cAAc,EAAE,EAClC;SACC,IAAI,CAAC7V,QAAQ,CAAC8F,IAAI,CAAC,gBAAgB,CAAC;;OAGrC1I,eAAK,CAAC0Y,MAAM,CAAC/W,MAAM,EAAE,YAAY,EAAE,IAAI,CAACiW,+BAA+B,CAAC;OACxE5X,eAAK,CAAC0Y,MAAM,CAAC/W,MAAM,EAAE,SAAS,EAAE,IAAI,CAACiW,+BAA+B,CAAC;;;GAIvEe,oBAAoB,GACpB;KACC,OAAO,IAAIxf,OAAO,CAAEC,OAAO,IAAK;OAC/BP,EAAE,CAACsP,IAAI,CAACC,SAAS,CAAC,+CAA+C,EAAE;SAClEC,IAAI,EAAE;WACL6B,YAAY,EAAE,IAAI,CAACpP,UAAU,CAAC2Q,SAAS,CAAC7T;;QAEzC,CAAC,CACD4Q,IAAI,CACHC,QAAQ,IAAK;SACb,IAAI,CAACmC,WAAW,GAAGnC,QAAQ,CAACJ,IAAI;SAChCjP,OAAO,CAACqP,QAAQ,CAACJ,IAAI,CAAC;QACtB,EACAI,QAAQ,IAAK;SACbrP,OAAO,CAACqP,QAAQ,CAAC6D,MAAM,CAAC;QACxB,CACD;MACD,CAAC;;GAGHvB,mBAAmB,CAACpC,KAAK,EACzB;KACC,IAAI,CAAC4B,mBAAmB,CAAC5B,KAAK,CAACiQ,MAAM,CAAClI,KAAK,CAAC,GAAG/H,KAAK,CAACiQ,MAAM,CAACC,OAAO;KACnE,IAAI,CAACxO,aAAa,EAAE;KACpB,IAAI,CAACa,iCAAiC,EAAE;;GAGzCmB,cAAc,GACd;KACC,MAAMK,UAAU,GAAG,IAAIG,gCAAU,CAAC;OACjC5O,SAAS,EAAE,IAAI,CAACrG,EAAE;OAClB4U,OAAO,EAAEnW,aAAG,CAACC,UAAU,CAAC,+CAA+C,CAAC;OACxEqD,KAAK,EAAE,GAAG;OACVmf,UAAU,EAAE,EAAE;OACdC,SAAS,EAAE,CAAC;OACZC,OAAO,EAAE,CAAC;OACV1L,IAAI,EAAE,MAAM;SACXZ,UAAU,CAAC+G,KAAK,EAAE;QAClB;OACDxG,SAAS,EAAE,IAAI;OACfH,OAAO,EAAEjU,EAAE,CAAC8T,EAAE,CAACC,OAAO,CAACG,iBAAiB,CAACC,EAAE;OAC3CI,YAAY,EAAE;SACb6L,cAAc,EAAE,IAAI;SACpBC,QAAQ,EAAE,IAAI;SACdC,SAAS,EAAE;;MAEZ,CAAC;KACFzM,UAAU,CAACpV,IAAI,EAAE;;GAGlBuJ,mBAAmB,GACnB;KACC,IAAI,IAAI,CAAC+B,QAAQ,CAACwW,wBAAwB,EAAE,EAC5C;OACC,IAAI,CAACpB,gBAAgB,EAAE;MACvB,MAED;OACC,IAAI,CAACpV,QAAQ,CAACyW,eAAe,EAAE;OAC/B,IAAI,CAAChN,cAAc,EAAE;;;GAIvBmM,cAAc,GACd;KACC,IAAI,CAAC,IAAI,CAACc,MAAM,EAChB;OACC,MAAMtb,IAAI,GAAG,IAAI,CAAC4E,QAAQ,CAAC2W,qBAAqB,GAAG,WAAW,GAAG,SAAS;OAC1E,IAAI,CAACD,MAAM,GAAG,IAAIlC,gBAAgB,CAAC;SAAEpZ;QAAM,CAAC;OAC5C,IAAI,CAACsb,MAAM,CAAC1gB,UAAU,EAAE;OACxB,IAAI,CAACgK,QAAQ,CAAC4W,eAAe,CAAC,IAAI,CAACF,MAAM,CAAC;;;GAI5CrP,2BAA2B,CAACrS,EAAE,EAC9B;KACC,IAAI,CAACyT,oBAAoB,CAACzT,EAAE,CAAC;;CAE/B;;CCrJa;GAAAE;GAAAC;GAAAC;GAAAC;GAAAC;GAAAsE;GAAAC;GAAAmJ;GAAAC;GAAAC;GAAAC;AACb,CAKe,MAAM0T,gBAAgB,SAASxT,6BAAY,CAC1D;GAKC1Q,WAAW,CAACC,OAAO,GAAG,EAAE,EACxB;KACC,KAAK,EAAE;KAAC,KANTsP,MAAM,GAAG,IAAI;KAAA,KACbC,GAAG,GAAG,EAAE;KAAA,KACR2U,mBAAmB,GAAG,qBAAqB;KAK1C,IAAI,CAACzW,IAAI,GAAGzN,OAAO,CAACyN,IAAI;KACxB,IAAI,CAACmD,iBAAiB,CAAC,yBAAyB,CAAC;KACjD,IAAI,CAACuT,UAAU,GAAG,IAAI,CAACC,cAAc,CAAC3Z,IAAI,CAAC,IAAI,CAAC;KAChD,IAAI,CAAC4Z,sBAAsB,GAAG,IAAI,CAACA,sBAAsB,CAAC5Z,IAAI,CAAC,IAAI,CAAC;KACpE,IAAI,CAAC6Z,qBAAqB,GAAG,IAAI,CAACA,qBAAqB,CAAC7Z,IAAI,CAAC,IAAI,CAAC;KAClE,IAAI,CAAC8Z,cAAc,EAAE;;GAGtBziB,IAAI,GACJ;KACC,IAAI,CAACF,KAAK,GAAG,IAAI4iB,gBAAK,CAAC;OACtB/b,SAAS,EAAE,gDAAgD;OAC3Dgc,QAAQ,EAAE5jB,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC;OACjD4jB,SAAS,EAAE,IAAI;OACf1U,OAAO,EAAE,IAAI,CAAC2U,YAAY,EAAE;OAC5BxgB,KAAK,EAAE,GAAG;OACVwf,SAAS,EAAE,cAAc;OACzBF,cAAc,EAAE,IAAI,CAACnU,MAAM;OAC3BpL,SAAS,EAAE,KAAK;OAChB0gB,UAAU,EAAE,IAAI;OAChBC,SAAS,EAAE,IAAI;OACfC,iBAAiB,EAAE,MAAM;OACzBC,OAAO,EAAE;SAACC,OAAO,EAAE;QAAG;OACtBC,WAAW,EAAE,IAAI;OACjB3N,OAAO,EAAE,CACR,IAAIjU,EAAE,CAAC8T,EAAE,CAAC+N,MAAM,CAAC;SAChBvb,IAAI,EAAG9I,aAAG,CAACC,UAAU,CAAC,2BAA2B,CAAC;SAClD2H,SAAS,EAAG,8CAA6C;SACzD1E,MAAM,EAAG;WAACohB,KAAK,EAAG,IAAI,CAACC,SAAS,CAAC3a,IAAI,CAAC,IAAI;;QAC1C,CAAC,EACF,IAAIpH,EAAE,CAAC8T,EAAE,CAAC+N,MAAM,CAAC;SAChBvb,IAAI,EAAE9I,aAAG,CAACC,UAAU,CAAC,sBAAsB,CAAC;SAC5C2H,SAAS,EAAE,mDAAmD;SAC9D1E,MAAM,EAAG;WAACohB,KAAK,EAAG,IAAI,CAAClH,KAAK,CAACxT,IAAI,CAAC,IAAI;;QACtC,CAAC,CACF;OACD1G,MAAM,EAAE;SACPshB,YAAY,EAAE,IAAI,CAACpH,KAAK,CAACxT,IAAI,CAAC,IAAI;;MAEnC,CAAC;KACF,IAAI,CAAC7I,KAAK,CAACE,IAAI,EAAE;KAEjB0I,eAAK,CAACC,IAAI,CAAC3D,QAAQ,EAAE,SAAS,EAAE,IAAI,CAACqd,UAAU,CAAC;KAChD3Z,eAAK,CAACC,IAAI,CAAC3D,QAAQ,EAAE,SAAS,EAAE,IAAI,CAACud,sBAAsB,CAAC;KAC5D7Z,eAAK,CAACC,IAAI,CAAC3D,QAAQ,EAAE,WAAW,EAAE,IAAI,CAACwd,qBAAqB,CAAC;;GAG9Dc,SAAS,GACT;KACC,IAAI,IAAI,CAACE,eAAe,EAAE,EAC1B;OACC,MAAMC,OAAO,GAAG,IAAI,CAAC3jB,KAAK,CAAC4jB,UAAU,EAAE,CAAC,CAAC,CAAC;OAC1CD,OAAO,CAACE,WAAW,CAAC,IAAI,CAAC;OACzBF,OAAO,CAACG,WAAW,CAAC,IAAI,CAAC;OACzB,MAAMC,YAAY,GAAG,IAAI,CAAC/jB,KAAK,CAAC4jB,UAAU,EAAE,CAAC,CAAC,CAAC;OAC/CG,YAAY,CAACD,WAAW,CAAC,IAAI,CAAC;OAC9B,IAAI,IAAI,CAACnW,GAAG,CAACjJ,SAAS,CAACsf,QAAQ,CAAC,IAAI,CAACrW,GAAG,CAACsW,UAAU,CAAC,EACpD;SACC5f,aAAG,CAAC2W,MAAM,CAAC,IAAI,CAACrN,GAAG,CAACsW,UAAU,CAAC;;OAGhC,IAAI,CAAC3S,IAAI,CAAC,UAAU,EAAE,IAAI4S,0BAAS,CAAC;SACnCjT,IAAI,EAAE;WACLkT,OAAO,EAAE,IAAI,CAACxW,GAAG,CAACyW,YAAY,CAAC9K,KAAK,CAAC+K,QAAQ,EAAE,CAACC,IAAI,EAAE;WACtDC,WAAW,EAAE,IAAI,CAAC5W,GAAG,CAAC6W,gBAAgB,CAAClL,KAAK,CAAC+K,QAAQ,EAAE,CAACC,IAAI;;QAE7D,CAAC,CAAC;MACH,MAED;OACC,IAAI,CAACG,wBAAwB,EAAE;;;GAIjCf,eAAe,GACf;KACC,OAAO,IAAI,CAAC/V,GAAG,CAACyW,YAAY,CAAC9K,KAAK,CAAC+K,QAAQ,EAAE,CAACC,IAAI,EAAE,KAAK,EAAE,IACvD,IAAI,CAAC3W,GAAG,CAAC6W,gBAAgB,CAAClL,KAAK,CAAC+K,QAAQ,EAAE,CAACC,IAAI,EAAE,KAAK,EAAE;;GAG7DG,wBAAwB,GACxB;KACC,MAAMd,OAAO,GAAG,IAAI,CAAC3jB,KAAK,CAAC4jB,UAAU,EAAE,CAAC,CAAC,CAAC;KAC1CD,OAAO,CAACE,WAAW,CAAC,KAAK,CAAC;KAC1BF,OAAO,CAACG,WAAW,CAAC,KAAK,CAAC;KAC1B,MAAMC,YAAY,GAAG,IAAI,CAAC/jB,KAAK,CAAC4jB,UAAU,EAAE,CAAC,CAAC,CAAC;KAC/CG,YAAY,CAACD,WAAW,CAAC,KAAK,CAAC;KAE/B,IAAI,IAAI,CAACnW,GAAG,CAACyW,YAAY,CAAC9K,KAAK,CAAC+K,QAAQ,EAAE,CAACC,IAAI,EAAE,KAAK,EAAE,EACxD;OACC,IAAI,CAACI,4BAA4B,EAAE;;KAEpC,IAAI,IAAI,CAAC/W,GAAG,CAAC6W,gBAAgB,CAAClL,KAAK,CAAC+K,QAAQ,EAAE,CAACC,IAAI,EAAE,KAAK,EAAE,EAC5D;OACC,IAAI,CAACK,6BAA6B,EAAE;;;GAItCD,4BAA4B,GAC5B;KACCrgB,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAAC4G,GAAG,CAACyW,YAAY,EAAE,6BAA6B,CAAC;KAElE,MAAMQ,iBAAiB,GAAG,MAAM;OAC/BvgB,aAAG,CAACsN,WAAW,CAAC,IAAI,CAAChE,GAAG,CAACyW,YAAY,EAAE,6BAA6B,CAAC;OACrExb,eAAK,CAAC0Y,MAAM,CAAC,IAAI,CAAC3T,GAAG,CAACyW,YAAY,EAAE,QAAQ,EAAEQ,iBAAiB,CAAC;OAChEhc,eAAK,CAAC0Y,MAAM,CAAC,IAAI,CAAC3T,GAAG,CAACyW,YAAY,EAAE,OAAO,EAAEQ,iBAAiB,CAAC;MAC/D;KACDhc,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8E,GAAG,CAACyW,YAAY,EAAE,QAAQ,EAAEQ,iBAAiB,CAAC;KAC9Dhc,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8E,GAAG,CAACyW,YAAY,EAAE,OAAO,EAAEQ,iBAAiB,CAAC;;GAG9DD,6BAA6B,GAC7B;KACCtgB,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAAC4G,GAAG,CAAC6W,gBAAgB,EAAE,6BAA6B,CAAC;KAEtE,MAAMI,iBAAiB,GAAG,MAAM;OAC/BvgB,aAAG,CAACsN,WAAW,CAAC,IAAI,CAAChE,GAAG,CAAC6W,gBAAgB,EAAE,6BAA6B,CAAC;OACzE5b,eAAK,CAAC0Y,MAAM,CAAC,IAAI,CAAC3T,GAAG,CAAC6W,gBAAgB,EAAE,QAAQ,EAAEI,iBAAiB,CAAC;OACpEhc,eAAK,CAAC0Y,MAAM,CAAC,IAAI,CAAC3T,GAAG,CAAC6W,gBAAgB,EAAE,OAAO,EAAEI,iBAAiB,CAAC;MACnE;KACDhc,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8E,GAAG,CAAC6W,gBAAgB,EAAE,QAAQ,EAAEI,iBAAiB,CAAC;KAClEhc,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8E,GAAG,CAAC6W,gBAAgB,EAAE,OAAO,EAAEI,iBAAiB,CAAC;KACjE,IAAI,CAACjX,GAAG,CAAC6W,gBAAgB,CAACK,KAAK,EAAE;;GAIlCC,gBAAgB,GAChB;KACC,MAAMnB,OAAO,GAAG,IAAI,CAAC3jB,KAAK,CAAC4jB,UAAU,EAAE,CAAC,CAAC,CAAC;KAC1CD,OAAO,CAACG,WAAW,CAAC,KAAK,CAAC;KAC1B,MAAMC,YAAY,GAAG,IAAI,CAAC/jB,KAAK,CAAC4jB,UAAU,EAAE,CAAC,CAAC,CAAC;KAC/CG,YAAY,CAACD,WAAW,CAAC,KAAK,CAAC;;GAGhCf,YAAY,GACZ;KACC,IAAI,CAACpV,GAAG,CAACjJ,SAAS,GAAG3F,aAAG,CAACC,MAAM,oBAAE;;MAE/B,CAA2B;;OAE1B,CAAyB;OACzB,CAAyB;OACzB,CAAyB;;;;QAIxB,CAA6B;QAC7B,CAA4B;;;QAG5B,CAA6B;QAC7B,CAAiC;;OAElC,CAA6B;;;GAGhC,GAlBI,IAAI,CAAC+lB,iBAAiB,EAAE,EAEvB,IAAI,CAACC,eAAe,EAAE,EACtB,IAAI,CAACC,eAAe,EAAE,EACtB,IAAI,CAACC,eAAe,EAAE,EAIrB,IAAI,CAACC,mBAAmB,EAAE,EAC1B,IAAI,CAACC,kBAAkB,EAAE,EAGzB,IAAI,CAACC,mBAAmB,EAAE,EAC1B,IAAI,CAACC,uBAAuB,EAAE,EAE/B,IAAI,CAACC,mBAAmB,EAAE,CAG9B;KAED,OAAO,IAAI,CAAC5X,GAAG,CAACjJ,SAAS;;GAG1BqgB,iBAAiB,GACjB;KACC,IAAI,CAAC,IAAI,CAACpX,GAAG,CAAC6X,SAAS,EACvB;OACC,IAAI,CAAC7X,GAAG,CAAC6X,SAAS,GAAGzmB,aAAG,CAACC,MAAM,sBAAC;;;yDAGoB,CAA0C;;IAE9F,GAFsDC,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC,CAE5F;;KAGF,OAAO,IAAI,CAACyO,GAAG,CAAC6X,SAAS;;GAG1BR,eAAe,GACf;KACC,IAAI,CAAC,IAAI,CAACrX,GAAG,CAAC8X,YAAY,EAC1B;OACC,IAAI,CAAC9X,GAAG,CAAC8X,YAAY,GAAG1mB,aAAG,CAACC,MAAM,sBAAC;;MAElC,CAAoD;;IAErD,GAFGC,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC,CAEnD;;KAGF,OAAO,IAAI,CAACyO,GAAG,CAAC8X,YAAY;;GAG7BN,mBAAmB,GACnB;KACC,IAAI,CAAC,IAAI,CAACxX,GAAG,CAAC+X,gBAAgB,EAC9B;OACC,IAAI,CAAC/X,GAAG,CAAC+X,gBAAgB,GAAG3mB,aAAG,CAACC,MAAM,sBAAC;;OAErC,CAAgD;;IAElD,GAFIC,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC,CAEhD;;KAGF,OAAO,IAAI,CAACyO,GAAG,CAAC+X,gBAAgB;;GAGjCR,eAAe,GACf;KACC,IAAI,CAAC,IAAI,CAACvX,GAAG,CAACgY,YAAY,EAC1B;OACC,IAAI,CAAChY,GAAG,CAACgY,YAAY,GAAG5mB,aAAG,CAACC,MAAM,sBAAC;;OAEjC,CAA8C;;IAEhD,GAFIC,aAAG,CAACC,UAAU,CAAC,2BAA2B,CAAC,CAE9C;;KAGF,OAAO,IAAI,CAACyO,GAAG,CAACgY,YAAY;;GAG7BJ,mBAAmB,GACnB;KACC,IAAI,CAAC,IAAI,CAAC5X,GAAG,CAACiY,gBAAgB,EAC9B;OACC,IAAI,CAACjY,GAAG,CAACiY,gBAAgB,GAAG7mB,aAAG,CAACC,MAAM,sBAAC;;OAErC,CAME;;IAEJ,GARIC,aAAG,CAACC,UAAU,CACf,+BAA+B,EAChC;SACE,cAAc,EAAE,iDAAiD;SACjE,YAAY,EAAE;QACd,CACD,CAEF;OAED,MAAMgM,IAAI,GAAG,IAAI,CAACyC,GAAG,CAACiY,gBAAgB,CAACzgB,aAAa,CAAC,uCAAuC,CAAC;OAC7F,IAAI+F,IAAI,EACR;SACCtC,eAAK,CAACC,IAAI,CAACqC,IAAI,EAAE,OAAO,EAAE,IAAI,CAAC2a,YAAY,CAAChd,IAAI,CAAC,IAAI,CAAC,CAAC;;;KAIzD,OAAO,IAAI,CAAC8E,GAAG,CAACiY,gBAAgB;;GAGjCX,eAAe,GACf;KACC,IAAI,CAAC,IAAI,CAACtX,GAAG,CAACyW,YAAY,EAC1B;OACC,IAAI,CAACzW,GAAG,CAACyW,YAAY,GAAGrlB,aAAG,CAACC,MAAM,sBAAE;;;oBAGrB,CAAsD;;;IAGrE,GAHiBC,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC,CAGnE;OACD,IAAI,CAACyO,GAAG,CAACyW,YAAY,CAAC0B,OAAO,GAAG,MAAM;SACrC,IAAIzhB,aAAG,CAACmZ,QAAQ,CAAC,IAAI,CAAC7P,GAAG,CAACyW,YAAY,EAAE,6BAA6B,CAAC,EACtE;WACC/f,aAAG,CAACsN,WAAW,CAAC,IAAI,CAAChE,GAAG,CAACyW,YAAY,EAAE,6BAA6B,CAAC;WACrE/f,aAAG,CAACsN,WAAW,CAAC,IAAI,CAAChE,GAAG,CAACgY,YAAY,EAAE,MAAM,CAAC;;QAE/C;OAED,IAAI,CAAChY,GAAG,CAACyW,YAAY,CAAC2B,MAAM,GAAG,MAAM;SACpC,IACC,CAAC,IAAI,CAACC,oBAAoB,EAAE,IACzB,CAAC3hB,aAAG,CAACmZ,QAAQ,CAAC,IAAI,CAAC7P,GAAG,CAACyW,YAAY,EAAE,6BAA6B,CAAC,EAEvE;WACC/f,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAAC4G,GAAG,CAACyW,YAAY,EAAE,6BAA6B,CAAC;WAClE/f,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAAC4G,GAAG,CAACgY,YAAY,EAAE,MAAM,CAAC;;QAE5C;;KAGF,OAAO,IAAI,CAAChY,GAAG,CAACyW,YAAY;;GAG7BiB,mBAAmB,GACnB;KACC,IAAI,CAAC,IAAI,CAAC1X,GAAG,CAAC6W,gBAAgB,EAC9B;OACC,IAAI,CAAC7W,GAAG,CAAC6W,gBAAgB,GAAGzlB,aAAG,CAACC,MAAM,sBAAE;;;oBAGzB,CAAwD;;;;IAIvE,GAJiBC,aAAG,CAACC,UAAU,CAAC,qCAAqC,CAAC,CAIrE;OACD0J,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8E,GAAG,CAAC6W,gBAAgB,EAAE,OAAO,EAAE,IAAI,CAACyB,wBAAwB,CAACpd,IAAI,CAAC,IAAI,CAAC,CAAC;;KAGzF,OAAO,IAAI,CAAC8E,GAAG,CAAC6W,gBAAgB;;GAGjCc,uBAAuB,GACvB;KACC,IAAI,CAAC,IAAI,CAAC3X,GAAG,CAACuY,oBAAoB,EAClC;OACC,IAAI,CAACvY,GAAG,CAACuY,oBAAoB,GAAGnnB,aAAG,CAACC,MAAM,sBAAC;;IAE3C,EAAC;OACD4J,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8E,GAAG,CAACuY,oBAAoB,EAAE,OAAO,EAAE,IAAI,CAACC,wBAAwB,CAACtd,IAAI,CAAC,IAAI,CAAC,CAAC;;KAG7F,OAAO,IAAI,CAAC8E,GAAG,CAACuY,oBAAoB;;GAGrCd,kBAAkB,GAClB;KACC,IAAI,CAAC,IAAI,CAACzX,GAAG,CAACyY,eAAe,EAC7B;OACC,IAAI,CAACzY,GAAG,CAACyY,eAAe,GAAGrnB,aAAG,CAACC,MAAM,wBAAC;0DACe,CAAkD;IACvG,GADuDC,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC,CACrG;OACD0J,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8E,GAAG,CAACyY,eAAe,EAAE,OAAO,EAAE,IAAI,CAACP,YAAY,CAAChd,IAAI,CAAC,IAAI,CAAC,CAAC;;KAG5E,OAAO,IAAI,CAAC8E,GAAG,CAACyY,eAAe;;GAGhCzD,cAAc,GACd;KACC,IAAI,CAAC,IAAI,CAAChV,GAAG,CAACsW,UAAU,EACxB;OACC,IAAI,CAACtW,GAAG,CAACsW,UAAU,GAAGllB,aAAG,CAACC,MAAM,wBAAC;;kDAEY,CAA0C;;IAEvF,GAF+CC,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC,CAErF;;;GAIHmnB,2BAA2B,GAC3B;KACC,IAAI,CAAC3B,4BAA4B,EAAE;KACnC,IAAI,CAACC,6BAA6B,EAAE;KACpC,IAAI,CAACG,gBAAgB,EAAE;KACvB,IAAI,CAAC,IAAI,CAACnX,GAAG,CAACjJ,SAAS,CAACsf,QAAQ,CAAC,IAAI,CAACrW,GAAG,CAACsW,UAAU,CAAC,EACrD;OACC5f,aAAG,CAAC6B,MAAM,CAAC,IAAI,CAACyH,GAAG,CAACsW,UAAU,EAAE,IAAI,CAACtW,GAAG,CAACjJ,SAAS,CAAC;;;GAIrDshB,oBAAoB,GACpB;KACC,MAAMM,WAAW,GAAG,mEAAmE;KACvF,MAAMC,KAAK,GAAG,IAAI,CAAC5Y,GAAG,CAACyW,YAAY,CAAC9K,KAAK,CAAC+K,QAAQ,EAAE,CAACC,IAAI,EAAE;KAC3D,IAAIiC,KAAK,KAAK,EAAE,EAChB;OACC,OAAO,IAAI;;KAGZ,OAAOD,WAAW,CAACE,IAAI,CAACD,KAAK,CAAC;;GAG/BN,wBAAwB,GACxB;KACC,MAAMQ,iBAAiB,GAAG,uCAAuC;KACjE,MAAMF,KAAK,GAAG,IAAI,CAACG,oBAAoB,CAAC,IAAI,CAAC/Y,GAAG,CAAC6W,gBAAgB,CAAClL,KAAK,CAAC+K,QAAQ,EAAE,CAACC,IAAI,EAAE,CAAC;KAC1F,IAAImC,iBAAiB,CAACD,IAAI,CAACD,KAAK,CAAC,EACjC;OACCliB,aAAG,CAACsN,WAAW,CAAC,IAAI,CAAChE,GAAG,CAAC6W,gBAAgB,EAAE,6BAA6B,CAAC;OACzEngB,aAAG,CAACsN,WAAW,CAAC,IAAI,CAAChE,GAAG,CAACiY,gBAAgB,EAAE,MAAM,CAAC;MAClD,MAED;OACCvhB,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAAC4G,GAAG,CAAC6W,gBAAgB,EAAE,6BAA6B,CAAC;OACtEngB,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAAC4G,GAAG,CAACiY,gBAAgB,EAAE,MAAM,CAAC;;;GAIjDO,wBAAwB,GACxB;KACC,IAAI9hB,aAAG,CAACmZ,QAAQ,CAAC,IAAI,CAAC7P,GAAG,CAACuY,oBAAoB,EAAE,QAAQ,CAAC,EACzD;OACC,IAAI,CAACvY,GAAG,CAAC6W,gBAAgB,CAAC3Y,IAAI,GAAG,UAAU;OAC3CxH,aAAG,CAACsN,WAAW,CAAC,IAAI,CAAChE,GAAG,CAACuY,oBAAoB,EAAE,QAAQ,CAAC;MACxD,MAED;OACC,IAAI,CAACvY,GAAG,CAAC6W,gBAAgB,CAAC3Y,IAAI,GAAG,MAAM;OACvCxH,aAAG,CAAC0C,QAAQ,CAAC,IAAI,CAAC4G,GAAG,CAACuY,oBAAoB,EAAE,QAAQ,CAAC;;;GAIvDS,SAAS,GACT;KACC,IAAI,CAAChZ,GAAG,CAAC6W,gBAAgB,CAAClL,KAAK,GAAG,EAAE;KACpC,IAAI,CAAC3L,GAAG,CAACyW,YAAY,CAAC9K,KAAK,GAAG,EAAE;KAChC,IAAIjV,aAAG,CAACmZ,QAAQ,CAAC,IAAI,CAAC7P,GAAG,CAACyW,YAAY,EAAE,6BAA6B,CAAC,EACtE;OACC/f,aAAG,CAACsN,WAAW,CAAC,IAAI,CAAChE,GAAG,CAACyW,YAAY,EAAE,6BAA6B,CAAC;;KAEtE,IAAI/f,aAAG,CAACmZ,QAAQ,CAAC,IAAI,CAAC7P,GAAG,CAAC6W,gBAAgB,EAAE,6BAA6B,CAAC,EAC1E;OACCngB,aAAG,CAACsN,WAAW,CAAC,IAAI,CAAChE,GAAG,CAAC6W,gBAAgB,EAAE,6BAA6B,CAAC;;KAE1E,IAAIngB,aAAG,CAACmZ,QAAQ,CAAC,IAAI,CAAC7P,GAAG,CAACgY,YAAY,EAAE,MAAM,CAAC,EAC/C;OACCthB,aAAG,CAACsN,WAAW,CAAC,IAAI,CAAChE,GAAG,CAACgY,YAAY,EAAE,MAAM,CAAC;;KAE/C,IAAIthB,aAAG,CAACmZ,QAAQ,CAAC,IAAI,CAAC7P,GAAG,CAACiY,gBAAgB,EAAE,MAAM,CAAC,EACnD;OACCvhB,aAAG,CAACsN,WAAW,CAAC,IAAI,CAAChE,GAAG,CAACiY,gBAAgB,EAAE,MAAM,CAAC;;;GAIpDc,oBAAoB,CAACE,QAAQ,EAC7B;KACC,MAAMC,QAAQ,GAAG,IAAI,CAACvE,mBAAmB,CAAClI,KAAK,CAACwM,QAAQ,CAACnjB,MAAM,EAAE,IAAI,CAAC6e,mBAAmB,CAAC7e,MAAM,CAAC;KACjGmjB,QAAQ,IAAIC,QAAQ;KACpB,OAAOD,QAAQ;;GAGhBf,YAAY,GACZ;KACC,MAAMhY,YAAY,GAAG,UAAU;KAC/BrD,GAAG,CAAC/I,EAAE,CAAC2J,MAAM,CAAClL,IAAI,CAAC,uBAAuB,GAAG2N,YAAY,CAAC;;GAG3D2U,cAAc,CAACvZ,CAAC,EAChB;KACC,IAAIA,CAAC,CAAC6d,OAAO,KAAK/Y,kBAAI,CAACgZ,UAAU,CAAC,OAAO,CAAC,EAC1C;OACC,IAAI,CAACvD,SAAS,EAAE;MAChB,MACI,IAAIva,CAAC,CAAC6d,OAAO,KAAK/Y,kBAAI,CAACgZ,UAAU,CAAC,QAAQ,CAAC,EAChD;OACC,IAAI,CAAC1K,KAAK,EAAE;;;GAIdoG,sBAAsB,CAACxZ,CAAC,EACxB;KACC,IAAIuY,MAAM,GAAGvY,CAAC,CAACuY,MAAM,IAAIvY,CAAC,CAAC+d,UAAU;KACrC,IAAI,CAACC,cAAc,GAAG,CAACzF,MAAM,CAAC0F,OAAO,CAAC,kBAAkB,CAAC;KACzD,IAAI,IAAI,CAACD,cAAc,IAAI,IAAI,CAACE,gBAAgB,IAAI,IAAI,CAACC,cAAc,EAAE,EACzE;OACC,IAAI,CAAC/K,KAAK,EAAE;;;GAIdqG,qBAAqB,CAACzZ,CAAC,EACvB;KACC,IAAIuY,MAAM,GAAGvY,CAAC,CAACuY,MAAM,IAAIvY,CAAC,CAAC+d,UAAU;KACrC,IAAI,CAACG,gBAAgB,GAAG,CAAC3F,MAAM,CAAC0F,OAAO,CAAC,kBAAkB,CAAC;;GAG5D7K,KAAK,GACL;KACC,IAAI,IAAI,CAACrc,KAAK,EACd;OACC,IAAI,CAACA,KAAK,CAACqnB,OAAO,EAAE;;KAErBze,eAAK,CAAC0Y,MAAM,CAACpc,QAAQ,EAAE,SAAS,EAAE,IAAI,CAACqd,UAAU,CAAC;KAClD3Z,eAAK,CAAC0Y,MAAM,CAACpc,QAAQ,EAAE,SAAS,EAAE,IAAI,CAACud,sBAAsB,CAAC;KAC9D7Z,eAAK,CAAC0Y,MAAM,CAACpc,QAAQ,EAAE,WAAW,EAAE,IAAI,CAACwd,qBAAqB,CAAC;KAC/D,IAAI,CAACiE,SAAS,EAAE;;GAGjBS,cAAc,GACd;KACC,OAAO,CAACrZ,kBAAI,CAACiO,KAAK,EAAE,CAACta,SAAS,CAACC,QAAQ,CAACkW,YAAY,EAAE;;CAExD;;CChea;GAAAnX;AAEb,CAIe,MAAM4mB,gBAAgB,SAAS1Q,UAAU,CACxD;GAOCzY,WAAW,CAACC,OAAO,GAAG,EAAE,EACxB;KACC,KAAK,CAACA,OAAO,CAAC;KAAC,KARhByY,IAAI,GAAG,QAAQ;KAAA,KACfC,WAAW,GAAG,6BAA6B;KAAA,KAC3CmJ,YAAY,GAAG,eAAe;KAAA,KAC9BC,YAAY,GAAG,sBAAsB;KAAA,KACrCC,YAAY,GAAG,eAAe;KAK7B,IAAI,CAACnR,iBAAiB,CAAC,6CAA6C,CAAC;KACrE,IAAI,CAACqK,cAAc,CAACpa,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC,CAAC;KAC5D,IAAI,CAACic,aAAa,EAAE;KACpB,IAAI,CAAC7D,aAAa,GAAG,UAAU;;GAGhCe,kBAAkB,GAClB;KACC,OAAO,EAAE;;GAGVD,oBAAoB,GACpB;KACC,IAAI,CAACS,iBAAiB,GAAG9Z,aAAG,CAACC,MAAM,oBAAC;;;;kGAI0D,CAAwC;qGACrC,CAAiD;8FACxD,CAAyD;iGACtD,CAAiD;;;;MAI5I,CAA4B;MAC5B,CAAgC;;GAElC,GAVgGC,aAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC,EAClCD,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC,EACrDD,aAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC,EACnDD,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC,EAIzI,IAAI,CAAC8Z,kBAAkB,EAAE,EACzB,IAAI,CAACF,sBAAsB,EAAE,CAEhC;KAED,OAAO,IAAI,CAACD,iBAAiB;;GAG9BsC,aAAa,GACb;KACC,IAAI,CAACpE,cAAc,GAAG,CACrB,IAAI4I,aAAa,CAAC;OACjB7K,IAAI,EAAE,IAAI,CAACmL,YAAY;OACvB5T,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,yBAAyB;MAC/C,CAAC,EACF,IAAIygB,aAAa,CAAC;OACjB7K,IAAI,EAAE,IAAI,CAACoL,YAAY;OACvB7T,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,yBAAyB;MAC/C,CAAC,EACF,IAAIygB,aAAa,CAAC;OACjB7K,IAAI,EAAE,IAAI,CAACqL,YAAY;OACvB9T,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,yBAAyB;MAC/C,CAAC,CACF;;GAGFud,WAAW,CAACF,SAAS,EACrB;KACC,KAAK,CAACE,WAAW,CAACF,SAAS,CAAC;KAE5B,IAAI,CAACnB,aAAa,EAAE,CAAC9X,OAAO,CAACgY,KAAK,IAAI;OACrC,IACCiB,SAAS,CAACjB,KAAK,KAAK,oBAAoB,IACrCA,KAAK,CAACxG,IAAI,KAAK,IAAI,CAACmL,YAAY,EAEpC;SACC3E,KAAK,CAACwE,OAAO,EAAE;QACf,MACI,IACJvD,SAAS,CAACjB,KAAK,KAAK,iBAAiB,KACjCA,KAAK,CAACxG,IAAI,KAAK,IAAI,CAACmL,YAAY,IAAI3E,KAAK,CAACxG,IAAI,KAAK,IAAI,CAACoL,YAAY,CAAC,EAE1E;SACC5E,KAAK,CAACwE,OAAO,EAAE;QACf,MACI,IAAIvD,SAAS,CAACjB,KAAK,KAAK,iBAAiB,EAC9C;SACCA,KAAK,CAACwE,OAAO,EAAE;SACf,IAAIxE,KAAK,CAACxG,IAAI,KAAK,IAAI,CAACqL,YAAY,EACpC;WACC,IAAI,IAAI,CAACvZ,IAAI,KAAK,cAAc,EAChC;aACC,IAAI,CAACgR,iBAAiB,EAAE;YACxB,MAED;aACC,IAAI,CAAC8E,uBAAuB,EAAE;aAC9B,IAAI,CAACC,iBAAiB,EAAE;aACxB,IAAI,CAACE,qBAAqB,EAAE;;WAE7B,IAAI,CAACiC,YAAY,EAAE;WAEnB,IAAI,CAACxN,IAAI,CAAC,qBAAqB,CAAC;;;MAGlC,CAAC;;GAGH4H,gBAAgB,GAChB;KACC,OAAOja,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;;CAE1D;;CClHa;GAAAwB;AACb,CAIe,MAAM6mB,oBAAoB,CACzC;GAICppB,WAAW,CAACC,OAAO,GAAG,EAAE,EACxB;KAAA,KAJAsP,MAAM,GAAG,IAAI;KAAA,KACbC,GAAG,GAAG,EAAE;KAIP,IAAI,CAAC6Z,UAAU,GAAGppB,OAAO,CAACopB,UAAU;;GAGrCtnB,IAAI,GACJ;KACC,IAAI,CAACF,KAAK,GAAG,IAAI4iB,gBAAK,CAAC;OACtB/b,SAAS,EAAE,gDAAgD;OAC3Dgc,QAAQ,EAAE5jB,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC;OACnEqD,KAAK,EAAE,GAAG;OACVugB,SAAS,EAAE,IAAI;OACf1U,OAAO,EAAE,IAAI,CAAC2U,YAAY,EAAE;OAC5BzgB,SAAS,EAAE,KAAK;OAChB0gB,UAAU,EAAE,IAAI;OAChBC,SAAS,EAAE,IAAI;OACfC,iBAAiB,EAAE,MAAM;OACzBC,OAAO,EAAE;SAAEC,OAAO,EAAE;QAAI;OACxB1N,OAAO,EAAE,CACR,IAAIjU,EAAE,CAAC8T,EAAE,CAAC+N,MAAM,CAAC;SAChBvb,IAAI,EAAE9I,aAAG,CAACC,UAAU,CAAC,8CAA8C,CAAC;SACpE2H,SAAS,EAAE,iCAAiC;SAC5C1E,MAAM,EAAE;WAAEohB,KAAK,EAAE,IAAI,CAACsC,YAAY,CAAChd,IAAI,CAAC,IAAI;;QAC5C,CAAC,EACF,IAAIpH,EAAE,CAAC8T,EAAE,CAAC+N,MAAM,CAAC;SAChBvb,IAAI,EAAE9I,aAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC;SAC3C2H,SAAS,EAAE,+BAA+B;SAC1C1E,MAAM,EAAE;WAAEohB,KAAK,EAAE,IAAI,CAACkE,cAAc,CAAC5e,IAAI,CAAC,IAAI;;QAC9C,CAAC,CACF;OACD1G,MAAM,EAAE;SACPshB,YAAY,EAAE,IAAI,CAACpH,KAAK,CAACxT,IAAI,CAAC,IAAI;;MAEnC,CAAC;KAEF,IAAI,CAAC7I,KAAK,CAACE,IAAI,EAAE;;GAGlB6iB,YAAY,GACZ;KACC,IAAI,CAACpV,GAAG,CAACjJ,SAAS,GAAG3F,aAAG,CAACC,MAAM,oBAAC;;MAE9B,CAA6B;;GAE/B,GAFI,IAAI,CAAC0oB,mBAAmB,EAAE,CAE7B;KAED,OAAO,IAAI,CAAC/Z,GAAG,CAACjJ,SAAS;;GAG1BgjB,mBAAmB,GACnB;KACC,IAAI,CAAC/Z,GAAG,CAACsW,UAAU,GAAG,IAAIxiB,EAAE,CAAC8T,EAAE,CAACoS,KAAK,CAAC;OACrC5f,IAAI,EAAE9I,aAAG,CAACC,UAAU,CAAC,wCAAwC,CAAC;OAC9DuQ,KAAK,EAAEhO,EAAE,CAAC8T,EAAE,CAACoS,KAAK,CAACC,KAAK,CAACC,OAAO;OAChClX,IAAI,EAAElP,EAAE,CAAC8T,EAAE,CAACoS,KAAK,CAACG,IAAI,CAACC;MACvB,CAAC;KAEF,MAAMrjB,SAAS,GAAG,IAAI,CAACiJ,GAAG,CAACsW,UAAU,CAAClB,YAAY,EAAE;KACpD,MAAMhb,IAAI,GAAGrD,SAAS,CAACS,aAAa,CAAC,mBAAmB,CAAC;KACzDd,aAAG,CAAC0C,QAAQ,CAACgB,IAAI,EAAE,kCAAkC,CAAC;KAEtD,OAAOrD,SAAS;;GAGjBmhB,YAAY,GACZ;KACC,MAAMhY,YAAY,GAAG,UAAU;KAC/BrD,GAAG,CAAC/I,EAAE,CAAC2J,MAAM,CAAClL,IAAI,CAAC,uBAAuB,GAAG2N,YAAY,CAAC;;GAG3Dma,iBAAiB,GACjB;KACCvmB,EAAE,CAACsP,IAAI,CAACC,SAAS,CAAC,oDAAoD,CAAC,CAACI,IAAI,CAAC,MAAM;OAClF,IAAI,CAACoW,UAAU,CAACtnB,IAAI,EAAE;OACtB,IAAI,CAACmc,KAAK,EAAE;OACZtO,kBAAI,CAACka,yBAAyB,CAAC,KAAK,CAAC;OACrCla,kBAAI,CAACma,sBAAsB,CAAC,KAAK,CAAC;MAClC,CAAC;;GAGHT,cAAc,GACd;KACC,IAAI,CAACD,UAAU,CAACtnB,IAAI,EAAE;KACtB,IAAI,CAACmc,KAAK,EAAE;;GAGbA,KAAK,GACL;KACC,IAAI,IAAI,CAACrc,KAAK,EACd;OACC,IAAI,CAACA,KAAK,CAACqnB,OAAO,EAAE;;;CAGvB;;CC5Fe,MAAMc,cAAc,SAASvZ,iBAAiB,CAC7D;GACCzQ,WAAW,CAACqN,QAAQ,EAAE9H,UAAU,GAAG,IAAI,EACvC;KACC,KAAK,CAAC;OACL2I,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC;OAC9C2O,YAAY,EAAE,SAAS;OACvBqB,eAAe,EAAEjQ,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;OAC9DiQ,qBAAqB,EAAElQ,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;OACvEkQ,iBAAiB,EAAEnQ,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC;OAC5DmQ,uBAAuB,EAAEpQ,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;OAC1EoQ,eAAe,EAAE,yCAAyC;OAC1DC,QAAQ,EAAE,yCAAyC;OACnDC,aAAa,EAAE,UAAU;OACzBC,KAAK,EAAE,SAAS;OAChBjE,QAAQ,EAAEA,QAAQ;OAClB9H,UAAU,EAAEA,UAAU;OACtBlF,qBAAqB,EAAE;MACvB,CAAC;KAEF,IAAI,CAAC2U,mBAAmB,GAAG,EAAE;KAC7B,IAAI,CAACK,WAAW,GAAG,EAAE;;GAGtBoN,gBAAgB,CAAC3P,IAAI,EACrB;KACC,IAAI,CAACzF,QAAQ,CAAC0V,iBAAiB,CAAC,IAAI,CAAC;KACrC,IAAI,CAAC1V,QAAQ,CAAC0I,gBAAgB,EAAE,CAACvN,aAAa,CAAC,IAAI,CAAC6E,QAAQ,CAAC7D,oBAAoB,CAAC;KAElFlG,EAAE,CAACsP,IAAI,CAACC,SAAS,CAAC,8CAA8C,EAAE;OACjEC,IAAI,EAAE;SACLkT,OAAO,EAAElT,IAAI,CAACkT,OAAO;SACrBI,WAAW,EAAEtT,IAAI,CAACsT;;MAEnB,CAAC,CAACnT,IAAI,CACLC,QAAQ,IAAK;OACb,MAAM+W,MAAM,GAAG/W,QAAQ,CAACJ,IAAI;OAE5B,IAAImX,MAAM,CAAC/pB,MAAM,KAAK,SAAS,IAAI+pB,MAAM,CAACtV,YAAY,EACtD;SACC,IAAI,CAACsO,cAAc,CAACnQ,IAAI,CAACkT,OAAO,CAAC;SACjC,KAAK,IAAI,CAACkE,uBAAuB,CAACD,MAAM,CAACtV,YAAY,CAAC;;MAEvD,EACD,MAAM;OACL,IAAI,CAAC0U,UAAU,CAACnB,2BAA2B,EAAE;MAC7C,CACD;;GAGFgC,uBAAuB,CAACvV,YAAY,EACpC;KACC,IAAI,CAAC0U,UAAU,CAACnL,KAAK,EAAE;KAEvB,OAAO,IAAIta,OAAO,CAAEC,OAAO,IAAK;OAC/BP,EAAE,CAACsP,IAAI,CAACC,SAAS,CAAC,4CAA4C,EAAE;SAC/DC,IAAI,EAAE;WACL6B,YAAY,EAAEA;;QAEf,CAAC,CAAC1B,IAAI,CACLC,QAAQ,IAAK;SACb,IAAI,CAAC7F,QAAQ,CAAC7M,SAAS,CAAC,IAAI,CAAC6M,QAAQ,CAACvE,cAAc,CAAC;SACrD,IAAI,CAACuE,QAAQ,CAAC0I,gBAAgB,EAAE,CAACvN,aAAa,CAAC,IAAI,CAAC6E,QAAQ,CAACvE,cAAc,CAAC;SAC5E,IAAI6L,YAAY,EAChB;WACC,IAAI,CAACtH,QAAQ,CAAC3F,aAAa,EAAE,CAACyiB,KAAK,CAACxV,YAAY,CAAC;WACjD,IAAI,CAACtH,QAAQ,CAAC3F,aAAa,EAAE,CAAClH,SAAS,CAAC,IAAI,CAAC;WAC7C,IAAI,CAAC6M,QAAQ,CAAC3F,aAAa,EAAE,CAAC0iB,YAAY,CAAC,IAAI,CAAC;WAChD,IAAI,CAAC/c,QAAQ,CAAC3F,aAAa,EAAE,CAAC2iB,WAAW,CAAC,IAAI5e,IAAI,EAAE,CAAC;;SAGtD5H,OAAO,CAACqP,QAAQ,CAACJ,IAAI,CAAC;QACtB,EACAI,QAAQ,IAAK;SACb,IAAI,CAAC7F,QAAQ,CAAC7M,SAAS,CAAC,IAAI,CAAC6M,QAAQ,CAACpE,aAAa,CAAC;SACpD,IAAI,CAACoE,QAAQ,CAACid,cAAc,CAC3B;WACCpqB,MAAM,EAAE,IAAI,CAACmN,QAAQ,CAACkd,UAAU;WAChCC,UAAU,EAAE,IAAI,CAACnd,QAAQ,CAACK;UAC1B,CACD;SACD7J,OAAO,CAACqP,QAAQ,CAAC6D,MAAM,CAAC;QACxB,CAAC;MACH,CAAC;;GAGH0T,oBAAoB,GACpB;KACC,OAAO,IAAI7mB,OAAO,CAAEC,OAAO,IAAK;OAC/BP,EAAE,CAACsP,IAAI,CAACC,SAAS,CAAC,+CAA+C,EAAE;SAClEC,IAAI,EAAE;WACL6B,YAAY,EAAE,IAAI,CAACpP,UAAU,CAAC2Q,SAAS,CAAC7T;;QAEzC,CAAC,CACD4Q,IAAI,CACHC,QAAQ,IAAK;SACb,IAAI,CAACmC,WAAW,GAAGnC,QAAQ,CAACJ,IAAI;SAChCjP,OAAO,CAACqP,QAAQ,CAACJ,IAAI,CAAC;QACtB,EACAI,QAAQ,IAAK;SACbrP,OAAO,CAACqP,QAAQ,CAAC6D,MAAM,CAAC;QACxB,CACD;MACD,CAAC;;GAGHvB,mBAAmB,CAACpC,KAAK,EACzB;KACC,IAAI,CAAC4B,mBAAmB,CAAC5B,KAAK,CAACiQ,MAAM,CAAClI,KAAK,CAAC,GAAG/H,KAAK,CAACiQ,MAAM,CAACC,OAAO;KACnE,IAAI,CAACxO,aAAa,EAAE;KACpB,IAAI,CAACa,iCAAiC,EAAE;;GAGzCrK,mBAAmB,GACnB;KACC,IAAI,CAACof,SAAS,EAAE;KAChB,IAAI9a,kBAAI,CAAC+a,iBAAiB,EAAE,IAAI/a,kBAAI,CAACgb,cAAc,EAAE,EACrD;OACC,IAAI,CAACC,cAAc,CAAC9oB,IAAI,EAAE;MAC1B,MAED;OACC,IAAI,CAACsnB,UAAU,CAACtnB,IAAI,EAAE;;;GAIxB2oB,SAAS,GACT;KACC,IAAI,CAAC,IAAI,CAACrB,UAAU,EACpB;OACC,IAAI,CAACA,UAAU,GAAG,IAAInF,gBAAgB,EAAE;OAExCxT,6BAAY,CAACoa,cAAc,CAAC,kCAAkC,CAAC;OAC/Dpa,6BAAY,CAACoN,SAAS,CAAC,kCAAkC,EAAGhT,CAAC,IAAK;SACjE,IAAI,CAAC2X,gBAAgB,CAAC3X,CAAC,CAACgI,IAAI,CAAC;QAC7B,CAAC;;KAGH,IAAI,CAAC,IAAI,CAAC+X,cAAc,EACxB;OACC,IAAI,CAACA,cAAc,GAAG,IAAIzB,oBAAoB,CAAC;SAC9CC,UAAU,EAAE,IAAI,CAACA;QACjB,CAAC;;;GAIJpG,cAAc,CAAC+C,OAAO,EACtB;KACC,IAAI,CAAC3Y,QAAQ,CAAC0V,iBAAiB,CAAC,IAAI,CAAC;KACrC,MAAMta,IAAI,GAAG,IAAI,CAAC4E,QAAQ,CAAC2W,qBAAqB,GAAG,WAAW,GAAG,SAAS;KAC1E,IAAI,CAACD,MAAM,GAAG,IAAIoF,gBAAgB,CAAC;OAAE1gB;MAAM,CAAC;KAC5C,IAAI,CAACsb,MAAM,CAAC1gB,UAAU,EAAE;KACxB,IAAI,CAACgK,QAAQ,CAAC4W,eAAe,CAAC,IAAI,CAACF,MAAM,CAAC;KAE1CrT,6BAAY,CAACqa,aAAa,CAAC,uDAAuD,EAAE,MAAM;OACzF,IAAI,CAAChH,MAAM,CAACzF,WAAW,CAAC;SACvBnB,KAAK,EAAE,oBAAoB;SAC3BqN,UAAU,EAAE,QAAQ;SACpB3R,WAAW,EAAEmN;QACb,CAAC;MACF,CAAC;;GAGHtR,2BAA2B,CAACrS,EAAE,EAC9B;KACC,IAAI,CAACyT,oBAAoB,CAACzT,EAAE,CAAC;;CAE/B;;CCjLa;GAAAE;AAEb,CAIe,MAAMyoB,mBAAmB,SAASvS,UAAU,CAC3D;GAOCzY,WAAW,CAACC,OAAO,GAAG,EAAE,EACxB;KACC,KAAK,CAACA,OAAO,CAAC;KAAC,KARhByY,IAAI,GAAG,WAAW;KAAA,KAClBC,WAAW,GAAG,gCAAgC;KAAA,KAC9CmJ,YAAY,GAAG,kBAAkB;KAAA,KACjCC,YAAY,GAAG,wBAAwB;KAAA,KACvCC,YAAY,GAAG,sBAAsB;KAKpC,IAAI,CAACnR,iBAAiB,CAAC,gDAAgD,CAAC;KACxE,IAAI,CAACqK,cAAc,CAACpa,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC,CAAC;KAC/D,IAAI,CAACic,aAAa,EAAE;KACpB,IAAI,CAAC7D,aAAa,GAAG,aAAa;;GAGnCe,kBAAkB,GAClB;KACC,OAAO,EAAE;;GAGVD,oBAAoB,GACpB;KACC,IAAI,CAACS,iBAAiB,GAAG9Z,aAAG,CAACC,MAAM,oBAAC;;;;kGAI0D,CAAwC;qGACrC,CAAoD;8FAC3D,CAA4D;iGACzD,CAAiD;;;;MAI5I,CAA4B;MAC5B,CAAgC;;GAElC,GAVgGC,aAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC,EAClCD,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC,EACxDD,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC,EACtDD,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC,EAIzI,IAAI,CAAC8Z,kBAAkB,EAAE,EACzB,IAAI,CAACF,sBAAsB,EAAE,CAEhC;KAED,OAAO,IAAI,CAACD,iBAAiB;;GAG9BsC,aAAa,GACb;KACC,IAAI,CAACpE,cAAc,GAAG,CACrB,IAAI4I,aAAa,CAAC;OACjB7K,IAAI,EAAE,IAAI,CAACmL,YAAY;OACvB5T,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,4BAA4B;MAClD,CAAC,EACF,IAAIygB,aAAa,CAAC;OACjB7K,IAAI,EAAE,IAAI,CAACoL,YAAY;OACvB7T,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,4BAA4B;MAClD,CAAC,EACF,IAAIygB,aAAa,CAAC;OACjB7K,IAAI,EAAE,IAAI,CAACqL,YAAY;OACvB9T,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,4BAA4B;MAClD,CAAC,CACF;;GAGFud,WAAW,CAACF,SAAS,EACrB;KACC,KAAK,CAACE,WAAW,CAACF,SAAS,CAAC;KAE5B,IAAI,CAACnB,aAAa,EAAE,CAAC9X,OAAO,CAAEgY,KAAK,IAAK;OACvC,IACCiB,SAAS,CAACjB,KAAK,KAAK,oBAAoB,IACrCA,KAAK,CAACxG,IAAI,KAAK,IAAI,CAACmL,YAAY,EAEpC;SACC3E,KAAK,CAACwE,OAAO,EAAE;QACf,MACI,IACJvD,SAAS,CAACjB,KAAK,KAAK,iBAAiB,KACjCA,KAAK,CAACxG,IAAI,KAAK,IAAI,CAACmL,YAAY,IAAI3E,KAAK,CAACxG,IAAI,KAAK,IAAI,CAACoL,YAAY,CAAC,EAE1E;SACC5E,KAAK,CAACwE,OAAO,EAAE;QACf,MACI,IAAIvD,SAAS,CAACjB,KAAK,KAAK,iBAAiB,EAC9C;SACCA,KAAK,CAACwE,OAAO,EAAE;SACf,IAAI,IAAI,CAAClZ,IAAI,KAAK,cAAc,EAChC;WACC,IAAI,CAACgR,iBAAiB,EAAE;UACxB,MAED;WACC,IAAI,CAAC8E,uBAAuB,EAAE;WAC9B,IAAI,CAACC,iBAAiB,EAAE;WACxB,IAAI,CAACE,qBAAqB,EAAE;;SAE7B,IAAI,CAACiC,YAAY,EAAE;SAEnB,IAAI,CAACxN,IAAI,CAAC,qBAAqB,CAAC;;MAEjC,CAAC;;GAGH4H,gBAAgB,GAChB;KACC,OAAOja,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC;;CAE7D;;CCtGe,MAAMkqB,iBAAiB,SAASxa,iBAAiB,CAChE;GAGCzQ,WAAW,CAACqN,QAAQ,EAAE9H,UAAU,GAAG,IAAI,EACvC;KACC,KAAK,CAAC;OACL2I,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC;OACjD2O,YAAY,EAAE,SAAS;OACvBqB,eAAe,EAAEjQ,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;OACjEiQ,qBAAqB,EAAElQ,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;OAC1EkQ,iBAAiB,EAAEnQ,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;OACtEmQ,uBAAuB,EAAEpQ,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC;OAC7EoQ,eAAe,EAAE,4CAA4C;OAC7DC,QAAQ,EAAE,4CAA4C;OACtDC,aAAa,EAAE,aAAa;OAC5BC,KAAK,EAAE,SAAS;OAChBjE,QAAQ,EAAEA,QAAQ;OAClB9H,UAAU,EAAEA,UAAU;OACtBlF,qBAAqB,EAAE;MACvB,CAAC;KAAC,KAlBJ+hB,uBAAuB,GAAG,GAAG;KAoB5B,IAAI,CAACpN,mBAAmB,GAAG,EAAE;KAC7B,IAAI,CAACK,WAAW,GAAG,EAAE;KAErB,IAAI,CAACgN,+BAA+B,GAAGC,iBAAO,CAACC,QAAQ,CAAC,IAAI,CAACC,uBAAuB,EAAE,IAAI,CAACJ,uBAAuB,EAAE,IAAI,CAAC;;GAG1HK,gBAAgB,GAChB;KACC,MAAMC,QAAQ,GAAG,IAAI,CAACrV,QAAQ,CAACsV,WAAW,EAAE;KAC5Crf,EAAE,CAAC6K,IAAI,CAACtM,KAAK,CAAC6gB,QAAQ,EAAE,GAAG,EAAE,GAAG,CAAC;KAEjCjY,eAAK,CAACC,IAAI,CAAC0B,MAAM,EAAE,YAAY,EAAE,IAAI,CAACiW,+BAA+B,CAAC;;GAGvEG,uBAAuB,CAACpP,KAAK,EAC7B;KACC,IAAIhH,MAAM,CAACwW,QAAQ,CAACC,IAAI,KAAK,uBAAuB,EACpD;OACCjT,kBAAI,CAACkT,UAAU,EAAE;OACjB,IAAI,CAACzV,QAAQ,CAAC0V,iBAAiB,CAAC,IAAI,CAAC;OAErC,IAAI,CAAC1V,QAAQ,CAAC2V,cAAc,EAAE;OAC9B,IAAI,CAACC,cAAc,EAAE;OACrB,IAAI,CAAC5V,QAAQ,CAAC7M,SAAS,CAAC,IAAI,CAAC6M,QAAQ,CAAC7D,oBAAoB,CAAC;OAC3D,IAAI,CAAC6D,QAAQ,CAAC0I,gBAAgB,EAAE,CAACvN,aAAa,CAAC,IAAI,CAAC6E,QAAQ,CAAC7D,oBAAoB,CAAC;OAClF,IAAI,CAAC6D,QAAQ,CAAC0I,gBAAgB,EAAE,CAACpM,aAAa,EAAE;OAEhD,IAAI,IAAI,CAAC0D,QAAQ,CAAC6V,cAAc,EAAE,EAClC;SACC,IAAI,CAAC7V,QAAQ,CAAC8F,IAAI,CAAC,gBAAgB,CAAC;;OAGrC1I,eAAK,CAAC0Y,MAAM,CAAC/W,MAAM,EAAE,YAAY,EAAE,IAAI,CAACiW,+BAA+B,CAAC;;;GAI1E7M,mBAAmB,CAACpC,KAAK,EACzB;KACC,IAAI,CAAC4B,mBAAmB,CAAC5B,KAAK,CAACiQ,MAAM,CAAClI,KAAK,CAAC,GAAG/H,KAAK,CAACiQ,MAAM,CAACC,OAAO;KACnE,IAAI,CAACxO,aAAa,EAAE;KACpB,IAAI,CAACa,iCAAiC,EAAE;;GAGzCrK,mBAAmB,GACnB;KACC,IAAI,IAAI,CAAC+B,QAAQ,CAAC6d,2BAA2B,EAAE,EAC/C;OACC,IAAI,CAACzI,gBAAgB,EAAE;MACvB,MAED;OACC,IAAI,CAAC3L,cAAc,EAAE;;;GAIvBmM,cAAc,GACd;KACC,MAAMxa,IAAI,GAAG,IAAI,CAAC4E,QAAQ,CAAC2W,qBAAqB,GAAG,WAAW,GAAG,SAAS;KAC1E,IAAI,CAACD,MAAM,GAAG,IAAIiH,mBAAmB,CAAC;OAAEviB;MAAM,CAAC;KAC/C,IAAI,CAACsb,MAAM,CAAC1gB,UAAU,EAAE;KACxB,IAAI,CAACgK,QAAQ,CAAC4W,eAAe,CAAC,IAAI,CAACF,MAAM,CAAC;;GAG3CoH,uBAAuB,GACvB;KACC,OAAO,IAAIvnB,OAAO,CAAEC,OAAO,IAAK;OAC/BP,EAAE,CAACsP,IAAI,CAACC,SAAS,CAAC,kDAAkD,EAAE;SACrEC,IAAI,EAAE;WACL6B,YAAY,EAAE,IAAI,CAACpP,UAAU,CAAC2Q,SAAS,CAAC7T;;QAEzC,CAAC,CACA4Q,IAAI,CACHC,QAAQ,IAAK;SACb,IAAI,CAACmC,WAAW,GAAGnC,QAAQ,CAACJ,IAAI;SAChCjP,OAAO,CAACqP,QAAQ,CAACJ,IAAI,CAAC;QACtB,EACAI,QAAQ,IAAK;SACbrP,OAAO,CAACqP,QAAQ,CAAC6D,MAAM,CAAC;QACxB,CACD;MACF,CAAC;;GAGHrC,2BAA2B,CAACrS,EAAE,EAC9B;KACC,IAAI,CAACyT,oBAAoB,CAACzT,EAAE,CAAC;;GAG9ByU,cAAc,GACd;KACC,MAAMK,UAAU,GAAG,IAAIG,gCAAU,CAAC;OACjC5O,SAAS,EAAE,IAAI,CAACrG,EAAE;OAClB4U,OAAO,EAAEnW,aAAG,CAACC,UAAU,CAAC,kDAAkD,CAAC;OAC3EqD,KAAK,EAAE,GAAG;OACVmf,UAAU,EAAE,EAAE;OACdC,SAAS,EAAE,CAAC;OACZC,OAAO,EAAE,CAAC;OACV1L,IAAI,EAAE,MAAM;SACXZ,UAAU,CAAC+G,KAAK,EAAE;QAClB;OACDxG,SAAS,EAAE,IAAI;OACfH,OAAO,EAAEjU,EAAE,CAAC8T,EAAE,CAACC,OAAO,CAACG,iBAAiB,CAACC,EAAE;OAC3CI,YAAY,EAAE;SACb6L,cAAc,EAAE,IAAI;SACpBC,QAAQ,EAAE,IAAI;SACdC,SAAS,EAAE;;MAEZ,CAAC;KACFzM,UAAU,CAACpV,IAAI,EAAE;;CAEnB;;CC7Ia;GAAAQ;GAAAC;GAAAC;GAAAC;GAAAC;GAAAsE;AAEb,CAIe,MAAMmkB,WAAW,SAAS3a,iBAAiB,CAC1D;GACCzQ,WAAW,CAACqN,QAAQ,EAAE9H,UAAU,GAAG,IAAI,EACvC;KACC,KAAK,CAAC;OACL2I,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC;OAC3C2O,YAAY,EAAE,SAAS;OACvBqB,eAAe,EAAEjQ,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;OACjEiQ,qBAAqB,EAAElQ,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;OACpEkQ,iBAAiB,EAAEnQ,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;OACtEmQ,uBAAuB,EAAEpQ,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC;OACvEoQ,eAAe,EAAE,sCAAsC;OACvDC,QAAQ,EAAE,sCAAsC;OAChDE,KAAK,EAAE,SAAS;OAChBjE,QAAQ,EAAEA,QAAQ;OAClB9H,UAAU,EAAEA,UAAU;OACtBlF,qBAAqB,EAAE;MACvB,CAAC;KAEF,IAAI,CAACsP,qBAAqB,GAAGC,kBAAI,CAACE,iBAAiB,EAAE;KACrD,IAAI,IAAI,CAACH,qBAAqB,EAC9B;OACC,IAAI,CAAC4E,WAAW,GAAGzT,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC;OAC9E,IAAI,CAACyT,oBAAoB,GAAG1T,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;MAC5E,MAED;OACC,IAAI,CAACwT,WAAW,GAAGzT,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;OACpE,IAAI,CAACyT,oBAAoB,GAAG1T,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC;;;GAIvEsqB,gBAAgB,GAChB;KACC,OAAO,IAAI,CAACC,aAAa;;GAG1B7Z,kBAAkB,GAClB;KACC,OAAO7Q,aAAG,CAACC,MAAM,oBAAE;KAClB,CAAkC;KAClC,CAA+B;GAChC,GAFG,IAAI,CAAC6S,wBAAwB,EAAE,EAC/B,IAAI,CAACQ,qBAAqB,EAAE;;GAKhC/B,0BAA0B,GAC1B;KACC,OAAOvR,aAAG,CAACC,MAAM,sBAAC;;;+CAGyB,CAAwB;;MAEjE,CAA8B;;GAEhC,GAJ6C,IAAI,CAAC2Q,cAAc,EAAE,EAE9D,IAAI,CAACa,oBAAoB,EAAE;;GAKhCA,oBAAoB,GACpB;KACC,OAAOzR,aAAG,CAACC,MAAM,sBAAC;KACjB,CAAoC;;MAEnC,CAA+B;;GAEjC,GAJG,IAAI,CAAC6Q,0BAA0B,EAAE,EAEhC,IAAI,CAAC6Z,qBAAqB,EAAE;;GAKjC7Z,0BAA0B,GAC1B;KACC,MAAMhG,SAAS,GAAG,IAAI,CAACnG,UAAU,CAACyD,WAAW,EAAE,CAAC8C,OAAO,EAAE,GAAG,IAAI;KAChE,MAAM6F,QAAQ,GAAGjG,SAAS,GACvBkE,kBAAI,CAACgC,gBAAgB,CAAClG,SAAS,CAAC,GAAG,GAAG,GAAGpI,EAAE,CAACiI,IAAI,CAACU,MAAM,CAAC2D,kBAAI,CAACiC,kBAAkB,EAAE,EAAEnG,SAAS,CAAC,GAC7F,EAAE;KAEL,OAAO9K,aAAG,CAACC,MAAM,sBAAE;;mDAE4B,CAAuB;;8CAE5B,CAAyB;;oDAEnB,CAA4C;oDAC5C,CAAW;;gFAEiB,CAA2B,KAAE,CAA6C;;UAE/I,GAT0C,IAAI,CAACsQ,eAAe,EAEzB,IAAI,CAACF,iBAAiB,EAEhBnQ,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC,EACzC4Q,QAAQ,EAEoB,IAAI,CAACkC,QAAQ,CAACnJ,IAAI,CAAC,IAAI,CAAC,EAAK5J,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC;;GAKtJkT,8BAA8B,GAC9B;KACC,IAAI,CAAC,IAAI,CAACuX,YAAY,EACtB;OACC,IAAI,CAACA,YAAY,GAAG5qB,aAAG,CAACC,MAAM,sBAAC;;;;SAI3B,CAAmC;;;;IAIvC,GAJMC,aAAG,CAACC,UAAU,CAAC,gBAAgB,CAAC,CAIrC;OAED0J,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC8gB,YAAY,EAAE,OAAO,EAAE,IAAI,CAACC,qBAAqB,CAAC/gB,IAAI,CAAC,IAAI,CAAC,CAAC;;KAG9E,OAAO,IAAI,CAAC8gB,YAAY;;GAGzBC,qBAAqB,GACrB;KACC,IAAI,CAACD,YAAY,CAACzP,KAAK,CAAC5Q,OAAO,GAAG,MAAM;KACxCjF,aAAG,CAAC6B,MAAM,CAAC,IAAI,CAACwjB,qBAAqB,EAAE,EAAE,IAAI,CAACvX,cAAc,CAAC;;GAG9DuX,qBAAqB,GACrB;KACC,OAAO3qB,aAAG,CAACC,MAAM,sBAAC;;;kDAG4B,CAA+C;;;oDAG7C,CAAoD;;;sDAGlD,CAAoD;;;sDAGpD,CAAqD;;;sDAGrD,CAAoD;;;sDAGpD,CAAqD;;;sDAGrD,CAA8G;;;sDAG9G,CAAoD;;;sDAGpD,CAAsD;;;oDAGxD,CAAmD;;;uFAGhB,CAA2B;UACxG,CAA6C;;;;;;GAMnD,GArCgDC,aAAG,CAACC,UAAU,CAAC,4BAA4B,CAAC,EAG1CD,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC,EAG/CD,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC,EAGjDD,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC,EAGlDD,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC,EAGjDD,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC,EAGlDD,aAAG,CAACC,UAAU,CAAC,iCAAiC,EAAE;OAAE,kBAAkB,EAAE,IAAI,CAACsM,QAAQ,CAACge,gBAAgB;MAAI,CAAC,EAG3GvqB,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC,EAGjDD,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC,EAGrDD,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC,EAGb,IAAI,CAAC8S,QAAQ,CAACnJ,IAAI,CAAC,IAAI,CAAC,EACrG5J,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC;;GASnDuT,8BAA8B,GAC9B;KACChR,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACwa,cAAc,EAAE,CAAC7Y,OAAO,CAACxB,MAAM,IACrD;OACC,IAAI,CAAC,gCAAgC,EAAE,gCAAgC,CAAC,CAACoH,QAAQ,CAACpH,MAAM,CAACsa,MAAM,EAAE,CAAC,EAClG;SACCta,MAAM,CAACua,KAAK,EAAE;;MAEf,CAAC;KAEF,MAAMwN,eAAe,GAAG9b,kBAAI,CAAC+b,kBAAkB,EAAE;KACjD,IAAID,eAAe,EACnB;OACCA,eAAe,CACbE,aAAa,CACbC,iBAAiB,EAAE,CACnB9V,gBAAgB,EAAE,CAClBxO,qBAAqB,EAAE,CACvB+D,mBAAmB,EAAE;;;GAIzB+I,+BAA+B,GAC/B;KACC/Q,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACwa,cAAc,EAAE,CAAC7Y,OAAO,CAACxB,MAAM,IACrD;OACC,IAAI,CAAC,gCAAgC,EAAE,gCAAgC,CAAC,CAACoH,QAAQ,CAACpH,MAAM,CAACsa,MAAM,EAAE,CAAC,EAClG;SACCta,MAAM,CAACua,KAAK,EAAE;;MAEf,CAAC;KAEF,MAAMwN,eAAe,GAAG9b,kBAAI,CAAC+b,kBAAkB,EAAE;KACjD,IAAID,eAAe,EACnB;OACC,MAAMpkB,kBAAkB,GAAGokB,eAAe,CACxCE,aAAa,CACbC,iBAAiB,EAAE,CACnB9V,gBAAgB,EAAE,CAClBzO,kBAAkB;OAGpBA,kBAAkB,CAAC8D,0BAA0B,CAAC9D,kBAAkB,CAACI,aAAa,EAAE,CAAC;;;CAGpF;;CC9Me,MAAMokB,eAAe,SAASrb,iBAAiB,CAC9D;GACCzQ,WAAW,CAACqN,QAAQ,EAAE9H,UAAU,GAAG,IAAI,EACvC;KACC,KAAK,CAAC;OACL2I,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,oBAAoB,CAAC;OAC3C2O,YAAY,EAAE,SAAS;OACvBqB,eAAe,EAAEjQ,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;OACjEiQ,qBAAqB,EAAElQ,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;OACpEkQ,iBAAiB,EAAEnQ,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;OACtEmQ,uBAAuB,EAAEpQ,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC;OACvEoQ,eAAe,EAAE,sCAAsC;OACvDC,QAAQ,EAAE,sCAAsC;OAChDE,KAAK,EAAE,SAAS;OAChBjE,QAAQ,EAAEA,QAAQ;OAClB9H,UAAU,EAAEA,UAAU;OACtBlF,qBAAqB,EAAE;MACvB,CAAC;;CAEJ;;CCnBe,MAAM0rB,cAAc,SAAS9V,uBAAuB,CACnE;GACCjW,WAAW,CAACqN,QAAQ,EAAE9H,UAAU,GAAG,IAAI,EACvC;KACC,KAAK,CAAC;OACL2I,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC;OAC9C2O,YAAY,EAAE,UAAU;OACxBqB,eAAe,EAAEjQ,aAAG,CAACC,UAAU,CAAC,6BAA6B,CAAC;OAC9DiQ,qBAAqB,EAAElQ,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;OACvEkQ,iBAAiB,EAAEnQ,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;OACnEmQ,uBAAuB,EAAEpQ,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;OAC1EoQ,eAAe,EAAE,yCAAyC;OAC1DC,QAAQ,EAAE,yCAAyC;OACnDC,aAAa,EAAE,UAAU;OACzBC,KAAK,EAAE,SAAS;OAChBjE,QAAQ,EAAEA,QAAQ;OAClB9H,UAAU,EAAEA,UAAU;OACtBlF,qBAAqB,EAAE;MACvB,CAAC;;CAEJ;;;;;;;;;;AC1BA,CAKe,MAAM2rB,uBAAuB,SAASvb,iBAAiB,CACtE;GACCzQ,WAAW,CAACC,OAAO,EACnB;KACC,KAAK,CAACA,OAAO,CAAC;KAEd,IAAI,CAACgsB,MAAM,GAAG,IAAI3c,gBAAgB,CAAC;OAClC5B,IAAI,EAAE,IAAI,CAACL,QAAQ,CAAC6e,OAAO,EAAE;OAC7Bxc,YAAY,EAAEzP,OAAO,CAACyP;MACtB,CAAC;KAEF,IAAI,IAAI,CAACxP,MAAM,EACf;OACC,IAAI,CAACisB,QAAQ,GAAGtkB,cAAI,CAAC8D,MAAM,CAAC,IAAI,CAACmH,IAAI,CAACqZ,QAAQ,CAAC,GAAG,IAAI,CAACrZ,IAAI,CAACqZ,QAAQ,GAAGvc,kBAAI,CAACwc,SAAS,CAAC,IAAI,CAACtZ,IAAI,CAACqZ,QAAQ,CAAC;;;GAI3G1a,kBAAkB,GAClB;KACC,OAAO7Q,aAAG,CAACC,MAAM,oBAAC;KACjB,CAAkC;KAClC,CAA+B;GAChC,GAFG,IAAI,CAAC6S,wBAAwB,EAAE,EAC/B,IAAI,CAACQ,qBAAqB,EAAE;;GAIhCD,8BAA8B,GAC9B;KACC,IAAI,CAAC,IAAI,CAACuX,YAAY,EACtB;OACC,IAAI,CAACA,YAAY,GAAG5qB,aAAG,CAACC,MAAM,sBAAC;;OAE7B,CAA+C;;IAEjD,GAFI,IAAI,CAACwrB,qCAAqC,EAAE,CAE/C;;KAGF,OAAO,IAAI,CAACb,YAAY;;GAGzBa,qCAAqC,GACrC;KACC,IAAI,CAAC,IAAI,CAACC,mBAAmB,EAC7B;OACC,IAAI,CAACA,mBAAmB,GAAG1rB,aAAG,CAACC,MAAM,sBAAC;;;QAGnC,CAAsC;;;IAGzC,GAHKC,aAAG,CAACC,UAAU,CAAC,mBAAmB,CAAC,CAGvC;OAED0J,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC4hB,mBAAmB,EAAE,OAAO,EAAE,IAAI,CAACC,oBAAoB,CAAC7hB,IAAI,CAAC,IAAI,CAAC,CAAC;;KAGpF,OAAO,IAAI,CAAC4hB,mBAAmB;;GAGhCC,oBAAoB,GACpB;KACC,IAAI,CAACN,MAAM,CAAClqB,IAAI,EAAE;;GAGnBsQ,oBAAoB,GACpB;KACC,OAAOzR,aAAG,CAACC,MAAM,sBAAC;KACjB,CAAoC;KACpC,CAA+B;GAChC,GAFG,IAAI,CAAC6Q,0BAA0B,EAAE,EACjC,IAAI,CAACwC,qBAAqB,EAAE;;GAIhCxC,0BAA0B,GAC1B;KACC,MAAMhG,SAAS,GAAG,IAAI,CAACnG,UAAU,CAACyD,WAAW,EAAE,CAAC8C,OAAO,EAAE,GAAG,IAAI;KAChE,MAAM6F,QAAQ,GAAGjG,SAAS,GACvBkE,kBAAI,CAACgC,gBAAgB,CAAClG,SAAS,CAAC,GAAG,GAAG,GAAGpI,EAAE,CAACiI,IAAI,CAACU,MAAM,CAAC2D,kBAAI,CAACiC,kBAAkB,EAAE,EAAEnG,SAAS,CAAC,GAC7F,EAAE;KAEL,OAAO9K,aAAG,CAACC,MAAM,sBAAE;;mDAE4B,CAAuB;;+CAE3B,CAAyB;;qDAEnB,CAA4C;qDAC5C,CAAW;;8CAElB,CAAqC;OAC5E,CAAwC;;UAEpC,GAV0C,IAAI,CAACsQ,eAAe,EAExB,IAAI,CAACF,iBAAiB,EAEhBnQ,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC,EACzC4Q,QAAQ,EAEf7Q,aAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC,EACzE,IAAI,CAACkT,8BAA8B,EAAE;;GAK3C9B,0BAA0B,GAC1B;KACC,OAAOvR,aAAG,CAACC,MAAM,sBAAC;;;+CAGyB,CAAwB;OAChE,CAAuB;;MAExB,CAA8B;;GAEhC,GAL6C,IAAI,CAAC2Q,cAAc,EAAE,EAC7D,IAAI,CAACgb,aAAa,EAAE,EAErB,IAAI,CAACna,oBAAoB,EAAE;;GAKhCd,wBAAwB,GACxB;KACC,OAAO3Q,aAAG,CAACC,MAAM,sBAAC;;;+CAGyB,CAAwB;OAChE,CAAuB;;MAExB,CAA4B;;GAE9B,GAL6C,IAAI,CAAC2Q,cAAc,EAAE,EAC7D,IAAI,CAACgb,aAAa,EAAE,EAErB,IAAI,CAAC/a,kBAAkB,EAAE;;GAK9B+a,aAAa,GACb;KAAA;KACC,sBAAI,CAACC,QAAQ,6BAAb,IAAI,CAACA,QAAQ,GAAKnpB,EAAE,CAAC8T,EAAE,CAACsV,IAAI,CAACC,UAAU,CAAC7rB,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC,CAAC;KACnF0J,eAAK,CAACC,IAAI,CAAC,IAAI,CAAC+hB,QAAQ,EAAE,OAAO,EAAE,IAAI,CAAC5Y,QAAQ,CAACnJ,IAAI,CAAC,IAAI,CAAC,CAAC;KAE5D,OAAO,IAAI,CAAC+hB,QAAQ;;CAEtB;;CC3He,MAAMG,eAAe,SAASZ,uBAAuB,CACpE;GACChsB,WAAW,CAACqN,QAAQ,EAAE9H,UAAU,GAAG,IAAI,EACvC;KACC,KAAK,CAAC;OACL2I,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,wBAAwB,CAAC;OAC/C2O,YAAY,EAAE,SAAS;OACvBqB,eAAe,EAAEjQ,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC;OACrEiQ,qBAAqB,EAAElQ,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;OACxEkQ,iBAAiB,EAAEnQ,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC;OACrEmQ,uBAAuB,EAAEpQ,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC;OAC3EoQ,eAAe,EAAE,0CAA0C;OAC3DC,QAAQ,EAAE,0CAA0C;OACpDE,KAAK,EAAE,SAAS;OAChBjE,QAAQ,EAAEA,QAAQ;OAClB9H,UAAU,EAAEA,UAAU;OACtBlF,qBAAqB,EAAE;MACvB,CAAC;KAEF,IAAI,CAACsP,qBAAqB,GAAGC,kBAAI,CAACC,iBAAiB,EAAE;KACrD,IAAI,IAAI,CAACF,qBAAqB,EAC9B;OACC,IAAI,CAAC4E,WAAW,GAAGzT,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC;OACvE,IAAI,CAACyT,oBAAoB,GAAG1T,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;MAC5E,MAED;OACC,IAAI,CAACwT,WAAW,GAAGzT,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC;OAC7D,IAAI,CAACyT,oBAAoB,GAAG1T,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC;;;GAIvEuT,8BAA8B,GAC9B;KACChR,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACwa,cAAc,EAAE,CAAC7Y,OAAO,CAACxB,MAAM,IACrD;OACC,IAAI,CAAC,gCAAgC,EAAE,oCAAoC,CAAC,CAACoH,QAAQ,CAACpH,MAAM,CAACsa,MAAM,EAAE,CAAC,EACtG;SACCta,MAAM,CAACua,KAAK,EAAE;;MAEf,CAAC;KAEF,MAAMwN,eAAe,GAAG9b,kBAAI,CAAC+b,kBAAkB,EAAE;KACjD,IAAID,eAAe,EACnB;OACCA,eAAe,CACbE,aAAa,CACbiB,iBAAiB,EAAE,CACnB9W,gBAAgB,EAAE,CAClBxO,qBAAqB,EAAE,CACvB+D,mBAAmB,EAAE;;;GAIzB+I,+BAA+B,GAC/B;KACC/Q,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACwa,cAAc,EAAE,CAAC7Y,OAAO,CAACxB,MAAM,IACrD;OACC,IAAI,CAAC,gCAAgC,EAAE,oCAAoC,CAAC,CAACoH,QAAQ,CAACpH,MAAM,CAACsa,MAAM,EAAE,CAAC,EACtG;SACCta,MAAM,CAACua,KAAK,EAAE;;MAEf,CAAC;KAEF,MAAMwN,eAAe,GAAG9b,kBAAI,CAAC+b,kBAAkB,EAAE;KACjD,IAAID,eAAe,EACnB;OACC,MAAMpkB,kBAAkB,GAAGokB,eAAe,CACxCE,aAAa,CACbiB,iBAAiB,EAAE,CACnB9W,gBAAgB,EAAE,CAClBzO,kBAAkB;OAGpBA,kBAAkB,CAAC8D,0BAA0B,CAAC9D,kBAAkB,CAACI,aAAa,EAAE,CAAC;;;CAGpF;;CC7Ee,MAAMolB,cAAc,SAASd,uBAAuB,CACnE;GACChsB,WAAW,CAACqN,QAAQ,EAAE9H,UAAU,GAAG,IAAI,EACvC;KACC,KAAK,CAAC;OACL2I,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,uBAAuB,CAAC;OAC9C2O,YAAY,EAAE,SAAS;OACvBqB,eAAe,EAAEjQ,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;OACpEiQ,qBAAqB,EAAElQ,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;OACvEkQ,iBAAiB,EAAEnQ,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;OACpEmQ,uBAAuB,EAAEpQ,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;OAC1EoQ,eAAe,EAAE,yCAAyC;OAC1DC,QAAQ,EAAE,yCAAyC;OACnDE,KAAK,EAAE,SAAS;OAChBjE,QAAQ,EAAEA,QAAQ;OAClB9H,UAAU,EAAEA,UAAU;OACtBlF,qBAAqB,EAAE;MACvB,CAAC;KAEF,IAAI,CAACsP,qBAAqB,GAAGC,kBAAI,CAACE,iBAAiB,EAAE;KACrD,IAAI,IAAI,CAACH,qBAAqB,EAC9B;OACC,IAAI,CAAC4E,WAAW,GAAGzT,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC;OAC9E,IAAI,CAACyT,oBAAoB,GAAG1T,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;MAC5E,MAED;OACC,IAAI,CAACwT,WAAW,GAAGzT,aAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;OACpE,IAAI,CAACyT,oBAAoB,GAAG1T,aAAG,CAACC,UAAU,CAAC,yBAAyB,CAAC;;;;;;;GAOvEuT,8BAA8B,GAC9B;KACChR,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACwa,cAAc,EAAE,CAAC7Y,OAAO,CAACxB,MAAM,IACrD;OACC,IAAI,CAAC,gCAAgC,EAAE,mCAAmC,CAAC,CAACoH,QAAQ,CAACpH,MAAM,CAACsa,MAAM,EAAE,CAAC,EACrG;SACCta,MAAM,CAACua,KAAK,EAAE;;MAEf,CAAC;KAEF,MAAMwN,eAAe,GAAG9b,kBAAI,CAAC+b,kBAAkB,EAAE;KACjD,IAAID,eAAe,EACnB;OACCA,eAAe,CACbE,aAAa,CACbC,iBAAiB,EAAE,CACnB9V,gBAAgB,EAAE,CAClBxO,qBAAqB,EAAE,CACvB+D,mBAAmB,EAAE;;;GAIzB+I,+BAA+B,GAC/B;KACC/Q,EAAE,CAACC,SAAS,CAACC,QAAQ,CAACwa,cAAc,EAAE,CAAC7Y,OAAO,CAACxB,MAAM,IACrD;OACC,IAAI,CAAC,gCAAgC,EAAE,mCAAmC,CAAC,CAACoH,QAAQ,CAACpH,MAAM,CAACsa,MAAM,EAAE,CAAC,EACrG;SACCta,MAAM,CAACua,KAAK,EAAE;;MAEf,CAAC;KAEF,MAAMwN,eAAe,GAAG9b,kBAAI,CAAC+b,kBAAkB,EAAE;KACjD,IAAID,eAAe,EACnB;OACC,MAAMpkB,kBAAkB,GAAGokB,eAAe,CACxCE,aAAa,CACbC,iBAAiB,EAAE,CACnB9V,gBAAgB,EAAE,CAClBzO,kBAAkB;OAGpBA,kBAAkB,CAAC8D,0BAA0B,CAAC9D,kBAAkB,CAACI,aAAa,EAAE,CAAC;;;CAGpF;;CCtFa;GAAAnF;GAAAC;AAGb,CAG6B;CAAA;CAAA;AAE7B,CAAe,MAAMuqB,aAAa,CAClC;GAGC/sB,WAAW,CAACC,OAAO,EACnB;KAAA;OAAA;;KAAA;OAAA;;KAAA;OAAA;;KAAA,KAHA+sB,WAAW,GAAG,GAAG;KAIhB,IAAI,CAACjgB,IAAI,GAAG,IAAI,CAACkgB,WAAW,CAAChtB,OAAO,CAAC;;GAGtC,OAAOM,cAAc,CAACN,OAAO,EAC7B;KACC,OAAO,IAAI,IAAI,CAACA,OAAO,CAAC;;GAGzB8B,IAAI,GACJ;KACC,IAAI,CAACmrB,WAAW,EAAE,CAACnrB,IAAI,EAAE;KACzB,IAAI,CAACorB,SAAS,EAAE;;GAGjBA,SAAS,GACT;KACC7pB,EAAE,CAACsP,IAAI,CAACgE,GAAG,CAAC,IAAI,CAAC7J,IAAI,GAAG,UAAU,EAAE,EAAE,EAAGkd,MAAM,IAC/C;OACCzoB,UAAU,CAAC,MACX;SACC,IAAI,CAACyoB,MAAM,IAAIA,MAAM,CAAC3kB,MAAM,IAAI,CAAC,IAAI2kB,MAAM,CAAChgB,WAAW,EAAE,CAACmjB,OAAO,CAAC,iBAAiB,CAAC,KAAK,CAAC,CAAC,EAC3F;WACC,IAAI,CAACC,0BAA0B,EAAE;;QAElC,EAAE,GAAG,CAAC;MACP,CAAC;;GAGH3sB,UAAU,GACV;KACC,OAAOE,aAAG,CAACC,MAAM,oBAAC;;UAEZ,CAAsC;wDACQ,CAAgC;MAClF,CAAsB;;GAExB,GAJQC,aAAG,CAACC,UAAU,CAAC,mBAAmB,CAAC,EACWD,aAAG,CAACC,UAAU,CAAC,aAAa,CAAC,EAC/E,IAAI,CAACusB,YAAY,EAAE;;GAKxBJ,WAAW,GACX;KACC,OAAO,IAAI,CAACrrB,KAAK,GAAG,IAAI4iB,gBAAK,CAAC;OAC7BrgB,KAAK,EAAE,GAAG;OACVmpB,aAAa,EAAE,IAAI;OACnB5J,QAAQ,EAAE,KAAK;OACfkB,UAAU,EAAE,IAAI;OAChBF,SAAS,EAAE,IAAI;OACfG,SAAS,EAAE;SAAC0I,KAAK,EAAE,MAAM;SAAEnhB,GAAG,EAAE;QAAO;OACvC3D,SAAS,EAAE,kBAAkB;OAC7BuH,OAAO,EAAE,IAAI,CAACvP,UAAU,EAAE;OAC1B6W,OAAO,EAAE,CACR,IAAIjU,EAAE,CAAC8T,EAAE,CAAC+N,MAAM,CAAC;SAChBvb,IAAI,EAAG9I,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;SACvDuQ,KAAK,EAAEhO,EAAE,CAAC8T,EAAE,CAAC+N,MAAM,CAACsE,KAAK,CAACgE,OAAO;SACjCC,OAAO,EAAE,MAAM;WACd,IAAI,CAACC,QAAQ,CAACva,KAAK,CAAC;;QAErB,CAAC,EACF,IAAI9P,EAAE,CAAC8T,EAAE,CAAC+N,MAAM,CAAC;SAChBvb,IAAI,EAAG9I,aAAG,CAACC,UAAU,CAAC,qBAAqB,CAAC;SAC5CuQ,KAAK,EAAEhO,EAAE,CAAC8T,EAAE,CAAC+N,MAAM,CAACsE,KAAK,CAACmE,IAAI;SAC9BF,OAAO,EAAE,MAAM;WACd,IAAI,CAAC7rB,KAAK,CAACqc,KAAK,EAAE;;QAEnB,CAAC;MAEH,CAAC;;GAGH+O,WAAW,CAAChtB,OAAO,EACnB;KACC,OAAOA,OAAO,CAAC4tB,YAAY,IACtB5tB,OAAO,CAAC4tB,YAAY,CAACT,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,GAAI,GAAG,GAAG,GAAG,CAAC,GACtD,eAAe,GACfntB,OAAO,CAAC6tB,WAAW;;GAGvBR,YAAY,GACZ;KACC,OAAO1sB,aAAG,CAACC,MAAM,sBAAC;;iEAE2C,CAAsC;QAC/F,CAA2D;;;IAG9D,GAJ8DyC,EAAE,CAAC6K,IAAI,CAACC,gBAAgB,CAAC,IAAI,CAACrB,IAAI,CAAC,EAC5FzJ,EAAE,CAAC6K,IAAI,CAACC,gBAAgB,CAAC,IAAI,CAAC2f,cAAc,CAAC,IAAI,CAAChhB,IAAI,CAAC,CAAC;;GAM/D,OAAOihB,WAAW,CAAC/tB,OAAO,EAC1B;KACC,OAAQ,CAAC,CAACA,OAAO,CAAC6tB,WAAW,IAAI,CAAC,CAAC7tB,OAAO,CAAC4tB,YAAY;;GAGxD,OAAOI,wBAAwB,GAC/B;KACC3qB,EAAE,CAAC8T,EAAE,CAACC,OAAO,CAACC,UAAU,CAACN,KAAK,CAAClW,aAAG,CAACC,UAAU,CAAC,8BAA8B,CAAC,CAAC;;GAG/EssB,0BAA0B,GAC1B;KACC/pB,EAAE,CAAC8T,EAAE,CAACC,OAAO,CAACC,UAAU,CAACN,KAAK,CAAClW,aAAG,CAACC,UAAU,CAAC,kBAAkB,CAAC,CAAC;;GAGnE4sB,QAAQ,CAACva,KAAK,EACd;KACChH,MAAM,CAAC9I,EAAE,CAAC4qB,SAAS,CAACC,IAAI,CAAC,IAAI,CAACphB,IAAI,CAAC,2CAChC,IAAI,0GACJ,IAAI,6DAA8B;KAErCqG,KAAK,CAACU,cAAc,EAAE;KACtBV,KAAK,CAACgb,eAAe,EAAE;;GAGxBL,cAAc,CAAChhB,IAAI,EACnB;KACC,OAAOA,IAAI,CAACzH,MAAM,GAAG,IAAI,CAAC0nB,WAAW,GAAGjgB,IAAI,GAAGA,IAAI,CAACshB,MAAM,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,KAAK,GAAGthB,IAAI,CAACkP,KAAK,CAAC,CAAC,CAAC,CAAC;;CAiB7F;CAAC,yCAbA;GACC,4CAAI,oDAAyBnb,aAAG,CAACC,UAAU,CAAC,wCAAwC,CAAC;CACtF;CAAC,wCAGD;GACC,4CAAI,oDAAyBD,aAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;CACrF;CAAC,kCAEuBkW,OAAO,EAC/B;GACCrH,kBAAI,CAACgG,gBAAgB,CAACqB,OAAO,CAAC;CAC/B;;CC5Ic,MAAMqX,aAAa,CAClC;GACCtuB,WAAW,CAACC,OAAO,GAAG,EAAE,EACxB;KACC,IAAI,CAACA,OAAO,GAAGA,OAAO;;GAGvB,OAAOM,cAAc,CAACN,OAAO,EAC7B;KACC,OAAO,IAAI,IAAI,CAACA,OAAO,CAAC;;GAGzBsuB,aAAa,GACb;KACC,OAAO,IAAI3qB,OAAO,CAAEC,OAAO,IAAK;OAC/Bye,iBAAO,CAACiM,aAAa,CAAC,SAAS,CAAC,CAACtb,IAAI,CAAEub,OAAO,IAAK;SAClD,IAAIA,OAAO,IAAIA,OAAO,CAAC,OAAO,CAAC,IAAIA,OAAO,CAAC,SAAS,CAAC,EACrD;WACC3qB,OAAO,EAAE;UACT,MAED;WACC4qB,OAAO,CAACC,KAAK,CAAE,+BAA8B,CAAC;;QAE/C,CAAC;MACF,CAAC;;GAGH3sB,IAAI,GACJ;KACC,IAAI,CAACwsB,aAAa,EAAE,CAClBtb,IAAI,CAAC,MAAM;OACX,IAAI,CAAC0b,KAAK,GAAG,IAAIrrB,EAAE,CAAC8T,EAAE,CAACwX,IAAI,CAACC,KAAK,CAAC;SACjCC,KAAK,EAAE,CACN;WACCzL,MAAM,EAAE,IAAI,CAAC0L,SAAS,EAAE;WACxB7gB,KAAK,EAAEpN,aAAG,CAACC,UAAU,CAAC,0BAA0B,CAAC;WACjD6I,IAAI,EAAE9I,aAAG,CAACC,UAAU,CAAC,yBAAyB;UAC9C,CACD;SACDiuB,QAAQ,EAAE;QACV,CAAC;OAEF,IAAI,CAACL,KAAK,CAACM,KAAK,EAAE;MAClB,CAAC;;GAGJF,SAAS,GACT;KACC,IAAI1L,MAAM;KACV,MAAM6L,IAAI,GAAG,IAAI,CAACjvB,OAAO,CAACivB,IAAI;KAC9B,MAAMC,QAAQ,GAAGD,IAAI,CAACtK,YAAY,EAAE;KAEpC,IAAIsK,IAAI,CAACxO,OAAO,EAAE,KAAK,OAAO,EAC9B;OACC2C,MAAM,GAAG8L,QAAQ,CAACC,gBAAgB,CAAC,sBAAsB,CAAC,CAAC,CAAC,CAAC;MAC7D,MACI,IAAIF,IAAI,CAACxO,OAAO,EAAE,KAAK,KAAK,IAC9BwO,IAAI,CAACxO,OAAO,EAAE,KAAK,MAAM,EAC5B;OACC,MAAM2O,OAAO,GAAGzf,kBAAI,CAAC0f,UAAU,CAAC,IAAI7jB,IAAI,EAAE,CAAC;OAC3C4X,MAAM,GAAG8L,QAAQ,CAACnoB,aAAa,CAAC,qCAAqC,GAAGqoB,OAAO,GAAG,8BAA8B,CAAC;MACjH,MAED;OACChM,MAAM,GAAGtc,QAAQ,CAACC,aAAa,CAAC,6BAA6B,CAAC;;KAG/D,OAAOqc,MAAM;;CAEf;;;;;;;;;;;;;;;;;;;;;;;;;;;"}