this.BX=this.BX||{};this.BX.Catalog=this.BX.Catalog||{};(function(e,t,n,a,o,l,i,r){"use strict";var c=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"inventoryManagementAnalyticsFromLanding",value:function e(){var t=this;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};this.sendAnalyticsLabel(n).then((function(){t.unRegisterOnProlog()}))["catch"]((function(){}))}},{key:"sendAnalyticsLabel",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=this.makeAnalyticsData(t);return i.ajax.runAction("catalog.analytics.sendAnalyticsLabel",{analyticsLabel:n})}},{key:"unRegisterOnProlog",value:function e(){return i.ajax.runAction("catalog.config.unRegisterOnProlog")}},{key:"inventoryManagementEnabled",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n=this.makeAnalyticsData(t);return i.ajax.runAction("catalog.config.inventoryManagementYAndResetQuantity",{analyticsLabel:n})}},{key:"inventoryManagementEnableWithResetDocuments",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return i.ajax.runAction("catalog.config.inventoryManagementYAndResetQuantityWithDocuments",{analyticsLabel:this.makeAnalyticsData(t),data:{costPriceCalculationMethod:t.costPriceAccountingMethod}}).then((function(e){top.BX.onCustomEvent("CatalogWarehouseMasterClear:resetDocuments");return e}))}},{key:"inventoryManagementEnableWithoutReset",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};return i.ajax.runAction("catalog.config.inventoryManagementY",{analyticsLabel:this.makeAnalyticsData(t),data:{costPriceCalculationMethod:t.costPriceAccountingMethod}})}},{key:"makeAnalyticsData",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};var n={iME:"inventoryManagementEnabled"};if(i.Type.isStringFilled(t.inventoryManagementSource)){n.inventoryManagementSource=t.inventoryManagementSource}return n}},{key:"inventoryManagementDisabled",value:function e(){return i.ajax.runAction("catalog.config.inventoryManagementN",{})}}]);return e}();var s=Object.freeze({popup:{enable:"BX:Sale:StoreMaster:EventType:popup:enable",enableWithoutReset:"BX:Sale:StoreMaster:EventType:popup:enableWithoutReset",enableWithResetDocuments:"BX:Sale:StoreMaster:EventType:popup:enableWithResetDocuments",disable:"BX:Sale:StoreMaster:EventType:popup:disable",disableCancel:"BX:Sale:StoreMaster:EventType:popup:disable:cancel",confirm:"BX:Sale:StoreMaster:EventType:popup:confirm",confirmCancel:"BX:Sale:StoreMaster:EventType:popup:confirm:cancel",selectCostPriceAccountingMethod:"BX:Sale:StoreMaster:EventType:popup:costPriceAccountingMethodSelect"}});var u=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"popup",value:function e(){this.disablePopup()}},{key:"disablePopup",value:function e(){l.MessageBox.confirm(i.Loc.getMessage("CAT_WAREHOUSE_MASTER_CLEAR_DISABLE_POPUP_CONTENT"),i.Loc.getMessage("CAT_WAREHOUSE_MASTER_CLEAR_DISABLE_POPUP_TITLE_MSGVER_1"),(function(e){e.close();a.EventEmitter.emit(s.popup.disable,{})}),i.Loc.getMessage("CAT_WAREHOUSE_MASTER_CLEAR_DISABLE_POPUP_CONFIRM_BUTTON"),(function(e){return e.close()}),i.Loc.getMessage("CAT_WAREHOUSE_MASTER_CLEAR_POPUP_CANCEL_BUTTON"))}}]);return e}();var p,E,d;function g(e,t){h(e,t);t.add(e)}function h(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function f(e,t,n){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return n}var C=new WeakSet;var v=function(){function e(){babelHelpers.classCallCheck(this,e);g(this,C);babelHelpers.defineProperty(this,"selectedMethod",e.METHOD_AVERAGE)}babelHelpers.createClass(e,[{key:"popup",value:function e(){var t=this;return new Promise((function(e){var n=l.MessageBox.create({title:i.Loc.getMessage("CAT_WAREHOUSE_MASTER_COST_PRICE_ACCOUNTING_METHOD_TITLE"),message:t.getContent(),buttons:[new o.Button({text:i.Loc.getMessage("CAT_WAREHOUSE_MASTER_COST_PRICE_ACCOUNTING_METHOD_SELECT"),color:o.Button.Color.PRIMARY,onclick:function o(){a.EventEmitter.emit(s.popup.selectCostPriceAccountingMethod,{method:t.selectedMethod});n.close();e()}})],maxWidth:500});n.show()}))}},{key:"getContent",value:function t(){var n=this;var a=i.Tag.render(p||(p=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<select class="ui-ctl-element">\n\t\t\t\t<option value="','" selected>\n\t\t\t\t\t','\n\t\t\t\t</option>\n\t\t\t\t<option value="','">\n\t\t\t\t\t',"\n\t\t\t\t</option>\n\t\t\t</select>\n\t\t"])),e.METHOD_AVERAGE,i.Loc.getMessage("CAT_WAREHOUSE_MASTER_COST_PRICE_ACCOUNTING_METHOD_AVERAGE"),e.METHOD_FIFO,i.Loc.getMessage("CAT_WAREHOUSE_MASTER_COST_PRICE_ACCOUNTING_METHOD_FIFO"));i.Event.bind(a,"change",(function(){n.selectedMethod=a.value}));var o=i.Tag.render(E||(E=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<a href='#' class=\"catalog-warehouse-master-clear-popup-hint\">\n\t\t\t\t","\n\t\t\t</a>\n\t\t"])),i.Loc.getMessage("CAT_WAREHOUSE_MASTER_STORE_DETAILS"));i.Event.bind(o,"click",(function(e){e.preventDefault();if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code=".concat(f(n,C,_).call(n)))}}));return i.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div class='catalog-warehouse-master-clear-popup-content'>\n\t\t\t\t<div class=\"catalog-warehouse-master-clear-popup-text\">\n\t\t\t\t\t<p>"," ",'</p>\n\t\t\t\t</div>\n\t\t\t\t<div class="catalog-warehouse-master-clear-popup-text ui-ctl ui-ctl-after-icon ui-ctl-dropdown ui-ctl-w100">\n\t\t\t\t\t<div class="ui-ctl-after ui-ctl-icon-angle"></div>\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i.Loc.getMessage("CAT_WAREHOUSE_MASTER_COST_PRICE_ACCOUNTING_METHOD_TEXT_MSGVER_1"),o,a)}}]);return e}();function _(){return 17858278}babelHelpers.defineProperty(v,"METHOD_AVERAGE","average");babelHelpers.defineProperty(v,"METHOD_FIFO","fifo");var T=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"popup",value:function e(){var t=l.MessageBox.create({message:i.Loc.getMessage("CAT_WAREHOUSE_MASTER_CLEAR_ENABLE_POPUP_CONTENT_MSGVER_1"),buttons:[new o.Button({text:i.Loc.getMessage("CAT_WAREHOUSE_MASTER_CLEAR_ENABLE_POPUP_CONFIRM_BUTTON_MSGVER_1"),color:o.Button.Color.PRIMARY,onclick:function e(){a.EventEmitter.emit(s.popup.enableWithResetDocuments,{});t.close()}}),new o.Button({text:i.Loc.getMessage("CAT_WAREHOUSE_MASTER_CLEAR_POPUP_CANCEL_BUTTON_MSGVER_1"),color:o.Button.Color.LINK,onclick:function e(){t.close()}})],maxWidth:400});t.show()}}]);return e}();var A=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"popup",value:function t(){var n=this;i.ajax.runAction("catalog.config.checkEnablingConditions",{}).then((function(t){var a=t.data;var o={clearDocuments:false};if(a.includes(e.CONDUCTED_DOCUMENTS_EXIST)||a.includes(e.QUANTITY_INCONSISTENCY_EXISTS)){o.clearDocuments=true}n.selectBatchMethodPopup(o)}))["catch"]((function(){}))}},{key:"selectBatchMethodPopup",value:function e(t){(new v).popup().then((function(){if(t.clearDocuments){(new T).popup()}else{a.EventEmitter.emit(s.popup.enableWithoutReset)}}))["catch"]((function(){}))}}]);return e}();babelHelpers.defineProperty(A,"QUANTITY_INCONSISTENCY_EXISTS","QUANTITY_INCONSISTENCY_EXISTS");babelHelpers.defineProperty(A,"CONDUCTED_DOCUMENTS_EXIST","CONDUCTED_DOCUMENTS_EXIST");var S;var b=function(){function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,e);this.text=t.text||"";this.helpArticleId=t.helpArticleId||""}babelHelpers.createClass(e,[{key:"popup",value:function e(){l.MessageBox.alert(this.getContent(),(function(e){return e.close()}),i.Loc.getMessage("CAT_WAREHOUSE_MASTER_CLEAR_CLOSE"))}},{key:"getContent",value:function e(){var t=this;var n=i.Tag.render(S||(S=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="catalog-warehouse-master-clear-popup-text">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),this.text);var a=n.querySelector("a");if(a){i.Event.bind(a,"click",(function(e){e.preventDefault();if(top.BX.Helper){top.BX.Helper.show("redirect=detail&code=".concat(t.helpArticleId))}}))}return n}}]);return e}();var M=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"open",value:function e(t){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var a=i.Type.isPlainObject(n)?n:{};return new Promise((function(e){var n,o,l;var r=(n=a.data)!==null&&n!==void 0?n:{};var c=(o=a.events)!==null&&o!==void 0?o:{};c.onClose=(l=c.onClose)!==null&&l!==void 0?l:function(t){return e(t.getSlider())};var s=BX.util.add_url_param(t,{analyticsLabel:"inventoryManagementEnabled_openSlider"});if(i.Type.isString(s)&&s.length>1){BX.SidePanel.Instance.open(s,{cacheable:false,allowChangeHistory:false,events:c,data:r,width:1170})}else{e()}}))}}]);return e}();var y=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,[{key:"show",value:function e(t,n,a){var o=this;if(this.popup){this.popup.destroy();this.popup=null}if(!t&&!n){return}this.popup=new r.Popup(null,t,{events:{onPopupClose:function e(){o.popup.destroy();o.popup=null}},darkMode:true,content:n,offsetLeft:t.offsetWidth});if(a){setTimeout((function(){o.popup.destroy();o.popup=null}),a)}this.popup.show()}},{key:"hide",value:function e(){if(this.popup){this.popup.destroy()}}}]);return e}();var R=function(){function e(){babelHelpers.classCallCheck(this,e)}babelHelpers.createClass(e,null,[{key:"reloadGridAction",value:function e(){document.location.reload()}},{key:"openWarehousePanel",value:function t(n){(new M).open(n,{data:{closeSliderOnDone:false}}).then((function(){e.reloadGridAction()}))["catch"]((function(){}))}}]);return e}();e.Controller=c;e.EventType=s;e.DialogEnable=A;e.DialogDisable=u;e.DialogClearing=T;e.DialogError=b;e.StoreSlider=M;e.DialogCostPriceAccountingMethodSelection=v;e.Popup=y;e.ProductGridMenu=R})(this.BX.Catalog.StoreUse=this.BX.Catalog.StoreUse||{},BX,BX.UI,BX.Event,BX.UI,BX.UI.Dialogs,BX,BX.Main);
//# sourceMappingURL=store-use.bundle.map.js