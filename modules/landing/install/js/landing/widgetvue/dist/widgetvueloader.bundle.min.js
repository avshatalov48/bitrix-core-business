this.BX=this.BX||{};(function(e,s,t,a,l){"use strict";var i=babelHelpers.classPrivateFieldLooseKey("rootNode");var r=babelHelpers.classPrivateFieldLooseKey("data");var o=babelHelpers.classPrivateFieldLooseKey("lang");var n=babelHelpers.classPrivateFieldLooseKey("blockId");var c=babelHelpers.classPrivateFieldLooseKey("appId");var b=babelHelpers.classPrivateFieldLooseKey("fetchable");var d=babelHelpers.classPrivateFieldLooseKey("clickable");var p=babelHelpers.classPrivateFieldLooseKey("allowedByTariff");var v=babelHelpers.classPrivateFieldLooseKey("getFrameContent");var u=babelHelpers.classPrivateFieldLooseKey("getFrameHead");var h=babelHelpers.classPrivateFieldLooseKey("getAssetsConfigs");var P=babelHelpers.classPrivateFieldLooseKey("getFrameBody");class B{constructor(e){Object.defineProperty(this,P,{value:F});Object.defineProperty(this,h,{value:f});Object.defineProperty(this,u,{value:y});Object.defineProperty(this,v,{value:L});Object.defineProperty(this,i,{writable:true,value:void 0});Object.defineProperty(this,r,{writable:true,value:{}});Object.defineProperty(this,o,{writable:true,value:{}});Object.defineProperty(this,n,{writable:true,value:0});Object.defineProperty(this,c,{writable:true,value:0});Object.defineProperty(this,b,{writable:true,value:void 0});Object.defineProperty(this,d,{writable:true,value:void 0});Object.defineProperty(this,p,{writable:true,value:void 0});console.log("options",e);babelHelpers.classPrivateFieldLooseBase(this,i)[i]=t.Type.isString(e.rootNode)?document.querySelector(e.rootNode):null;babelHelpers.classPrivateFieldLooseBase(this,r)[r]=t.Type.isObject(e.data)?e.data:null;babelHelpers.classPrivateFieldLooseBase(this,o)[o]=e.lang||{};babelHelpers.classPrivateFieldLooseBase(this,n)[n]=e.blockId?t.Text.toNumber(e.blockId):0;babelHelpers.classPrivateFieldLooseBase(this,c)[c]=e.appId?t.Text.toNumber(e.appId):0;babelHelpers.classPrivateFieldLooseBase(this,b)[b]=e.fetchable||false;const s=t.Type.isFunction(BX.Landing.getMode)&&BX.Landing.getMode()==="edit";babelHelpers.classPrivateFieldLooseBase(this,d)[d]=!s;babelHelpers.classPrivateFieldLooseBase(this,p)[p]=babelHelpers.classPrivateFieldLooseBase(this,c)[c]&&t.Type.isBoolean(e.allowedByTariff)?e.allowedByTariff:true}mount(){return babelHelpers.classPrivateFieldLooseBase(this,v)[v]().then((e=>{const s=document.createElement("iframe");s.sandbox="allow-scripts";s.srcdoc=e;if(babelHelpers.classPrivateFieldLooseBase(this,n)[n]>0&&babelHelpers.classPrivateFieldLooseBase(this,i)[i]&&!B.runningAppNodes.has(babelHelpers.classPrivateFieldLooseBase(this,i)[i])){t.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,i)[i]);t.Dom.append(s,babelHelpers.classPrivateFieldLooseBase(this,i)[i]);window.addEventListener("message",(e=>{if(e.origin==="null"){console.log("event",e)}}))}}))}}function L(){return babelHelpers.classPrivateFieldLooseBase(this,u)[u]().then((e=>e+babelHelpers.classPrivateFieldLooseBase(this,P)[P]()))}function y(){return babelHelpers.classPrivateFieldLooseBase(this,h)[h]().then((e=>{const s=`${document.location.protocol}//${document.location.host}`;let t="";(e.js||[]).forEach((e=>{t+=`<script src="${s}${e}"><\/script>`}));(e.css||[]).forEach((e=>{t+=`<link href="${s}${e}" type="text/css" rel="stylesheet" />`}));const a=JSON.stringify(e.lang_additional||{});t+=`<script>BX.message(${a})<\/script>`;t+=`<script>BX.message(${babelHelpers.classPrivateFieldLooseBase(this,o)[o]})<\/script>`;return t}))}function f(){const e=["main.core","landing.widgetvue"];return a.Backend.getInstance().action("Block::getAssetsConfig",{extCodes:e})}function F(){let e=`\n\t\t\t<script>\n\t\t\t\tconsole.log('test message', BX.message('LANDING_WIDGETVUE_ERROR_PAYMENT'));\t\n\t\t\t<\/script>\n\t\t`;return e}B.runningAppNodes=new Set;e.WidgetVueLoader=B})(this.BX.Landing=this.BX.Landing||{},BX.Vue3,BX,BX.Landing,BX);
//# sourceMappingURL=widgetvueloader.bundle.map.js