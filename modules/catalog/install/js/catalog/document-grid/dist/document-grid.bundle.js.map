{"version":3,"file":"document-grid.bundle.js","sources":["../src/document-grid.js"],"sourcesContent":["import { ajax, Dom, Event, Extension, Loc, Tag } from 'main.core';\nimport { PopupManager } from 'main.popup';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { EnableWizardOpener, AnalyticsContextList } from 'catalog.store-enable-wizard';\n\nexport class DocumentGridManager\n{\n\tconstructor(options)\n\t{\n\t\tthis.gridId = options.gridId;\n\t\tthis.filterId = options.filterId;\n\t\tthis.grid = BX.Main.gridManager.getInstanceById(this.gridId);\n\t\tthis.isConductDisabled = options.isConductDisabled;\n\t\tthis.masterSliderUrl = options.masterSliderUrl;\n\t\tthis.isInventoryManagementDisabled = options.isInventoryManagementDisabled;\n\t\tthis.inventoryManagementFeatureCode = options.inventoryManagementFeatureCode;\n\t\tthis.inventoryManagementSource = options.inventoryManagementSource;\n\t}\n\n\tgetSelectedIds()\n\t{\n\t\treturn this.grid.getRows().getSelectedIds();\n\t}\n\n\tstatic hideSettingsMenu()\n\t{\n\t\tPopupManager.getPopupById('docFieldsSettingsMenu').close();\n\t}\n\n\tdeleteDocument(documentId)\n\t{\n\t\tif (this.isInventoryManagementDisabled && this.inventoryManagementFeatureCode)\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show(this.inventoryManagementFeatureCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tMessageBox.confirm(\n\t\t\tLoc.getMessage('DOCUMENT_GRID_DOCUMENT_DELETE_CONTENT_2'),\n\t\t\t(messageBox, button) => {\n\t\t\t\tbutton.setWaiting();\n\t\t\t\tajax.runAction(\n\t\t\t\t\t'catalog.document.deleteList',\n\t\t\t\t\t{\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tdocumentIds: [documentId],\n\t\t\t\t\t\t},\n\t\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\t\tinventoryManagementSource: this.inventoryManagementSource,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t).then(() => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tthis.grid.reload();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tif (response.errors)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t});\n\t\t\t},\n\t\t\tLoc.getMessage('DOCUMENT_GRID_DOCUMENT_DELETE_BUTTON_CONFIRM'),\n\t\t\t(messageBox) => messageBox.close(),\n\t\t\tLoc.getMessage('DOCUMENT_GRID_BUTTON_BACK'),\n\t\t);\n\t}\n\n\tconductDocument(documentId, documentType = '')\n\t{\n\t\tif (this.isInventoryManagementDisabled && this.inventoryManagementFeatureCode)\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show(this.inventoryManagementFeatureCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isConductDisabled)\n\t\t{\n\t\t\tthis.openStoreMasterSlider();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst actionConfig = {\n\t\t\tdata: {\n\t\t\t\tdocumentIds: [documentId],\n\t\t\t},\n\t\t};\n\t\tif (documentType !== '')\n\t\t{\n\t\t\tactionConfig.analyticsLabel = {\n\t\t\t\tdocumentType,\n\t\t\t};\n\t\t}\n\n\t\tactionConfig.analyticsLabel.inventoryManagementSource = this.inventoryManagementSource;\n\n\t\tactionConfig.analyticsLabel.mode = 'single';\n\n\t\tMessageBox.confirm(\n\t\t\tLoc.getMessage('DOCUMENT_GRID_DOCUMENT_CONDUCT_CONTENT_2'),\n\t\t\t(messageBox, button) => {\n\t\t\t\tbutton.setWaiting();\n\t\t\t\tajax.runAction(\n\t\t\t\t\t'catalog.document.conductList',\n\t\t\t\t\tactionConfig,\n\t\t\t\t).then(() => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tthis.grid.reload();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tif (response.errors)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t});\n\t\t\t},\n\t\t\tLoc.getMessage('DOCUMENT_GRID_DOCUMENT_CONDUCT_BUTTON_CONFIRM'),\n\t\t\t(messageBox) => messageBox.close(),\n\t\t\tLoc.getMessage('DOCUMENT_GRID_BUTTON_BACK'),\n\t\t);\n\t}\n\n\tcancelDocument(documentId, documentType = '')\n\t{\n\t\tif (this.isInventoryManagementDisabled && this.inventoryManagementFeatureCode)\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show(this.inventoryManagementFeatureCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isConductDisabled)\n\t\t{\n\t\t\tthis.openStoreMasterSlider();\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst settings = Extension.getSettings('catalog.document-grid');\n\n\t\tconst actionConfig = {\n\t\t\tdata: {\n\t\t\t\tdocumentIds: [documentId],\n\t\t\t},\n\t\t};\n\t\tif (documentType !== '')\n\t\t{\n\t\t\tactionConfig.analyticsLabel = {\n\t\t\t\tdocumentType,\n\t\t\t};\n\t\t}\n\n\t\tactionConfig.analyticsLabel.mode = 'single';\n\n\t\tactionConfig.analyticsLabel.inventoryManagementSource = this.inventoryManagementSource;\n\n\t\tlet content = Loc.getMessage('DOCUMENT_GRID_DOCUMENT_CANCEL_CONTENT_2');\n\t\tif (settings.get('isProductBatchMethodSelected'))\n\t\t{\n\t\t\tconst text = Loc.getMessage(\n\t\t\t\t'DOCUMENT_GRID_DOCUMENT_CANCEL_BATCH_SELECTED_CONTENT',\n\t\t\t\t{\n\t\t\t\t\t'#HELP_LINK#': '<help-link></help-link>',\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tcontent = Tag.render`\n\t\t\t\t<div>\n\t\t\t\t\t<div>${content}</div>\n\t\t\t\t\t<div>${text}</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tconst moreLink = Tag.render`\n\t\t\t\t<a href=\"#\" class=\"ui-form-link\">\n\t\t\t\t\t${Loc.getMessage('DOCUMENT_GRID_DOCUMENT_CANCEL_BATCH_SELECTED_CONTENT_LINK')}\n\t\t\t\t</a>\n\t\t\t`;\n\n\t\t\tEvent.bind(moreLink, 'click', () => {\n\t\t\t\tconst articleId = 17858278;\n\t\t\t\ttop.BX.Helper.show(`redirect=detail&code=${articleId}`);\n\t\t\t});\n\n\t\t\tDom.replace(content.querySelector('help-link'), moreLink);\n\t\t}\n\n\t\tMessageBox.confirm(\n\t\t\tcontent,\n\t\t\t(messageBox, button) => {\n\t\t\t\tbutton.setWaiting();\n\t\t\t\tajax.runAction(\n\t\t\t\t\t'catalog.document.cancelList',\n\t\t\t\t\tactionConfig,\n\t\t\t\t).then(() => {\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t\tthis.grid.reload();\n\t\t\t\t}).catch((response) => {\n\t\t\t\t\tif (response.errors)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: response.errors[0].message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tmessageBox.close();\n\t\t\t\t});\n\t\t\t},\n\t\t\tLoc.getMessage('DOCUMENT_GRID_DOCUMENT_CANCEL_BUTTON_CONFIRM'),\n\t\t\t(messageBox) => messageBox.close(),\n\t\t\tLoc.getMessage('DOCUMENT_GRID_BUTTON_BACK'),\n\t\t);\n\t}\n\n\tdeleteSelectedDocuments()\n\t{\n\t\tif (this.isInventoryManagementDisabled && this.inventoryManagementFeatureCode)\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show(this.inventoryManagementFeatureCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tconst documentIds = this.getSelectedIds();\n\t\tajax.runAction(\n\t\t\t'catalog.document.deleteList',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tdocumentIds,\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tinventoryManagementSource: this.inventoryManagementSource,\n\t\t\t\t},\n\t\t\t},\n\t\t).then((response) => {\n\t\t\tthis.grid.reload();\n\t\t}).catch((response) => {\n\t\t\tif (response.errors)\n\t\t\t{\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (error.message)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: error.message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.grid.reload();\n\t\t});\n\t}\n\n\tconductSelectedDocuments()\n\t{\n\t\tif (this.isInventoryManagementDisabled && this.inventoryManagementFeatureCode)\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show(this.inventoryManagementFeatureCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isConductDisabled)\n\t\t{\n\t\t\tthis.openStoreMasterSlider();\n\n\t\t\treturn;\n\t\t}\n\t\tconst documentIds = this.getSelectedIds();\n\t\tajax.runAction(\n\t\t\t'catalog.document.conductList',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tdocumentIds,\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tmode: 'list',\n\t\t\t\t\tinventoryManagementSource: this.inventoryManagementSource,\n\t\t\t\t},\n\t\t\t},\n\t\t).then((response) => {\n\t\t\tthis.grid.reload();\n\t\t}).catch((response) => {\n\t\t\tif (response.errors)\n\t\t\t{\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (error.message)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: error.message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.grid.reload();\n\t\t});\n\t}\n\n\tcancelSelectedDocuments()\n\t{\n\t\tif (this.isInventoryManagementDisabled && this.inventoryManagementFeatureCode)\n\t\t{\n\t\t\ttop.BX.UI.InfoHelper.show(this.inventoryManagementFeatureCode);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.isConductDisabled)\n\t\t{\n\t\t\tthis.openStoreMasterSlider();\n\n\t\t\treturn;\n\t\t}\n\t\tconst documentIds = this.getSelectedIds();\n\t\tajax.runAction(\n\t\t\t'catalog.document.cancelList',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tdocumentIds,\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tmode: 'list',\n\t\t\t\t\tinventoryManagementSource: this.inventoryManagementSource,\n\t\t\t\t},\n\t\t\t},\n\t\t).then((response) => {\n\t\t\tthis.grid.reload();\n\t\t}).catch((response) => {\n\t\t\tif (response.errors)\n\t\t\t{\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tif (error.message)\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\t\t\tcontent: error.message,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.grid.reload();\n\t\t});\n\t}\n\n\tprocessApplyButtonClick()\n\t{\n\t\tconst actionValues = this.grid.getActionsPanel().getValues();\n\t\tconst selectedAction = actionValues[`action_button_${this.gridId}`];\n\n\t\tif (selectedAction === 'conduct')\n\t\t{\n\t\t\tthis.conductSelectedDocuments();\n\t\t}\n\n\t\tif (selectedAction === 'cancel')\n\t\t{\n\t\t\tthis.cancelSelectedDocuments();\n\t\t}\n\t}\n\n\tapplyFilter(options)\n\t{\n\t\tconst filterManager = BX.Main.filterManager.getById(this.filterId);\n\t\tif (!filterManager)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tfilterManager.getApi().extendFilter(options);\n\t}\n\n\topenHowToStart()\n\t{\n\t\tif (top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show('redirect=detail&code=14566618');\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\topenHowToTransfer()\n\t{\n\t\tif (top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show('redirect=detail&code=14566610');\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\topenHowToControlGoodsMovement()\n\t{\n\t\tif (top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show('redirect=detail&code=14566670');\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\topenHowToAccountForLosses()\n\t{\n\t\tif (top.BX.Helper)\n\t\t{\n\t\t\ttop.BX.Helper.show('redirect=detail&code=14566652');\n\t\t\tevent.preventDefault();\n\t\t}\n\t}\n\n\topenStoreMasterSlider()\n\t{\n\t\tnew EnableWizardOpener().open(\n\t\t\tthis.masterSliderUrl,\n\t\t\t{\n\t\t\t\turlParams: {\n\t\t\t\t\tanalyticsContextSection: AnalyticsContextList.DOCUMENT_LIST,\n\t\t\t\t},\n\t\t\t\tdata: {\n\t\t\t\t\topenGridOnDone: false,\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonCloseComplete: function(event) {\n\t\t\t\t\t\tconst slider = event.getSlider();\n\t\t\t\t\t\tif (!slider)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (slider.getData().get('isInventoryManagementEnabled'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdocument.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t}\n\n\tstatic openUfSlider(e, item)\n\t{\n\t\te.preventDefault();\n\n\t\tDocumentGridManager.hideSettingsMenu();\n\t\tBX.SidePanel.Instance.open(\n\t\t\titem.options.href,\n\t\t\t{\n\t\t\t\tallowChangeHistory: false,\n\t\t\t\tcacheable: false,\n\t\t\t},\n\t\t);\n\t}\n}\n"],"names":["DocumentGridManager","options","gridId","filterId","grid","BX","Main","gridManager","getInstanceById","isConductDisabled","masterSliderUrl","isInventoryManagementDisabled","inventoryManagementFeatureCode","inventoryManagementSource","getRows","getSelectedIds","documentId","top","UI","InfoHelper","show","MessageBox","confirm","Loc","getMessage","messageBox","button","setWaiting","ajax","runAction","data","documentIds","analyticsLabel","then","close","reload","response","errors","Notification","Center","notify","content","message","documentType","openStoreMasterSlider","actionConfig","mode","settings","Extension","getSettings","get","text","Tag","render","moreLink","Event","bind","articleId","Helper","Dom","replace","querySelector","forEach","error","actionValues","getActionsPanel","getValues","selectedAction","conductSelectedDocuments","cancelSelectedDocuments","filterManager","getById","getApi","extendFilter","event","preventDefault","EnableWizardOpener","open","urlParams","analyticsContextSection","AnalyticsContextList","DOCUMENT_LIST","openGridOnDone","events","onCloseComplete","slider","getSlider","getData","document","location","PopupManager","getPopupById","e","item","hideSettingsMenu","SidePanel","Instance","href","allowChangeHistory","cacheable"],"mappings":"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"}