{"version":3,"file":"manager.bundle.js","sources":["../src/controls/syncstatuspopup.js","../src/controls/syncbutton.js","../src/connectionproviders/connectionitem.js","../src/connectionproviders/connectionprovider.js","../src/connectionproviders/googleprovider.js","../src/connectionproviders/office365provider.js","../src/connectionproviders/icloudprovider.js","../src/connectionproviders/androidprovider.js","../src/connectionproviders/caldavconnection.js","../src/connectionproviders/caldavprovider.js","../src/connectionproviders/exchangeprovider.js","../src/connectionproviders/iphoneprovider.js","../src/connectionproviders/macprovider.js","../src/connectionproviders/outlookprovider.js","../src/connectionproviders/yandexprovider.js","../src/manager.js"],"sourcesContent":["// @flow\n'use strict';\n\nimport {Tag, Loc, Dom, Type} from 'main.core';\nimport {Popup} from 'main.popup';\nimport {EventEmitter} from \"main.core.events\";\n\nexport default class SyncStatusPopup extends EventEmitter\n{\n\tstatic IS_RUN_REFRESH = false;\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Interface.SyncStatusPopup');\n\t\tthis.connections = options.connections;\n\t\tthis.withUpdateButton = options.withUpdateButton;\n\t\tthis.node = options.node;\n\t\tthis.id = options.id;\n\t\tthis.isGoogleApplicationRefused = options.isGoogleApplicationRefused;\n\n\t\tthis.init();\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options)\n\t}\n\n\tinit()\n\t{\n\t\tthis.setPopupContent();\n\t}\n\n\tcreatePopup()\n\t{\n\t\tthis.popup = new Popup({\n\t\t\tclassName: this.id,\n\t\t\tbindElement: this.node,\n\t\t\tcontent: this.container,\n\t\t\tangle: true,\n\t\t\twidth: 360,\n\t\t\toffsetLeft: 60,\n\t\t\toffsetTop: 5,\n\t\t\tpadding: 7,\n\t\t\tdarkMode: true,\n\t\t\tautoHide: true,\n\t\t\tzIndexAbsolute: 3010,\n\t\t});\n\t}\n\n\tshow()\n\t{\n\t\tthis.createPopup();\n\t\tthis.popup.show();\n\t}\n\n\tsetPopupContent()\n\t{\n\t\tthis.container = Tag.render `\n\t\t\t<div class=\"calendar-sync-popup-list\"></div>\n\t\t`;\n\n\t\tthis.connections.forEach(connection => {\n\t\t\tif (connection.getConnectStatus() !== true)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst options = {};\n\n\t\t\toptions.syncTime = this.getFormattedTime(connection.getSyncDate());\n\t\t\toptions.classStatus = connection.getSyncStatus()\n\t\t\t\t? 'calendar-sync-popup-item-status-success'\n\t\t\t\t: 'calendar-sync-popup-item-status-fail'\n\t\t\t;\n\n\t\t\tif (connection.id === 'google' && !connection.getSyncStatus() && this.isGoogleApplicationRefused)\n\t\t\t{\n\t\t\t\toptions.classStatus = 'calendar-sync-popup-item-status-refused';\n\t\t\t\toptions.syncTime = null;\n\t\t\t}\n\n\t\t\toptions.classLable = 'calendar-sync-popup-item-text-' + connection.getClassLabel();\n\t\t\toptions.title = connection.getConnectionName();\n\t\t\tconst block = this.getSyncElement(options);\n\t\t\tthis.container.append(block);\n\t\t});\n\n\n\t\tif (this.withUpdateButton)\n\t\t{\n\t\t\tthis.container.append(this.getContentRefreshBlock());\n\n\t\t\tif (SyncStatusPopup.IS_RUN_REFRESH)\n\t\t\t{\n\t\t\t\tthis.showRefreshStatus();\n\t\t\t}\n\t\t}\n\n\t\treturn this.container;\n\t}\n\n\thide()\n\t{\n\t\tthis.popup.destroy();\n\t}\n\n\tgetContainer()\n\t{\n\t\treturn this.container;\n\t}\n\n\tgetPopup()\n\t{\n\t\treturn this.popup;\n\t}\n\n\tgetFormattedTime(date)\n\t{\n\t\tconst now = new Date();\n\t\tlet timestamp = date;\n\t\tif (Type.isDate(date))\n\t\t{\n\t\t\ttimestamp = Math.round(date.getTime() / 1000);\n\t\t\tlet secondsAgo = parseInt((now - date) / 1000);\n\t\t\tif (secondsAgo < 60)\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('CAL_JUST');\n\t\t\t}\n\t\t}\n\n\t\treturn BX.date.format(\n\t\t\t[\n\t\t\t\t[\"tommorow\", \"tommorow, H:i:s\"],\n\t\t\t\t[\"i\" , \"iago\"],\n\t\t\t\t[\"H\", \"Hago\"],\n\t\t\t\t[\"d\", \"dago\"],\n\t\t\t\t[\"m100\", \"mago\"],\n\t\t\t\t[\"m\", \"mago\"],\n\t\t\t\t[\"-\", \"\"]\n\t\t\t],\n\t\t\ttimestamp\n\t\t);\n\t}\n\n\tgetSyncElement(options)\n\t{\n\t\treturn Tag.render `\n\t\t\t\t<div class=\"calendar-sync-popup-item\">\n\t\t\t\t\t<span class=\"calendar-sync-popup-item-text ${options.classLable}\">${BX.util.htmlspecialchars(options.title)}</span>\n\t\t\t\t\t<div class=\"calendar-sync-popup-item-detail\">\n\t\t\t\t\t\t<span class=\"calendar-sync-popup-item-time\">${options.syncTime}</span>\n\t\t\t\t\t\t<span class=\"calendar-sync-popup-item-status ${options.classStatus}\"></span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\t}\n\n\trefresh(connections)\n\t{\n\t\tthis.connections = connections;\n\t\tthis.popup.setContent(this.setPopupContent());\n\t\tthis.setRefreshStatusBlock();\n\t}\n\n\tsetRefreshStatusBlock()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tthis.removeRefreshStatusBlock();\n\t\t\tthis.enableRefreshButton();\n\t\t\tSyncStatusPopup.IS_RUN_REFRESH = false;\n\t\t}, 120000);\n\t}\n\n\tremoveRefreshStatusBlock()\n\t{\n\t\tif (Type.isElementNode(this.refreshStatusBlock))\n\t\t{\n\t\t\tthis.refreshStatusBlock.remove();\n\t\t}\n\t}\n\n\tenableRefreshButton()\n\t{\n\t\tif (Type.isElementNode(this.refreshButton))\n\t\t{\n\t\t\tthis.refreshButton.className = 'calendar-sync-popup-footer-btn';\n\t\t}\n\t}\n\n\tdisableRefreshButton()\n\t{\n\t\tif (Type.isElementNode(this.refreshButton))\n\t\t{\n\t\t\tthis.refreshButton.className = 'calendar-sync-popup-footer-btn calendar-sync-popup-footer-btn-disabled';\n\t\t}\n\t}\n\n\tgetContentRefreshBlock()\n\t{\n\t\tthis.footerWrapper = Tag.render`\n\t\t\t<div class=\"calendar-sync-popup-footer-wrap\">\n\t\t\t\t${this.getContentRefreshButton()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.footerWrapper;\n\t}\n\n\tgetContentRefreshButton()\n\t{\n\t\tthis.refreshButton = Tag.render`\n\t\t\t<button class=\"calendar-sync-popup-footer-btn\">${Loc.getMessage('CAL_REFRESH')}</button>\n\t\t`;\n\n\t\tthis.refreshButton.addEventListener('click', () => {\n\t\t\tDom.addClass(this.refreshButton, 'calendar-sync-popup-footer-btn-load');\n\t\t\tSyncStatusPopup.IS_RUN_REFRESH = true;\n\t\t\tthis.refreshButton.innerText = Loc.getMessage('CAL_REFRESHING');\n\t\t\tthis.runRefresh();\n\t\t});\n\n\t\treturn this.refreshButton;\n\t}\n\n\tshowRefreshStatus()\n\t{\n\t\tthis.disableRefreshButton();\n\t\tthis.footerWrapper.prepend(this.getRefreshStatus());\n\t}\n\n\tgetRefreshStatus()\n\t{\n\t\tthis.refreshStatusBlock = Tag.render`\n\t\t\t<span class=\"calendar-sync-popup-footer-status\">${Loc.getMessage('CAL_REFRESH_JUST')}</span>\n\t\t`;\n\n\t\treturn this.refreshStatusBlock;\n\t}\n\n\trunRefresh()\n\t{\n\t\tthis.emit('onRefresh', {});\n\t}\n\n\tgetId()\n\t{\n\t\treturn this.id;\n\t}\n}","// @flow\n'use strict';\n\nimport { Dom, Loc, Tag } from 'main.core';\nimport { Popup } from 'main.popup';\nimport SyncStatusPopup from './syncstatuspopup';\n\nexport default class SyncButton\n{\n\tBUTTON_SIZE = BX.UI.Button.Size.EXTRA_SMALL;\n\tBUTTON_ROUND = true;\n\n\tconstructor(options)\n\t{\n\t\tthis.connectionsProviders = options.connectionsProviders;\n\t\tthis.wrapper = options.wrapper;\n\t\tthis.userId = options.userId;\n\t\tthis.status = options.status;\n\t\tthis.isGoogleApplicationRefused = options.isGoogleApplicationRefused;\n\n\t\tthis.buttonEnterTimeout = null;\n\t\tthis.buttonLeaveTimeout = null;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tshow()\n\t{\n\t\tconst buttonData = this.getButtonData();\n\t\tthis.button = new BX.UI.Button({\n\t\t\ttext: buttonData.text,\n\t\t\tround: this.BUTTON_ROUND,\n\t\t\tsize: this.BUTTON_SIZE,\n\t\t\tcolor: buttonData.color,\n\t\t\tclassName: 'ui-btn-themes ' + (buttonData.iconClass || ''),\n\t\t\tonclick: () => {\n\t\t\t\tthis.handleClick();\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tmouseenter: this.handlerMouseEnter.bind(this),\n\t\t\t\tmouseleave: this.handlerMouseLeave.bind(this),\n\t\t\t},\n\t\t});\n\n\t\tthis.button.renderTo(this.wrapper);\n\t}\n\n\tshowGoogleApplicationRefusedPopup()\n\t{\n\t\tconst popup = new Popup({\n\t\t\tbindElement: this.button.getContainer(),\n\t\t\tborderRadius: '3px',\n\t\t\tclassName: 'calendar-popup-ui-tour-animate',\n\t\t\tcontent: Tag.render`\n\t\t\t\t<div class=\"calendar-sync-popup-status-refused\">\n\t\t\t\t\t<div class=\"calendar-sync-popup-status-refused-title\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_SYNC_INFO_STATUS_REFUSED_POPUP_TITLE')}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-sync-popup-status-refused-text\">\n\t\t\t\t\t\t${Loc.getMessage('CAL_SYNC_INFO_STATUS_REFUSED_POPUP_TEXT')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t\twidth: 400,\n\t\t\tangle: {\n\t\t\t\toffset: this.button.getContainer().offsetWidth / 2,\n\t\t\t\tposition: 'top',\n\t\t\t},\n\t\t\tcloseIcon: true,\n\t\t\tautoHide: true,\n\t\t});\n\n\t\tsetTimeout(() => {\n\t\t\tpopup.show();\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.disableShowGoogleApplicationRefused');\n\t\t}, 1000);\n\t}\n\n\tshowPopup(button)\n\t{\n\t\tif(this.status !== 'not_connected')\n\t\t{\n\t\t\tconst connections = [];\n\t\t\tconst providersCollection = Object.values(this.connectionsProviders);\n\n\t\t\tprovidersCollection.forEach(provider => {\n\t\t\t\tconst providerConnections = provider.getConnections();\n\t\t\t\tif(providerConnections.length > 0)\n\t\t\t\t{\n\t\t\t\t\tproviderConnections.forEach(connection =>\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (connection.getConnectStatus() === true)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.popup = SyncStatusPopup.createInstance({\n\t\t\t\tconnections: connections,\n\t\t\t\twithUpdateButton: true,\n\t\t\t\tnode: button.getContainer(),\n\t\t\t\tid: 'calendar-sync-button-status',\n\t\t\t\tisGoogleApplicationRefused: this.isGoogleApplicationRefused,\n\t\t\t});\n\t\t\tthis.popup.show();\n\n\t\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseenter', e => {\n\t\t\t\tclearTimeout(this.buttonEnterTimeout);\n\t\t\t\tclearTimeout(this.buttonLeaveTimeout);\n\t\t\t});\n\t\t\tthis.popup.getPopup().getPopupContainer().addEventListener('mouseleave', () => {\n\t\t\t\tthis.hidePopup();\n\t\t\t});\n\t\t}\n\t}\n\n\thidePopup()\n\t{\n\t\tif (this.popup)\n\t\t{\n\t\t\tthis.popup.hide();\n\t\t}\n\t}\n\n\trefresh(status)\n\t{\n\t\tthis.status = status;\n\n\t\tconst buttonData = this.getButtonData();\n\t\tthis.button.setColor(buttonData.color);\n\t\tthis.button.setText(buttonData.text);\n\t\tthis.button.removeClass('ui-btn-icon-fail ui-btn-icon-success ui-btn-clock calendar-sync-btn-icon-refused');\n\t\tthis.button.addClass(buttonData.iconClass);\n\t}\n\n\thandleClick()\n\t{\n\t\tclearTimeout(this.buttonEnterTimeout);\n\t\t(window.top.BX || window.BX).Runtime.loadExtension('calendar.sync.interface').then((exports) => {\n\t\t\tif (!Dom.hasClass(this.button.button, 'ui-btn-clock'))\n\t\t\t{\n\t\t\t\tthis.syncPanel = new exports.SyncPanel({\n\t\t\t\t\tconnectionsProviders: this.connectionsProviders,\n\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\tstatus: this.status,\n\t\t\t\t});\n\t\t\t\tthis.syncPanel.openSlider();\n\t\t\t}\n\t\t});\n\t}\n\n\thandlerMouseEnter(button)\n\t{\n\t\tclearTimeout(this.buttonEnterTimeout);\n\t\tthis.buttonEnterTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.buttonEnterTimeout = null;\n\t\t\t\tif (!Dom.hasClass(button.button, 'ui-btn-clock'))\n\t\t\t\t{\n\t\t\t\t\tthis.showPopup(button);\n\t\t\t\t}\n\t\t\t}, 500\n\t\t);\n\t}\n\n\thandlerMouseLeave()\n\t{\n\t\tif (this.buttonEnterTimeout !== null)\n\t\t{\n\t\t\tclearTimeout(this.buttonEnterTimeout);\n\t\t\tthis.buttonEnterTimeout = null;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.buttonLeaveTimeout = setTimeout(() =>\n\t\t\t{\n\t\t\t\tthis.hidePopup();\n\t\t\t}, 500\n\t\t);\n\t}\n\n\tgetButtonData()\n\t{\n\t\tif (this.status === 'refused')\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: Loc.getMessage('STATUS_BUTTON_SYNCHRONIZATION'),\n\t\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t\t\ticonClass: 'calendar-sync-btn-icon-refused',\n\t\t\t};\n\t\t}\n\n\t\tif (this.status === 'success')\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: Loc.getMessage('STATUS_BUTTON_SYNCHRONIZATION'),\n\t\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t\t\ticonClass: 'ui-btn-icon-success',\n\t\t\t};\n\t\t}\n\t\telse if (this.status === 'failed')\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: Loc.getMessage('STATUS_BUTTON_FAILED'),\n\t\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t\t\ticonClass: 'ui-btn-icon-fail',\n\t\t\t}\n\t\t}\n\t\telse if (this.status === 'synchronizing')\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: Loc.getMessage('STATUS_BUTTON_SYNCHRONIZATION'),\n\t\t\t\tcolor: BX.UI.Button.Color.LIGHT_BORDER,\n\t\t\t\ticonClass: 'ui-btn-clock',\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttext: Loc.getMessage('STATUS_BUTTON_SYNC_CALENDAR_NEW'),\n\t\t\tcolor: BX.UI.Button.Color.PRIMARY,\n\t\t}\n\t}\n\n\tgetSyncPanel()\n\t{\n\t\treturn this.syncPanel;\n\t}\n\t\n\tsetConnectionProviders(connectionsProviders)\n\t{\n\t\tthis.connectionsProviders = connectionsProviders;\n\t}\n}","// @flow\n'use strict';\n\nimport {Type} from \"main.core\";\n\nconst isConnectionItemProperty = Symbol.for('BX.Calendar.Sync.Manager.ConnectionItem.isConnectionItem');\n\nexport default class ConnectionItem\n{\n\tconstructor(options)\n\t{\n\t\tthis[isConnectionItemProperty] = true;\n\t\tthis.syncDate = Type.isDate(options.syncDate) ? options.syncDate : new Date();\n\t\tthis.connectionName = options.connectionName;\n\t\tthis.status = options.status;\n\t\tthis.connected = options.connected;\n\t\tthis.addParams = options.addParams;\n\t\tthis.type = options.type;\n\t\tthis.id = options.type;\n\t\tthis.userName = options.userName;\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tstatic isConnectionItem(target: Object)\n\t{\n\t\treturn Type.isObject(target) && target[isConnectionItemProperty] === true;\n\t}\n\n\tgetSyncDate()\n\t{\n\t\treturn this.syncDate;\n\t}\n\n\tgetConnectionName()\n\t{\n\t\treturn this.connectionName;\n\t}\n\n\tgetSyncStatus()\n\t{\n\t\treturn this.status;\n\t}\n\n\tgetConnectStatus()\n\t{\n\t\treturn this.connected;\n\t}\n\n\tgetStatus()\n\t{\n\t\tif (this.connected)\n\t\t{\n\t\t\treturn this.status\n\t\t\t\t? \"success\"\n\t\t\t\t: \"failed\";\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn 'not_connected';\n\t\t}\n\t}\n\n\tgetClassLabel()\n\t{\n\t\treturn this.type;\n\t}\n\n\tgetSections()\n\t{\n\t\treturn this.addParams.sections;\n\t}\n\n\tgetId()\n\t{\n\t\treturn this.addParams.id;\n\t}\n\n\tgetConnectionAccountName()\n\t{\n\t\treturn this.userName;\n\t}\n\n\tgetType()\n\t{\n\t\treturn this.type;\n\t}\n\t\n\tsetId(id)\n\t{\n\t\tthis.addParams.id = id;\n\t}\n\t\n\tsetStatus(status)\n\t{\n\t\tthis.status = status;\n\t}\n\n\tsetUserName(userName)\n\t{\n\t\tthis.userName = userName;\n\t}\n\t\n\tsetConnected(connected)\n\t{\n\t\tthis.connected = connected;\n\t}\n\n\tsetSyncDate(syncDate)\n\t{\n\t\tthis.syncDate = syncDate;\n\t}\n}","// @flow\n'use strict';\n\nimport ConnectionItem from \"./connectionitem\";\nimport { Event, Reflection, Type } from 'main.core';\nimport {EventEmitter} from \"main.core.events\";\nimport { Util } from 'calendar.util';\n\nexport class ConnectionProvider extends EventEmitter\n{\n\tMENU_WIDTH = 200;\n\tMENU_PADDING = 7;\n\tMENU_INDEX = 3020;\n\tSLIDER_WIDTH = 606;\n\tSTATUS_SYNCHRONIZING = 'synchronizing';\n\tSTATUS_SUCCESS = 'success';\n\tSTATUS_FAILED = 'failed';\n\tSTATUS_REFUSED = 'refused';\n\tSTATUS_PENDING = 'pending';\n\tSTATUS_NOT_CONNECTED = 'not_connected';\n\tERROR_CODE = 'error';\n\n\tSTATUS_LIST = [\n\t\tthis.STATUS_SYNCHRONIZING,\n\t\tthis.STATUS_SUCCESS,\n\t\tthis.STATUS_FAILED,\n\t\tthis.STATUS_REFUSED,\n\t\tthis.STATUS_PENDING,\n\t\tthis.STATUS_NOT_CONNECTED\n\t];\n\tWAITING_MODE_MAX_TIME = 360000; // 6 min\n\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Manager.ConnectionProvider');\n\n\t\tthis.status = options.status;\n\t\tthis.connected = options.connected;\n\t\tthis.userName = options.userName || '';\n\t\tthis.mainPanel = options.mainPanel === true;\n\t\tthis.pendingStatus = options.pendingStatus === true;\n\t\tthis.gridTitle = options.gridTitle;\n\t\tthis.gridColor = options.gridColor;\n\t\tthis.gridIcon = options.gridIcon;\n\t\tthis.type = options.type;\n\t\tthis.viewClassification = options.viewClassification;\n\t\tthis.templateClass = options.templateClass;\n\t\t// this.wizardClassName = options.wizardClass || null;\n\t\tthis.connections = [];\n\t\tthis.id = options.id || '';\n\t}\n\n\tstatic createInstance(options)\n\t{\n\t\treturn new this(options);\n\t}\n\n\tisActive()\n\t{\n\t\treturn this.connected;\n\t}\n\n\thasMenu()\n\t{\n\t\treturn false;\n\t}\n\n\tsetAdditionalParams(options)\n\t{\n\t\tthis.additionalParams = options;\n\t}\n\n\tsetSyncDate(offset)\n\t{\n\t\toffset = parseInt(offset);\n\t\tif (offset > 60)\n\t\t{\n\t\t\tthis.syncDate = new Date(new Date().getTime() - offset * 1000);\n\t\t}\n\t\telse if (!isNaN(offset))\n\t\t{\n\t\t\tthis.syncDate = new Date();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.syncDate = null;\n\t\t}\n\n\t\tif (this.getConnection())\n\t\t{\n\t\t\tthis.getConnection().syncDate = this.syncDate;\n\t\t}\n\t}\n\n\tgetSyncDate()\n\t{\n\t\treturn this.syncDate;\n\t}\n\n\tsetSections(sections)\n\t{\n\t\tthis.sections = sections;\n\t}\n\n\tsetStatus(status)\n\t{\n\t\tif (this.STATUS_LIST.includes(status))\n\t\t{\n\t\t\tthis.status = status;\n\t\t\tif (!this.connected && (status === this.STATUS_SUCCESS || status === this.STATUS_FAILED))\n\t\t\t{\n\t\t\t\tthis.connected = true;\n\t\t\t}\n\t\t\telse if(this.connected && status === this.STATUS_NOT_CONNECTED)\n\t\t\t{\n\t\t\t\tthis.connected = false;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\tgetGridTitle()\n\t{\n\t\treturn this.gridTitle;\n\t}\n\n\tgetGridColor()\n\t{\n\t\treturn this.gridColor;\n\t}\n\n\tgetGridIcon()\n\t{\n\t\treturn this.gridIcon;\n\t}\n\t\n\tclearConnections()\n\t{\n\t\tthis.connections = [];\n\t}\n\n\tsetConnections()\n\t{\n\t\tthis.connections.push(ConnectionItem.createInstance({\n\t\t\tsyncDate: this.getSyncDate(),\n\t\t\tconnectionName: this.connectionName,\n\t\t\tstatus: this.status,\n\t\t\tconnected: this.connected,\n\t\t\tuserName: this.userName,\n\t\t\taddParams: {\n\t\t\t\tsections: this.sections,\n\t\t\t\tid: this.id || this.type,\n\t\t\t},\n\t\t\ttype: this.type,\n\t\t}));\n\t}\n\n\tsetInterfaceUnit(interfaceUnit): void\n\t{\n\t\tthis.interfaceUnit = interfaceUnit;\n\t}\n\n\tgetInterfaceUnit()\n\t{\n\t\treturn this.interfaceUnit;\n\t}\n\n\tgetConnections()\n\t{\n\t\treturn this.connections;\n\t}\n\n\tgetConnection()\n\t{\n\t\treturn this.connections[0];\n\t}\n\n\tgetType()\n\t{\n\t\treturn this.type;\n\t}\n\n\tgetViewClassification()\n\t{\n\t\treturn this.viewClassification;\n\t}\n\n\tgetConnectStatus()\n\t{\n\t\treturn this.connected;\n\t}\n\n\tgetSyncStatus()\n\t{\n\t\treturn this.status;\n\t}\n\n\tgetStatus()\n\t{\n\t\tif (this.getWizardSyncMode())\n\t\t{\n\t\t\treturn 'synchronizing';\n\t\t}\n\n\t\tif (this.connected)\n\t\t{\n\t\t\tconst status = this.status ? 'success' : 'failed';\n\n\t\t\tif (status === 'failed' && this.isGoogleApplicationRefused)\n\t\t\t{\n\t\t\t\treturn 'refused';\n\t\t\t}\n\n\t\t\treturn status;\n\t\t}\n\t\telse if (this.pendingStatus)\n\t\t{\n\t\t\treturn 'pending';\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn 'not_connected';\n\t\t}\n\t}\n\n\tgetTemplateClass()\n\t{\n\t\treturn this.templateClass;\n\t}\n\n\topenSlider(options)\n\t{\n\t\tBX.SidePanel.Instance.open(options.sliderId, {\n\t\t\tcontentCallback(slider)\n\t\t\t{\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tresolve(options.content);\n\t\t\t\t});\n\t\t\t},\n\t\t\tdata: options.data || {},\n\t\t\tcacheable: options.cacheable,\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tallowChangeHistory: false,\n\t\t\tevents: {\n\t\t\t\tonLoad: event => {\n\t\t\t\t\tthis.itemSlider = event.getSlider();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tcloseSlider()\n\t{\n\t\tif (this.itemSlider)\n\t\t{\n\t\t\tthis.itemSlider.close();\n\t\t}\n\t}\n\n\topenInfoConnectionSlider()\n\t{\n\t\tconst content = this.getClassTemplateItem().createInstance(this).getInfoConnectionContent();\n\t\tthis.openSlider({\n\t\t\tsliderId: 'calendar:item-sync-connect-' + this.type,\n\t\t\tcontent: content,\n\t\t\tcacheable: false,\n\t\t\tdata: {\n\t\t\t\tprovider: this,\n\t\t\t},\n\t\t});\n\t}\n\n\topenActiveConnectionSlider(connection)\n\t{\n\t\tconst itemInterface = this.getClassTemplateItem().createInstance(this, connection);\n\t\tif (this.type === 'google')\n\t\t{\n\t\t\titemInterface.getSectionsForGoogle().then(() => {\n\t\t\t\tthis.openActiveConnectionSliderVendor(itemInterface, connection);\n\t\t\t})\n\t\t}\n\t\telse if (this.type === 'icloud')\n\t\t{\n\t\t\titemInterface.getSectionsForIcloud().then(() => {\n\t\t\t\tthis.openActiveConnectionSliderVendor(itemInterface, connection);\n\t\t\t});\n\t\t}\n\t\telse if (this.type === 'office365')\n\t\t{\n\t\t\titemInterface.getSectionsForOffice365().then(() => {\n\t\t\t\tthis.openActiveConnectionSliderVendor(itemInterface, connection);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.openActiveConnectionSliderVendor(itemInterface, connection);\n\t\t}\n\t}\n\n\topenActiveConnectionSliderVendor(itemInterface, connection)\n\t{\n\t\tconst content = itemInterface.getActiveConnectionContent();\n\n\t\tthis.openSlider({\n\t\t\tsliderId: 'calendar:item-sync-' + connection.id,\n\t\t\tcontent: content,\n\t\t\tcacheable: false,\n\t\t\tdata: {\n\t\t\t\tprovider: this,\n\t\t\t\tconnection: connection,\n\t\t\t\titemInterface: itemInterface,\n\t\t\t},\n\t\t});\n\t}\n\n\tgetClassTemplateItem()\n\t{\n\t\tconst itemClass = Reflection.getClass(this.getTemplateClass());\n\t\tif (Type.isFunction(itemClass))\n\t\t{\n\t\t\treturn itemClass;\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetConnectionById(id)\n\t{\n\t\tconst connections = this.getConnections();\n\t\tif (connections.length > 0)\n\t\t{\n\t\t\tconst result = connections.filter(connection => {\n\t\t\t\treturn connection.getId() == id;\n\t\t\t});\n\t\t\tif (result)\n\t\t\t{\n\t\t\t\treturn result[0];\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tgetSyncPanelTitle()\n\t{\n\t\treturn this.gridTitle;\n\t}\n\n\tgetSyncPanelLogo()\n\t{\n\t\treturn '--' + this.type;\n\t}\n\n\tsetWizardSyncMode(value)\n\t{\n\t\tthis.wizardSyncMode = value;\n\t}\n\n\tgetWizardSyncMode()\n\t{\n\t\treturn this.wizardSyncMode;\n\t}\n\n\tsetWizardState(stateData)\n\t{\n\t\tconst wizard = this.getActiveWizard();\n\t\tif (wizard)\n\t\t{\n\t\t\tif (stateData.status === this.ERROR_CODE)\n\t\t\t{\n\t\t\t\twizard.setErrorState(stateData);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\twizard.handleUpdateState(stateData);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetUserName(userName = '')\n\t{\n\t\tthis.userName = userName;\n\t\tif (this.getConnection())\n\t\t{\n\t\t\tthis.getConnection().setUserName(userName);\n\t\t}\n\t}\n\n\tsetActiveWizard(wizard)\n\t{\n\t\tthis.activeWizard = wizard;\n\t\twizard.subscribe('onConnectionCreated', this.handleCreatedConnection.bind(this));\n\t\twizard.subscribe('onClose', this.handleCloseWizard.bind(this));\n\t\twizard.subscribe('startWizardWaitingMode', this.startWaitingMode.bind(this));\n\t\twizard.subscribe('endWizardWaitingMode', this.endWaitingMode.bind(this));\n\t}\n\n\tgetActiveWizard()\n\t{\n\t\treturn this.activeWizard || null;\n\t}\n\n\tstartWaitingMode()\n\t{\n\t\tthis.emit('onStartWaitingMode');\n\t\tthis.waitingModeReserveTimeout = setTimeout(() => {\n\t\t\tif (this.getActiveWizard() && this.getActiveWizard().getSlider())\n\t\t\t{\n\t\t\t\tBX.reload();\n\t\t\t}\n\t\t\t}, this.WAITING_MODE_MAX_TIME\n\t\t);\n\t}\n\n\tendWaitingMode()\n\t{\n\t\tthis.emit('onEndWaitingMode');\n\t\tif (this.waitingModeReserveTimeout)\n\t\t{\n\t\t\tclearTimeout(this.waitingModeReserveTimeout);\n\t\t\tthis.waitingModeReserveTimeout = null;\n\t\t}\n\t}\n\n\thandleCreatedConnection()\n\t{\n\t\tthis.setStatus(this.STATUS_SUCCESS);\n\t\tthis.getInterfaceUnit().setSyncStatus(this.STATUS_SUCCESS);\n\n\t\tBX.ajax.runAction('calendar.api.syncajax.clearSuccessfulConnectionNotifier', {\n\t\t\tdata: {\n\t\t\t\taccountType: this.getType()\n\t\t\t}\n\t\t});\n\n\t\t// TODO: It's better to avoid using of calendarContext.\n\t\t//  Replace it with eventEmitter events and check for unnecessary requests\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tif (calendarContext)\n\t\t{\n\t\t\tcalendarContext.syncInterface.refreshDebounce();\n\t\t}\n\t}\n\n\thandleCloseWizard()\n\t{\n\t\tconst wizard = this.getActiveWizard();\n\t\tthis.setWizardSyncMode(false);\n\t\tif (wizard && wizard.isSyncFinished())\n\t\t{\n\t\t\tthis.setStatus(this.STATUS_SUCCESS);\n\t\t\tthis.getInterfaceUnit().setSyncStatus(this.STATUS_SUCCESS);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.setStatus(this.STATUS_SYNCHRONIZING);\n\t\t\tthis.getInterfaceUnit().setSyncStatus(this.STATUS_SYNCHRONIZING);\n\n\t\t\tBX.SidePanel.Instance.getOpenSliders().forEach(slider =>\n\t\t\t{\n\t\t\t\tif (['calendar:sync-slider', 'calendar:section-slider']\n\t\t\t\t\t.includes(slider.getUrl()))\n\t\t\t\t{\n\t\t\t\t\tslider.close();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.getInterfaceUnit().refreshButton();\n\n\t\tthis.emit('onEndWaitingMode');\n\n\t\tthis.emit('onCloseSyncWizard');\n\n\t\tif (wizard)\n\t\t{\n\t\t\twizard.unsubscribeAll();\n\t\t}\n\t}\n\t\n\trefresh(options)\n\t{\n\t\tthis.status = options.syncInfo.status || false;\n\t\tthis.connected = options.syncInfo.connected || false;\n\t\tthis.id = options.syncInfo.id || null;\n\t\tif (options.syncLink)\n\t\t{\n\t\t\tthis.syncLink = options.syncLink;\n\t\t}\n\t\tthis.setSyncDate(options.syncInfo.syncOffset);\n\t\tthis.setSections(options.sections);\n\t\tthis.clearConnections();\n\t\tthis.setConnections();\n\t}\n}\n","import {ConnectionProvider} from \"./connectionprovider\";\nimport { Event, Loc } from 'main.core';\n\nexport class GoogleProvider extends ConnectionProvider\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tid: options.syncInfo.id || null,\n\t\t\tstatus: options.syncInfo.status || false,\n\t\t\tconnected: options.syncInfo.connected || false,\n\t\t\tuserName: options.syncInfo.userName || '',\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_GOOGLE'),\n\t\t\tgridColor: '#387ced',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/google.svg',\n\t\t\ttype: 'google',\n\t\t\tinterfaceClassName: '',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.GoogleTemplate',\n\t\t\tmainPanel: options.mainPanel,\n\t\t});\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_GOOGLE');\n\t\tthis.isSetSyncGoogleSettings = options.isSetSyncGoogleSettings;\n\t\tthis.syncLink = options.syncLink;\n\t\tthis.isGoogleApplicationRefused = options.isGoogleApplicationRefused;\n\n\t\tthis.setSyncDate(options.syncInfo.syncOffset);\n\t\tthis.setSections(options.sections);\n\t\tthis.setConnections();\n\t}\n\n\tgetSyncLink()\n\t{\n\t\treturn this.syncLink;\n\t}\n\n\thasSetSyncGoogleSettings()\n\t{\n\t\treturn this.isSetSyncGoogleSettings;\n\t}\n\n\tsaveConnection()\n\t{\n\t\tBX.ajax.runAction('calendar.api.syncajax.createGoogleConnection', {\n\t\t\tdata: {}\n\t\t}).then(\n\t\t\tresponse => {\n\t\t\t\tif (response?.data?.status === this.ERROR_CODE)\n\t\t\t\t{\n\t\t\t\t\tif (this.isGoogleApplicationRefused)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setStatus(this.STATUS_REFUSED);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.setStatus(this.STATUS_FAILED);\n\t\t\t\t\t}\n\t\t\t\t\tthis.setWizardState(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstatus: this.ERROR_CODE,\n\t\t\t\t\t\t\tvendorName: this.type,\n\t\t\t\t\t\t\taccountName: response?.data?.googleApiStatus?.googleCalendarPrimaryId\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.setWizardState(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstage: 'connection_created',\n\t\t\t\t\t\t\tvendorName: this.type,\n\t\t\t\t\t\t\taccountName: response?.data?.googleApiStatus?.googleCalendarPrimaryId\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tthis.emit(\n\t\t\t\t\t'onSyncInfoUpdated',\n\t\t\t\t\tnew Event.BaseEvent({\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tsyncInfo: response.data.syncInfo\n\t\t\t\t\t}\n\t\t\t\t}));\n\t\t\t},\n\t\t\tresponse => {\n\t\t\t\tif (this.isGoogleApplicationRefused)\n\t\t\t\t{\n\t\t\t\t\tthis.setStatus(this.STATUS_REFUSED);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.setStatus(this.STATUS_FAILED);\n\t\t\t\t}\n\t\t\t\tthis.setWizardState(\n\t\t\t\t\t{\n\t\t\t\t\t\tstatus: this.ERROR_CODE,\n\t\t\t\t\t\tvendorName: this.type\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n}","import {ConnectionProvider} from \"./connectionprovider\";\nimport {Loc} from \"main.core\";\n\nexport class Office365Provider extends ConnectionProvider\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tid: options.syncInfo.id || null,\n\t\t\tstatus: options.syncInfo.status || false,\n\t\t\tconnected: options.syncInfo.connected || false,\n\t\t\tuserName: options.syncInfo.userName || options.syncInfo.connectionName || '',\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_OFFICE365'),\n\t\t\tgridColor: '#fc1d1d',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/office365.svg',\n\t\t\ttype: 'office365',\n\t\t\tinterfaceClassName: '',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.Office365template',\n\t\t\tmainPanel: true,\n\t\t});\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_OFFICE365');\n\t\tthis.syncLink = options.syncLink || '';\n\t\tthis.isSetSyncOffice365Settings = options.isSetSyncOffice365Settings;\n\n\t\tthis.setSyncDate(options.syncInfo.syncOffset);\n\t\tthis.setSections(options.sections);\n\t\tthis.setConnections();\n\t}\n\n\tgetSyncLink()\n\t{\n\t\treturn this.syncLink;\n\t}\n\n\thasSetSyncOffice365Settings()\n\t{\n\t\treturn this.isSetSyncOffice365Settings;\n\t}\n\n\tsaveConnection()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.createOffice365Connection')\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tif (response?.data?.status === this.provider.ERROR_CODE)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setStatus(this.provider.STATUS_FAILED);\n\t\t\t\t\t\t\tthis.setWizardState(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tstatus: this.provider.ERROR_CODE,\n\t\t\t\t\t\t\t\t\tvendorName: this.provider.type,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (response?.data?.connectionId)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.setStatus(this.provider.STATUS_SUCCESS);\n\t\t\t\t\t\t\tthis.getConnection().setId(response.data.connectionId);\n\t\t\t\t\t\t\tthis.getConnection().setStatus(true);\n\t\t\t\t\t\t\tthis.getConnection().setConnected(true);\n\t\t\t\t\t\t\tthis.getConnection().setSyncDate(new Date());\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(response.data);\n\t\t\t\t\t},\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tthis.setStatus(this.provider.STATUS_FAILED);\n\t\t\t\t\t\tthis.setWizardState(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstatus: this.provider.ERROR_CODE,\n\t\t\t\t\t\t\t\tvendorName: this.provider.type,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tresolve(response.errors);\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t})\n\t}\n}\n","import {ConnectionProvider} from \"./connectionprovider\";\nimport {Loc} from \"main.core\";\n\nexport class ICloudProvider extends ConnectionProvider\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tid: options.syncInfo.id || null,\n\t\t\tstatus: options.syncInfo.status || false,\n\t\t\tconnected: options.syncInfo.connected || false,\n\t\t\tuserName: options.syncInfo.userName || '',\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_ICLOUD'),\n\t\t\tgridColor: '#948f8f',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/icloud.svg',\n\t\t\ttype: 'icloud',\n\t\t\tinterfaceClassName: '',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.IcloudTemplate',\n\t\t\tmainPanel: true,\n\t\t});\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_ICLOUD');\n\n\t\tthis.setSyncDate(options.syncInfo.syncOffset);\n\t\tthis.setSections(options.sections);\n\t\tthis.setConnections();\n\t}\n}","import {ConnectionProvider} from \"./connectionprovider\";\nimport {Loc} from \"main.core\";\n\nexport class AndroidProvider extends ConnectionProvider\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.syncInfo.status,\n\t\t\tconnected: options.syncInfo.connected,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_ANDROID'),\n\t\t\tgridColor: '#9ece03',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/android.svg',\n\t\t\ttype: 'android',\n\t\t\tviewClassification: 'mobile',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.AndroidTemplate',\n\t\t});\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_ANDROID');\n\n\t\tthis.setSyncDate(options.syncInfo.syncOffset);\n\t\tthis.setConnections();\n\t}\n}","import {ConnectionProvider} from \"./connectionprovider\";\nimport {Loc} from \"main.core\";\nimport ConnectionItem from \"./connectionitem\";\n\nexport class CaldavConnection extends ConnectionProvider\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t}\n\n\tstatic calculateStatus(connections)\n\t{\n\t\tif (connections.length === 0)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tfor (let key in connections)\n\t\t{\n\t\t\tif (this.isFailedConnections(connections[key]))\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tstatic isFailedConnections(connection)\n\t{\n\t\tif (connection.syncInfo.connected === true\n\t\t\t&& connection.syncInfo.status === false)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\thasMenu()\n\t{\n\t\treturn this.connected;\n\t}\n\n\tshowMenu(bindElement)\n\t{\n\t\tif (this.menu)\n\t\t{\n\t\t\tthis.menu.destroy();\n\t\t}\n\n\t\tconst menuItems = this.getMenuItems();\n\t\tmenuItems.push(...this.getMenuItemConnect());\n\t\tthis.menu = this.getMenu(bindElement, menuItems);\n\t\tthis.addMenuHandler();\n\t\tthis.menu.show();\n\t}\n\n\taddMenuHandler()\n\t{\n\t\tif (this.menu)\n\t\t{\n\t\t\tthis.menu.getMenuContainer().addEventListener('click', () =>\n\t\t\t{\n\t\t\t\tthis.menu.close();\n\t\t\t});\n\t\t}\n\t}\n\n\tgetMenuItems()\n\t{\n\t\tconst menuItems = [];\n\t\tthis.connections.forEach(item =>\n\t\t{\n\t\t\titem.type = this.type;\n\t\t\titem.id = item.addParams.id;\n\t\t\titem.text = item.connectionName;\n\t\t\titem.onclick = () =>\n\t\t\t{\n\t\t\t\tthis.openActiveConnectionSlider(item);\n\t\t\t};\n\t\t\tmenuItems.push(item);\n\t\t});\n\n\t\treturn menuItems;\n\t}\n\n\tgetMenuItemConnect()\n\t{\n\t\treturn [\n\t\t\t{delimiter: true},\n\t\t\t{\n\t\t\t\tid: 'connect',\n\t\t\t\ttext: Loc.getMessage('ADD_MENU_CONNECTION'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.openInfoConnectionSlider();\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t}\n\n\tgetMenu(bindElement, menuItems)\n\t{\n\t\treturn new (window.top.BX || window.BX).Main.Menu({\n\t\t\tclassName: 'calendar-sync-popup-status',\n\t\t\tbindElement: bindElement,\n\t\t\titems: menuItems,\n\t\t\twidth: this.MENU_WIDTH,\n\t\t\tpadding: this.MENU_PADDING,\n\t\t\tzIndexAbsolute: this.MENU_INDEX,\n\t\t\tautoHide: true,\n\t\t\tcloseByEsc: true,\n\t\t\tid: this.getType() + '-menu',\n\t\t\toffsetLeft: -40,\n\t\t});\n\t}\n\n\tsetConnections()\n\t{\n\t\tif (this.connectionsSyncInfo.length > 0)\n\t\t{\n\t\t\tthis.connectionsSyncInfo.forEach(connection => {\n\t\t\t\tthis.connections.push(ConnectionItem.createInstance({\n\t\t\t\t\tconnectionName: connection.syncInfo.connectionName,\n\t\t\t\t\tstatus: connection.syncInfo.status,\n\t\t\t\t\tconnected: connection.syncInfo.connected,\n\t\t\t\t\taddParams: {\n\t\t\t\t\t\tsections: connection.sections,\n\t\t\t\t\t\tid: connection.syncInfo.id,\n\t\t\t\t\t\tuserName: connection.syncInfo.userName,\n\t\t\t\t\t\tserver: connection.syncInfo.server,\n\t\t\t\t\t},\n\t\t\t\t\ttype: this.type,\n\t\t\t\t}));\n\t\t\t});\n\t\t}\n\t}\n}","import {CaldavConnection} from \"./caldavconnection\";\nimport {Loc} from \"main.core\";\n\nexport class CaldavProvider extends CaldavConnection\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.status,\n\t\t\tconnected: options.connected,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_CALDAV'),\n\t\t\tgridColor: '#1eae43',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/caldav.svg',\n\t\t\ttype: 'caldav',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.CaldavTemplate',\n\t\t});\n\n\t\tthis.connectionsSyncInfo = options.connections;\n\n\t\tif (options.connections && options.connections[0] && options.connections[0].syncInfo)\n\t\t{\n\t\t\tthis.setSyncDate(options.connections[0].syncInfo.syncOffset);\n\t\t}\n\t\tthis.setConnections();\n\t}\n}","import {ConnectionProvider} from \"./connectionprovider\";\nimport {Loc} from \"main.core\";\n\nexport class ExchangeProvider extends ConnectionProvider\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.syncInfo.status || false,\n\t\t\tconnected: options.syncInfo.connected || false,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_EXCHANGE'),\n\t\t\tgridColor: '#54d0df',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/exchange.svg',\n\t\t\ttype: 'exchange',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.ExchangeTemplate',\n\t\t});\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_EXCHANGE');\n\n\t\tthis.setSyncDate(options.syncInfo.syncOffset);\n\t\tthis.setSections(options.sections);\n\t\tthis.setConnections();\n\t}\n\n}","import {ConnectionProvider} from \"./connectionprovider\";\nimport {Loc} from \"main.core\";\n\nexport class IphoneProvider extends ConnectionProvider\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.syncInfo.status,\n\t\t\tconnected: options.syncInfo.connected,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_IPHONE'),\n\t\t\tgridColor: '#2fc6f6',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/iphone.svg',\n\t\t\ttype: 'iphone',\n\t\t\tviewClassification: 'mobile',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.IphoneTemplate',\n\t\t});\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_IPHONE');\n\n\t\tthis.setSyncDate(options.syncInfo.syncOffset);\n\t\tthis.setConnections();\n\t}\n}","import {ConnectionProvider} from \"./connectionprovider\";\nimport {Loc} from \"main.core\";\n\nexport class MacProvider extends ConnectionProvider\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.syncInfo.status,\n\t\t\tconnected: options.syncInfo.connected,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_MAC'),\n\t\t\tgridColor: '#ff5752',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/mac.svg',\n\t\t\ttype: 'mac',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.MacTemplate',\n\t\t});\n\t\tthis.portalAddress = options.portalAddress;\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_MAC');\n\n\t\tthis.setSyncDate(options.syncInfo.syncOffset);\n\t\tthis.setConnections();\n\t}\n\n\tgetPortalAddress()\n\t{\n\t\treturn this.portalAddress;\n\t}\n}","// @flow\n'use strict';\n\nimport {ConnectionProvider} from \"./connectionprovider\";\nimport {Loc} from \"main.core\";\n\nexport class OutlookProvider extends ConnectionProvider\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.syncInfo.status,\n\t\t\tconnected: options.syncInfo.connected,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_OUTLOOK'),\n\t\t\tgridColor: '#ffa900',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/outlook.svg',\n\t\t\ttype: 'outlook',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.OutlookTemplate',\n\t\t});\n\t\tthis.setSyncDate(options.syncInfo.syncOffset);\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_OUTLOOK');\n\n\t\tthis.sections = options.sections;\n\t\tthis.infoBySections = options.infoBySections;\n\n\t\tthis.setConnections();\n\t}\n\n\thasMenu()\n\t{\n\t\treturn this.sections.length > 0;\n\t}\n\n\tshowMenu(bindElement)\n\t{\n\t\tif (this.hasMenu())\n\t\t{\n\t\t\tif (this.menu)\n\t\t\t{\n\t\t\t\tthis.menu.destroy();\n\t\t\t}\n\t\t\tconst menuItems = this.getConnection().getSections();\n\n\t\t\tmenuItems.forEach(item =>\n\t\t\t{\n\t\t\t\tif (this.infoBySections[item.id])\n\t\t\t\t{\n\t\t\t\t\titem.className = 'calendar-sync-outlook-popup-item';\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\titem.onclick = () =>\n\t\t\t\t{\n\t\t\t\t\tthis.connectToOutlook(item);\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tthis.menu = new (window.top.BX || window.BX).Main.Menu({\n\t\t\t\tclassName: 'calendar-sync-popup-status',\n\t\t\t\tbindElement: bindElement,\n\t\t\t\titems: menuItems,\n\t\t\t\tpadding: 7,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tzIndexAbsolute: 3020,\n\t\t\t\tid: this.getType() + '-menu',\n\t\t\t\toffsetLeft: -40,\n\t\t\t});\n\n\t\t\tthis.menu.getMenuContainer().addEventListener('click', () =>\n\t\t\t{\n\t\t\t\tthis.menu.close();\n\t\t\t});\n\n\t\t\tthis.menu.show();\n\t\t}\n\t}\n\t\n\tconnectToOutlook(section)\n\t{\n\t\tif (section.id)\n\t\t{\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.getOutlookLink', {\n\t\t\t\tdata: {\n\t\t\t\t\tid: section.id\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then(\n\t\t\t\t\t(response) => {\n\t\t\t\t\t\tconst url = response.data.result;\n\t\t\t\t\t\teval(url);\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t}\n\t}\n}","import {CaldavConnection} from \"./caldavconnection\";\nimport {Loc} from \"main.core\";\n\nexport class YandexProvider extends CaldavConnection\n{\n\tconstructor(options)\n\t{\n\t\tsuper({\n\t\t\tstatus: options.status,\n\t\t\tconnected: options.connected,\n\t\t\tgridTitle: Loc.getMessage('CALENDAR_TITLE_YANDEX'),\n\t\t\tgridColor: '#f9c500',\n\t\t\tgridIcon: '/bitrix/images/calendar/sync/yandex.svg',\n\t\t\ttype: 'yandex',\n\t\t\tviewClassification: 'web',\n\t\t\ttemplateClass: 'BX.Calendar.Sync.Interface.YandexTemplate',\n\t\t});\n\n\t\tthis.connectionName = Loc.getMessage('CALENDAR_TITLE_YANDEX');\n\t\tthis.connectionsSyncInfo = options.connections;\n\n\t\tif (options.connections && options.connections[0] && options.connections[0].syncInfo)\n\t\t{\n\t\t\tthis.setSyncDate(options.connections[0].syncInfo.syncOffset);\n\t\t}\n\t\tthis.setConnections();\n\t}\n}","// @flow\n\nimport SyncButton from './controls/syncbutton';\nimport {EventEmitter} from \"main.core.events\";\nimport {GoogleProvider} from \"./connectionproviders/googleprovider\";\nimport {Office365Provider} from \"./connectionproviders/office365provider\";\nimport {ICloudProvider} from \"./connectionproviders/icloudprovider\";\nimport {AndroidProvider} from \"./connectionproviders/androidprovider\";\nimport {CaldavConnection} from \"./connectionproviders/caldavconnection\";\nimport {CaldavProvider} from \"./connectionproviders/caldavprovider\";\nimport {ExchangeProvider} from \"./connectionproviders/exchangeprovider\";\nimport {IphoneProvider} from \"./connectionproviders/iphoneprovider\";\nimport {MacProvider} from \"./connectionproviders/macprovider\";\nimport {OutlookProvider} from \"./connectionproviders/outlookprovider\";\nimport {YandexProvider} from \"./connectionproviders/yandexprovider\";\nimport SyncStatusPopup from \"./controls/syncstatuspopup\";\nimport {Util} from \"calendar.util\";\nimport { Runtime } from 'main.core';\n\ntype ManagerOptions = {\n\tcalendar: any,\n\twrapper: string,\n\tsyncInfo: any,\n\tuserId: number,\n\tsyncLinks: any,\n\tsections: any,\n\tportalAddress: string,\n\tisRuZone: boolean,\n\tcalendarInstance: window.BXEventCalendar.Core,\n\tisSetSyncGoogleSettings: boolean,\n\tisSetSyncOffice365Settings: boolean\n};\n\nexport default class Manager extends EventEmitter\n{\n\tstatus = 'not_connected';\n\tSTATUS_SUCCESS = 'success';\n\tSTATUS_FAILED = 'failed';\n\tSTATUS_REFUSED = 'refused';\n\tSTATUS_NOT_CONNECTED = 'not_connected';\n\tWIZARD_SYNC_MODE = 'wizard_sync_mode';\n\tSTATUS_SYNCHRONIZING = 'synchronizing';\n\tWAITING_MODE_PERIODIC_TIMEOUT = 5000;\n\tREFRESH_DELAY = 300;\n\tREFRESH_CONTENT_DELAY = 300;\n\tWIZARD_SLIDER_PREFIX = 'calendar:sync-wizard';\n\n\tconstructor(options: ManagerOptions)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.Sync.Manager.Manager');\n\n\t\tthis.isGoogleApplicationRefused = options.calendar.util.config.isGoogleApplicationRefused === 'Y';\n\t\tthis.showGoogleApplicationRefused = options.calendar.util.config.showGoogleApplicationRefused === 'Y';\n\t\tthis.wrapper = options.wrapper;\n\t\tthis.setSyncInfo(options.syncInfo);\n\t\tthis.userId = options.userId;\n\t\tthis.syncLinks = options.syncLinks;\n\t\tthis.sections = options.sections;\n\t\tthis.portalAddress = options.portalAddress;\n\t\tthis.isRuZone = options.isRuZone;\n\t\tthis.calendarInstance = options.calendar;\n\t\tthis.isSetSyncGoogleSettings = options.isSetSyncGoogleSettings;\n\t\tthis.isSetSyncOffice365Settings = options.isSetSyncOffice365Settings;\n\t\tthis.refreshDebounce = Runtime.debounce(this.refresh, this.REFRESH_DELAY, this);\n\t\tthis.refreshContentDebounce = Runtime.debounce(this.refreshContent, this.REFRESH_CONTENT_DELAY, this);\n\n\t\tthis.init();\n\t\tthis.subscribeOnEvent();\n\t}\n\n\tsubscribeOnEvent()\n\t{\n\t\tEventEmitter.subscribe('BX.Calendar.Sync.Interface.SyncStatusPopup:onRefresh', event => {\n\t\t\tthis.refreshDebounce(event);\n\t\t});\n\n\t\tEventEmitter.subscribe('BX.Calendar.Sync.Interface.InterfaceTemplate:reDrawCalendarGrid', event => {\n\t\t\tthis.reDrawCalendarGrid();\n\t\t});\n\n\t\twindow.addEventListener('message', (event) => {\n\t\t\tif (event.data.title === 'googleOAuthSuccess')\n\t\t\t{\n\t\t\t\twindow.location.reload()\n\t\t\t}\n\t\t});\n\t}\n\n\tshowSyncButton()\n\t{\n\t\tthis.syncButton = new SyncButton({\n\t\t\tstatus: this.status,\n\t\t\twrapper: this.wrapper,\n\t\t\tconnectionsProviders: this.connectionsProviders,\n\t\t\tuserId: this.userId,\n\t\t\tisGoogleApplicationRefused: this.isGoogleApplicationRefused,\n\t\t});\n\t\tthis.syncButton.show();\n\n\t\tif (this.needToShowGoogleRefusedPopup())\n\t\t{\n\t\t\tthis.syncButton.showGoogleApplicationRefusedPopup();\n\t\t\tthis.showGoogleApplicationRefused = false;\n\t\t}\n\t}\n\n\tinit()\n\t{\n\t\tthis.connectionsProviders = {};\n\t\tconst yandexConnections = [];\n\t\tconst caldavConnections = [];\n\n\t\tconst syncInfo = this.syncInfo;\n\t\tthis.sectionsByType = this.sortSections();\n\n\t\tfor (let key in syncInfo)\n\t\t{\n\t\t\tif (syncInfo.hasOwnProperty(key))\n\t\t\t{\n\t\t\t\tswitch (syncInfo[key].type)\n\t\t\t\t{\n\t\t\t\t\tcase 'yandex':\n\t\t\t\t\t\tyandexConnections.push({\n\t\t\t\t\t\t\tsyncInfo: syncInfo[key],\n\t\t\t\t\t\t\tsections: this.sectionsByType.caldav['caldav' + syncInfo[key].id],\n\t\t\t\t\t\t\tisRuZone: this.isRuZone,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'caldav':\n\t\t\t\t\t\tcaldavConnections.push({\n\t\t\t\t\t\t\tsyncInfo: syncInfo[key],\n\t\t\t\t\t\t\tsections: this.sectionsByType.caldav['caldav' + syncInfo[key].id],\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.connectionsProviders = {\n\t\t\tgoogle: this.getGoogleProvider(),\n\t\t\ticloud: this.getIcloudProvider(),\n\t\t\toffice365: this.getOffice365Provider(),\n\t\t\tcaldav: this.getCaldavProvider(caldavConnections),\n\t\t\tiphone: this.getIphoneProvider(),\n\t\t\tandroid: this.getAndroidProvider(),\n\t\t\tmac: this.getMacProvider(),\n\t\t};\n\n\t\tif (this.isRuZone)\n\t\t{\n\t\t\tthis.connectionsProviders.yandex = this.getYandexProvider(yandexConnections);\n\t\t}\n\n\t\tif (!BX.browser.IsMac() && syncInfo.hasOwnProperty('outlook'))\n\t\t{\n\t\t\tthis.connectionsProviders.outlook = this.getOutlookProvider();\n\t\t}\n\n\t\tif (syncInfo.hasOwnProperty('exchange'))\n\t\t{\n\t\t\tthis.connectionsProviders.exchange = this.getExchangeProvider();\n\t\t}\n\n\t\tthis.status = this.getSummarySyncStatus();\n\t\tthis.subscribeEventHandlers();\n\t}\n\n\tsetSyncMode(value)\n\t{\n\t\tthis.syncMode = value;\n\t}\n\n\tgetSyncMode()\n\t{\n\t\treturn this.syncMode;\n\t}\n\n\tisWizardSyncMode()\n\t{\n\t\tfor (let providerName in this.connectionsProviders)\n\t\t{\n\t\t\tif (this.connectionsProviders.hasOwnProperty(providerName)\n\t\t\t\t&& this.connectionsProviders[providerName].getWizardSyncMode())\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tisSyncInProcess()\n\t{\n\t\tfor (let providerName in this.connectionsProviders)\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.connectionsProviders.hasOwnProperty(providerName)\n\t\t\t\t&& this.connectionsProviders[providerName].getSyncStatus() === this.STATUS_SYNCHRONIZING\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tsortSections()\n\t{\n\t\tconst sections = this.sections;\n\t\tconst exchangeSections = [];\n\t\tconst googleSections = [];\n\t\tconst icloudSections = [];\n\t\tconst sectionsByType = {};\n\t\tconst outlookSections = [];\n\t\tconst office365Sections = [];\n\t\tsectionsByType.caldav = {};\n\n\t\tsections.forEach(section => {\n\t\t\tif (\n\t\t\t\tsection.belongsToView()\n\t\t\t\t&& section.data.OUTLOOK_JS\n\t\t\t\t&& section.data['EXTERNAL_TYPE'] === 'local'\n\t\t\t)\n\t\t\t{\n\t\t\t\toutlookSections.push({\n\t\t\t\t\tid: section.id,\n\t\t\t\t\tconnectURL: section.data.OUTLOOK_JS,\n\t\t\t\t\ttext: section.name,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (section.data['IS_EXCHANGE'] === true)\n\t\t\t{\n\t\t\t\texchangeSections.push(section.data);\n\t\t\t}\n\t\t\telse if (\n\t\t\t\tsection.data['GAPI_CALENDAR_ID']\n\t\t\t\t&& section.data['CAL_DAV_CON']\n\t\t\t\t&& section.data['EXTERNAL_TYPE'] !== 'local'\n\t\t\t)\n\t\t\t{\n\t\t\t\tgoogleSections.push(section.data);\n\t\t\t}\n\t\t\telse if (section.data['EXTERNAL_TYPE'] === 'icloud')\n\t\t\t{\n\t\t\t\ticloudSections.push(section.data);\n\t\t\t}\n\t\t\telse if (section.data['EXTERNAL_TYPE'] === 'office365')\n\t\t\t{\n\t\t\t\toffice365Sections.push(section.data);\n\t\t\t}\n\t\t\telse if (section.data['CAL_DAV_CON'] && section.data['CAL_DAV_CAL'])\n\t\t\t{\n\t\t\t\tsectionsByType.caldav['caldav' + section.data['CAL_DAV_CON']] = section.data;\n\t\t\t}\n\t\t});\n\n\t\tsectionsByType.google = googleSections;\n\t\tsectionsByType.icloud = icloudSections;\n\t\tsectionsByType.office365 = office365Sections;\n\t\tsectionsByType.exchange = exchangeSections;\n\t\tsectionsByType.outlook = outlookSections;\n\n\t\treturn sectionsByType;\n\t}\n\n\trefresh(event)\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tBX.ajax.runAction('calendar.api.syncajax.updateConnection', {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: 'user',\n\t\t\t\t\trequestUid: Util.registerRequestId(),\n\t\t\t\t}\n\t\t\t}).then((response) => {\n\t\t\t\tthis.setSyncInfo(response.data);\n\t\t\t\tthis.status = this.getSummarySyncStatus();\n\n\t\t\t\tif (this.needToShowGoogleRefusedPopup())\n\t\t\t\t{\n\t\t\t\t\tthis.syncButton.showGoogleApplicationRefusedPopup();\n\t\t\t\t\tthis.showGoogleApplicationRefused = false;\n\t\t\t\t}\n\n\t\t\t\tconst activePopup = (event && event.getTarget) ? event.getTarget() : null;\n\t\t\t\tthis.refreshContent(activePopup);\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t}\n\n\trefreshContent(activePopup = {})\n\t{\n\t\tthis.init();\n\n\t\tthis.refreshCalendarGrid();\n\n\t\tif (this.syncButton)\n\t\t{\n\t\t\tthis.syncButton.refresh(this.status);\n\t\t\tthis.syncButton.setConnectionProviders(this.connectionsProviders);\n\t\t}\n\n\t\tif (activePopup)\n\t\t{\n\t\t\tthis.refreshActivePopup(activePopup);\n\t\t\tthis.refreshOpenSliders(activePopup);\n\t\t}\n\t}\n\n\trefreshCalendarGrid()\n\t{\n\t\tthis.calendarInstance.reload();\n\t}\n\n\trefreshActivePopup(activePopup)\n\t{\n\t\tif (activePopup instanceof SyncStatusPopup && activePopup.getId() === 'calendar-syncPanel-status')\n\t\t{\n\t\t\tactivePopup.refresh(this.getConnections());\n\t\t}\n\t\telse if (this.syncButton.popup instanceof SyncStatusPopup && this.syncButton.popup.getId() === 'calendar-sync-button-status')\n\t\t{\n\t\t\tthis.syncButton.popup.refresh(this.getConnections());\n\t\t}\n\t}\n\n\trefreshOpenSliders(activePopup = {})\n\t{\n\t\tconst openSliders = BX.SidePanel.Instance.getOpenSliders();\n\t\tif (openSliders.length > 0)\n\t\t{\n\t\t\topenSliders.forEach(slider => {\n\t\t\t\tif (slider.getUrl() === 'calendar:auxiliary-sync-slider')\n\t\t\t\t{\n\t\t\t\t\tthis.refreshMainSlider(this.syncButton.getSyncPanel());\n\t\t\t\t}\n\t\t\t\telse if (slider.getUrl().indexOf('calendar:item-sync-') !== -1)\n\t\t\t\t{\n\t\t\t\t\tthis.refreshConnectionSlider(slider, activePopup);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\trefreshConnectionSlider(slider, activePopup)\n\t{\n\t\tlet updatedConnection = undefined;\n\t\tconst itemInterface = slider.getData().get('itemInterface');\n\t\tconst connection = slider.getData().get('connection');\n\t\tif (connection)\n\t\t{\n\t\t\tupdatedConnection = this.connectionsProviders[connection.getType()].getConnectionById(connection.getId());\n\t\t}\n\n\t\tif (activePopup instanceof SyncStatusPopup && updatedConnection)\n\t\t{\n\t\t\tactivePopup.refresh([updatedConnection]);\n\t\t}\n\n\t\tif (itemInterface && updatedConnection)\n\t\t{\n\t\t\titemInterface.refresh(updatedConnection);\n\t\t}\n\n\t\tslider.reload();\n\t}\n\n\trefreshMainSlider(syncPanel)\n\t{\n\t\tsyncPanel.refresh(this.status, this.connectionsProviders);\n\t}\n\n\tgetConnections()\n\t{\n\t\tconst connections = [];\n\t\tconst items = Object.values(this.connectionsProviders);\n\n\t\titems.forEach(item => {\n\t\t\tconst itemConnections = item.getConnections();\n\t\t\tif (itemConnections.length > 0)\n\t\t\t{\n\t\t\t\titemConnections.forEach(connection => {\n\t\t\t\t\t\tif (connection.getConnectStatus() === true)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconnections.push(connection);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\treDrawCalendarGrid()\n\t{\n\t\tthis.calendarInstance.reloadDebounce();\n\t}\n\n\tupdateSyncStatus(params)\n\t{\n\t\tfor (let connectionName in params.syncInfo)\n\t\t{\n\t\t\tif (\n\t\t\t\tparams.syncInfo.hasOwnProperty(connectionName)\n\t\t\t\t&& this.syncInfo[connectionName]\n\t\t\t)\n\t\t\t{\n\t\t\t\tthis.syncInfo[connectionName] = {\n\t\t\t\t\t...this.syncInfo[connectionName],\n\t\t\t\t\t...params.syncInfo[connectionName]\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tthis.status = this.STATUS_SUCCESS;\n\t\tthis.refreshContentDebounce();\n\t}\n\n\taddSyncConnection(params)\n\t{\n\t\tfor (const connectionName in params.syncInfo)\n\t\t{\n\t\t\tif (['yandex', 'caldav'].includes(params.syncInfo[connectionName].type))\n\t\t\t{\n\t\t\t\tBX.reload();\n\t\t\t}\n\n\t\t\tif (BX.Calendar.Util.checkRequestId(params.requestUid))\n\t\t\t{\n\t\t\t\tif (this.syncInfo[connectionName])\n\t\t\t\t{\n\t\t\t\t\tthis.syncInfo[connectionName] = {\n\t\t\t\t\t\t...this.syncInfo[connectionName],\n\t\t\t\t\t\t...params.syncInfo[connectionName]\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.status = this.STATUS_SUCCESS;\n\t\tthis.refreshContentDebounce();\n\t}\n\n\tdeleteSyncConnection(params)\n\t{\n\t\tif (!BX.Calendar.Util.checkRequestId(params.requestUid))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (params.connectionId)\n\t\t{\n\t\t\tfor (const connectionName in this.syncInfo)\n\t\t\t{\n\t\t\t\tif (this.syncInfo.hasOwnProperty(connectionName)\n\t\t\t\t\t&& this.syncInfo[connectionName]\n\t\t\t\t\t&& parseInt(this.syncInfo[connectionName].id) === parseInt(params.connectionId))\n\t\t\t\t{\n\t\t\t\t\tdelete this.syncInfo[connectionName];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (params.syncInfo)\n\t\t{\n\t\t\tfor (const connectionName in params.syncInfo)\n\t\t\t{\n\t\t\t\tif (this.syncInfo[connectionName])\n\t\t\t\t{\n\t\t\t\t\tdelete this.syncInfo[connectionName];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.status !== this.STATUS_NOT_CONNECTED)\n\t\t{\n\t\t\tthis.status = this.STATUS_SUCCESS;\n\t\t}\n\t\tthis.refreshDebounce();\n\t}\n\n\tgetProviderById(id): Array\n\t{\n\t\tlet connection;\n\t\tfor (let providerName in this.connectionsProviders)\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.connectionsProviders.hasOwnProperty(providerName)\n\t\t\t\t&& this.connectionsProviders[providerName].connected\n\t\t\t\t&& ['google', 'caldav', 'yandex', 'icloud', 'office365'].includes(providerName)\n\t\t\t)\n\t\t\t{\n\t\t\t\tconnection = this.connectionsProviders[providerName].getConnectionById(id);\n\t\t\t\tif (connection)\n\t\t\t\t{\n\t\t\t\t\treturn [this.connectionsProviders[providerName], connection];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn [undefined, undefined];\n\t}\n\n\tprocessSyncConnection(params)\n\t{\n\t\tfor (let providerName in this.connectionsProviders)\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.connectionsProviders.hasOwnProperty(providerName)\n\t\t\t\t&& this.connectionsProviders[providerName].getWizardSyncMode()\n\t\t\t\t&& providerName === params?.vendorName\n\t\t\t)\n\t\t\t{\n\t\t\t\tif (params.accountName)\n\t\t\t\t{\n\t\t\t\t\tthis.connectionsProviders[providerName].setUserName(params.accountName);\n\t\t\t\t}\n\t\t\t\tthis.connectionsProviders[providerName].setWizardState(params);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\thandlePullEvent(params)\n\t{\n\t\tlet wizardSyncMode = this.isWizardSyncMode();\n\t\tswitch (params.command)\n\t\t{\n\t\t\tcase 'refresh_sync_status':\n\t\t\t\tif (!wizardSyncMode)\n\t\t\t\t{\n\t\t\t\t\tthis.updateSyncStatus(params);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'add_sync_connection':\n\t\t\t\tif (!wizardSyncMode)\n\t\t\t\t{\n\t\t\t\t\tthis.addSyncConnection(params);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'delete_sync_connection':\n\t\t\t\tif (!wizardSyncMode)\n\t\t\t\t{\n\t\t\t\t\tthis.deleteSyncConnection(params);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'process_sync_connection':\n\t\t\t\tif (wizardSyncMode)\n\t\t\t\t{\n\t\t\t\t\tthis.processSyncConnection(params);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetSyncInfo(syncInfo)\n\t{\n\t\tthis.syncInfo = syncInfo;\n\t}\n\n\tsubscribeEventHandlers()\n\t{\n\t\tfor (let providerName in this.connectionsProviders)\n\t\t{\n\t\t\tif (this.connectionsProviders.hasOwnProperty(providerName))\n\t\t\t{\n\t\t\t\tthis.connectionsProviders[providerName].unsubscribeAll('onStartWaitingMode');\n\t\t\t\tthis.connectionsProviders[providerName].unsubscribeAll('onEndWaitingMode');\n\t\t\t\tthis.connectionsProviders[providerName].unsubscribeAll('onCloseSyncWizard');\n\n\t\t\t\tthis.connectionsProviders[providerName].subscribe(\n\t\t\t\t\t'onStartWaitingMode',\n\t\t\t\t\tthis.handleStartWaitingMode.bind(this)\n\t\t\t\t);\n\t\t\t\tthis.connectionsProviders[providerName].subscribe(\n\t\t\t\t\t'onEndWaitingMode',\n\t\t\t\t\tthis.handleEndWaitingMode.bind(this)\n\t\t\t\t);\n\n\t\t\t\tthis.connectionsProviders[providerName].subscribe(\n\t\t\t\t\t'onCloseSyncWizard',\n\t\t\t\t\tthis.handleCloseSyncWizard.bind(this)\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\n\thandleCloseSyncWizard()\n\t{\n\t\tif (this.isSyncInProcess())\n\t\t{\n\t\t\tif (this.syncButton)\n\t\t\t{\n\t\t\t\tthis.syncButton.refresh(this.STATUS_SYNCHRONIZING);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.refreshContentDebounce();\n\t\t}\n\t}\n\n\thandleStartWaitingMode()\n\t{\n\t\tthis.doPeriodicRefresh();\n\t}\n\n\thandleEndWaitingMode()\n\t{\n\t\tthis.stopPeriodicRefresh();\n\t}\n\n\tdoPeriodicRefresh()\n\t{\n\t\tif (!this.hasOpenedWizard())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (Util.documentIsDisplayingNow())\n\t\t{\n\t\t\tthis.refresh()\n\t\t\t\t.then(() => {\n\t\t\t\t\tthis.refreshTimeout = setTimeout(\n\t\t\t\t\t\tthis.doPeriodicRefresh.bind(this),\n\t\t\t\t\t\tthis.WAITING_MODE_PERIODIC_TIMEOUT\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.refreshTimeout = setTimeout(\n\t\t\t\tthis.doPeriodicRefresh.bind(this),\n\t\t\t\tthis.WAITING_MODE_PERIODIC_TIMEOUT\n\t\t\t);\n\t\t}\n\t}\n\n\tstopPeriodicRefresh()\n\t{\n\t\tif (this.refreshTimeout)\n\t\t{\n\t\t\tclearInterval(this.refreshTimeout);\n\t\t\tthis.refreshTimeout = null;\n\t\t}\n\t}\n\n\topenSyncPanel()\n\t{\n\t\tthis.syncButton.handleClick();\n\t}\n\n\tgetSummarySyncStatus()\n\t{\n\t\tlet status = this.STATUS_NOT_CONNECTED;\n\t\tfor (let providerName in this.connectionsProviders)\n\t\t{\n\t\t\tif (this.connectionsProviders.hasOwnProperty(providerName))\n\t\t\t{\n\t\t\t\tif ([this.STATUS_SUCCESS, this.STATUS_FAILED]\n\t\t\t\t\t.includes(this.connectionsProviders[providerName].getStatus()))\n\t\t\t\t{\n\t\t\t\t\tstatus = this.connectionsProviders[providerName].getStatus();\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (status === this.STATUS_NOT_CONNECTED && this.hasRefusedStatus())\n\t\t{\n\t\t\tstatus = this.STATUS_REFUSED;\n\t\t}\n\n\t\treturn status;\n\t}\n\n\tneedToShowGoogleRefusedPopup()\n\t{\n\t\treturn this.syncButton && this.isGoogleApplicationRefused && this.showGoogleApplicationRefused && this.hasRefusedStatus();\n\t}\n\n\thasRefusedStatus()\n\t{\n\t\tfor (const providerName in this.connectionsProviders)\n\t\t{\n\t\t\tif (this.connectionsProviders.hasOwnProperty(providerName))\n\t\t\t{\n\t\t\t\tif (this.connectionsProviders[providerName].getStatus() === this.STATUS_REFUSED)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetGoogleProvider()\n\t{\n\t\tif (!this.googleProvider)\n\t\t{\n\t\t\tthis.googleProvider = GoogleProvider.createInstance({\n\t\t\t\tsyncInfo: this.syncInfo.google || {},\n\t\t\t\tsections: this.sectionsByType.google || {},\n\t\t\t\tsyncLink: this.syncLinks.google || null,\n\t\t\t\tisSetSyncGoogleSettings: this.isSetSyncGoogleSettings,\n\t\t\t\tmainPanel: true,\n\t\t\t\tisGoogleApplicationRefused: this.isGoogleApplicationRefused,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.googleProvider.refresh({\n\t\t\t\tsyncInfo: this.syncInfo.google || {},\n\t\t\t\tsections: this.sectionsByType.google || {},\n\t\t\t\tsyncLink: this.syncLinks.google || null,\n\t\t\t});\n\t\t}\n\n\t\treturn this.googleProvider;\n\t}\n\n\tgetOffice365Provider()\n\t{\n\t\tif (!this.office365Provider)\n\t\t{\n\t\t\tthis.office365Provider = Office365Provider.createInstance({\n\t\t\t\tsyncInfo: this.syncInfo.office365 || {},\n\t\t\t\tsections: this.sectionsByType.office365 || {},\n\t\t\t\tsyncLink: this.syncLinks.office365 || null,\n\t\t\t\tisSetSyncOffice365Settings: this.isSetSyncOffice365Settings,\n\t\t\t\tmainPanel: true,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.office365Provider.refresh({\n\t\t\t\tsyncInfo: this.syncInfo.office365 || {},\n\t\t\t\tsections: this.sectionsByType.office365 || {},\n\t\t\t\tsyncLink: this.syncLinks.office365 || null,\n\t\t\t});\n\t\t}\n\n\t\treturn this.office365Provider;\n\t}\n\n\tgetIcloudProvider()\n\t{\n\t\tif (!this.icloudProvider)\n\t\t{\n\t\t\tthis.icloudProvider = ICloudProvider.createInstance({\n\t\t\t\tsyncInfo: this.syncInfo.icloud || {},\n\t\t\t\tsections: this.sectionsByType.icloud || {},\n\t\t\t\tmainPanel: true,\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.icloudProvider.refresh({\n\t\t\t\tsyncInfo: this.syncInfo.icloud || {},\n\t\t\t\tsections: this.sectionsByType.icloud || {},\n\t\t\t})\n\t\t}\n\n\t\treturn this.icloudProvider;\n\t}\n\n\tgetCaldavProvider(caldavConnections)\n\t{\n\t\treturn CaldavProvider.createInstance({\n\t\t\tstatus: CaldavConnection.calculateStatus(caldavConnections),\n\t\t\tconnected: (caldavConnections.length > 0),\n\t\t\tconnections: caldavConnections,\n\t\t});\n\t}\n\n\tgetIphoneProvider()\n\t{\n\t\treturn IphoneProvider.createInstance({\n\t\t\tsyncInfo: this.syncInfo.iphone,\n\t\t});\n\t}\n\n\tgetAndroidProvider()\n\t{\n\t\treturn AndroidProvider.createInstance({\n\t\t\tsyncInfo: this.syncInfo.android,\n\t\t});\n\t}\n\n\tgetMacProvider()\n\t{\n\t\treturn MacProvider.createInstance({\n\t\t\tsyncInfo: this.syncInfo.mac,\n\t\t\tportalAddress: this.portalAddress,\n\t\t});\n\t}\n\n\tgetYandexProvider(yandexConnections)\n\t{\n\t\treturn YandexProvider.createInstance({\n\t\t\tstatus: CaldavConnection.calculateStatus(yandexConnections),\n\t\t\tconnected: (yandexConnections.length > 0),\n\t\t\tconnections: yandexConnections,\n\t\t});\n\t}\n\n\tgetOutlookProvider()\n\t{\n\t\treturn OutlookProvider.createInstance({\n\t\t\tsyncInfo: this.syncInfo.outlook,\n\t\t\tsections: this.sectionsByType.outlook,\n\t\t\tinfoBySections: this.syncInfo.outlook.infoBySections || {},\n\t\t});\n\t}\n\n\tgetExchangeProvider()\n\t{\n\t\treturn ExchangeProvider.createInstance({\n\t\t\tsyncInfo: this.syncInfo.exchange,\n\t\t\tsections: this.sectionsByType.exchange\n\t\t})\n\t}\n\n\thasOpenedWizard()\n\t{\n\t\tconst sliderList = BX.SidePanel.Instance.getOpenSliders();\n\t\tfor (let i in sliderList)\n\t\t{\n\t\t\tif (\n\t\t\t\tsliderList.hasOwnProperty(i)\n\t\t\t\t&& sliderList[i].getUrl().indexOf(this.WIZARD_SLIDER_PREFIX) !== -1\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n}"],"names":["SyncStatusPopup","EventEmitter","constructor","options","setEventNamespace","connections","withUpdateButton","node","id","isGoogleApplicationRefused","init","createInstance","setPopupContent","createPopup","popup","Popup","className","bindElement","content","container","angle","width","offsetLeft","offsetTop","padding","darkMode","autoHide","zIndexAbsolute","show","Tag","render","forEach","connection","getConnectStatus","syncTime","getFormattedTime","getSyncDate","classStatus","getSyncStatus","classLable","getClassLabel","title","getConnectionName","block","getSyncElement","append","getContentRefreshBlock","IS_RUN_REFRESH","showRefreshStatus","hide","destroy","getContainer","getPopup","date","now","Date","timestamp","Type","isDate","Math","round","getTime","secondsAgo","parseInt","Loc","getMessage","BX","format","util","htmlspecialchars","refresh","setContent","setRefreshStatusBlock","setTimeout","removeRefreshStatusBlock","enableRefreshButton","isElementNode","refreshStatusBlock","remove","refreshButton","disableRefreshButton","footerWrapper","getContentRefreshButton","addEventListener","Dom","addClass","innerText","runRefresh","prepend","getRefreshStatus","emit","getId","_t","SyncButton","BUTTON_SIZE","UI","Button","Size","EXTRA_SMALL","BUTTON_ROUND","connectionsProviders","wrapper","userId","status","buttonEnterTimeout","buttonLeaveTimeout","buttonData","getButtonData","button","text","size","color","iconClass","onclick","handleClick","events","mouseenter","handlerMouseEnter","bind","mouseleave","handlerMouseLeave","renderTo","showGoogleApplicationRefusedPopup","borderRadius","offset","offsetWidth","position","closeIcon","ajax","runAction","showPopup","providersCollection","Object","values","provider","providerConnections","getConnections","length","push","getPopupContainer","e","clearTimeout","hidePopup","setColor","setText","removeClass","window","top","Runtime","loadExtension","then","exports","hasClass","syncPanel","SyncPanel","openSlider","Color","LIGHT_BORDER","PRIMARY","getSyncPanel","setConnectionProviders","isConnectionItemProperty","Symbol","for","ConnectionItem","syncDate","connectionName","connected","addParams","type","userName","isConnectionItem","target","isObject","getStatus","getSections","sections","getConnectionAccountName","getType","setId","setStatus","setUserName","setConnected","setSyncDate","ConnectionProvider","MENU_WIDTH","MENU_PADDING","MENU_INDEX","SLIDER_WIDTH","STATUS_SYNCHRONIZING","STATUS_SUCCESS","STATUS_FAILED","STATUS_REFUSED","STATUS_PENDING","STATUS_NOT_CONNECTED","ERROR_CODE","STATUS_LIST","WAITING_MODE_MAX_TIME","mainPanel","pendingStatus","gridTitle","gridColor","gridIcon","viewClassification","templateClass","isActive","hasMenu","setAdditionalParams","additionalParams","isNaN","getConnection","setSections","includes","getGridTitle","getGridColor","getGridIcon","clearConnections","setConnections","setInterfaceUnit","interfaceUnit","getInterfaceUnit","getViewClassification","getWizardSyncMode","getTemplateClass","SidePanel","Instance","open","sliderId","contentCallback","slider","Promise","resolve","reject","data","cacheable","allowChangeHistory","onLoad","event","itemSlider","getSlider","closeSlider","close","openInfoConnectionSlider","getClassTemplateItem","getInfoConnectionContent","openActiveConnectionSlider","itemInterface","getSectionsForGoogle","openActiveConnectionSliderVendor","getSectionsForIcloud","getSectionsForOffice365","getActiveConnectionContent","itemClass","Reflection","getClass","isFunction","getConnectionById","result","filter","getSyncPanelTitle","getSyncPanelLogo","setWizardSyncMode","value","wizardSyncMode","setWizardState","stateData","wizard","getActiveWizard","setErrorState","handleUpdateState","setActiveWizard","activeWizard","subscribe","handleCreatedConnection","handleCloseWizard","startWaitingMode","endWaitingMode","waitingModeReserveTimeout","reload","setSyncStatus","accountType","calendarContext","Util","getCalendarContext","syncInterface","refreshDebounce","isSyncFinished","getOpenSliders","getUrl","unsubscribeAll","syncInfo","syncLink","syncOffset","GoogleProvider","interfaceClassName","isSetSyncGoogleSettings","getSyncLink","hasSetSyncGoogleSettings","saveConnection","response","vendorName","accountName","googleApiStatus","googleCalendarPrimaryId","stage","Event","BaseEvent","Office365Provider","isSetSyncOffice365Settings","hasSetSyncOffice365Settings","connectionId","errors","ICloudProvider","AndroidProvider","CaldavConnection","calculateStatus","key","isFailedConnections","showMenu","menu","menuItems","getMenuItems","getMenuItemConnect","getMenu","addMenuHandler","getMenuContainer","item","delimiter","Main","Menu","items","closeByEsc","connectionsSyncInfo","server","CaldavProvider","ExchangeProvider","IphoneProvider","MacProvider","portalAddress","getPortalAddress","OutlookProvider","infoBySections","connectToOutlook","section","url","eval","YandexProvider","Manager","WIZARD_SYNC_MODE","WAITING_MODE_PERIODIC_TIMEOUT","REFRESH_DELAY","REFRESH_CONTENT_DELAY","WIZARD_SLIDER_PREFIX","calendar","config","showGoogleApplicationRefused","setSyncInfo","syncLinks","isRuZone","calendarInstance","debounce","refreshContentDebounce","refreshContent","subscribeOnEvent","reDrawCalendarGrid","location","showSyncButton","syncButton","needToShowGoogleRefusedPopup","yandexConnections","caldavConnections","sectionsByType","sortSections","hasOwnProperty","caldav","google","getGoogleProvider","icloud","getIcloudProvider","office365","getOffice365Provider","getCaldavProvider","iphone","getIphoneProvider","android","getAndroidProvider","mac","getMacProvider","yandex","getYandexProvider","browser","IsMac","outlook","getOutlookProvider","exchange","getExchangeProvider","getSummarySyncStatus","subscribeEventHandlers","setSyncMode","syncMode","getSyncMode","isWizardSyncMode","providerName","isSyncInProcess","exchangeSections","googleSections","icloudSections","outlookSections","office365Sections","belongsToView","OUTLOOK_JS","connectURL","name","requestUid","registerRequestId","activePopup","getTarget","refreshCalendarGrid","refreshActivePopup","refreshOpenSliders","openSliders","refreshMainSlider","indexOf","refreshConnectionSlider","updatedConnection","undefined","getData","get","itemConnections","reloadDebounce","updateSyncStatus","params","addSyncConnection","Calendar","checkRequestId","deleteSyncConnection","getProviderById","processSyncConnection","handlePullEvent","command","handleStartWaitingMode","handleEndWaitingMode","handleCloseSyncWizard","doPeriodicRefresh","stopPeriodicRefresh","hasOpenedWizard","documentIsDisplayingNow","refreshTimeout","clearInterval","openSyncPanel","hasRefusedStatus","googleProvider","office365Provider","icloudProvider","sliderList","i"],"mappings":"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"}