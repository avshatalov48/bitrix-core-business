{"version":3,"file":"notification-manager.bundle.map.js","names":["this","BX","UI","exports","pull_client","main_core_events","main_core","ui_notification","ui_buttons","Uuid","static","replace","c","r","Math","random","v","toString","Notification","constructor","options","setUid","id","setCategory","category","setTitle","title","setText","text","setIcon","icon","setInputPlaceholderText","inputPlaceholderText","createButtons","button1Text","button2Text","SEPARATOR","getV4","uid","split","pop","join","Type","isStringFilled","Error","encodeIdToUid","getUid","getId","decodeUidToId","getCategory","getTitle","getText","getIcon","isString","getInputPlaceholderText","setButton1Text","Loc","getMessage","setButton2Text","getButton1Text","getButton2Text","PushNotification","PullHandler","getModuleId","handleNotify","params","extra","command","notification","notificationOptions","pushNotification","notifier","sendNotification","DesktopHelper","isBitrixDesktop","geApiVersion","navigator","userAgent","toLowerCase","includes","BXDesktopSystem","Number","GetProperty","desktop","apiReady","Browser","isMac","isLinux","isWin","BXIM","desktopStatus","Promise","resolve","turnedOnCallback","turnedOffCallback","desktopUtils","runningCheck","BrowserHelper","isChrome","isFirefox","isSafari","window","permission","isSafariBased","NotificationEvent","BaseEvent","CLICK","ACTION","CLOSE","eventType","getTypes","NotificationAction","BUTTON_1","BUTTON_2","USER_INPUT","action","NotificationCloseReason","CLOSED_BY_USER","EXPIRED","closeReason","BaseProvider","EventEmitter","super","eventNamespace","setEventNamespace","convertNotificationToNative","nativeNotification","canSendNotification","notify","notificationClick","eventOptions","data","emit","notificationAction","userInput","isSupported","console","warn","notificationClose","reason","NOTIFICATION_LIFETIME","DesktopProvider","getEventNamespace","registerEvents","isMainTab","notificationUid","NotificationShow","addEventListener","event","onNotificationClick","onNotificationAction","onNotificationClose","detail","SetActiveTab","MacProvider","NotificationCreate","NotificationAddText","NotificationAddImage","NotificationAddInput","NotificationAddAction","NotificationSetExpiration","addTextToNotification","trim","languageSafeRowLength","length","space","firstRow","words","shift","secondRow","WindowsProvider","LinuxProvider","BrowserProvider","body","tag","renotify","onclick","preventDefault","focus","isRunningOnAnyDevice","checkRunningOnThisDevice","then","isRunningOnThisDevice","BrowserNotificationAction","Action","balloon","setButtonClass","buttonType","getContainer","container","buttonOptions","isFunction","events","click","button","stopPropagation","Button","removeClass","addClass","BASE_BUTTON_CLASS","getButtonClass","TYPE_ACCEPT","getButtonTypes","buttonClass","isSupportedButtonType","_","t","_t","_t2","_t3","_t4","_t5","_t6","BrowserNotification","Balloon","userInputContainerNode","userInputNode","setActions","actions","isArray","forEach","push","onMouseEnter","handleMouseEnter","onMouseLeave","handleMouseLeave","Tag","render","animationClassName","contentWidth","isNumber","getWidth","handleContentClick","bind","handleContextClick","getIconNode","getTitleNode","getTextNode","getUserInputContainerNode","getActionsNode","getCloseButtonNode","getData","Dom","create","attrs","className","outerHTML","children","style","height","width","src","getActions","map","isArrayFilled","onInputReplyClick","Text","encode","placeholderText","toggleUserInputContainerNode","handleUserInputEnter","handleUserInputClick","document","getElementById","replyToggleButton","showUserInput","setAutoHide","deactivateAutoHide","display","classList","add","disabled","activateAutoHide","remove","isCloseButtonVisible","handleCloseBtnClick","closedByUserHandler","clickHandler","close","contextClickHandler","userInputHandler","target","value","keyCode","KEY_CODE","ENTER","ESC","BrowserPageProvider","broadcastChannel","setBroadcast","BroadcastChannel","BROADCAST_CHANNEL","onmessage","handleMessageEvent","postMessageToBroadcast","MESSAGE_TYPE","closeAllNotifications","balloonOptions","type","position","autoHideDelay","onClose","onBalloonClose","showButton1","showButton2","action1Options","action2Options","getBalloon","closeNotification","postMessage","findBalloonById","balloonsKeys","Object","keys","Center","balloons","startsWith","_BX$UI$Notification$C","getDefaultStack","clear","_getBrowserPageProvider","babelHelpers","classPrivateFieldLooseKey","Notifier","_BX$PULL","defineProperty","_getBrowserPageProvider2","provider","createProvider","PULL","subscribe","isSupportedDesktopApp","PROVIDER_OPTIONS","isWindows","isSupportedBrowser","isNativeNotificationAllowed","classPrivateFieldLooseBase","notifyViaBrowserProvider","notifyViaDesktopProvider","eventName","handler","browserProvider","EVENT_NAMESPACE","NotificationManager","Event"],"sources":["notification-manager.bundle.js"],"mappings":"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"}