{"version":3,"file":"copilot-answer.bundle.js","sources":["../src/copilot-answer.js"],"sourcesContent":["import 'ui.notification';\n\nimport { Parser } from 'im.v2.lib.parser';\nimport { SendingService } from 'im.v2.provider.service';\nimport { Loc, Type } from 'main.core';\n\nimport { DefaultMessageContent, AuthorTitle, MessageStatus } from 'im.v2.component.message.elements';\nimport { BaseMessage } from 'im.v2.component.message.base';\n\nimport './css/copilot-answer.css';\n\nimport type { ImModelMessage } from 'im.v2.model';\n\n// @vue/component\nexport const CopilotMessage = {\n\tname: 'CopilotMessage',\n\tcomponents:\n\t{\n\t\tAuthorTitle,\n\t\tBaseMessage,\n\t\tDefaultMessageContent,\n\t\tMessageStatus,\n\t},\n\tprops:\n\t{\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\twithTitle: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tmessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\tformattedText(): string\n\t\t{\n\t\t\treturn Parser.decodeMessage(this.item);\n\t\t},\n\t\tcanSetReactions(): boolean\n\t\t{\n\t\t\treturn Type.isNumber(this.message.id);\n\t\t},\n\t\tisReply(): boolean\n\t\t{\n\t\t\treturn this.message.replyId !== 0;\n\t\t},\n\t\tisError(): boolean\n\t\t{\n\t\t\treturn this.message.componentParams?.copilotError === true;\n\t\t},\n\t\thasMore(): boolean\n\t\t{\n\t\t\treturn this.message.componentParams?.copilotHasMore === true;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonCopyClick()\n\t\t{\n\t\t\tif (BX.clipboard?.copy(this.message.text))\n\t\t\t{\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('IM_MESSAGE_COPILOT_ANSWER_ACTION_COPY_SUCCESS'),\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonContinueClick()\n\t\t{\n\t\t\tthis.getSendingService().sendMessage({\n\t\t\t\ttext: this.loc('IM_MESSAGE_COPILOT_ANSWER_CONTINUE_TEXT'),\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t\tgetSendingService(): SendingService\n\t\t{\n\t\t\tif (!this.sendingService)\n\t\t\t{\n\t\t\t\tthis.sendingService = SendingService.getInstance();\n\t\t\t}\n\n\t\t\treturn this.sendingService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseMessage :item=\"item\" :dialogId=\"dialogId\" class=\"bx-im-message-copilot-base-message__container\">\n\t\t\t<div class=\"bx-im-message-default__container bx-im-message-copilot-answer__container\" :class=\"{'--error': isError}\">\n\t\t\t\t<AuthorTitle v-if=\"withTitle\" :item=\"item\" />\n\t\t\t\t<div class=\"bx-im-message-default-content__container bx-im-message-default-content__scope\">\n\t\t\t\t\t<div class=\"bx-im-message-default-content__text\" v-html=\"formattedText\"></div>\n\t\t\t\t\t<div class=\"bx-im-message-default-content__bottom-panel\">\n\t\t\t\t\t\t<div v-if=\"!isError\" class=\"bx-im-message-copilot-answer__actions\">\n\t\t\t\t\t\t\t<div class=\"bx-im-message-copilot-answer__action\" @click=\"onCopyClick\">\n\t\t\t\t\t\t\t\t<div class=\"bx-im-message-copilot-answer__action_icon --copy\"></div>\n\t\t\t\t\t\t\t\t<div class=\"bx-im-message-copilot-answer__action_text\">\n\t\t\t\t\t\t\t\t\t{{ loc('IM_MESSAGE_COPILOT_ANSWER_ACTION_COPY') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"hasMore\" class=\"bx-im-message-copilot-answer__action\" @click=\"onContinueClick\">\n\t\t\t\t\t\t\t\t<div class=\"bx-im-message-copilot-answer__action_icon --continue\"></div>\n\t\t\t\t\t\t\t\t<div class=\"bx-im-message-copilot-answer__action_text\">\n\t\t\t\t\t\t\t\t\t{{ loc('IM_MESSAGE_COPILOT_ANSWER_ACTION_CONTINUE') }}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"bx-im-message-default-content__status-container\">\n\t\t\t\t\t\t\t<MessageStatus :item=\"message\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</BaseMessage>\n\t`,\n};\n"],"names":["CopilotMessage","name","components","AuthorTitle","BaseMessage","DefaultMessageContent","MessageStatus","props","item","type","Object","required","dialogId","String","withTitle","Boolean","default","computed","message","formattedText","Parser","decodeMessage","canSetReactions","Type","isNumber","id","isReply","replyId","isError","componentParams","copilotError","hasMore","copilotHasMore","methods","onCopyClick","BX","clipboard","copy","text","UI","Notification","Center","notify","content","Loc","getMessage","onContinueClick","getSendingService","sendMessage","loc","sendingService","SendingService","getInstance","phraseCode","$Bitrix","template"],"mappings":";;;;;;;;CAaA;AACA,OAAaA,cAAc,GAAG;GAC7BC,IAAI,EAAE,gBAAgB;GACtBC,UAAU,EACV;kBACCC,4CAAW;kBACXC,wCAAW;4BACXC,sDAAqB;oBACrBC;IACA;GACDC,KAAK,EACL;KACCC,IAAI,EAAE;OACLC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDC,QAAQ,EAAE;OACTH,IAAI,EAAEI,MAAM;OACZF,QAAQ,EAAE;MACV;KACDG,SAAS,EAAE;OACVL,IAAI,EAAEM,OAAO;OACbC,OAAO,EAAE;;IAEV;GACDC,QAAQ,EACR;KACCC,OAAO,GACP;OACC,OAAO,IAAI,CAACV,IAAI;MAChB;KACDW,aAAa,GACb;OACC,OAAOC,uBAAM,CAACC,aAAa,CAAC,IAAI,CAACb,IAAI,CAAC;MACtC;KACDc,eAAe,GACf;OACC,OAAOC,cAAI,CAACC,QAAQ,CAAC,IAAI,CAACN,OAAO,CAACO,EAAE,CAAC;MACrC;KACDC,OAAO,GACP;OACC,OAAO,IAAI,CAACR,OAAO,CAACS,OAAO,KAAK,CAAC;MACjC;KACDC,OAAO,GACP;OAAA;OACC,OAAO,8BAAI,CAACV,OAAO,CAACW,eAAe,qBAA5B,sBAA8BC,YAAY,MAAK,IAAI;MAC1D;KACDC,OAAO,GACP;OAAA;OACC,OAAO,+BAAI,CAACb,OAAO,CAACW,eAAe,qBAA5B,uBAA8BG,cAAc,MAAK,IAAI;;IAE7D;GACDC,OAAO,EACP;KACCC,WAAW,GACX;OAAA;OACC,qBAAIC,EAAE,CAACC,SAAS,aAAZ,cAAcC,IAAI,CAAC,IAAI,CAACnB,OAAO,CAACoB,IAAI,CAAC,EACzC;SACCH,EAAE,CAACI,EAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;WAChCC,OAAO,EAAEC,aAAG,CAACC,UAAU,CAAC,+CAA+C;UACvE,CAAC;;MAEH;KACDC,eAAe,GACf;OACC,IAAI,CAACC,iBAAiB,EAAE,CAACC,WAAW,CAAC;SACpCV,IAAI,EAAE,IAAI,CAACW,GAAG,CAAC,yCAAyC,CAAC;SACzDrC,QAAQ,EAAE,IAAI,CAACA;QACf,CAAC;MACF;KACDmC,iBAAiB,GACjB;OACC,IAAI,CAAC,IAAI,CAACG,cAAc,EACxB;SACC,IAAI,CAACA,cAAc,GAAGC,qCAAc,CAACC,WAAW,EAAE;;OAGnD,OAAO,IAAI,CAACF,cAAc;MAC1B;KACDD,GAAG,CAACI,UAAkB,EACtB;OACC,OAAO,IAAI,CAACC,OAAO,CAACV,GAAG,CAACC,UAAU,CAACQ,UAAU,CAAC;;IAE/C;GACDE,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA6BZ,CAAC;;;;;;;;"}