this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,s,t,i,a,r){"use strict";const o={accessDenied:"ACCESS_DENIED",chatNotFound:"CHAT_NOT_FOUND",messageNotFound:"MESSAGE_NOT_FOUND",messageAccessDenied:"MESSAGE_ACCESS_DENIED",messageAccessDeniedByTariff:"MESSAGE_ACCESS_DENIED_BY_TARIFF"};const c={async checkMessageAccess(e){const t={data:{messageId:e}};try{await s.runAction(a.RestMethod.imV2AccessCheck,t)}catch(e){return l(e)}return Promise.resolve({hasAccess:true})}};const l=e=>{const[s]=e;const t=Object.values(o);if(!t.includes(s.code)){console.error("AccessService: error checking access",s.code);return{hasAccess:true}}return{hasAccess:false,errorCode:s.code}};let n=e=>e,b,d;var p=babelHelpers.classPrivateFieldLooseKey("popupInstance");var v=babelHelpers.classPrivateFieldLooseKey("cache");var u=babelHelpers.classPrivateFieldLooseKey("getPopupConfig");var h=babelHelpers.classPrivateFieldLooseKey("getContainer");var g=babelHelpers.classPrivateFieldLooseKey("getButtonContainer");var y=babelHelpers.classPrivateFieldLooseKey("bindEvents");var m=babelHelpers.classPrivateFieldLooseKey("unbindEvents");class P{constructor(){Object.defineProperty(this,m,{value:M});Object.defineProperty(this,y,{value:H});Object.defineProperty(this,g,{value:L});Object.defineProperty(this,h,{value:B});Object.defineProperty(this,u,{value:F});Object.defineProperty(this,p,{writable:true,value:void 0});Object.defineProperty(this,v,{writable:true,value:new t.Cache.MemoryCache});babelHelpers.classPrivateFieldLooseBase(this,p)[p]=new i.Popup(babelHelpers.classPrivateFieldLooseBase(this,u)[u]());babelHelpers.classPrivateFieldLooseBase(this,y)[y]()}show(){babelHelpers.classPrivateFieldLooseBase(this,p)[p].show()}close(){babelHelpers.classPrivateFieldLooseBase(this,p)[p].destroy()}}function F(){return{id:a.PopupType.messageHistoryLimit,className:"bx-im-messenger__scope",closeIcon:false,autoHide:false,closeByEsc:false,animation:"fading",overlay:true,padding:0,content:babelHelpers.classPrivateFieldLooseBase(this,h)[h](),events:{onPopupDestroy:()=>{babelHelpers.classPrivateFieldLooseBase(this,m)[m]()}}}}function B(){return babelHelpers.classPrivateFieldLooseBase(this,v)[v].remember("",(()=>{const e=t.Tag.render(b||(b=n`
				<div class="bx-im-history-limit-popup__container">
					<div class="bx-im-history-limit-popup__image"></div>
					<div class="bx-im-history-limit-popup__title">
						${0}
					</div>
					<div class="bx-im-history-limit-popup__subtitle">
						${0}
					</div>
				</div>
			`),r.FeatureManager.chatHistory.getLimitTitle(),r.FeatureManager.chatHistory.getLimitSubtitle());t.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,g)[g](),e);return e}))}function L(){return babelHelpers.classPrivateFieldLooseBase(this,v)[v].remember("",(()=>t.Tag.render(d||(d=n`
				<div class="bx-im-history-limit-popup__button">
					${0}
				</div>
			`),r.FeatureManager.chatHistory.getLearnMoreText())))}function H(){t.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,g)[g](),"click",(()=>{r.FeatureManager.chatHistory.openFeatureSlider();this.close()}))}function M(){t.Event.unbindAll(babelHelpers.classPrivateFieldLooseBase(this,g)[g](),"click")}const _={checkMessageAccess(e){return c.checkMessageAccess(e)},showHistoryLimitPopup(){const e=new P;e.show()}};e.AccessManager=_;e.AccessErrorCode=o})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Lib,BX,BX.Main,BX.Messenger.v2.Const,BX.Messenger.v2.Lib);
//# sourceMappingURL=access.bundle.map.js