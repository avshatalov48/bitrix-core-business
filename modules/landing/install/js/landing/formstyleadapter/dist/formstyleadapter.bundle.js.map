{"version":3,"file":"formstyleadapter.bundle.js","sources":["../src/internal/themes-map.js","../src/formstyleadapter.js"],"sourcesContent":["const themesMap = new Map();\nthemesMap.set(\n\t'business-light',\n\t{\n\t\ttheme: 'business-light',\n\t\tdark: false,\n\t\tstyle: '',\n\t\tcolor: {\n\t\t\tprimary: '#0f58d0ff',\n\t\t\tprimaryText: '#ffffffff',\n\t\t\tbackground: '#ffffffff',\n\t\t\ttext: '#000000ff',\n\t\t\tfieldBackground: '#00000011',\n\t\t\tfieldFocusBackground: '#ffffffff',\n\t\t\tfieldBorder: '#00000016',\n\t\t},\n\t\tshadow: true,\n\t\tfont: {\n\t\t\turi: '',\n\t\t\tfamily: '',\n\t\t},\n\t\tborder: {\n\t\t\tleft: false,\n\t\t\ttop: false,\n\t\t\tbottom: true,\n\t\t\tright: false,\n\t\t},\n\t},\n);\n\nthemesMap.set(\n\t'business-dark',\n\t{\n\t\ttheme: 'business-dark',\n\t\tdark: true,\n\t\tstyle: '',\n\t\tcolor: {\n\t\t\tprimary: '#0f58d0ff',\n\t\t\tprimaryText: '#ffffffff',\n\t\t\tbackground: '#282d30ff',\n\t\t\ttext: '#ffffffff',\n\t\t\tfieldBackground: '#ffffff11',\n\t\t\tfieldFocusBackground: '#00000028',\n\t\t\tfieldBorder: '#ffffff16',\n\t\t},\n\t\tshadow: true,\n\t\tfont: {\n\t\t\turi: '',\n\t\t\tfamily: '',\n\t\t},\n\t\tborder: {\n\t\t\tleft: false,\n\t\t\ttop: false,\n\t\t\tbottom: true,\n\t\t\tright: false,\n\t\t},\n\t},\n);\n\nthemesMap.set(\n\t'modern-light',\n\t{\n\t\ttheme: 'modern-light',\n\t\tdark: false,\n\t\tstyle: 'modern',\n\t\tcolor: {\n\t\t\tprimary: '#ffd110ff',\n\t\t\tprimaryText: '#000000ff',\n\t\t\tbackground: '#ffffffff',\n\t\t\ttext: '#000000ff',\n\t\t\tfieldBackground: '#00000000',\n\t\t\tfieldFocusBackground: '#00000000',\n\t\t\tfieldBorder: '#00000011',\n\t\t},\n\t\tshadow: true,\n\t\tfont: {\n\t\t\turi: 'https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap&subset=cyrillic',\n\t\t\tfamily: 'Open Sans',\n\t\t},\n\t\tborder: {\n\t\t\tleft: false,\n\t\t\ttop: false,\n\t\t\tbottom: true,\n\t\t\tright: false,\n\t\t},\n\t},\n);\n\nthemesMap.set(\n\t'modern-dark',\n\t{\n\t\ttheme: 'modern-dark',\n\t\tdark: true,\n\t\tstyle: 'modern',\n\t\tcolor: {\n\t\t\tprimary: '#ffd110ff',\n\t\t\tprimaryText: '#000000ff',\n\t\t\tbackground: '#282d30ff',\n\t\t\ttext: '#ffffffff',\n\t\t\tfieldBackground: '#00000000',\n\t\t\tfieldFocusBackground: '#00000000',\n\t\t\tfieldBorder: '#ffffff11',\n\t\t},\n\t\tshadow: true,\n\t\tfont: {\n\t\t\turi: 'https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap&subset=cyrillic',\n\t\t\tfamily: 'Open Sans',\n\t\t},\n\t\tborder: {\n\t\t\tleft: false,\n\t\t\ttop: false,\n\t\t\tbottom: true,\n\t\t\tright: false,\n\t\t},\n\t},\n);\n\nthemesMap.set(\n\t'classic-light',\n\t{\n\t\ttheme: 'classic-light',\n\t\tdark: false,\n\t\tstyle: '',\n\t\tcolor: {\n\t\t\tprimary: '#000000ff',\n\t\t\tprimaryText: '#ffffffff',\n\t\t\tbackground: '#ffffffff',\n\t\t\ttext: '#000000ff',\n\t\t\tfieldBackground: '#00000011',\n\t\t\tfieldFocusBackground: '#0000000a',\n\t\t\tfieldBorder: '#00000011',\n\t\t},\n\t\tshadow: true,\n\t\tfont: {\n\t\t\turi: 'https://fonts.googleapis.com/css2?family=PT+Serif:wght@400;700&display=swap&subset=cyrillic',\n\t\t\tfamily: 'PT Serif',\n\t\t},\n\t\tborder: {\n\t\t\tleft: false,\n\t\t\ttop: false,\n\t\t\tbottom: true,\n\t\t\tright: false,\n\t\t},\n\t},\n);\n\nthemesMap.set(\n\t'classic-dark',\n\t{\n\t\ttheme: 'classic-dark',\n\t\tdark: true,\n\t\tstyle: '',\n\t\tcolor: {\n\t\t\tprimary: '#ffffffff',\n\t\t\tprimaryText: '#000000ff',\n\t\t\tbackground: '#000000ff',\n\t\t\ttext: '#ffffffff',\n\t\t\tfieldBackground: '#ffffff11',\n\t\t\tfieldFocusBackground: '#ffffff0a',\n\t\t\tfieldBorder: '#ffffff11',\n\t\t},\n\t\tshadow: true,\n\t\tfont: {\n\t\t\turi: 'https://fonts.googleapis.com/css2?family=PT+Serif:wght@400;700&display=swap&subset=cyrillic',\n\t\t\tfamily: 'PT Serif',\n\t\t},\n\t\tborder: {\n\t\t\tleft: false,\n\t\t\ttop: false,\n\t\t\tbottom: true,\n\t\t\tright: false,\n\t\t},\n\t},\n);\n\nthemesMap.set(\n\t'fun-light',\n\t{\n\t\ttheme: 'fun-light',\n\t\tdark: false,\n\t\tstyle: '',\n\t\tcolor: {\n\t\t\tprimary: '#f09b22ff',\n\t\t\tprimaryText: '#000000ff',\n\t\t\tbackground: '#ffffffff',\n\t\t\ttext: '#000000ff',\n\t\t\tfieldBackground: '#f09b2211',\n\t\t\tfieldFocusBackground: '#0000000a',\n\t\t\tfieldBorder: '#00000011',\n\t\t},\n\t\tshadow: true,\n\t\tfont: {\n\t\t\turi: 'https://fonts.googleapis.com/css2?family=Pangolin&display=swap&subset=cyrillic',\n\t\t\tfamily: 'Pangolin',\n\t\t},\n\t\tborder: {\n\t\t\tleft: false,\n\t\t\ttop: false,\n\t\t\tbottom: true,\n\t\t\tright: false,\n\t\t},\n\t},\n);\n\nthemesMap.set(\n\t'fun-dark',\n\t{\n\t\ttheme: 'fun-dark',\n\t\tdark: true,\n\t\tstyle: '',\n\t\tcolor: {\n\t\t\tprimary: '#f09b22ff',\n\t\t\tprimaryText: '#000000ff',\n\t\t\tbackground: '#221400ff',\n\t\t\ttext: '#ffffffff',\n\t\t\tfieldBackground: '#f09b2211',\n\t\t\tfieldFocusBackground: '#ffffff0a',\n\t\t\tfieldBorder: '#f09b220a',\n\t\t},\n\t\tshadow: true,\n\t\tfont: {\n\t\t\turi: 'https://fonts.googleapis.com/css2?family=Pangolin&display=swap&subset=cyrillic',\n\t\t\tfamily: 'Pangolin',\n\t\t},\n\t\tborder: {left: false, top: false, bottom: true, right: false},\n\t},\n);\n\nthemesMap.set(\n\t'pixel-light',\n\t{\n\t\ttheme: 'pixel-light',\n\t\tdark: true,\n\t\tstyle: '',\n\t\tcolor: {\n\t\t\tprimary: '#00a74cff',\n\t\t\tprimaryText: '#ffffffff',\n\t\t\tbackground: '#282d30ff',\n\t\t\ttext: '#90ee90ff',\n\t\t\tfieldBackground: '#ffffff11',\n\t\t\tfieldFocusBackground: '#00000028',\n\t\t\tfieldBorder: '#ffffff16',\n\t\t},\n\t\tshadow: true,\n\t\tfont: {\n\t\t\turi: 'https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap&subset=cyrillic',\n\t\t\tfamily: 'Press Start 2P',\n\t\t},\n\t\tborder: {left: false, top: false, bottom: true, right: false},\n\t},\n);\n\nthemesMap.set(\n\t'pixel-dark',\n\t{\n\t\t...themesMap.get('pixel-light'),\n\t\ttheme: 'pixel-dark',\n\t},\n);\n\nexport default themesMap;","import {Cache, Dom, Reflection, Runtime, Text, Type} from 'main.core';\nimport {BaseEvent, EventEmitter} from 'main.core.events';\nimport {StyleForm} from 'landing.ui.form.styleform';\nimport {Loc} from 'landing.loc';\nimport {ColorPickerField} from 'landing.ui.field.colorpickerfield';\nimport {Backend} from 'landing.backend';\nimport {Env} from 'landing.env';\nimport {ColorField} from 'landing.ui.field.color';\nimport {PageObject} from 'landing.pageobject';\nimport {FormSettingsPanel} from 'landing.ui.panel.formsettingspanel';\n\nimport themesMap from './internal/themes-map';\n\n/**\n * @memberOf BX.Landing\n */\nexport class FormStyleAdapter extends EventEmitter\n{\n\tconstructor(options)\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Landing.FormStyleAdapter');\n\t\tthis.options = {...options};\n\t\tthis.cache = new Cache.MemoryCache();\n\n\t\tthis.onDebouncedFormChange = Runtime.debounce(this.onDebouncedFormChange, 500);\n\t}\n\n\tsetFormOptions(options)\n\t{\n\t\tthis.cache.set('formOptions', {...options});\n\t}\n\n\tgetFormOptions()\n\t{\n\t\treturn this.cache.get('formOptions');\n\t}\n\n\tload(): Promise<FormStyleAdapter>\n\t{\n\t\tif (Text.capitalize(Env.getInstance().getOptions().params.type) === 'SMN')\n\t\t{\n\t\t\tthis.setFormOptions(\n\t\t\t\t{data: {design: Runtime.clone(this.getCrmForm().design)}},\n\t\t\t);\n\n\t\t\treturn Promise.resolve(this);\n\t\t}\n\n\t\treturn Runtime\n\t\t\t.loadExtension('crm.form.client')\n\t\t\t.then(({FormClient}) => {\n\t\t\t\tif (FormClient)\n\t\t\t\t{\n\t\t\t\t\treturn FormClient\n\t\t\t\t\t\t.getInstance()\n\t\t\t\t\t\t.getOptions(this.options.formId)\n\t\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\t\tthis.setFormOptions(\n\t\t\t\t\t\t\t\tRuntime.merge(\n\t\t\t\t\t\t\t\t\tRuntime.clone(result),\n\t\t\t\t\t\t\t\t\t{data: {design: Runtime.clone(this.getCrmForm().design)}},\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\treturn this;\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t});\n\t}\n\n\tgetThemeField(): BX.Landing.UI.Field.Dropdown\n\t{\n\t\treturn this.cache.remember('themeField', () => {\n\t\t\tconst {theme} = this.getFormOptions().data.design;\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\treturn new rootWindow.BX.Landing.UI.Field.Dropdown({\n\t\t\t\tselector: 'theme',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_THEME_FIELD_TITLE'),\n\t\t\t\tcontent: Type.isString(theme) ? theme.split('-')[0] : '',\n\t\t\t\tonChange: this.onThemeChange.bind(this),\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_THEME_FIELD_ITEM_BUSINESS'),\n\t\t\t\t\t\tvalue: 'business',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_THEME_FIELD_ITEM_MODERN'),\n\t\t\t\t\t\tvalue: 'modern',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_THEME_FIELD_ITEM_CLASSIC'),\n\t\t\t\t\t\tvalue: 'classic',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_THEME_FIELD_ITEM_FUN'),\n\t\t\t\t\t\tvalue: 'fun',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_THEME_FIELD_ITEM_PIXEL'),\n\t\t\t\t\t\tvalue: 'pixel',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetDarkField(): BX.Landing.UI.Field.Dropdown\n\t{\n\t\treturn this.cache.remember('darkField', () => {\n\t\t\tconst {theme} = this.getFormOptions().data.design;\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\treturn new rootWindow.BX.Landing.UI.Field.Dropdown({\n\t\t\t\tselector: 'dark',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_DARK_FIELD_TITLE'),\n\t\t\t\tcontent: Type.isString(theme) ? theme.split('-')[1] : '',\n\t\t\t\tonChange: this.onThemeChange.bind(this),\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_DARK_FIELD_ITEM_LIGHT'),\n\t\t\t\t\t\tvalue: 'light',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_DARK_FIELD_ITEM_DARK'),\n\t\t\t\t\t\tvalue: 'dark',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tonThemeChange()\n\t{\n\t\tconst themeId = this.getStyleForm().serialize().theme;\n\t\tconst theme = themesMap.get(themeId);\n\n\t\tif (theme)\n\t\t{\n\t\t\tif (Type.isPlainObject(theme.color))\n\t\t\t{\n\t\t\t\tthis.getPrimaryColorField().setValue({\n\t\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(theme.color.primary),\n\t\t\t\t});\n\t\t\t\tthis.getPrimaryTextColorField().setValue({\n\t\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(theme.color.primaryText),\n\t\t\t\t});\n\t\t\t\tthis.getBackgroundColorField().setValue({\n\t\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(theme.color.background),\n\t\t\t\t});\n\t\t\t\tthis.getTextColorField().setValue({\n\t\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(theme.color.text),\n\t\t\t\t});\n\t\t\t\tthis.getFieldBackgroundColorField().setValue({\n\t\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(theme.color.fieldBackground),\n\t\t\t\t});\n\t\t\t\tthis.getFieldFocusBackgroundColorField().setValue({\n\t\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(theme.color.fieldFocusBackground),\n\t\t\t\t});\n\t\t\t\tthis.getFieldBorderColorField().setValue({\n\t\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(theme.color.fieldBorder),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.getStyleField().setValue(theme.style);\n\n\t\t\tif (Type.isBoolean(theme.shadow))\n\t\t\t{\n\t\t\t\tthis.getShadowField().setValue(theme.shadow);\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(theme.font))\n\t\t\t{\n\t\t\t\tconst font = {...theme.font};\n\t\t\t\tif (!Type.isStringFilled(font.family))\n\t\t\t\t{\n\t\t\t\t\tfont.family = Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_FONT_DEFAULT');\n\t\t\t\t}\n\n\t\t\t\tthis.getFontField().setValue(font);\n\t\t\t}\n\n\t\t\tif (Type.isPlainObject(theme.border))\n\t\t\t{\n\t\t\t\tconst borders = Object.entries(theme.border).reduce((acc, [key, value]) => {\n\t\t\t\t\tif (value)\n\t\t\t\t\t{\n\t\t\t\t\t\tacc.push(key);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn acc;\n\t\t\t\t}, []);\n\n\t\t\t\tthis.getBorderField().setValue(borders);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetShadowField(): BX.Landing.UI.Field.Dropdown\n\t{\n\t\treturn this.cache.remember('shadow', () => {\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\treturn new rootWindow.BX.Landing.UI.Field.Dropdown({\n\t\t\t\tselector: 'shadow',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_SHADOW'),\n\t\t\t\tcontent: this.getFormOptions().data.design.shadow,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_SHADOW_USE'),\n\t\t\t\t\t\tvalue: true,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_SHADOW_NOT_USE'),\n\t\t\t\t\t\tvalue: false,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetStyleField()\n\t{\n\t\treturn this.cache.remember('styleField', () => {\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\treturn new rootWindow.BX.Landing.UI.Field.Dropdown({\n\t\t\t\tselector: 'style',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_STYLE_FIELD_TITLE'),\n\t\t\t\tcontent: this.getFormOptions().data.design.style,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_STYLE_FIELD_ITEM_STANDARD'),\n\t\t\t\t\t\tvalue: '',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_STYLE_FIELD_ITEM_MODERN'),\n\t\t\t\t\t\tvalue: 'modern',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tstatic prepareColorFieldValue(color: string): string\n\t{\n\t\treturn ColorPickerField.toRgba(\n\t\t\t...ColorPickerField.parseHex(color),\n\t\t);\n\t}\n\n\tstatic convertColorFieldValueToHexa(value: string, opacity: string = null): string\n\t{\n\t\tconst parsedPrimary = ColorPickerField.parseHex(value);\n\n\t\tif (!Type.isNil(opacity))\n\t\t{\n\t\t\tparsedPrimary[3] = opacity;\n\t\t}\n\n\t\treturn ColorPickerField.toHex(...parsedPrimary);\n\t}\n\n\tgetPrimaryColorField(): ColorPickerField\n\t{\n\t\treturn this.cache.remember('primaryColorField', () => {\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\tconst field = new rootWindow.BX.Landing.UI.Field.ColorField({\n\t\t\t\tselector: 'primary',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_PRIMARY_COLOR'),\n\t\t\t\tsubtype: 'color',\n\t\t\t});\n\n\t\t\tDom.hide(field.layout.querySelector('.landing-ui-field-color-primary'));\n\n\t\t\tfield.setValue({\n\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(this.getFormOptions().data.design.color.primary),\n\t\t\t});\n\n\t\t\treturn field;\n\t\t});\n\t}\n\n\tgetPrimaryTextColorField(): ColorPickerField\n\t{\n\t\treturn this.cache.remember('primaryTextColorField', () => {\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\tconst field = new rootWindow.BX.Landing.UI.Field.ColorField({\n\t\t\t\tselector: 'primaryText',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_PRIMARY_TEXT_COLOR'),\n\t\t\t\tsubtype: 'color',\n\t\t\t});\n\n\t\t\tDom.hide(field.layout.querySelector('.landing-ui-field-color-primary'));\n\n\t\t\tfield.setValue({\n\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(this.getFormOptions().data.design.color.primaryText),\n\t\t\t});\n\n\t\t\treturn field;\n\t\t});\n\t}\n\n\tgetBackgroundColorField(): ColorPickerField\n\t{\n\t\treturn this.cache.remember('backgroundColorField', () => {\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\tconst field = new rootWindow.BX.Landing.UI.Field.ColorField({\n\t\t\t\tselector: 'background',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_BACKGROUND_COLOR'),\n\t\t\t\tsubtype: 'color',\n\t\t\t});\n\n\t\t\tDom.hide(field.layout.querySelector('.landing-ui-field-color-primary'));\n\n\t\t\tfield.setValue({\n\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(this.getFormOptions().data.design.color.background),\n\t\t\t});\n\n\t\t\treturn field;\n\t\t});\n\t}\n\n\tgetTextColorField(): ColorPickerField\n\t{\n\t\treturn this.cache.remember('textColorField', () => {\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\tconst field = new rootWindow.BX.Landing.UI.Field.ColorField({\n\t\t\t\tselector: 'text',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_TEXT_COLOR'),\n\t\t\t\tsubtype: 'color',\n\t\t\t});\n\n\t\t\tDom.hide(field.layout.querySelector('.landing-ui-field-color-primary'));\n\n\t\t\tfield.setValue({\n\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(this.getFormOptions().data.design.color.text),\n\t\t\t});\n\n\t\t\treturn field;\n\t\t});\n\t}\n\n\tgetFieldBackgroundColorField(): ColorPickerField\n\t{\n\t\treturn this.cache.remember('fieldBackgroundColorField', () => {\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\tconst field = new rootWindow.BX.Landing.UI.Field.ColorField({\n\t\t\t\tselector: 'fieldBackground',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_FIELD_BACKGROUND_COLOR'),\n\t\t\t\tsubtype: 'color',\n\t\t\t});\n\n\t\t\tDom.hide(field.layout.querySelector('.landing-ui-field-color-primary'));\n\n\t\t\tfield.setValue({\n\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(this.getFormOptions().data.design.color.fieldBackground),\n\t\t\t});\n\n\t\t\treturn field;\n\t\t});\n\t}\n\n\tgetFieldFocusBackgroundColorField(): ColorPickerField\n\t{\n\t\treturn this.cache.remember('fieldFocusBackgroundColorField', () => {\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\tconst field = new rootWindow.BX.Landing.UI.Field.ColorField({\n\t\t\t\tselector: 'fieldFocusBackground',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_FIELD_FOCUS_BACKGROUND_COLOR'),\n\t\t\t\tvalue: this.getFormOptions().data.design.color.fieldFocusBackground,\n\t\t\t\tsubtype: 'color',\n\t\t\t});\n\n\t\t\tDom.hide(field.layout.querySelector('.landing-ui-field-color-primary'));\n\n\t\t\tfield.setValue({\n\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(this.getFormOptions().data.design.color.fieldFocusBackground),\n\t\t\t});\n\n\t\t\treturn field;\n\t\t});\n\t}\n\n\tgetFieldBorderColorField(): ColorPickerField\n\t{\n\t\treturn this.cache.remember('fieldBorderColorField', () => {\n\t\t\tconst rootWindow = PageObject.getRootWindow();\n\t\t\tconst field = new rootWindow.BX.Landing.UI.Field.ColorField({\n\t\t\t\tselector: 'fieldBorder',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_FIELD_BORDER_COLOR'),\n\t\t\t\tvalue: this.getFormOptions().data.design.color.fieldBorder,\n\t\t\t\tsubtype: 'color',\n\t\t\t});\n\n\t\t\tDom.hide(field.layout.querySelector('.landing-ui-field-color-primary'));\n\n\t\t\tfield.setValue({\n\t\t\t\t'--color': FormStyleAdapter.prepareColorFieldValue(this.getFormOptions().data.design.color.fieldBorder),\n\t\t\t});\n\n\t\t\treturn field;\n\t\t});\n\t}\n\n\tgetFontField()\n\t{\n\t\treturn this.cache.remember('fontField', () => {\n\t\t\tconst value = {...this.getFormOptions().data.design.font};\n\t\t\tif (!Type.isStringFilled(value.family))\n\t\t\t{\n\t\t\t\tvalue.family = Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_FONT_DEFAULT');\n\t\t\t}\n\n\t\t\treturn new BX.Landing.UI.Field.Font({\n\t\t\t\tselector: 'font',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_FONT'),\n\t\t\t\theadlessMode: true,\n\t\t\t\tvalue,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetBorderField()\n\t{\n\t\treturn this.cache.remember('borderField', () => {\n\t\t\treturn new BX.Landing.UI.Field.Checkbox({\n\t\t\t\tselector: 'border',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_BORDER'),\n\t\t\t\tvalue: (() => {\n\t\t\t\t\tconst {border} = this.getFormOptions().data.design;\n\t\t\t\t\treturn Object.entries(border).reduce((acc, [key, value]) => {\n\t\t\t\t\t\tif (value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tacc.push(key);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn acc;\n\t\t\t\t\t}, []);\n\t\t\t\t})(),\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_BORDER_LEFT'),\n\t\t\t\t\t\tvalue: 'left',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_BORDER_RIGHT'),\n\t\t\t\t\t\tvalue: 'right',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_BORDER_TOP'),\n\t\t\t\t\t\tvalue: 'top',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_BORDER_BOTTOM'),\n\t\t\t\t\t\tvalue: 'bottom',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\t}\n\n\tgetStyleForm(collapsed = true): Array<any>\n\t{\n\t\treturn this.cache.remember('styleForm', () => {\n\t\t\treturn new StyleForm({\n\t\t\t\ttitle: Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_FORM_TITLE'),\n\t\t\t\tfields: [\n\t\t\t\t\tthis.getThemeField(),\n\t\t\t\t\tthis.getDarkField(),\n\t\t\t\t\tthis.getStyleField(),\n\t\t\t\t\tthis.getShadowField(),\n\t\t\t\t\tthis.getPrimaryColorField(),\n\t\t\t\t\tthis.getPrimaryTextColorField(),\n\t\t\t\t\tthis.getBackgroundColorField(),\n\t\t\t\t\tthis.getTextColorField(),\n\t\t\t\t\tthis.getFieldBackgroundColorField(),\n\t\t\t\t\tthis.getFieldFocusBackgroundColorField(),\n\t\t\t\t\tthis.getFieldBorderColorField(),\n\t\t\t\t\tthis.getFontField(),\n\t\t\t\t\tthis.getBorderField(),\n\t\t\t\t],\n\t\t\t\tonChange: Runtime.throttle(this.onFormChange.bind(this), 16),\n\t\t\t\tserializeModifier: (value) => {\n\t\t\t\t\tvalue.theme = `${value.theme}-${value.dark}`;\n\t\t\t\t\tvalue.dark = value.dark === 'dark';\n\t\t\t\t\tvalue.shadow = Text.toBoolean(value.shadow);\n\n\t\t\t\t\tvalue.color = {\n\t\t\t\t\t\tprimary: FormStyleAdapter.convertColorFieldValueToHexa(\n\t\t\t\t\t\t\tvalue.primary.getHex(),\n\t\t\t\t\t\t\tvalue.primary.getOpacity(),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tprimaryText: FormStyleAdapter.convertColorFieldValueToHexa(\n\t\t\t\t\t\t\tvalue.primaryText.getHex(),\n\t\t\t\t\t\t\tvalue.primaryText.getOpacity(),\n\t\t\t\t\t\t),\n\t\t\t\t\t\ttext: FormStyleAdapter.convertColorFieldValueToHexa(\n\t\t\t\t\t\t\tvalue.text.getHex(),\n\t\t\t\t\t\t\tvalue.text.getOpacity(),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tbackground: FormStyleAdapter.convertColorFieldValueToHexa(\n\t\t\t\t\t\t\tvalue.background.getHex(),\n\t\t\t\t\t\t\tvalue.background.getOpacity(),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfieldBackground: FormStyleAdapter.convertColorFieldValueToHexa(\n\t\t\t\t\t\t\tvalue.fieldBackground.getHex(),\n\t\t\t\t\t\t\tvalue.fieldBackground.getOpacity(),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfieldFocusBackground: FormStyleAdapter.convertColorFieldValueToHexa(\n\t\t\t\t\t\t\tvalue.fieldFocusBackground.getHex(),\n\t\t\t\t\t\t\tvalue.fieldFocusBackground.getOpacity(),\n\t\t\t\t\t\t),\n\t\t\t\t\t\tfieldBorder: FormStyleAdapter.convertColorFieldValueToHexa(\n\t\t\t\t\t\t\tvalue.fieldBorder.getHex(),\n\t\t\t\t\t\t\tvalue.fieldBorder.getOpacity(),\n\t\t\t\t\t\t),\n\t\t\t\t\t};\n\n\t\t\t\t\tvalue.border = {\n\t\t\t\t\t\tleft: value.border.includes('left'),\n\t\t\t\t\t\tright: value.border.includes('right'),\n\t\t\t\t\t\ttop: value.border.includes('top'),\n\t\t\t\t\t\tbottom: value.border.includes('bottom'),\n\t\t\t\t\t};\n\n\t\t\t\t\tif (value.font.family === Loc.getMessage('LANDING_FORM_STYLE_ADAPTER_FONT_DEFAULT'))\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue.font.family = '';\n\t\t\t\t\t\tvalue.font.uri = '';\n\t\t\t\t\t}\n\n\t\t\t\t\tdelete value.primary;\n\t\t\t\t\tdelete value.primaryText;\n\t\t\t\t\tdelete value.text;\n\t\t\t\t\tdelete value.background;\n\t\t\t\t\tdelete value.fieldBackground;\n\t\t\t\t\tdelete value.fieldFocusBackground;\n\t\t\t\t\tdelete value.fieldBorder;\n\n\t\t\t\t\treturn value;\n\t\t\t\t},\n\t\t\t\tcollapsed: collapsed,\n\t\t\t\tspecialType: 'crm_forms',\n\t\t\t});\n\t\t});\n\t}\n\n\tgetCrmForm()\n\t{\n\t\tconst formApp = Reflection.getClass('b24form.App');\n\t\tif (formApp)\n\t\t{\n\t\t\tif (this.options.instanceId)\n\t\t\t{\n\t\t\t\treturn formApp.get(this.options.instanceId);\n\t\t\t}\n\n\t\t\treturn formApp.list()[0];\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tonFormChange(event: BaseEvent)\n\t{\n\t\tconst currentFormOptions = this.getFormOptions();\n\t\tconst designOptions = {\n\t\t\tdata: {\n\t\t\t\tdesign: event.getTarget().serialize(),\n\t\t\t},\n\t\t};\n\t\tconst mergedOptions = Runtime.merge(currentFormOptions, designOptions);\n\t\tthis.setFormOptions(mergedOptions);\n\t\tthis.getCrmForm().design.adjust(mergedOptions.data.design);\n\n\t\tconst formSettingsPanel: FormSettingsPanel = FormSettingsPanel.getInstance();\n\t\tif (formSettingsPanel.isShown())\n\t\t{\n\t\t\tconst initialOptions = formSettingsPanel.getInitialFormOptions();\n\t\t\tconst currentOptions = formSettingsPanel.getFormOptions();\n\n\t\t\tinitialOptions.data.design = mergedOptions.data.design;\n\t\t\tformSettingsPanel.setInitialFormOptions(initialOptions);\n\n\t\t\tcurrentOptions.data.design = mergedOptions.data.design;\n\t\t\tformSettingsPanel.setFormOptions(currentOptions);\n\t\t}\n\n\t\tthis.onDebouncedFormChange();\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tisCrmFormPage(): boolean\n\t{\n\t\treturn Env.getInstance().getSpecialType() === 'crm_forms';\n\t}\n\n\tsaveFormDesign()\n\t{\n\t\treturn Runtime\n\t\t\t.loadExtension('crm.form.client')\n\t\t\t.then(({FormClient}) => {\n\t\t\t\tif (FormClient)\n\t\t\t\t{\n\t\t\t\t\tconst formClient = FormClient.getInstance();\n\t\t\t\t\tconst formOptions = this.getFormOptions();\n\n\t\t\t\t\tformClient.resetCache(formOptions.id);\n\n\t\t\t\t\treturn formClient.saveOptions(formOptions);\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t});\n\t}\n\n\tsaveBlockDesign()\n\t{\n\t\tconst {currentBlock} = this.options;\n\t\tconst {design} = this.getFormOptions().data;\n\n\t\tconst formNode = currentBlock.node.querySelector('.bitrix24forms');\n\t\tDom.attr(formNode, {\n\t\t\t'data-b24form-design': design,\n\t\t\t'data-b24form-use-style': 'Y',\n\t\t});\n\n\t\tRuntime\n\t\t\t.loadExtension('crm.form.client')\n\t\t\t.then(({FormClient}) => {\n\t\t\t\tif (FormClient)\n\t\t\t\t{\n\t\t\t\t\tconst formClient = FormClient.getInstance();\n\t\t\t\t\tconst formOptions = this.getFormOptions();\n\t\t\t\t\tformClient.resetCache(formOptions.id);\n\t\t\t\t}\n\t\t\t});\n\n\t\tBackend\n\t\t\t.getInstance()\n\t\t\t.action(\n\t\t\t\t'Landing\\\\Block::updateNodes',\n\t\t\t\t{\n\t\t\t\t\tblock: currentBlock.id,\n\t\t\t\t\tdata: {\n\t\t\t\t\t\t'.bitrix24forms': {\n\t\t\t\t\t\t\tattrs: {\n\t\t\t\t\t\t\t\t'data-b24form-design': JSON.stringify(design),\n\t\t\t\t\t\t\t\t'data-b24form-use-style': 'Y',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\tlid: currentBlock.lid,\n\t\t\t\t\tsiteId: currentBlock.siteId,\n\t\t\t\t},\n\t\t\t\t{code: currentBlock.manifest.code},\n\t\t\t)\n\t\t\t.then(BX.Landing.History.getInstance().push());\n\t}\n\n\tonDebouncedFormChange()\n\t{\n\t\tif (this.isCrmFormPage())\n\t\t{\n\t\t\tRuntime\n\t\t\t\t.loadExtension('landing.ui.panel.formsettingspanel')\n\t\t\t\t.then(({FormSettingsPanel}) => {\n\t\t\t\t\tconst formSettingsPanel = FormSettingsPanel.getInstance();\n\t\t\t\t\tformSettingsPanel.setCurrentBlock(this.options.currentBlock);\n\n\t\t\t\t\tvoid this.saveFormDesign();\n\n\t\t\t\t\tif (formSettingsPanel.useBlockDesign())\n\t\t\t\t\t{\n\t\t\t\t\t\tformSettingsPanel.disableUseBlockDesign();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.saveBlockDesign();\n\t\t}\n\t}\n}"],"names":["themesMap","Map","set","theme","dark","style","color","primary","primaryText","background","text","fieldBackground","fieldFocusBackground","fieldBorder","shadow","font","uri","family","border","left","top","bottom","right","get","FormStyleAdapter","options","setEventNamespace","cache","Cache","MemoryCache","onDebouncedFormChange","Runtime","debounce","Text","capitalize","Env","getInstance","getOptions","params","type","setFormOptions","data","design","clone","getCrmForm","Promise","resolve","loadExtension","then","FormClient","formId","result","merge","remember","getFormOptions","rootWindow","PageObject","getRootWindow","BX","Landing","UI","Field","Dropdown","selector","title","Loc","getMessage","content","Type","isString","split","onChange","onThemeChange","bind","items","name","value","themeId","getStyleForm","serialize","isPlainObject","getPrimaryColorField","setValue","prepareColorFieldValue","getPrimaryTextColorField","getBackgroundColorField","getTextColorField","getFieldBackgroundColorField","getFieldFocusBackgroundColorField","getFieldBorderColorField","getStyleField","isBoolean","getShadowField","isStringFilled","getFontField","borders","Object","entries","reduce","acc","key","push","getBorderField","field","ColorField","subtype","Dom","hide","layout","querySelector","Font","headlessMode","Checkbox","collapsed","StyleForm","fields","getThemeField","getDarkField","throttle","onFormChange","serializeModifier","toBoolean","convertColorFieldValueToHexa","getHex","getOpacity","includes","specialType","formApp","Reflection","getClass","instanceId","list","event","currentFormOptions","designOptions","getTarget","mergedOptions","adjust","formSettingsPanel","FormSettingsPanel","isShown","initialOptions","getInitialFormOptions","currentOptions","setInitialFormOptions","getSpecialType","formClient","formOptions","resetCache","id","saveOptions","currentBlock","formNode","node","attr","Backend","action","block","attrs","JSON","stringify","lid","siteId","code","manifest","History","isCrmFormPage","setCurrentBlock","saveFormDesign","useBlockDesign","disableUseBlockDesign","saveBlockDesign","ColorPickerField","toRgba","parseHex","opacity","parsedPrimary","isNil","toHex","EventEmitter"],"mappings":";;;;;;CAAA,IAAMA,SAAS,GAAG,IAAIC,GAAG,EAAE;CAC3BD,SAAS,CAACE,GAAG,CACZ,gBAAgB,EAChB;GACCC,KAAK,EAAE,gBAAgB;GACvBC,IAAI,EAAE,KAAK;GACXC,KAAK,EAAE,EAAE;GACTC,KAAK,EAAE;KACNC,OAAO,EAAE,WAAW;KACpBC,WAAW,EAAE,WAAW;KACxBC,UAAU,EAAE,WAAW;KACvBC,IAAI,EAAE,WAAW;KACjBC,eAAe,EAAE,WAAW;KAC5BC,oBAAoB,EAAE,WAAW;KACjCC,WAAW,EAAE;IACb;GACDC,MAAM,EAAE,IAAI;GACZC,IAAI,EAAE;KACLC,GAAG,EAAE,EAAE;KACPC,MAAM,EAAE;IACR;GACDC,MAAM,EAAE;KACPC,IAAI,EAAE,KAAK;KACXC,GAAG,EAAE,KAAK;KACVC,MAAM,EAAE,IAAI;KACZC,KAAK,EAAE;;CAET,CAAC,CACD;CAEDtB,SAAS,CAACE,GAAG,CACZ,eAAe,EACf;GACCC,KAAK,EAAE,eAAe;GACtBC,IAAI,EAAE,IAAI;GACVC,KAAK,EAAE,EAAE;GACTC,KAAK,EAAE;KACNC,OAAO,EAAE,WAAW;KACpBC,WAAW,EAAE,WAAW;KACxBC,UAAU,EAAE,WAAW;KACvBC,IAAI,EAAE,WAAW;KACjBC,eAAe,EAAE,WAAW;KAC5BC,oBAAoB,EAAE,WAAW;KACjCC,WAAW,EAAE;IACb;GACDC,MAAM,EAAE,IAAI;GACZC,IAAI,EAAE;KACLC,GAAG,EAAE,EAAE;KACPC,MAAM,EAAE;IACR;GACDC,MAAM,EAAE;KACPC,IAAI,EAAE,KAAK;KACXC,GAAG,EAAE,KAAK;KACVC,MAAM,EAAE,IAAI;KACZC,KAAK,EAAE;;CAET,CAAC,CACD;CAEDtB,SAAS,CAACE,GAAG,CACZ,cAAc,EACd;GACCC,KAAK,EAAE,cAAc;GACrBC,IAAI,EAAE,KAAK;GACXC,KAAK,EAAE,QAAQ;GACfC,KAAK,EAAE;KACNC,OAAO,EAAE,WAAW;KACpBC,WAAW,EAAE,WAAW;KACxBC,UAAU,EAAE,WAAW;KACvBC,IAAI,EAAE,WAAW;KACjBC,eAAe,EAAE,WAAW;KAC5BC,oBAAoB,EAAE,WAAW;KACjCC,WAAW,EAAE;IACb;GACDC,MAAM,EAAE,IAAI;GACZC,IAAI,EAAE;KACLC,GAAG,EAAE,8FAA8F;KACnGC,MAAM,EAAE;IACR;GACDC,MAAM,EAAE;KACPC,IAAI,EAAE,KAAK;KACXC,GAAG,EAAE,KAAK;KACVC,MAAM,EAAE,IAAI;KACZC,KAAK,EAAE;;CAET,CAAC,CACD;CAEDtB,SAAS,CAACE,GAAG,CACZ,aAAa,EACb;GACCC,KAAK,EAAE,aAAa;GACpBC,IAAI,EAAE,IAAI;GACVC,KAAK,EAAE,QAAQ;GACfC,KAAK,EAAE;KACNC,OAAO,EAAE,WAAW;KACpBC,WAAW,EAAE,WAAW;KACxBC,UAAU,EAAE,WAAW;KACvBC,IAAI,EAAE,WAAW;KACjBC,eAAe,EAAE,WAAW;KAC5BC,oBAAoB,EAAE,WAAW;KACjCC,WAAW,EAAE;IACb;GACDC,MAAM,EAAE,IAAI;GACZC,IAAI,EAAE;KACLC,GAAG,EAAE,8FAA8F;KACnGC,MAAM,EAAE;IACR;GACDC,MAAM,EAAE;KACPC,IAAI,EAAE,KAAK;KACXC,GAAG,EAAE,KAAK;KACVC,MAAM,EAAE,IAAI;KACZC,KAAK,EAAE;;CAET,CAAC,CACD;CAEDtB,SAAS,CAACE,GAAG,CACZ,eAAe,EACf;GACCC,KAAK,EAAE,eAAe;GACtBC,IAAI,EAAE,KAAK;GACXC,KAAK,EAAE,EAAE;GACTC,KAAK,EAAE;KACNC,OAAO,EAAE,WAAW;KACpBC,WAAW,EAAE,WAAW;KACxBC,UAAU,EAAE,WAAW;KACvBC,IAAI,EAAE,WAAW;KACjBC,eAAe,EAAE,WAAW;KAC5BC,oBAAoB,EAAE,WAAW;KACjCC,WAAW,EAAE;IACb;GACDC,MAAM,EAAE,IAAI;GACZC,IAAI,EAAE;KACLC,GAAG,EAAE,6FAA6F;KAClGC,MAAM,EAAE;IACR;GACDC,MAAM,EAAE;KACPC,IAAI,EAAE,KAAK;KACXC,GAAG,EAAE,KAAK;KACVC,MAAM,EAAE,IAAI;KACZC,KAAK,EAAE;;CAET,CAAC,CACD;CAEDtB,SAAS,CAACE,GAAG,CACZ,cAAc,EACd;GACCC,KAAK,EAAE,cAAc;GACrBC,IAAI,EAAE,IAAI;GACVC,KAAK,EAAE,EAAE;GACTC,KAAK,EAAE;KACNC,OAAO,EAAE,WAAW;KACpBC,WAAW,EAAE,WAAW;KACxBC,UAAU,EAAE,WAAW;KACvBC,IAAI,EAAE,WAAW;KACjBC,eAAe,EAAE,WAAW;KAC5BC,oBAAoB,EAAE,WAAW;KACjCC,WAAW,EAAE;IACb;GACDC,MAAM,EAAE,IAAI;GACZC,IAAI,EAAE;KACLC,GAAG,EAAE,6FAA6F;KAClGC,MAAM,EAAE;IACR;GACDC,MAAM,EAAE;KACPC,IAAI,EAAE,KAAK;KACXC,GAAG,EAAE,KAAK;KACVC,MAAM,EAAE,IAAI;KACZC,KAAK,EAAE;;CAET,CAAC,CACD;CAEDtB,SAAS,CAACE,GAAG,CACZ,WAAW,EACX;GACCC,KAAK,EAAE,WAAW;GAClBC,IAAI,EAAE,KAAK;GACXC,KAAK,EAAE,EAAE;GACTC,KAAK,EAAE;KACNC,OAAO,EAAE,WAAW;KACpBC,WAAW,EAAE,WAAW;KACxBC,UAAU,EAAE,WAAW;KACvBC,IAAI,EAAE,WAAW;KACjBC,eAAe,EAAE,WAAW;KAC5BC,oBAAoB,EAAE,WAAW;KACjCC,WAAW,EAAE;IACb;GACDC,MAAM,EAAE,IAAI;GACZC,IAAI,EAAE;KACLC,GAAG,EAAE,gFAAgF;KACrFC,MAAM,EAAE;IACR;GACDC,MAAM,EAAE;KACPC,IAAI,EAAE,KAAK;KACXC,GAAG,EAAE,KAAK;KACVC,MAAM,EAAE,IAAI;KACZC,KAAK,EAAE;;CAET,CAAC,CACD;CAEDtB,SAAS,CAACE,GAAG,CACZ,UAAU,EACV;GACCC,KAAK,EAAE,UAAU;GACjBC,IAAI,EAAE,IAAI;GACVC,KAAK,EAAE,EAAE;GACTC,KAAK,EAAE;KACNC,OAAO,EAAE,WAAW;KACpBC,WAAW,EAAE,WAAW;KACxBC,UAAU,EAAE,WAAW;KACvBC,IAAI,EAAE,WAAW;KACjBC,eAAe,EAAE,WAAW;KAC5BC,oBAAoB,EAAE,WAAW;KACjCC,WAAW,EAAE;IACb;GACDC,MAAM,EAAE,IAAI;GACZC,IAAI,EAAE;KACLC,GAAG,EAAE,gFAAgF;KACrFC,MAAM,EAAE;IACR;GACDC,MAAM,EAAE;KAACC,IAAI,EAAE,KAAK;KAAEC,GAAG,EAAE,KAAK;KAAEC,MAAM,EAAE,IAAI;KAAEC,KAAK,EAAE;;CACxD,CAAC,CACD;CAEDtB,SAAS,CAACE,GAAG,CACZ,aAAa,EACb;GACCC,KAAK,EAAE,aAAa;GACpBC,IAAI,EAAE,IAAI;GACVC,KAAK,EAAE,EAAE;GACTC,KAAK,EAAE;KACNC,OAAO,EAAE,WAAW;KACpBC,WAAW,EAAE,WAAW;KACxBC,UAAU,EAAE,WAAW;KACvBC,IAAI,EAAE,WAAW;KACjBC,eAAe,EAAE,WAAW;KAC5BC,oBAAoB,EAAE,WAAW;KACjCC,WAAW,EAAE;IACb;GACDC,MAAM,EAAE,IAAI;GACZC,IAAI,EAAE;KACLC,GAAG,EAAE,sFAAsF;KAC3FC,MAAM,EAAE;IACR;GACDC,MAAM,EAAE;KAACC,IAAI,EAAE,KAAK;KAAEC,GAAG,EAAE,KAAK;KAAEC,MAAM,EAAE,IAAI;KAAEC,KAAK,EAAE;;CACxD,CAAC,CACD;CAEDtB,SAAS,CAACE,GAAG,CACZ,YAAY,kCAERF,SAAS,CAACuB,GAAG,CAAC,aAAa,CAAC;GAC/BpB,KAAK,EAAE;CAAY,GAEpB;;;;AClQD;CAaA;CACA;CACA;AACA,KAAaqB,gBAAgB;GAAA;GAE5B,0BAAYC,OAAO,EACnB;KAAA;KAAA;KACC;KACA,MAAKC,iBAAiB,CAAC,6BAA6B,CAAC;KACrD,MAAKD,OAAO,uBAAOA,OAAO,CAAC;KAC3B,MAAKE,KAAK,GAAG,IAAIC,eAAK,CAACC,WAAW,EAAE;KAEpC,MAAKC,qBAAqB,GAAGC,iBAAO,CAACC,QAAQ,CAAC,MAAKF,qBAAqB,EAAE,GAAG,CAAC;KAAC;;GAC/E;KAAA;KAAA,+BAEcL,OAAO,EACtB;OACC,IAAI,CAACE,KAAK,CAACzB,GAAG,CAAC,aAAa,sBAAMuB,OAAO,EAAE;;;KAC3C;KAAA,iCAGD;OACC,OAAO,IAAI,CAACE,KAAK,CAACJ,GAAG,CAAC,aAAa,CAAC;;;KACpC;KAAA,uBAGD;OAAA;OACC,IAAIU,cAAI,CAACC,UAAU,CAACC,eAAG,CAACC,WAAW,EAAE,CAACC,UAAU,EAAE,CAACC,MAAM,CAACC,IAAI,CAAC,KAAK,KAAK,EACzE;SACC,IAAI,CAACC,cAAc,CAClB;WAACC,IAAI,EAAE;aAACC,MAAM,EAAEX,iBAAO,CAACY,KAAK,CAAC,IAAI,CAACC,UAAU,EAAE,CAACF,MAAM;;UAAG,CACzD;SAED,OAAOG,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;;OAG7B,OAAOf,iBAAO,CACZgB,aAAa,CAAC,iBAAiB,CAAC,CAChCC,IAAI,CAAC,gBAAkB;SAAA,IAAhBC,UAAU,QAAVA,UAAU;SACjB,IAAIA,UAAU,EACd;WACC,OAAOA,UAAU,CACfb,WAAW,EAAE,CACbC,UAAU,CAAC,MAAI,CAACZ,OAAO,CAACyB,MAAM,CAAC,CAC/BF,IAAI,CAAC,UAACG,MAAM,EAAK;aACjB,MAAI,CAACX,cAAc,CAClBT,iBAAO,CAACqB,KAAK,CACZrB,iBAAO,CAACY,KAAK,CAACQ,MAAM,CAAC,EACrB;eAACV,IAAI,EAAE;iBAACC,MAAM,EAAEX,iBAAO,CAACY,KAAK,CAAC,MAAI,CAACC,UAAU,EAAE,CAACF,MAAM;;cAAG,CACzD,CACD;aACD,OAAO,MAAI;YACX,CAAC;;SAGJ,OAAO,IAAI;QACX,CAAC;;;KACH;KAAA,gCAGD;OAAA;OACC,OAAO,IAAI,CAACf,KAAK,CAAC0B,QAAQ,CAAC,YAAY,EAAE,YAAM;SAC9C,IAAOlD,KAAK,GAAI,MAAI,CAACmD,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAA1CvC,KAAK;SACZ,IAAMoD,UAAU,GAAGC,6BAAU,CAACC,aAAa,EAAE;SAC7C,OAAO,IAAIF,UAAU,CAACG,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAACC,QAAQ,CAAC;WAClDC,QAAQ,EAAE,OAAO;WACjBC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,8CAA8C,CAAC;WACrEC,OAAO,EAAEC,cAAI,CAACC,QAAQ,CAAClE,KAAK,CAAC,GAAGA,KAAK,CAACmE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;WACxDC,QAAQ,EAAE,MAAI,CAACC,aAAa,CAACC,IAAI,CAAC,MAAI,CAAC;WACvCC,KAAK,EAAE,CACN;aACCC,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,sDAAsD,CAAC;aAC5EU,KAAK,EAAE;YACP,EACD;aACCD,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,oDAAoD,CAAC;aAC1EU,KAAK,EAAE;YACP,EACD;aACCD,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,qDAAqD,CAAC;aAC3EU,KAAK,EAAE;YACP,EACD;aACCD,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC;aACvEU,KAAK,EAAE;YACP,EACD;aACCD,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC;aACzEU,KAAK,EAAE;YACP;UAEF,CAAC;QACF,CAAC;;;KACF;KAAA,+BAGD;OAAA;OACC,OAAO,IAAI,CAACjD,KAAK,CAAC0B,QAAQ,CAAC,WAAW,EAAE,YAAM;SAC7C,IAAOlD,KAAK,GAAI,MAAI,CAACmD,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAA1CvC,KAAK;SACZ,IAAMoD,UAAU,GAAGC,6BAAU,CAACC,aAAa,EAAE;SAC7C,OAAO,IAAIF,UAAU,CAACG,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAACC,QAAQ,CAAC;WAClDC,QAAQ,EAAE,MAAM;WAChBC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,6CAA6C,CAAC;WACpEC,OAAO,EAAEC,cAAI,CAACC,QAAQ,CAAClE,KAAK,CAAC,GAAGA,KAAK,CAACmE,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE;WACxDC,QAAQ,EAAE,MAAI,CAACC,aAAa,CAACC,IAAI,CAAC,MAAI,CAAC;WACvCC,KAAK,EAAE,CACN;aACCC,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,kDAAkD,CAAC;aACxEU,KAAK,EAAE;YACP,EACD;aACCD,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC;aACvEU,KAAK,EAAE;YACP;UAEF,CAAC;QACF,CAAC;;;KACF;KAAA,gCAGD;OACC,IAAMC,OAAO,GAAG,IAAI,CAACC,YAAY,EAAE,CAACC,SAAS,EAAE,CAAC5E,KAAK;OACrD,IAAMA,KAAK,GAAGH,SAAS,CAACuB,GAAG,CAACsD,OAAO,CAAC;OAEpC,IAAI1E,KAAK,EACT;SACC,IAAIiE,cAAI,CAACY,aAAa,CAAC7E,KAAK,CAACG,KAAK,CAAC,EACnC;WACC,IAAI,CAAC2E,oBAAoB,EAAE,CAACC,QAAQ,CAAC;aACpC,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAChF,KAAK,CAACG,KAAK,CAACC,OAAO;YACtE,CAAC;WACF,IAAI,CAAC6E,wBAAwB,EAAE,CAACF,QAAQ,CAAC;aACxC,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAChF,KAAK,CAACG,KAAK,CAACE,WAAW;YAC1E,CAAC;WACF,IAAI,CAAC6E,uBAAuB,EAAE,CAACH,QAAQ,CAAC;aACvC,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAChF,KAAK,CAACG,KAAK,CAACG,UAAU;YACzE,CAAC;WACF,IAAI,CAAC6E,iBAAiB,EAAE,CAACJ,QAAQ,CAAC;aACjC,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAChF,KAAK,CAACG,KAAK,CAACI,IAAI;YACnE,CAAC;WACF,IAAI,CAAC6E,4BAA4B,EAAE,CAACL,QAAQ,CAAC;aAC5C,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAChF,KAAK,CAACG,KAAK,CAACK,eAAe;YAC9E,CAAC;WACF,IAAI,CAAC6E,iCAAiC,EAAE,CAACN,QAAQ,CAAC;aACjD,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAChF,KAAK,CAACG,KAAK,CAACM,oBAAoB;YACnF,CAAC;WACF,IAAI,CAAC6E,wBAAwB,EAAE,CAACP,QAAQ,CAAC;aACxC,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAChF,KAAK,CAACG,KAAK,CAACO,WAAW;YAC1E,CAAC;;SAGH,IAAI,CAAC6E,aAAa,EAAE,CAACR,QAAQ,CAAC/E,KAAK,CAACE,KAAK,CAAC;SAE1C,IAAI+D,cAAI,CAACuB,SAAS,CAACxF,KAAK,CAACW,MAAM,CAAC,EAChC;WACC,IAAI,CAAC8E,cAAc,EAAE,CAACV,QAAQ,CAAC/E,KAAK,CAACW,MAAM,CAAC;;SAG7C,IAAIsD,cAAI,CAACY,aAAa,CAAC7E,KAAK,CAACY,IAAI,CAAC,EAClC;WACC,IAAMA,IAAI,uBAAOZ,KAAK,CAACY,IAAI,CAAC;WAC5B,IAAI,CAACqD,cAAI,CAACyB,cAAc,CAAC9E,IAAI,CAACE,MAAM,CAAC,EACrC;aACCF,IAAI,CAACE,MAAM,GAAGgD,eAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC;;WAGxE,IAAI,CAAC4B,YAAY,EAAE,CAACZ,QAAQ,CAACnE,IAAI,CAAC;;SAGnC,IAAIqD,cAAI,CAACY,aAAa,CAAC7E,KAAK,CAACe,MAAM,CAAC,EACpC;WACC,IAAM6E,OAAO,GAAGC,MAAM,CAACC,OAAO,CAAC9F,KAAK,CAACe,MAAM,CAAC,CAACgF,MAAM,CAAC,UAACC,GAAG,SAAmB;aAAA;eAAhBC,GAAG;eAAExB,KAAK;aACpE,IAAIA,KAAK,EACT;eACCuB,GAAG,CAACE,IAAI,CAACD,GAAG,CAAC;;aAGd,OAAOD,GAAG;YACV,EAAE,EAAE,CAAC;WAEN,IAAI,CAACG,cAAc,EAAE,CAACpB,QAAQ,CAACa,OAAO,CAAC;;;;;KAGzC;KAAA,iCAGD;OAAA;OACC,OAAO,IAAI,CAACpE,KAAK,CAAC0B,QAAQ,CAAC,QAAQ,EAAE,YAAM;SAC1C,IAAME,UAAU,GAAGC,6BAAU,CAACC,aAAa,EAAE;SAC7C,OAAO,IAAIF,UAAU,CAACG,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAACC,QAAQ,CAAC;WAClDC,QAAQ,EAAE,QAAQ;WAClBC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;WAC1DC,OAAO,EAAE,MAAI,CAACb,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAAC5B,MAAM;WACjD4D,KAAK,EAAE,CACN;aACCC,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;aAC7DU,KAAK,EAAE;YACP,EACD;aACCD,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC;aACjEU,KAAK,EAAE;YACP;UAEF,CAAC;QACF,CAAC;;;KACF;KAAA,gCAGD;OAAA;OACC,OAAO,IAAI,CAACjD,KAAK,CAAC0B,QAAQ,CAAC,YAAY,EAAE,YAAM;SAC9C,IAAME,UAAU,GAAGC,6BAAU,CAACC,aAAa,EAAE;SAC7C,OAAO,IAAIF,UAAU,CAACG,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAACC,QAAQ,CAAC;WAClDC,QAAQ,EAAE,OAAO;WACjBC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,8CAA8C,CAAC;WACrEC,OAAO,EAAE,MAAI,CAACb,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAACrC,KAAK;WAChDqE,KAAK,EAAE,CACN;aACCC,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,sDAAsD,CAAC;aAC5EU,KAAK,EAAE;YACP,EACD;aACCD,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,oDAAoD,CAAC;aAC1EU,KAAK,EAAE;YACP;UAEF,CAAC;QACF,CAAC;;;KACF;KAAA,uCAsBD;OAAA;OACC,OAAO,IAAI,CAACjD,KAAK,CAAC0B,QAAQ,CAAC,mBAAmB,EAAE,YAAM;SACrD,IAAME,UAAU,GAAGC,6BAAU,CAACC,aAAa,EAAE;SAC7C,IAAM8C,KAAK,GAAG,IAAIhD,UAAU,CAACG,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAAC2C,UAAU,CAAC;WAC3DzC,QAAQ,EAAE,SAAS;WACnBC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,0CAA0C,CAAC;WACjEuC,OAAO,EAAE;UACT,CAAC;SAEFC,aAAG,CAACC,IAAI,CAACJ,KAAK,CAACK,MAAM,CAACC,aAAa,CAAC,iCAAiC,CAAC,CAAC;SAEvEN,KAAK,CAACrB,QAAQ,CAAC;WACd,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAC,MAAI,CAAC7B,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAACpC,KAAK,CAACC,OAAO;UAClG,CAAC;SAEF,OAAOgG,KAAK;QACZ,CAAC;;;KACF;KAAA,2CAGD;OAAA;OACC,OAAO,IAAI,CAAC5E,KAAK,CAAC0B,QAAQ,CAAC,uBAAuB,EAAE,YAAM;SACzD,IAAME,UAAU,GAAGC,6BAAU,CAACC,aAAa,EAAE;SAC7C,IAAM8C,KAAK,GAAG,IAAIhD,UAAU,CAACG,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAAC2C,UAAU,CAAC;WAC3DzC,QAAQ,EAAE,aAAa;WACvBC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,+CAA+C,CAAC;WACtEuC,OAAO,EAAE;UACT,CAAC;SAEFC,aAAG,CAACC,IAAI,CAACJ,KAAK,CAACK,MAAM,CAACC,aAAa,CAAC,iCAAiC,CAAC,CAAC;SAEvEN,KAAK,CAACrB,QAAQ,CAAC;WACd,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAC,MAAI,CAAC7B,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAACpC,KAAK,CAACE,WAAW;UACtG,CAAC;SAEF,OAAO+F,KAAK;QACZ,CAAC;;;KACF;KAAA,0CAGD;OAAA;OACC,OAAO,IAAI,CAAC5E,KAAK,CAAC0B,QAAQ,CAAC,sBAAsB,EAAE,YAAM;SACxD,IAAME,UAAU,GAAGC,6BAAU,CAACC,aAAa,EAAE;SAC7C,IAAM8C,KAAK,GAAG,IAAIhD,UAAU,CAACG,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAAC2C,UAAU,CAAC;WAC3DzC,QAAQ,EAAE,YAAY;WACtBC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,6CAA6C,CAAC;WACpEuC,OAAO,EAAE;UACT,CAAC;SAEFC,aAAG,CAACC,IAAI,CAACJ,KAAK,CAACK,MAAM,CAACC,aAAa,CAAC,iCAAiC,CAAC,CAAC;SAEvEN,KAAK,CAACrB,QAAQ,CAAC;WACd,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAC,MAAI,CAAC7B,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAACpC,KAAK,CAACG,UAAU;UACrG,CAAC;SAEF,OAAO8F,KAAK;QACZ,CAAC;;;KACF;KAAA,oCAGD;OAAA;OACC,OAAO,IAAI,CAAC5E,KAAK,CAAC0B,QAAQ,CAAC,gBAAgB,EAAE,YAAM;SAClD,IAAME,UAAU,GAAGC,6BAAU,CAACC,aAAa,EAAE;SAC7C,IAAM8C,KAAK,GAAG,IAAIhD,UAAU,CAACG,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAAC2C,UAAU,CAAC;WAC3DzC,QAAQ,EAAE,MAAM;WAChBC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;WAC9DuC,OAAO,EAAE;UACT,CAAC;SAEFC,aAAG,CAACC,IAAI,CAACJ,KAAK,CAACK,MAAM,CAACC,aAAa,CAAC,iCAAiC,CAAC,CAAC;SAEvEN,KAAK,CAACrB,QAAQ,CAAC;WACd,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAC,OAAI,CAAC7B,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAACpC,KAAK,CAACI,IAAI;UAC/F,CAAC;SAEF,OAAO6F,KAAK;QACZ,CAAC;;;KACF;KAAA,+CAGD;OAAA;OACC,OAAO,IAAI,CAAC5E,KAAK,CAAC0B,QAAQ,CAAC,2BAA2B,EAAE,YAAM;SAC7D,IAAME,UAAU,GAAGC,6BAAU,CAACC,aAAa,EAAE;SAC7C,IAAM8C,KAAK,GAAG,IAAIhD,UAAU,CAACG,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAAC2C,UAAU,CAAC;WAC3DzC,QAAQ,EAAE,iBAAiB;WAC3BC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,mDAAmD,CAAC;WAC1EuC,OAAO,EAAE;UACT,CAAC;SAEFC,aAAG,CAACC,IAAI,CAACJ,KAAK,CAACK,MAAM,CAACC,aAAa,CAAC,iCAAiC,CAAC,CAAC;SAEvEN,KAAK,CAACrB,QAAQ,CAAC;WACd,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAC,OAAI,CAAC7B,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAACpC,KAAK,CAACK,eAAe;UAC1G,CAAC;SAEF,OAAO4F,KAAK;QACZ,CAAC;;;KACF;KAAA,oDAGD;OAAA;OACC,OAAO,IAAI,CAAC5E,KAAK,CAAC0B,QAAQ,CAAC,gCAAgC,EAAE,YAAM;SAClE,IAAME,UAAU,GAAGC,6BAAU,CAACC,aAAa,EAAE;SAC7C,IAAM8C,KAAK,GAAG,IAAIhD,UAAU,CAACG,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAAC2C,UAAU,CAAC;WAC3DzC,QAAQ,EAAE,sBAAsB;WAChCC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,yDAAyD,CAAC;WAChFU,KAAK,EAAE,OAAI,CAACtB,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAACpC,KAAK,CAACM,oBAAoB;WACnE6F,OAAO,EAAE;UACT,CAAC;SAEFC,aAAG,CAACC,IAAI,CAACJ,KAAK,CAACK,MAAM,CAACC,aAAa,CAAC,iCAAiC,CAAC,CAAC;SAEvEN,KAAK,CAACrB,QAAQ,CAAC;WACd,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAC,OAAI,CAAC7B,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAACpC,KAAK,CAACM,oBAAoB;UAC/G,CAAC;SAEF,OAAO2F,KAAK;QACZ,CAAC;;;KACF;KAAA,2CAGD;OAAA;OACC,OAAO,IAAI,CAAC5E,KAAK,CAAC0B,QAAQ,CAAC,uBAAuB,EAAE,YAAM;SACzD,IAAME,UAAU,GAAGC,6BAAU,CAACC,aAAa,EAAE;SAC7C,IAAM8C,KAAK,GAAG,IAAIhD,UAAU,CAACG,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAAC2C,UAAU,CAAC;WAC3DzC,QAAQ,EAAE,aAAa;WACvBC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,+CAA+C,CAAC;WACtEU,KAAK,EAAE,OAAI,CAACtB,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAACpC,KAAK,CAACO,WAAW;WAC1D4F,OAAO,EAAE;UACT,CAAC;SAEFC,aAAG,CAACC,IAAI,CAACJ,KAAK,CAACK,MAAM,CAACC,aAAa,CAAC,iCAAiC,CAAC,CAAC;SAEvEN,KAAK,CAACrB,QAAQ,CAAC;WACd,SAAS,EAAE1D,gBAAgB,CAAC2D,sBAAsB,CAAC,OAAI,CAAC7B,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAACpC,KAAK,CAACO,WAAW;UACtG,CAAC;SAEF,OAAO0F,KAAK;QACZ,CAAC;;;KACF;KAAA,+BAGD;OAAA;OACC,OAAO,IAAI,CAAC5E,KAAK,CAAC0B,QAAQ,CAAC,WAAW,EAAE,YAAM;SAC7C,IAAMuB,KAAK,uBAAO,OAAI,CAACtB,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAAC3B,IAAI,CAAC;SACzD,IAAI,CAACqD,cAAI,CAACyB,cAAc,CAACjB,KAAK,CAAC3D,MAAM,CAAC,EACtC;WACC2D,KAAK,CAAC3D,MAAM,GAAGgD,eAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC;;SAGzE,OAAO,IAAIR,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAACiD,IAAI,CAAC;WACnC/C,QAAQ,EAAE,MAAM;WAChBC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,iCAAiC,CAAC;WACxD6C,YAAY,EAAE,IAAI;WAClBnC,KAAK,EAALA;UACA,CAAC;QACF,CAAC;;;KACF;KAAA,iCAGD;OAAA;OACC,OAAO,IAAI,CAACjD,KAAK,CAAC0B,QAAQ,CAAC,aAAa,EAAE,YAAM;SAC/C,OAAO,IAAIK,EAAE,CAACC,OAAO,CAACC,EAAE,CAACC,KAAK,CAACmD,QAAQ,CAAC;WACvCjD,QAAQ,EAAE,QAAQ;WAClBC,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;WAC1DU,KAAK,EAAG,YAAM;aACb,IAAO1D,MAAM,GAAI,OAAI,CAACoC,cAAc,EAAE,CAACb,IAAI,CAACC,MAAM,CAA3CxB,MAAM;aACb,OAAO8E,MAAM,CAACC,OAAO,CAAC/E,MAAM,CAAC,CAACgF,MAAM,CAAC,UAACC,GAAG,SAAmB;eAAA;iBAAhBC,GAAG;iBAAExB,KAAK;eACrD,IAAIA,KAAK,EACT;iBACCuB,GAAG,CAACE,IAAI,CAACD,GAAG,CAAC;;eAGd,OAAOD,GAAG;cACV,EAAE,EAAE,CAAC;YACN,EAAG;WACJzB,KAAK,EAAE,CACN;aACCC,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,wCAAwC,CAAC;aAC9DU,KAAK,EAAE;YACP,EACD;aACCD,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC;aAC/DU,KAAK,EAAE;YACP,EACD;aACCD,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;aAC7DU,KAAK,EAAE;YACP,EACD;aACCD,IAAI,EAAEV,eAAG,CAACC,UAAU,CAAC,0CAA0C,CAAC;aAChEU,KAAK,EAAE;YACP;UAEF,CAAC;QACF,CAAC;;;KACF;KAAA,+BAGD;OAAA;OAAA,IADaqC,SAAS,uEAAG,IAAI;OAE5B,OAAO,IAAI,CAACtF,KAAK,CAAC0B,QAAQ,CAAC,WAAW,EAAE,YAAM;SAC7C,OAAO,IAAI6D,mCAAS,CAAC;WACpBlD,KAAK,EAAEC,eAAG,CAACC,UAAU,CAAC,uCAAuC,CAAC;WAC9DiD,MAAM,EAAE,CACP,OAAI,CAACC,aAAa,EAAE,EACpB,OAAI,CAACC,YAAY,EAAE,EACnB,OAAI,CAAC3B,aAAa,EAAE,EACpB,OAAI,CAACE,cAAc,EAAE,EACrB,OAAI,CAACX,oBAAoB,EAAE,EAC3B,OAAI,CAACG,wBAAwB,EAAE,EAC/B,OAAI,CAACC,uBAAuB,EAAE,EAC9B,OAAI,CAACC,iBAAiB,EAAE,EACxB,OAAI,CAACC,4BAA4B,EAAE,EACnC,OAAI,CAACC,iCAAiC,EAAE,EACxC,OAAI,CAACC,wBAAwB,EAAE,EAC/B,OAAI,CAACK,YAAY,EAAE,EACnB,OAAI,CAACQ,cAAc,EAAE,CACrB;WACD/B,QAAQ,EAAExC,iBAAO,CAACuF,QAAQ,CAAC,OAAI,CAACC,YAAY,CAAC9C,IAAI,CAAC,OAAI,CAAC,EAAE,EAAE,CAAC;WAC5D+C,iBAAiB,EAAE,2BAAC5C,KAAK,EAAK;aAC7BA,KAAK,CAACzE,KAAK,aAAMyE,KAAK,CAACzE,KAAK,cAAIyE,KAAK,CAACxE,IAAI,CAAE;aAC5CwE,KAAK,CAACxE,IAAI,GAAGwE,KAAK,CAACxE,IAAI,KAAK,MAAM;aAClCwE,KAAK,CAAC9D,MAAM,GAAGmB,cAAI,CAACwF,SAAS,CAAC7C,KAAK,CAAC9D,MAAM,CAAC;aAE3C8D,KAAK,CAACtE,KAAK,GAAG;eACbC,OAAO,EAAEiB,gBAAgB,CAACkG,4BAA4B,CACrD9C,KAAK,CAACrE,OAAO,CAACoH,MAAM,EAAE,EACtB/C,KAAK,CAACrE,OAAO,CAACqH,UAAU,EAAE,CAC1B;eACDpH,WAAW,EAAEgB,gBAAgB,CAACkG,4BAA4B,CACzD9C,KAAK,CAACpE,WAAW,CAACmH,MAAM,EAAE,EAC1B/C,KAAK,CAACpE,WAAW,CAACoH,UAAU,EAAE,CAC9B;eACDlH,IAAI,EAAEc,gBAAgB,CAACkG,4BAA4B,CAClD9C,KAAK,CAAClE,IAAI,CAACiH,MAAM,EAAE,EACnB/C,KAAK,CAAClE,IAAI,CAACkH,UAAU,EAAE,CACvB;eACDnH,UAAU,EAAEe,gBAAgB,CAACkG,4BAA4B,CACxD9C,KAAK,CAACnE,UAAU,CAACkH,MAAM,EAAE,EACzB/C,KAAK,CAACnE,UAAU,CAACmH,UAAU,EAAE,CAC7B;eACDjH,eAAe,EAAEa,gBAAgB,CAACkG,4BAA4B,CAC7D9C,KAAK,CAACjE,eAAe,CAACgH,MAAM,EAAE,EAC9B/C,KAAK,CAACjE,eAAe,CAACiH,UAAU,EAAE,CAClC;eACDhH,oBAAoB,EAAEY,gBAAgB,CAACkG,4BAA4B,CAClE9C,KAAK,CAAChE,oBAAoB,CAAC+G,MAAM,EAAE,EACnC/C,KAAK,CAAChE,oBAAoB,CAACgH,UAAU,EAAE,CACvC;eACD/G,WAAW,EAAEW,gBAAgB,CAACkG,4BAA4B,CACzD9C,KAAK,CAAC/D,WAAW,CAAC8G,MAAM,EAAE,EAC1B/C,KAAK,CAAC/D,WAAW,CAAC+G,UAAU,EAAE;cAE/B;aAEDhD,KAAK,CAAC1D,MAAM,GAAG;eACdC,IAAI,EAAEyD,KAAK,CAAC1D,MAAM,CAAC2G,QAAQ,CAAC,MAAM,CAAC;eACnCvG,KAAK,EAAEsD,KAAK,CAAC1D,MAAM,CAAC2G,QAAQ,CAAC,OAAO,CAAC;eACrCzG,GAAG,EAAEwD,KAAK,CAAC1D,MAAM,CAAC2G,QAAQ,CAAC,KAAK,CAAC;eACjCxG,MAAM,EAAEuD,KAAK,CAAC1D,MAAM,CAAC2G,QAAQ,CAAC,QAAQ;cACtC;aAED,IAAIjD,KAAK,CAAC7D,IAAI,CAACE,MAAM,KAAKgD,eAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC,EACnF;eACCU,KAAK,CAAC7D,IAAI,CAACE,MAAM,GAAG,EAAE;eACtB2D,KAAK,CAAC7D,IAAI,CAACC,GAAG,GAAG,EAAE;;aAGpB,OAAO4D,KAAK,CAACrE,OAAO;aACpB,OAAOqE,KAAK,CAACpE,WAAW;aACxB,OAAOoE,KAAK,CAAClE,IAAI;aACjB,OAAOkE,KAAK,CAACnE,UAAU;aACvB,OAAOmE,KAAK,CAACjE,eAAe;aAC5B,OAAOiE,KAAK,CAAChE,oBAAoB;aACjC,OAAOgE,KAAK,CAAC/D,WAAW;aAExB,OAAO+D,KAAK;YACZ;WACDqC,SAAS,EAAEA,SAAS;WACpBa,WAAW,EAAE;UACb,CAAC;QACF,CAAC;;;KACF;KAAA,6BAGD;OACC,IAAMC,OAAO,GAAGC,oBAAU,CAACC,QAAQ,CAAC,aAAa,CAAC;OAClD,IAAIF,OAAO,EACX;SACC,IAAI,IAAI,CAACtG,OAAO,CAACyG,UAAU,EAC3B;WACC,OAAOH,OAAO,CAACxG,GAAG,CAAC,IAAI,CAACE,OAAO,CAACyG,UAAU,CAAC;;SAG5C,OAAOH,OAAO,CAACI,IAAI,EAAE,CAAC,CAAC,CAAC;;OAGzB,OAAO,IAAI;;;KACX;KAAA,6BAEYC,KAAgB,EAC7B;OACC,IAAMC,kBAAkB,GAAG,IAAI,CAAC/E,cAAc,EAAE;OAChD,IAAMgF,aAAa,GAAG;SACrB7F,IAAI,EAAE;WACLC,MAAM,EAAE0F,KAAK,CAACG,SAAS,EAAE,CAACxD,SAAS;;QAEpC;OACD,IAAMyD,aAAa,GAAGzG,iBAAO,CAACqB,KAAK,CAACiF,kBAAkB,EAAEC,aAAa,CAAC;OACtE,IAAI,CAAC9F,cAAc,CAACgG,aAAa,CAAC;OAClC,IAAI,CAAC5F,UAAU,EAAE,CAACF,MAAM,CAAC+F,MAAM,CAACD,aAAa,CAAC/F,IAAI,CAACC,MAAM,CAAC;OAE1D,IAAMgG,iBAAoC,GAAGC,oDAAiB,CAACvG,WAAW,EAAE;OAC5E,IAAIsG,iBAAiB,CAACE,OAAO,EAAE,EAC/B;SACC,IAAMC,cAAc,GAAGH,iBAAiB,CAACI,qBAAqB,EAAE;SAChE,IAAMC,cAAc,GAAGL,iBAAiB,CAACpF,cAAc,EAAE;SAEzDuF,cAAc,CAACpG,IAAI,CAACC,MAAM,GAAG8F,aAAa,CAAC/F,IAAI,CAACC,MAAM;SACtDgG,iBAAiB,CAACM,qBAAqB,CAACH,cAAc,CAAC;SAEvDE,cAAc,CAACtG,IAAI,CAACC,MAAM,GAAG8F,aAAa,CAAC/F,IAAI,CAACC,MAAM;SACtDgG,iBAAiB,CAAClG,cAAc,CAACuG,cAAc,CAAC;;OAGjD,IAAI,CAACjH,qBAAqB,EAAE;MAC5B;;KAED;KAAA,gCAEA;OACC,OAAOK,eAAG,CAACC,WAAW,EAAE,CAAC6G,cAAc,EAAE,KAAK,WAAW;;;KACzD;KAAA,iCAGD;OAAA;OACC,OAAOlH,iBAAO,CACZgB,aAAa,CAAC,iBAAiB,CAAC,CAChCC,IAAI,CAAC,iBAAkB;SAAA,IAAhBC,UAAU,SAAVA,UAAU;SACjB,IAAIA,UAAU,EACd;WACC,IAAMiG,UAAU,GAAGjG,UAAU,CAACb,WAAW,EAAE;WAC3C,IAAM+G,WAAW,GAAG,OAAI,CAAC7F,cAAc,EAAE;WAEzC4F,UAAU,CAACE,UAAU,CAACD,WAAW,CAACE,EAAE,CAAC;WAErC,OAAOH,UAAU,CAACI,WAAW,CAACH,WAAW,CAAC;;SAG3C,OAAO,IAAI;QACX,CAAC;;;KACH;KAAA,kCAGD;OAAA;OACC,IAAOI,YAAY,GAAI,IAAI,CAAC9H,OAAO,CAA5B8H,YAAY;OACnB,IAAO7G,MAAM,GAAI,IAAI,CAACY,cAAc,EAAE,CAACb,IAAI,CAApCC,MAAM;OAEb,IAAM8G,QAAQ,GAAGD,YAAY,CAACE,IAAI,CAAC5C,aAAa,CAAC,gBAAgB,CAAC;OAClEH,aAAG,CAACgD,IAAI,CAACF,QAAQ,EAAE;SAClB,qBAAqB,EAAE9G,MAAM;SAC7B,wBAAwB,EAAE;QAC1B,CAAC;OAEFX,iBAAO,CACLgB,aAAa,CAAC,iBAAiB,CAAC,CAChCC,IAAI,CAAC,iBAAkB;SAAA,IAAhBC,UAAU,SAAVA,UAAU;SACjB,IAAIA,UAAU,EACd;WACC,IAAMiG,UAAU,GAAGjG,UAAU,CAACb,WAAW,EAAE;WAC3C,IAAM+G,WAAW,GAAG,OAAI,CAAC7F,cAAc,EAAE;WACzC4F,UAAU,CAACE,UAAU,CAACD,WAAW,CAACE,EAAE,CAAC;;QAEtC,CAAC;OAEHM,uBAAO,CACLvH,WAAW,EAAE,CACbwH,MAAM,CACN,6BAA6B,EAC7B;SACCC,KAAK,EAAEN,YAAY,CAACF,EAAE;SACtB5G,IAAI,EAAE;WACL,gBAAgB,EAAE;aACjBqH,KAAK,EAAE;eACN,qBAAqB,EAAEC,IAAI,CAACC,SAAS,CAACtH,MAAM,CAAC;eAC7C,wBAAwB,EAAE;;;UAG5B;SACDuH,GAAG,EAAEV,YAAY,CAACU,GAAG;SACrBC,MAAM,EAAEX,YAAY,CAACW;QACrB,EACD;SAACC,IAAI,EAAEZ,YAAY,CAACa,QAAQ,CAACD;QAAK,CAClC,CACAnH,IAAI,CAACU,EAAE,CAACC,OAAO,CAAC0G,OAAO,CAACjI,WAAW,EAAE,CAACiE,IAAI,EAAE,CAAC;;;KAC/C;KAAA,wCAGD;OAAA;OACC,IAAI,IAAI,CAACiE,aAAa,EAAE,EACxB;SACCvI,iBAAO,CACLgB,aAAa,CAAC,oCAAoC,CAAC,CACnDC,IAAI,CAAC,iBAAyB;WAAA,IAAvB2F,iBAAiB,SAAjBA,iBAAiB;WACxB,IAAMD,iBAAiB,GAAGC,iBAAiB,CAACvG,WAAW,EAAE;WACzDsG,iBAAiB,CAAC6B,eAAe,CAAC,OAAI,CAAC9I,OAAO,CAAC8H,YAAY,CAAC;WAE5D,KAAK,OAAI,CAACiB,cAAc,EAAE;WAE1B,IAAI9B,iBAAiB,CAAC+B,cAAc,EAAE,EACtC;aACC/B,iBAAiB,CAACgC,qBAAqB,EAAE;;UAE1C,CAAC;QACH,MAED;SACC,IAAI,CAACC,eAAe,EAAE;;;;KAEvB;KAAA,uCAvb6BrK,KAAa,EAC3C;OACC,OAAOsK,kDAAgB,CAACC,MAAM,OAAvBD,kDAAgB,iCACnBA,kDAAgB,CAACE,QAAQ,CAACxK,KAAK,CAAC,EACnC;;;KACD;KAAA,6CAEmCsE,KAAa,EACjD;OAAA,IADmDmG,OAAe,uEAAG,IAAI;OAExE,IAAMC,aAAa,GAAGJ,kDAAgB,CAACE,QAAQ,CAAClG,KAAK,CAAC;OAEtD,IAAI,CAACR,cAAI,CAAC6G,KAAK,CAACF,OAAO,CAAC,EACxB;SACCC,aAAa,CAAC,CAAC,CAAC,GAAGD,OAAO;;OAG3B,OAAOH,kDAAgB,CAACM,KAAK,OAAtBN,kDAAgB,iCAAUI,aAAa,EAAC;;;GAC/C;CAAA,EAnPoCG,6BAAY;;;;;;;;"}