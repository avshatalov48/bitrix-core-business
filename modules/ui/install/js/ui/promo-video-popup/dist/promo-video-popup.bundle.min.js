this.BX=this.BX||{};(function(e,s,o,t,i,l){"use strict";let r=e=>e,a,n;const p=Object.freeze({TOP:"top",LEFT:"left",BOTTOM:"bottom",RIGHT:"right"});const d=Object.freeze({ACCEPT:"accept",HIDE:"hide"});const b=Object.freeze({LEFT:"left",RIGHT:"right",CENTER:"center"});var c=babelHelpers.classPrivateFieldLooseKey("videoSrc");var v=babelHelpers.classPrivateFieldLooseKey("title");var u=babelHelpers.classPrivateFieldLooseKey("width");var P=babelHelpers.classPrivateFieldLooseKey("text");var h=babelHelpers.classPrivateFieldLooseKey("icon");var f=babelHelpers.classPrivateFieldLooseKey("colors");var H=babelHelpers.classPrivateFieldLooseKey("targetOptions");var L=babelHelpers.classPrivateFieldLooseKey("angleOptions");var F=babelHelpers.classPrivateFieldLooseKey("offset");var y=babelHelpers.classPrivateFieldLooseKey("videoContainerMinHeight");var B=babelHelpers.classPrivateFieldLooseKey("buttonOptions");var m=babelHelpers.classPrivateFieldLooseKey("useOverlay");var O=babelHelpers.classPrivateFieldLooseKey("popup");var g=babelHelpers.classPrivateFieldLooseKey("iniPopup");var w=babelHelpers.classPrivateFieldLooseKey("getPopupClassname");var T=babelHelpers.classPrivateFieldLooseKey("getAnimationCloseClassName");var j=babelHelpers.classPrivateFieldLooseKey("renderPopupContent");var E=babelHelpers.classPrivateFieldLooseKey("renderVideo");var _=babelHelpers.classPrivateFieldLooseKey("renderAcceptButton");var I=babelHelpers.classPrivateFieldLooseKey("renderIcon");var C=babelHelpers.classPrivateFieldLooseKey("getPopupContentVariablesStyles");var K=babelHelpers.classPrivateFieldLooseKey("getOptionsTitleColor");var V=babelHelpers.classPrivateFieldLooseKey("getOptionsIconColor");var S=babelHelpers.classPrivateFieldLooseKey("getOptionsButtonColor");var U=babelHelpers.classPrivateFieldLooseKey("validateOptions");var x=babelHelpers.classPrivateFieldLooseKey("isIconExist");var $=babelHelpers.classPrivateFieldLooseKey("getButtonOptions");var R=babelHelpers.classPrivateFieldLooseKey("getDefaultButtonOptions");var z=babelHelpers.classPrivateFieldLooseKey("getPopupOverlay");var M=babelHelpers.classPrivateFieldLooseKey("getPopupFooterElementClassname");class N extends o.EventEmitter{constructor(e){var s,o,t;super(e);Object.defineProperty(this,M,{value:le});Object.defineProperty(this,z,{value:ie});Object.defineProperty(this,R,{value:te});Object.defineProperty(this,$,{value:oe});Object.defineProperty(this,x,{value:se});Object.defineProperty(this,U,{value:ee});Object.defineProperty(this,S,{value:Z});Object.defineProperty(this,V,{value:Q});Object.defineProperty(this,K,{value:J});Object.defineProperty(this,C,{value:Y});Object.defineProperty(this,I,{value:W});Object.defineProperty(this,_,{value:q});Object.defineProperty(this,E,{value:D});Object.defineProperty(this,j,{value:G});Object.defineProperty(this,T,{value:k});Object.defineProperty(this,w,{value:X});Object.defineProperty(this,g,{value:A});Object.defineProperty(this,c,{writable:true,value:void 0});Object.defineProperty(this,v,{writable:true,value:void 0});Object.defineProperty(this,u,{writable:true,value:void 0});Object.defineProperty(this,P,{writable:true,value:void 0});Object.defineProperty(this,h,{writable:true,value:void 0});Object.defineProperty(this,f,{writable:true,value:void 0});Object.defineProperty(this,H,{writable:true,value:void 0});Object.defineProperty(this,L,{writable:true,value:void 0});Object.defineProperty(this,F,{writable:true,value:void 0});Object.defineProperty(this,y,{writable:true,value:255});Object.defineProperty(this,B,{writable:true,value:null});Object.defineProperty(this,m,{writable:true,value:void 0});Object.defineProperty(this,O,{writable:true,value:void 0});this.setEventNamespace("UI.PromoVideoPopup");babelHelpers.classPrivateFieldLooseBase(this,U)[U](e);babelHelpers.classPrivateFieldLooseBase(this,c)[c]=e.videoSrc;babelHelpers.classPrivateFieldLooseBase(this,v)[v]=e.title;babelHelpers.classPrivateFieldLooseBase(this,u)[u]=(s=e.width)!=null?s:N.getWidth();babelHelpers.classPrivateFieldLooseBase(this,P)[P]=e.text;babelHelpers.classPrivateFieldLooseBase(this,h)[h]=babelHelpers.classPrivateFieldLooseBase(this,x)[x](e.icon)?e.icon:i.Main.B_24;babelHelpers.classPrivateFieldLooseBase(this,f)[f]=e.colors;babelHelpers.classPrivateFieldLooseBase(this,H)[H]=(o=e.targetOptions)!=null?o:null;babelHelpers.classPrivateFieldLooseBase(this,L)[L]=e.angleOptions||false;babelHelpers.classPrivateFieldLooseBase(this,F)[F]=e.offset;babelHelpers.classPrivateFieldLooseBase(this,y)[y]=e.videoContainerMinHeight;babelHelpers.classPrivateFieldLooseBase(this,B)[B]=(t=e.button)!=null?t:null;babelHelpers.classPrivateFieldLooseBase(this,m)[m]=e.useOverlay===true}static getWidth(){return 498}show(){if(!babelHelpers.classPrivateFieldLooseBase(this,O)[O]){babelHelpers.classPrivateFieldLooseBase(this,g)[g]()}if(babelHelpers.classPrivateFieldLooseBase(this,O)[O].isShown()){return}babelHelpers.classPrivateFieldLooseBase(this,O)[O].show()}hide(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,O)[O])==null?void 0:e.close()}isShown(){var e;return Boolean((e=babelHelpers.classPrivateFieldLooseBase(this,O)[O])==null?void 0:e.isShown())}adjustPosition(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,O)[O])==null?void 0:e.adjustPosition({forceBindPosition:true})}getWidth(){return babelHelpers.classPrivateFieldLooseBase(this,u)[u]}setTargetOptions(e){babelHelpers.classPrivateFieldLooseBase(this,H)[H]=e;if(babelHelpers.classPrivateFieldLooseBase(this,O)[O]){babelHelpers.classPrivateFieldLooseBase(this,O)[O].setBindElement(e)}return this}}function A(){var e,s;const o=getComputedStyle(document.body);const i=o.getPropertyValue("--ui-color-background-primary");const l=o.getPropertyValue("--ui-color-background-primary-rgb");babelHelpers.classPrivateFieldLooseBase(this,O)[O]=new t.Popup({bindElement:babelHelpers.classPrivateFieldLooseBase(this,H)[H],cacheable:false,width:babelHelpers.classPrivateFieldLooseBase(this,u)[u],borderRadius:"16px",angle:babelHelpers.classPrivateFieldLooseBase(this,L)[L],content:babelHelpers.classPrivateFieldLooseBase(this,j)[j](),closeByEsc:true,autoHide:true,closeIcon:true,background:`rgba(${l}, 0.5)`,contentBackground:i,contentPadding:12,contentBorderRadius:"8px",overlay:babelHelpers.classPrivateFieldLooseBase(this,z)[z](),className:babelHelpers.classPrivateFieldLooseBase(this,w)[w](),events:{onPopupClose:()=>{setTimeout((()=>{this.emit(d.HIDE);babelHelpers.classPrivateFieldLooseBase(this,O)[O].destroy();babelHelpers.classPrivateFieldLooseBase(this,O)[O]=null}),300)}},animation:{showClassName:"--show",closeClassName:babelHelpers.classPrivateFieldLooseBase(this,T)[T](),closeAnimationType:"animation"}});babelHelpers.classPrivateFieldLooseBase(this,O)[O].setOffset({offsetTop:(e=babelHelpers.classPrivateFieldLooseBase(this,F)[F])==null?void 0:e.top,offsetLeft:(s=babelHelpers.classPrivateFieldLooseBase(this,F)[F])==null?void 0:s.left})}function X(){var e,s;let o=["ui__promo-video-popup"];if(((e=babelHelpers.classPrivateFieldLooseBase(this,L)[L])==null?void 0:e.position)===p.RIGHT){o=[...o,"--from-right"]}if(((s=babelHelpers.classPrivateFieldLooseBase(this,L)[L])==null?void 0:s.position)===p.TOP){o=[...o,"--from-top"]}return o.join(" ")}function k(){var e;switch((e=babelHelpers.classPrivateFieldLooseBase(this,L)[L])==null?void 0:e.position){case p.RIGHT:{return"--close-left"}case p.TOP:{return"--close-bottom"}default:{return"--close"}}}function G(){return s.Tag.render(a||(a=r`
			<div
				class="ui__promo-video-popup-content"
				style="${0}"
			>
				<div class="ui__promo-video-popup-content_header">
					<div class="ui__promo-video-popup-content_header-icon">
						${0}
					</div>
					<div class="ui__promo-video-popup-content_header-title">
						${0}
					</div>
				</div>
				<div class="ui__promo-video-popup-content_promo-text">
					${0}
				</div>
				<div
					class="ui__promo-video-popup-content_promo-video-wrapper"
					style="min-height: ${0}"
				>
					${0}
				</div>
				<div class="${0}">
					${0}
				</div>
			</div>
		`),babelHelpers.classPrivateFieldLooseBase(this,C)[C](),babelHelpers.classPrivateFieldLooseBase(this,I)[I](),babelHelpers.classPrivateFieldLooseBase(this,v)[v],babelHelpers.classPrivateFieldLooseBase(this,P)[P],`${babelHelpers.classPrivateFieldLooseBase(this,y)[y]}px`,babelHelpers.classPrivateFieldLooseBase(this,E)[E](),babelHelpers.classPrivateFieldLooseBase(this,M)[M](),babelHelpers.classPrivateFieldLooseBase(this,_)[_]())}function D(){const e=s.Tag.render(n||(n=r`
			<video
				src="${0}"
				autoplay
				preload
				loop
				class="ui__promo-video-popup-content_promo-video"
			></video>
		`),babelHelpers.classPrivateFieldLooseBase(this,c)[c]);e.addEventListener("canplay",(()=>{e.muted=true;e.play()}));return e}function q(){const e=babelHelpers.classPrivateFieldLooseBase(this,$)[$]();const s=new l.Button({color:e.color,text:e.text,size:e.size,round:true,onclick:()=>{this.emit(d.ACCEPT)}});return s.render()}function W(){const e=getComputedStyle(document.body).getPropertyValue("--ui-color-on-primary");const s=new i.Icon({color:e,size:18,icon:babelHelpers.classPrivateFieldLooseBase(this,h)[h]});return s.render()}function Y(){const e={};if(babelHelpers.classPrivateFieldLooseBase(this,K)[K]()){e["--ui__promo-video-popup_title-color"]=babelHelpers.classPrivateFieldLooseBase(this,K)[K]()}if(babelHelpers.classPrivateFieldLooseBase(this,V)[V]()){e["--ui__promo-video-popup_icon-color"]=babelHelpers.classPrivateFieldLooseBase(this,V)[V]()}return Object.entries(e).map((([e,s])=>`${e}: ${s}`)).join(";")}function J(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,f)[f])==null?void 0:e.title}function Q(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,f)[f])==null?void 0:e.iconBackground}function Z(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,f)[f])==null?void 0:e.button}function ee(e){var o,t,i;const r=e==null?void 0:e.title;const a=e==null?void 0:e.text;const n=e==null?void 0:e.videoSrc;const p=e==null?void 0:(o=e.colors)==null?void 0:o.iconBackground;const d=e==null?void 0:(t=e.colors)==null?void 0:t.title;const b=e==null?void 0:(i=e.colors)==null?void 0:i.button;const c=e==null?void 0:e.targetOptions;const v=e==null?void 0:e.offset;const u=e==null?void 0:e.videoContainerMinHeight;if(!e){throw new TypeError("UI.PromoVideoPopup: options are required for constructor")}if(!c){throw new Error("UI.PromoVideoPopup: targetOptions is required option")}if(r&&s.Type.isString(r)===false){throw new TypeError("UI.PromoVideoPopup: title option must be string")}if(p&&s.Type.isStringFilled(p)===false){throw new TypeError("UI.PromoVideoPopup: colors.icon option must be string")}if(d&&s.Type.isStringFilled(d)===false){throw new TypeError("UI.PromoVideoPopup: colors.title option must be string")}if(b&&Object.values(l.ButtonColor).includes(b)===false){throw new TypeError("UI.PromoVideoPopup: colors.button option must be from ButtonColor from ui.buttons")}if(a&&s.Type.isString(a)===false){throw new TypeError("UI.PromoVideoPopup: description option must be string")}if(!n){throw new Error("UI.PromoVideoPopup: videoSrc is required option")}if(n&&s.Type.isStringFilled(n)===false){throw new Error("UI.PromoVideoPopup: videoSrc must be string")}if(v&&s.Type.isPlainObject(v)===false){throw new Error("UI.PromoVideoPopup: offset options must be plain object with top and left properties")}if(v!=null&&v.top&&s.Type.isNumber(v==null?void 0:v.top)===false){throw new TypeError("UI.PromoVideoPopup: offset.top option must be number")}if(v!=null&&v.left&&s.Type.isNumber(v==null?void 0:v.left)===false){throw new TypeError("UI.PromoVideoPopup: offset.left option must be number")}if(u&&s.Type.isNumber(u)===false){throw new TypeError("UI.PromoVideoPopup: videoContainerMinHeight option must be number")}}function se(e){return Object.values(i.Set).includes(e)}function oe(){var e,s,o,t,i,l,r,a;const n=babelHelpers.classPrivateFieldLooseBase(this,R)[R]();return{text:(e=(s=babelHelpers.classPrivateFieldLooseBase(this,B)[B])==null?void 0:s.text)!=null?e:n.text,color:(o=(t=babelHelpers.classPrivateFieldLooseBase(this,B)[B])==null?void 0:t.color)!=null?o:n.color,size:(i=(l=babelHelpers.classPrivateFieldLooseBase(this,B)[B])==null?void 0:l.size)!=null?i:n.size,position:(r=(a=babelHelpers.classPrivateFieldLooseBase(this,B)[B])==null?void 0:a.position)!=null?r:n.position}}function te(){return{text:s.Loc.getMessage("PROMO_VIDEO_POPUP_ACCEPT"),size:l.ButtonSize.SMALL,color:babelHelpers.classPrivateFieldLooseBase(this,S)[S]()||l.ButtonColor.PRIMARY,position:b.LEFT}}function ie(){return babelHelpers.classPrivateFieldLooseBase(this,m)[m]?{backgroundColor:"rgba(0, 0, 0, 0.4)"}:false}function le(){let e="";if(babelHelpers.classPrivateFieldLooseBase(this,$)[$]().position===b.CENTER){e="--align-center"}if(babelHelpers.classPrivateFieldLooseBase(this,$)[$]().position===b.RIGHT){e="--align-right"}return`ui__promo-video-popup-content_footer ${e}`}e.AnglePosition=p;e.PromoVideoPopupEvents=d;e.PromoVideoPopupButtonPosition=b;e.PromoVideoPopup=N})(this.BX.UI=this.BX.UI||{},BX,BX.Event,BX.Main,BX.UI.IconSet,BX.UI);
//# sourceMappingURL=promo-video-popup.bundle.map.js