{"version":3,"file":"registry.bundle.js","sources":["../src/components/elements/title-input.js","../src/components/elements/chat-avatar.js","../src/components/elements/chat-members.js","../src/components/elements/button-panel.js","../src/components/elements/heading.js","../src/components/sections/section/section.js","../src/components/elements/textarea.js","../src/components/elements/radio.js","../src/components/sections/settings/settings-section.js","../src/components/sections/rights/components/role-selector.js","../src/components/sections/rights/components/user-selector/user-selector.js","../src/components/sections/rights/components/user-selector/owner.js","../src/components/sections/rights/components/user-selector/managers.js","../src/components/sections/rights/const/dropdown-items.js","../src/components/sections/rights/const/config.js","../src/components/sections/rights/rights-section.js","../src/components/sections/appearance/appearance-section.js","../src/components/create/group-chat.js","../src/components/sections/conference/conference-section.js","../src/components/create/conference.js","../src/components/sections/privacy/privacy-section.js","../src/components/create/channel.js","../src/components/create/collab.js","../src/create-chat-content.js","../src/classes/chat-member-diff-manager.js","../src/helpers/get-collapsed-users-element.js","../src/components/update/group-chat.js","../src/components/update/channel.js","../src/update-chat-content.js"],"sourcesContent":["import './css/title-input.css';\n\n// @vue/component\nexport const TitleInput = {\n\tname: 'TitleInput',\n\tprops:\n\t{\n\t\tmodelValue: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['update:modelValue'],\n\tmounted()\n\t{\n\t\tthis.$refs.titleInput.focus();\n\t},\n\tmethods:\n\t{\n\t\tonInput(event: Event)\n\t\t{\n\t\t\tthis.$emit('update:modelValue', event.target.value);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-forms-title-input__container\">\n\t\t\t<input\n\t\t\t\t:value=\"modelValue\"\n\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\t@input=\"onInput\"\n\t\t\t\tclass=\"bx-im-chat-forms-title-input__input\"\n\t\t\t\tref=\"titleInput\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Type } from 'main.core';\n\nimport { ChatService } from 'im.v2.provider.service';\n\nimport './css/chat-avatar.css';\n\n// @vue/component\nexport const ChatAvatar = {\n\tname: 'ChatAvatar',\n\tprops:\n\t{\n\t\tavatarFile: {\n\t\t\trequired: true,\n\t\t\tvalidator(value): boolean\n\t\t\t{\n\t\t\t\treturn (value instanceof File) || Type.isNull(value);\n\t\t\t},\n\t\t},\n\t\texistingAvatarUrl: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tchatTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tsquared: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['avatarChange'],\n\tcomputed:\n\t{\n\t\tpreparedAvatar(): string | null\n\t\t{\n\t\t\tif (!this.avatarFile)\n\t\t\t{\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\treturn URL.createObjectURL(this.avatarFile);\n\t\t},\n\t\tavatarToShow(): string | null\n\t\t{\n\t\t\treturn this.preparedAvatar || this.existingAvatarUrl;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonAvatarChangeClick()\n\t\t{\n\t\t\tthis.$refs.avatarInput.click();\n\t\t},\n\t\tasync onAvatarSelect(event: Event)\n\t\t{\n\t\t\tconst input: HTMLInputElement = event.target;\n\t\t\tconst file: File = input.files[0];\n\t\t\tif (!file)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst preparedAvatar = await this.getChatService().prepareAvatar(file);\n\t\t\tif (!preparedAvatar)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$emit('avatarChange', preparedAvatar);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div \n\t\t\tclass=\"bx-im-chat-forms-chat-avatar__container\" \n\t\t\t:class=\"{'--squared': squared}\" \n\t\t\t@click=\"onAvatarChangeClick\"\n\t\t>\n\t\t\t<img \n\t\t\t\tv-if=\"avatarToShow\" \n\t\t\t\t:src=\"avatarToShow\" \n\t\t\t\t:alt=\"chatTitle\" \n\t\t\t\tclass=\"bx-im-chat-forms-chat-avatar__image\" \n\t\t\t/>\n\t\t</div>\n\t\t<input \n\t\t\ttype=\"file\" \n\t\t\t@change=\"onAvatarSelect\" \n\t\t\taccept=\"image/*\" \n\t\t\tclass=\"bx-im-chat-forms-chat-avatar__input\" \n\t\t\tref=\"avatarInput\"\n\t\t>\n\t`,\n};\n","import { BaseEvent } from 'main.core.events';\nimport {\n\tTagSelector,\n\ttype Dialog as SelectorDialog,\n\ttype Item as SelectorItem,\n\ttype EntityOptions,\n} from 'ui.entity-selector';\n\nimport { Core } from 'im.v2.application.core';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\n\nimport './css/chat-members.css';\n\n// @vue/component\nexport const ChatMembersSelector = {\n\tprops:\n\t{\n\t\tchatMembers: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tcustomElements: {\n\t\t\ttype: Array,\n\t\t\tdefault: () => [],\n\t\t},\n\t},\n\temits: ['membersChange'],\n\tcreated()\n\t{\n\t\tconst addButtonCaption = this.loc('IM_CREATE_CHAT_USER_SELECTOR_ADD_MEMBERS_V2');\n\n\t\tthis.membersSelector = new TagSelector({\n\t\t\tmaxHeight: 99,\n\t\t\tplaceholder: '',\n\t\t\taddButtonCaption,\n\t\t\taddButtonCaptionMore: addButtonCaption,\n\t\t\tshowCreateButton: false,\n\t\t\titems: this.customElements,\n\t\t\tdialogOptions: {\n\t\t\t\tenableSearch: true,\n\t\t\t\talwaysShowLabels: true,\n\t\t\t\tcontext: 'IM_CHAT_CREATE',\n\t\t\t\tentities: this.getEntitiesConfig(),\n\t\t\t\tpreselectedItems: this.chatMembers,\n\t\t\t\tundeselectedItems: [['user', Core.getUserId()]],\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.onItemsChange,\n\t\t\t\t\t'Item:onDeselect': this.onItemsChange,\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\tmounted()\n\t{\n\t\tthis.membersSelector.renderTo(this.$refs.members);\n\t},\n\tmethods:\n\t{\n\t\tgetEntitiesConfig(): EntityOptions[]\n\t\t{\n\t\t\tconst entitiesConfig = [{ id: 'user' }];\n\t\t\tconst allowDepartments = FeatureManager.isFeatureAvailable(Feature.chatDepartments);\n\t\t\tif (allowDepartments)\n\t\t\t{\n\t\t\t\tentitiesConfig.push({\n\t\t\t\t\tid: 'department',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tselectMode: 'usersAndDepartments',\n\t\t\t\t\t\tallowFlatDepartments: true,\n\t\t\t\t\t\tallowSelectRootDepartment: true,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tentitiesConfig.push({ id: 'department' });\n\t\t\t}\n\n\t\t\treturn entitiesConfig;\n\t\t},\n\t\tonItemsChange(event: BaseEvent)\n\t\t{\n\t\t\tconst dialog: SelectorDialog = event.getTarget();\n\t\t\tconst selectedItems: SelectorItem[] = dialog.getSelectedItems();\n\t\t\tthis.$emit('membersChange', selectedItems.map((item) => this.prepareTag(item)));\n\t\t},\n\t\tprepareTag(tag: SelectorItem): [string, number | string]\n\t\t{\n\t\t\treturn [tag.getEntityId(), tag.getId()];\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-forms-chat-members__container\" ref=\"members\"></div>\n\t`,\n};\n","import { Button as MessengerButton, ButtonSize, ButtonColor } from 'im.v2.component.elements';\n\nimport './css/button-panel.css';\n\n// @vue/component\nexport const ButtonPanel = {\n\tcomponents: { MessengerButton },\n\tprops:\n\t{\n\t\tisCreating: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tcreateButtonTitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['create', 'cancel'],\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonColor: () => ButtonColor,\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-forms-button-panel__container\">\n\t\t\t<MessengerButton\n\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t:color=\"ButtonColor.Success\"\n\t\t\t\t:text=\"createButtonTitle\"\n\t\t\t\t:isLoading=\"isCreating\"\n\t\t\t\t:isDisabled=\"isCreating\"\n\t\t\t\t@click=\"$emit('create')\"\n\t\t\t\tclass=\"bx-im-chat-forms-button-panel__create-button\"\n\t\t\t/>\n\t\t\t<MessengerButton\n\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t:color=\"ButtonColor.Link\"\n\t\t\t\t:text=\"loc('IM_CREATE_CHAT_CANCEL')\"\n\t\t\t\t:isDisabled=\"isCreating\"\n\t\t\t\t@click=\"$emit('cancel')\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { ChatHint } from 'im.v2.component.elements';\n\nimport './css/heading.css';\n\n// @vue/component\nexport const CreateChatHeading = {\n\tname: 'CreateChatHeading',\n\tcomponents: { ChatHint },\n\tprops:\n\t{\n\t\ttext: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thintText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tpreparedText(): string\n\t\t{\n\t\t\treturn this.text\n\t\t\t\t.replace('#SUBTITLE_START#', '<span class=\"bx-im-content-create-chat__subheading\">')\n\t\t\t\t.replace('#SUBTITLE_END#', '</span>');\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__heading_container\">\n\t\t\t<div class=\"bx-im-content-create-chat__heading\" v-html=\"preparedText\"></div>\n\t\t\t<ChatHint v-if=\"hintText\" :text=\"hintText\" />\n\t\t</div>\n\t`,\n};\n","import { ExpandAnimation } from 'im.v2.component.animation';\n\nimport './css/section.css';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const CreateChatSection = {\n\tcomponents: { ExpandAnimation },\n\tprops: {\n\t\tname: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\talwaysOpened: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisOpened: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tcontainerClasses(): string[]\n\t\t{\n\t\t\treturn [`--${this.name}`, { '--active': this.isOpened }];\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tif (this.alwaysOpened)\n\t\t{\n\t\t\tthis.isOpened = true;\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tonHeaderClick()\n\t\t{\n\t\t\tif (this.alwaysOpened)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.isOpened = !this.isOpened;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :class=\"containerClasses\" class=\"bx-im-content-create-chat__section bx-im-content-create-chat__section_scope\">\n\t\t\t<div @click=\"onHeaderClick\" class=\"bx-im-content-create-chat__section_header\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__section_left\">\n\t\t\t\t\t<div class=\"bx-im-content-create-chat__section_icon\"></div>\n\t\t\t\t\t<div class=\"bx-im-content-create-chat__section_text\">{{ title }}</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"!alwaysOpened\" class=\"bx-im-content-create-chat__section_right\"></div>\t\n\t\t\t</div>\n\t\t\t<ExpandAnimation>\n\t\t\t\t<div v-if=\"isOpened\" class=\"bx-im-content-create-chat__section_content_container\">\n\t\t\t\t\t<div class=\"bx-im-content-create-chat__section_content\">\n\t\t\t\t\t\t<slot></slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</ExpandAnimation>\n\t\t</div>\n\t`,\n};\n","import './css/textarea.css';\n\n// @vue/component\nexport const TextareaInput = {\n\tname: 'TextareaInput',\n\tprops:\n\t{\n\t\tvalue: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tplaceholder: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tborder: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t\trounded: {\n\t\t\ttype: Boolean,\n\t\t\trequired: false,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\temits: ['input'],\n\tcomputed:\n\t{\n\t\tcontainerClasses(): { [className: string]: boolean }\n\t\t{\n\t\t\treturn { '--no-border': !this.border, '--rounded': this.rounded };\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonInput(event: Event)\n\t\t{\n\t\t\tthis.$emit('input', event.target.value);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__textarea_container\" :class=\"containerClasses\">\n\t\t\t<div class=\"ui-ctl ui-ctl-textarea ui-ctl-w100 ui-ctl-no-resize\">\n\t\t\t\t<textarea\n\t\t\t\t\t:value=\"value\"\n\t\t\t\t\t:placeholder=\"placeholder\"\n\t\t\t\t\t@input=\"onInput\"\n\t\t\t\t\tclass=\"bx-im-content-create-chat__textarea ui-ctl-element\"\n\t\t\t\t></textarea>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Text } from 'main.core';\n\nimport './css/radio.css';\n\nexport type RadioOptionItem = {\n\tvalue: OptionValue,\n\ttext: string,\n\tselected: boolean,\n\tsubtext?: string,\n\thtml?: boolean,\n};\n\ntype OptionValue = string | number | boolean;\n\n// @vue/component\nexport const RadioOption = {\n\tname: 'RadioOption',\n\tprops:\n\t{\n\t\titems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['change'],\n\tdata(): { groupName: string }\n\t{\n\t\treturn {\n\t\t\tgroupName: Text.getRandom(),\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\toptions(): RadioOptionItem[]\n\t\t{\n\t\t\treturn this.items;\n\t\t},\n\t\tselectedValue(): OptionValue\n\t\t{\n\t\t\treturn this.options.find((option) => {\n\t\t\t\treturn option.selected === true;\n\t\t\t});\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonInput(option: RadioOptionItem): void\n\t\t{\n\t\t\tthis.$emit('change', option.value);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat-radio__container\">\n\t\t\t<label v-for=\"option in options\" class=\"bx-im-content-create-chat-radio__item ui-ctl ui-ctl-radio\">\n\t\t\t\t<input type=\"radio\" class=\"ui-ctl-element\" :name=\"groupName\" :checked=\"option.selected\" @input=\"onInput(option)\">\n\t\t\t\t<div class=\"ui-ctl-label-text\">\n\t\t\t\t\t<!-- Text -->\n\t\t\t\t\t<div v-if=\"option.html\" class=\"bx-im-content-create-chat-radio__label_title\" v-html=\"option.text\"></div>\n\t\t\t\t\t<div v-else class=\"bx-im-content-create-chat-radio__label_title\">{{ option.text }}</div>\n\t\t\t\t\t<!-- Subtext -->\n\t\t\t\t\t<template v-if=\"option.subtext\">\n\t\t\t\t\t\t<div v-if=\"option.html\" class=\"bx-im-content-create-chat-radio__label_subtitle\" v-html=\"option.subtext\"></div>\n\t\t\t\t\t\t<div v-else class=\"bx-im-content-create-chat-radio__label_subtitle\">{{ option.subtext }}</div>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t</div>\n\t`,\n};\n","import 'ui.forms';\n\nimport { Dropdown } from 'im.v2.component.elements';\n\nimport { CreateChatSection } from '../section/section';\nimport { TextareaInput } from '../../elements/textarea';\nimport { RadioOption, type RadioOptionItem } from '../../elements/radio';\nimport { CreateChatHeading } from '../../elements/heading';\n\nimport './settings-section.css';\n\n// @vue/component\nexport const SettingsSection = {\n\tcomponents: { CreateChatSection, CreateChatHeading, Dropdown, TextareaInput, RadioOption },\n\tprops: {\n\t\tdescription: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\twithSearchOption: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tisAvailableInSearch: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['chatTypeChange', 'descriptionChange'],\n\tcomputed:\n\t{\n\t\tprivacyOptions(): RadioOptionItem[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tvalue: false,\n\t\t\t\t\ttext: this.loc('IM_CREATE_CHAT_SETTINGS_SECTION_PRIVATE_TITLE'),\n\t\t\t\t\tsubtext: this.loc('IM_CREATE_CHAT_SETTINGS_SECTION_PRIVATE_SUBTITLE'),\n\t\t\t\t\tselected: !this.isAvailableInSearch,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: true,\n\t\t\t\t\ttext: this.loc('IM_CREATE_CHAT_SETTINGS_SECTION_OPEN_TITLE'),\n\t\t\t\t\tsubtext: this.loc('IM_CREATE_CHAT_SETTINGS_SECTION_OPEN_SUBTITLE'),\n\t\t\t\t\tselected: this.isAvailableInSearch,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t\tdescriptionPlaceholderText(): string\n\t\t{\n\t\t\treturn this.loc('IM_CREATE_CHAT_SETTINGS_SECTION_DESCRIPTION_PLACEHOLDER', {\n\t\t\t\t'#BR#': '\\n',\n\t\t\t\t'#QUOTE_START#': '\"',\n\t\t\t\t'#QUOTE_END#': '\"',\n\t\t\t});\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonTypeChange(isAvailableInSearch: boolean)\n\t\t{\n\t\t\tthis.$emit('chatTypeChange', isAvailableInSearch);\n\t\t},\n\t\tonDescriptionChange(description: string)\n\t\t{\n\t\t\tthis.$emit('descriptionChange', description);\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<CreateChatSection name=\"settings\" :title=\"loc('IM_CREATE_CHAT_SETTINGS_SECTION')\">\n\t\t\t<div v-if=\"withSearchOption\" class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<CreateChatHeading :text=\"loc('IM_CREATE_CHAT_SETTINGS_SECTION_PRIVACY')\" />\n\t\t\t\t<RadioOption :items=\"privacyOptions\" @change=\"onTypeChange\" />\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<CreateChatHeading :text=\"loc('IM_CREATE_CHAT_SETTINGS_SECTION_DESCRIPTION')\" />\n\t\t\t\t<div class=\"bx-im-chat-forms-settings__description_container\">\n\t\t\t\t\t<TextareaInput\n\t\t\t\t\t\t:value=\"description\"\n\t\t\t\t\t\t:placeholder=\"descriptionPlaceholderText\"\n\t\t\t\t\t\t:rounded=\"false\"\n\t\t\t\t\t\t@input=\"onDescriptionChange\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</CreateChatSection>\n\t`,\n};\n","import { Dropdown, ChatHint } from 'im.v2.component.elements';\n\nimport '../css/role-selector.css';\n\n// @vue/component\nexport const RoleSelector = {\n\tname: 'RoleSelector',\n\tcomponents: { Dropdown, ChatHint },\n\tprops:\n\t{\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tdropdownItems: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tdropdownId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thintText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\temits: ['itemChange'],\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t<div class=\"bx-im-content-create-chat__section-header\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__section-heading\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</div>\n\t\t\t\t<ChatHint v-if=\"hintText\" :text=\"hintText\" />\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-chat-forms-chat-settings__manage-select\">\n\t\t\t\t<Dropdown\n\t\t\t\t\t:items=\"dropdownItems\"\n\t\t\t\t\t:id=\"dropdownId\" \n\t\t\t\t\t@itemChange=\"$emit('itemChange', $event)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ChatHint } from 'im.v2.component.elements';\n\n// @vue/component\nexport const UserSelector = {\n\tname: 'UserSelector',\n\tcomponents: { ChatHint },\n\tprops:\n\t{\n\t\ttitle: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\thintText: {\n\t\t\ttype: String,\n\t\t\trequired: false,\n\t\t\tdefault: '',\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t<div class=\"bx-im-content-create-chat__section-header\">\n\t\t\t\t<div class=\"bx-im-content-create-chat__section-heading\">\n\t\t\t\t\t{{ title }}\n\t\t\t\t</div>\n\t\t\t\t<ChatHint v-if=\"hintText\" :text=\"hintText\" />\n\t\t\t</div>\n\t\t\t<slot></slot>\n\t\t</div>\n\t`,\n};\n","import { TagSelector } from 'ui.entity-selector';\n\nimport '../../css/owner.css';\n\n// @vue/component\nexport const OwnerSelector = {\n\tname: 'OwnerSelector',\n\tprops:\n\t{\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['ownerChange'],\n\tcreated()\n\t{\n\t\tthis.membersSelector = new TagSelector({\n\t\t\tmultiple: false,\n\t\t\tmaxHeight: 33,\n\t\t\tplaceholder: '',\n\t\t\taddButtonCaption: this.loc('IM_CREATE_CHAT_USER_SELECTOR_CHANGE_OWNER'),\n\t\t\taddButtonCaptionMore: this.loc('IM_CREATE_CHAT_USER_SELECTOR_CHANGE_OWNER'),\n\t\t\tshowCreateButton: false,\n\t\t\tdialogOptions: {\n\t\t\t\tenableSearch: false,\n\t\t\t\tcontext: 'IM_CHAT_CREATE',\n\t\t\t\tentities: [\n\t\t\t\t\t{ id: 'user' },\n\t\t\t\t\t{ id: 'department' },\n\t\t\t\t],\n\t\t\t\tpreselectedItems: [['user', this.ownerId]],\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonBeforeTagAdd: (event) => {\n\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\ttag.setDeselectable(false);\n\t\t\t\t},\n\t\t\t\tonAfterTagAdd: (event) => {\n\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\tthis.$emit('ownerChange', tag.id);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\tmounted()\n\t{\n\t\tthis.membersSelector.renderTo(this.$refs.owner);\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-forms-sections-owner__container\" ref=\"owner\"></div>\n\t`,\n};\n","import { TagSelector } from 'ui.entity-selector';\n\nimport { Core } from 'im.v2.application.core';\n\nimport '../../css/managers.css';\n\n// @vue/component\nexport const ManagersSelector = {\n\tprops:\n\t{\n\t\tmanagerIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['managersChange'],\n\tcomputed:\n\t{\n\t\tcurrentUserId(): number\n\t\t{\n\t\t\treturn Core.getUserId();\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tconst preselectedItems = this.managerIds.map((userId: number) => {\n\t\t\treturn ['user', userId];\n\t\t});\n\n\t\tthis.membersSelector = new TagSelector({\n\t\t\tmaxHeight: 99,\n\t\t\tplaceholder: '',\n\t\t\taddButtonCaption: this.loc('IM_CREATE_CHAT_RIGHTS_SECTION_ADD_MANAGERS'),\n\t\t\taddButtonCaptionMore: this.loc('IM_CREATE_CHAT_RIGHTS_SECTION_ADD_MANAGERS'),\n\t\t\tshowCreateButton: false,\n\t\t\tdialogOptions: {\n\t\t\t\tenableSearch: false,\n\t\t\t\tcontext: 'IM_CHAT_CREATE',\n\t\t\t\tentities: [\n\t\t\t\t\t{ id: 'user' },\n\t\t\t\t\t{ id: 'department' },\n\t\t\t\t],\n\t\t\t\tpreselectedItems,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonAfterTagAdd: (event) => {\n\t\t\t\t\tconst selector = event.getTarget();\n\t\t\t\t\tthis.$emit('managersChange', selector.getTags().map((tag) => tag.id));\n\t\t\t\t},\n\t\t\t\tonAfterTagRemove: (event) => {\n\t\t\t\t\tconst selector = event.getTarget();\n\t\t\t\t\tthis.$emit('managersChange', selector.getTags().map((tag) => tag.id));\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n\tmounted()\n\t{\n\t\tthis.membersSelector.renderTo(this.$refs.managers);\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-forms-sections-managers__container\" ref=\"managers\"></div>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nimport { UserRole } from 'im.v2.const';\n\nimport type { DropdownItem } from 'im.v2.component.elements';\n\nexport const rightsDropdownItems: DropdownItem[] = [\n\t{\n\t\tvalue: UserRole.member,\n\t\ttext: Loc.getMessage('IM_CREATE_CHAT_RIGHTS_SECTION_ROLE_MEMBER'),\n\t},\n\t{\n\t\tvalue: UserRole.manager,\n\t\ttext: Loc.getMessage('IM_CREATE_CHAT_RIGHTS_SECTION_ROLE_MANAGER_V2'),\n\t},\n\t{\n\t\tvalue: UserRole.owner,\n\t\ttext: Loc.getMessage('IM_CREATE_CHAT_RIGHTS_SECTION_ROLE_OWNER'),\n\t\tdefault: true,\n\t},\n];\n","import { Loc } from 'main.core';\n\nimport { ChatType, ChatActionGroup } from 'im.v2.const';\n\nexport const BlocksByChatType = {\n\t[ChatType.channel]: new Set([\n\t\tChatActionGroup.manageUsersAdd,\n\t\tChatActionGroup.manageUsersDelete,\n\t\tChatActionGroup.manageMessages,\n\t]),\n\tdefault: new Set([\n\t\tChatActionGroup.manageUsersAdd,\n\t\tChatActionGroup.manageUsersDelete,\n\t\tChatActionGroup.manageUi,\n\t\tChatActionGroup.manageMessages,\n\t]),\n};\n\nexport const CanAddUsersCaptionByChatType = {\n\t[ChatType.channel]: Loc.getMessage('IM_CREATE_CHANNEL_RIGHTS_SECTION_MANAGE_USERS_ADD'),\n\tdefault: Loc.getMessage('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGE_USERS_ADD'),\n};\n\nexport const CanKickUsersCaptionByChatType = {\n\t[ChatType.channel]: Loc.getMessage('IM_CREATE_CHANNEL_RIGHTS_SECTION_MANAGE_USERS_DELETE'),\n\tdefault: Loc.getMessage('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGE_USERS_DELETE'),\n};\n\nexport const CanSendMessageCaptionByChatType = {\n\t[ChatType.channel]: Loc.getMessage('IM_CREATE_CHANNEL_RIGHTS_SECTION_MANAGE_SENDING'),\n\tdefault: Loc.getMessage('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGE_SENDING_MSGVER_1'),\n};\n\nexport const OwnerHintByChatType = {\n\t[ChatType.channel]: Loc.getMessage('IM_CREATE_CHANNEL_OWNER_HINT'),\n\tdefault: Loc.getMessage('IM_CREATE_CHAT_OWNER_HINT'),\n};\n\nexport const ManagerHintByChatType = {\n\t[ChatType.channel]: Loc.getMessage('IM_CREATE_CHANNEL_MANAGER_HINT'),\n\tdefault: Loc.getMessage('IM_CREATE_CHAT_MANAGER_HINT'),\n};\n\nexport const AddUsersHintByChatType = {\n\t[ChatType.channel]: Loc.getMessage('IM_CREATE_CHANNEL_MANAGE_USERS_ADD_HINT'),\n\tdefault: Loc.getMessage('IM_CREATE_CHAT_MANAGE_USERS_ADD_HINT'),\n};\n\nexport const DeleteUsersHintByChatType = {\n\t[ChatType.channel]: Loc.getMessage('IM_CREATE_CHANNEL_MANAGE_USERS_DELETE_HINT'),\n\tdefault: Loc.getMessage('IM_CREATE_CHAT_MANAGE_USERS_DELETE_HINT'),\n};\n\nexport const ManageUiHintByChatType = {\n\t[ChatType.channel]: Loc.getMessage('IM_CREATE_CHANNEL_MANAGE_UI_HINT'),\n\tdefault: Loc.getMessage('IM_CREATE_CHAT_MANAGE_UI_HINT'),\n};\n\nexport const SendMessagesHintByChatType = {\n\t[ChatType.channel]: Loc.getMessage('IM_CREATE_CHANNEL_MANAGE_SENDING_HINT'),\n\tdefault: Loc.getMessage('IM_CREATE_CHAT_MANAGE_SENDING_HINT'),\n};","import { UserRole, PopupType, ChatType, ChatActionGroup } from 'im.v2.const';\n\nimport { CreateChatSection } from '../section/section';\nimport { RoleSelector } from './components/role-selector';\nimport { UserSelector } from './components/user-selector/user-selector';\nimport { OwnerSelector } from './components/user-selector/owner';\nimport { ManagersSelector } from './components/user-selector/managers';\nimport { rightsDropdownItems } from './const/dropdown-items';\nimport {\n\tBlocksByChatType,\n\tCanAddUsersCaptionByChatType,\n\tCanSendMessageCaptionByChatType,\n\tCanKickUsersCaptionByChatType,\n\tOwnerHintByChatType,\n\tManagerHintByChatType,\n\tAddUsersHintByChatType,\n\tDeleteUsersHintByChatType,\n\tManageUiHintByChatType,\n\tSendMessagesHintByChatType,\n} from './const/config';\n\nimport type { DropdownItem } from 'im.v2.component.elements';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const RightsSection = {\n\tname: 'RightsSection',\n\tcomponents: { CreateChatSection, RoleSelector, UserSelector, OwnerSelector, ManagersSelector },\n\tprops: {\n\t\townerId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tmanagerIds: {\n\t\t\ttype: Array,\n\t\t\trequired: true,\n\t\t},\n\t\tmanageUsersAdd: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmanageUsersDelete: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmanageUi: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tmanageMessages: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tchatType: {\n\t\t\ttype: String,\n\t\t\tdefault: ChatType.chat,\n\t\t},\n\t},\n\temits: ['ownerChange', 'managersChange', 'manageUsersAddChange', 'manageUsersDeleteChange', 'manageUiChange', 'manageMessagesChange'],\n\tcomputed:\n\t{\n\t\tPopupType: () => PopupType,\n\t\tmanageUsersAddItems(): DropdownItem[]\n\t\t{\n\t\t\treturn this.prepareDropdownItems(this.manageUsersAdd);\n\t\t},\n\t\tmanageUsersDeleteItems(): DropdownItem[]\n\t\t{\n\t\t\treturn this.prepareDropdownItems(this.manageUsersDelete);\n\t\t},\n\t\tmanageUiItems(): DropdownItem[]\n\t\t{\n\t\t\treturn this.prepareDropdownItems(this.manageUi);\n\t\t},\n\t\tmanageMessagesItems(): DropdownItem[]\n\t\t{\n\t\t\treturn this.prepareDropdownItems(this.manageMessages);\n\t\t},\n\t\tshowManageUiBlock(): boolean\n\t\t{\n\t\t\tconst blocksByType = BlocksByChatType[this.chatType] ?? BlocksByChatType.default;\n\n\t\t\treturn blocksByType.has(ChatActionGroup.manageUi);\n\t\t},\n\t\tcanAddUsersCaption(): string\n\t\t{\n\t\t\treturn CanAddUsersCaptionByChatType[this.chatType] ?? CanAddUsersCaptionByChatType.default;\n\t\t},\n\t\tcanKickUsersCaption(): string\n\t\t{\n\t\t\treturn CanKickUsersCaptionByChatType[this.chatType] ?? CanKickUsersCaptionByChatType.default;\n\t\t},\n\t\tcanSendCaption(): string\n\t\t{\n\t\t\treturn CanSendMessageCaptionByChatType[this.chatType] ?? CanSendMessageCaptionByChatType.default;\n\t\t},\n\t\townerHint(): string\n\t\t{\n\t\t\treturn OwnerHintByChatType[this.chatType] ?? OwnerHintByChatType.default;\n\t\t},\n\t\tmanagerHint(): string\n\t\t{\n\t\t\treturn ManagerHintByChatType[this.chatType] ?? ManagerHintByChatType.default;\n\t\t},\n\t\taddUsersHint(): string\n\t\t{\n\t\t\treturn AddUsersHintByChatType[this.chatType] ?? AddUsersHintByChatType.default;\n\t\t},\n\t\tdeleteUsersHint(): string\n\t\t{\n\t\t\treturn DeleteUsersHintByChatType[this.chatType] ?? DeleteUsersHintByChatType.default;\n\t\t},\n\t\tmanageUiHint(): string\n\t\t{\n\t\t\treturn ManageUiHintByChatType[this.chatType] ?? ManageUiHintByChatType.default;\n\t\t},\n\t\tsendMessagesHint(): string\n\t\t{\n\t\t\treturn SendMessagesHintByChatType[this.chatType] ?? SendMessagesHintByChatType.default;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tprepareDropdownItems(defaultValue: UserRoleItem): DropdownItem[]\n\t\t{\n\t\t\treturn rightsDropdownItems.map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\t...item,\n\t\t\t\t\tdefault: item.value === defaultValue,\n\t\t\t\t};\n\t\t\t});\n\t\t},\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.$emit('ownerChange', ownerId);\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.$emit('managersChange', managerIds);\n\t\t},\n\t\tonManageUsersAddChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.$emit('manageUsersAddChange', newValue);\n\t\t},\n\t\tonManageUsersDeleteChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.$emit('manageUsersDeleteChange', newValue);\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.$emit('manageUiChange', newValue);\n\t\t},\n\t\tonManageMessagesChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.$emit('manageMessagesChange', newValue);\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<CreateChatSection name=\"rights\" :title=\"loc('IM_CREATE_CHAT_RIGHTS_SECTION')\">\n\t\t\t<UserSelector :title=\"loc('IM_CREATE_CHAT_SETTINGS_SECTION_OWNER')\" :hintText=\"ownerHint\">\n\t\t\t\t<OwnerSelector :ownerId=\"ownerId\" @ownerChange=\"onOwnerChange\" />\n\t\t\t</UserSelector>\n\t\t\t<UserSelector :title=\"loc('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGERS')\" :hintText=\"managerHint\">\n\t\t\t\t<ManagersSelector :managerIds=\"managerIds\" @managersChange=\"onManagersChange\" />\n\t\t\t</UserSelector>\n\t\t\t<RoleSelector\n\t\t\t\t:title=\"canAddUsersCaption\"\n\t\t\t\t:hintText=\"addUsersHint\"\n\t\t\t\t:dropdownId=\"PopupType.createChatManageUsersAddMenu\"\n\t\t\t\t:dropdownItems=\"manageUsersAddItems\"\n\t\t\t\t@itemChange=\"onManageUsersAddChange\"\n\t\t\t/>\n\t\t\t<RoleSelector\n\t\t\t\t:title=\"canKickUsersCaption\"\n\t\t\t\t:hintText=\"deleteUsersHint\"\n\t\t\t\t:dropdownId=\"PopupType.createChatManageUsersDeleteMenu\"\n\t\t\t\t:dropdownItems=\"manageUsersDeleteItems\"\n\t\t\t\t@itemChange=\"onManageUsersDeleteChange\"\n\t\t\t/>\n\t\t\t<RoleSelector\n\t\t\t\tv-if=\"showManageUiBlock\"\n\t\t\t\t:title=\"loc('IM_CREATE_CHAT_RIGHTS_SECTION_MANAGE_UI_MSGVER_2')\"\n\t\t\t\t:hintText=\"manageUiHint\"\n\t\t\t\t:dropdownId=\"PopupType.createChatManageUiMenu\"\n\t\t\t\t:dropdownItems=\"manageUiItems\"\n\t\t\t\t@itemChange=\"onManageUiChange\"\n\t\t\t/>\n\t\t\t<RoleSelector\n\t\t\t\t:title=\"canSendCaption\"\n\t\t\t\t:hintText=\"sendMessagesHint\"\n\t\t\t\t:dropdownId=\"PopupType.createChatManageMessagesMenu\"\n\t\t\t\t:dropdownItems=\"manageMessagesItems\"\n\t\t\t\t@itemChange=\"onManageMessagesChange\"\n\t\t\t/>\n\t\t</CreateChatSection>\n\t`,\n};\n","import { CreateChatSection } from '../section/section';\n\n// @vue/component\nexport const AppearanceSection = {\n\tcomponents: { CreateChatSection },\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\ttemplate: `\n\t\t<Section name=\"appearance\" title=\"Appearance\" />\n\t`,\n};\n","import 'ui.notification';\n\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MenuManager } from 'main.popup';\n\nimport { Messenger } from 'im.public';\nimport { Core } from 'im.v2.application.core';\nimport { CreateChatManager } from 'im.v2.lib.create-chat';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ChatService } from 'im.v2.provider.service';\nimport { UserRole, PopupType, ChatType, EventType, Layout, type OnLayoutChangeEvent } from 'im.v2.const';\n\nimport { TitleInput } from '../elements/title-input';\nimport { ChatAvatar } from '../elements/chat-avatar';\nimport { ChatMembersSelector } from '../elements/chat-members';\nimport { ButtonPanel } from '../elements/button-panel';\nimport { CreateChatHeading } from '../elements/heading';\nimport { SettingsSection } from '../sections/settings/settings-section';\nimport { RightsSection } from '../sections/rights/rights-section';\nimport { AppearanceSection } from '../sections/appearance/appearance-section';\n\nimport type { JsonObject } from 'main.core';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const GroupChatCreation = {\n\tname: 'GroupChatCreation',\n\tcomponents: {\n\t\tTitleInput,\n\t\tChatAvatar,\n\t\tChatMembersSelector,\n\t\tSettingsSection,\n\t\tRightsSection,\n\t\tAppearanceSection,\n\t\tButtonPanel,\n\t\tCreateChatHeading,\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCreating: false,\n\t\t\tavatarFile: null,\n\t\t\tchatTitle: '',\n\t\t\tchatMembers: [['user', Core.getUserId()]],\n\t\t\tsettings: {\n\t\t\t\tisAvailableInSearch: false,\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t\trights: {\n\t\t\t\townerId: 0,\n\t\t\t\tmanagerIds: [],\n\t\t\t\tmanageUsersAdd: '',\n\t\t\t\tmanageUsersDelete: '',\n\t\t\t\tmanageUi: '',\n\t\t\t\tmanageMessages: '',\n\t\t\t},\n\t\t};\n\t},\n\twatch:\n\t{\n\t\tchatTitle(newValue)\n\t\t{\n\t\t\tCreateChatManager.getInstance().setChatTitle(newValue);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe(EventType.layout.onLayoutChange, this.onLayoutChange);\n\n\t\tthis.rights.ownerId = Core.getUserId();\n\t\tthis.initDefaultRolesForRights();\n\n\t\tthis.restoreFields();\n\t\tCreateChatManager.getInstance().setChatType(ChatType.chat);\n\t\tCreateChatManager.getInstance().setCreationStatus(true);\n\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tif (this.exitByCancel || this.exitByChatTypeSwitch || this.exitByCreation)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.saveFields();\n\t},\n\tmethods:\n\t{\n\t\tonMembersChange(currentTags: [string, number | string][])\n\t\t{\n\t\t\tthis.chatMembers = currentTags;\n\t\t},\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.rights.ownerId = ownerId;\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.rights.managerIds = managerIds;\n\t\t},\n\t\tonChatTypeChange(isAvailableInSearch: boolean)\n\t\t{\n\t\t\tthis.settings.isAvailableInSearch = isAvailableInSearch;\n\t\t},\n\t\tonDescriptionChange(description: string)\n\t\t{\n\t\t\tthis.settings.description = description;\n\t\t},\n\t\tonManageUsersAddChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersAdd = newValue;\n\t\t},\n\t\tonManageUsersDeleteChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersDelete = newValue;\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUi = newValue;\n\t\t},\n\t\tonManageMessagesChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageMessages = newValue;\n\t\t},\n\t\tasync onCreateClick()\n\t\t{\n\t\t\tthis.isCreating = true;\n\n\t\t\tconst { newDialogId } = await this.getChatService().createChat({\n\t\t\t\ttitle: this.chatTitle,\n\t\t\t\tavatar: this.avatarFile,\n\t\t\t\tmemberEntities: this.chatMembers,\n\t\t\t\townerId: this.rights.ownerId,\n\t\t\t\tmanagers: this.rights.managerIds,\n\t\t\t\tisAvailableInSearch: this.settings.isAvailableInSearch,\n\t\t\t\tdescription: this.settings.description,\n\t\t\t\tmanageUsersAdd: this.rights.manageUsersAdd,\n\t\t\t\tmanageUsersDelete: this.rights.manageUsersDelete,\n\t\t\t\tmanageUi: this.rights.manageUi,\n\t\t\t\tmanageMessages: this.rights.manageMessages,\n\t\t\t}).catch(() => {\n\t\t\t\tthis.isCreating = false;\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('IM_CREATE_CHAT_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.isCreating = false;\n\t\t\tthis.exitByCreation = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tvoid Messenger.openChat(newDialogId);\n\t\t},\n\t\tonCancelClick()\n\t\t{\n\t\t\tthis.exitByCancel = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tMessenger.openChat();\n\t\t},\n\t\tonAvatarChange(newAvatarFile: File)\n\t\t{\n\t\t\tthis.avatarFile = newAvatarFile;\n\t\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t\t},\n\t\tonScroll()\n\t\t{\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersAddMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersDeleteMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUiMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageMessagesMenu)?.close();\n\t\t},\n\t\tonLayoutChange(event: BaseEvent<OnLayoutChangeEvent>)\n\t\t{\n\t\t\tconst { to } = event.getData();\n\t\t\tif (to.name === Layout.createChat.name && to.entityId !== ChatType.chat)\n\t\t\t{\n\t\t\t\tthis.exitByChatTypeSwitch = true;\n\t\t\t}\n\t\t},\n\t\tsaveFields()\n\t\t{\n\t\t\tCreateChatManager.getInstance().saveFields({\n\t\t\t\tchatTitle: this.chatTitle,\n\t\t\t\tavatarFile: this.avatarFile,\n\t\t\t\tchatMembers: this.chatMembers,\n\t\t\t\tsettings: this.settings,\n\t\t\t\trights: this.rights,\n\t\t\t});\n\t\t},\n\t\trestoreFields()\n\t\t{\n\t\t\tconst savedFields = CreateChatManager.getInstance().getFields();\n\t\t\tif (!savedFields)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { chatTitle, avatarFile, chatMembers, settings, rights } = savedFields;\n\t\t\tthis.chatTitle = chatTitle;\n\t\t\tthis.avatarFile = avatarFile;\n\t\t\tthis.chatMembers = chatMembers;\n\t\t\tthis.settings = settings;\n\t\t\tthis.rights = rights;\n\t\t},\n\t\tinitDefaultRolesForRights()\n\t\t{\n\t\t\tconst {\n\t\t\t\tmanageUsersAdd,\n\t\t\t\tmanageUsersDelete,\n\t\t\t\tmanageUi,\n\t\t\t\tmanageMessages,\n\t\t\t} = PermissionManager.getInstance().getDefaultRolesForActionGroups();\n\n\t\t\tthis.rights.manageUsersAdd = manageUsersAdd;\n\t\t\tthis.rights.manageUsersDelete = manageUsersDelete;\n\t\t\tthis.rights.manageUi = manageUi;\n\t\t\tthis.rights.manageMessages = manageMessages;\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat-forms__content --chat\" @scroll=\"onScroll\">\n\t\t\t<div class=\"bx-im-content-chat-forms__header\">\n\t\t\t\t<ChatAvatar :avatarFile=\"avatarFile\" :chatTitle=\"chatTitle\" @avatarChange=\"onAvatarChange\" />\n\t\t\t\t<TitleInput v-model=\"chatTitle\" :placeholder=\"loc('IM_CREATE_CHAT_TITLE_PLACEHOLDER')\" />\n\t\t\t</div>\n\t\t\t<CreateChatHeading :text=\"loc('IM_CREATE_CHAT_MEMBERS_TITLE')\" />\n\t\t\t<div class=\"bx-im-content-chat-forms__members_container\">\n\t\t\t\t<ChatMembersSelector :chatMembers=\"chatMembers\" @membersChange=\"onMembersChange\" />\n\t\t\t</div>\n\t\t\t<SettingsSection\n\t\t\t\t:isAvailableInSearch=\"settings.isAvailableInSearch\"\n\t\t\t\t:description=\"settings.description\"\n\t\t\t\t@chatTypeChange=\"onChatTypeChange\"\n\t\t\t\t@descriptionChange=\"onDescriptionChange\"\n\t\t\t/>\n\t\t\t<RightsSection\n\t\t\t\t:ownerId=\"rights.ownerId\"\n\t\t\t\t:managerIds=\"rights.managerIds\"\n\t\t\t\t:manageUsersAdd=\"rights.manageUsersAdd\"\n\t\t\t\t:manageUsersDelete=\"rights.manageUsersDelete\"\n\t\t\t\t:manageUi=\"rights.manageUi\"\n\t\t\t\t:manageMessages=\"rights.manageMessages\"\n\t\t\t\t@ownerChange=\"onOwnerChange\"\n\t\t\t\t@managersChange=\"onManagersChange\"\n\t\t\t\t@manageUsersAddChange=\"onManageUsersAddChange\"\n\t\t\t\t@manageUsersDeleteChange=\"onManageUsersDeleteChange\"\n\t\t\t\t@manageUiChange=\"onManageUiChange\"\n\t\t\t\t@manageMessagesChange=\"onManageMessagesChange\"\n\t\t\t/> \n\t\t</div>\n\t\t<ButtonPanel\n\t\t\t:isCreating=\"isCreating\"\n\t\t\t:createButtonTitle=\"loc('IM_CREATE_CHAT_CONFIRM')\"\n\t\t\t@create=\"onCreateClick\"\n\t\t\t@cancel=\"onCancelClick\"\n\t\t/>\n\t`,\n};\n","import 'ui.forms';\n\nimport { Dropdown, Toggle, ToggleSize } from 'im.v2.component.elements';\n\nimport { CreateChatSection } from '../section/section';\nimport { CreateChatHeading } from '../../elements/heading';\n\nimport './conference-section.css';\n\n// @vue/component\nexport const ConferenceSection = {\n\tcomponents: { CreateChatSection, CreateChatHeading, Dropdown, Toggle },\n\tprops: {\n\t\tpasswordNeeded: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t\tpassword: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['passwordNeededChange', 'passwordChange'],\n\tcomputed:\n\t{\n\t\tToggleSize: () => ToggleSize,\n\t},\n\tmethods:\n\t{\n\t\tonPasswordNeededChange(passwordNeeded: boolean)\n\t\t{\n\t\t\tthis.$emit('passwordNeededChange', passwordNeeded);\n\t\t},\n\t\tonPasswordChange(event: Event)\n\t\t{\n\t\t\tthis.$emit('passwordChange', event.target.value);\n\t\t},\n\t\tonToggleLabelClick()\n\t\t{\n\t\t\tthis.onPasswordNeededChange(!this.passwordNeeded);\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<CreateChatSection name=\"conference\" :title=\"loc('IM_CREATE_CHAT_CONFERENCE_SECTION')\">\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<CreateChatHeading :text=\"loc('IM_CREATE_CHAT_CONFERENCE_SECTION_PRIVACY')\" />\n\t\t\t\t<div @click=\"onToggleLabelClick\" class=\"bx-im-chat-forms-chat-settings__type-select\">\n\t\t\t\t\t<Toggle :size=\"ToggleSize.M\" :isEnabled=\"passwordNeeded\" />\n\t\t\t\t\t<div class=\"bx-im-chat-forms-chat-settings__type-select_label\">\n\t\t\t\t\t\t{{ loc('IM_CREATE_CHAT_CONFERENCE_SECTION_USE_PASSWORD') }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"passwordNeeded\" class=\"bx-im-chat-forms-chat-settings__password-container ui-ctl ui-ctl-textbox\">\n\t\t\t\t\t<input\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\tclass=\"bx-im-content-create-chat-conference__password-input ui-ctl-element\"\n\t\t\t\t\t\t:value=\"password\"\n\t\t\t\t\t\t:placeholder=\"loc('IM_CREATE_CHAT_CONFERENCE_SECTION_PASSWORD_PLACEHOLDER')\"\n\t\t\t\t\t\t@input=\"onPasswordChange\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</CreateChatSection>\n\t`,\n};\n","import 'ui.notification';\n\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MenuManager } from 'main.popup';\n\nimport { Messenger } from 'im.public';\nimport { Core } from 'im.v2.application.core';\nimport { CreateChatManager } from 'im.v2.lib.create-chat';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ChatService } from 'im.v2.provider.service';\nimport { UserRole, PopupType, ChatType, EventType, Layout } from 'im.v2.const';\n\nimport { TitleInput } from '../elements/title-input';\nimport { ChatAvatar } from '../elements/chat-avatar';\nimport { ChatMembersSelector } from '../elements/chat-members';\nimport { ButtonPanel } from '../elements/button-panel';\nimport { CreateChatHeading } from '../elements/heading';\nimport { SettingsSection } from '../sections/settings/settings-section';\nimport { RightsSection } from '../sections/rights/rights-section';\nimport { AppearanceSection } from '../sections/appearance/appearance-section';\nimport { ConferenceSection } from '../sections/conference/conference-section';\n\nimport type { JsonObject } from 'main.core';\nimport type { OnLayoutChangeEvent } from 'im.v2.const';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const ConferenceCreation = {\n\tname: 'ConferenceCreation',\n\tcomponents: {\n\t\tTitleInput,\n\t\tChatAvatar,\n\t\tChatMembersSelector,\n\t\tSettingsSection,\n\t\tRightsSection,\n\t\tAppearanceSection,\n\t\tConferenceSection,\n\t\tButtonPanel,\n\t\tCreateChatHeading,\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCreating: false,\n\t\t\tavatarFile: null,\n\t\t\tchatTitle: '',\n\t\t\tchatMembers: [['user', Core.getUserId()]],\n\t\t\tconference: {\n\t\t\t\tpasswordNeeded: false,\n\t\t\t\tpassword: '',\n\t\t\t},\n\t\t\tsettings: {\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t\trights: {\n\t\t\t\townerId: 0,\n\t\t\t\tmanagerIds: [],\n\t\t\t\tmanageUsersAdd: '',\n\t\t\t\tmanageUsersDelete: '',\n\t\t\t\tmanageUi: '',\n\t\t\t\tmanageMessages: '',\n\t\t\t},\n\t\t};\n\t},\n\twatch:\n\t{\n\t\tchatTitle(newValue)\n\t\t{\n\t\t\tCreateChatManager.getInstance().setChatTitle(newValue);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe(EventType.layout.onLayoutChange, this.onLayoutChange);\n\n\t\tthis.rights.ownerId = Core.getUserId();\n\t\tthis.initDefaultRolesForRights();\n\n\t\tthis.restoreFields();\n\t\tCreateChatManager.getInstance().setChatType(ChatType.videoconf);\n\t\tCreateChatManager.getInstance().setCreationStatus(true);\n\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tif (this.exitByCancel || this.exitByChatTypeSwitch)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.saveFields();\n\t},\n\tmethods:\n\t{\n\t\tonMembersChange(currentTags: [string, number | string][])\n\t\t{\n\t\t\tthis.chatMembers = currentTags;\n\t\t},\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.rights.ownerId = ownerId;\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.rights.managerIds = managerIds;\n\t\t},\n\t\tonDescriptionChange(description: string)\n\t\t{\n\t\t\tthis.settings.description = description;\n\t\t},\n\t\tonManageUsersAddChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersAdd = newValue;\n\t\t},\n\t\tonManageUsersDeleteChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersDelete = newValue;\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUi = newValue;\n\t\t},\n\t\tonManageMessagesChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageMessages = newValue;\n\t\t},\n\t\tonAvatarChange(newAvatarFile: File)\n\t\t{\n\t\t\tthis.avatarFile = newAvatarFile;\n\t\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t\t},\n\t\tonPasswordNeededChange(passwordNeeded: boolean)\n\t\t{\n\t\t\tthis.conference.passwordNeeded = passwordNeeded;\n\t\t},\n\t\tonPasswordChange(newPassword: string)\n\t\t{\n\t\t\tthis.conference.password = newPassword;\n\t\t},\n\t\tasync onCreateClick()\n\t\t{\n\t\t\tif (!this.checkPassword())\n\t\t\t{\n\t\t\t\tthis.showPasswordError();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isCreating = true;\n\n\t\t\tconst { newDialogId } = await this.getChatService().createChat({\n\t\t\t\tentityType: ChatType.videoconf,\n\t\t\t\ttitle: this.chatTitle,\n\t\t\t\tavatar: this.avatarFile,\n\t\t\t\tmemberEntities: this.chatMembers,\n\t\t\t\townerId: this.rights.ownerId,\n\t\t\t\tmanagers: this.rights.managerIds,\n\t\t\t\tdescription: this.settings.description,\n\t\t\t\tmanageUsersAdd: this.rights.manageUsersAdd,\n\t\t\t\tmanageUsersDelete: this.rights.manageUsersDelete,\n\t\t\t\tmanageUi: this.rights.manageUi,\n\t\t\t\tmanageMessages: this.rights.manageMessages,\n\t\t\t\tconferencePassword: this.conference.passwordNeeded ? this.conference.password : '',\n\t\t\t}).catch(() => {\n\t\t\t\tthis.isCreating = false;\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('IM_CREATE_CHAT_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.isCreating = false;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tvoid Messenger.openChat(newDialogId);\n\t\t},\n\t\tonCancelClick()\n\t\t{\n\t\t\tthis.exitByCancel = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tMessenger.openChat();\n\t\t},\n\t\tonScroll()\n\t\t{\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersAddMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersDeleteMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUiMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageMessagesMenu)?.close();\n\t\t},\n\t\tonLayoutChange(event: BaseEvent<OnLayoutChangeEvent>)\n\t\t{\n\t\t\tconst { to } = event.getData();\n\t\t\tif (to.name === Layout.createChat.name && to.entityId !== ChatType.videoconf)\n\t\t\t{\n\t\t\t\tthis.exitByChatTypeSwitch = true;\n\t\t\t}\n\t\t},\n\t\tsaveFields()\n\t\t{\n\t\t\tCreateChatManager.getInstance().saveFields({\n\t\t\t\tchatTitle: this.chatTitle,\n\t\t\t\tavatarFile: this.avatarFile,\n\t\t\t\tchatMembers: this.chatMembers,\n\t\t\t\tsettings: this.settings,\n\t\t\t\trights: this.rights,\n\t\t\t\tconference: this.conference,\n\t\t\t});\n\t\t},\n\t\trestoreFields()\n\t\t{\n\t\t\tconst savedFields = CreateChatManager.getInstance().getFields();\n\t\t\tif (!savedFields)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { chatTitle, avatarFile, chatMembers, conference, settings, rights } = savedFields;\n\t\t\tthis.chatTitle = chatTitle;\n\t\t\tthis.avatarFile = avatarFile;\n\t\t\tthis.chatMembers = chatMembers;\n\t\t\tthis.conference = conference;\n\t\t\tthis.settings = settings;\n\t\t\tthis.rights = rights;\n\t\t},\n\t\tinitDefaultRolesForRights()\n\t\t{\n\t\t\tconst {\n\t\t\t\tmanageUsersAdd,\n\t\t\t\tmanageUsersDelete,\n\t\t\t\tmanageUi,\n\t\t\t\tmanageMessages,\n\t\t\t} = PermissionManager.getInstance().getDefaultRolesForActionGroups();\n\n\t\t\tthis.rights.manageUsersAdd = manageUsersAdd;\n\t\t\tthis.rights.manageUsersDelete = manageUsersDelete;\n\t\t\tthis.rights.manageUi = manageUi;\n\t\t\tthis.rights.manageMessages = manageMessages;\n\t\t},\n\t\tcheckPassword(): boolean\n\t\t{\n\t\t\tconst PASSWORD_MIN_LENGTH = 3;\n\t\t\tif (!this.conference.passwordNeeded)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst password = this.conference.password.trim();\n\n\t\t\treturn password !== '' && password.length >= PASSWORD_MIN_LENGTH;\n\t\t},\n\t\tshowPasswordError()\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: this.loc('IM_CREATE_CHAT_CONFERENCE_PASSWORD_ERROR'),\n\t\t\t});\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat-forms__content --conference\" @scroll=\"onScroll\">\n\t\t\t<div class=\"bx-im-content-chat-forms__header\">\n\t\t\t\t<ChatAvatar :avatarFile=\"avatarFile\" :chatTitle=\"chatTitle\" @avatarChange=\"onAvatarChange\" :squared=\"true\" />\n\t\t\t\t<TitleInput v-model=\"chatTitle\" :placeholder=\"loc('IM_CREATE_CONFERENCE_TITLE_PLACEHOLDER')\" />\n\t\t\t</div>\n\t\t\t<CreateChatHeading :text=\"loc('IM_CREATE_CHAT_MEMBERS_TITLE')\" />\n\t\t\t<div class=\"bx-im-content-chat-forms__members_container\">\n\t\t\t\t<ChatMembersSelector :chatMembers=\"chatMembers\" @membersChange=\"onMembersChange\" />\n\t\t\t</div>\n\t\t\t<ConferenceSection\n\t\t\t\t:passwordNeeded=\"conference.passwordNeeded\"\n\t\t\t\t:password=\"conference.password\"\n\t\t\t\t@passwordNeededChange=\"onPasswordNeededChange\"\n\t\t\t\t@passwordChange=\"onPasswordChange\"\n\t\t\t/>\n\t\t\t<SettingsSection\n\t\t\t\t:withSearchOption=\"false\"\n\t\t\t\t:description=\"settings.description\"\n\t\t\t\t@descriptionChange=\"onDescriptionChange\"\n\t\t\t/>\n\t\t\t<RightsSection\n\t\t\t\t:ownerId=\"rights.ownerId\"\n\t\t\t\t:managerIds=\"rights.managerIds\"\n\t\t\t\t:manageUsersAdd=\"rights.manageUsersAdd\"\n\t\t\t\t:manageUsersDelete=\"rights.manageUsersDelete\"\n\t\t\t\t:manageUi=\"rights.manageUi\"\n\t\t\t\t:manageMessages=\"rights.manageMessages\"\n\t\t\t\t@ownerChange=\"onOwnerChange\"\n\t\t\t\t@managersChange=\"onManagersChange\"\n\t\t\t\t@manageUsersAddChange=\"onManageUsersAddChange\"\n\t\t\t\t@manageUsersDeleteChange=\"onManageUsersDeleteChange\"\n\t\t\t\t@manageUiChange=\"onManageUiChange\"\n\t\t\t\t@manageMessagesChange=\"onManageMessagesChange\"\n\t\t\t/>\n\t\t</div>\n\t\t<ButtonPanel\n\t\t\t:isCreating=\"isCreating\"\n\t\t\t:createButtonTitle=\"loc('IM_CREATE_CONFERENCE_CONFIRM')\"\n\t\t\t@create=\"onCreateClick\"\n\t\t\t@cancel=\"onCancelClick\"\n\t\t/>\n\t`,\n};\n","import 'ui.forms';\n\nimport { CreateChatSection } from '../section/section';\nimport { RadioOption, type RadioOptionItem } from '../../elements/radio';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const PrivacySection = {\n\tcomponents: { CreateChatSection, RadioOption },\n\tprops: {\n\t\twithSearchOption: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\tisAvailableInSearch: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\temits: ['chatTypeChange'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tprivacyOptions(): RadioOptionItem[]\n\t\t{\n\t\t\treturn [\n\t\t\t\t{\n\t\t\t\t\tvalue: true,\n\t\t\t\t\ttext: this.loc('IM_CREATE_CHAT_PRIVACY_SECTION_OPEN_TITLE'),\n\t\t\t\t\tsubtext: this.loc('IM_CREATE_CHAT_PRIVACY_SECTION_OPEN_SUBTITLE_V2'),\n\t\t\t\t\tselected: this.isAvailableInSearch,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tvalue: false,\n\t\t\t\t\ttext: this.loc('IM_CREATE_CHAT_PRIVACY_SECTION_PRIVATE_TITLE'),\n\t\t\t\t\tsubtext: this.loc('IM_CREATE_CHAT_PRIVACY_SECTION_PRIVATE_SUBTITLE_V2'),\n\t\t\t\t\tselected: !this.isAvailableInSearch,\n\t\t\t\t},\n\t\t\t];\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonTypeChange(isAvailableInSearch: boolean)\n\t\t{\n\t\t\tthis.$emit('chatTypeChange', isAvailableInSearch);\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<CreateChatSection\n\t\t\tname=\"privacy\"\n\t\t\t:title=\"loc('IM_CREATE_CHAT_PRIVACY_SECTION_V2')\"\n\t\t\t:alwaysOpened=\"true\"\n\t\t>\n\t\t\t<div class=\"bx-im-content-create-chat__section_block\">\n\t\t\t\t<RadioOption :items=\"privacyOptions\" @change=\"onTypeChange\" />\n\t\t\t</div>\n\t\t</CreateChatSection>\n\t`,\n};\n","import 'ui.notification';\n\nimport { BaseEvent, EventEmitter } from 'main.core.events';\nimport { MenuManager } from 'main.popup';\n\nimport { Messenger } from 'im.public';\nimport { Core } from 'im.v2.application.core';\nimport { CreateChatManager } from 'im.v2.lib.create-chat';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ChatService } from 'im.v2.provider.service';\nimport { UserRole, PopupType, ChatType, EventType, Layout, type OnLayoutChangeEvent } from 'im.v2.const';\n\nimport { TitleInput } from '../elements/title-input';\nimport { ChatAvatar } from '../elements/chat-avatar';\nimport { ChatMembersSelector } from '../elements/chat-members';\nimport { ButtonPanel } from '../elements/button-panel';\nimport { TextareaInput } from '../elements/textarea';\nimport { CreateChatHeading } from '../elements/heading';\nimport { SettingsSection } from '../sections/settings/settings-section';\nimport { RightsSection } from '../sections/rights/rights-section';\nimport { AppearanceSection } from '../sections/appearance/appearance-section';\nimport { PrivacySection } from '../sections/privacy/privacy-section';\n\nimport type { JsonObject } from 'main.core';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const ChannelCreation = {\n\tname: 'ChannelCreation',\n\tcomponents: {\n\t\tTitleInput,\n\t\tChatAvatar,\n\t\tChatMembersSelector,\n\t\tSettingsSection,\n\t\tRightsSection,\n\t\tAppearanceSection,\n\t\tPrivacySection,\n\t\tButtonPanel,\n\t\tTextareaInput,\n\t\tCreateChatHeading,\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCreating: false,\n\t\t\tavatarFile: null,\n\t\t\tchatTitle: '',\n\t\t\tchatMembers: [['user', Core.getUserId()]],\n\t\t\tsettings: {\n\t\t\t\tisAvailableInSearch: true,\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t\trights: {\n\t\t\t\townerId: 0,\n\t\t\t\tmanagerIds: [],\n\t\t\t\tmanageUsersAdd: '',\n\t\t\t\tmanageUsersDelete: '',\n\t\t\t\tmanageUi: '',\n\t\t\t\tmanageMessages: '',\n\t\t\t},\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tChatType: () => ChatType,\n\t},\n\twatch:\n\t{\n\t\tchatTitle(newValue)\n\t\t{\n\t\t\tCreateChatManager.getInstance().setChatTitle(newValue);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe(EventType.layout.onLayoutChange, this.onLayoutChange);\n\n\t\tthis.rights.ownerId = Core.getUserId();\n\t\tthis.initDefaultRolesForRights();\n\n\t\tthis.restoreFields();\n\t\tCreateChatManager.getInstance().setChatType(ChatType.channel);\n\t\tCreateChatManager.getInstance().setCreationStatus(true);\n\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tEventEmitter.unsubscribe(EventType.layout.onLayoutChange, this.onLayoutChange);\n\n\t\tif (this.exitByCancel || this.exitByChatTypeSwitch || this.exitByCreation)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.saveFields();\n\t},\n\tmethods:\n\t{\n\t\tonMembersChange(currentTags: [string, number | string][])\n\t\t{\n\t\t\tthis.chatMembers = currentTags;\n\t\t},\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.rights.ownerId = ownerId;\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.rights.managerIds = managerIds;\n\t\t},\n\t\tonChatTypeChange(isAvailableInSearch: boolean)\n\t\t{\n\t\t\tthis.settings.isAvailableInSearch = isAvailableInSearch;\n\t\t},\n\t\tonDescriptionChange(description: string)\n\t\t{\n\t\t\tthis.settings.description = description;\n\t\t},\n\t\tonManageUsersAddChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersAdd = newValue;\n\t\t},\n\t\tonManageUsersDeleteChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersDelete = newValue;\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUi = newValue;\n\t\t},\n\t\tonManageMessagesChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageMessages = newValue;\n\t\t},\n\t\tasync onCreateClick()\n\t\t{\n\t\t\tthis.isCreating = true;\n\n\t\t\tconst { newDialogId } = await this.getChatService().createChat({\n\t\t\t\ttype: ChatType.channel,\n\t\t\t\ttitle: this.chatTitle,\n\t\t\t\tavatar: this.avatarFile,\n\t\t\t\tmemberEntities: this.chatMembers,\n\t\t\t\townerId: this.rights.ownerId,\n\t\t\t\tmanagers: this.rights.managerIds,\n\t\t\t\tisAvailableInSearch: this.settings.isAvailableInSearch,\n\t\t\t\tdescription: this.settings.description,\n\t\t\t\tmanageUsersAdd: this.rights.manageUsersAdd,\n\t\t\t\tmanageUsersDelete: this.rights.manageUsersDelete,\n\t\t\t\tmanageUi: this.rights.manageUi,\n\t\t\t\tmanageMessages: this.rights.manageMessages,\n\t\t\t}).catch(() => {\n\t\t\t\tthis.isCreating = false;\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('IM_CREATE_CHAT_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.isCreating = false;\n\t\t\tthis.exitByCreation = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tvoid Messenger.openChat(newDialogId);\n\t\t},\n\t\tonCancelClick()\n\t\t{\n\t\t\tthis.exitByCancel = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tMessenger.openChat();\n\t\t},\n\t\tonAvatarChange(newAvatarFile: File)\n\t\t{\n\t\t\tthis.avatarFile = newAvatarFile;\n\t\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t\t},\n\t\tonScroll()\n\t\t{\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersAddMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersDeleteMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUiMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageMessagesMenu)?.close();\n\t\t},\n\t\tonLayoutChange(event: BaseEvent<OnLayoutChangeEvent>)\n\t\t{\n\t\t\tconst { to } = event.getData();\n\t\t\tif (to.name === Layout.createChat.name && to.entityId !== ChatType.channel)\n\t\t\t{\n\t\t\t\tthis.exitByChatTypeSwitch = true;\n\t\t\t}\n\t\t},\n\t\tsaveFields()\n\t\t{\n\t\t\tCreateChatManager.getInstance().saveFields({\n\t\t\t\tchatTitle: this.chatTitle,\n\t\t\t\tavatarFile: this.avatarFile,\n\t\t\t\tchatMembers: this.chatMembers,\n\t\t\t\tsettings: this.settings,\n\t\t\t\trights: this.rights,\n\t\t\t});\n\t\t},\n\t\trestoreFields()\n\t\t{\n\t\t\tconst savedFields = CreateChatManager.getInstance().getFields();\n\t\t\tif (!savedFields)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { chatTitle, avatarFile, chatMembers, settings, rights } = savedFields;\n\t\t\tthis.chatTitle = chatTitle;\n\t\t\tthis.avatarFile = avatarFile;\n\t\t\tthis.chatMembers = chatMembers;\n\t\t\tthis.settings = settings;\n\t\t\tthis.rights = rights;\n\t\t},\n\t\tinitDefaultRolesForRights()\n\t\t{\n\t\t\tconst {\n\t\t\t\tmanageUsersAdd,\n\t\t\t\tmanageUsersDelete,\n\t\t\t\tmanageUi,\n\t\t\t\tmanageMessages,\n\t\t\t} = PermissionManager.getInstance().getDefaultRolesForActionGroups(ChatType.channel);\n\n\t\t\tthis.rights.manageUsersAdd = manageUsersAdd;\n\t\t\tthis.rights.manageUsersDelete = manageUsersDelete;\n\t\t\tthis.rights.manageUi = manageUi;\n\t\t\tthis.rights.manageMessages = manageMessages;\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat-forms__content --channel\" @scroll=\"onScroll\">\n\t\t\t<div class=\"bx-im-content-chat-forms__header\">\n\t\t\t\t<ChatAvatar :avatarFile=\"avatarFile\" :chatTitle=\"chatTitle\" @avatarChange=\"onAvatarChange\" :squared=\"true\" />\n\t\t\t\t<TitleInput v-model=\"chatTitle\" :placeholder=\"loc('IM_CREATE_CHANNEL_TITLE_PLACEHOLDER_V2')\" />\n\t\t\t</div>\n\t\t\t<CreateChatHeading :text=\"loc('IM_CREATE_CHANNEL_DESCRIPTION_TITLE')\" />\n\t\t\t<div class=\"bx-im-content-chat-forms__description_container\">\n\t\t\t\t<TextareaInput\n\t\t\t\t\t:value=\"settings.description\"\n\t\t\t\t\t:placeholder=\"loc('IM_CREATE_CHANNEL_DESCRIPTION_PLACEHOLDER_V3')\"\n\t\t\t\t\t:border=\"false\"\n\t\t\t\t\t@input=\"onDescriptionChange\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<PrivacySection\n\t\t\t\t:isAvailableInSearch=\"settings.isAvailableInSearch\"\n\t\t\t\t@chatTypeChange=\"onChatTypeChange\"\n\t\t\t/>\n\t\t\t<CreateChatHeading\n\t\t\t\t:text=\"loc('IM_CREATE_CHANNEL_MEMBERS_TITLE')\"\n\t\t\t\t:hintText=\"loc('IM_CREATE_CHANNEL_MEMBERS_HINT')\"\n\t\t\t/>\n\t\t\t<div class=\"bx-im-content-chat-forms__members_container\">\n\t\t\t\t<ChatMembersSelector :chatMembers=\"chatMembers\" @membersChange=\"onMembersChange\" />\n\t\t\t</div>\n\t\t\t<RightsSection\n\t\t\t\t:chatType=\"ChatType.channel\"\n\t\t\t\t:ownerId=\"rights.ownerId\"\n\t\t\t\t:managerIds=\"rights.managerIds\"\n\t\t\t\t:manageUsersAdd=\"rights.manageUsersAdd\"\n\t\t\t\t:manageUsersDelete=\"rights.manageUsersDelete\"\n\t\t\t\t:manageUi=\"rights.manageUi\"\n\t\t\t\t:manageMessages=\"rights.manageMessages\"\n\t\t\t\t@ownerChange=\"onOwnerChange\"\n\t\t\t\t@managersChange=\"onManagersChange\"\n\t\t\t\t@manageUsersAddChange=\"onManageUsersAddChange\"\n\t\t\t\t@manageUsersDeleteChange=\"onManageUsersDeleteChange\"\n\t\t\t\t@manageUiChange=\"onManageUiChange\"\n\t\t\t\t@manageMessagesChange=\"onManageMessagesChange\"\n\t\t\t/>\n\t\t</div>\n\t\t<ButtonPanel\n\t\t\t:isCreating=\"isCreating\"\n\t\t\t:createButtonTitle=\"loc('IM_CREATE_CHANNEL_CONFIRM')\"\n\t\t\t@create=\"onCreateClick\"\n\t\t\t@cancel=\"onCancelClick\"\n\t\t/>\n\t`,\n};\n","import { Messenger } from 'im.public';\nimport type { OnLayoutChangeEvent } from 'im.v2.const';\nimport { ChatService } from 'im.v2.provider.service';\nimport { BaseEvent, EventEmitter } from 'main.core.events';\n\nimport { ChatType, EventType, Layout, PopupType } from 'im.v2.const';\nimport { CreateChatManager } from 'im.v2.lib.create-chat';\nimport { MenuManager } from 'main.popup';\n\nimport { TitleInput } from '../elements/title-input';\nimport { ChatAvatar } from '../elements/chat-avatar';\nimport { CreateChatHeading } from '../elements/heading';\nimport { ChatMembersSelector } from '../elements/chat-members';\nimport { ButtonPanel } from '../elements/button-panel';\n\nimport type { JsonObject } from 'main.core';\n\nexport const CollabCreation = {\n\tname: 'CollabCreation',\n\tcomponents: { TitleInput, ChatAvatar, CreateChatHeading, ChatMembersSelector, ButtonPanel },\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCreating: false,\n\t\t\tavatarFile: null,\n\t\t\tchatTitle: '',\n\t\t\tchatMembers: [],\n\t\t};\n\t},\n\twatch:\n\t{\n\t\tchatTitle(newValue: string): void\n\t\t{\n\t\t\tCreateChatManager.getInstance().setChatTitle(newValue);\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe(EventType.layout.onLayoutChange, this.onLayoutChange);\n\n\t\tthis.restoreFields();\n\t\tCreateChatManager.getInstance().setChatType(ChatType.collab);\n\t\tCreateChatManager.getInstance().setCreationStatus(true);\n\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tEventEmitter.unsubscribe(EventType.layout.onLayoutChange, this.onLayoutChange);\n\n\t\tif (this.exitByCancel || this.exitByChatTypeSwitch || this.exitByCreation)\n\t\t{\n\t\t\treturn;\n\t\t}\n\t\tthis.saveFields();\n\t},\n\tmethods:\n\t{\n\t\trestoreFields(): void\n\t\t{\n\t\t\tconst savedFields = CreateChatManager.getInstance().getFields();\n\t\t\tif (!savedFields)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst { chatTitle, avatarFile, chatMembers } = savedFields;\n\t\t\tthis.chatTitle = chatTitle;\n\t\t\tthis.avatarFile = avatarFile;\n\t\t\tthis.chatMembers = chatMembers;\n\t\t},\n\t\tsaveFields()\n\t\t{\n\t\t\tCreateChatManager.getInstance().saveFields({\n\t\t\t\tchatTitle: this.chatTitle,\n\t\t\t\tavatarFile: this.avatarFile,\n\t\t\t\tchatMembers: this.chatMembers,\n\t\t\t});\n\t\t},\n\t\tonLayoutChange(event: BaseEvent<OnLayoutChangeEvent>): void\n\t\t{\n\t\t\tconst { to } = event.getData();\n\t\t\tif (to.name === Layout.createChat.name && to.entityId !== ChatType.collab)\n\t\t\t{\n\t\t\t\tthis.exitByChatTypeSwitch = true;\n\t\t\t}\n\t\t},\n\t\tonMembersChange(currentTags: [string, number | string][])\n\t\t{\n\t\t\tthis.chatMembers = currentTags;\n\t\t},\n\t\tasync onCreateClick(): void\n\t\t{\n\t\t\tthis.isCreating = true;\n\n\t\t\tconst { newDialogId } = await this.getChatService().createCollab({\n\t\t\t\ttitle: this.chatTitle,\n\t\t\t\tavatar: this.avatarFile,\n\t\t\t\tmemberEntities: this.chatMembers,\n\t\t\t}).catch(() => {\n\t\t\t\tthis.isCreating = false;\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('IM_CREATE_CHAT_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.isCreating = false;\n\t\t\tthis.exitByCreation = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tvoid Messenger.openChat(newDialogId);\n\t\t},\n\t\tonCancelClick()\n\t\t{\n\t\t\tthis.exitByCancel = true;\n\t\t\tCreateChatManager.getInstance().setCreationStatus(false);\n\t\t\tMessenger.openChat();\n\t\t},\n\t\tonAvatarChange(newAvatarFile: File)\n\t\t{\n\t\t\tthis.avatarFile = newAvatarFile;\n\t\t\tCreateChatManager.getInstance().setChatAvatar(this.avatarFile);\n\t\t},\n\t\tonScroll()\n\t\t{\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersAddMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersDeleteMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUiMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageMessagesMenu)?.close();\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat-forms__content --collab\" @scroll=\"onScroll\">\n\t\t\t<div class=\"bx-im-content-chat-forms__header\">\n\t\t\t\t<ChatAvatar :avatarFile=\"avatarFile\" :chatTitle=\"chatTitle\" @avatarChange=\"onAvatarChange\" :squared=\"true\" />\n\t\t\t\t<TitleInput v-model=\"chatTitle\" :placeholder=\"loc('IM_CREATE_COLLAB_TITLE_PLACEHOLDER')\" />\n\t\t\t</div>\n\t\t\t<CreateChatHeading :text=\"loc('IM_CREATE_COLLAB_MEMBERS_TITLE')\" />\n\t\t\t<div class=\"bx-im-content-chat-forms__members_container\">\n\t\t\t\t<ChatMembersSelector :chatMembers=\"chatMembers\" @membersChange=\"onMembersChange\" />\n\t\t\t</div>\n\t\t</div>\n\t\t<ButtonPanel\n\t\t\t:isCreating=\"isCreating\"\n\t\t\t:createButtonTitle=\"loc('IM_CREATE_COLLAB_CONFIRM')\"\n\t\t\t@create=\"onCreateClick\"\n\t\t\t@cancel=\"onCancelClick\"\n\t\t/>\n\t`,\n};\n","import { ChatType } from 'im.v2.const';\n\nimport { GroupChatCreation } from './components/create/group-chat';\nimport { ConferenceCreation } from './components/create/conference';\nimport { ChannelCreation } from './components/create/channel';\nimport { CollabCreation } from './components/create/collab';\n\nimport './css/chat-forms-content.css';\n\nimport type { BitrixVueComponentProps } from 'ui.vue3';\n\nconst CreationComponentByChatType = {\n\t[ChatType.chat]: GroupChatCreation,\n\t[ChatType.videoconf]: ConferenceCreation,\n\t[ChatType.channel]: ChannelCreation,\n\t[ChatType.collab]: CollabCreation,\n\tdefault: GroupChatCreation,\n};\n\n// @vue/component\nexport const CreateChatContent = {\n\tname: 'CreateChatContent',\n\tcomponents: { GroupChatCreation, ConferenceCreation, ChannelCreation, CollabCreation },\n\tprops:\n\t{\n\t\tentityId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tChatType: () => ChatType,\n\t\tchatType(): $Values<typeof ChatType>\n\t\t{\n\t\t\treturn this.entityId;\n\t\t},\n\t\tcreationComponent(): BitrixVueComponentProps\n\t\t{\n\t\t\treturn CreationComponentByChatType[this.chatType] ?? CreationComponentByChatType.default;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat-forms__container\">\n\t\t\t<component :is=\"creationComponent\" />\n\t\t</div>\n\t`,\n};\n","type MemberElement = [string, number | string];\n\nexport class ChatMemberDiffManager\n{\n\t#initialManagers: number[] = [];\n\t#initialMembers: MemberElement[] = [];\n\n\tsetInitialManagers(initialManagers: number[])\n\t{\n\t\tthis.#initialManagers = initialManagers;\n\t}\n\n\tsetInitialChatMembers(initialMembers: MemberElement)\n\t{\n\t\tthis.#initialMembers = initialMembers;\n\t}\n\n\tgetAddedMemberEntities(modifiedEntities: MemberElement[]): MemberElement[]\n\t{\n\t\tconst originalSet = new Set(this.#initialMembers.map((elem) => JSON.stringify(elem)));\n\n\t\treturn modifiedEntities.filter((elem) => !originalSet.has(JSON.stringify(elem)));\n\t}\n\n\tgetDeletedMemberEntities(modifiedEntities: MemberElement[]): MemberElement[]\n\t{\n\t\tconst modifiedSet = new Set(modifiedEntities.map((elem) => JSON.stringify(elem)));\n\n\t\treturn this.#initialMembers.filter((elem) => !modifiedSet.has(JSON.stringify(elem)));\n\t}\n\n\tgetAddedManagers(modifiedArray: number[]): number[]\n\t{\n\t\tconst originalSet = new Set(this.#initialManagers);\n\n\t\treturn modifiedArray.filter((elem) => !originalSet.has(elem));\n\t}\n\n\tgetDeletedManagers(modifiedArray: number[]): number[]\n\t{\n\t\tconst modifiedSet = new Set(modifiedArray);\n\n\t\treturn this.#initialManagers.filter((elem) => !modifiedSet.has(elem));\n\t}\n}\n","const ENTITY_ID = 'imUpdateChatCollapsedUsers';\nconst AVATAR_URL = '/bitrix/js/im/v2/component/content/chat-forms/src/css/images/collapsed-users-avatar.svg';\n\nexport type TagSelectorElement = {\n\tid: number,\n\tentityId: string,\n\tavatar: string,\n\ttitle: {\n\t\ttext: string,\n\t\ttype: 'html',\n\t},\n\tdeselectable: boolean,\n\ttagOptions: {\n\t\tonclick: Function,\n\t},\n};\n\nexport function getCollapsedUsersElement({ title, onclick }): TagSelectorElement\n{\n\tconst textNode = `\n\t\t<div class=\"bx-im-content-chat-forms__collapsed-users\">\n\t\t\t${title}\n\t\t\t<div class=\"bx-im-content-chat-forms__collapsed-users-icon\"></div>\n\t\t</div>\n\t`;\n\n\treturn {\n\t\tid: 0,\n\t\tentityId: ENTITY_ID,\n\t\tavatar: AVATAR_URL,\n\t\ttitle: {\n\t\t\ttext: textNode,\n\t\t\ttype: 'html',\n\t\t},\n\t\tdeselectable: false,\n\t\ttagOptions: { onclick },\n\t};\n}\n","import 'ui.notification';\nimport { EventEmitter } from 'main.core.events';\nimport { MenuManager } from 'main.popup';\n\nimport { Messenger } from 'im.public';\nimport { Analytics } from 'im.v2.lib.analytics';\nimport { ChatService } from 'im.v2.provider.service';\nimport { ChatType, EventType, PopupType, SidebarDetailBlock, UserRole } from 'im.v2.const';\nimport { showExitUpdateGroupChatConfirm } from 'im.v2.lib.confirm';\n\nimport { ChatMembersSelector } from '../elements/chat-members';\nimport { TitleInput } from '../elements/title-input';\nimport { ChatAvatar } from '../elements/chat-avatar';\nimport { ButtonPanel } from '../elements/button-panel';\nimport { CreateChatHeading } from '../elements/heading';\nimport { RightsSection } from '../sections/rights/rights-section';\nimport { SettingsSection } from '../sections/settings/settings-section';\nimport { ChatMemberDiffManager } from '../../classes/chat-member-diff-manager';\nimport { getCollapsedUsersElement, type TagSelectorElement } from '../../helpers/get-collapsed-users-element';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelChat } from 'im.v2.model';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const GroupChatUpdating = {\n\tname: 'GroupChatUpdating',\n\tcomponents: {\n\t\tTitleInput,\n\t\tChatAvatar,\n\t\tButtonPanel,\n\t\tCreateChatHeading,\n\t\tChatMembersSelector,\n\t\tSettingsSection,\n\t\tRightsSection,\n\t},\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisLoading: true,\n\t\t\tisUpdating: false,\n\t\t\tareUsersCollapsed: false,\n\t\t\tcollapsedUsersCount: 0,\n\t\t\tavatarFile: null,\n\t\t\tavatarUrl: '',\n\t\t\tchatTitle: '',\n\t\t\tchatMembers: [],\n\t\t\tsettings: {\n\t\t\t\tisAvailableInSearch: false,\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t\trights: {\n\t\t\t\townerId: 0,\n\t\t\t\tmanagerIds: [],\n\t\t\t\tmanageUsersAdd: '',\n\t\t\t\tmanageUsersDelete: '',\n\t\t\t\tmanageUi: '',\n\t\t\t\tmanageMessages: '',\n\t\t\t},\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tchatId(): number\n\t\t{\n\t\t\treturn this.dialog.chatId;\n\t\t},\n\t\tcollapsedUsers(): TagSelectorElement[]\n\t\t{\n\t\t\tif (!this.areUsersCollapsed)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst title = this.loc('IM_UPDATE_GROUP_CHAT_COLLAPSED_ELEMENT', {\n\t\t\t\t'#COUNT#': this.collapsedUsersCount,\n\t\t\t});\n\n\t\t\tconst element = getCollapsedUsersElement({\n\t\t\t\ttitle,\n\t\t\t\tonclick: this.onCollapsedUsersClick,\n\t\t\t});\n\n\t\t\treturn [element];\n\t\t},\n\t\tcanChangeSearchAvailability(): boolean\n\t\t{\n\t\t\treturn [ChatType.open, ChatType.chat].includes(this.dialog.type);\n\t\t},\n\t\tchangedChatType(): $Values<typeof ChatType>\n\t\t{\n\t\t\tif (!this.canChangeSearchAvailability)\n\t\t\t{\n\t\t\t\treturn this.dialog.type;\n\t\t\t}\n\n\t\t\treturn this.settings.isAvailableInSearch ? ChatType.open : ChatType.chat;\n\t\t},\n\t},\n\tasync created()\n\t{\n\t\tawait this.fillForm();\n\t\tthis.memberDiffManager = new ChatMemberDiffManager();\n\t\tthis.memberDiffManager.setInitialChatMembers(this.chatMembers);\n\t\tthis.memberDiffManager.setInitialManagers(this.rights.managerIds);\n\n\t\tthis.isLoading = false;\n\t},\n\tmethods:\n\t{\n\t\tonMembersChange(currentTags: [string, number | string][])\n\t\t{\n\t\t\tthis.chatMembers = currentTags;\n\t\t},\n\t\tonChatTypeChange(isAvailableInSearch: boolean)\n\t\t{\n\t\t\tthis.settings.isAvailableInSearch = isAvailableInSearch;\n\t\t},\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.rights.ownerId = ownerId;\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.rights.managerIds = managerIds;\n\t\t},\n\t\tonManageUsersAddChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersAdd = newValue;\n\t\t},\n\t\tonManageUsersDeleteChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersDelete = newValue;\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUi = newValue;\n\t\t},\n\t\tonManageMessagesChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageMessages = newValue;\n\t\t},\n\t\tonDescriptionChange(description: string)\n\t\t{\n\t\t\tthis.settings.description = description;\n\t\t},\n\t\tasync fillForm()\n\t\t{\n\t\t\tthis.chatTitle = this.dialog.name;\n\t\t\tthis.avatarUrl = this.dialog.avatar;\n\t\t\tthis.settings.description = this.dialog.description;\n\t\t\tthis.chatMembers = await this.getMemberEntities();\n\t\t\tthis.rights.ownerId = this.dialog.ownerId;\n\t\t\tthis.rights.manageMessages = this.dialog.permissions.manageMessages;\n\t\t\tthis.rights.managerIds = this.dialog.managerList;\n\t\t\tthis.rights.manageUi = this.dialog.permissions.manageUi;\n\t\t\tthis.rights.manageUsersAdd = this.dialog.permissions.manageUsersAdd;\n\t\t\tthis.rights.manageUsersDelete = this.dialog.permissions.manageUsersDelete;\n\t\t\tthis.settings.isAvailableInSearch = this.dialog.type === ChatType.open;\n\t\t},\n\t\tasync getMemberEntities(): Promise<[string, number][]>\n\t\t{\n\t\t\tconst {\n\t\t\t\tmemberEntities,\n\t\t\t\tareUsersCollapsed,\n\t\t\t\tuserCount,\n\t\t\t} = await this.getChatService().getMemberEntities(this.chatId);\n\n\t\t\tif (areUsersCollapsed)\n\t\t\t{\n\t\t\t\tthis.areUsersCollapsed = true;\n\t\t\t\tthis.collapsedUsersCount = userCount;\n\n\t\t\t\treturn memberEntities;\n\t\t\t}\n\n\t\t\treturn memberEntities;\n\t\t},\n\t\tasync onUpdateClick(): Promise\n\t\t{\n\t\t\tAnalytics.getInstance().onSubmitChatEditForm(this.dialogId);\n\n\t\t\tthis.isUpdating = true;\n\n\t\t\tawait this.getChatService().updateChat(this.chatId, {\n\t\t\t\ttitle: this.chatTitle,\n\t\t\t\tavatar: this.avatarFile,\n\t\t\t\tmanagers: this.dialog.managerList,\n\t\t\t\ttype: this.changedChatType,\n\t\t\t\taddedMemberEntities: this.memberDiffManager.getAddedMemberEntities(this.chatMembers),\n\t\t\t\tdeletedMemberEntities: this.memberDiffManager.getDeletedMemberEntities(this.chatMembers),\n\t\t\t\taddedManagers: this.memberDiffManager.getAddedManagers(this.rights.managerIds),\n\t\t\t\tdeletedManagers: this.memberDiffManager.getDeletedManagers(this.rights.managerIds),\n\t\t\t\townerId: this.rights.ownerId,\n\t\t\t\tisAvailableInSearch: this.settings.isAvailableInSearch,\n\t\t\t\tdescription: this.settings.description,\n\t\t\t\tmanageUsersAdd: this.rights.manageUsersAdd,\n\t\t\t\tmanageUsersDelete: this.rights.manageUsersDelete,\n\t\t\t\tmanageUi: this.rights.manageUi,\n\t\t\t\tmanageMessages: this.rights.manageMessages,\n\t\t\t}).catch(() => {\n\t\t\t\tthis.isUpdating = false;\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('IM_UPDATE_CHAT_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.isUpdating = false;\n\n\t\t\treturn Messenger.openChat(this.dialogId);\n\t\t},\n\t\tonCancelClick()\n\t\t{\n\t\t\tAnalytics.getInstance().onCancelChatEditForm(this.dialogId);\n\t\t\tvoid Messenger.openChat(this.dialogId);\n\t\t},\n\t\tonAvatarChange(newAvatarFile: File)\n\t\t{\n\t\t\tthis.avatarFile = newAvatarFile;\n\t\t\tthis.avatarUrl = '';\n\t\t},\n\t\tonScroll()\n\t\t{\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersAddMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersDeleteMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUiMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageMessagesMenu)?.close();\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tasync onCollapsedUsersClick()\n\t\t{\n\t\t\tconst confirmResult = await showExitUpdateGroupChatConfirm();\n\t\t\tif (!confirmResult)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait this.onUpdateClick();\n\n\t\t\tEventEmitter.emit(EventType.sidebar.open, {\n\t\t\t\tpanel: SidebarDetailBlock.members,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-if=\"isLoading\" class=\"bx-im-content-chat-forms__skeleton\"></div>\n\t\t<div v-else class=\"bx-im-content-chat-forms__content --chat\" @scroll=\"onScroll\">\n\t\t\t<div class=\"bx-im-content-chat-forms__header\">\n\t\t\t\t<ChatAvatar\n\t\t\t\t\t:avatarFile=\"avatarFile\" \n\t\t\t\t\t:existingAvatarUrl=\"avatarUrl\" \n\t\t\t\t\t:chatTitle=\"chatTitle\" \n\t\t\t\t\t@avatarChange=\"onAvatarChange\" \n\t\t\t\t/>\n\t\t\t\t<TitleInput v-model=\"chatTitle\" :placeholder=\"loc('IM_CREATE_CHAT_TITLE_PLACEHOLDER')\" />\n\t\t\t</div>\n\t\t\t<CreateChatHeading :text=\"loc('IM_CREATE_CHAT_MEMBERS_TITLE')\" />\n\t\t\t<div class=\"bx-im-content-chat-forms__members_container\">\n\t\t\t\t<ChatMembersSelector \n\t\t\t\t\t:customElements=\"collapsedUsers\"\n\t\t\t\t\t:chatMembers=\"chatMembers\" \n\t\t\t\t\t@membersChange=\"onMembersChange\" \n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<SettingsSection\n\t\t\t\t:isAvailableInSearch=\"settings.isAvailableInSearch\"\n\t\t\t\t:description=\"settings.description\"\n\t\t\t\t:withSearchOption=\"canChangeSearchAvailability\"\n\t\t\t\t@chatTypeChange=\"onChatTypeChange\"\n\t\t\t\t@descriptionChange=\"onDescriptionChange\"\n\t\t\t/>\n\t\t\t<RightsSection\n\t\t\t\t:ownerId=\"rights.ownerId\"\n\t\t\t\t:managerIds=\"rights.managerIds\"\n\t\t\t\t:manageUsersAdd=\"rights.manageUsersAdd\"\n\t\t\t\t:manageUsersDelete=\"rights.manageUsersDelete\"\n\t\t\t\t:manageUi=\"rights.manageUi\"\n\t\t\t\t:manageMessages=\"rights.manageMessages\"\n\t\t\t\t@ownerChange=\"onOwnerChange\"\n\t\t\t\t@managersChange=\"onManagersChange\"\n\t\t\t\t@manageUsersAddChange=\"onManageUsersAddChange\"\n\t\t\t\t@manageUsersDeleteChange=\"onManageUsersDeleteChange\"\n\t\t\t\t@manageUiChange=\"onManageUiChange\"\n\t\t\t\t@manageMessagesChange=\"onManageMessagesChange\"\n\t\t\t/>\n\t\t</div>\n\t\t<ButtonPanel\n\t\t\t:isCreating=\"isUpdating || isLoading\"\n\t\t\t:createButtonTitle=\"loc('IM_UPDATE_CONFIRM')\"\n\t\t\t@create=\"onUpdateClick\"\n\t\t\t@cancel=\"onCancelClick\"\n\t\t/>\n\t`,\n};\n","import 'ui.notification';\nimport { EventEmitter } from 'main.core.events';\nimport { MenuManager } from 'main.popup';\n\nimport { Messenger } from 'im.public';\nimport { Analytics } from 'im.v2.lib.analytics';\nimport { ChatService } from 'im.v2.provider.service';\nimport { UserRole, PopupType, ChatType, EventType, SidebarDetailBlock } from 'im.v2.const';\nimport { showExitUpdateChannelConfirm } from 'im.v2.lib.confirm';\n\nimport { TitleInput } from '../elements/title-input';\nimport { ChatAvatar } from '../elements/chat-avatar';\nimport { ChatMembersSelector } from '../elements/chat-members';\nimport { ButtonPanel } from '../elements/button-panel';\nimport { TextareaInput } from '../elements/textarea';\nimport { CreateChatHeading } from '../elements/heading';\nimport { SettingsSection } from '../sections/settings/settings-section';\nimport { RightsSection } from '../sections/rights/rights-section';\nimport { AppearanceSection } from '../sections/appearance/appearance-section';\nimport { PrivacySection } from '../sections/privacy/privacy-section';\nimport { ChatMemberDiffManager } from '../../classes/chat-member-diff-manager';\nimport { getCollapsedUsersElement, type TagSelectorElement } from '../../helpers/get-collapsed-users-element';\n\nimport type { ImModelChat } from 'im.v2.model';\nimport type { JsonObject } from 'main.core';\n\ntype UserRoleItem = $Keys<typeof UserRole>;\n\n// @vue/component\nexport const ChannelUpdating = {\n\tname: 'ChannelUpdating',\n\tcomponents: {\n\t\tTitleInput,\n\t\tChatAvatar,\n\t\tChatMembersSelector,\n\t\tSettingsSection,\n\t\tRightsSection,\n\t\tAppearanceSection,\n\t\tPrivacySection,\n\t\tButtonPanel,\n\t\tTextareaInput,\n\t\tCreateChatHeading,\n\t},\n\tprops: {\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisLoading: true,\n\t\t\tisUpdating: false,\n\t\t\tareUsersCollapsed: false,\n\t\t\tcollapsedUsersCount: 0,\n\t\t\tavatarFile: null,\n\t\t\tavatarUrl: '',\n\t\t\tchatTitle: '',\n\t\t\tchatMembers: [],\n\t\t\tsettings: {\n\t\t\t\tisAvailableInSearch: true,\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t\trights: {\n\t\t\t\townerId: 0,\n\t\t\t\tmanagerIds: [],\n\t\t\t\tmanageUsersAdd: '',\n\t\t\t\tmanageUsersDelete: '',\n\t\t\t\tmanageUi: '',\n\t\t\t\tmanageMessages: '',\n\t\t\t},\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tChatType: () => ChatType,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tchatId(): number\n\t\t{\n\t\t\treturn this.dialog.chatId;\n\t\t},\n\t\tcollapsedUsers(): TagSelectorElement[]\n\t\t{\n\t\t\tif (!this.areUsersCollapsed)\n\t\t\t{\n\t\t\t\treturn [];\n\t\t\t}\n\n\t\t\tconst title = this.loc('IM_UPDATE_CHANNEL_COLLAPSED_ELEMENT', {\n\t\t\t\t'#COUNT#': this.collapsedUsersCount,\n\t\t\t});\n\n\t\t\tconst element = getCollapsedUsersElement({\n\t\t\t\ttitle,\n\t\t\t\tonclick: this.onCollapsedUsersClick,\n\t\t\t});\n\n\t\t\treturn [element];\n\t\t},\n\t\tchangedChatType(): $Values<typeof ChatType>\n\t\t{\n\t\t\treturn this.settings.isAvailableInSearch ? ChatType.openChannel : ChatType.channel;\n\t\t},\n\t},\n\tasync created()\n\t{\n\t\tawait this.fillForm();\n\t\tthis.memberDiffManager = new ChatMemberDiffManager();\n\t\tthis.memberDiffManager.setInitialChatMembers(this.chatMembers);\n\t\tthis.memberDiffManager.setInitialManagers(this.rights.managerIds);\n\n\t\tthis.isLoading = false;\n\t},\n\tmethods:\n\t{\n\t\tonMembersChange(currentTags: [string, number | string][])\n\t\t{\n\t\t\tthis.chatMembers = currentTags;\n\t\t},\n\t\tonOwnerChange(ownerId: number)\n\t\t{\n\t\t\tthis.rights.ownerId = ownerId;\n\t\t},\n\t\tonManagersChange(managerIds: number[])\n\t\t{\n\t\t\tthis.rights.managerIds = managerIds;\n\t\t},\n\t\tonDescriptionChange(description: string)\n\t\t{\n\t\t\tthis.settings.description = description;\n\t\t},\n\t\tonManageUsersAddChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersAdd = newValue;\n\t\t},\n\t\tonManageUsersDeleteChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUsersDelete = newValue;\n\t\t},\n\t\tonManageUiChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageUi = newValue;\n\t\t},\n\t\tonManageMessagesChange(newValue: UserRoleItem)\n\t\t{\n\t\t\tthis.rights.manageMessages = newValue;\n\t\t},\n\t\tonChatTypeChange(isAvailableInSearch: boolean)\n\t\t{\n\t\t\tthis.settings.isAvailableInSearch = isAvailableInSearch;\n\t\t},\n\t\tasync onUpdateClick(): Promise\n\t\t{\n\t\t\tAnalytics.getInstance().onSubmitChatEditForm(this.dialogId);\n\n\t\t\tthis.isUpdating = true;\n\n\t\t\tawait this.getChatService().updateChat(this.chatId, {\n\t\t\t\ttitle: this.chatTitle,\n\t\t\t\tavatar: this.avatarFile,\n\t\t\t\ttype: this.changedChatType,\n\t\t\t\taddedMemberEntities: this.memberDiffManager.getAddedMemberEntities(this.chatMembers),\n\t\t\t\tdeletedMemberEntities: this.memberDiffManager.getDeletedMemberEntities(this.chatMembers),\n\t\t\t\taddedManagers: this.memberDiffManager.getAddedManagers(this.rights.managerIds),\n\t\t\t\tdeletedManagers: this.memberDiffManager.getDeletedManagers(this.rights.managerIds),\n\t\t\t\townerId: this.rights.ownerId,\n\t\t\t\tmanagers: this.dialog.managerList,\n\t\t\t\tisAvailableInSearch: this.settings.isAvailableInSearch,\n\t\t\t\tdescription: this.settings.description,\n\t\t\t\tmanageUsersAdd: this.rights.manageUsersAdd,\n\t\t\t\tmanageUsersDelete: this.rights.manageUsersDelete,\n\t\t\t\tmanageUi: this.rights.manageUi,\n\t\t\t\tmanageMessages: this.rights.manageMessages,\n\t\t\t}).catch(() => {\n\t\t\t\tthis.isUpdating = false;\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('IM_UPDATE_CHAT_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.isUpdating = false;\n\n\t\t\treturn Messenger.openChat(this.dialogId);\n\t\t},\n\t\tonCancelClick()\n\t\t{\n\t\t\tAnalytics.getInstance().onCancelChatEditForm(this.dialogId);\n\t\t\tvoid Messenger.openChat(this.dialogId);\n\t\t},\n\t\tonAvatarChange(newAvatarFile: File)\n\t\t{\n\t\t\tthis.avatarFile = newAvatarFile;\n\t\t\tthis.avatarUrl = '';\n\t\t},\n\t\tonScroll()\n\t\t{\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersAddMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUsersDeleteMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageUiMenu)?.close();\n\t\t\tMenuManager.getMenuById(PopupType.createChatManageMessagesMenu)?.close();\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tasync fillForm()\n\t\t{\n\t\t\tthis.chatTitle = this.dialog.name;\n\t\t\tthis.avatarUrl = this.dialog.avatar;\n\t\t\tthis.settings.description = this.dialog.description;\n\t\t\tthis.chatMembers = await this.getMemberEntities();\n\t\t\tthis.rights.ownerId = this.dialog.ownerId;\n\t\t\tthis.rights.manageMessages = this.dialog.permissions.manageMessages;\n\t\t\tthis.rights.managerIds = this.dialog.managerList;\n\t\t\tthis.rights.manageUi = this.dialog.permissions.manageUi;\n\t\t\tthis.rights.manageUsersAdd = this.dialog.permissions.manageUsersAdd;\n\t\t\tthis.rights.manageUsersDelete = this.dialog.permissions.manageUsersDelete;\n\t\t\tthis.settings.isAvailableInSearch = this.dialog.type === ChatType.openChannel;\n\t\t},\n\t\tasync getMemberEntities(): Promise<[string, number][]>\n\t\t{\n\t\t\tconst {\n\t\t\t\tmemberEntities,\n\t\t\t\tareUsersCollapsed,\n\t\t\t\tuserCount,\n\t\t\t} = await this.getChatService().getMemberEntities(this.chatId);\n\n\t\t\tif (areUsersCollapsed)\n\t\t\t{\n\t\t\t\tthis.areUsersCollapsed = true;\n\t\t\t\tthis.collapsedUsersCount = userCount;\n\n\t\t\t\treturn memberEntities;\n\t\t\t}\n\n\t\t\treturn memberEntities;\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t\tasync onCollapsedUsersClick()\n\t\t{\n\t\t\tconst confirmResult = await showExitUpdateChannelConfirm();\n\t\t\tif (!confirmResult)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tawait this.onUpdateClick();\n\n\t\t\tEventEmitter.emit(EventType.sidebar.open, {\n\t\t\t\tpanel: SidebarDetailBlock.members,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div v-if=\"isLoading\" class=\"bx-im-content-chat-forms__skeleton\"></div>\n\t\t<div v-else class=\"bx-im-content-chat-forms__content --channel\" @scroll=\"onScroll\">\n\t\t\t<div class=\"bx-im-content-chat-forms__header\">\n\t\t\t\t<ChatAvatar \n\t\t\t\t\t:avatarFile=\"avatarFile\" \n\t\t\t\t\t:chatTitle=\"chatTitle\"\n\t\t\t\t\t:existingAvatarUrl=\"avatarUrl\"\n\t\t\t\t\t@avatarChange=\"onAvatarChange\" \n\t\t\t\t\t:squared=\"true\" \n\t\t\t\t/>\n\t\t\t\t<TitleInput v-model=\"chatTitle\" :placeholder=\"loc('IM_CREATE_CHANNEL_TITLE_PLACEHOLDER_V2')\" />\n\t\t\t</div>\n\t\t\t<CreateChatHeading :text=\"loc('IM_CREATE_CHANNEL_DESCRIPTION_TITLE')\" />\n\t\t\t<div class=\"bx-im-content-chat-forms__description_container\">\n\t\t\t\t<TextareaInput\n\t\t\t\t\t:value=\"settings.description\"\n\t\t\t\t\t:placeholder=\"loc('IM_CREATE_CHANNEL_DESCRIPTION_PLACEHOLDER_V3')\"\n\t\t\t\t\t:border=\"false\"\n\t\t\t\t\t@input=\"onDescriptionChange\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<PrivacySection\n\t\t\t\t:isAvailableInSearch=\"settings.isAvailableInSearch\"\n\t\t\t\t@chatTypeChange=\"onChatTypeChange\"\n\t\t\t/>\n\t\t\t<CreateChatHeading\n\t\t\t\t:text=\"loc('IM_CREATE_CHANNEL_MEMBERS_TITLE')\"\n\t\t\t\t:hintText=\"loc('IM_CREATE_CHANNEL_MEMBERS_HINT')\"\n\t\t\t/>\n\t\t\t<div class=\"bx-im-content-chat-forms__members_container\">\n\t\t\t\t<ChatMembersSelector\n\t\t\t\t\t:customElements=\"collapsedUsers\"\n\t\t\t\t\t:chatMembers=\"chatMembers\" \n\t\t\t\t\t@membersChange=\"onMembersChange\" \n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<RightsSection\n\t\t\t\t:chatType=\"ChatType.channel\"\n\t\t\t\t:ownerId=\"rights.ownerId\"\n\t\t\t\t:managerIds=\"rights.managerIds\"\n\t\t\t\t:manageUsersAdd=\"rights.manageUsersAdd\"\n\t\t\t\t:manageUsersDelete=\"rights.manageUsersDelete\"\n\t\t\t\t:manageUi=\"rights.manageUi\"\n\t\t\t\t:manageMessages=\"rights.manageMessages\"\n\t\t\t\t@ownerChange=\"onOwnerChange\"\n\t\t\t\t@managersChange=\"onManagersChange\"\n\t\t\t\t@manageUsersAddChange=\"onManageUsersAddChange\"\n\t\t\t\t@manageUsersDeleteChange=\"onManageUsersDeleteChange\"\n\t\t\t\t@manageUiChange=\"onManageUiChange\"\n\t\t\t\t@manageMessagesChange=\"onManageMessagesChange\"\n\t\t\t/>\n\t\t</div>\n\t\t<ButtonPanel\n\t\t\t:isCreating=\"isLoading || isUpdating\"\n\t\t\t:createButtonTitle=\"loc('IM_UPDATE_CONFIRM')\"\n\t\t\t@create=\"onUpdateClick\"\n\t\t\t@cancel=\"onCancelClick\"\n\t\t/>\n\t`,\n};\n","import { ChatType } from 'im.v2.const';\n\nimport { GroupChatUpdating } from './components/update/group-chat';\nimport { ChannelUpdating } from './components/update/channel';\n\nimport './css/chat-forms-content.css';\n\n// @vue/component\nexport const UpdateChatContent = {\n\tname: 'UpdateChatContent',\n\tcomponents: { GroupChatUpdating, ChannelUpdating },\n\tprops:\n\t{\n\t\tentityId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tChatType: () => ChatType,\n\t\tchatType(): $Values<typeof ChatType>\n\t\t{\n\t\t\tconst chat = this.$store.getters['chats/get'](this.entityId, true);\n\n\t\t\treturn chat.type;\n\t\t},\n\t\tisChannel(): boolean\n\t\t{\n\t\t\tconst editableChannelTypes = new Set([ChatType.channel, ChatType.openChannel]);\n\n\t\t\treturn editableChannelTypes.has(this.chatType);\n\t\t},\n\t\tisChat(): boolean\n\t\t{\n\t\t\tconst editableChatTypes = new Set([ChatType.chat, ChatType.open, ChatType.videoconf]);\n\n\t\t\treturn editableChatTypes.has(this.chatType);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat-forms__container\">\n\t\t\t<GroupChatUpdating v-if=\"isChat\" :dialogId=\"this.entityId\" />\n\t\t\t<ChannelUpdating v-else-if=\"isChannel\" :dialogId=\"this.entityId\" />\n\t\t</div>\n\t`,\n};\n"],"names":["TitleInput","name","props","modelValue","type","String","default","placeholder","required","emits","mounted","$refs","titleInput","focus","methods","onInput","event","$emit","target","value","template","ChatAvatar","avatarFile","validator","File","Type","isNull","existingAvatarUrl","chatTitle","squared","Boolean","computed","preparedAvatar","URL","createObjectURL","avatarToShow","onAvatarChangeClick","avatarInput","click","onAvatarSelect","input","file","files","getChatService","prepareAvatar","chatService","ChatService","ChatMembersSelector","chatMembers","Array","customElements","created","addButtonCaption","loc","membersSelector","TagSelector","maxHeight","addButtonCaptionMore","showCreateButton","items","dialogOptions","enableSearch","alwaysShowLabels","context","entities","getEntitiesConfig","preselectedItems","undeselectedItems","Core","getUserId","events","onItemsChange","renderTo","members","entitiesConfig","id","allowDepartments","FeatureManager","isFeatureAvailable","Feature","chatDepartments","push","options","selectMode","allowFlatDepartments","allowSelectRootDepartment","dialog","getTarget","selectedItems","getSelectedItems","map","item","prepareTag","tag","getEntityId","getId","phraseCode","$Bitrix","Loc","getMessage","ButtonPanel","components","MessengerButton","isCreating","createButtonTitle","ButtonSize","ButtonColor","CreateChatHeading","ChatHint","text","hintText","preparedText","replace","CreateChatSection","ExpandAnimation","title","alwaysOpened","data","isOpened","containerClasses","onHeaderClick","TextareaInput","border","rounded","RadioOption","groupName","Text","getRandom","selectedValue","find","option","selected","SettingsSection","Dropdown","description","withSearchOption","isAvailableInSearch","privacyOptions","subtext","descriptionPlaceholderText","onTypeChange","onDescriptionChange","replacements","RoleSelector","dropdownItems","dropdownId","UserSelector","OwnerSelector","ownerId","Number","multiple","onBeforeTagAdd","getData","setDeselectable","onAfterTagAdd","owner","ManagersSelector","managerIds","currentUserId","userId","selector","getTags","onAfterTagRemove","managers","rightsDropdownItems","UserRole","member","manager","BlocksByChatType","ChatType","channel","Set","ChatActionGroup","manageUsersAdd","manageUsersDelete","manageMessages","manageUi","CanAddUsersCaptionByChatType","CanKickUsersCaptionByChatType","CanSendMessageCaptionByChatType","OwnerHintByChatType","ManagerHintByChatType","AddUsersHintByChatType","DeleteUsersHintByChatType","ManageUiHintByChatType","SendMessagesHintByChatType","RightsSection","chatType","chat","PopupType","manageUsersAddItems","prepareDropdownItems","manageUsersDeleteItems","manageUiItems","manageMessagesItems","showManageUiBlock","blocksByType","has","canAddUsersCaption","canKickUsersCaption","canSendCaption","ownerHint","managerHint","addUsersHint","deleteUsersHint","manageUiHint","sendMessagesHint","defaultValue","onOwnerChange","onManagersChange","onManageUsersAddChange","newValue","onManageUsersDeleteChange","onManageUiChange","onManageMessagesChange","AppearanceSection","GroupChatCreation","settings","rights","watch","CreateChatManager","getInstance","setChatTitle","EventEmitter","subscribe","EventType","layout","onLayoutChange","initDefaultRolesForRights","restoreFields","setChatType","setCreationStatus","setChatAvatar","beforeUnmount","exitByCancel","exitByChatTypeSwitch","exitByCreation","saveFields","onMembersChange","currentTags","onChatTypeChange","onCreateClick","newDialogId","createChat","avatar","memberEntities","catch","BX","UI","Notification","Center","notify","content","Messenger","openChat","onCancelClick","onAvatarChange","newAvatarFile","onScroll","MenuManager","getMenuById","createChatManageUsersAddMenu","close","createChatManageUsersDeleteMenu","createChatManageUiMenu","createChatManageMessagesMenu","to","Layout","entityId","savedFields","getFields","PermissionManager","getDefaultRolesForActionGroups","ConferenceSection","Toggle","passwordNeeded","password","ToggleSize","onPasswordNeededChange","onPasswordChange","onToggleLabelClick","ConferenceCreation","conference","videoconf","newPassword","checkPassword","showPasswordError","entityType","conferencePassword","PASSWORD_MIN_LENGTH","trim","length","PrivacySection","ChannelCreation","unsubscribe","CollabCreation","collab","createCollab","CreationComponentByChatType","CreateChatContent","creationComponent","ChatMemberDiffManager","setInitialManagers","initialManagers","setInitialChatMembers","initialMembers","getAddedMemberEntities","modifiedEntities","originalSet","elem","JSON","stringify","filter","getDeletedMemberEntities","modifiedSet","getAddedManagers","modifiedArray","getDeletedManagers","ENTITY_ID","AVATAR_URL","getCollapsedUsersElement","onclick","textNode","deselectable","tagOptions","GroupChatUpdating","dialogId","isLoading","isUpdating","areUsersCollapsed","collapsedUsersCount","avatarUrl","$store","getters","chatId","collapsedUsers","element","onCollapsedUsersClick","canChangeSearchAvailability","open","includes","changedChatType","fillForm","memberDiffManager","getMemberEntities","permissions","managerList","userCount","onUpdateClick","Analytics","onSubmitChatEditForm","updateChat","addedMemberEntities","deletedMemberEntities","addedManagers","deletedManagers","onCancelChatEditForm","confirmResult","showExitUpdateGroupChatConfirm","emit","sidebar","panel","SidebarDetailBlock","ChannelUpdating","openChannel","showExitUpdateChannelConfirm","UpdateChatContent","isChannel","editableChannelTypes","isChat","editableChatTypes"],"mappings":"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"}