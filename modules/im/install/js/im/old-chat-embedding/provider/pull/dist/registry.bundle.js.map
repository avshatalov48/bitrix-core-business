{"version":3,"file":"registry.bundle.js","sources":["../src/base.js","../src/recent.js"],"sourcesContent":["import {PullClient} from 'pull.client';\n\nimport {Core} from 'im.old-chat-embedding.application.core';\nimport {UserManager} from 'im.old-chat-embedding.lib.user';\nimport {Logger} from 'im.old-chat-embedding.lib.logger';\n\nexport class BasePullHandler\n{\n\tconstructor()\n\t{\n\t\tthis.store = Core.getStore();\n\t\tthis.userManager = new UserManager();\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'im';\n\t}\n\n\tgetSubscriptionType()\n\t{\n\t\treturn PullClient.SubscriptionType.Server;\n\t}\n\n\thandleMessage(params, extra)\n\t{\n\t\tthis.handleMessageAdd(params, extra);\n\t}\n\n\thandleMessageChat(params, extra)\n\t{\n\t\tthis.handleMessageAdd(params, extra);\n\t}\n\n\thandleMessageAdd(params, extra)\n\t{\n\t\tif (params.lines)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t\tLogger.warn('handleMessageAdd', params);\n\n\t\tif (params?.chat[params.chatId])\n\t\t{\n\t\t\tconst chatToAdd = {...params.chat[params.chatId], dialogId: params.dialogId};\n\t\t\tthis.store.dispatch('dialogues/set', chatToAdd);\n\t\t}\n\n\t\t//set users\n\t\tif (params.users)\n\t\t{\n\t\t\tthis.userManager.setUsersToModel(Object.values(params.users));\n\t\t}\n\n\t\t//stop writing event\n\t\tthis.store.dispatch('dialogues/stopWriting', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tuserId: params.message.senderId\n\t\t});\n\n\t\t// counters (TBD for own message)\n\t\tif (params.message.senderId !== Core.getUserId())\n\t\t{\n\t\t\tthis.store.dispatch('dialogues/update', {\n\t\t\t\tdialogId: params.dialogId,\n\t\t\t\tfields: {\n\t\t\t\t\tcounter: params.counter,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\thandleMessageUpdate(params, extra, command)\n\t{\n\t\tthis.execMessageUpdateOrDelete(params, extra, command);\n\t}\n\n\thandleMessageDelete(params, extra, command)\n\t{\n\t\tthis.execMessageUpdateOrDelete(params, extra, command);\n\t}\n\n\thandleMessageDeleteComplete(params, extra)\n\t{\n\t\tthis.execMessageUpdateOrDelete(params);\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tfields: {\n\t\t\t\tcounter: params.counter,\n\t\t\t},\n\t\t});\n\t}\n\n\texecMessageUpdateOrDelete(params)\n\t{\n\t\tthis.store.dispatch('dialogues/stopWriting', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tuserId: params.senderId\n\t\t});\n\t}\n\n\thandleChatOwner(params, extra)\n\t{\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tfields: {\n\t\t\t\townerId: params.userId,\n\t\t\t}\n\t\t});\n\t}\n\n\thandleChatManagers(params, extra)\n\t{\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tfields: {\n\t\t\t\tmanagerList: params.list,\n\t\t\t}\n\t\t});\n\t}\n\n\thandleChatUpdateParams(params, extra)\n\t{\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tfields: params.params\n\t\t});\n\t}\n\n\thandleChatUserAdd(params, extra)\n\t{\n\t\tif (params.users)\n\t\t{\n\t\t\tthis.userManager.setUsersToModel(params.users);\n\t\t}\n\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tfields: {userCounter: params.userCount}\n\t\t});\n\t}\n\n\thandleChatUserLeave(params, extra)\n\t{\n\t\tthis.handleChatUserAdd(params, extra);\n\t}\n\n\thandleStartWriting(params, extra)\n\t{\n\t\tconst {dialogId, userId, userName} = params;\n\t\tthis.store.dispatch('dialogues/startWriting', {\n\t\t\tdialogId,\n\t\t\tuserId,\n\t\t\tuserName\n\t\t});\n\t}\n\n\thandleReadMessage(params, extra)\n\t{\n\t\tLogger.warn('handleReadMessage', params);\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tfields: {\n\t\t\t\tcounter: params.counter,\n\t\t\t}\n\t\t});\n\t}\n\n\thandleReadMessageChat(params, extra)\n\t{\n\t\tthis.handleReadMessage(params, extra);\n\t}\n\n\thandleUnreadMessage(params, extra)\n\t{\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tfields: {\n\t\t\t\tcounter: params.counter,\n\t\t\t}\n\t\t});\n\t}\n\n\thandleUnreadMessageChat(params, extra)\n\t{\n\t\tthis.handleUnreadMessage(params, extra);\n\t}\n\n\thandleUnreadMessageOpponent(params, extra)\n\t{\n\t\tthis.execUnreadMessageOpponent(params, extra);\n\t}\n\n\thandleUnreadMessageChatOpponent(params, extra)\n\t{\n\t\tthis.execUnreadMessageOpponent(params, extra);\n\t}\n\n\texecUnreadMessageOpponent(params, extra)\n\t{\n\t\tthis.store.dispatch('dialogues/removeFromReadList', {\n\t\t\tdialogId: params.dialogId,\n\t\t\tuserId: params.userId\n\t\t});\n\t}\n\n\thandleReadAllChats()\n\t{\n\t\tLogger.warn('BasePullHandler: handleReadAllChats');\n\t\tthis.store.dispatch('dialogues/clearCounters');\n\t\tthis.store.dispatch('recent/clearUnread');\n\t}\n\n\thandleChatMuteNotify(params)\n\t{\n\t\tif (params.muted)\n\t\t{\n\t\t\tthis.store.dispatch('dialogues/mute', {\n\t\t\t\tdialogId: params.dialogId\n\t\t\t});\n\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.store.dispatch('dialogues/unmute', {\n\t\t\tdialogId: params.dialogId\n\t\t});\n\t}\n\n\thandleUserInvite(params)\n\t{\n\t\tif (!params.invited)\n\t\t{\n\t\t\tthis.store.dispatch('users/update', {\n\t\t\t\tid: params.userId,\n\t\t\t\tfields: params.user\n\t\t\t});\n\t\t}\n\t}\n\n\thandleChatRename(params)\n\t{\n\t\tconst dialog = this.store.getters['dialogues/getByChatId'](params.chatId);\n\t\tif (!dialog)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: dialog.dialogId,\n\t\t\tfields: {\n\t\t\t\tname: params.name\n\t\t\t}\n\t\t});\n\t}\n\n\thandleChatAvatar(params)\n\t{\n\t\tconst dialog = this.store.getters['dialogues/getByChatId'](params.chatId);\n\t\tif (!dialog)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('dialogues/update', {\n\t\t\tdialogId: dialog.dialogId,\n\t\t\tfields: {\n\t\t\t\tavatar: params.avatar\n\t\t\t}\n\t\t});\n\t}\n}","import {Type, Loc} from 'main.core';\n\nimport {Core} from 'im.old-chat-embedding.application.core';\nimport {Logger} from 'im.old-chat-embedding.lib.logger';\nimport {UserManager} from 'im.old-chat-embedding.lib.user';\nimport {MessageStatus} from 'im.old-chat-embedding.const';\n\nexport class RecentPullHandler\n{\n\tconstructor()\n\t{\n\t\tthis.store = Core.getStore();\n\t\tthis.userManager = new UserManager();\n\t}\n\n\tgetModuleId()\n\t{\n\t\treturn 'im';\n\t}\n\n\thandleMessage(params)\n\t{\n\t\tthis.handleMessageAdd(params);\n\t}\n\n\thandleMessageChat(params)\n\t{\n\t\tthis.handleMessageAdd(params);\n\t}\n\n\thandleMessageAdd(params)\n\t{\n\t\tif (params.lines)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst currentUserId = this.store.state.application.common.userId;\n\t\tif (currentUserId && params.userInChat[params.chatId] && !params.userInChat[params.chatId].includes(currentUserId))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tlet attach = false;\n\t\tif (Type.isArray(params.message.params['ATTACH']))\n\t\t{\n\t\t\tattach = params.message.params['ATTACH'];\n\t\t}\n\n\t\tlet file = false;\n\t\tif (Type.isArray(params.message.params['FILE_ID']))\n\t\t{\n\t\t\tfile = params.files[params.message.params['FILE_ID'][0]];\n\t\t}\n\n\t\tLogger.warn('RecentPullHandler: handleMessageAdd', params);\n\n\t\tconst newRecentItem = {\n\t\t\tid: params.dialogId,\n\t\t\tmessage: {\n\t\t\t\tid: params.message.id,\n\t\t\t\ttext: params.message.text,\n\t\t\t\tdate: params.message.date,\n\t\t\t\tsenderId: params.message.senderId,\n\t\t\t\tattach,\n\t\t\t\tfile,\n\t\t\t}\n\t\t};\n\n\t\tconst recentItem = this.store.getters['recent/get'](params.dialogId);\n\t\tif (recentItem)\n\t\t{\n\t\t\tnewRecentItem.options = {\n\t\t\t\tbirthdayPlaceholder: false\n\t\t\t};\n\n\t\t\tthis.store.dispatch('recent/like', {\n\t\t\t\tid: params.dialogId,\n\t\t\t\tliked: false\n\t\t\t});\n\t\t}\n\n\t\tconst {senderId} = params.message;\n\t\tconst usersModel = this.store.state.users;\n\t\tif (usersModel?.botList[senderId] && usersModel.botList[senderId].type === 'human')\n\t\t{\n\t\t\tconst {text} = params.message;\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.store.dispatch('recent/setRecent', newRecentItem);\n\t\t\t}, this.getWaitTimeForHumanBot(text));\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.store.dispatch('recent/setRecent', newRecentItem);\n\t}\n\n\thandleMessageUpdate(params, extra, command)\n\t{\n\t\tconst recentItem = this.store.getters['recent/get'](params.dialogId);\n\t\tif (!recentItem || recentItem.message.id !== params.id)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tLogger.warn('RecentPullHandler: handleMessageUpdate', params, command);\n\n\t\tlet text = params.text;\n\t\tif (command === 'messageDelete')\n\t\t{\n\t\t\ttext = Loc.getMessage('IM_EMBED_PULL_RECENT_MESSAGE_DELETED');\n\t\t}\n\n\t\tthis.store.dispatch('recent/update', {\n\t\t\tid: params.dialogId,\n\t\t\tfields: {\n\t\t\t\tmessage: {\n\t\t\t\t\tid: params.id,\n\t\t\t\t\ttext: text,\n\t\t\t\t\tdate: recentItem.message.date,\n\t\t\t\t\tstatus: recentItem.message.status,\n\t\t\t\t\tsenderId: params.senderId,\n\t\t\t\t\tparams: {\n\t\t\t\t\t\twithFile: false,\n\t\t\t\t\t\twithAttach: false,\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\thandleMessageDelete(params, extra, command)\n\t{\n\t\tthis.handleMessageUpdate(params, extra, command);\n\t}\n\n\thandleMessageDeleteComplete(params, extra)\n\t{\n\t\tconst lastMessageWasDeleted = Boolean(params.newLastMessage);\n\t\tif (lastMessageWasDeleted)\n\t\t{\n\t\t\tthis.store.dispatch('recent/update', {\n\t\t\t\tid: params.dialogId,\n\t\t\t\tfields: {\n\t\t\t\t\tmessage: params.newLastMessage,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\thandleReadMessageOpponent(params)\n\t{\n\t\tLogger.warn('RecentPullHandler: handleReadMessageOpponent', params);\n\t\tconst recentItem = this.store.getters['recent/get'](params.dialogId);\n\t\tconst lastReadMessage = Number.parseInt(params.lastId, 10);\n\t\tif (!recentItem || recentItem.message.id !== lastReadMessage)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('recent/update', {\n\t\t\tid: params.dialogId,\n\t\t\tfields: {\n\t\t\t\tmessage: {...recentItem.message, status: MessageStatus.delivered}\n\t\t\t}\n\t\t});\n\t}\n\n\thandleReadMessageChatOpponent(params)\n\t{\n\t\tthis.handleReadMessageOpponent(params);\n\t}\n\n\thandleUnreadMessageOpponent(params)\n\t{\n\t\tLogger.warn('RecentPullHandler: handleUnreadMessageOpponent', params);\n\t\tconst recentItem = this.store.getters['recent/get'](params.dialogId);\n\t\tif (!recentItem)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('recent/update', {\n\t\t\tid: params.dialogId,\n\t\t\tfields: {\n\t\t\t\tmessage: {...recentItem.message, status: MessageStatus.received}\n\t\t\t}\n\t\t});\n\t}\n\n\thandleUnreadMessageChatOpponent(params)\n\t{\n\t\tLogger.warn('RecentPullHandler: handleUnreadMessageChatOpponent', params);\n\t\tconst recentItem = this.store.getters['recent/get'](params.dialogId);\n\t\tif (!recentItem)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('recent/update', {\n\t\t\tid: params.dialogId,\n\t\t\tfields: {\n\t\t\t\tmessage: {...recentItem.message, status: params.chatMessageStatus}\n\t\t\t}\n\t\t});\n\t}\n\n\thandleMessageLike(params)\n\t{\n\t\tLogger.warn('RecentPullHandler: handleMessageLike', params);\n\t\tconst recentItem = this.store.getters['recent/get'](params.dialogId);\n\t\tif (!recentItem)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (Type.isUndefined(BX.MessengerProxy))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentDialogId = BX.MessengerProxy.getCurrentDialogId();\n\t\tif (currentDialogId === params.dialogId)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst currentUserId = Core.getUserId();\n\t\tconst isOwnLike = currentUserId === params.senderId;\n\t\tconst isOwnLastMessage = recentItem.message.senderId === currentUserId;\n\t\tif (isOwnLike || !isOwnLastMessage)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('recent/like', {\n\t\t\tid: params.dialogId,\n\t\t\tmessageId: params.id,\n\t\t\tliked: params.set\n\t\t});\n\t}\n\n\thandleChatPin(params)\n\t{\n\t\tLogger.warn('RecentPullHandler: handleChatPin', params);\n\t\tconst recentItem = this.store.getters['recent/get'](params.dialogId);\n\t\tif (!recentItem)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('recent/pin', {\n\t\t\tid: params.dialogId,\n\t\t\taction: params.active\n\t\t});\n\t}\n\n\thandleChatUnread(params)\n\t{\n\t\tLogger.warn('RecentPullHandler: handleChatUnread', params);\n\t\tconst recentItem = this.store.getters['recent/get'](params.dialogId);\n\t\tif (!recentItem)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('recent/unread', {\n\t\t\tid: params.dialogId,\n\t\t\taction: params.active\n\t\t});\n\t}\n\n\thandleChatHide(params)\n\t{\n\t\tLogger.warn('RecentPullHandler: handleChatHide', params);\n\t\tconst recentItem = this.store.getters['recent/get'](params.dialogId);\n\t\tif (!recentItem)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('recent/delete', {\n\t\t\tid: params.dialogId\n\t\t});\n\t}\n\n\thandleChatUserLeave(params)\n\t{\n\t\tLogger.warn('RecentPullHandler: handleChatUserLeave', params);\n\t\tconst recentItem = this.store.getters['recent/get'](params.dialogId);\n\t\tif (!recentItem)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst currentUserId = this.store.state.application.common.userId;\n\t\tif (currentUserId !== params.userId)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.store.dispatch('recent/delete', {\n\t\t\tid: params.dialogId\n\t\t});\n\t}\n\n\thandleUserInvite(params)\n\t{\n\t\tLogger.warn('RecentPullHandler: handleUserInvite', params);\n\t\tthis.store.dispatch('recent/setRecent', {\n\t\t\tid: params.user.id,\n\t\t\tinvited: params.invited ?? false\n\t\t});\n\t\tthis.userManager.setUsersToModel([params.user]);\n\t}\n\n\tgetWaitTimeForHumanBot(text)\n\t{\n\t\tconst INITIAL_WAIT = 1000;\n\t\tconst WAIT_PER_WORD = 300;\n\t\tconst WAIT_LIMIT = 5000;\n\n\t\tlet waitTime = (text.split(' ').length * WAIT_PER_WORD) + INITIAL_WAIT;\n\t\tif (waitTime > WAIT_LIMIT)\n\t\t{\n\t\t\twaitTime = WAIT_LIMIT;\n\t\t}\n\n\t\treturn waitTime;\n\t}\n}"],"names":["BasePullHandler","constructor","store","Core","getStore","userManager","UserManager","getModuleId","getSubscriptionType","PullClient","SubscriptionType","Server","handleMessage","params","extra","handleMessageAdd","handleMessageChat","lines","Logger","warn","chat","chatId","chatToAdd","dialogId","dispatch","users","setUsersToModel","Object","values","userId","message","senderId","getUserId","fields","counter","handleMessageUpdate","command","execMessageUpdateOrDelete","handleMessageDelete","handleMessageDeleteComplete","handleChatOwner","ownerId","handleChatManagers","managerList","list","handleChatUpdateParams","handleChatUserAdd","userCounter","userCount","handleChatUserLeave","handleStartWriting","userName","handleReadMessage","handleReadMessageChat","handleUnreadMessage","handleUnreadMessageChat","handleUnreadMessageOpponent","execUnreadMessageOpponent","handleUnreadMessageChatOpponent","handleReadAllChats","handleChatMuteNotify","muted","handleUserInvite","invited","id","user","handleChatRename","dialog","getters","name","handleChatAvatar","avatar","RecentPullHandler","currentUserId","state","application","common","userInChat","includes","attach","Type","isArray","file","files","newRecentItem","text","date","recentItem","options","birthdayPlaceholder","liked","usersModel","botList","type","setTimeout","getWaitTimeForHumanBot","Loc","getMessage","status","withFile","withAttach","lastMessageWasDeleted","Boolean","newLastMessage","handleReadMessageOpponent","lastReadMessage","Number","parseInt","lastId","MessageStatus","delivered","handleReadMessageChatOpponent","received","chatMessageStatus","handleMessageLike","isUndefined","BX","MessengerProxy","currentDialogId","getCurrentDialogId","isOwnLike","isOwnLastMessage","messageId","set","handleChatPin","action","active","handleChatUnread","handleChatHide","INITIAL_WAIT","WAIT_PER_WORD","WAIT_LIMIT","waitTime","split","length"],"mappings":"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"}