this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(e,t){"use strict";function n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){babelHelpers.defineProperty(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var i=function(){function e(){babelHelpers.classCallCheck(this,e);babelHelpers.defineProperty(this,"clientVersion",0);babelHelpers.defineProperty(this,"eventHandlers",{});babelHelpers.defineProperty(this,"htmlWrapperHead",null)}babelHelpers.createClass(e,[{key:"addCustomEvent",value:function e(t,n){var r=function e(t){n.apply(window,babelHelpers.toConsumableArray(Object.values(t.detail)))};if(!this.eventHandlers[t]){this.eventHandlers[t]=[]}this.eventHandlers[t].push(r);window.addEventListener(t,r);return true}},{key:"removeCustomEvents",value:function e(t){if(!this.eventHandlers[t]){return false}this.eventHandlers[t].forEach((function(e){window.removeEventListener(t,e)}));this.eventHandlers[t]=[];return true}},{key:"onCustomEvent",value:function e(n,i,s){if(arguments.length===2){s=i;i=n;n="all"}else if(arguments.length<2){return false}var o=r({},s);if(n==="all"){var a=opener?opener:top;a.BXWindows.forEach((function(e){if(e&&e.name!==""&&e.BXDesktopWindow&&e.BXDesktopWindow.DispatchCustomEvent){e.BXDesktopWindow.DispatchCustomEvent(i,o)}}));a.BXDesktopWindow.DispatchCustomEvent(i,o)}else if(t.Type.isObject(n)&&n.hasOwnProperty("BXDesktopWindow")){n.BXDesktopWindow.DispatchCustomEvent(i,o)}else{var u=this.findWindow(n);if(u){u.BXDesktopWindow.DispatchCustomEvent(i,o)}}return true}},{key:"findWindow",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"main";var n=opener?opener:top;if(t==="main"){return n}else{return n.BXWindows.find((function(e){return e.name===t}))}}},{key:"setWindowResizable",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;BXDesktopWindow.SetProperty("resizable",t);return true}},{key:"setWindowClosable",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;BXDesktopWindow.SetProperty("closable",t);return true}},{key:"setWindowTitle",value:function e(n){if(t.Type.isUndefined(n)){return false}n=n.trim();if(n.length<=0){return false}BXDesktopWindow.SetProperty("title",n);return true}},{key:"setWindowPosition",value:function e(t){BXDesktopWindow.SetProperty("position",t);return true}},{key:"setWindowMinSize",value:function e(t){if(!t.Width||!t.Height){return false}BXDesktopWindow.SetProperty("minClientSize",t);return true}},{key:"getHtmlPage",value:function e(n,r,i){var s=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"";if(window.BXIM){return window.BXIM.desktop.getHtmlPage(n,r,i,s)}n=n||"";r=r||"";s=s||"";if(t.Type.isDomNode(n)){n=n.outerHTML}if(t.Type.isDomNode(r)){r=r.outerHTML}if(r!==""){r='<script type="text/javascript">BX.ready(function(){'+r+"});<\/script>"}if(this.isPopupPageLoaded()){return'<div class="im-desktop im-desktop-popup '+s+'">'+n+r+"</div>"}else{if(this.htmlWrapperHead==null){this.htmlWrapperHead=document.head.outerHTML.replace(/BX\.PULL\.start\([^)]*\);/g,"")}return"<!DOCTYPE html><html>"+this.htmlWrapperHead+'<body class="im-desktop im-desktop-popup '+s+'">'+n+r+"</body></html>"}}},{key:"isPopupPageLoaded",value:function e(){if(!this.enableInVersion(45)){return false}if(window.BXIM&&!window.BXIM.isUtfMode){return false}if(!BXInternals){return false}if(!BXInternals.PopupTemplate){return false}if(BXInternals.PopupTemplate==="#PLACEHOLDER#"){return false}return true}},{key:"enableInVersion",value:function e(n){if(t.Type.isUndefined(BXDesktopSystem)){return false}return this.getApiVersion()>=parseInt(n)}},{key:"getApiVersion",value:function e(){if(t.Type.isUndefined(BXDesktopSystem)){return 0}if(!this.clientVersion){this.clientVersion=BXDesktopSystem.GetProperty("versionParts")}return this.clientVersion[3]}},{key:"isReady",value:function e(){return typeof BXDesktopSystem!="undefined"}}]);return e}();e.Desktop=i})(this.BX.Messenger.Lib=this.BX.Messenger.Lib||{},BX);
//# sourceMappingURL=desktop.bundle.map.js