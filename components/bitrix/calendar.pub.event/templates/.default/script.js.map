{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Reflection, Dom, Tag, Loc, Type} from \"main.core\";\n\nclass CalendarEvent\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.eventId = options.eventId;\n\t\tthis.hasDecision = options.hasDecision;\n\t\tthis.isPositiveDecision = options.isPositiveDecision;\n\t\tthis.hash = options.hash;\n\t\tthis.downnoloadLink = options.downloadLink;\n\t\tthis.decisionButtonsBlock = document.querySelector('.calendar-pub-event-btn-container');\n\t\tthis.titleBlock = document.querySelector('.calendar-pub-event-title-main');\n\t\tthis.eventWrapper = document.querySelector('.calendar-pub-event-wrap');\n\t\tthis.listBoxWrapper = document.querySelector('.calendar-pub-event-user-list-box');\n\t\tthis.decisionBlockWrapper = decisionBlock;\n\t\tthis.buttonsContainer = buttonsContainer;\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis.initWrappersForButtons();\n\t\tthis.initHandler();\n\t}\n\n\tinitWrappersForButtons()\n\t{\n\t\tthis.primaryButtonWrapper = this.buttonsContainer.children[0];\n\t\tthis.secondButtonWrapper = this.buttonsContainer.children[1];\n\t}\n\n\tinitHandler()\n\t{\n\t\tif (this.hasDecision)\n\t\t{\n\t\t\tthis.initChangeDecisionButton();\n\t\t\tDom.append(this.changeDecisionButton, this.primaryButtonWrapper)\n\t\t\tif (this.isPositiveDecision)\n\t\t\t{\n\t\t\t\tthis.initDownloadButton();\n\t\t\t\tDom.append(this.downloadButton, this.secondButtonWrapper);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.initAcceptButton();\n\t\t\tthis.initDeclineButton();\n\t\t\tDom.append(this.acceptDecisionButton, this.primaryButtonWrapper);\n\t\t\tDom.append(this.declineDecisionButton, this.secondButtonWrapper);\n\t\t}\n\n\t\tthis.initListBoxHandlers();\n\t}\n\n\tinitChangeDecisionButton()\n\t{\n\t\tthis.changeDecisionButton = this.getChangeDecisionButton();\n\t\tthis.changeDecisionButton.addEventListener('click', () => {this.changeStateWithoutDecision()})\n\t}\n\n\tinitAcceptButton()\n\t{\n\t\tthis.acceptDecisionButton = this.getAcceptDecisionButton();\n\t\tthis.acceptDecisionButton.addEventListener('click', () => {this.changeStateWithDecision(true)});\n\t}\n\n\tinitDeclineButton()\n\t{\n\t\tthis.declineDecisionButton = this.getDeclineDecisionButton();\n\t\tthis.declineDecisionButton.addEventListener('click', () => {this.changeStateWithDecision(false)});\n\t}\n\n\tchangeStateWithDecision(decision)\n\t{\n\t\tthis.hasDecision = true;\n\n\t\tDom.remove(this.acceptDecisionButton);\n\t\tthis.acceptDecisionButton = undefined;\n\t\tDom.remove(this.declineDecisionButton);\n\t\tthis.declineDecisionButton = undefined;\n\n\t\tthis.showChangeDecisionButton();\n\n\t\tif (decision)\n\t\t{\n\t\t\tthis.showAcceptDecisionBlock();\n\t\t\tthis.showDownloadButton();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showDeclineDecisionBlock();\n\t\t}\n\n\t\tthis.isPositiveDecision = decision;\n\n\t\tBX.ajax.runComponentAction('bitrix:calendar.pub.event', 'handleDecision', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\t'decision': decision ? 'Y' : 'N',\n\t\t\t\t'eventId': this.eventId,\n\t\t\t\t'hash': this.hash,\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tif (response.data.attendeesList.length > 0)\n\t\t\t{\n\t\t\t\tthis.rebuildUserList(response.data.attendeesList);\n\t\t\t}\n\t\t});\n\t}\n\n\tshowChangeDecisionButton()\n\t{\n\t\tif (!this.changeDecisionButton)\n\t\t{\n\t\t\tthis.initChangeDecisionButton();\n\t\t}\n\n\t\tDom.append(this.changeDecisionButton, this.primaryButtonWrapper);\n\t}\n\n\tgetChangeDecisionButton()\n\t{\n\t\treturn Tag.render `\n\t\t\t<button id=\"changeDecisionButton\" class=\"ui-btn ui-btn-round ui-btn-lg ui-btn-success calendar-pub-event-btn calendar-pub-event-btn-change-decision\">\n\t\t\t\t${Loc.getMessage('EC_CALENDAR_CHANGE_DECISION_TITLE')}\n\t\t\t</button>\n\t\t`;\n\t}\n\n\tshowAcceptDecisionBlock()\n\t{\n\t\tconst decisionBlock = this.decisionBlockWrapper.children[1];\n\t\tdecisionBlock.innerText = Loc.getMessage('EC_CALENDAR_PUB_EVENT_DECISION_YES');\n\t\tDom.removeClass(this.eventWrapper, 'calendar-pub-event--decline ');\n\t\tDom.addClass(this.eventWrapper, 'calendar-pub-event--accept');\n\t}\n\n\tshowDeclineDecisionBlock()\n\t{\n\t\tconst decisionBlock = this.decisionBlockWrapper.children[1];\n\t\tdecisionBlock.innerText = Loc.getMessage('EC_CALENDAR_PUB_EVENT_DECISION_NO');\n\t\tDom.removeClass(this.eventWrapper, 'calendar-pub-event--accept');\n\t\tDom.addClass(this.eventWrapper, 'calendar-pub-event--decline ');\n\t}\n\n\tchangeStateWithoutDecision()\n\t{\n\t\tDom.remove(this.changeDecisionButton);\n\t\tthis.changeDecisionButton = undefined;\n\t\tif (this.downloadButton)\n\t\t{\n\t\t\tDom.remove(this.downloadButton);\n\t\t\tthis.downloadButton = undefined;\n\t\t}\n\t\tthis.showAcceptDecisionButton();\n\t\tthis.showDeclineDecisionButton();\n\t}\n\n\tshowAcceptDecisionButton()\n\t{\n\t\tif (!this.acceptDecisionButton)\n\t\t{\n\t\t\tthis.initAcceptButton();\n\t\t}\n\n\t\tDom.append(this.acceptDecisionButton, this.primaryButtonWrapper);\n\t}\n\n\tgetAcceptDecisionButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"acceptDecisionButton\" class=\"ui-btn ui-btn-round ui-btn-lg ui-btn-success calendar-pub-event-btn\">\n\t\t\t\t${Loc.getMessage('EC_CALENDAR_DECISION_TITLE_YES')}\n\t\t\t</button>\n\t\t`;\n\t}\n\n\tshowDeclineDecisionButton()\n\t{\n\t\tif (!this.declineDecisionButton)\n\t\t{\n\t\t\tthis.initDeclineButton();\n\t\t}\n\n\t\tDom.append(this.declineDecisionButton, this.secondButtonWrapper);\n\t}\n\n\tgetDeclineDecisionButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"declineDecisionButton\" class=\"ui-btn ui-btn-link ui-btn-lg calendar-pub-event-btn\" data-decision=\"N\">\n\t\t\t${Loc.getMessage('EC_CALENDAR_DECISION_TITLE_NO')}\n\t\t</button>\n\t\t`;\n\t}\n\n\tinitListBoxHandlers()\n\t{\n\t\tthis.initAttendeesListBoxHandlers();\n\t\tthis.initAttachmentsListBoxHandlers();\n\t}\n\n\tinitAttendeesListBoxHandlers()\n\t{\n\t\tconst attendeesListButton = document.querySelector('.calendar-pub-event-user-list-btn');\n\t\tconst contentBox = document.querySelector('.calendar-pub-event-user-list-content');\n\n\t\tif (Type.isDomNode(attendeesListButton))\n\t\t{\n\t\t\tattendeesListButton.addEventListener('click', () =>\n\t\t\t{\n\t\t\t\tconst contentHeight = contentBox.scrollHeight;\n\t\t\t\tcontentBox.style.height = contentHeight + 'px';\n\t\t\t\tcontentBox.style.maxHeight = contentHeight + 'px';\n\t\t\t\tattendeesListButton.style.display = 'none';\n\t\t\t})\n\t\t}\n\t}\n\n\tinitAttachmentsListBoxHandlers()\n\t{\n\t\tconst attachmentBtn = document.querySelector('.calendar-pub-event-user-attachment-btn');\n\t\tconst attachmentContentBox = document.querySelector('.calendar-pub-event-user-attachment-content');\n\t\tif (Type.isDomNode(attachmentBtn))\n\t\t{\n\t\t\tattachmentBtn.addEventListener('click', () =>\n\t\t\t{\n\t\t\t\tconst contentHeight = attachmentContentBox.scrollHeight;\n\t\t\t\tattachmentContentBox.style.height = contentHeight + 'px';\n\t\t\t\tattachmentContentBox.style.maxHeight = contentHeight + 'px';\n\t\t\t\tattachmentBtn.style.display = 'none';\n\t\t\t})\n\t\t}\n\t}\n\n\tinitDownloadButton()\n\t{\n\t\tthis.downloadButton = this.getDownloadButton();\n\t}\n\n\tshowDownloadButton()\n\t{\n\t\tthis.initDownloadButton();\n\t\tDom.append(this.downloadButton, this.secondButtonWrapper);\n\t}\n\n\tgetDownloadButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<a id=\"downloadButton\" href=\"${BX.util.htmlspecialchars(this.downnoloadLink)}\" class=\"ui-btn ui-btn-link ui-btn-lg calendar-pub-event-btn\" >\n\t\t\t${Loc.getMessage('EC_CALENDAR_ICAL_INVITATION_DOWNLOAD_INVITATION')}\n\t\t</a>\n\t\t`;\n\t}\n\n\tgetDecisionBlock()\n\t{\n\t\tif (this.hasDecision)\n\t\t{\n\t\t\treturn document.querySelector('.calendar-pub-event-desc');\n\t\t}\n\n\t\treturn null;\n\t}\n\n\trebuildUserList(attendeesList)\n\t{\n\t\tif (Type.isArray(attendeesList))\n\t\t{\n\t\t\tconst userListContainer = Tag.render`\n\t\t\t\t<div class=\"calendar-pub-event-user-list-content\">\n\t\t\t\t\t${attendeesList.map((attendee) => Tag.render`\n\t\t\t\t\t\t<div class=\"calendar-pub-event-user-list-item ${this.getAdditionalClassForAttendeesList(attendee['status'])}\">\n\t\t\t\t\t\t\t${attendee['name']}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`)}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tconst oldAttendeesContainer = document.querySelector('.calendar-pub-event-user-list-content');\n\t\t\tconst oldAttendeesListButton = document.querySelector('.calendar-pub-event-user-list-btn');\n\t\t\tif (Type.isDomNode(oldAttendeesContainer))\n\t\t\t{\n\t\t\t\tconst wrapper = oldAttendeesContainer.parentElement;\n\t\t\t\tDom.remove(oldAttendeesContainer);\n\t\t\t\tif (Type.isDomNode(oldAttendeesListButton))\n\t\t\t\t{\n\t\t\t\t\tDom.remove(oldAttendeesListButton);\n\t\t\t\t}\n\n\t\t\t\tDom.append(userListContainer, wrapper);\n\n\t\t\t\tif (attendeesList.length > 3)\n\t\t\t\t{\n\t\t\t\t\tconst attendeesListButton = Tag.render`\n\t\t\t\t\t\t<div data-button=\"users\" class=\"calendar-pub-event-user-list-btn\">\n\t\t\t\t\t\t\t${Loc.getMessage('EC_CALENDAR_PUB_EVENT_ALL_ATTENDEES_TITLE')}\n\t\t\t\t\t\t\t<span>(${attendeesList.length})</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t\tDom.append(attendeesListButton, wrapper);\n\t\t\t\t\tthis.initAttendeesListBoxHandlers();\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAdditionalClassForAttendeesList(status)\n\t{\n\t\tswitch (status)\n\t\t{\n\t\t\tcase 'ACCEPTED':\n\t\t\t\treturn 'calendar-pub-event-user--accept';\n\t\t\tcase 'DECLINED':\n\t\t\t\treturn 'calendar-pub-event-user--cancel';\n\t\t\tdefault:\n\t\t\t\treturn 'calendar-pub-event-user--waiting';\n\t\t}\n\t}\n}\n\nReflection.namespace('BX.Calendar.Pub').CalendarEvent = CalendarEvent;\n"],"names":["CalendarEvent","options","eventId","hasDecision","isPositiveDecision","hash","downnoloadLink","downloadLink","decisionButtonsBlock","document","querySelector","titleBlock","eventWrapper","listBoxWrapper","decisionBlockWrapper","decisionBlock","buttonsContainer","init","initWrappersForButtons","initHandler","primaryButtonWrapper","children","secondButtonWrapper","initChangeDecisionButton","Dom","append","changeDecisionButton","initDownloadButton","downloadButton","initAcceptButton","initDeclineButton","acceptDecisionButton","declineDecisionButton","initListBoxHandlers","getChangeDecisionButton","addEventListener","changeStateWithoutDecision","getAcceptDecisionButton","changeStateWithDecision","getDeclineDecisionButton","decision","remove","undefined","showChangeDecisionButton","showAcceptDecisionBlock","showDownloadButton","showDeclineDecisionBlock","BX","ajax","runComponentAction","mode","data","then","response","attendeesList","length","rebuildUserList","Tag","render","Loc","getMessage","innerText","removeClass","addClass","showAcceptDecisionButton","showDeclineDecisionButton","initAttendeesListBoxHandlers","initAttachmentsListBoxHandlers","attendeesListButton","contentBox","Type","isDomNode","contentHeight","scrollHeight","style","height","maxHeight","display","attachmentBtn","attachmentContentBox","getDownloadButton","util","htmlspecialchars","isArray","userListContainer","map","attendee","getAdditionalClassForAttendeesList","oldAttendeesContainer","oldAttendeesListButton","wrapper","parentElement","status","Reflection","namespace"],"mappings":"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"}