{"version":3,"file":"recent.bundle.js","sources":["../src/recent.js"],"sourcesContent":["/**\n * Bitrix Im\n * Core application\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\nimport {Core} from \"im.application.core\";\nimport {VueVendorV2} from \"ui.vue\";\n\n// vue components\nimport 'im.component.recent';\n\nexport class RecentApplication\n{\n\t/* region 01. Initialize */\n\n\tconstructor(params = {})\n\t{\n\t\tthis.inited = false;\n\t\tthis.initPromise = new BX.Promise;\n\n\t\tthis.params = params;\n\n\t\tthis.template = null;\n\t\tthis.rootNode = this.params.node || document.createElement('div');\n\n\t\tthis.isMessenger = params.hasDialog === true;\n\n\t\tthis.templateTemp = null;\n\t\tthis.rootNodeTemp = this.params.nodeTemp || document.createElement('div');\n\n\t\tthis.eventBus = new VueVendorV2;\n\n\t\tthis.initCore()\n\t\t\t.then(result => this.initParams(result))\n\t\t\t.then(() => this.initComponent())\n\t\t\t.then(() => this.initComplete())\n\t\t;\n\t}\n\n\tinitCore()\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tCore.ready().then(controller => {\n\t\t\t\tthis.controller = controller;\n\t\t\t\tresolve();\n\t\t\t})\n\t\t});\n\t}\n\n\tinitParams(controller)\n\t{\n\t\treturn new Promise((resolve, reject) => resolve());\n\t}\n\n\tinitComponent()\n\t{\n\t\treturn this.controller.createVue(this, {\n\t\t\tel: this.rootNode,\n\t\t\ttemplate: `<bx-im-component-recent :hasDialog=\"${this.isMessenger}\"/>`,\n\t\t})\n\t\t.then(vue => {\n\t\t\tthis.template = vue;\n\t\t\treturn new Promise((resolve, reject) => resolve());\n\t\t})\n\t}\n\n\tinitComplete()\n\t{\n\t\tthis.inited = true;\n\t\tthis.initPromise.resolve(this);\n\t}\n\n\tready()\n\t{\n\t\tif (this.inited)\n\t\t{\n\t\t\tlet promise = new BX.Promise;\n\t\t\tpromise.resolve(this);\n\n\t\t\treturn promise;\n\t\t}\n\n\t\treturn this.initPromise;\n\t}\n\n\t/* endregion 01. Initialize */\n\n\t/* region 02. Event Bus */\n\temit(eventName, params = {})\n\t{\n\t\tthis.eventBus.$emit(eventName, params);\n\n\t\treturn true;\n\t}\n\n\tlisten(eventName, callback)\n\t{\n\t\tif (typeof callback !== 'function')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.eventBus.$on(eventName, callback);\n\n\t\treturn true;\n\t}\n\t/* endregion 02. Event Bus */\n}"],"names":["RecentApplication","params","inited","initPromise","BX","Promise","template","rootNode","node","document","createElement","isMessenger","hasDialog","templateTemp","rootNodeTemp","nodeTemp","eventBus","VueVendorV2","initCore","then","result","initParams","initComponent","initComplete","resolve","reject","Core","ready","controller","createVue","el","vue","promise","eventName","$emit","callback","$on"],"mappings":"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"}