{"version":3,"file":"engine.bundle.js","sources":["../src/components/content.js","../src/components/message.js","../src/components/error.js","../src/engine.js"],"sourcesContent":["import { ref } from 'ui.vue3';\nimport { Type, Loc } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\n\nconst fetchAlarmTime = 5000;\n\nexport const Content = {\n\tprops: {\n\t\tdefaultData: {\n\t\t\ttype: Object,\n\t\t\tdefault: null,\n\t\t},\n\t\tfetchable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t\tclickable: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: false,\n\t\t},\n\t},\n\n\tdata()\n\t{\n\t\treturn {\n\t\t\tisFetching: false,\n\t\t\ttimeout: null,\n\t\t};\n\t},\n\n\tcreated()\n\t{\n\t\tEventEmitter.subscribe('landing:widgetvue:engine:onSetData', this.onSetData);\n\t},\n\n\tbeforeUnmount()\n\t{\n\t\tEventEmitter.unsubscribe('landing:widgetvue:engine:onSetData', this.onSetData);\n\t},\n\n\tmethods: {\n\t\tonSetData(event: BaseEvent)\n\t\t{\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.$bitrix.eventEmitter.emit('landing:widgetvue:engine:endContentLoad');\n\t\t\tthis.$bitrix.eventEmitter.emit('landing:widgetvue:engine:onHideMessage');\n\t\t\tthis.isFetching = false;\n\n\t\t\tif (Type.isObject(event.getData().data))\n\t\t\t{\n\t\t\t\tconst data = event.getData().data;\n\t\t\t\tObject.keys(data).forEach(code => {\n\t\t\t\t\tif (this[code] !== undefined)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis[code] = data[code];\n\t\t\t\t\t}\n\t\t\t\t\t// todo: and crete refs if not exists?\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\n\t\tfetch(params: {} = {})\n\t\t{\n\t\t\tif (!this.clickable || this.isFetching)\n\t\t\t{\n\t\t\t\tconsole.info('Events is disabled now');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.fetchable)\n\t\t\t{\n\t\t\t\tconsole.info('Fetch data is impossible now (haven`t handler)');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.isFetching = true;\n\t\t\tthis.$bitrix.eventEmitter.emit('landing:widgetvue:engine:startContentLoad');\n\n\t\t\tthis.timeout = setTimeout(() => {\n\t\t\t\tthis.$bitrix.eventEmitter.emit('landing:widgetvue:engine:onMessage', {\n\t\t\t\t\tmessage: Loc.getMessage('LANDING_WIDGETVUE_LOADER_TOO_LONG'),\n\t\t\t\t});\n\t\t\t\tthis.$bitrix.eventEmitter.emit('landing:widgetvue:engine:endContentLoad');\n\t\t\t}, fetchAlarmTime);\n\n\t\t\tthis.$bitrix.Application.get().fetch(params);\n\t\t},\n\n\t\topenApplication(params: {} = {})\n\t\t{\n\t\t\tif (!this.clickable)\n\t\t\t{\n\t\t\t\tconsole.info('Events is disabled now');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$bitrix.Application.get().openApplication(params);\n\t\t},\n\n\t\topenPath(path: string)\n\t\t{\n\t\t\tif (!this.clickable)\n\t\t\t{\n\t\t\t\tconsole.info('Events is disabled now');\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$bitrix.Application.get().openPath(path);\n\t\t},\n\t},\n\n\tsetup(props)\n\t{\n\t\t// todo: to docs. All refs must be implicated in default? or we can create, but v-for can be broken\n\n\t\t// todo: or create refs via data? or pass when create\n\t\tconst dataRefs = {};\n\t\tif (Type.isObject(props.defaultData))\n\t\t{\n\t\t\tObject.keys(props.defaultData).forEach(code => {\n\t\t\t\tdataRefs[code] = ref(props.defaultData[code]);\n\t\t\t});\n\t\t}\n\n\t\treturn dataRefs;\n\t},\n};\n","import { Loc } from 'main.core';\nimport LoaderImage from '../images/emptystate.svg';\n\nexport const Message = {\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\tdefault: Loc.getMessage('LANDING_WIDGETVUE_LOADER_DEFAULT_MESSAGE'),\n\t\t},\n\t\tlink: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t\tlinkText: {\n\t\t\ttype: String,\n\t\t\tdefault: Loc.getMessage('LANDING_WIDGETVUE_ERROR_DEFAULT_LINK_TEXT'),\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"w-loader\">\n\t\t\t<div class=\"w-loader-icon\"></div>\n\t\t\t<div class=\"w-loader-text\">\n\t\t\t\t<div>{{message}}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nexport const Error = {\n\tprops: {\n\t\tmessage: {\n\t\t\ttype: String,\n\t\t\tdefault: Loc.getMessage('LANDING_WIDGETVUE_ERROR_DEFAULT_MESSAGE'),\n\t\t},\n\t\tlink: {\n\t\t\ttype: String,\n\t\t\tdefault: null,\n\t\t},\n\t\tlinkText: {\n\t\t\ttype: String,\n\t\t\tdefault: Loc.getMessage('LANDING_WIDGETVUE_ERROR_DEFAULT_LINK_TEXT'),\n\t\t},\n\t},\n\n\ttemplate: `\n\t\t<div class=\"w-error\">\n\t\t\t<div class=\"w-loader-icon --error\"></div>\n\t\t\t<div class=\"w-error-text\">\n\t\t\t\t<div>{{message}}</div>\n\t\t\t\t<a class=\"w-loader-link\" :href=\"link\">linkText: link</a>\t\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { BitrixVue, VueCreateAppResult } from 'ui.vue3';\nimport { Type, Runtime, Loc, Event } from 'main.core';\nimport { EventEmitter, BaseEvent } from 'main.core.events';\nimport { Loader } from 'main.loader';\n\nimport { Content } from './components/content';\nimport { Message } from './components/message';\nimport { Error } from './components/error';\nimport { EngineOptions } from './internal/types';\n\nimport './css/style.css';\n\nexport class Engine\n{\n\t#parentOrigin: ?string = '';\n\t#id: string = '';\n\n\t#rootNode: ?HTMLElement;\n\t#data: ?{};\n\t#error: ?string;\n\n\t#fetchable: boolean = false;\n\t#clickable: boolean = false;\n\n\t#application: VueCreateAppResult;\n\t#contentComponent: Object;\n\n\tconstructor(options: EngineOptions): void\n\t{\n\t\tthis.#id = Type.isString(options.id) ? options.id : '';\n\t\tthis.#rootNode = document.querySelector(`#${this.#id}`);\n\t\tthis.#parentOrigin = Type.isString(options.origin) ? options.origin : null;\n\n\t\tthis.#data = Type.isObject(options.data) ? options.data : null;\n\t\tthis.#error = Type.isString(options.error) ? options.error : null;\n\n\t\tthis.#fetchable = Type.isBoolean(options.fetchable) ? options.fetchable : false;\n\t\tthis.#clickable = Type.isBoolean(options.clickable) ? options.clickable : false;\n\n\t\tthis.#contentComponent = Runtime.clone(Content);\n\t}\n\n\trender()\n\t{\n\t\tif (this.#rootNode)\n\t\t{\n\t\t\tthis.loader = new Loader({\n\t\t\t\ttarget: this.#rootNode,\n\t\t\t});\n\n\t\t\tthis.#contentComponent.template = this.#rootNode.innerHTML || '';\n\t\t\tthis.#contentComponent.template = `<div>${this.#contentComponent.template}</div>`;\n\t\t\tthis.#bindEvents();\n\t\t\tthis.#createApp();\n\t\t}\n\t}\n\n\tshowLoader()\n\t{\n\t\tthis.loader.show();\n\t}\n\n\thideLoader()\n\t{\n\t\tthis.loader.hide();\n\t}\n\n\tfetch(params: {} = {})\n\t{\n\t\tthis.#message(\n\t\t\t'fetchData',\n\t\t\tparams,\n\t\t);\n\t}\n\n\topenApplication(params: {} = {})\n\t{\n\t\tthis.#message(\n\t\t\t'openApplication',\n\t\t\tparams,\n\t\t);\n\t}\n\n\topenPath(path: string)\n\t{\n\t\tthis.#message(\n\t\t\t'openPath',\n\t\t\tpath,\n\t\t);\n\t}\n\n\t#message(name: string, params: {} = {})\n\t{\n\t\twindow.parent.postMessage(\n\t\t\t{\n\t\t\t\tname,\n\t\t\t\tparams,\n\t\t\t},\n\t\t\tthis.#parentOrigin,\n\t\t);\n\t}\n\n\t#bindEvents() {\n\t\tEvent.bind(window, 'message', this.#onMessage.bind(this));\n\t}\n\n\t#onMessage(event)\n\t{\n\t\tif (event.data && event.data.name && event.data.params)\n\t\t{\n\t\t\tif (\n\t\t\t\tevent.data.name === 'setData'\n\t\t\t\t&& Type.isObject(event.data.params.data)\n\t\t\t)\n\t\t\t{\n\t\t\t\tEventEmitter.emit('landing:widgetvue:engine:onSetData', {\n\t\t\t\t\tdata: event.data.params.data,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\tevent.data.name === 'setError'\n\t\t\t\t&& Type.isObject(event.data.params.error)\n\t\t\t\t&& Type.isString(event.data.params.error.message)\n\t\t\t)\n\t\t\t{\n\t\t\t\tEventEmitter.emit('landing:widgetvue:engine:onError', {\n\t\t\t\t\tmessage: event.data.params.error.message,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.#refreshFrameSize();\n\t\t}\n\t}\n\n\t#refreshFrameSize()\n\t{\n\t\tthis.#message(\n\t\t\t'setSize',\n\t\t\t{\n\t\t\t\tsize: document.body.offsetHeight,\n\t\t\t},\n\t\t);\n\t}\n\n\t#createApp(): void\n\t{\n\t\tconst context = this;\n\t\tconst defaultError = this.#error ? { message: this.#error } : null;\n\n\t\tthis.#application = BitrixVue.createApp({\n\t\t\tname: this.#id,\n\n\t\t\tcomponents: {\n\t\t\t\tMessage, Error, Content: this.#contentComponent,\n\t\t\t},\n\n\t\t\tprops: {\n\t\t\t\tdefaultData: {\n\t\t\t\t\ttype: Object, default: null,\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tdata()\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tmessage: null,\n\t\t\t\t\terror: defaultError,\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tcreated()\n\t\t\t{\n\t\t\t\tthis.$bitrix.eventEmitter.subscribe('landing:widgetvue:engine:startContentLoad', this.onShowLoader);\n\t\t\t\tthis.$bitrix.eventEmitter.subscribe('landing:widgetvue:engine:endContentLoad', this.onHideLoader);\n\t\t\t\tthis.$bitrix.eventEmitter.subscribe('landing:widgetvue:engine:onMessage', this.onShowMessage);\n\t\t\t\tthis.$bitrix.eventEmitter.subscribe('landing:widgetvue:engine:onHideMessage', this.onHideMessage);\n\t\t\t\tthis.$bitrix.eventEmitter.subscribe('landing:widgetvue:engine:onError', this.onShowError);\n\t\t\t\tEventEmitter.subscribe('landing:widgetvue:engine:onError', this.onShowError);\n\t\t\t},\n\n\t\t\tbeforeUnmount()\n\t\t\t{\n\t\t\t\tthis.$bitrix.eventEmitter.unsubscribe('landing:widgetvue:engine:startContentLoad', this.onShowLoader);\n\t\t\t\tthis.$bitrix.eventEmitter.unsubscribe('landing:widgetvue:engine:endContentLoad', this.onHideLoader);\n\t\t\t\tthis.$bitrix.eventEmitter.unsubscribe('landing:widgetvue:engine:onMessage', this.onShowMessage);\n\t\t\t\tthis.$bitrix.eventEmitter.unsubscribe('landing:widgetvue:engine:onHideMessage', this.onHideMessage);\n\t\t\t\tthis.$bitrix.eventEmitter.unsubscribe('landing:widgetvue:engine:onError', this.onShowError);\n\t\t\t\tEventEmitter.unsubscribe('landing:widgetvue:engine:onError', this.onShowError);\n\t\t\t},\n\n\t\t\tmethods: {\n\t\t\t\tonShowLoader()\n\t\t\t\t{\n\t\t\t\t\t// todo: move loader to comp\n\t\t\t\t\tthis.$bitrix.Application.get().showLoader();\n\t\t\t\t},\n\n\t\t\t\tonHideLoader()\n\t\t\t\t{\n\t\t\t\t\t// todo: move loader to comp\n\t\t\t\t\tthis.$bitrix.Application.get().hideLoader();\n\t\t\t\t},\n\n\t\t\t\tonShowMessage(event: BaseEvent)\n\t\t\t\t{\n\t\t\t\t\tconst message = event.getData()?.message || null;\n\t\t\t\t\tthis.message = message ? { message } : null;\n\t\t\t\t},\n\n\t\t\t\tonHideMessage()\n\t\t\t\t{\n\t\t\t\t\tthis.message = null;\n\t\t\t\t},\n\n\t\t\t\tonShowError(event: BaseEvent)\n\t\t\t\t{\n\t\t\t\t\tconst message = event.getData()?.message || null;\n\t\t\t\t\tthis.error = message ? { message } : null;\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tbeforeCreate(): void\n\t\t\t{\n\t\t\t\tthis.$bitrix.Application.set(context);\n\t\t\t},\n\n\t\t\ttemplate: `\n\t\t\t\t<div>\n\t\t\t\t\t<Error\n\t\t\t\t\t\tv-show=\"error !== null\"\n\t\t\t\t\t\tv-bind=\"error && error.message !== null ? error : {}\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Message\n\t\t\t\t\t\tv-show=\"message !== null\"\n\t\t\t\t\t\tv-bind=\"message && message.message !== null ? message : {}\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Content\n\t\t\t\t\t\tv-show=\"message === null && error === null\"\n\t\t\t\t\t\t\n\t\t\t\t\t\t:defaultData=\"defaultData\"\n\t\t\t\t\t\t:fetchable=${this.#fetchable}\n\t\t\t\t\t\t:clickable=${this.#clickable}\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t}, {\n\t\t\tdefaultData: this.#data,\n\t\t});\n\n\t\tthis.#application.mount(this.#rootNode);\n\t}\n}\n"],"names":["fetchAlarmTime","Content","props","defaultData","type","Object","default","fetchable","Boolean","clickable","data","isFetching","timeout","created","EventEmitter","subscribe","onSetData","beforeUnmount","unsubscribe","methods","event","clearTimeout","$bitrix","eventEmitter","emit","Type","isObject","getData","keys","forEach","code","undefined","fetch","params","console","info","setTimeout","message","Loc","getMessage","Application","get","openApplication","openPath","path","setup","dataRefs","ref","Message","String","link","linkText","template","Error","Engine","constructor","options","isString","id","document","querySelector","origin","error","isBoolean","Runtime","clone","render","loader","Loader","target","innerHTML","showLoader","show","hideLoader","hide","name","window","parent","postMessage","Event","bind","size","body","offsetHeight","context","defaultError","BitrixVue","createApp","components","onShowLoader","onHideLoader","onShowMessage","onHideMessage","onShowError","beforeCreate","set","mount"],"mappings":"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"}