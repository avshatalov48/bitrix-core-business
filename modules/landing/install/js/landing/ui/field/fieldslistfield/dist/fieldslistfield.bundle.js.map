{"version":3,"file":"fieldslistfield.bundle.js","sources":["../src/internal/requisite-settings-field.js","../src/fieldslistfield.js"],"sourcesContent":["import {Dom, Tag, Loc} from 'main.core';\nimport {BaseField} from 'landing.ui.field.basefield';\n\nimport './css/style.css';\n\nexport class RequisiteSettingsField extends BaseField\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.FieldsListField.RequisiteSettingsField');\n\t\tthis.subscribeFromOptions(options.events);\n\n\t\tDom.replace(this.input, this.getSettingsLayout());\n\t}\n\n\tgetOptions(): {[key: string]: any}\n\t{\n\t\treturn this.options;\n\t}\n\n\tgetSettingsLayout(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('settingsLayout', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t<div class=\"landing-ui-field-requisite-settings\">\n\t\t\t\t\t${[...this.getCheckboxTree().keys()].map((checkbox) => checkbox.layout)}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t});\n\t}\n\n\tgetCheckboxTree(): Map<BX.Landing.UI.Field.Checkbox, BX.Landing.UI.Field.Checkbox>\n\t{\n\t\treturn this.cache.remember('checkboxTree', () => {\n\t\t\tconst requisites = this.getOptions().value;\n\n\t\t\treturn requisites.reduce((map: Map, requisite) => {\n\t\t\t\tconst fieldsCheckbox = new BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: `${requisite.id}_fields`,\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: requisite.fields.map((field) => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tname: field.label,\n\t\t\t\t\t\t\tvalue: field.name,\n\t\t\t\t\t\t\tchecked: field.disabled !== false,\n\t\t\t\t\t\t};\n\t\t\t\t\t}),\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tthis.emit('onChange');\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tconst onFieldSettingsLinkClick = (event: MouseEvent) => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tevent.stopPropagation();\n\n\t\t\t\t\tif (!categoryCheckbox.layout.contains(fieldsCheckbox.layout))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.append(fieldsCheckbox.layout, categoryCheckbox.layout);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.remove(fieldsCheckbox.layout);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tconst fieldSettingsLink = Tag.render`\n\t\t\t\t\t<span \n\t\t\t\t\t\tclass=\"ui-link ui-link-dashed\"\n\t\t\t\t\t\tonclick=\"${onFieldSettingsLinkClick}\"\n\t\t\t\t\t>\n\t\t\t\t\t\t${Loc.getMessage('LANDING_FIELDS_ITEM_REQUISITE_SETTINGS_FIELDS_LABEL')}\n\t\t\t\t\t</span>\n\t\t\t\t`;\n\n\t\t\t\tconst categoryCheckbox = new BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: requisite.id,\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [{\n\t\t\t\t\t\tname: requisite.label,\n\t\t\t\t\t\tvalue: requisite.id,\n\t\t\t\t\t\tchecked: requisite.disabled !== false,\n\t\t\t\t\t}],\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tthis.emit('onChange');\n\n\t\t\t\t\t\tconst labelLayout = categoryCheckbox.layout\n\t\t\t\t\t\t\t.querySelector('.landing-ui-field-checkbox-item-label');\n\n\t\t\t\t\t\tif (categoryCheckbox.getValue().length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.append(fieldSettingsLink, labelLayout);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.remove(fieldSettingsLink);\n\t\t\t\t\t\t\tDom.remove(fieldsCheckbox.layout);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tif (requisite.disabled !== false)\n\t\t\t\t{\n\t\t\t\t\tconst labelLayout = categoryCheckbox.layout\n\t\t\t\t\t\t.querySelector('.landing-ui-field-checkbox-item-label');\n\t\t\t\t\tDom.append(fieldSettingsLink, labelLayout);\n\t\t\t\t}\n\n\t\t\t\tmap.set(\n\t\t\t\t\tcategoryCheckbox,\n\t\t\t\t\tfieldsCheckbox,\n\t\t\t\t);\n\n\t\t\t\treturn map;\n\t\t\t}, new Map());\n\t\t});\n\t}\n\n\tgetValue(): Array<{disabled: boolean, fields: Array<{disabled: boolean}>}>\n\t{\n\t\tconst entries = [...this.getCheckboxTree().entries()];\n\n\t\treturn entries.reduce((acc, [categoryCheckbox, fieldsCheckbox], index) => {\n\t\t\tconst fieldsValue = fieldsCheckbox.getValue();\n\t\t\tacc.push({\n\t\t\t\tid: categoryCheckbox.selector,\n\t\t\t\tdisabled: categoryCheckbox.getValue().length === 0,\n\t\t\t\tfields: this.getOptions().value[index].fields.map((field) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: field.name,\n\t\t\t\t\t\tdisabled: !fieldsValue.includes(field.name),\n\t\t\t\t\t};\n\t\t\t\t}),\n\t\t\t});\n\n\t\t\treturn acc;\n\t\t}, []);\n\t}\n}","import 'ui.design-tokens';\n\nimport {BaseField} from 'landing.ui.field.basefield';\nimport {Loc} from 'landing.loc';\nimport {Dom, Runtime, Tag, Text, Type} from 'main.core';\nimport {Draggable} from 'ui.draganddrop.draggable';\nimport {FieldsPanel} from 'landing.ui.panel.fieldspanel';\nimport {ListItem, type ListItemOptions} from 'landing.ui.component.listitem';\nimport {ActionPanel} from 'landing.ui.component.actionpanel';\nimport {TextField} from 'landing.ui.field.textfield';\nimport {BaseEvent} from 'main.core.events';\nimport {FormSettingsForm} from 'landing.ui.form.formsettingsform';\nimport {FileLimit} from 'crm.form.file-limit';\nimport {FormClient} from 'crm.form.client';\nimport {ListSettingsField} from 'landing.ui.field.listsettingsfield';\nimport {SeparatorPanel} from 'landing.ui.panel.separatorpanel';\nimport {PageObject} from 'landing.pageobject';\nimport {Loader} from 'main.loader';\nimport {ProductField} from 'landing.ui.field.productfield';\nimport 'calendar.resourcebookinguserfield';\nimport 'socnetlogdest';\nimport 'ui.hint';\nimport {IconButton} from 'landing.ui.component.iconbutton';\nimport {RequisiteSettingsField} from './internal/requisite-settings-field';\n\nimport './css/style.css';\n\n\nexport class FieldsListField extends BaseField\n{\n\tconstructor(options)\n\t{\n\t\tsuper(options);\n\t\tthis.setEventNamespace('BX.Landing.UI.Field.FieldsListField');\n\t\tthis.setLayoutClass('landing-ui-field-fields-list');\n\n\t\tthis.onSelectFieldButtonClick = this.onSelectFieldButtonClick.bind(this);\n\t\tthis.onSelectProductsButtonClick = this.onSelectProductsButtonClick.bind(this);\n\t\tthis.onSelectSeparatorButtonClick = this.onSelectSeparatorButtonClick.bind(this);\n\t\tthis.onItemRemove = this.onItemRemove.bind(this);\n\t\tthis.onItemEdit = this.onItemEdit.bind(this);\n\t\tthis.onDragEnd = this.onDragEnd.bind(this);\n\t\tthis.onFormChange = this.onFormChange.bind(this);\n\n\t\tthis.items = [];\n\n\t\tthis.options.items.forEach((itemOptions) => {\n\t\t\tthis.addItem(itemOptions);\n\t\t});\n\n\t\tthis.actionPanel = new ActionPanel({\n\t\t\trenderTo: this.layout,\n\t\t\tleft: [\n\t\t\t\t{\n\t\t\t\t\tid: 'selectField',\n\t\t\t\t\ttext: Loc.getMessage('LANDING_FIELDS_ADD_FIELD_BUTTON_TITLE'),\n\t\t\t\t\tonClick: this.onSelectFieldButtonClick,\n\t\t\t\t},\n\t\t\t],\n\t\t\tright: [\n\t\t\t\t{\n\t\t\t\t\tid: 'addProducts',\n\t\t\t\t\ttext: Loc.getMessage('LANDING_FIELDS_SELECT_PRODUCTS_BUTTON_TITLE'),\n\t\t\t\t\tonClick: this.onSelectProductsButtonClick,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'selectSeparator',\n\t\t\t\t\ttext: Loc.getMessage('LANDING_FIELDS_SELECT_SEPARATOR_BUTTON_TITLE'),\n\t\t\t\t\tonClick: this.onSelectSeparatorButtonClick,\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\n\t\tthis.draggable = new Draggable({\n\t\t\tcontext: window.parent,\n\t\t\tcontainer: this.getListContainer(),\n\t\t\tdraggable: '.landing-ui-component-list-item',\n\t\t\tdragElement: '.landing-ui-button-icon-drag',\n\t\t\ttype: Draggable.MOVE,\n\t\t\toffset: {\n\t\t\t\ty: -62,\n\t\t\t},\n\t\t});\n\n\t\tthis.draggable.subscribe('end', this.onDragEnd);\n\t}\n\n\tcreateInput(): HTMLDivElement\n\t{\n\t\treturn this.getListContainer();\n\t}\n\n\tgetCrmFieldById(id: string)\n\t{\n\t\treturn Object.values(this.options.crmFields)\n\t\t\t.reduce((acc, category) => {\n\t\t\t\treturn [...acc, ...category.FIELDS];\n\t\t\t}, [])\n\t\t\t.find((currentField) => {\n\t\t\t\treturn currentField.name === id;\n\t\t\t});\n\t}\n\n\tgetCrmFieldCategoryById(id: string)\n\t{\n\t\treturn this.options.crmFields[id];\n\t}\n\n\taddItem(itemOptions)\n\t{\n\t\treturn this.createItem(itemOptions)\n\t\t\t.then((item) => {\n\t\t\t\tthis.items.push(item);\n\t\t\t\tDom.append(item.getLayout(), this.getListContainer());\n\t\t\t});\n\t}\n\n\tprependItem(itemOptions)\n\t{\n\t\treturn this.createItem(itemOptions)\n\t\t\t.then((item) => {\n\t\t\t\tthis.items.unshift(item);\n\t\t\t\tDom.prepend(item.getLayout(), this.getListContainer());\n\t\t\t});\n\t}\n\n\tinsertItemAfterIndex(itemOptions, index)\n\t{\n\t\treturn this.createItem(itemOptions)\n\t\t\t.then((item) => {\n\t\t\t\tthis.items.splice((index + 1), 0, item);\n\t\t\t\tDom.insertAfter(item.getLayout(), this.getListContainer().childNodes[index]);\n\t\t\t});\n\t}\n\n\tstatic isSeparator(fieldId: ?string): boolean\n\t{\n\t\tif (Type.isStringFilled(fieldId))\n\t\t{\n\t\t\treturn (\n\t\t\t\tfieldId.startsWith('hr')\n\t\t\t\t|| fieldId.startsWith('section')\n\t\t\t\t|| fieldId.startsWith('page')\n\t\t\t);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic getSeparatorTitle(fieldId: ?string): string\n\t{\n\t\tif (Type.isStringFilled(fieldId))\n\t\t{\n\t\t\tif (fieldId.startsWith('hr'))\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('LANDING_SEPARATOR_SOLID_LINE');\n\t\t\t}\n\n\t\t\tif (fieldId.startsWith('section'))\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('LANDING_SEPARATOR_HEADER');\n\t\t\t}\n\n\t\t\tif (fieldId.startsWith('page'))\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('LANDING_SEPARATOR_PAGE');\n\t\t\t}\n\t\t}\n\n\t\treturn Loc.getMessage('LANDING_FIELDS_LIST_FIELD_SEPARATOR_TITLE');\n\t}\n\n\tisFieldAvailable(fieldId: ?string): boolean\n\t{\n\t\tif (Type.isStringFilled(fieldId))\n\t\t{\n\t\t\tif (fieldId.startsWith('product_'))\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn Type.isPlainObject(\n\t\t\t\tthis.getCrmFieldById(fieldId),\n\t\t\t);\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tgetFieldItemTitle(fieldId: ?string): string\n\t{\n\t\tif (this.isFieldAvailable(fieldId))\n\t\t{\n\t\t\tif (fieldId.startsWith('product_'))\n\t\t\t{\n\t\t\t\treturn Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_TITLE');\n\t\t\t}\n\n\t\t\tconst crmField = this.getCrmFieldById(fieldId);\n\t\t\tconst crmFieldCategory = this.getCrmFieldCategoryById(crmField.entity_name);\n\n\t\t\treturn `${crmField.caption} Â· ${crmFieldCategory.CAPTION}`;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tcreateResourceBookingFieldController(options: {[key: string]: any})\n\t{\n\t\tif (options.type === 'resourcebooking')\n\t\t{\n\t\t\tconst root = PageObject.getRootWindow();\n\t\t\tconst crmField = this.getCrmFieldById(options.id);\n\t\t\treturn root.BX.Calendar.ResourcebookingUserfield.initCrmFormFieldController({\n\t\t\t\tfield: {\n\t\t\t\t\t...options,\n\t\t\t\t\tdict: crmField,\n\t\t\t\t\tnode: Tag.render`<div><div class=\"crm-webform-resourcebooking-wrap\"></div></div>`,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tcreateItem(\n\t\toptions: {\n\t\t\tid: string,\n\t\t\tlabel: string,\n\t\t\tdescription: string,\n\t\t\tcontent?: any,\n\t\t\ttype?: any,\n\t\t\tseparatorTitle?: any,\n\t\t},\n\t): Promise<ListItem>\n\t{\n\t\tconst listItemOptions: ListItemOptions = {\n\t\t\tid: options.id,\n\t\t\ttype: options.type ? options.type : '',\n\t\t\tcontent: options.content,\n\t\t\tsourceOptions: {...options},\n\t\t\tdraggable: true,\n\t\t\tremovable: true,\n\t\t\tonRemove: this.onItemRemove,\n\t\t\tonEdit: this.onItemEdit,\n\t\t\tonFormChange: this.onFormChange,\n\t\t\tform: this.createFieldSettingsForm(options),\n\t\t};\n\n\t\tif (!FieldsListField.isSeparator(options.id))\n\t\t{\n\t\t\tif (this.isFieldAvailable(options.id))\n\t\t\t{\n\t\t\t\tlistItemOptions.title = this.getFieldItemTitle(options.id);\n\n\t\t\t\tconst crmField = this.getCrmFieldById(options.id);\n\t\t\t\tlistItemOptions.description = options.label || (crmField ? crmField.caption : '');\n\t\t\t\tlistItemOptions.editable = true;\n\t\t\t\tlistItemOptions.isSeparator = false;\n\t\t\t\tlistItemOptions.fieldController = this.createResourceBookingFieldController(options);\n\n\n\t\t\t\tif (options.editing.supportAutocomplete)\n\t\t\t\t{\n\t\t\t\t\tconst autocompleteButton = new IconButton({\n\t\t\t\t\t\tid: 'autocomplete',\n\t\t\t\t\t\ttype: (() => {\n\t\t\t\t\t\t\tif (options.autocomplete)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn IconButton.Types.user1Active;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn IconButton.Types.user1;\n\t\t\t\t\t\t})(),\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\topacity: 1,\n\t\t\t\t\t\t\tcursor: 'default',\n\t\t\t\t\t\t},\n\t\t\t\t\t\ttitle: (() => {\n\t\t\t\t\t\t\tif (options.autocomplete)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn Loc.getMessage('LANDING_FIELDS_ITEM_AUTOCOMPLETE_ENABLED');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn Loc.getMessage('LANDING_FIELDS_ITEM_AUTOCOMPLETE_DISABLED');\n\t\t\t\t\t\t})(),\n\t\t\t\t\t});\n\n\t\t\t\t\tlistItemOptions.form.subscribe('onChange', (event: BaseEvent) => {\n\t\t\t\t\t\tif (event.getTarget().serialize().autocomplete)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tautocompleteButton.setType(IconButton.Types.user1Active);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tautocompleteButton.setType(IconButton.Types.user1);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tlistItemOptions.actions = [\n\t\t\t\t\t\tautocompleteButton,\n\t\t\t\t\t];\n\t\t\t\t}\n\n\t\t\t\tconst listItem = new ListItem(listItemOptions);\n\n\t\t\t\tif (listItemOptions.fieldController)\n\t\t\t\t{\n\t\t\t\t\treturn new Promise((resolve) => {\n\t\t\t\t\t\tif (Type.isFunction(listItemOptions.fieldController.subscribe))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlistItemOptions.fieldController.subscribe('afterInit', (event) => {\n\t\t\t\t\t\t\t\toptions.booking.settings_data = event.getData().settings.data;\n\t\t\t\t\t\t\t\tresolve(listItem);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(listItem);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn Promise.resolve(listItem);\n\t\t\t}\n\n\t\t\tlistItemOptions.editable = false;\n\t\t\tlistItemOptions.isSeparator = false;\n\t\t\tlistItemOptions.title = '';\n\t\t\tlistItemOptions.description = Loc.getMessage('LANDING_FIELDS_ITEM_FIELD_UNAVAILABLE');\n\t\t\tlistItemOptions.error = true;\n\n\t\t\tconst listItem = new ListItem(listItemOptions);\n\n\t\t\treturn Promise.resolve(listItem);\n\t\t}\n\n\t\tlistItemOptions.isSeparator = true;\n\t\tlistItemOptions.editable = !String(options.id).startsWith('hr_');\n\t\tlistItemOptions.title = FieldsListField.getSeparatorTitle(options.id);\n\n\t\tif (Type.isString(options.label))\n\t\t{\n\t\t\tlistItemOptions.description = options.label;\n\t\t}\n\t\telse if (String(options.id).startsWith('hr_'))\n\t\t{\n\t\t\tlistItemOptions.description = FieldsListField.getSeparatorTitle(options.id);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst crmField = this.getCrmFieldById(options.id);\n\t\t\tif (Type.isPlainObject(crmField) && Type.isString(crmField.caption))\n\t\t\t{\n\t\t\t\tlistItemOptions.description = crmField.caption;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlistItemOptions.description = '';\n\t\t\t}\n\t\t}\n\n\t\tconst listItem = new ListItem(listItemOptions);\n\n\t\treturn Promise.resolve(listItem);\n\t}\n\n\tcreateCustomPriceDropdown(field)\n\t{\n\t\treturn new BX.Landing.UI.Field.Dropdown({\n\t\t\tid: 'customPrice',\n\t\t\tselector: 'customPrice',\n\t\t\titems: [\n\t\t\t\t{name: Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_ALLOW_CUSTOM_PRICE_NOT_SELECTED'), value: null},\n\t\t\t\t...(field.items.map((item) => {\n\t\t\t\t\treturn {name: item.label, value: item.value};\n\t\t\t\t})),\n\t\t\t],\n\t\t\tcontent: field.items.reduce((acc, item) => {\n\t\t\t\tif (item.changeablePrice && acc === null)\n\t\t\t\t{\n\t\t\t\t\treturn item.value;\n\t\t\t\t}\n\n\t\t\t\treturn acc;\n\t\t\t}, null),\n\t\t});\n\t}\n\n\tcreateProductDefaultValueDropdown(field)\n\t{\n\t\tconst defaultValueField = new BX.Landing.UI.Field.Dropdown({\n\t\t\tid: 'productDefaultValue',\n\t\t\tselector: 'value',\n\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_LIST_DEFAULT_VALUE_TITLE'),\n\t\t\tcontent: field.value,\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tlabel: Loc.getMessage('LANDING_FORM_DEFAULT_VALUE_NOT_SELECTED'),\n\t\t\t\t\tvalue: null,\n\t\t\t\t},\n\t\t\t\t...field.items,\n\t\t\t].map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: item.label,\n\t\t\t\t\tvalue: item.value,\n\t\t\t\t};\n\t\t\t}),\n\t\t});\n\n\t\tif (field.items.length > 0)\n\t\t{\n\t\t\tdefaultValueField.enable();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdefaultValueField.disable();\n\t\t}\n\n\t\treturn defaultValueField;\n\t}\n\n\tcreateFileLimitationFields(field): Array<BaseField>\n\t{\n\t\tlet limitationFields: Array<BaseField> = [];\n\n\t\tif (Type.isInteger(this.options.dictionary.defaultMaxFileFieldSizeMbValue))\n\t\t{\n\t\t\tconst defaultSizeValue = this.options.dictionary.defaultMaxFileFieldSizeMbValue;\n\t\t\tlet lastSizeValue = field.maxSizeMb || defaultSizeValue;\n\t\t\tif (lastSizeValue < 0)\n\t\t\t{\n\t\t\t\tlastSizeValue = '';\n\t\t\t}\n\n\t\t\tconst sizeField = new TextField({\n\t\t\t\tid: 'maxSizeMb',\n\t\t\t\tselector: 'maxSizeMb',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_MAX_FILE_SIZE'),\n\t\t\t\tcontent: String(lastSizeValue),\n\t\t\t\ttextOnly: true,\n\t\t\t\thelp: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_MAX_FILE_SIZE_HINT'),\n\t\t\t\tonValueChange: (e) => {\n\t\t\t\t\tif (e.getValue() === '')\n\t\t\t\t\t{\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (e.getValue() === lastSizeValue)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\tconst value = Number(e.getValue());\n\t\t\t\t\tif (Number.isNaN(value))\n\t\t\t\t\t{\n\t\t\t\t\t\te.setValue(lastSizeValue);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (String(value) !== e.getValue())\n\t\t\t\t\t{\n\t\t\t\t\t\te.setValue(String(value));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tfield.maxSizeMb = value;\n\t\t\t\t\tlastSizeValue = e.getValue();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tlet titleText = '';\n\t\t\tlet configureNodeText = Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DAILY_FILE_LIMIT_CONFIGURE_FULL');\n\t\t\tif (Type.isInteger(this.options.dictionary.dailyFileLimitSizeMbValue))\n\t\t\t{\n\t\t\t\ttitleText = Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DAILY_FILE_LIMIT_TITLE')\n\t\t\t\t\t.replace('%size%', this.options.dictionary.dailyFileLimitSizeMbValue)\n\t\t\t\t;\n\t\t\t\tconfigureNodeText = Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DAILY_FILE_LIMIT_CONFIGURE');\n\t\t\t}\n\n\t\t\tconst dailyLimitTitleNode = Tag.render\n\t\t\t\t`<span style=\"margin-right: 5px\">${titleText}</span>\n\t\t\t`;\n\t\t\tconst dailyLimitConfigureNode = Tag.render`\n\t\t\t\t\t<div class=\"landing-ui-field-fields-list-item-button\">${configureNodeText}</div>\n\t\t\t`;\n\n\t\t\tconst dailyLimitNode = Tag.render`\n\t\t\t\t\t<div class=\"ui-color-light ui-text-4\" style=\"margin-top: 4px\"> \n\t\t\t\t\t\t\t${dailyLimitTitleNode}\n\t\t\t\t\t\t\t${dailyLimitConfigureNode}\n\t\t\t\t\t</div>\n\t\t\t`;\n\t\t\tdailyLimitConfigureNode.addEventListener('click', () => {\n\t\t\t\tFileLimit.instance()\n\t\t\t\t\t.subscribe('onSuccessLimitChanged', (event) => {\n\t\t\t\t\t\tif (Type.isUndefined(event.data.limit))\n\t\t\t\t\t\t\treturn;\n\n\t\t\t\t\t\tthis.options.dictionary.dailyFileLimitSizeMbValue = event.data.limit;\n\t\t\t\t\t\tif (Type.isInteger(event.data.limit))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdailyLimitTitleNode.innerText =\n\t\t\t\t\t\t\t\tLoc.getMessage('LANDING_FIELDS_ITEM_FORM_DAILY_FILE_LIMIT_TITLE')\n\t\t\t\t\t\t\t\t\t.replace('%size%', event.data.limit)\n\t\t\t\t\t\t\t;\n\t\t\t\t\t\t\tdailyLimitConfigureNode.innerText = Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DAILY_FILE_LIMIT_CONFIGURE');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (Type.isNull(event.data.limit))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tdailyLimitTitleNode.innerText = '';\n\t\t\t\t\t\t\tdailyLimitConfigureNode.innerText = Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DAILY_FILE_LIMIT_CONFIGURE_FULL');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.open()\n\t\t\t\t;\n\t\t\t});\n\t\t\tsizeField.getLayout().appendChild(dailyLimitNode);\n\t\t\tlimitationFields.push(sizeField);\n\t\t}\n\n\t\tif (Type.isArrayFilled(this.options.dictionary.contentTypes))\n\t\t{\n\t\t\tconst adjustContentTypesField = (value) => {\n\t\t\t\tif (value.includes('any'))\n\t\t\t\t{\n\t\t\t\t\tconst inputs = [...contentTypesField.layout\n\t\t\t\t\t\t.querySelectorAll('.landing-ui-field-checkbox-item-checkbox')];\n\t\t\t\t\tinputs.forEach((input) => {\n\t\t\t\t\t\tif (Dom.attr(input, 'value') === 'any')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.removeClass(input.closest('.landing-ui-field-checkbox-item'), 'landing-ui-disabled');\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.addClass(input.closest('.landing-ui-field-checkbox-item'), 'landing-ui-disabled');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconst inputs = [...contentTypesField.layout\n\t\t\t\t\t\t.querySelectorAll('.landing-ui-field-checkbox-item-checkbox')];\n\t\t\t\t\tinputs.forEach((input) => {\n\t\t\t\t\t\tDom.removeClass(input.closest('.landing-ui-field-checkbox-item'), 'landing-ui-disabled');\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tconst selectedContentTypes = Type.isArrayFilled(field.contentTypes) ? field.contentTypes : ['any'];\n\t\t\tlet lastValue = selectedContentTypes;\n\t\t\tconst contentTypesField = new BX.Landing.UI.Field.Checkbox({\n\t\t\t\tselector: 'contentTypes',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_ALLOWED_FILE_TYPE'),\n\t\t\t\tvalue: selectedContentTypes,\n\t\t\t\titems: [\n\t\t\t\t\t(() => {\n\t\t\t\t\t\tif (Loc.hasMessage('LANDING_FIELDS_ITEM_FORM_ALLOWED_ANY_FILE_TYPE'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_ALLOWED_ANY_FILE_TYPE'),\n\t\t\t\t\t\t\t\tvalue: 'any',\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn undefined;\n\t\t\t\t\t})(),\n\t\t\t\t\t...this.options.dictionary.contentTypes.map((item) => {\n\t\t\t\t\t\tconst hint = item.hint\n\t\t\t\t\t\t\t? `<span class=\"ui-hint\" data-hint=\"${Text.encode(item.hint)}\"></span>`\n\t\t\t\t\t\t\t: ''\n\t\t\t\t\t\t;\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\thtml: `<span style=\"display: flex; align-items: center;\">${Text.encode(item.name)} ${hint}</span>`,\n\t\t\t\t\t\t\tname: '',\n\t\t\t\t\t\t\tvalue: item.id\n\t\t\t\t\t\t};\n\t\t\t\t\t}),\n\t\t\t\t],\n\t\t\t\tonValueChange: () => {\n\t\t\t\t\tconst value = contentTypesField.getValue();\n\n\t\t\t\t\tif (value.includes('any'))\n\t\t\t\t\t{\n\t\t\t\t\t\tif (lastValue.includes('any'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontentTypesField.setValue(value.filter((item) => item !== 'any'));\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontentTypesField.setValue(['any']);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tlastValue = contentTypesField.getValue();\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tBX.UI.Hint.init(contentTypesField.getLayout());\n\t\t\tlimitationFields.push(contentTypesField);\n\t\t}\n\n\t\treturn limitationFields;\n\t}\n\n\tcreateDefaultValueField(field): BX.Landing.UI.Field.Dropdown\n\t{\n\t\treturn new BX.Landing.UI.Field.Dropdown({\n\t\t\tselector: 'value',\n\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_LIST_DEFAULT_VALUE_TITLE'),\n\t\t\tcontent: field.value,\n\t\t\titems: [\n\t\t\t\t{\n\t\t\t\t\tlabel: Loc.getMessage('LANDING_FORM_DEFAULT_VALUE_NOT_SELECTED'),\n\t\t\t\t\tvalue: null,\n\t\t\t\t},\n\t\t\t\t...field.items,\n\t\t\t].map((item) => {\n\t\t\t\treturn {\n\t\t\t\t\tname: item.label,\n\t\t\t\t\tvalue: item.value,\n\t\t\t\t};\n\t\t\t}),\n\t\t});\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tcreateFieldSettingsForm(field)\n\t{\n\t\tconst fields = [];\n\t\tconst form = new FormSettingsForm({\n\t\t\tserializeModifier(value) {\n\t\t\t\tconst modifiedValue = {...value};\n\t\t\t\tif (Reflect.has(value, 'label'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.label = Text.decode(value.label);\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'required'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.required = value.required.includes('required');\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'multiple'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.multiple = value.multiple.includes('multiple');\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'bigPic'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.bigPic = value.bigPic.includes('bigPic');\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'value') && Type.isArrayFilled(value.items))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.items = modifiedValue.items.map((item) => {\n\t\t\t\t\t\titem.selected = (value.value === item.value);\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'products'))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.items = Runtime.clone(value.products);\n\t\t\t\t\tif (!Type.isPlainObject(modifiedValue.editing))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.editing = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Reflect.has(value, 'value') && Type.isArrayFilled(modifiedValue.items))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.items.forEach((item) => {\n\t\t\t\t\t\t\titem.selected = (String(value.value) === String(item.value));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tmodifiedValue.editing.catalog = Runtime.clone(value.products);\n\t\t\t\t}\n\n\t\t\t\tif (Reflect.has(value, 'valueType'))\n\t\t\t\t{\n\t\t\t\t\tif (!Type.isPlainObject(modifiedValue.editing))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.editing = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!Type.isPlainObject(modifiedValue.editing.editable))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.editing.editable = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tmodifiedValue.editing.editable.valueType = value.valueType;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(value.useCustomPrice))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.items.forEach((item) => {\n\t\t\t\t\t\titem.changeablePrice = (\n\t\t\t\t\t\t\tvalue.useCustomPrice.includes('useCustomPrice')\n\t\t\t\t\t\t\t&& String(item.value) === String(value.customPrice)\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\n\t\t\t\t\tdelete modifiedValue.customPrice;\n\t\t\t\t\tdelete modifiedValue.useCustomPrice;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(value.autocomplete))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.autocomplete = value.autocomplete.length > 0;\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArrayFilled(value.contentTypes))\n\t\t\t\t{\n\t\t\t\t\tif (value.contentTypes.includes('any'))\n\t\t\t\t\t{\n\t\t\t\t\t\tmodifiedValue.contentTypes = [];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (Type.isArray(value.requisite))\n\t\t\t\t{\n\t\t\t\t\tmodifiedValue.requisite = {\n\t\t\t\t\t\tpresets: value.requisite,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\treturn modifiedValue;\n\t\t\t},\n\t\t});\n\n\t\tif (field.type === 'product')\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew ProductField({\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_TITLE2'),\n\t\t\t\t\tselector: 'products',\n\t\t\t\t\titems: field.editing.catalog || [],\n\t\t\t\t\tiblockId: this.options.dictionary.catalog.id,\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tconst oldCustomPrice = form.fields.get('customPrice');\n\t\t\t\t\t\tconst newCustomPrice = this.createCustomPriceDropdown({\n\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\titems: form.serialize().items,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst useCustomPrice = field.items.some((item) => {\n\t\t\t\t\t\t\treturn item.changeablePrice;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tconst useCustomPriceField = form.fields.get('useCustomPrice');\n\n\t\t\t\t\t\tif (useCustomPrice || useCustomPriceField.getValue().includes('useCustomPrice'))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.style(newCustomPrice.getLayout(), 'display', null);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.style(newCustomPrice.getLayout(), 'display', 'none');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnewCustomPrice.setValue(oldCustomPrice.getValue());\n\n\t\t\t\t\t\tform.replaceField(\n\t\t\t\t\t\t\toldCustomPrice,\n\t\t\t\t\t\t\tnewCustomPrice,\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tconst oldDefaultValue = form.fields.get('productDefaultValue');\n\t\t\t\t\t\tconst newDefaultValue = this.createProductDefaultValueDropdown({\n\t\t\t\t\t\t\t...field,\n\t\t\t\t\t\t\titems: form.serialize().items,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tform.replaceField(\n\t\t\t\t\t\t\toldDefaultValue,\n\t\t\t\t\t\t\tnewDefaultValue,\n\t\t\t\t\t\t);\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.editing.hasLabel)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew TextField({\n\t\t\t\t\tselector: 'label',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_LABEL_FIELD_TITLE'),\n\t\t\t\t\tcontent: field.label,\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.type === 'rq')\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew RequisiteSettingsField({\n\t\t\t\t\tselector: 'requisite',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_REQUISITE_SETTINGS_LABEL'),\n\t\t\t\t\tvalue: field.requisite.presets,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.editing.canBeRequired)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'required',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_REQUIRED_FIELD_TITLE'),\n\t\t\t\t\t\t\tvalue: 'required',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: field.required ? ['required'] : [],\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.editing.canBeMultiple)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'multiple',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_MULTIPLE_FIELD_TITLE'),\n\t\t\t\t\t\t\tvalue: 'multiple',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: field.multiple ? ['multiple'] : [],\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.editing.hasStringDefaultValue)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew TextField({\n\t\t\t\t\tselector: 'value',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_DEFAULT_VALUE_FIELD_TITLE'),\n\t\t\t\t\tcontent: field.value,\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.type === 'product')\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'bigPic',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_SHOW_BIG_PICTURE'),\n\t\t\t\t\t\t\tvalue: 'bigPic',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: field.bigPic ? ['bigPic'] : [],\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tconst useCustomPrice = field.items.some((item) => {\n\t\t\t\treturn item.changeablePrice;\n\t\t\t});\n\n\t\t\tconst customPriceField = this.createCustomPriceDropdown(field);\n\t\t\tif (useCustomPrice)\n\t\t\t{\n\t\t\t\tDom.style(customPriceField.getLayout(), 'display', null);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.style(customPriceField.getLayout(), 'display', 'none');\n\t\t\t}\n\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tid: 'useCustomPrice',\n\t\t\t\t\tselector: 'useCustomPrice',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_LIST_FIELD_PRODUCTS_ALLOW_CUSTOM_PRICE'),\n\t\t\t\t\t\t\tvalue: 'useCustomPrice',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: useCustomPrice ? ['useCustomPrice'] : [],\n\t\t\t\t\tonChange: (checkbox) => {\n\t\t\t\t\t\tif (checkbox instanceof BaseField)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconst customPriceField = form.fields.get('customPrice');\n\t\t\t\t\t\t\tif (checkbox.getValue().includes('useCustomPrice'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDom.style(customPriceField.getLayout(), 'display', null);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDom.style(customPriceField.getLayout(), 'display', 'none');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\tfields.push(customPriceField);\n\n\t\t\tfields.push(this.createProductDefaultValueDropdown(field));\n\t\t}\n\n\t\tif (['list', 'radio', 'checkbox'].includes(field.type) && field.editing.items.length > 0)\n\t\t{\n\t\t\tconst defaultValueField = this.createDefaultValueField(field);\n\t\t\tconst listSettingsField = new ListSettingsField({\n\t\t\t\tselector: 'items',\n\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_LIST_SETTINGS_TITLE'),\n\t\t\t\titems: (() => {\n\t\t\t\t\treturn field.editing.items.map((item) => {\n\t\t\t\t\t\tconst selectedItem = field.items.find((currentItem) => {\n\t\t\t\t\t\t\treturn String(currentItem.value) === String(item.id);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tconst checked = !!selectedItem;\n\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tname: checked ? selectedItem.label : item.value,\n\t\t\t\t\t\t\tvalue: item.id,\n\t\t\t\t\t\t\tchecked,\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\t\t\t\t})(),\n\t\t\t});\n\n\t\t\tlistSettingsField.subscribe('onChange', () => {\n\t\t\t\tconst currentDefaultValueField = form.fields.find((item) => {\n\t\t\t\t\treturn item.selector === 'value';\n\t\t\t\t});\n\t\t\t\tform.replaceField(\n\t\t\t\t\tcurrentDefaultValueField,\n\t\t\t\t\tthis.createDefaultValueField({\n\t\t\t\t\t\t...field,\n\t\t\t\t\t\titems: form.serialize().items,\n\t\t\t\t\t\tvalue: currentDefaultValueField.getValue(),\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t});\n\n\t\t\tfields.push(listSettingsField);\n\t\t\tfields.push(defaultValueField);\n\t\t}\n\n\t\tif (\n\t\t\tType.isPlainObject(field.editing)\n\t\t\t&& Type.isArrayFilled(field.editing.valueTypes)\n\t\t)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Dropdown({\n\t\t\t\t\tselector: 'valueType',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_VALUE_TYPE'),\n\t\t\t\t\tcontent: field.editing.editable.valueType,\n\t\t\t\t\titems: field.editing.valueTypes.map((item) => {\n\t\t\t\t\t\treturn {name: item.name, value: item.id};\n\t\t\t\t\t}),\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (Text.toBoolean(field.editing.supportAutocomplete) === true)\n\t\t{\n\t\t\tfields.push(new BX.Landing.UI.Field.Checkbox({\n\t\t\t\tselector: 'autocomplete',\n\t\t\t\tcompact: true,\n\t\t\t\tmultiple: false,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_ENABLE_AUTOCOMPLETE'),\n\t\t\t\t\t\thtml: Text.encode(Loc.getMessage('LANDING_FIELDS_ITEM_ENABLE_AUTOCOMPLETE'))\n\t\t\t\t\t\t\t+ `<span \n\t\t\t\t\t\t\t\t\tclass=\"landing-ui-form-help\" \n\t\t\t\t\t\t\t\t\tstyle=\"margin: 0 0 0 5px;\"\n\t\t\t\t\t\t\t\t\tonclick=\"top.BX.Helper.show('redirect=detail&code=14611764'); return false;\"\n\t\t\t\t\t\t\t\t><a href=\"javascript: void();\"></a></span>`\n\t\t\t\t\t\t,\n\t\t\t\t\t\tvalue: 'autocomplete',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tvalue: field.autocomplete ? ['autocomplete'] : false,\n\t\t\t}));\n\t\t}\n\n\t\tif (Text.toBoolean(field.editing.hasHint) === true)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew TextField({\n\t\t\t\t\tselector: 'hint',\n\t\t\t\t\ttitle: Loc.getMessage('LANDING_FIELDS_ITEM_FORM_FIELD_HINT_TITLE'),\n\t\t\t\t\tcontent: field.hint,\n\t\t\t\t\ttextOnly: true,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (Text.toBoolean(field.editing.supportHintOnFocus) === true)\n\t\t{\n\t\t\tfields.push(\n\t\t\t\tnew BX.Landing.UI.Field.Checkbox({\n\t\t\t\t\tselector: 'hintOnFocus',\n\t\t\t\t\tcompact: true,\n\t\t\t\t\tmultiple: false,\n\t\t\t\t\titems: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: Loc.getMessage('LANDING_FIELDS_ITEM_ENABLE_HINT_ON_FOCUS'),\n\t\t\t\t\t\t\tvalue: 'hintOnFocus',\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\tvalue: field.hintOnFocus ? ['hintOnFocus'] : false,\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\n\t\tif (field.type === 'file')\n\t\t{\n\t\t\tconst limitationFields = this.createFileLimitationFields(field);\n\n\t\t\tlimitationFields.forEach((item: BaseField) => {\n\t\t\t\tfields.push(item);\n\t\t\t});\n\t\t}\n\n\t\tfields.forEach((currentField) => {\n\t\t\tform.addField(currentField);\n\t\t});\n\n\t\treturn form;\n\t}\n\n\tgetListContainer(): HTMLDivElement\n\t{\n\t\treturn this.cache.remember('listContainer', () => {\n\t\t\treturn Tag.render`<div class=\"landing-ui-field-fields-list-container\"></div>`;\n\t\t});\n\t}\n\n\tonSelectFieldButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tFieldsPanel\n\t\t\t.getInstance({\n\t\t\t\tisLeadEnabled: this.options.isLeadEnabled,\n\t\t\t})\n\t\t\t.show({\n\t\t\t\tdisabledFields: this.items.map((item) => item.options.id),\n\t\t\t\tallowedTypes: this.#getFieldsPanelAllowedTypes(),\n\t\t\t})\n\t\t\t.then((selectedFields) => {\n\t\t\t\tif (Type.isArrayFilled(selectedFields))\n\t\t\t\t{\n\t\t\t\t\tthis.options.crmFields = FieldsPanel.getInstance().getOriginalCrmFields();\n\t\t\t\t\tthis.onFieldsSelect(selectedFields);\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\t#getFieldsPanelAllowedTypes(): Array<string>\n\t{\n\t\treturn [\n\t\t\t'list',\n\t\t\t'string',\n\t\t\t'checkbox',\n\t\t\t'date',\n\t\t\t'text',\n\t\t\t'typed_string',\n\t\t\t'file',\n\t\t\t'datetime',\n\t\t\t'integer',\n\t\t\t'double',\n\t\t\t'enumeration',\n\t\t\t'url',\n\t\t\t'money',\n\t\t\t'boolean',\n\t\t\t'resourcebooking',\n\t\t\t'radio',\n\t\t\t'bool',\n\t\t\t'hr',\n\t\t\t'br',\n\t\t\t'phone',\n\t\t\t'email',\n\t\t\t'page',\n\t\t\t'section',\n\t\t];\n\t}\n\n\tonFieldsSelect(selectedFields: Array<string>)\n\t{\n\t\tconst preparingOptions = {\n\t\t\tfields: selectedFields.map((fieldId) => {\n\t\t\t\treturn {name: fieldId};\n\t\t\t}),\n\t\t};\n\n\t\tvoid this.showLoader();\n\n\t\tFormClient.getInstance()\n\t\t\t.prepareOptions(this.options.formOptions, preparingOptions)\n\t\t\t.then((result) => {\n\t\t\t\tvoid this.hideLoader();\n\t\t\t\treturn Promise.all(\n\t\t\t\t\tresult.data.fields.map((field) => {\n\t\t\t\t\t\treturn this.addItem(field);\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then(() => {\n\t\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t\t});\n\t}\n\n\tgetValue()\n\t{\n\t\treturn this.items.map((item) => {\n\t\t\treturn item.getValue();\n\t\t});\n\t}\n\n\t// eslint-disable-next-line class-methods-use-this\n\tonSelectProductsButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\n\t\tconst preparingOptions = {\n\t\t\tfields: [\n\t\t\t\t{type: 'product'},\n\t\t\t],\n\t\t};\n\n\t\tvoid this.showLoader();\n\n\t\tFormClient\n\t\t\t.getInstance()\n\t\t\t.prepareOptions(this.options.formOptions, preparingOptions)\n\t\t\t.then((result) => {\n\t\t\t\tvoid this.hideLoader();\n\n\t\t\t\tconst promises = result.data.fields.map((field) => {\n\t\t\t\t\treturn this.addItem(field);\n\t\t\t\t});\n\n\t\t\t\tPromise.all(promises)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t\t\t\t});\n\t\t\t});\n\t}\n\n\tonSelectSeparatorButtonClick(event: MouseEvent)\n\t{\n\t\tevent.preventDefault();\n\t\tSeparatorPanel.getInstance()\n\t\t\t.show()\n\t\t\t.then((separator) => {\n\t\t\t\tconst fields = [separator];\n\n\t\t\t\tif (\n\t\t\t\t\tseparator.type === 'page'\n\t\t\t\t\t&& !this.items.find((item) => item.options.type === 'page')\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tfields.push({...fields[0]});\n\t\t\t\t}\n\n\t\t\t\tvoid this.showLoader();\n\n\t\t\t\tFormClient.getInstance()\n\t\t\t\t\t.prepareOptions(this.options.formOptions, {fields})\n\t\t\t\t\t.then((result) => {\n\t\t\t\t\t\tvoid this.hideLoader();\n\n\t\t\t\t\t\tlet separatorPromise = Promise.resolve();\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tseparator.type === 'page'\n\t\t\t\t\t\t\t&& !this.items.find((item) => item.options.type === 'page')\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult.data.fields[0].label = Loc.getMessage('LANDING_FIELDS_ITEM_PAGE_TITLE')\n\t\t\t\t\t\t\t\t.replace('#number#', 1);\n\t\t\t\t\t\t\tresult.data.fields[1].label = Loc.getMessage('LANDING_FIELDS_ITEM_PAGE_TITLE')\n\t\t\t\t\t\t\t\t.replace('#number#', 2);\n\n\t\t\t\t\t\t\tseparatorPromise = Promise.all([\n\t\t\t\t\t\t\t\tthis.prependItem(result.data.fields[0]),\n\t\t\t\t\t\t\t\tthis.insertItemAfterIndex(result.data.fields[1], 1),\n\t\t\t\t\t\t\t]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresult.data.fields.forEach((field) => {\n\t\t\t\t\t\t\t\tconst [type] = field.id.split('_');\n\t\t\t\t\t\t\t\tconst count = this.items.filter((item) => {\n\t\t\t\t\t\t\t\t\treturn item.options.id.startsWith(type);\n\t\t\t\t\t\t\t\t}).length;\n\n\t\t\t\t\t\t\t\tif (type === 'page')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfield.label = Loc.getMessage('LANDING_FIELDS_ITEM_PAGE_TITLE')\n\t\t\t\t\t\t\t\t\t\t.replace('#number#', count + 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (type === 'section')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfield.label = Loc.getMessage('LANDING_FIELDS_ITEM_SECTION_TITLE')\n\t\t\t\t\t\t\t\t\t\t.replace('#number#', count + 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (type === 'hr')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tfield.label = Loc.getMessage('LANDING_FIELDS_ITEM_LINE_TITLE')\n\t\t\t\t\t\t\t\t\t\t.replace('#number#', count + 1);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tseparatorPromise = this.addItem(field);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tseparatorPromise.then(() => {\n\t\t\t\t\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t});\n\t}\n\n\tonItemRemove(event: BaseEvent)\n\t{\n\t\tthis.items = this.items.filter((item) => {\n\t\t\treturn item !== event.getTarget();\n\t\t});\n\n\t\tthis.emit('onChange', {skipPrepare: true});\n\t}\n\n\tonItemEdit(event: BaseEvent)\n\t{\n\t\tconst {options} = event.getTarget();\n\t\tif (options.fieldController)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t\toptions.fieldController.showSettingsPopup();\n\t\t\tsetTimeout(() => {\n\t\t\t\toptions.fieldController.settingsPopup.subscribeOnce('onClose', () => {\n\t\t\t\t\toptions.sourceOptions.booking.settings_data = options.fieldController.getSettings().data;\n\n\t\t\t\t\t// eslint-disable-next-line camelcase\n\t\t\t\t\tconst {settings_data} = options.sourceOptions.booking;\n\t\t\t\t\tObject.keys(settings_data).forEach((key) => {\n\t\t\t\t\t\tif (Type.isArray(settings_data[key].value))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tsettings_data[key].value = settings_data[key].value.join('|');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t\t\t});\n\t\t\t}, 1000);\n\t\t}\n\t}\n\n\tonFormChange(event: BaseEvent)\n\t{\n\t\tthis.emit('onChange', {skipPrepare: true});\n\n\t\tconst target = event.getTarget();\n\t\tconst value = target.getValue();\n\n\t\ttarget.setDescription(value.label);\n\t}\n\n\tonDragEnd()\n\t{\n\t\tsetTimeout(() => {\n\t\t\tthis.items = [...this.getListContainer().children].map((itemNode) => {\n\t\t\t\tconst itemNodeId = Dom.attr(itemNode, 'data-id');\n\t\t\t\treturn this.items.find((item) => {\n\t\t\t\t\treturn item.options.id === itemNodeId;\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tthis.emit('onChange', {skipPrepare: true});\n\t\t});\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\treturn this.cache.remember('loader', () => {\n\t\t\treturn new Loader({\n\t\t\t\tsize: 50,\n\t\t\t\tmode: 'inline',\n\t\t\t\toffset: {\n\t\t\t\t\ttop: '5px',\n\t\t\t\t\tleft: '225px',\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t}\n\n\tshowLoader(): Promise<any>\n\t{\n\t\tconst loader = this.getLoader();\n\t\tconst container = this.getListContainer();\n\t\tDom.append(loader.layout, container);\n\t\treturn loader.show(container);\n\t}\n\n\thideLoader(): Promise<any>\n\t{\n\t\tconst loader = this.getLoader();\n\t\tDom.remove(loader.layout);\n\t\treturn loader.hide();\n\t}\n}"],"names":["RequisiteSettingsField","options","setEventNamespace","subscribeFromOptions","events","Dom","replace","input","getSettingsLayout","cache","remember","Tag","render","getCheckboxTree","keys","map","checkbox","layout","requisites","getOptions","value","reduce","requisite","fieldsCheckbox","BX","Landing","UI","Field","Checkbox","selector","id","compact","items","fields","field","name","label","checked","disabled","onChange","emit","onFieldSettingsLinkClick","event","preventDefault","stopPropagation","categoryCheckbox","contains","append","remove","fieldSettingsLink","Loc","getMessage","labelLayout","querySelector","getValue","length","set","Map","entries","acc","index","fieldsValue","push","includes","BaseField","FieldsListField","setLayoutClass","onSelectFieldButtonClick","bind","onSelectProductsButtonClick","onSelectSeparatorButtonClick","onItemRemove","onItemEdit","onDragEnd","onFormChange","forEach","itemOptions","addItem","actionPanel","ActionPanel","renderTo","left","text","onClick","right","draggable","Draggable","context","window","parent","container","getListContainer","dragElement","type","MOVE","offset","y","subscribe","Object","values","crmFields","category","FIELDS","find","currentField","createItem","then","item","getLayout","unshift","prepend","splice","insertAfter","childNodes","fieldId","Type","isStringFilled","startsWith","isPlainObject","getCrmFieldById","isFieldAvailable","crmField","crmFieldCategory","getCrmFieldCategoryById","entity_name","caption","CAPTION","root","PageObject","getRootWindow","Calendar","ResourcebookingUserfield","initCrmFormFieldController","dict","node","listItemOptions","content","sourceOptions","removable","onRemove","onEdit","form","createFieldSettingsForm","isSeparator","title","getFieldItemTitle","description","editable","fieldController","createResourceBookingFieldController","editing","supportAutocomplete","autocompleteButton","IconButton","autocomplete","Types","user1Active","user1","style","opacity","cursor","getTarget","serialize","setType","actions","listItem","ListItem","Promise","resolve","isFunction","booking","settings_data","getData","settings","data","error","String","getSeparatorTitle","isString","Dropdown","changeablePrice","defaultValueField","enable","disable","limitationFields","isInteger","dictionary","defaultMaxFileFieldSizeMbValue","defaultSizeValue","lastSizeValue","maxSizeMb","sizeField","TextField","textOnly","help","onValueChange","e","Number","isNaN","setValue","titleText","configureNodeText","dailyFileLimitSizeMbValue","dailyLimitTitleNode","dailyLimitConfigureNode","dailyLimitNode","addEventListener","FileLimit","instance","isUndefined","limit","innerText","isNull","open","appendChild","isArrayFilled","contentTypes","selectedContentTypes","lastValue","contentTypesField","hasMessage","undefined","hint","Text","encode","html","filter","Hint","init","FormSettingsForm","serializeModifier","modifiedValue","Reflect","has","decode","required","multiple","bigPic","selected","Runtime","clone","products","catalog","valueType","isArray","useCustomPrice","customPrice","presets","ProductField","iblockId","oldCustomPrice","get","newCustomPrice","createCustomPriceDropdown","some","useCustomPriceField","replaceField","oldDefaultValue","newDefaultValue","createProductDefaultValueDropdown","hasLabel","canBeRequired","canBeMultiple","hasStringDefaultValue","customPriceField","createDefaultValueField","listSettingsField","ListSettingsField","selectedItem","currentItem","currentDefaultValueField","valueTypes","toBoolean","hasHint","supportHintOnFocus","hintOnFocus","createFileLimitationFields","addField","FieldsPanel","getInstance","isLeadEnabled","show","disabledFields","allowedTypes","selectedFields","getOriginalCrmFields","onFieldsSelect","preparingOptions","showLoader","FormClient","prepareOptions","formOptions","result","hideLoader","all","skipPrepare","promises","SeparatorPanel","separator","separatorPromise","prependItem","insertItemAfterIndex","split","count","showSettingsPopup","setTimeout","settingsPopup","subscribeOnce","getSettings","key","join","target","setDescription","children","itemNode","itemNodeId","attr","Loader","size","mode","top","loader","getLoader","hide"],"mappings":"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"}