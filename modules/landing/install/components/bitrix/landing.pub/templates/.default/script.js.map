{"version":3,"file":"script.js","sources":["src/js/landing.pub.disk.file.js","src/js/landing.pub.search.result.js","src/js/landing.pub.timestamp.js","src/js/landing.pub.top.panel.js","src/js/landing.pub.page.transition.js"],"sourcesContent":["\n\nexport class DiskFile\n{\n\t/**\n\t * Constructor.\n\t */\n\tconstructor()\n\t{\n\t\tdocument.addEventListener('click', this.onClick.bind(this));\n\t}\n\n\t/**\n\t * Click callback.\n\t *\n\t * @return {void}\n\t */\n\tonClick(event)\n\t{\n\t\tlet target = event.target;\n\t\tlet href = target.getAttribute('href') || (target.getAttribute('data-pseudo-url') && JSON.parse(target.getAttribute('data-pseudo-url')).href);\n\t\tif (!href)\n\t\t{\n\t\t\tconst parentNode = target.parentNode;\n\t\t\tif (parentNode.nodeName === 'A')\n\t\t\t{\n\t\t\t\thref = parentNode.getAttribute('href');\n\t\t\t\ttarget = parentNode;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst grandParentNode = parentNode.parentNode;\n\t\t\t\tif (grandParentNode.nodeName === 'A')\n\t\t\t\t{\n\t\t\t\t\thref = grandParentNode.getAttribute('href');\n\t\t\t\t\ttarget = grandParentNode;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (target.getAttribute('data-viewer-type')) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (href && href.indexOf('/bitrix/services/main/ajax.php?action=landing.api.diskFile.download') === 0)\n\t\t{\n\t\t\tBX.ajax.get(href.replace('landing.api.diskFile.download', 'landing.api.diskFile.view'), function(data)\n\t\t\t{\n\t\t\t\tif (typeof data === 'string')\n\t\t\t\t{\n\t\t\t\t\tdata = JSON.parse(data);\n\t\t\t\t}\n\n\t\t\t\tif (!data.data)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tObject.keys(data.data).map(key => {\n\t\t\t\t\ttarget.setAttribute(key, data.data[key]);\n\t\t\t\t});\n\n\t\t\t\ttarget.click();\n\t\t\t});\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn false;\n\t\t}\n\t}\n}","\n\nexport class SearchResult\n{\n\t/**\n\t * Constructor.\n\t */\n\tconstructor()\n\t{\n\t\tthis.prepareSearchInput();\n\t\tthis.scrollToFirstBlock();\n\t}\n\n\t/**\n\t * Prepare the search input field by populating it with the 'q' parameter value from the URL.\n\t * @return {void}\n\t */\n\tprepareSearchInput()\n\t{\n\t\tconst params = new URLSearchParams(window.location.search);\n\t\tconst qValue = params.get('q');\n\t\tconst element = document.querySelector('[name=\"q\"]');\n\t\tif (element && qValue)\n\t\t{\n\t\t\telement.value = qValue;\n\t\t}\n\t}\n\n\t/**\n\t * Finds first highlight word and scroll to it.\n\t * @return {void}\n\t */\n\tscrollToFirstBlock()\n\t{\n\t\tvar result = document.querySelector('.landing-highlight');\n\t\tif (result)\n\t\t{\n\t\t\tvar parent = result.parentNode;\n\t\t\twhile (parent)\n\t\t\t{\n\t\t\t\tif (parent.classList.contains('block-wrapper'))\n\t\t\t\t{\n\t\t\t\t\twindow.scrollTo({\n\t\t\t\t\t\ttop: parent.offsetTop,\n\t\t\t\t\t\tbehavior: 'smooth'\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tparent = parent.parentNode;\n\t\t\t}\n\t\t}\n\t}\n}","\n\nexport class TimeStamp\n{\n\t/**\n\t * Constructor.\n\t */\n\tconstructor()\n\t{\n\t\tthis.removeTimestamp();\n\t}\n\n\t/**\n\t * Removes 'ts' param from query string.\n\t * @return {void}\n\t */\n\tremoveTimestamp()\n\t{\n\t\tlet uri = window.location.toString();\n\n\t\turi = uri.replace(/(ts=[\\d]+[&]*)/, '');\n\t\tif (uri.slice(-1) === '?' || uri.slice(-1) === '&')\n\t\t{\n\t\t\turi = uri.slice(0, -1);\n\t\t}\n\n\t\twindow.history.replaceState({}, document.title, uri);\n\t}\n}","import {Event, Cache, Dom, Loc, Type} from 'main.core';\nimport {SliderHacks} from 'landing.sliderhacks';\n\nconst onEditButtonClick = Symbol('onEditButtonClick');\nconst onBackButtonClick = Symbol('onBackButtonClick');\nconst onForwardButtonClick = Symbol('onForwardButtonClick');\nconst onCopyLinkButtonClick = Symbol('onCopyLinkButtonClick');\nconst onUniqueViewIconClick = Symbol('onUniqueViewIconClick');\n\nexport class TopPanel\n{\n\tstatic cache = new Cache.MemoryCache();\n\n\tconstructor(data)\n\t{\n\t\tthis.userData = data.userData;\n\n\t\tEvent.bind(TopPanel.getEditButton(), 'click', this[onEditButtonClick]);\n\t\tEvent.bind(TopPanel.getBackButton(), 'click', this[onBackButtonClick]);\n\t\tEvent.bind(TopPanel.getForwardButton(), 'click', this[onForwardButtonClick]);\n\t\tEvent.bind(TopPanel.getCopyLinkButton(), 'click', this[onCopyLinkButtonClick]);\n\t\tEvent.bind(TopPanel.getUniqueViewIcon(), 'click', this[onUniqueViewIconClick]);\n\n\t\tTopPanel.pushHistory(window.location.toString());\n\t\tTopPanel.checkNavButtonsActivity();\n\t\tTopPanel.checkHints();\n\t\tTopPanel.initUniqueViewPopup(this.userData);\n\t}\n\n\tstatic getLayout(): HTMLDivElement\n\t{\n\t\treturn TopPanel.cache.remember('layout', () => {\n\t\t\treturn document.querySelector('.landing-pub-top-panel');\n\t\t});\n\t}\n\n\tstatic getEditButton(): HTMLAnchorElement\n\t{\n\t\treturn TopPanel.cache.remember('editButton', () => {\n\t\t\treturn TopPanel.getLayout().querySelector('.landing-pub-top-panel-edit-button');\n\t\t});\n\t}\n\n\t[onEditButtonClick](event)\n\t{\n\t\tevent.preventDefault();\n\n\t\tconst href = Dom.attr(event.currentTarget, 'href');\n\t\tconst landingId = Dom.attr(event.currentTarget, 'data-landingId');\n\n\t\tif (Type.isString(href) && href !== '')\n\t\t{\n\t\t\tTopPanel.openSlider(href, landingId);\n\t\t}\n\t}\n\n\tstatic openSlider(url, landingId)\n\t{\n\t\tBX.SidePanel.Instance.open(url, {\n\t\t\tcacheable: false,\n\t\t\tcustomLeftBoundary: 60,\n\t\t\tallowChangeHistory: false,\n\t\t\tevents: {\n\t\t\t\tonClose() {\n\t\t\t\t\tvoid SliderHacks.reloadSlider(\n\t\t\t\t\t\twindow.location.toString().split('#')[0] + '#landingId' + landingId\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\t// HISTORY save\n\tstatic history = [];\n\tstatic historyState;\n\n\tstatic pushHistory(url)\n\t{\n\t\tif (!Type.isNumber(TopPanel.historyState))\n\t\t{\n\t\t\tTopPanel.historyState = -1; // will increase later\n\t\t}\n\n\t\tif (TopPanel.historyState < TopPanel.history.length - 1)\n\t\t{\n\t\t\tTopPanel.history.splice(TopPanel.historyState + 1);\n\t\t}\n\n\t\tTopPanel.history.push(url);\n\t\tTopPanel.historyState++;\n\t}\n\n\tstatic checkNavButtonsActivity()\n\t{\n\t\tDom.removeClass(TopPanel.getForwardButton(), 'ui-btn-disabled');\n\t\tDom.removeClass(TopPanel.getBackButton(), 'ui-btn-disabled');\n\n\t\tif (\n\t\t\t!Type.isArrayFilled(TopPanel.history)\n\t\t\t|| !Type.isNumber(TopPanel.historyState)\n\t\t\t|| TopPanel.history.length === 1\n\t\t)\n\t\t{\n\t\t\tDom.addClass(TopPanel.getForwardButton(), 'ui-btn-disabled');\n\t\t\tDom.addClass(TopPanel.getBackButton(), 'ui-btn-disabled');\n\t\t\treturn;\n\t\t}\n\n\t\tif (TopPanel.historyState === 0)\n\t\t{\n\t\t\tDom.addClass(TopPanel.getBackButton(), 'ui-btn-disabled');\n\t\t}\n\n\t\tif (TopPanel.historyState >= TopPanel.history.length - 1)\n\t\t{\n\t\t\tDom.addClass(TopPanel.getForwardButton(), 'ui-btn-disabled');\n\t\t}\n\t}\n\n\tstatic getBackButton(): HTMLAnchorElement\n\t{\n\t\treturn TopPanel.cache.remember('backButton', () => {\n\t\t\tconst layout = TopPanel.getLayout();\n\t\t\treturn layout ? layout.querySelector('.landing-pub-top-panel-back') : null;\n\t\t});\n\t}\n\n\tstatic getForwardButton(): HTMLAnchorElement\n\t{\n\t\treturn TopPanel.cache.remember('forwardButton', () => {\n\t\t\tconst layout = TopPanel.getLayout();\n\t\t\treturn layout ? layout.querySelector('.landing-pub-top-panel-forward') : null;\n\t\t});\n\t}\n\n\tstatic getCopyLinkButton(): HTMLAnchorElement\n\t{\n\t\treturn TopPanel.cache.remember('copyLinkButton', () => {\n\t\t\tconst layout = TopPanel.getLayout();\n\t\t\treturn layout ? layout.querySelector('.landing-page-link-btn') : null;\n\t\t});\n\t}\n\n\tstatic getUniqueViewIcon(): HTMLAnchorElement\n\t{\n\t\treturn TopPanel.cache.remember('uniqueViewIcon', () => {\n\t\t\tconst layout = TopPanel.getLayout();\n\t\t\treturn layout ? layout.querySelector('.landing-pub-top-panel-unique-view') : null;\n\t\t});\n\t}\n\n\tstatic checkHints()\n\t{\n\t\tconst linkPage = document.querySelector('.landing-pub-top-panel-chain-link-page');\n\t\tif (linkPage)\n\t\t{\n\t\t\tif (parseInt(window.getComputedStyle(linkPage).width) < 200)\n\t\t\t{\n\t\t\t\tDom.style(linkPage, 'pointer-events', 'none');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBX.UI.Hint.init(BX('landing-pub-top-panel-chain-link-page'));\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic initUniqueViewPopup(userData)\n\t{\n\t\tconst setUserId = userData.id;\n\t\tconst setUserName = userData.name;\n\t\tconst avatar = userData.avatar;\n\n\t\tif (setUserId.length === setUserName.length){\n\t\t\tfor (let i = 0; i < setUserId.length; i++)\n\t\t\t{\n\t\t\t\tthis.createUserItem(setUserId[i], setUserName[i], avatar[i]);\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic createUserItem(id, name, avatar)\n\t{\n\t\tconst itemContainer = document.querySelector('.landing-pub-top-panel-unique-view-popup-item-container');\n\t\tconst userUrl = window.location.origin + '/company/personal/user/' + id + '/';\n\t\tconst userItem = BX.Dom.create({\n\t\t\ttag: 'div',\n\t\t\tprops: {\n\t\t\t\tclassList: 'landing-pub-top-panel-unique-view-popup-item',\n\t\t\t},\n\t\t});\n\t\tlet userItemAvatar;\n\t\tif (avatar && avatar !== '')\n\t\t{\n\t\t\tuserItemAvatar = BX.Dom.create({\n\t\t\t\ttag: 'div',\n\t\t\t\tprops: {\n\t\t\t\t\tclassList: 'landing-pub-top-panel-unique-view-popup-item-avatar',\n\t\t\t\t},\n\t\t\t});\n\t\t\tavatar = \"url('\" + avatar + \"')\";\n\t\t\tDom.style(userItemAvatar, 'background-image', avatar);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tuserItemAvatar = BX.Dom.create({\n\t\t\t\ttag: 'div',\n\t\t\t\tprops: {\n\t\t\t\t\tclassList: 'landing-pub-top-panel-unique-view-popup-item-avatar landing-pub-top-panel-unique-view-popup-item-avatar-empty',\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tconst userItemLink = BX.Dom.create({\n\t\t\ttag: 'a',\n\t\t\tprops: {\n\t\t\t\tclassList: 'landing-pub-top-panel-unique-view-popup-item-link',\n\t\t\t},\n\t\t\ttext: name,\n\t\t});\n\t\tDom.attr(userItemLink, 'href', userUrl);\n\t\tDom.attr(userItemLink, 'target', '_blank');\n\t\tDom.append(userItemAvatar, userItem);\n\t\tDom.append(userItemLink, userItem);\n\t\tDom.append(userItem, itemContainer);\n\t}\n\n\t[onCopyLinkButtonClick](event)\n\t{\n\t\tevent.preventDefault();\n\t\tconst link = BX.util.remove_url_param(window.location.href, [\"IFRAME\", \"IFRAME_TYPE\"]);\n\t\tconst node = event.target;\n\t\tif (BX.clipboard.isCopySupported())\n\t\t{\n\t\t\tBX.clipboard.copy(link);\n\t\t\tthis.timeoutIds = this.timeoutIds || [];\n\t\t\tconst popupParams = {\n\t\t\t\tcontent: Loc.getMessage('LANDING_TPL_PUB_COPIED_LINK'),\n\t\t\t\tdarkMode: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tzIndex: 1000,\n\t\t\t\tangle: true,\n\t\t\t\toffsetLeft: 20,\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top'\n\t\t\t\t}\n\t\t\t};\n\t\t\tconst popup = new BX.PopupWindow(\n\t\t\t\t'landing_clipboard_copy',\n\t\t\t\tnode,\n\t\t\t\tpopupParams\n\t\t\t);\n\t\t\tpopup.show();\n\n\t\t\tlet timeoutId;\n\t\t\twhile (timeoutId = this.timeoutIds.pop())\n\t\t\t{\n\t\t\t\tclearTimeout(timeoutId);\n\t\t\t}\n\t\t\ttimeoutId = setTimeout(function(){\n\t\t\t\tpopup.close();\n\t\t\t}, 2000);\n\t\t\tthis.timeoutIds.push(timeoutId);\n\t\t}\n\t}\n\n\t[onUniqueViewIconClick](event)\n\t{\n\t\tconst popup = document.querySelector('.landing-pub-top-panel-unique-view-popup');\n\t\tif (Dom.hasClass(popup, 'hide'))\n\t\t{\n\t\t\tDom.removeClass(popup, 'hide');\n\t\t\tsetTimeout(function(){\n\t\t\t\tDom.addClass(popup, 'hide');\n\t\t\t}, 2000);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(popup, 'hide');\n\t\t}\n\t}\n\n\t[onBackButtonClick](event)\n\t{\n\t\tevent.preventDefault();\n\t\tif (\n\t\t\tType.isArrayFilled(TopPanel.history)\n\t\t\t&& Type.isNumber(TopPanel.historyState)\n\t\t\t&& TopPanel.historyState > 0\n\t\t)\n\t\t{\n\t\t\tvoid SliderHacks.reloadSlider(TopPanel.history[--TopPanel.historyState]);\n\t\t\tTopPanel.checkNavButtonsActivity();\n\t\t}\n\t}\n\n\t[onForwardButtonClick](event)\n\t{\n\t\tevent.preventDefault();\n\n\t\tif (\n\t\t\tType.isArrayFilled(TopPanel.history)\n\t\t\t&& Type.isNumber(TopPanel.historyState)\n\t\t\t&& (TopPanel.historyState < TopPanel.history.length - 1)\n\t\t)\n\t\t{\n\t\t\tvoid SliderHacks.reloadSlider(TopPanel.history[++TopPanel.historyState]);\n\t\t\tTopPanel.checkNavButtonsActivity();\n\t\t}\n\t}\n}","\n\nexport class PageTransition\n{\n\t/**\n\t * Constructor.\n\t */\n\tconstructor()\n\t{\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tconst referrer = document.referrer;\n\t\tif (referrer !== '')\n\t\t{\n\t\t\tlet isSameHost = false;\n\t\t\tlet isDifferentPath = false;\n\t\t\tlet isIframeDisabled = false;\n\t\t\tconst previousUrl = new URL(referrer);\n\t\t\tif (previousUrl)\n\t\t\t{\n\t\t\t\tisSameHost = window.location.host === previousUrl.hostname;\n\t\t\t\tisDifferentPath = window.location.pathname !== previousUrl.pathname;\n\t\t\t\tisIframeDisabled = previousUrl.searchParams.get('IFRAME') !== 'Y';\n\t\t\t}\n\t\t\tif (!isIframeDisabled || !isSameHost || !isDifferentPath)\n\t\t\t{\n\t\t\t\tBX.removeClass(document.body, 'landing-page-transition');\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.removeClass(document.body, 'landing-page-transition');\n\t\t}\n\n\t\tif (document.readyState === 'loading')\n\t\t{\n\t\t\tdocument.addEventListener('DOMContentLoaded', function() {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tBX.removeClass(document.body, 'landing-page-transition');\n\t\t\t\t}, 300);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsetTimeout(() => {\n\t\t\t\tBX.removeClass(document.body, 'landing-page-transition');\n\t\t\t}, 300);\n\t\t}\n\t}\n}"],"names":["DiskFile","document","addEventListener","onClick","bind","event","target","href","getAttribute","JSON","parse","parentNode","nodeName","grandParentNode","indexOf","BX","ajax","get","replace","data","Object","keys","map","key","setAttribute","click","preventDefault","stopPropagation","SearchResult","prepareSearchInput","scrollToFirstBlock","params","URLSearchParams","window","location","search","qValue","element","querySelector","value","result","parent","classList","contains","scrollTo","top","offsetTop","behavior","TimeStamp","removeTimestamp","uri","toString","slice","history","replaceState","title","onEditButtonClick","Symbol","onBackButtonClick","onForwardButtonClick","onCopyLinkButtonClick","onUniqueViewIconClick","TopPanel","userData","Event","getEditButton","getBackButton","getForwardButton","getCopyLinkButton","getUniqueViewIcon","pushHistory","checkNavButtonsActivity","checkHints","initUniqueViewPopup","Dom","attr","currentTarget","landingId","Type","isString","openSlider","link","util","remove_url_param","node","clipboard","isCopySupported","copy","timeoutIds","popupParams","content","Loc","getMessage","darkMode","autoHide","zIndex","angle","offsetLeft","bindOptions","position","popup","PopupWindow","show","timeoutId","pop","clearTimeout","setTimeout","close","push","hasClass","removeClass","addClass","isArrayFilled","isNumber","historyState","SliderHacks","reloadSlider","length","cache","remember","getLayout","url","SidePanel","Instance","open","cacheable","customLeftBoundary","allowChangeHistory","events","onClose","split","splice","layout","linkPage","parseInt","getComputedStyle","width","style","UI","Hint","init","setUserId","id","setUserName","name","avatar","i","createUserItem","itemContainer","userUrl","origin","userItem","create","tag","props","userItemAvatar","userItemLink","text","append","Cache","MemoryCache","PageTransition","referrer","isSameHost","isDifferentPath","isIframeDisabled","previousUrl","URL","host","hostname","pathname","searchParams","body","readyState"],"mappings":"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"}