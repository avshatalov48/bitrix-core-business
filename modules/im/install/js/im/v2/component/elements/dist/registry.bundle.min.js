this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(t,e,i,s){"use strict";const n={user:"user",chat:"chat",open:"open",videoconf:"videoconf",announcement:"announcement",call:"call",support24Notifier:"support24Notifier",support24Question:"support24Question",crm:"crm",sonetGroup:"sonetGroup",calendar:"calendar",tasks:"tasks",thread:"thread",mail:"mail"};const a={name:"Avatar",props:{dialogId:{type:String,default:"0"},size:{type:String,default:i.AvatarSize.M},withAvatarLetters:{type:Boolean,default:true},withStatus:{type:Boolean,default:true},withCounter:{type:Boolean,default:false},withBirthday:{type:Boolean,default:false},withTyping:{type:Boolean,default:false}},computed:{dialog(){return this.$store.getters["dialogues/get"](this.dialogId,true)},user(){return this.$store.getters["users/get"](this.dialogId,true)},isUser(){return this.dialog.type===i.ChatTypes.user},isBot(){if(this.isUser){return this.user.bot}return false},isGeneralChat(){return this.dialog.chatId===BX.MessengerProxy.getGeneralChatId()},isActiveInvitation(){const t=this.$store.getters["recent/get"](this.dialogId);if(!t){return false}return t.invitation.isActive},chatAvatarStyle(){return{backgroundImage:`url('${this.dialog.avatar}')`}},avatarText(){if(![i.ChatTypes.user,i.ChatTypes.open,i.ChatTypes.chat].includes(this.dialog.type)||this.isGeneralChat){return""}return e.Utils.text.getFirstLetters(this.dialog.name)},chatTypeIconClasses(){const t=[];if(n[this.dialog.type]){t.push(`bx-im-component-avatar-icon-${this.dialog.type}`)}else{t.push("bx-im-component-avatar-icon-default")}if(this.isGeneralChat){t.push("bx-im-component-avatar-icon-general")}return t},userStatusIcon(){if(!this.isUser||this.isBot||this.user.id===this.currentUserId){return""}const t=this.$store.getters["users/getStatus"](this.dialogId);if(t){return t}return""},isSomeoneTyping(){return Object.keys(this.dialog.writingList).length>0},formattedCounter(){return this.dialog.counter>99?"99+":this.dialog.counter},isChatMuted(){if(this.isUser){return false}const t=this.dialog.muteList.find((t=>t===this.currentUserId));return!!t},showBirthdays(){return this.$store.getters["recent/getOption"](i.RecentSettings.showBirthday)},currentUserId(){return this.$store.state.application.common.userId}},template:`\n\t\t<div :title="dialog.name" :class="'bx-im-component-avatar-size-' + size.toLowerCase()" class="bx-im-component-avatar-wrap">\n\t\t\t<div v-if="isActiveInvitation" class="bx-im-component-avatar-content bx-im-component-avatar-invitation"></div>\n\t\t\t<div v-else-if="dialog.avatar" :style="chatAvatarStyle" class="bx-im-component-avatar-content bx-im-component-avatar-image"></div>\n\t\t\t<div v-else-if="withAvatarLetters && avatarText" :style="{backgroundColor: dialog.color}" class="bx-im-component-avatar-content bx-im-component-avatar-text">\n\t\t\t\t{{ avatarText }}\n\t\t\t</div>\n\t\t\t<div v-else :style="{backgroundColor: dialog.color}" :class="chatTypeIconClasses" class="bx-im-component-avatar-content bx-im-component-avatar-icon"></div>\n\t\t\t<div v-if="withTyping && isSomeoneTyping" class="bx-im-component-avatar-user-status-icon bx-im-component-avatar-user-status-icon-typing"></div>\n\t\t\t<div v-else-if="withBirthday && isUser && showBirthdays && user.isBirthday" class="bx-im-component-avatar-user-status-icon bx-im-component-avatar-user-status-icon-birthday"></div>\n\t\t\t<div v-else-if="withStatus && userStatusIcon" :class="'bx-im-component-avatar-user-status-icon bx-im-component-avatar-user-status-icon-' + userStatusIcon"></div>\n\t\t\t<div v-if="withCounter && dialog.counter > 0" :class="{'bx-im-component-avatar-counter-muted': isChatMuted}" class="bx-im-component-avatar-counter">\n\t\t\t\t{{ formattedCounter }}\n\t\t\t</div>\n\t\t</div>\n\t`};const r={bot:"bot",extranet:"extranet",network:"network",support24:"support24"};const o={absent:"absent",birthday:"birthday"};const c={name:"ChatTitle",props:{dialogId:{type:String,default:"0"},withMute:{type:Boolean,default:false}},computed:{dialog(){return this.$store.getters["dialogues/get"](this.dialogId,true)},user(){return this.$store.getters["users/get"](this.dialogId,true)},botType(){if(!this.isUser){return""}return this.$store.getters["users/getBotType"](this.dialogId)},isUser(){return this.dialog.type===i.ChatTypes.user},isSelfChat(){return this.isUser&&this.user.id===this.currentUserId},dialogSpecialType(){if(!this.isUser){if(this.isExtranet){return r.extranet}else if([i.ChatTypes.support24.notifier,i.ChatTypes.support24.question].includes(this.dialog.type)){return r.support24}return""}if(this.isBot){return this.botType}else if(this.isExtranet){return r.extranet}else if(this.isNetwork){return r.network}return""},leftIcon(){if(this.dialogSpecialType){return this.dialogSpecialType}if(!this.isUser){return""}if(this.user.isAbsent){return o.absent}else if(this.showBirthdays&&this.user.isBirthday){return o.birthday}return""},color(){return this.dialogSpecialType},isBot(){if(this.isUser){return this.user.bot}return false},isExtranet(){if(this.isUser){return this.user.extranet}return this.dialog.extranet},isNetwork(){if(this.isUser){return this.user.network}return false},isChatMuted(){if(this.isUser){return false}const t=this.dialog.muteList.find((t=>t===this.currentUserId));return!!t},currentUserId(){return this.$store.state.application.common.userId},tooltipText(){if(this.isSelfChat){return`${this.dialog.name} (${this.phrases["IM_RECENT_CHAT_SELF"]})`}return this.dialog.name},showBirthdays(){return this.$store.getters["recent/getOption"](i.RecentSettings.showBirthday)},isDarkTheme(){return this.$store.state.application.options.darkTheme},phrases(){return s.BitrixVue.getFilteredPhrases(this,"IM_RECENT_")}},template:`\n\t\t<div class="bx-im-component-chat-title-wrap">\n\t\t\t<div v-if="leftIcon" :class="'bx-im-component-chat-name-left-icon bx-im-component-chat-name-left-icon-' + leftIcon"></div>\n\t\t\t<span :class="'bx-im-component-chat-name-text-' + color" :title="tooltipText" class="bx-im-component-chat-name-text" >\n\t\t\t\t{{ dialog.name }}\n\t\t\t\t<strong v-if="isSelfChat">\n\t\t\t\t\t<span class="bx-im-component-chat-name-text-self">({{ phrases['IM_RECENT_CHAT_SELF'] }})</span>\n\t\t\t\t</strong>\n\t\t\t</span>\n\t\t\t<div v-if="withMute && isChatMuted" class="bx-im-component-chat-name-muted-icon"></div>\n\t\t</div>\n\t`};const l={name:"RecentLoadingState",props:{compactMode:{type:Boolean,default:false},itemsToShow:{type:Number,default:50}},methods:{isThreeLineVersion(){return Math.random()<.5}},template:`\n\t\t<div v-if="!compactMode" class="bx-im-component-recent-loading-state">\n\t\t\t<div v-for="index in itemsToShow" class="bx-im-component-recent-loading-state-item">\n\t\t\t\t<div class="bx-im-component-recent-loading-state-avatar-wrap">\n\t\t\t\t\t<div class="bx-im-component-recent-loading-state-avatar-placeholder"></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-component-recent-loading-state-content">\n\t\t\t\t\t<div class="bx-im-component-recent-loading-state-line bx-im-component-recent-loading-state-line-long"></div>\n\t\t\t\t\t<div class="bx-im-component-recent-loading-state-line bx-im-component-recent-loading-state-line-short"></div>\n\t\t\t\t\t<div v-if="isThreeLineVersion()" class="bx-im-component-recent-loading-state-line bx-im-component-recent-loading-state-line-short"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if="compactMode" class="bx-im-component-recent-loading-state bx-im-component-recent-loading-state-compact">\n\t\t\t<div v-for="index in itemsToShow" class="bx-im-component-recent-loading-state-item">\n\t\t\t\t<div class="bx-im-component-recent-loading-state-avatar-wrap">\n\t\t\t\t\t<div class="bx-im-component-recent-loading-state-avatar-placeholder"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`};t.Avatar=a;t.ChatTitle=c;t.RecentLoadingState=l})(this.BX.Messenger.v2=this.BX.Messenger.v2||{},BX.Messenger.v2.Lib,BX.Messenger.v2.Const,BX.Vue3);
//# sourceMappingURL=registry.bundle.map.js