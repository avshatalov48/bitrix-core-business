(function(e){if(e.BX.localStorage){return}const t=e.BX;let o=null;let r=null;t.localStorage=function(){t.bind(e,"storage",t.proxy(this._onchange,this));setInterval(t.delegate(this._clear,this),5e3)};t.localStorage.checkBrowser=function(){return true};t.localStorage.set=function(e,o,r){return t.localStorage.instance().set(e,o,r)};t.localStorage.get=function(e){return t.localStorage.instance().get(e)};t.localStorage.remove=function(e){return t.localStorage.instance().remove(e)};t.localStorage.instance=function(){if(!o){o=new t.localStorage}return o};t.localStorage.prototype.prefix=function(){if(!r){r="bx"+t.message("USER_ID")+"-"+(t.message.SITE_ID?t.message("SITE_ID"):"admin")+"-"}return r};t.localStorage.prototype._onchange=function(o){o=o||e.event;if(!o.key){return}if(!!o.key&&o.key.substring(0,this.prefix().length)==this.prefix()){var r={key:o.key.substring(this.prefix().length,o.key.length),value:!!o.newValue?this._decode(o.newValue.substring(11,o.newValue.length)):null,oldValue:!!o.oldValue?this._decode(o.oldValue.substring(11,o.oldValue.length)):null};switch(r.key){case"BXGCE":if(r.value){t.onCustomEvent(r.value.e,r.value.p)}break;default:if(o.newValue){t.onCustomEvent(e,"onLocalStorageSet",[r])}if(o.oldValue&&!o.newValue){t.onCustomEvent(e,"onLocalStorageRemove",[r])}t.onCustomEvent(e,"onLocalStorageChange",[r]);break}}};t.localStorage.prototype._clear=function(){var e=+new Date,t,o;for(o=0;o<localStorage.length;o++){t=localStorage.key(o);if(t.substring(0,2)=="bx"){var r=localStorage.getItem(t).split(":",1)*1e3;if(e>=r){localStorage.removeItem(t)}}}};t.localStorage.prototype._encode=function(e){if(typeof e=="object"){e=JSON.stringify(e)}else{e=e.toString()}return e};t.localStorage.prototype._decode=function(e){var t=null;if(!!e){try{t=JSON.parse(e)}catch(o){t=e}}return t};t.localStorage.prototype._trigger_error=function(e,o,r,n){t.onCustomEvent(this,"onLocalStorageError",[e,{key:o,value:r,ttl:n}])};t.localStorage.prototype.set=function(e,t,o){if(!o||o<=0){o=60}if(e==undefined||e==null||t==undefined){return false}try{localStorage.setItem(this.prefix()+e,Math.round(+new Date/1e3)+o+":"+this._encode(t))}catch(r){this._trigger_error(r,e,t,o)}};t.localStorage.prototype.get=function(e){var t=localStorage.getItem(this.prefix()+e);if(t){var o=t.split(":",1)*1e3;if(+new Date<=o){t=t.substring(11,t.length);return this._decode(t)}}return null};t.localStorage.prototype.remove=function(e){localStorage.removeItem(this.prefix()+e)};t.onGlobalCustomEvent=function(e,o,r){if(!!t.localStorage.checkBrowser()){t.localStorage.set("BXGCE",{e:e,p:o},1)}if(!r){t.onCustomEvent(e,o)}};t.localStorage.instance()})(window);
//# sourceMappingURL=core_ls.map.js