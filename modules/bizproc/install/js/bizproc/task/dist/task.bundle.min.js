this.BX=this.BX||{};(function(e,s,t){"use strict";var i=babelHelpers.classPrivateFieldLooseKey("status");class r{constructor(e){Object.defineProperty(this,i,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,i)[i]=e}isWaiting(){return babelHelpers.classPrivateFieldLooseBase(this,i)[i]===0}isYes(){return babelHelpers.classPrivateFieldLooseBase(this,i)[i]===1}isNo(){return babelHelpers.classPrivateFieldLooseBase(this,i)[i]===2}isOk(){return babelHelpers.classPrivateFieldLooseBase(this,i)[i]===3}isCancel(){return babelHelpers.classPrivateFieldLooseBase(this,i)[i]===4}isCustom(){return s.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,i)[i])}get name(){if(this.isCustom()){return s.Text.encode(babelHelpers.classPrivateFieldLooseBase(this,i)[i])}if(this.isYes()){return s.Loc.getMessage("BIZPROC_TASK_STATUS_YES")}if(this.isNo()||this.isCancel()){return s.Loc.getMessage("BIZPROC_TASK_STATUS_NO")}return s.Loc.getMessage("BIZPROC_TASK_STATUS_OK")}}class a extends r{}let l=e=>e,o,n,b,c;var u=babelHelpers.classPrivateFieldLooseKey("task");var d=babelHelpers.classPrivateFieldLooseKey("responsibleUser");var p=babelHelpers.classPrivateFieldLooseKey("renderTaskButtons");var h=babelHelpers.classPrivateFieldLooseKey("renderTaskButton");var v=babelHelpers.classPrivateFieldLooseKey("renderDefaultTaskButton");class P{constructor(e){Object.defineProperty(this,v,{value:T});Object.defineProperty(this,h,{value:F});Object.defineProperty(this,p,{value:B});Object.defineProperty(this,u,{writable:true,value:void 0});Object.defineProperty(this,d,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,u)[u]=e.task;this.setResponsibleUser(e.responsibleUser)}setResponsibleUser(e){if(s.Type.isNumber(e)){babelHelpers.classPrivateFieldLooseBase(this,d)[d]=babelHelpers.classPrivateFieldLooseBase(this,u)[u].users.find((s=>s.id===e))}return this}render(){if(!babelHelpers.classPrivateFieldLooseBase(this,u)[u].isInline()){return babelHelpers.classPrivateFieldLooseBase(this,v)[v]()}if(s.Type.isArrayFilled(babelHelpers.classPrivateFieldLooseBase(this,u)[u].controls.buttons)){return babelHelpers.classPrivateFieldLooseBase(this,p)[p]()}return null}renderTaskAnchor(){return s.Tag.render(o||(o=l`
			<a href="${0}"></a>
		`),s.Text.encode(babelHelpers.classPrivateFieldLooseBase(this,u)[u].url||"#"))}}function B(){const e=s.Tag.render(n||(n=l`<div class="bp-btn-panel-block"></div>`));const t=babelHelpers.classPrivateFieldLooseBase(this,u)[u].controls.buttons;if(!s.Type.isArray(t)){return e}for(const i of t){let t=null;if(!Object.hasOwn(i,"default")){t=babelHelpers.classPrivateFieldLooseBase(this,h)[h](i)}else if(i.default===true){t=babelHelpers.classPrivateFieldLooseBase(this,v)[v]()}if(s.Type.isDomNode(t)){s.Dom.append(t,e)}}return e}function F(e){const t=new a(e.TARGET_USER_STATUS);const i=t.isNo()||t.isCancel();const r=i?"light-border":"success";const o=s.Text.encode(e.TEXT);const n=s.Tag.render(b||(b=l`
			<div
				class="ui-btn ui-btn-round ui-btn-xs ui-btn-no-caps ui-btn-${0}"
				title="${0}"
			>
				<div class="ui-btn-text">${0}</div>
			</div>
		`),r,o,o);if(s.Type.isFunction(e.onclick)){s.Event.bind(n,"click",e.onclick.bind(n))}return n}function T(){const e=this.renderTaskAnchor();if(s.Type.isDomNode(e)){s.Dom.addClass(e,["ui-btn","ui-btn-primary","ui-btn-round","ui-btn-xs","ui-btn-no-caps"]);const t=s.Loc.getMessage("BIZPROC_TASK_DEFAULT_TASK_BUTTON");e.innerText=t;return s.Tag.render(c||(c=l`
				<div class="bp-btn-panel-block" title="${0}">
					${0}
				</div>
			`),s.Text.encode(t),e)}return null}var L=babelHelpers.classPrivateFieldLooseKey("data");class H{constructor(e){Object.defineProperty(this,L,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,L)[L]=e}get id(){return s.Type.isNumber(babelHelpers.classPrivateFieldLooseBase(this,L)[L].id)?babelHelpers.classPrivateFieldLooseBase(this,L)[L].id:0}get name(){return s.Type.isString(babelHelpers.classPrivateFieldLooseBase(this,L)[L].name)?babelHelpers.classPrivateFieldLooseBase(this,L)[L].name:""}hasDescription(){return s.Type.isString(babelHelpers.classPrivateFieldLooseBase(this,L)[L].description)}get description(){return this.hasDescription()?babelHelpers.classPrivateFieldLooseBase(this,L)[L].description:""}hasUrl(){return s.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,L)[L].url)}get url(){return this.hasUrl()?babelHelpers.classPrivateFieldLooseBase(this,L)[L].url:""}canShowInPopup(){return s.Type.isBoolean(babelHelpers.classPrivateFieldLooseBase(this,L)[L].canShowInPopup)?babelHelpers.classPrivateFieldLooseBase(this,L)[L].canShowInPopup:false}isResponsibleForTask(e){const t=this.users.find((s=>s.id===e));return!s.Type.isNil(t)}get users(){return s.Type.isArray(babelHelpers.classPrivateFieldLooseBase(this,L)[L].users)?babelHelpers.classPrivateFieldLooseBase(this,L)[L].users.map((e=>({...e,status:new a(e.status)}))):[]}hasStatus(){return s.Type.isNumber(babelHelpers.classPrivateFieldLooseBase(this,L)[L].status)||s.Type.isStringFilled(babelHelpers.classPrivateFieldLooseBase(this,L)[L].status)}getStatus(){return new r(this.hasStatus()?babelHelpers.classPrivateFieldLooseBase(this,L)[L].status:0)}get modified(){return s.Type.isNumber(babelHelpers.classPrivateFieldLooseBase(this,L)[L].modified)?Math.max(babelHelpers.classPrivateFieldLooseBase(this,L)[L].modified,0):0}hasControls(){return s.Type.isPlainObject(babelHelpers.classPrivateFieldLooseBase(this,L)[L].controls)}get controls(){return this.hasControls()?babelHelpers.classPrivateFieldLooseBase(this,L)[L].controls:{}}get buttons(){if(this.hasControls()&&s.Type.isArray(this.controls.buttons)){return this.controls.buttons}return[]}setControls(e){babelHelpers.classPrivateFieldLooseBase(this,L)[L].controls=e;return this}setButtons(e){if(!this.hasControls()){babelHelpers.classPrivateFieldLooseBase(this,L)[L].controls={}}babelHelpers.classPrivateFieldLooseBase(this,L)[L].controls.buttons=e;return this}isCompleted(){return this.hasStatus()?!this.getStatus().isWaiting():false}isInline(){return babelHelpers.classPrivateFieldLooseBase(this,L)[L].isInline}}e.TaskStatus=r;e.UserStatus=a;e.Task=H;e.InlineTaskView=P})(this.BX.Bizproc=this.BX.Bizproc||{},BX,BX.Bizproc);
//# sourceMappingURL=task.bundle.map.js