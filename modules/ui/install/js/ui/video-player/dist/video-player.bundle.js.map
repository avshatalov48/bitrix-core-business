{"version":3,"file":"video-player.bundle.js","sources":["../src/player-manager.js","../src/player.js","../src/index.js"],"sourcesContent":["import { Type, Event, Runtime, Reflection } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport type { Player } from './player';\n\nexport class PlayerManager\n{\n\tstatic #isStarted: false;\n\tstatic #players: Array<Player> = [];\n\n\tstatic addPlayer(player)\n\t{\n\t\tthis.#players.push(player);\n\n\t\tthis.#bindPlayerEvents(player);\n\n\t\tif (player.autostart || player.lazyload)\n\t\t{\n\t\t\tthis.#init();\n\t\t}\n\t}\n\n\tstatic #init(): void\n\t{\n\t\tif (this.#isStarted)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#isStarted = true;\n\n\t\tEvent.ready(() => {\n\t\t\tEvent.bind(window, 'scroll', Runtime.throttle(this.#handleScroll, 300, this));\n\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.#handleScroll();\n\t\t\t}, 50);\n\n\t\t\t/** @type {BX.SidePanel.Manager} */\n\t\t\tconst sliderManager = Reflection.getClass('top.BX.SidePanel.Instance');\n\t\t\tif (window !== window.top && sliderManager !== null)\n\t\t\t{\n\t\t\t\t// When players are inside an iframe\n\t\t\t\tconst currentSlider = sliderManager.getSliderByWindow(window);\n\t\t\t\tif (currentSlider)\n\t\t\t\t{\n\t\t\t\t\tEvent.EventEmitter.subscribe(currentSlider, 'SidePanel.Slider:onCloseComplete', () => {\n\t\t\t\t\t\tthis.#players.forEach((player: Player) => {\n\t\t\t\t\t\t\tplayer.pause();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic #bindPlayerEvents(player)\n\t{\n\t\tconst events = player.getEventList();\n\t\tfor (const eventName of events)\n\t\t{\n\t\t\tEvent.EventEmitter.subscribe(player, eventName, () => {\n\t\t\t\tEvent.EventEmitter.emit(this, `PlayerManager.${eventName}`, new BaseEvent({ compatData: [player] }));\n\t\t\t});\n\t\t}\n\t}\n\n\tstatic #handleScroll(): void\n\t{\n\t\tif (this.#players.length === 0)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tlet topVisiblePlayer = false;\n\t\tlet isAnyPlaying = false;\n\n\t\tconst players = [...this.#players];\n\t\tfor (const [index, player] of players.entries())\n\t\t{\n\t\t\tif (!document.getElementById(player.id))\n\t\t\t{\n\t\t\t\tthis.#players.splice(index, 1);\n\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (player.lazyload && !player.inited && this.isVisibleOnScreen(player.id, 2))\n\t\t\t{\n\t\t\t\tplayer.init();\n\t\t\t}\n\n\t\t\tif (!player.autostart)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (player.active)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (player.isEnded())\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (this.isVisibleOnScreen(player.id, 1))\n\t\t\t{\n\t\t\t\tif (topVisiblePlayer === false)\n\t\t\t\t{\n\t\t\t\t\ttopVisiblePlayer = player;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (player.isPlaying())\n\t\t\t{\n\t\t\t\tplayer.pause();\n\t\t\t}\n\n\t\t\tif (player.isPlaying())\n\t\t\t{\n\t\t\t\tisAnyPlaying = true;\n\t\t\t}\n\t\t}\n\n\t\tif (isAnyPlaying)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (topVisiblePlayer !== false)\n\t\t{\n\t\t\tif (!topVisiblePlayer.inited)\n\t\t\t{\n\t\t\t\ttopVisiblePlayer.autostart = true;\n\t\t\t}\n\t\t\telse if (topVisiblePlayer.isReady() && !topVisiblePlayer.isEnded())\n\t\t\t{\n\t\t\t\ttopVisiblePlayer.mute(true);\n\n\t\t\t\tEvent.EventEmitter.subscribeOnce(\n\t\t\t\t\ttopVisiblePlayer,\n\t\t\t\t\t'Player:onClick',\n\t\t\t\t\t(event: BaseEvent) => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\ttopVisiblePlayer.mute(false);\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\ttopVisiblePlayer.play();\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic getElementCoords(id: string): Object\n\t{\n\t\tconst VISIBLE_OFFSET = 0.25;\n\n\t\tconst box = document.getElementById(id).getBoundingClientRect();\n\n\t\tconst elementHeight = box.bottom - box.top;\n\t\tconst top = box.top + VISIBLE_OFFSET * elementHeight;\n\t\tconst bottom = box.bottom - VISIBLE_OFFSET * elementHeight;\n\n\t\tconst elementWidth = box.right - box.left;\n\t\tconst left = box.left + VISIBLE_OFFSET * elementWidth;\n\t\tconst right = box.right - VISIBLE_OFFSET * elementWidth;\n\n\t\treturn {\n\t\t\ttop: top + window.pageYOffset,\n\t\t\tbottom: bottom + window.pageYOffset,\n\t\t\tleft: left + window.pageXOffset,\n\t\t\tright: right + window.pageXOffset,\n\t\t\toriginTop: top,\n\t\t\toriginLeft: left,\n\t\t\toriginBottom: bottom,\n\t\t\toriginRight: right,\n\t\t};\n\t}\n\n\tstatic isVisibleOnScreen(id: string, screens: number): boolean\n\t{\n\t\tlet visible = false;\n\n\t\tconst coords = this.getElementCoords(id);\n\t\tconst clientHeight = document.documentElement.clientHeight;\n\n\t\tlet windowTop = window.pageYOffset || document.documentElement.scrollTop;\n\t\tlet windowBottom = windowTop + clientHeight;\n\n\t\tconst numberOfScreens = screens ? parseInt(screens, 10) : 1;\n\n\t\tif (numberOfScreens > 1)\n\t\t{\n\t\t\twindowTop -= clientHeight * (numberOfScreens - 1);\n\t\t\twindowBottom += clientHeight * (numberOfScreens - 1);\n\t\t}\n\n\t\tconst topVisible = coords.top > windowTop && coords.top < windowBottom;\n\t\tconst bottomVisible = coords.bottom < windowBottom && coords.bottom > windowTop;\n\n\t\tconst onScreen = topVisible || bottomVisible;\n\n\t\tif (onScreen && screens > 1)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!onScreen)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst playerElement = document.getElementById(id);\n\t\tconst playerCenterX = coords.originLeft + (coords.originRight - coords.originLeft) / 2;\n\t\tconst playerCenterY = coords.originTop + (coords.originBottom - coords.originTop) / 2 + 20;\n\n\t\tconst currentPlayerCenterElement = document.elementFromPoint(playerCenterX, playerCenterY);\n\n\t\tif (\n\t\t\tcurrentPlayerCenterElement !== null\n\t\t\t&& (\n\t\t\t\tcurrentPlayerCenterElement === playerElement\n\t\t\t\t|| currentPlayerCenterElement.parentNode === playerElement\n\t\t\t\t|| currentPlayerCenterElement.parentNode.parentNode === playerElement\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tvisible = true;\n\t\t}\n\n\t\treturn (onScreen && visible);\n\t}\n\n\tstatic getPlayerById(id): Player | null\n\t{\n\t\tif (!Type.isStringFilled(id))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tfor (const player of this.#players)\n\t\t{\n\t\t\tif (player.id === id)\n\t\t\t{\n\t\t\t\treturn player;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t}\n}\n","/* eslint-disable @bitrix24/bitrix24-rules/no-native-dom-methods */\nimport { Dom, Type, Event, Reflection, Loc, type JsonObject } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { videojs } from 'ui.video-js';\nimport { PlayerManager } from './player-manager';\n\nvideojs.hook('beforesetup', (videoEl, options) => {\n\tDom.addClass(videoEl, 'ui-video-player ui-icon-set__scope');\n\tif (videoEl.tagName.toLowerCase() === 'audio')\n\t{\n\t\tDom.addClass(videoEl, 'vjs-audio-only-mode');\n\t}\n\n\treturn options;\n});\n\nvideojs.addLanguage('video-player', {\n\tPlay: Loc.getMessage('VIDEO_PLAYER_PLAY'),\n\tPause: Loc.getMessage('VIDEO_PLAYER_PAUSE'),\n\tReplay: Loc.getMessage('VIDEO_PLAYER_REPLAY'),\n\t'Current Time': Loc.getMessage('VIDEO_PLAYER_CURRENT_TIME'),\n\tDuration: Loc.getMessage('VIDEO_PLAYER_DURATION'),\n\t'Remaining Time': Loc.getMessage('VIDEO_PLAYER_REMAINING_TIME'),\n\tLoaded: Loc.getMessage('VIDEO_PLAYER_LOADED'),\n\tProgress: Loc.getMessage('VIDEO_PLAYER_PROGRESS'),\n\t'Progress Bar': Loc.getMessage('VIDEO_PLAYER_PROGRESS_BAR'),\n\tFullscreen: Loc.getMessage('VIDEO_PLAYER_FULLSCREEN'),\n\t'Exit Fullscreen': Loc.getMessage('VIDEO_PLAYER_EXIT_FULLSCREEN'),\n\tMute: Loc.getMessage('VIDEO_PLAYER_MUTE'),\n\tUnmute: Loc.getMessage('VIDEO_PLAYER_UNMUTE'),\n\t'Playback Rate': Loc.getMessage('VIDEO_PLAYER_PLAYBACK_RATE'),\n\t'Volume Level': Loc.getMessage('VIDEO_PLAYER_VOLUME_LEVEL'),\n\t'You aborted the media playback': Loc.getMessage('VIDEO_PLAYER_ABORTED_PLAYBACK'),\n\t'A network error caused the media download to fail part-way.': Loc.getMessage('VIDEO_PLAYER_NETWORK_ERROR'),\n\t'The media could not be loaded, either because the server or network failed or because the format is not supported.': Loc.getMessage('VIDEO_PLAYER_FORMAT_NOT_SUPPORTED'),\n\t'The media playback was aborted due to a corruption problem or because the media used features your browser did not support.': Loc.getMessage('VIDEO_PLAYER_PLAYBACK_WAS_ABORTED'),\n\t'No compatible source was found for this media.': Loc.getMessage('VIDEO_PLAYER_NO_COMPATIBLE_SOURCE'),\n\t'The media is encrypted and we do not have the keys to decrypt it.': Loc.getMessage('VIDEO_PLAYER_MEDIA_IS_ENCRYPTED'),\n\t'Play Video': Loc.getMessage('VIDEO_PLAYER_PLAY_VIDEO'),\n\t'Exit Picture-in-Picture': Loc.getMessage('VIDEO_PLAYER_EXIT_PICTURE_IN_PICTURE'),\n\t'Picture-in-Picture': Loc.getMessage('VIDEO_PLAYER_PICTURE_IN_PICTURE'),\n});\n\nexport class Player\n{\n\tinited: boolean = false;\n\tid: string = null;\n\tmuted: boolean = false;\n\thasStarted: boolean = false;\n\tvjsPlayer: boolean = null;\n\tisAudio: boolean = false;\n\n\tconstructor(id, params)\n\t{\n\t\tthis.id = id;\n\t\tthis.#fillParameters(params);\n\n\t\tPlayerManager.addPlayer(this);\n\n\t\tthis.#fireEvent('onCreate');\n\t}\n\n\tisReady(): boolean\n\t{\n\t\t// eslint-disable-next-line no-underscore-dangle\n\t\treturn this.vjsPlayer && this.vjsPlayer.isReady_;\n\t}\n\n\tplay(): void\n\t{\n\t\tthis.setPlayedState();\n\t\tthis.hasStarted = true;\n\t\ttry\n\t\t{\n\t\t\tthis.vjsPlayer.play();\n\t\t}\n\t\tcatch\n\t\t{\n\t\t\t// fail silently\n\t\t}\n\n\t\tthis.#fireEvent('onPlay');\n\t}\n\n\tpause(): void\n\t{\n\t\ttry\n\t\t{\n\t\t\tthis.vjsPlayer.pause();\n\t\t}\n\t\tcatch\n\t\t{\n\t\t\t// fail silently\n\t\t}\n\n\t\tthis.#fireEvent('onPause');\n\t}\n\n\ttoggle(): void\n\t{\n\t\tif (this.isPlaying())\n\t\t{\n\t\t\tthis.pause();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.play();\n\t\t}\n\t}\n\n\tisPlaying(): boolean\n\t{\n\t\tif (this.vjsPlayer)\n\t\t{\n\t\t\treturn this.isReady() && !this.vjsPlayer.paused();\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tisEnded(): boolean\n\t{\n\t\tif (this.vjsPlayer)\n\t\t{\n\t\t\treturn this.vjsPlayer.ended();\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tsetPlayedState(): void\n\t{\n\t\tconst storageHash = this.#getStorageHash();\n\n\t\tconst localStorage = Reflection.getClass('BX.localStorage');\n\t\tif (localStorage)\n\t\t{\n\t\t\tlocalStorage.set(storageHash, 'played', 14 * 24 * 3600);\n\t\t}\n\t}\n\n\tisPlayed(): boolean\n\t{\n\t\tconst storageHash = this.#getStorageHash();\n\t\t/** @type {BX.localStorage} */\n\t\tconst localStorage = Reflection.getClass('BX.localStorage');\n\t\tif (localStorage)\n\t\t{\n\t\t\treturn localStorage.get(storageHash) === 'played';\n\t\t}\n\n\t\treturn true;\n\t}\n\n\t#getStorageHash(): string\n\t{\n\t\tlet storageHash = this.id;\n\t\tif (Type.isArrayFilled(this.params.sources) && this.params.sources[0].src)\n\t\t{\n\t\t\tstorageHash = this.params.sources[0].src;\n\t\t}\n\n\t\treturn `player_${storageHash}`;\n\t}\n\n\tgetElement(): HTMLElement | null\n\t{\n\t\treturn document.getElementById(this.id);\n\t}\n\n\tcreateElement(): HTMLElement | null\n\t{\n\t\tlet node = this.getElement();\n\t\tif (node)\n\t\t{\n\t\t\treturn node;\n\t\t}\n\n\t\tif (!this.id)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tlet tagName = 'video';\n\n\t\tconst classes = ['video-js', 'ui-video-player', 'ui-icon-set__scope'];\n\t\tif (this.isAudio)\n\t\t{\n\t\t\ttagName = 'audio';\n\t\t\tclasses.push('vjs-audio-only-mode');\n\t\t}\n\n\t\tlet className = classes.join(' ');\n\n\t\tif (this.skin)\n\t\t{\n\t\t\tclassName += ` ${this.skin}`;\n\t\t}\n\n\t\tconst attrs = {\n\t\t\tid: this.id,\n\t\t\tclassName,\n\t\t\twidth: this.width,\n\t\t\theight: this.height,\n\t\t\tcontrols: true,\n\t\t};\n\n\t\tif (this.muted)\n\t\t{\n\t\t\tattrs.muted = true;\n\t\t}\n\n\t\tnode = Dom.create(tagName, { attrs });\n\n\t\tif (Type.isArrayFilled(this.params.sources))\n\t\t{\n\t\t\tfor (const source of this.params.sources)\n\t\t\t{\n\t\t\t\tif (!source.src || !source.type)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst sourceTag = Dom.create('source', {\n\t\t\t\t\tattrs: {\n\t\t\t\t\t\tsrc: source.src,\n\t\t\t\t\t\ttype: source.type,\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tDom.append(sourceTag, node);\n\t\t\t}\n\t\t}\n\n\t\treturn node;\n\t}\n\n\t#fillParameters(options: JsonObject)\n\t{\n\t\tconst defaults = this.#getDefaultOptions();\n\t\tconst params = Type.isPlainObject(options) ? { ...defaults, ...options } : defaults;\n\t\tif (Type.isArrayFilled(params.techOrder))\n\t\t{\n\t\t\t// Compatibility\n\t\t\tparams.techOrder = params.techOrder.filter((tech: string) => tech !== 'flash');\n\t\t}\n\n\t\tthis.autostart = params.autostart || false;\n\n\t\tif (params.playbackRate)\n\t\t{\n\t\t\tparams.playbackRate = parseFloat(params.playbackRate);\n\t\t\tif (params.playbackRate !== 1)\n\t\t\t{\n\t\t\t\tif (params.playbackRate <= 0)\n\t\t\t\t{\n\t\t\t\t\tparams.playbackRate = 1;\n\t\t\t\t}\n\n\t\t\t\tif (params.playbackRate > 3)\n\t\t\t\t{\n\t\t\t\t\tparams.playbackRate = 3;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (params.playbackRate !== 1)\n\t\t\t{\n\t\t\t\tthis.playbackRate = params.playbackRate;\n\t\t\t}\n\t\t}\n\n\t\tthis.volume = params.volume || 0.8;\n\t\tthis.startTime = params.startTime || 0;\n\t\tthis.onInit = params.onInit;\n\t\tthis.lazyload = params.lazyload;\n\t\tthis.skin = params.skin || '';\n\t\tthis.isAudio = params.isAudio || false;\n\n\t\tif (this.isAudio)\n\t\t{\n\t\t\tparams.width = params.width || 400;\n\t\t\tparams.height = params.height || 30;\n\t\t\tparams.audioOnlyMode = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparams.width = Math.max(params.width || 560, 400);\n\t\t\tparams.height = Math.max(params.height || 315, 130);\n\t\t}\n\n\t\tthis.width = params.width;\n\t\tthis.height = params.height;\n\t\tthis.duration = params.duration || null;\n\t\tthis.muted = params.muted || false;\n\n\t\tthis.params = params;\n\t\tthis.active = this.isPlayed();\n\t}\n\n\t#getDefaultOptions(): JsonObject\n\t{\n\t\treturn {\n\t\t\tcontrols: true,\n\t\t\tplaybackRates: [0.5, 1, 1.25, 1.5, 1.75, 2],\n\t\t\tlanguage: 'video-player',\n\t\t\tuserActions: {\n\t\t\t\tclick: this.#handleClick.bind(this),\n\t\t\t\thotkeys: this.#handleKeyDown.bind(this),\n\t\t\t},\n\t\t};\n\t}\n\n\tsetSource(source): void\n\t{\n\t\tif (!source)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.vjsPlayer.src(source);\n\t\tthis.#fireEvent('onSetSource');\n\t}\n\n\tgetSource(): string\n\t{\n\t\treturn this.vjsPlayer.src();\n\t}\n\n\tinit(): void\n\t{\n\t\tif (this.vjsPlayer !== null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#fireEvent('onBeforeInit');\n\n\t\tif (videojs.players[this.id])\n\t\t{\n\t\t\tvideojs.players[this.id].dispose();\n\t\t}\n\n\t\tthis.vjsPlayer = videojs(this.id, this.params);\n\n\t\tif (this.isAudio)\n\t\t{\n\t\t\tthis.#hideAudioControls();\n\t\t}\n\n\t\tthis.vjsPlayer.on('fullscreenchange', () => {\n\t\t\tthis.vjsPlayer.focus();\n\t\t});\n\n\t\tif (this.duration > 0)\n\t\t{\n\t\t\tthis.vjsPlayer.one('loadedmetadata', () => {\n\t\t\t\tthis.vjsPlayer.duration(this.duration);\n\t\t\t});\n\t\t}\n\n\t\tthis.vjsPlayer.ready(() => {\n\t\t\tconst controlBar = this.vjsPlayer.getChild('ControlBar');\n\t\t\tconst playbackButton = controlBar.getChild('PlaybackRateMenuButton');\n\t\t\tif (playbackButton)\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line no-underscore-dangle\n\t\t\t\tvideojs.off(playbackButton.menuButton_.el(), 'mouseenter');\n\t\t\t\tvideojs.off(playbackButton.el(), 'mouseleave');\n\t\t\t}\n\n\t\t\tthis.vjsPlayer.volume(this.volume);\n\t\t\tthis.vjsPlayer.one('play', this.#handlePlayOnce.bind(this));\n\n\t\t\tthis.inited = true;\n\t\t\tif (Type.isFunction(this.onInit))\n\t\t\t{\n\t\t\t\tthis.onInit(this);\n\t\t\t}\n\n\t\t\tthis.#fireEvent('onAfterInit');\n\t\t\tthis.#proxyEvents();\n\n\t\t\tif (this.autostart && !this.lazyload)\n\t\t\t{\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (!this.hasStarted)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.play();\n\t\t\t\t\t}\n\t\t\t\t}, 200);\n\t\t\t}\n\t\t});\n\t}\n\n\tgetEventList(): Array<string>\n\t{\n\t\treturn [\n\t\t\t'Player:onBeforeInit',\n\t\t\t'Player:onAfterInit',\n\t\t\t'Player:onCreate',\n\t\t\t'Player:onSetSource',\n\t\t\t'Player:onKeyDown',\n\t\t\t'Player:onPlay',\n\t\t\t'Player:onPause',\n\t\t\t'Player:onClick',\n\t\t\t'Player:onError',\n\t\t\t'Player:onEnded',\n\t\t];\n\t}\n\n\tmute(mute: boolean | undefined): boolean\n\t{\n\t\treturn this.vjsPlayer?.muted(mute);\n\t}\n\n\tisMuted(): boolean\n\t{\n\t\treturn this.vjsPlayer?.muted();\n\t}\n\n\tfocus(): void\n\t{\n\t\tthis.vjsPlayer?.focus();\n\t}\n\n\tmoveBackward(skipTime: number): void\n\t{\n\t\tconst currentVideoTime = this.vjsPlayer.currentTime();\n\t\tconst liveTracker = this.vjsPlayer.liveTracker;\n\n\t\tconst seekableStart = liveTracker && liveTracker.isLive() && liveTracker.seekableStart();\n\t\tlet newTime = 0;\n\n\t\tif (seekableStart && (currentVideoTime - skipTime <= seekableStart))\n\t\t{\n\t\t\tnewTime = seekableStart;\n\t\t}\n\t\telse if (currentVideoTime >= skipTime)\n\t\t{\n\t\t\tnewTime = currentVideoTime - skipTime;\n\t\t}\n\n\t\tthis.vjsPlayer.currentTime(newTime);\n\t}\n\n\tmoveForward(skipTime: number): void\n\t{\n\t\tif (!Type.isNumber(this.vjsPlayer.duration()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentVideoTime = this.vjsPlayer.currentTime();\n\t\tconst liveTracker = this.vjsPlayer.liveTracker;\n\t\tconst duration = (liveTracker && liveTracker.isLive()) ? liveTracker.seekableEnd() : this.vjsPlayer.duration();\n\t\tconst newTime = currentVideoTime + skipTime <= duration ? currentVideoTime + skipTime : duration;\n\n\t\tthis.vjsPlayer.currentTime(newTime);\n\t}\n\n\tincreasePlaybackRate(): void\n\t{\n\t\tconst playbackRates: Number[] = this.vjsPlayer.playbackRates();\n\t\tconst currentPlayback = this.vjsPlayer.playbackRate();\n\n\t\tconst nextPlayback = playbackRates.find((value) => {\n\t\t\treturn value > currentPlayback;\n\t\t});\n\n\t\tif (nextPlayback)\n\t\t{\n\t\t\tthis.vjsPlayer.playbackRate(nextPlayback);\n\t\t}\n\t}\n\n\tdecreasePlaybackRate(): void\n\t{\n\t\tconst playbackRates = [...this.vjsPlayer.playbackRates()].reverse();\n\t\tconst currentPlayback = this.vjsPlayer.playbackRate();\n\n\t\tconst prevPlayback = playbackRates.find((value) => {\n\t\t\treturn value < currentPlayback;\n\t\t});\n\n\t\tif (prevPlayback)\n\t\t{\n\t\t\tthis.vjsPlayer.playbackRate(prevPlayback);\n\t\t}\n\t}\n\n\t#hideAudioControls(): void\n\t{\n\t\tthis.vjsPlayer.removeChild('BigPlayButton');\n\t\tthis.vjsPlayer.removeChild('TextTrackSettings');\n\t\tthis.vjsPlayer.removeChild('PosterImage');\n\t\tthis.vjsPlayer.controlBar.removeChild('FullscreenToggle');\n\t\tthis.vjsPlayer.controlBar.removeChild('PictureInPictureToggle');\n\t\tthis.vjsPlayer.controlBar.removeChild('ChaptersButton');\n\t\tthis.vjsPlayer.controlBar.removeChild('DescriptionsButton');\n\n\t\tif (this.skin === 'vjs-audio-wave-skin' || this.skin === 'vjs-viewer-audio-player-skin')\n\t\t{\n\t\t\tthis.vjsPlayer.removeChild('VolumePanel');\n\t\t\tthis.vjsPlayer.controlBar.removeChild('VolumePanel');\n\t\t\tthis.vjsPlayer.controlBar.removeChild('CurrentTimeDisplay');\n\t\t\tthis.vjsPlayer.controlBar.removeChild('PlaybackRateMenuButton');\n\t\t}\n\t}\n\n\t#handlePlayOnce(): void\n\t{\n\t\tif (this.playbackRate !== 1)\n\t\t{\n\t\t\tthis.vjsPlayer.playbackRate(this.playbackRate);\n\t\t}\n\n\t\tif (this.volume)\n\t\t{\n\t\t\tthis.vjsPlayer.volume(this.volume);\n\t\t}\n\n\t\tif (this.startTime > 0)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tthis.vjsPlayer.currentTime(this.startTime);\n\t\t\t}\n\t\t\tcatch\n\t\t\t{\n\t\t\t\t// Fail silently\n\t\t\t}\n\t\t}\n\n\t\tthis.vjsPlayer.on('volumechange', () => {\n\t\t\tthis.active = true;\n\t\t});\n\t}\n\n\t#handleClick(event: MouseEvent): void\n\t{\n\t\tthis.toggle();\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t}\n\n\t#handleKeyDown(event: KeyboardEvent): void\n\t{\n\t\tswitch (event.code)\n\t\t{\n\t\t\tcase 'KeyK':\n\t\t\tcase 'Space':\n\t\t\t{\n\t\t\t\tthis.toggle();\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'KeyF':\n\t\t\t{\n\t\t\t\tif (!this.isAudio)\n\t\t\t\t{\n\t\t\t\t\tif (this.vjsPlayer.isFullscreen())\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.vjsPlayer.exitFullscreen();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.vjsPlayer.requestFullscreen();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'KeyJ':\n\t\t\t{\n\t\t\t\tthis.moveBackward(10);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'KeyL':\n\t\t\t{\n\t\t\t\tthis.moveForward(10);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'ArrowLeft':\n\t\t\t{\n\t\t\t\tthis.moveBackward(5);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'ArrowRight':\n\t\t\t{\n\t\t\t\tthis.moveForward(5);\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'KeyM':\n\t\t\t{\n\t\t\t\tif (this.isMuted())\n\t\t\t\t{\n\t\t\t\t\tthis.mute(false);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.mute(true);\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'Comma':\n\t\t\t{\n\t\t\t\tthis.decreasePlaybackRate();\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tcase 'Period':\n\t\t\t{\n\t\t\t\tthis.increasePlaybackRate();\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tdefault: {\n\t\t\t\t// nothing\n\t\t\t}\n\t\t}\n\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tthis.#fireEvent('onKeyDown');\n\t}\n\n\t#fireEvent(eventName: string): void\n\t{\n\t\tif (Type.isStringFilled(eventName))\n\t\t{\n\t\t\tconst fullName = `Player:${eventName}`;\n\n\t\t\tEvent.EventEmitter.emit(this, fullName, new BaseEvent({ compatData: [this, fullName] }));\n\t\t}\n\t}\n\n\t#proxyEvents()\n\t{\n\t\tthis.vjsPlayer.on('play', () => {\n\t\t\tthis.#fireEvent('onPlay');\n\t\t\tthis.hasStarted = true;\n\t\t});\n\n\t\tthis.vjsPlayer.on('pause', () => {\n\t\t\tthis.#fireEvent('onPause');\n\t\t});\n\n\t\tthis.vjsPlayer.on('click', () => {\n\t\t\tthis.active = true;\n\t\t\tthis.#fireEvent('onClick');\n\t\t});\n\n\t\tthis.vjsPlayer.on('ended', () => {\n\t\t\tthis.#fireEvent('onEnded');\n\t\t});\n\n\t\tthis.vjsPlayer.on('error', () => {\n\t\t\tthis.#fireEvent('onError');\n\t\t});\n\t}\n}\n","import { Reflection } from 'main.core';\nimport { Player } from './player';\nimport { PlayerManager } from './player-manager';\n\nimport './css/player.css';\nimport './css/audio-wave-skin.css';\n\n// compatibility\nconst filemanNS = Reflection.namespace('BX.Fileman');\nfilemanNS.Player = Player;\nfilemanNS.PlayerManager = PlayerManager;\n\nexport {\n\tPlayer,\n\tPlayerManager,\n};\n"],"names":["PlayerManager","addPlayer","player","push","autostart","lazyload","getElementCoords","id","VISIBLE_OFFSET","box","document","getElementById","getBoundingClientRect","elementHeight","bottom","top","elementWidth","right","left","window","pageYOffset","pageXOffset","originTop","originLeft","originBottom","originRight","isVisibleOnScreen","screens","visible","coords","clientHeight","documentElement","windowTop","scrollTop","windowBottom","numberOfScreens","parseInt","topVisible","bottomVisible","onScreen","playerElement","playerCenterX","playerCenterY","currentPlayerCenterElement","elementFromPoint","parentNode","getPlayerById","Type","isStringFilled","Event","ready","bind","Runtime","throttle","setTimeout","sliderManager","Reflection","getClass","currentSlider","getSliderByWindow","EventEmitter","subscribe","forEach","pause","events","getEventList","eventName","emit","BaseEvent","compatData","length","topVisiblePlayer","isAnyPlaying","players","index","entries","splice","inited","init","active","isEnded","isPlaying","isReady","mute","subscribeOnce","event","play","videojs","hook","videoEl","options","Dom","addClass","tagName","toLowerCase","addLanguage","Play","Loc","getMessage","Pause","Replay","Duration","Loaded","Progress","Fullscreen","Mute","Unmute","Player","constructor","params","muted","hasStarted","vjsPlayer","isAudio","isReady_","setPlayedState","toggle","paused","ended","storageHash","localStorage","set","isPlayed","get","getElement","createElement","node","classes","className","join","skin","attrs","width","height","controls","create","isArrayFilled","sources","source","src","type","sourceTag","append","setSource","getSource","dispose","on","focus","duration","one","controlBar","getChild","playbackButton","off","menuButton_","el","volume","isFunction","onInit","isMuted","moveBackward","skipTime","currentVideoTime","currentTime","liveTracker","seekableStart","isLive","newTime","moveForward","isNumber","seekableEnd","increasePlaybackRate","playbackRates","currentPlayback","playbackRate","nextPlayback","find","value","decreasePlaybackRate","reverse","prevPlayback","defaults","isPlainObject","techOrder","filter","tech","parseFloat","startTime","audioOnlyMode","Math","max","language","userActions","click","hotkeys","removeChild","preventDefault","stopPropagation","code","isFullscreen","exitFullscreen","requestFullscreen","fullName","filemanNS","namespace"],"mappings":"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"}