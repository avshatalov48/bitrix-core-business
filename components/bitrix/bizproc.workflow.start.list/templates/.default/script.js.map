{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import { Reflection, Type, Event, Text, Dom, Tag, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Alert, AlertColor } from 'ui.alerts';\nimport { Starter } from 'bizproc.workflow.starter';\n\nimport 'sidepanel';\n\nconst namespace = Reflection.namespace('BX.Bizproc.Component');\n\nclass WorkflowStartList\n{\n\tgridId;\n\tcreateTemplateButton;\n\terrorsContainerDiv;\n\n\t#signedDocumentType: string;\n\t#signedDocumentId: string;\n\t#counters: Map = new Map();\n\n\t#canEdit: boolean;\n\t#bizprocEditorUrl: string;\n\n\tpopupHint;\n\thintTimeout;\n\n\tconstructor(options)\n\t{\n\t\tif (!Type.isPlainObject(options))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.gridId = options.gridId;\n\t\tthis.createTemplateButton = options.createTemplateButton;\n\t\tthis.errorsContainerDiv = options.errorsContainerDiv;\n\t\tthis.#canEdit = options.canEdit;\n\t\tthis.#bizprocEditorUrl = options.bizprocEditorUrl;\n\n\t\tif (Type.isStringFilled(options.signedDocumentType))\n\t\t{\n\t\t\tthis.#signedDocumentType = options.signedDocumentType;\n\t\t}\n\n\t\tif (Type.isStringFilled(options.signedDocumentId))\n\t\t{\n\t\t\tthis.#signedDocumentId = options.signedDocumentId;\n\t\t}\n\t}\n\n\tinit()\n\t{\n\t\tBX.UI.Hint.init(document);\n\n\t\tif (this.getGrid())\n\t\t{\n\t\t\tBX.Bizproc.Component.WorkflowStartList.colorPinnedRows(this.getGrid());\n\t\t}\n\n\t\tEventEmitter.subscribe('Grid::updated', this.#onAfterGridUpdated.bind(this));\n\t}\n\n\teditTemplate(event, templateId): void\n\t{\n\t\tif (!this.#canEdit)\n\t\t{\n\t\t\tthis.showNoPermissionsHint(event.target);\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.#bizprocEditorUrl.length === 0)\n\t\t{\n\t\t\tthis.showNoEditorHint(event.target);\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.openBizprocEditor(templateId);\n\t}\n\n\tshowAngleHint(node, text)\n\t{\n\t\tif (this.hintTimeout)\n\t\t{\n\t\t\tclearTimeout(this.hintTimeout);\n\t\t}\n\n\t\tthis.popupHint = BX.UI.Hint.createInstance({\n\t\t\tpopupParameters: {\n\t\t\t\twidth: 334,\n\t\t\t\theight: 104,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tangle: {\n\t\t\t\t\toffset: Dom.getPosition(node).width / 2,\n\t\t\t\t},\n\t\t\t\tbindOptions: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tthis.popupHint.close = function()\n\t\t{\n\t\t\tthis.hide();\n\t\t};\n\t\tthis.popupHint.show(node, text);\n\t\tthis.timeout = setTimeout(this.hideHint.bind(this), 5000);\n\t}\n\n\thideHint()\n\t{\n\t\tif (this.popupHint)\n\t\t{\n\t\t\tthis.popupHint.close();\n\t\t}\n\t\tthis.popupHint = null;\n\t}\n\n\tshowNoPermissionsHint(node)\n\t{\n\t\tthis.showAngleHint(node, Loc.getMessage('BIZPROC_CMP_WORKKFLOW_START_LIST_START_RIGHTS_ERROR'));\n\t}\n\n\tshowNoEditorHint(node): void\n\t{\n\t\tthis.showAngleHint(node, Loc.getMessage('BIZPROC_CMP_WORKKFLOW_START_LIST_START_MODULE_ERROR'));\n\t}\n\n\tstatic changePin(templateId, gridId, event) {\n\t\tconst eventData = event.getData();\n\t\tconst button = eventData.button;\n\n\t\tif (Dom.hasClass(button, BX.Grid.CellActionState.ACTIVE))\n\t\t{\n\t\t\tBX.Bizproc.Component.WorkflowStartList.action('unpin', templateId, gridId);\n\t\t\tDom.removeClass(button, BX.Grid.CellActionState.ACTIVE);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.Bizproc.Component.WorkflowStartList.action('pin', templateId, gridId);\n\t\t\tDom.addClass(button, BX.Grid.CellActionState.ACTIVE);\n\t\t}\n\n\t\tconst grid = BX.Main.gridManager.getInstanceById(gridId);\n\t\tif (grid)\n\t\t{\n\t\t\tBX.Bizproc.Component.WorkflowStartList.colorPinnedRows(grid);\n\t\t}\n\t}\n\n\tstatic action(action, templateId, gridId): void\n\t{\n\t\tconst component = 'bitrix:bizproc.workflow.start.list';\n\n\t\tBX.ajax.runComponentAction(component, action, {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\ttemplateId,\n\t\t\t},\n\t\t}).then(\n\t\t\t(response) => {\n\t\t\t\tconst grid = BX.Main.gridManager.getInstanceById(gridId);\n\t\t\t\tif (grid)\n\t\t\t\t{\n\t\t\t\t\tgrid.reload();\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t}\n\n\tshowErrors(errors: Array<{message: string}>)\n\t{\n\t\tthis.errorsContainerDiv.style.margin = '10px';\n\n\t\terrors.forEach((error) => {\n\t\t\tconst alert = new Alert({\n\t\t\t\ttext: error.message,\n\t\t\t\tcolor: AlertColor.DANGER,\n\t\t\t\tcloseBtn: true,\n\t\t\t\tanimated: true,\n\t\t\t});\n\n\t\t\talert.renderTo(this.errorsContainerDiv);\n\t\t});\n\t}\n\n\treloadGrid()\n\t{\n\t\tconst grid = this.getGrid();\n\t\tif (grid)\n\t\t{\n\t\t\tgrid.reload();\n\t\t}\n\t}\n\n\tgetGrid(): ?BX.Main.grid\n\t{\n\t\tif (this.gridId)\n\t\t{\n\t\t\treturn BX.Main.gridManager && BX.Main.gridManager.getInstanceById(this.gridId);\n\t\t}\n\n\t\treturn null;\n\t}\n\n\tstartWorkflow(event: PointerEvent, templateId: number)\n\t{\n\t\tevent.preventDefault();\n\n\t\tconst id = Text.toNumber(templateId);\n\t\tif (id <= 0 || !this.#signedDocumentType || !this.#signedDocumentId)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tconst afterSuccessStart = () => {\n\t\t\tconst slider = BX.SidePanel.Instance.getSliderByWindow(window);\n\t\t\tif (slider)\n\t\t\t{\n\t\t\t\tslider.close();\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!this.#counters.has(templateId))\n\t\t\t{\n\t\t\t\tthis.#counters.set(templateId, 0);\n\t\t\t}\n\t\t\tthis.#counters.set(templateId, this.#counters.get(templateId) + 1);\n\n\t\t\tthis.getGrid()?.reload();\n\t\t};\n\n\t\tStarter.singleStart({\n\t\t\tsignedDocumentId: this.#signedDocumentId,\n\t\t\tsignedDocumentType: this.#signedDocumentType,\n\t\t\ttemplateId: id,\n\t\t}, afterSuccessStart);\n\t}\n\n\t#onAfterGridUpdated()\n\t{\n\t\tif (this.getGrid())\n\t\t{\n\t\t\tBX.UI.Hint.init(this.getGrid().getContainer());\n\t\t\tBX.Bizproc.Component.WorkflowStartList.colorPinnedRows(this.getGrid());\n\t\t}\n\n\t\tthis.#counters.forEach((value, key) => {\n\t\t\tconst counter = document.querySelector(`[data-role=\"template-${key}-counter\"]`);\n\t\t\tif (Type.isElementNode(counter))\n\t\t\t{\n\t\t\t\tDom.clean(counter);\n\t\t\t\tDom.append(this.#renderStartedByMeNow(key), counter);\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic colorPinnedRows(grid) {\n\t\tgrid.getRows().getRows().forEach((row) => {\n\t\t\tconst node = row.getNode();\n\t\t\tif (Type.isElementNode(node.querySelector('.main-grid-cell-content-action-pin.main-grid-cell-content-action-active')))\n\t\t\t{\n\t\t\t\tDom.addClass(node, 'bizproc-workflow-start-list-item-pinned');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.removeClass(node, 'bizproc-workflow-start-list-item-pinned');\n\t\t\t}\n\t\t});\n\t}\n\n\t#renderStartedByMeNow(templateId: number): HTMLElement\n\t{\n\t\tlet message = Text.encode(Loc.getMessage(\n\t\t\t'BIZPROC_CMP_TMP_WORKKFLOW_START_LIST_START_COUNTER',\n\t\t\t{\n\t\t\t\t'#COUNTER#': this.#counters.get(templateId),\n\t\t\t},\n\t\t));\n\n\t\tmessage = message.replace('[bold]', '<span class=\"bizproc-workflow-start-list-column-start-counter\">');\n\t\tmessage = message.replace('[/bold]', '</span>');\n\n\t\treturn Tag.render`<div class=\"ui-typography-text-xs\">${message}</div>`;\n\t}\n\n\topenBizprocEditor(templateId)\n\t{\n\t\ttop.window.location.href = this.#bizprocEditorUrl.replace('#ID#', templateId);\n\t}\n}\n\nnamespace.WorkflowStartList = WorkflowStartList;\n"],"names":["namespace","Reflection","WorkflowStartList","options","Map","Type","isPlainObject","gridId","createTemplateButton","errorsContainerDiv","canEdit","bizprocEditorUrl","isStringFilled","signedDocumentType","signedDocumentId","BX","UI","Hint","init","document","getGrid","Bizproc","Component","colorPinnedRows","EventEmitter","subscribe","bind","event","templateId","showNoPermissionsHint","target","length","showNoEditorHint","openBizprocEditor","node","text","hintTimeout","clearTimeout","popupHint","createInstance","popupParameters","width","height","closeByEsc","autoHide","angle","offset","Dom","getPosition","bindOptions","position","close","hide","show","timeout","setTimeout","hideHint","showAngleHint","Loc","getMessage","errors","style","margin","forEach","error","alert","Alert","message","color","AlertColor","DANGER","closeBtn","animated","renderTo","grid","reload","Main","gridManager","getInstanceById","preventDefault","id","Text","toNumber","afterSuccessStart","slider","SidePanel","Instance","getSliderByWindow","window","has","set","get","Starter","singleStart","top","location","href","replace","eventData","getData","button","hasClass","Grid","CellActionState","ACTIVE","action","removeClass","addClass","component","ajax","runComponentAction","mode","data","then","response","getRows","row","getNode","isElementNode","querySelector","getContainer","value","key","counter","clean","append","encode","Tag","render"],"mappings":";;;;;;;;;AAAA,CAOA,IAAMA,SAAS,GAAGC,oBAAU,CAACD,SAAS,CAAC,sBAAsB,CAAC;CAAC;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA;CAAA,IAEzDE,iBAAiB;GAgBtB,2BAAYC,OAAO,EACnB;KAAA;KAAA;KAAA;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OATiB,IAAIC,GAAG;;KAAE;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAUzB,IAAI,CAACC,cAAI,CAACC,aAAa,CAACH,OAAO,CAAC,EAChC;OACC;;KAGD,IAAI,CAACI,MAAM,GAAGJ,OAAO,CAACI,MAAM;KAC5B,IAAI,CAACC,oBAAoB,GAAGL,OAAO,CAACK,oBAAoB;KACxD,IAAI,CAACC,kBAAkB,GAAGN,OAAO,CAACM,kBAAkB;KACpD,sCAAI,YAAYN,OAAO,CAACO,OAAO;KAC/B,sCAAI,qBAAqBP,OAAO,CAACQ,gBAAgB;KAEjD,IAAIN,cAAI,CAACO,cAAc,CAACT,OAAO,CAACU,kBAAkB,CAAC,EACnD;OACC,sCAAI,uBAAuBV,OAAO,CAACU,kBAAkB;;KAGtD,IAAIR,cAAI,CAACO,cAAc,CAACT,OAAO,CAACW,gBAAgB,CAAC,EACjD;OACC,sCAAI,qBAAqBX,OAAO,CAACW,gBAAgB;;;GAElD;KAAA;KAAA,uBAGD;OACCC,EAAE,CAACC,EAAE,CAACC,IAAI,CAACC,IAAI,CAACC,QAAQ,CAAC;OAEzB,IAAI,IAAI,CAACC,OAAO,EAAE,EAClB;SACCL,EAAE,CAACM,OAAO,CAACC,SAAS,CAACpB,iBAAiB,CAACqB,eAAe,CAAC,IAAI,CAACH,OAAO,EAAE,CAAC;;OAGvEI,6BAAY,CAACC,SAAS,CAAC,eAAe,EAAE,2BAAI,6CAAqBC,IAAI,CAAC,IAAI,CAAC,CAAC;;;KAC5E;KAAA,6BAEYC,KAAK,EAAEC,UAAU,EAC9B;OACC,IAAI,mCAAC,IAAI,WAAS,EAClB;SACC,IAAI,CAACC,qBAAqB,CAACF,KAAK,CAACG,MAAM,CAAC;SAExC;;OAGD,IAAI,sCAAI,qBAAmBC,MAAM,KAAK,CAAC,EACvC;SACC,IAAI,CAACC,gBAAgB,CAACL,KAAK,CAACG,MAAM,CAAC;SAEnC;;OAGD,IAAI,CAACG,iBAAiB,CAACL,UAAU,CAAC;;;KAClC;KAAA,8BAEaM,IAAI,EAAEC,IAAI,EACxB;OACC,IAAI,IAAI,CAACC,WAAW,EACpB;SACCC,YAAY,CAAC,IAAI,CAACD,WAAW,CAAC;;OAG/B,IAAI,CAACE,SAAS,GAAGvB,EAAE,CAACC,EAAE,CAACC,IAAI,CAACsB,cAAc,CAAC;SAC1CC,eAAe,EAAE;WAChBC,KAAK,EAAE,GAAG;WACVC,MAAM,EAAE,GAAG;WACXC,UAAU,EAAE,IAAI;WAChBC,QAAQ,EAAE,IAAI;WACdC,KAAK,EAAE;aACNC,MAAM,EAAEC,aAAG,CAACC,WAAW,CAACd,IAAI,CAAC,CAACO,KAAK,GAAG;YACtC;WACDQ,WAAW,EAAE;aACZC,QAAQ,EAAE;;;QAGZ,CAAC;OAEF,IAAI,CAACZ,SAAS,CAACa,KAAK,GAAG,YACvB;SACC,IAAI,CAACC,IAAI,EAAE;QACX;OACD,IAAI,CAACd,SAAS,CAACe,IAAI,CAACnB,IAAI,EAAEC,IAAI,CAAC;OAC/B,IAAI,CAACmB,OAAO,GAAGC,UAAU,CAAC,IAAI,CAACC,QAAQ,CAAC9B,IAAI,CAAC,IAAI,CAAC,EAAE,IAAI,CAAC;;;KACzD;KAAA,2BAGD;OACC,IAAI,IAAI,CAACY,SAAS,EAClB;SACC,IAAI,CAACA,SAAS,CAACa,KAAK,EAAE;;OAEvB,IAAI,CAACb,SAAS,GAAG,IAAI;;;KACrB;KAAA,sCAEqBJ,IAAI,EAC1B;OACC,IAAI,CAACuB,aAAa,CAACvB,IAAI,EAAEwB,aAAG,CAACC,UAAU,CAAC,qDAAqD,CAAC,CAAC;;;KAC/F;KAAA,iCAEgBzB,IAAI,EACrB;OACC,IAAI,CAACuB,aAAa,CAACvB,IAAI,EAAEwB,aAAG,CAACC,UAAU,CAAC,qDAAqD,CAAC,CAAC;;;KAC/F;KAAA,2BA4CUC,MAAgC,EAC3C;OAAA;OACC,IAAI,CAACnD,kBAAkB,CAACoD,KAAK,CAACC,MAAM,GAAG,MAAM;OAE7CF,MAAM,CAACG,OAAO,CAAC,UAACC,KAAK,EAAK;SACzB,IAAMC,KAAK,GAAG,IAAIC,eAAK,CAAC;WACvB/B,IAAI,EAAE6B,KAAK,CAACG,OAAO;WACnBC,KAAK,EAAEC,oBAAU,CAACC,MAAM;WACxBC,QAAQ,EAAE,IAAI;WACdC,QAAQ,EAAE;UACV,CAAC;SAEFP,KAAK,CAACQ,QAAQ,CAAC,KAAI,CAAChE,kBAAkB,CAAC;QACvC,CAAC;;;KACF;KAAA,6BAGD;OACC,IAAMiE,IAAI,GAAG,IAAI,CAACtD,OAAO,EAAE;OAC3B,IAAIsD,IAAI,EACR;SACCA,IAAI,CAACC,MAAM,EAAE;;;;KAEd;KAAA,0BAGD;OACC,IAAI,IAAI,CAACpE,MAAM,EACf;SACC,OAAOQ,EAAE,CAAC6D,IAAI,CAACC,WAAW,IAAI9D,EAAE,CAAC6D,IAAI,CAACC,WAAW,CAACC,eAAe,CAAC,IAAI,CAACvE,MAAM,CAAC;;OAG/E,OAAO,IAAI;;;KACX;KAAA,8BAEaoB,KAAmB,EAAEC,UAAkB,EACrD;OAAA;OACCD,KAAK,CAACoD,cAAc,EAAE;OAEtB,IAAMC,EAAE,GAAGC,cAAI,CAACC,QAAQ,CAACtD,UAAU,CAAC;OACpC,IAAIoD,EAAE,IAAI,CAAC,IAAI,mCAAC,IAAI,sBAAoB,IAAI,mCAAC,IAAI,oBAAkB,EACnE;SACC;;OAGD,IAAMG,iBAAiB,GAAG,SAApBA,iBAAiB,GAAS;SAAA;SAC/B,IAAMC,MAAM,GAAGrE,EAAE,CAACsE,SAAS,CAACC,QAAQ,CAACC,iBAAiB,CAACC,MAAM,CAAC;SAC9D,IAAIJ,MAAM,EACV;WACCA,MAAM,CAACjC,KAAK,EAAE;WAEd;;SAGD,IAAI,CAAC,wCAAI,aAAWsC,GAAG,CAAC7D,UAAU,CAAC,EACnC;WACC,wCAAI,aAAW8D,GAAG,CAAC9D,UAAU,EAAE,CAAC,CAAC;;SAElC,wCAAI,aAAW8D,GAAG,CAAC9D,UAAU,EAAE,wCAAI,aAAW+D,GAAG,CAAC/D,UAAU,CAAC,GAAG,CAAC,CAAC;SAElE,wBAAI,CAACR,OAAO,EAAE,mDAAd,eAAgBuD,MAAM,EAAE;QACxB;OAEDiB,gCAAO,CAACC,WAAW,CAAC;SACnB/E,gBAAgB,oCAAE,IAAI,oBAAkB;SACxCD,kBAAkB,oCAAE,IAAI,sBAAoB;SAC5Ce,UAAU,EAAEoD;QACZ,EAAEG,iBAAiB,CAAC;;;KACrB;KAAA,kCAiDiBvD,UAAU,EAC5B;OACCkE,GAAG,CAACN,MAAM,CAACO,QAAQ,CAACC,IAAI,GAAG,sCAAI,qBAAmBC,OAAO,CAAC,MAAM,EAAErE,UAAU,CAAC;;;KAC7E;KAAA,0BAlKgBA,UAAU,EAAErB,MAAM,EAAEoB,KAAK,EAAE;OAC3C,IAAMuE,SAAS,GAAGvE,KAAK,CAACwE,OAAO,EAAE;OACjC,IAAMC,MAAM,GAAGF,SAAS,CAACE,MAAM;OAE/B,IAAIrD,aAAG,CAACsD,QAAQ,CAACD,MAAM,EAAErF,EAAE,CAACuF,IAAI,CAACC,eAAe,CAACC,MAAM,CAAC,EACxD;SACCzF,EAAE,CAACM,OAAO,CAACC,SAAS,CAACpB,iBAAiB,CAACuG,MAAM,CAAC,OAAO,EAAE7E,UAAU,EAAErB,MAAM,CAAC;SAC1EwC,aAAG,CAAC2D,WAAW,CAACN,MAAM,EAAErF,EAAE,CAACuF,IAAI,CAACC,eAAe,CAACC,MAAM,CAAC;QACvD,MAED;SACCzF,EAAE,CAACM,OAAO,CAACC,SAAS,CAACpB,iBAAiB,CAACuG,MAAM,CAAC,KAAK,EAAE7E,UAAU,EAAErB,MAAM,CAAC;SACxEwC,aAAG,CAAC4D,QAAQ,CAACP,MAAM,EAAErF,EAAE,CAACuF,IAAI,CAACC,eAAe,CAACC,MAAM,CAAC;;OAGrD,IAAM9B,IAAI,GAAG3D,EAAE,CAAC6D,IAAI,CAACC,WAAW,CAACC,eAAe,CAACvE,MAAM,CAAC;OACxD,IAAImE,IAAI,EACR;SACC3D,EAAE,CAACM,OAAO,CAACC,SAAS,CAACpB,iBAAiB,CAACqB,eAAe,CAACmD,IAAI,CAAC;;;;KAE7D;KAAA,uBAEa+B,OAAM,EAAE7E,UAAU,EAAErB,MAAM,EACxC;OACC,IAAMqG,SAAS,GAAG,oCAAoC;OAEtD7F,EAAE,CAAC8F,IAAI,CAACC,kBAAkB,CAACF,SAAS,EAAEH,OAAM,EAAE;SAC7CM,IAAI,EAAE,OAAO;SACbC,IAAI,EAAE;WACLpF,UAAU,EAAVA;;QAED,CAAC,CAACqF,IAAI,CACN,UAACC,QAAQ,EAAK;SACb,IAAMxC,IAAI,GAAG3D,EAAE,CAAC6D,IAAI,CAACC,WAAW,CAACC,eAAe,CAACvE,MAAM,CAAC;SACxD,IAAImE,IAAI,EACR;WACCA,IAAI,CAACC,MAAM,EAAE;;QAEd,CACD;;;KACD;KAAA,gCA0FsBD,IAAI,EAAE;OAC5BA,IAAI,CAACyC,OAAO,EAAE,CAACA,OAAO,EAAE,CAACpD,OAAO,CAAC,UAACqD,GAAG,EAAK;SACzC,IAAMlF,IAAI,GAAGkF,GAAG,CAACC,OAAO,EAAE;SAC1B,IAAIhH,cAAI,CAACiH,aAAa,CAACpF,IAAI,CAACqF,aAAa,CAAC,yEAAyE,CAAC,CAAC,EACrH;WACCxE,aAAG,CAAC4D,QAAQ,CAACzE,IAAI,EAAE,yCAAyC,CAAC;UAC7D,MAED;WACCa,aAAG,CAAC2D,WAAW,CAACxE,IAAI,EAAE,yCAAyC,CAAC;;QAEjE,CAAC;;;GACF;CAAA;CAAA,gCA7BD;GAAA;GACC,IAAI,IAAI,CAACd,OAAO,EAAE,EAClB;KACCL,EAAE,CAACC,EAAE,CAACC,IAAI,CAACC,IAAI,CAAC,IAAI,CAACE,OAAO,EAAE,CAACoG,YAAY,EAAE,CAAC;KAC9CzG,EAAE,CAACM,OAAO,CAACC,SAAS,CAACpB,iBAAiB,CAACqB,eAAe,CAAC,IAAI,CAACH,OAAO,EAAE,CAAC;;GAGvE,sCAAI,aAAW2C,OAAO,CAAC,UAAC0D,KAAK,EAAEC,GAAG,EAAK;KACtC,IAAMC,OAAO,GAAGxG,QAAQ,CAACoG,aAAa,iCAAyBG,GAAG,iBAAa;KAC/E,IAAIrH,cAAI,CAACiH,aAAa,CAACK,OAAO,CAAC,EAC/B;OACC5E,aAAG,CAAC6E,KAAK,CAACD,OAAO,CAAC;OAClB5E,aAAG,CAAC8E,MAAM,wBAAC,MAAI,sDAAJ,MAAI,EAAuBH,GAAG,GAAGC,OAAO,CAAC;;IAErD,CAAC;CACH;CAAC,gCAgBqB/F,UAAkB,EACxC;GACC,IAAIuC,OAAO,GAAGc,cAAI,CAAC6C,MAAM,CAACpE,aAAG,CAACC,UAAU,CACvC,oDAAoD,EACpD;KACC,WAAW,EAAE,sCAAI,aAAWgC,GAAG,CAAC/D,UAAU;IAC1C,CACD,CAAC;GAEFuC,OAAO,GAAGA,OAAO,CAAC8B,OAAO,CAAC,QAAQ,EAAE,iEAAiE,CAAC;GACtG9B,OAAO,GAAGA,OAAO,CAAC8B,OAAO,CAAC,SAAS,EAAE,SAAS,CAAC;GAE/C,OAAO8B,aAAG,CAACC,MAAM,iIAAsC7D,OAAO;CAC/D;CAQDnE,SAAS,CAACE,iBAAiB,GAAGA,iBAAiB;;;;"}