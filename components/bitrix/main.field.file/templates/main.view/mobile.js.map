{"version":3,"file":"mobile.js","sources":["src/mobile.js"],"sourcesContent":["import {Loc} from 'main.core';\n\nlet\n\tBX = window.BX,\n\tBXMobileApp = window.BXMobileApp;\n\nlet nodeFile = (function ()\n{\n\tlet nodeFile = function (node)\n\t{\n\t\tthis.node = node;\n\t\tthis.click = BX.delegate(this.click, this);\n\t\tthis.callback = BX.delegate(this.callback, this);\n\t\tBX.bind(this.node, \"click\", this.click);\n\n\t\tthis.isImage = (this.node.getAttribute('data-is-image') === 'yes');\n\t};\n\tnodeFile.prototype = {\n\t\tclick: function (e)\n\t\t{\n\t\t\tthis.show();\n\t\t\treturn BX.PreventDefault(e);\n\t\t},\n\t\tshow: function ()\n\t\t{\n\t\t\tconst url = this.node.getAttribute('data-url');\n\t\t\tconst description = this.node.textContent.trim();\n\n\t\t\tif (this.isImage)\n\t\t\t{\n\t\t\t\tBXMobileApp.UI.Photo.show({\n\t\t\t\t\tphotos: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\turl: url,\n\t\t\t\t\t\t\tdescription: description\n\t\t\t\t\t\t}\n\t\t\t\t\t]\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tBXMobileApp.UI.Document.open({\n\t\t\t\t\turl: url,\n\t\t\t\t\tfilename: description\n\t\t\t\t});\n\n\t\t\t}\n\t\t}\n\t};\n\treturn nodeFile;\n})();\n\nwindow.app.exec('enableCaptureKeyboard', true);\n\nBX.Mobile.Field.File = function (params)\n{\n\tthis.init(params);\n};\n\nBX.Mobile.Field.File.prototype = {\n\t__proto__: BX.Mobile.Field.prototype,\n\tbindElement: function (node)\n\t{\n\t\tlet result = null;\n\t\tif (BX(node))\n\t\t{\n\t\t\tresult = new nodeFile(node);\n\t\t}\n\t\treturn result;\n\t}\n};\n"],"names":["BX","window","BXMobileApp","nodeFile","node","click","delegate","callback","bind","isImage","getAttribute","prototype","e","show","PreventDefault","url","description","textContent","trim","UI","Photo","photos","Document","open","filename","app","exec","Mobile","Field","File","params","init","__proto__","bindElement","result"],"mappings":";;;;;;;CAEA,IACCA,EAAE,GAAGC,MAAM,CAACD,EAAE;GACdE,WAAW,GAAGD,MAAM,CAACC,WAAW;CAEjC,IAAIC,QAAQ,GAAI,YAChB;GACC,IAAIA,QAAQ,GAAG,SAAXA,QAAQ,CAAaC,IAAI,EAC7B;KACC,IAAI,CAACA,IAAI,GAAGA,IAAI;KAChB,IAAI,CAACC,KAAK,GAAGL,EAAE,CAACM,QAAQ,CAAC,IAAI,CAACD,KAAK,EAAE,IAAI,CAAC;KAC1C,IAAI,CAACE,QAAQ,GAAGP,EAAE,CAACM,QAAQ,CAAC,IAAI,CAACC,QAAQ,EAAE,IAAI,CAAC;KAChDP,EAAE,CAACQ,IAAI,CAAC,IAAI,CAACJ,IAAI,EAAE,OAAO,EAAE,IAAI,CAACC,KAAK,CAAC;KAEvC,IAAI,CAACI,OAAO,GAAI,IAAI,CAACL,IAAI,CAACM,YAAY,CAAC,eAAe,CAAC,KAAK,KAAM;IAClE;GACDP,QAAQ,CAACQ,SAAS,GAAG;KACpBN,KAAK,EAAE,eAAUO,CAAC,EAClB;OACC,IAAI,CAACC,IAAI,EAAE;OACX,OAAOb,EAAE,CAACc,cAAc,CAACF,CAAC,CAAC;MAC3B;KACDC,IAAI,EAAE,gBACN;OACC,IAAME,GAAG,GAAG,IAAI,CAACX,IAAI,CAACM,YAAY,CAAC,UAAU,CAAC;OAC9C,IAAMM,WAAW,GAAG,IAAI,CAACZ,IAAI,CAACa,WAAW,CAACC,IAAI,EAAE;OAEhD,IAAI,IAAI,CAACT,OAAO,EAChB;SACCP,WAAW,CAACiB,EAAE,CAACC,KAAK,CAACP,IAAI,CAAC;WACzBQ,MAAM,EAAE,CACP;aACCN,GAAG,EAAEA,GAAG;aACRC,WAAW,EAAEA;YACb;UAEF,CAAC;QACF,MAED;SACCd,WAAW,CAACiB,EAAE,CAACG,QAAQ,CAACC,IAAI,CAAC;WAC5BR,GAAG,EAAEA,GAAG;WACRS,QAAQ,EAAER;UACV,CAAC;;;IAIJ;GACD,OAAOb,QAAQ;CAChB,CAAC,EAAG;CAEJF,MAAM,CAACwB,GAAG,CAACC,IAAI,CAAC,uBAAuB,EAAE,IAAI,CAAC;CAE9C1B,EAAE,CAAC2B,MAAM,CAACC,KAAK,CAACC,IAAI,GAAG,UAAUC,MAAM,EACvC;GACC,IAAI,CAACC,IAAI,CAACD,MAAM,CAAC;CAClB,CAAC;CAED9B,EAAE,CAAC2B,MAAM,CAACC,KAAK,CAACC,IAAI,CAAClB,SAAS,GAAG;GAChCqB,SAAS,EAAEhC,EAAE,CAAC2B,MAAM,CAACC,KAAK,CAACjB,SAAS;GACpCsB,WAAW,EAAE,qBAAU7B,IAAI,EAC3B;KACC,IAAI8B,MAAM,GAAG,IAAI;KACjB,IAAIlC,EAAE,CAACI,IAAI,CAAC,EACZ;OACC8B,MAAM,GAAG,IAAI/B,QAAQ,CAACC,IAAI,CAAC;;KAE5B,OAAO8B,MAAM;;CAEf,CAAC;;;;"}