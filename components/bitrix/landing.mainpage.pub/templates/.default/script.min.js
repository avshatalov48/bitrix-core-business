this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};(function(e){"use strict";var t=function(){function e(){babelHelpers.classCallCheck(this,e);document.addEventListener("click",this.onClick.bind(this))}babelHelpers.createClass(e,[{key:"onClick",value:function e(t){var n=t.target;var r=n.getAttribute("href")||n.getAttribute("data-pseudo-url")&&JSON.parse(n.getAttribute("data-pseudo-url")).href;if(!r){var a=n.parentNode;if(a.nodeName==="A"){r=a.getAttribute("href");n=a}else{var i=a.parentNode;if(i.nodeName==="A"){r=i.getAttribute("href");n=i}}}if(n.getAttribute("data-viewer-type")){return}if(r&&r.indexOf("/bitrix/services/main/ajax.php?action=landing.api.diskFile.download")===0){BX.ajax.get(r.replace("landing.api.diskFile.download","landing.api.diskFile.view"),(function(e){if(typeof e==="string"){e=JSON.parse(e)}if(!e.data){return}Object.keys(e.data).map((function(t){n.setAttribute(t,e.data[t])}));n.click()}));t.preventDefault();t.stopPropagation();return false}}}]);return e}();var n=function(){function e(){babelHelpers.classCallCheck(this,e);this.scrollToFirstBlock()}babelHelpers.createClass(e,[{key:"scrollToFirstBlock",value:function e(){var t=document.querySelector(".landing-highlight");if(t){var n=t.parentNode;while(n){if(n.classList.contains("block-wrapper")){window.scrollTo({top:n.offsetTop,behavior:"smooth"});break}n=n.parentNode}}}}]);return e}();var r=function(){function e(){babelHelpers.classCallCheck(this,e);this.removeTimestamp()}babelHelpers.createClass(e,[{key:"removeTimestamp",value:function e(){var t=window.location.toString();t=t.replace(/(ts=[\d]+[&]*)/,"");if(t.slice(-1)==="?"||t.slice(-1)==="&"){t=t.slice(0,-1)}window.history.replaceState({},document.title,t)}}]);return e}();function a(e,t){var n=typeof Symbol!=="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&typeof e.length==="number"){if(n)e=n;var r=0;var a=function e(){};return{s:a,n:function t(){if(r>=e.length)return{done:true};return{done:false,value:e[r++]}},e:function e(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o=true,l=false,s;return{s:function t(){n=n.call(e)},n:function e(){var t=n.next();o=t.done;return t},e:function e(t){l=true;s=t},f:function e(){try{if(!o&&n["return"]!=null)n["return"]()}finally{if(l)throw s}}}}function i(e,t){if(!e)return;if(typeof e==="string")return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor)n=e.constructor.name;if(n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}function o(e,t){if(t==null||t>e.length)t=e.length;for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=function(){function e(){babelHelpers.classCallCheck(this,e);document.addEventListener("click",this.onClick.bind(this))}babelHelpers.createClass(e,[{key:"onClick",value:function e(t){var n=null;var r=t.target;if(r.tagName.toLowerCase()!=="a"){return}while(r){if(r.classList){if(r.classList.contains("workarea-content-paddings")){break}if(r.classList.contains("block-wrapper")){n=r;break}}r=r.parentElement}if(n&&n.classList){var i="";var o=a(n.classList),l;try{for(o.s();!(l=o.n()).done;){var s=l.value;if(s!=="block-wrapper"){i=s;break}}}catch(e){o.e(e)}finally{o.f()}i=i.replace("block-","widget-id_");BX.UI.Analytics.sendData({tool:"landing",category:"vibe",event:"click_on_button",p2:i})}}}]);return e}();var s=function(){function e(){var t=this;babelHelpers.classCallCheck(this,e);var n=setInterval((function(){if(document.readyState==="complete"){t.initPseudoLinks();clearInterval(n)}}),500)}babelHelpers.createClass(e,[{key:"initPseudoLinks",value:function e(){var t=this;var n=[].slice.call(document.querySelectorAll('[data-pseudo-url*="{"]'));if(n.length>0){n.forEach((function(e){var n=e.getAttribute("data-pseudo-url");var r=JSON.parse(n);if(r.href&&r.enabled&&r.href.indexOf("/bitrix/services/main/ajax.php?action=landing.api.diskFile.download")!==0){if(r.target==="_self"||r.target==="_blank"){e.addEventListener("click",(function(e){e.preventDefault();var n=null;try{n=new URL(r.href)}catch(e){console.error(e)}if(n){var a=n.hostname===window.location.hostname;var i=n.searchParams.get("IFRAME")==="Y";if(a&&!i){var o=n.pathname!==window.location.pathname;if(o){BX.addClass(document.body,"landing-page-transition");r.href=n.href;setTimeout((function(){t.openPseudoLinks(r,e)}),400);setTimeout((function(){BX.removeClass(document.body,"landing-page-transition")}),3e3)}}else{t.openPseudoLinks(r,e)}}}))}}}))}}},{key:"openPseudoLinks",value:function e(t,n){if(t.href.indexOf("/bitrix/services/main/ajax.php?action=landing.api.diskFile.download")===0){return}if(t.query){t.href+=t.href.indexOf("?")===-1?"?":"&";t.href+=t.query}if(this.isValidURL(t.href)){top.open(t.href,t.target)}}},{key:"isValidURL",value:function e(t){try{new URL(t);return true}catch(e){return false}}}]);return e}();e.DiskFile=t;e.SearchResult=n;e.TimeStamp=r;e.Analytics=l;e.Pseudolinks=s})(this.BX.Landing.Pub=this.BX.Landing.Pub||{});
//# sourceMappingURL=script.map.js