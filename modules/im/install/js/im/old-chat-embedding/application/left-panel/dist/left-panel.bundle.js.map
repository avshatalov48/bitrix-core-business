{"version":3,"file":"left-panel.bundle.js","sources":["../src/left-panel.js"],"sourcesContent":["import {Core} from 'im.old-chat-embedding.application.core';\nimport {LeftPanel as LeftPanelComponent} from 'im.old-chat-embedding.component.left-panel';\n\ntype LeftPanelApplicationParams = {\n\tnode?: string | HTMLElement,\n\tpreloadedList?: Object\n}\n\nexport class LeftPanelApplication\n{\n\tparams: LeftPanelApplicationParams;\n\tinited: boolean = false;\n\tinitPromise: Promise = null;\n\tinitPromiseResolver: Function = null;\n\trootNode: string | HTMLElement = null;\n\tvueInstance: Object = null;\n\tcontroller: Object = null;\n\tbitrixVue: Object = null;\n\n\t#applicationName = 'LeftPanel';\n\n\tconstructor(params: LeftPanelApplicationParams = {})\n\t{\n\t\tthis.initPromise = new Promise((resolve) => {\n\t\t\tthis.initPromiseResolver = resolve;\n\t\t});\n\n\t\tthis.params = params;\n\n\t\tthis.rootNode = this.params.node || document.createElement('div');\n\n\t\tthis.initCore().then(() => this.initComplete());\n\t}\n\n\tinitCore()\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tCore.ready().then(controller => {\n\t\t\t\tthis.controller = controller;\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\t}\n\n\tinitComponent(node)\n\t{\n\t\tif (this.vueInstance)\n\t\t{\n\t\t\tthis.bitrixVue.unmount();\n\t\t\tthis.vueInstance = null;\n\t\t}\n\n\t\treturn this.controller.createVue(this, {\n\t\t\tname: this.#applicationName,\n\t\t\tel: node,\n\t\t\tcomponents: {LeftPanelComponent},\n\t\t\ttemplate: `<LeftPanelComponent />`,\n\t\t})\n\t\t.then(vue => {\n\t\t\tthis.vueInstance = vue;\n\n\t\t\treturn Promise.resolve();\n\t\t});\n\t}\n\n\tinitComplete()\n\t{\n\t\tthis.inited = true;\n\t\tthis.initPromiseResolver(this);\n\t}\n\n\tready()\n\t{\n\t\tif (this.inited)\n\t\t{\n\t\t\treturn Promise.resolve(this);\n\t\t}\n\n\t\treturn this.initPromise;\n\t}\n}"],"names":["LeftPanelApplication","constructor","params","inited","initPromise","initPromiseResolver","rootNode","vueInstance","controller","bitrixVue","Promise","resolve","node","document","createElement","initCore","then","initComplete","Core","ready","initComponent","unmount","createVue","name","el","components","LeftPanelComponent","template","vue"],"mappings":";;;;;;CAC2F;AAO3F,CAAO,MAAMA,oBAAoB,CACjC;GAYCC,WAAW,CAACC,MAAkC,GAAG,EAAE,EACnD;KAAA,KAXAC,MAAM,GAAY,KAAK;KAAA,KACvBC,WAAW,GAAY,IAAI;KAAA,KAC3BC,mBAAmB,GAAa,IAAI;KAAA,KACpCC,QAAQ,GAAyB,IAAI;KAAA,KACrCC,WAAW,GAAW,IAAI;KAAA,KAC1BC,UAAU,GAAW,IAAI;KAAA,KACzBC,SAAS,GAAW,IAAI;KAAA;OAAA;OAAA,OAEL;;KAIlB,IAAI,CAACL,WAAW,GAAG,IAAIM,OAAO,CAAEC,OAAO,IAAK;OAC3C,IAAI,CAACN,mBAAmB,GAAGM,OAAO;MAClC,CAAC;KAEF,IAAI,CAACT,MAAM,GAAGA,MAAM;KAEpB,IAAI,CAACI,QAAQ,GAAG,IAAI,CAACJ,MAAM,CAACU,IAAI,IAAIC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;KAEjE,IAAI,CAACC,QAAQ,EAAE,CAACC,IAAI,CAAC,MAAM,IAAI,CAACC,YAAY,EAAE,CAAC;;GAGhDF,QAAQ,GACR;KACC,OAAO,IAAIL,OAAO,CAAEC,OAAO,IAAK;OAC/BO,yCAAI,CAACC,KAAK,EAAE,CAACH,IAAI,CAACR,UAAU,IAAI;SAC/B,IAAI,CAACA,UAAU,GAAGA,UAAU;SAC5BG,OAAO,EAAE;QACT,CAAC;MACF,CAAC;;GAGHS,aAAa,CAACR,IAAI,EAClB;KACC,IAAI,IAAI,CAACL,WAAW,EACpB;OACC,IAAI,CAACE,SAAS,CAACY,OAAO,EAAE;OACxB,IAAI,CAACd,WAAW,GAAG,IAAI;;KAGxB,OAAO,IAAI,CAACC,UAAU,CAACc,SAAS,CAAC,IAAI,EAAE;OACtCC,IAAI,0CAAE,IAAI,qCAAiB;OAC3BC,EAAE,EAAEZ,IAAI;OACRa,UAAU,EAAE;6BAACC;QAAmB;OAChCC,QAAQ,EAAG;MACX,CAAC,CACDX,IAAI,CAACY,GAAG,IAAI;OACZ,IAAI,CAACrB,WAAW,GAAGqB,GAAG;OAEtB,OAAOlB,OAAO,CAACC,OAAO,EAAE;MACxB,CAAC;;GAGHM,YAAY,GACZ;KACC,IAAI,CAACd,MAAM,GAAG,IAAI;KAClB,IAAI,CAACE,mBAAmB,CAAC,IAAI,CAAC;;GAG/Bc,KAAK,GACL;KACC,IAAI,IAAI,CAAChB,MAAM,EACf;OACC,OAAOO,OAAO,CAACC,OAAO,CAAC,IAAI,CAAC;;KAG7B,OAAO,IAAI,CAACP,WAAW;;CAEzB;;;;;;;;"}