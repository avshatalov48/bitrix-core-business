{"version":3,"file":"limit.bundle.js","sources":["../src/limit.js"],"sourcesContent":["import { Runtime, Type } from 'main.core';\n\ntype Params = {\n\tfeatureId: string,\n\tcode?: string,\n\tbindElement?: HTMLElement,\n\tlimitAnalyticsLabels?: Object,\n}\n\nexport class Limit\n{\n\tstatic instances = {};\n\n\t#featureId: string;\n\t#code: string;\n\t#bindElement: ?HTMLElement;\n\t#limitAnalyticsLabels: Object = {};\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#featureId = params.featureId;\n\t\tthis.#code = Type.isStringFilled(params.code) ? params.code : `limit_${this.#featureId}`;\n\t\tthis.#bindElement = Type.isElementNode(params.bindElement) ? params.bindElement : null;\n\n\t\tif (Type.isPlainObject(params.limitAnalyticsLabels))\n\t\t{\n\t\t\tthis.#limitAnalyticsLabels = { module: 'socialnetwork', ...params.limitAnalyticsLabels };\n\t\t}\n\t}\n\n\tstatic showInstance(params: Params): Promise\n\t{\n\t\treturn this.getInstance(params).show();\n\t}\n\n\tstatic getInstance(params): this\n\t{\n\t\tif (!Type.isStringFilled(params.featureId))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Limit: featureId is required');\n\t\t}\n\n\t\tthis.instances[params.featureId] ??= new this(params);\n\n\t\treturn this.instances[params.featureId];\n\t}\n\n\tshow(): Promise\n\t{\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tRuntime.loadExtension('ui.info-helper')\n\t\t\t\t.then(({ FeaturePromotersRegistry }) => {\n\t\t\t\t\tif (FeaturePromotersRegistry)\n\t\t\t\t\t{\n\t\t\t\t\t\tFeaturePromotersRegistry.getPromoter({\n\t\t\t\t\t\t\tfeatureId: this.#featureId,\n\t\t\t\t\t\t\tcode: this.#code,\n\t\t\t\t\t\t\tbindElement: this.#bindElement,\n\t\t\t\t\t\t}).show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tBX.UI.InfoHelper.show(this.#code, {\n\t\t\t\t\t\t\tisLimit: true,\n\t\t\t\t\t\t\tlimitAnalyticsLabels: this.#limitAnalyticsLabels,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve();\n\t\t\t\t})\n\t\t\t\t.catch((error) => {\n\t\t\t\t\treject(error);\n\t\t\t\t})\n\t\t\t;\n\t\t});\n\t}\n}\n"],"names":["Limit","params","featureId","Type","isStringFilled","code","isElementNode","bindElement","isPlainObject","limitAnalyticsLabels","module","Promise","resolve","reject","Runtime","loadExtension","then","FeaturePromotersRegistry","getPromoter","show","BX","UI","InfoHelper","isLimit","error","getInstance","Error","instances"],"mappings":";;;;;;;;;;AAAA,CAA0C;CAAA;CAAA;CAAA;AAS1C,KAAaA,KAAK;GASjB,eAAYC,MAAc,EAC1B;KAAA;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA;;KAAA;OAAA;OAAA,OAHgC;;KAI/B,sCAAI,cAAcA,MAAM,CAACC,SAAS;KAClC,sCAAI,SAASC,cAAI,CAACC,cAAc,CAACH,MAAM,CAACI,IAAI,CAAC,GAAGJ,MAAM,CAACI,IAAI,qDAAY,IAAI,cAAa;KACxF,sCAAI,gBAAgBF,cAAI,CAACG,aAAa,CAACL,MAAM,CAACM,WAAW,CAAC,GAAGN,MAAM,CAACM,WAAW,GAAG,IAAI;KAEtF,IAAIJ,cAAI,CAACK,aAAa,CAACP,MAAM,CAACQ,oBAAoB,CAAC,EACnD;OACC,sCAAI;SAA2BC,MAAM,EAAE;UAAoBT,MAAM,CAACQ,oBAAoB;;;GAEvF;KAAA;KAAA,uBAoBD;OAAA;OACC,OAAO,IAAIE,OAAO,CAAC,UAACC,OAAO,EAAEC,MAAM,EAAK;SACvCC,iBAAO,CAACC,aAAa,CAAC,gBAAgB,CAAC,CACrCC,IAAI,CAAC,gBAAkC;WAAA,IAA/BC,wBAAwB,QAAxBA,wBAAwB;WAChC,IAAIA,wBAAwB,EAC5B;aACCA,wBAAwB,CAACC,WAAW,CAAC;eACpChB,SAAS,oCAAE,KAAI,aAAW;eAC1BG,IAAI,oCAAE,KAAI,QAAM;eAChBE,WAAW,oCAAE,KAAI;cACjB,CAAC,CAACY,IAAI,EAAE;YACT,MAED;aACCC,EAAE,CAACC,EAAE,CAACC,UAAU,CAACH,IAAI,mCAAC,KAAI,UAAQ;eACjCI,OAAO,EAAE,IAAI;eACbd,oBAAoB,oCAAE,KAAI;cAC1B,CAAC;;WAGHG,OAAO,EAAE;UACT,CAAC,SACI,CAAC,UAACY,KAAK,EAAK;WACjBX,MAAM,CAACW,KAAK,CAAC;UACb,CAAC;QAEH,CAAC;;;KACF;KAAA,6BA7CmBvB,MAAc,EAClC;OACC,OAAO,IAAI,CAACwB,WAAW,CAACxB,MAAM,CAAC,CAACkB,IAAI,EAAE;;;KACtC;KAAA,4BAEkBlB,MAAM,EACzB;OAAA;OACC,IAAI,CAACE,cAAI,CAACC,cAAc,CAACH,MAAM,CAACC,SAAS,CAAC,EAC1C;SACC,MAAM,IAAIwB,KAAK,CAAC,+CAA+C,CAAC;;OAGjE,gDAAI,CAACC,SAAS,sBAAC1B,MAAM,CAACC,SAAS,CAAC,yEAAhC,kCAAgC,GAAK,IAAI,IAAI,CAACD,MAAM,CAAC;OAErD,OAAO,IAAI,CAAC0B,SAAS,CAAC1B,MAAM,CAACC,SAAS,CAAC;;;GACvC;CAAA;CA+BD,4BAnEYF,KAAK,eAEE,EAAE;;;;;;;;"}