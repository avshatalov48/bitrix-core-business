this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};this.BX.Messenger.v2.Component=this.BX.Messenger.v2.Component||{};(function(t,e,s,n,i,o,a,r,l,m,c){"use strict";const g=o.BitrixVue.cloneComponent(c.AuthorTitle,{name:"CopilotAuthorTitle",computed:{isCopilot(){const t=Number.parseInt(this.authorDialogId,10);const e=this.$store.getters["users/bots/getCopilotUserId"];return e===t}},methods:{onAuthorNameClick(){const t=Number.parseInt(this.authorDialogId,10);if(!t||t===m.Core.getUserId()||this.isCopilot){return}a.EventEmitter.emit(r.EventType.textarea.insertMention,{mentionText:this.user.name,mentionReplacement:l.Utils.text.getMentionBbCode(this.user.id,this.user.name)})}},template:`\n\t\t<div \n\t\t\tv-if="showTitle" \n\t\t\t@click="onAuthorNameClick" \n\t\t\tclass="bx-im-message-copilot-author-title__container"\n\t\t\t:class="{'--clickable': !isCopilot}"\n\t\t>\n\t\t\t<ChatTitle\n\t\t\t\t:dialogId="authorDialogId"\n\t\t\t\t:showItsYou="false"\n\t\t\t\t:withColor="true"\n\t\t\t\t:withLeftIcon="false"\n\t\t\t/>\n\t\t</div>\n\t`});const u={name:"CopilotMessage",components:{CopilotAuthorTitle:g,BaseMessage:i.BaseMessage,DefaultMessageContent:c.DefaultMessageContent,MessageStatus:c.MessageStatus},props:{item:{type:Object,required:true},dialogId:{type:String,required:true},withTitle:{type:Boolean,default:true}},computed:{message(){return this.item},formattedText(){return n.Parser.decodeMessage(this.item)},canSetReactions(){return s.Type.isNumber(this.message.id)},isReply(){return this.message.replyId!==0},isError(){var t;return((t=this.message.componentParams)==null?void 0:t.copilotError)===true},warningText(){return this.loc("IM_MESSAGE_COPILOT_ANSWER_WARNING",{"#LINK_START#":'<a class="bx-im-message-copilot-answer__warning_more">',"#LINK_END#":"</a>"})}},methods:{onCopyClick(){var t;if((t=BX.clipboard)!=null&&t.copy(this.message.text)){BX.UI.Notification.Center.notify({content:s.Loc.getMessage("IM_MESSAGE_COPILOT_ANSWER_ACTION_COPY_SUCCESS")})}},onWarningDetailsClick(t){var e;if(!s.Dom.hasClass(t.target,"bx-im-message-copilot-answer__warning_more")){return}const n="20412666";(e=BX.Helper)==null?void 0:e.show(`redirect=detail&code=${n}`)},loc(t,e={}){return this.$Bitrix.Loc.getMessage(t,e)}},template:`\n\t\t<BaseMessage :item="item" :dialogId="dialogId" class="bx-im-message-copilot-base-message__container">\n\t\t\t<div class="bx-im-message-default__container bx-im-message-copilot-answer__container" :class="{'--error': isError}">\n\t\t\t\t<CopilotAuthorTitle v-if="withTitle" :item="item" />\n\t\t\t\t<div class="bx-im-message-default-content__container bx-im-message-default-content__scope">\n\t\t\t\t\t<div class="bx-im-message-default-content__text" v-html="formattedText"></div>\n\t\t\t\t\t<div v-if="isError" class="bx-im-message-default-content__bottom-panel">\n\t\t\t\t\t\t<div class="bx-im-message-default-content__status-container">\n\t\t\t\t\t\t\t<MessageStatus :item="message" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div v-if="!isError" class="bx-im-message-copilot-answer__bottom-panel">\n\t\t\t\t<div class="bx-im-message-copilot-answer__panel-content">\n\t\t\t\t\t<button\n\t\t\t\t\t\t:title="loc('IM_MESSAGE_COPILOT_ANSWER_ACTION_COPY')"\n\t\t\t\t\t\t@click="onCopyClick"\n\t\t\t\t\t\tclass="bx-im-message-copilot-answer__copy_icon"\n\t\t\t\t\t></button>\n\t\t\t\t\t<span \n\t\t\t\t\t\tv-html="warningText"\n\t\t\t\t\t\t@click="onWarningDetailsClick"\n\t\t\t\t\t\tclass="bx-im-message-copilot-answer__warning"\n\t\t\t\t\t></span>\n\t\t\t\t</div>\n\t\t\t\t<div class="bx-im-message-default-content__status-container">\n\t\t\t\t\t<MessageStatus :item="message" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</BaseMessage>\n\t`};t.CopilotMessage=u})(this.BX.Messenger.v2.Component.Message=this.BX.Messenger.v2.Component.Message||{},BX,BX,BX.Messenger.v2.Lib,BX.Messenger.v2.Component.Message,BX.Vue3,BX.Event,BX.Messenger.v2.Const,BX.Messenger.v2.Lib,BX.Messenger.v2.Application,BX.Messenger.v2.Component.Message);
//# sourceMappingURL=copilot-answer.bundle.map.js