this.BX=this.BX||{};(function(e,t){"use strict";var s=babelHelpers.classPrivateFieldLooseKey("bindEvents");var i=babelHelpers.classPrivateFieldLooseKey("dragStart");var a=babelHelpers.classPrivateFieldLooseKey("dragEnd");var l=babelHelpers.classPrivateFieldLooseKey("dragMove");class r{constructor({element:e,touchStartCallback:r,touchEndCallback:d,touchMoveCallback:p}){Object.defineProperty(this,l,{value:c});Object.defineProperty(this,a,{value:h});Object.defineProperty(this,i,{value:n});Object.defineProperty(this,s,{value:o});this.element=t.Type.isDomNode(e)?e:null;this.touchStartCallback=r;this.touchEndCallback=d;this.touchMoveCallback=p;this.active=false;this.currentY=null;this.initialY=null;this.yOffset=0;babelHelpers.classPrivateFieldLooseBase(this,s)[s]()}}function o(){if(this.element){this.element.addEventListener("touchstart",babelHelpers.classPrivateFieldLooseBase(this,i)[i].bind(this));this.element.addEventListener("touchend",babelHelpers.classPrivateFieldLooseBase(this,a)[a].bind(this));this.element.addEventListener("touchmove",babelHelpers.classPrivateFieldLooseBase(this,l)[l].bind(this))}}function n(e){this.active=true;this.element.classList.add("--ondrag");if(e.type==="touchstart"){this.initialY=e.touches[0].clientY-this.yOffset}else{this.initialY=e.clientY-this.yOffset}if(!this.touchStartCallback){return}this.touchStartCallback({element:this.element,active:this.active,currentY:this.currentY,initialY:this.initialY,yOffset:this.offSetY})}function h(e){this.active=true;this.element.classList.remove("--ondrag");this.yOffset=0;this.initialY=this.currentY;if(!this.touchEndCallback)return;this.touchEndCallback({element:this.element,active:this.active,currentY:this.currentY,initialY:this.initialY,yOffset:this.offSetY})}function c(e){if(!this.active){return}e.preventDefault();if(e.type==="touchmove"){this.currentY=e.touches[0].clientY-this.initialY}else{this.currentY=e.clientY-this.initialY}this.yOffset=this.currentX;if(!this.touchMoveCallback){return}this.touchMoveCallback({element:this.element,active:this.active,currentY:this.currentY,initialY:this.initialY,yOffset:this.offSetY})}let d=e=>e,p,u,b,v,y,f,L,P;var H=babelHelpers.classPrivateFieldLooseKey("getOverlay");var m=babelHelpers.classPrivateFieldLooseKey("getHelp");var g=babelHelpers.classPrivateFieldLooseKey("getClose");var F=babelHelpers.classPrivateFieldLooseKey("getPanel");var B=babelHelpers.classPrivateFieldLooseKey("getContent");var Y=babelHelpers.classPrivateFieldLooseKey("getWrapper");class O{constructor({content:e,help:s,className:i,padding:a}){Object.defineProperty(this,Y,{value:S});Object.defineProperty(this,B,{value:k});Object.defineProperty(this,F,{value:C});Object.defineProperty(this,g,{value:E});Object.defineProperty(this,m,{value:_});Object.defineProperty(this,H,{value:T});this.content=t.Type.isDomNode(e)?e:null;this.className=t.Type.isString(i)?i:"";this.padding=t.Type.isString(a)||t.Type.isNumber(a)?a:null;this.help=null;switch(true){case t.Type.isString(s):this.help=s;break;case t.Type.isFunction(s):this.help=s;break}this.layout={wrapper:null,container:null,content:null,overlay:null,close:null,help:null};this.halfOfHeight=0;this.currentHeight=null;this.sheetListener=new r({element:babelHelpers.classPrivateFieldLooseBase(this,F)[F](),touchStartCallback:({element:e,active:t,initialY:s,currentY:i,yOffset:a})=>{e.style.setProperty("--translateY","translateY(0)");e.style.setProperty("transition","unset")},touchEndCallback:({element:e,active:t,initialY:s,currentY:i,yOffset:a})=>{e.style.setProperty("transition","transform .3s");e.style.setProperty("--translateY","translateY("+i+"px)");if(parseInt(i)>this.halfOfHeight){this.close()}},touchMoveCallback:({element:e,active:t,initialY:s,currentY:i,yOffset:a})=>{if(i<=0){return}if(i<=-40){i=-41+i/10}e.style.setProperty("--translateY","translateY("+i+"px)")}});if(this.content){this.setContent(this.content)}}setContent(e){if(t.Type.isDomNode(e)){t.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,B)[B]());babelHelpers.classPrivateFieldLooseBase(this,B)[B]().appendChild(e)}if(t.Type.isString(e)){t.Dom.clean(babelHelpers.classPrivateFieldLooseBase(this,B)[B]());babelHelpers.classPrivateFieldLooseBase(this,B)[B]().innerText=e}}adjustPosition(){}adjustSize(){if(this.currentHeight!==babelHelpers.classPrivateFieldLooseBase(this,F)[F]().offsetHeight){let e=this.currentHeight;let t=babelHelpers.classPrivateFieldLooseBase(this,F)[F]().offsetHeight;babelHelpers.classPrivateFieldLooseBase(this,F)[F]().style.setProperty("height",e+"px");setTimeout((()=>{e=babelHelpers.classPrivateFieldLooseBase(this,F)[F]().offsetHeight;babelHelpers.classPrivateFieldLooseBase(this,F)[F]().style.setProperty("height",t+"px");const s=()=>{babelHelpers.classPrivateFieldLooseBase(this,F)[F]().style.removeProperty("height",t+"px");babelHelpers.classPrivateFieldLooseBase(this,F)[F]().removeEventListener("transitionend",s)};babelHelpers.classPrivateFieldLooseBase(this,F)[F]().addEventListener("transitionend",s);this.currentHeight=t;this.halfOfHeight=this.currentHeight/2}))}}close(){if(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]().parentNode){babelHelpers.classPrivateFieldLooseBase(this,F)[F]().classList.remove("--show");babelHelpers.classPrivateFieldLooseBase(this,H)[H]().classList.remove("--show");const e=()=>{babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]().classList.remove("--show");babelHelpers.classPrivateFieldLooseBase(this,F)[F]().removeEventListener("transitionend",e)};babelHelpers.classPrivateFieldLooseBase(this,F)[F]().addEventListener("transitionend",e)}}show(){if(!babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]().parentNode){babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]().appendChild(babelHelpers.classPrivateFieldLooseBase(this,H)[H]());babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]().appendChild(babelHelpers.classPrivateFieldLooseBase(this,F)[F]());document.body.appendChild(babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]())}babelHelpers.classPrivateFieldLooseBase(this,Y)[Y]().classList.add("--show");setTimeout((()=>{this.currentHeight=babelHelpers.classPrivateFieldLooseBase(this,F)[F]().offsetHeight;this.halfOfHeight=this.currentHeight/2;babelHelpers.classPrivateFieldLooseBase(this,F)[F]().classList.add("--show");babelHelpers.classPrivateFieldLooseBase(this,H)[H]().classList.add("--show")}))}}function T(){if(!this.layout.overlay){this.layout.overlay=t.Tag.render(p||(p=d`
				<div class="ui-bottomsheet__overlay"></div>
			`));this.layout.overlay.addEventListener("click",this.close.bind(this))}return this.layout.overlay}function _(){if(!this.layout.help){if(t.Type.isString(this.help)){this.layout.help=t.Tag.render(u||(u=d`
					<a href="${0}" class="ui-bottomsheet__panel-control--item --cursor-pointer">
						<span class="ui-bottomsheet__panel-control--item-text">${0}</span>
					</a>
				`),this.help,t.Loc.getMessage("UI_BOTTOMSHEET_HELP"))}if(t.Type.isFunction(this.help)){this.layout.help=t.Tag.render(b||(b=d`
					<div class="ui-bottomsheet__panel-control--item --cursor-pointer">
						<div class="ui-bottomsheet__panel-control--item-text">${0}</div>
					</div>
				`),t.Loc.getMessage("UI_BOTTOMSHEET_HELP"));this.layout.help.addEventListener("click",(()=>{this.help()}))}}return this.layout.help}function E(){if(!this.layout.close){this.layout.close=t.Tag.render(v||(v=d`
				<div class="ui-bottomsheet__panel-control--item --cursor-pointer --close">
					<div class="ui-bottomsheet__panel-control--item-text">${0}</div>
				</div>
			`),t.Loc.getMessage("UI_BOTTOMSHEET_CLOSE"));this.layout.close.addEventListener("click",this.close.bind(this))}return this.layout.close}function C(){if(!this.layout.container){const e=t.Tag.render(y||(y=d`
				<div class="ui-bottomsheet__panel-wrapper">
					${0}
				</div>
			`),babelHelpers.classPrivateFieldLooseBase(this,B)[B]());if(this.padding||this.padding===0){let s;switch(true){case t.Type.isString(this.padding):s=this.padding;break;case t.Type.isNumber(this.padding):s=this.padding+"px";break}e.style.setProperty("padding",s)}this.layout.container=t.Tag.render(f||(f=d`
				<div class="ui-bottomsheet__panel">
					<div class="ui-bottomsheet__panel-control">
						${0}
						<div class="ui-bottomsheet__panel-handler"></div>
						${0}
					</div>
					${0}
				</div>
			`),this.help?babelHelpers.classPrivateFieldLooseBase(this,m)[m]():"",babelHelpers.classPrivateFieldLooseBase(this,g)[g](),e)}return this.layout.container}function k(){if(!this.layout.content){this.layout.content=t.Tag.render(L||(L=d`
				<div class="ui-bottomsheet__panel-content"></div>
			`))}return this.layout.content}function S(){if(!this.layout.wrapper){this.layout.wrapper=t.Tag.render(P||(P=d`
				<div class="ui-bottomsheet ${0}"></div>
			`),this.className)}return this.layout.wrapper}e.BottomSheet=O})(this.BX.UI=this.BX.UI||{},BX);
//# sourceMappingURL=bottomsheet.bundle.map.js