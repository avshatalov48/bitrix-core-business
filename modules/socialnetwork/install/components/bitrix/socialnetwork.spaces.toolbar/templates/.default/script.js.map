{"version":3,"file":"script.js","sources":["src/filter.js","src/tasks/tasks-counters.js","src/tasks/tasks-robots.js","src/tasks/tasks-router.js","src/tasks/menu-items/kanban-order.js","src/tasks/menu-items/read-all.js","src/tasks/tasks-settings-menu.js","src/tasks/tasks-view.js","src/tasks/menu-items/complete-sprint.js","src/tasks/menu-items/kanban-sort.js","src/tasks/scrum/scrum-active-settings.js","src/tasks/menu-items/burn-down.js","src/tasks/scrum/scrum-complete-settings.js","src/tasks/menu-items/priority.js","src/tasks/scrum/scrum-plan-settings.js","src/tasks/scrum/scrum-settings.js","src/tasks/group/group-calendar-settings.js","src/tasks/tasks-excel-manager.js","src/tasks/menu-items/export.js","src/tasks/menu-items/group-subtasks.js","src/tasks/menu-items/import-csv.js","src/tasks/tasks-sort-manager.js","src/tasks/menu-items/sort.js","src/tasks/menu-items/sync.js","src/tasks/group/group-gantt-settings.js","src/tasks/menu-items/configure-view.js","src/tasks/group/group-kanban-settings.js","src/tasks/menu-items/export-excel.js","src/tasks/group/group-list-settings.js","src/tasks/group/group-settings.js","src/tasks/tasks-scrum.js","src/tasks/user/user-calendar-settings.js","src/tasks/user/user-gantt-settings.js","src/tasks/user/user-kanban-settings.js","src/tasks/user/user-list-settings.js","src/tasks/user/user-settings.js","src/tasks/tasks-view-list.js","src/tasks/tasks-toolbar.js","src/files/files-add-settings.js","src/files/files-router.js","src/files/files-settings.js","src/files/files-disk.js","src/files/files-toolbar.js","src/calendar/calendar.js","src/calendar/calendar-add-button-menu.js","src/calendar/calendar-settings.js","src/calendar/calendar-toolbar.js","src/discussions/discussions-add-button-menu.js","src/discussions/discussions-settings.js","src/discussions/discussions-composition.js","src/discussions/discussions-toolbar.js","src/users/users-router.js","src/users/users-toolbar.js"],"sourcesContent":["import { Dom, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\ntype Params = {\n\tfilterId: string,\n\tfilterContainer: HTMLElement,\n}\n\nexport class Filter extends EventEmitter\n{\n\t#filter: BX.Main.Filter;\n\t#filterContainer: HTMLElement;\n\t#fields: Object;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.Filter');\n\n\t\tthis.#filter = BX.Main.filterManager.getById(params.filterId);\n\t\tthis.#filterContainer = params.filterContainer;\n\n\t\tthis.#fields = this.#filter.getFilterFieldsValues();\n\n\t\tEventEmitter.subscribe('BX.Main.Filter:apply', this.#filterApply.bind(this));\n\t\tEventEmitter.subscribe('BX.Main.Filter:show', this.#filterShow.bind(this));\n\t\tEventEmitter.subscribe('BX.Main.Filter:blur', this.#filterHide.bind(this));\n\t}\n\n\tapplyFilter()\n\t{\n\t\tthis.#filter.applyFilter(false, true);\n\t}\n\n\ttoggleField(fieldName: string, value: string)\n\t{\n\t\tif (!this.#isFilteredByFieldValue(fieldName, value))\n\t\t{\n\t\t\tthis.#filter.getApi().extendFilter({ [fieldName]: value });\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#filter.getFilterFields().forEach((field) => {\n\t\t\tif (field.getAttribute('data-name') === fieldName)\n\t\t\t{\n\t\t\t\tthis.#filter.getFields().deleteField(field);\n\t\t\t}\n\t\t});\n\n\t\tthis.#filter.getSearch().apply();\n\t}\n\n\t#filterApply()\n\t{\n\t\tthis.#fields = this.#filter.getFilterFieldsValues();\n\t}\n\n\t#filterShow()\n\t{\n\t\tDom.addClass(this.#filterContainer, '--active');\n\t}\n\n\t#filterHide()\n\t{\n\t\tDom.removeClass(this.#filterContainer, '--active');\n\t}\n\n\t#isFilteredByField(field): boolean\n\t{\n\t\tif (!Object.keys(this.#fields).includes(field))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (Type.isArray(this.#fields[field]))\n\t\t{\n\t\t\treturn this.#fields[field].length > 0;\n\t\t}\n\n\t\treturn this.#fields[field] !== '';\n\t}\n\n\t#isFilteredByFieldValue(field, value): boolean\n\t{\n\t\treturn this.#isFilteredByField(field) && this.#fields[field].toString() === value.toString();\n\t}\n}\n","import { ajax, AjaxError, AjaxResponse, Dom, Event, Tag, Type } from 'main.core';\nimport { PULL as Pull } from 'pull.client';\nimport { Filter } from '../filter';\n\ntype Params = {\n\tfilter: Filter,\n\tisUserSpace: boolean,\n\tisScrumSpace: boolean,\n\tuserId?: number,\n\tgroupId?: number,\n\tfilterRole: string,\n\tcounters: Counters,\n}\n\nexport type Counters = {\n\texpired: Counter,\n\tnew_comments: Counter,\n}\n\ntype Counter = {\n\tcode: number,\n\tcounter: number,\n\tfilterField: string,\n}\n\nimport '../css/counters.css';\n\nexport class TasksCounters\n{\n\t#filter: Filter;\n\t#filterRole: string;\n\t#userId: number;\n\t#groupId: number;\n\t#counters: Counters;\n\t#isUserSpace: boolean;\n\t#isScrumSpace: boolean;\n\n\t#layout: Object<string, HTMLElement>;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#userId = Type.isUndefined(params.userId) ? 0 : parseInt(params.userId, 10);\n\t\tthis.#groupId = Type.isUndefined(params.groupId) ? 0 : parseInt(params.groupId, 10);\n\t\tthis.#filter = params.filter;\n\t\tthis.#filterRole = params.filterRole;\n\t\tthis.#counters = params.counters;\n\t\tthis.#isUserSpace = params.isUserSpace;\n\t\tthis.#isScrumSpace = params.isScrumSpace;\n\n\t\tthis.#layout = {\n\t\t\tnode: null,\n\t\t\tlistContainerNode: null,\n\t\t\tlistNode: null,\n\t\t};\n\n\t\tthis.#initPull();\n\t}\n\n\trender(): HTMLElement\n\t{\n\t\tthis.#layout.node = Tag.render`\n\t\t\t<div class=\"sn-spaces__toolbar-space_counters\">\n\t\t\t\t${this.#renderExpired()}\n\t\t\t\t${this.#renderNewComments()}\n\t\t\t</div>\n\t\t`;\n\n\t\treturn this.#layout.node;\n\t}\n\n\treadAll()\n\t{\n\t\tif (this.#isUserSpace || this.#filterRole !== 'view_all')\n\t\t{\n\t\t\tthis.#readAllUser();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#readAllGroup();\n\t\t}\n\t}\n\n\t#initPull()\n\t{\n\t\tPull.subscribe({\n\t\t\tmoduleId: 'tasks',\n\t\t\tcallback: this.#processPullEvent.bind(this),\n\t\t});\n\t}\n\n\t#processPullEvent(data)\n\t{\n\t\tconst { command, params } = data;\n\n\t\tconst eventHandlers = {\n\t\t\tuser_counter: this.#processUserCounter.bind(this),\n\t\t\tproject_counter: this.#processProjectCounter.bind(this),\n\t\t};\n\n\t\tconst has = Object.prototype.hasOwnProperty;\n\t\tif (has.call(eventHandlers, command))\n\t\t{\n\t\t\tconst method = eventHandlers[command];\n\t\t\tif (method)\n\t\t\t{\n\t\t\t\tmethod.apply(this, [params]);\n\t\t\t}\n\t\t}\n\t}\n\n\t#processUserCounter()\n\t{\n\t\tif (!this.#isUserSpace)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#updateCounters();\n\t}\n\n\t#processProjectCounter()\n\t{\n\t\tif (this.#isUserSpace)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#updateCounters();\n\t}\n\n\t#renderExpired(): HTMLElement\n\t{\n\t\tif (this.#isScrumSpace)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst uiClasses = 'ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes';\n\n\t\tconst activeClass = this.#getActiveClass(this.#counters.expired.counter);\n\n\t\tthis.#layout.expired = Tag.render`\n\t\t\t<button\n\t\t\t\tdata-id=\"sn-spaces-toolbar-counters-expired\"\n\t\t\t\tclass=\"sn-spaces__toolbar-space_btn-with-counter ${uiClasses} ${activeClass}\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --stopwatch\"></div>\n\t\t\t\t<div class=\"sn-spaces__toolbar-space_btn-counter\">\n\t\t\t\t\t${parseInt(this.#counters.expired.counter, 10)}\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(this.#layout.expired, 'click', this.#click.bind(this, this.#counters.expired));\n\n\t\treturn this.#layout.expired;\n\t}\n\n\t#renderNewComments(): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes';\n\n\t\tconst activeClass = this.#getActiveClass(this.#counters.new_comments.counter);\n\n\t\tthis.#layout.newComments = Tag.render`\n\t\t\t<button\n\t\t\t\tdata-id=\"sn-spaces-toolbar-counters-new-comments\"\n\t\t\t\tclass=\"sn-spaces__toolbar-space_btn-with-counter --green ${uiClasses} ${activeClass}\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --chats-1\"></div>\n\t\t\t\t<div class=\"sn-spaces__toolbar-space_btn-counter\">\n\t\t\t\t\t${parseInt(this.#counters.new_comments.counter, 10)}\n\t\t\t\t</div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(this.#layout.newComments, 'click', this.#click.bind(this, this.#counters.new_comments));\n\n\t\treturn this.#layout.newComments;\n\t}\n\n\t#click(counter: Counter)\n\t{\n\t\tthis.#filter.toggleField(counter.filterField, counter.code);\n\t}\n\n\t#update(counters: Counters)\n\t{\n\t\tthis.#counters = counters;\n\n\t\tif (!this.#isScrumSpace)\n\t\t{\n\t\t\tthis.#updateCounter(this.#layout.expired, this.#counters.expired.counter);\n\t\t}\n\t\tthis.#updateCounter(this.#layout.newComments, this.#counters.new_comments.counter);\n\t}\n\n\t#updateCounter(node: HTMLElement, value: number)\n\t{\n\t\tconst newCommentsActiveClass = this.#getActiveClass(value);\n\t\tif (newCommentsActiveClass)\n\t\t{\n\t\t\tDom.addClass(node, newCommentsActiveClass);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(node, '--active');\n\t\t}\n\n\t\tconst counterNode = node.querySelector('.sn-spaces__toolbar-space_btn-counter');\n\t\tcounterNode.textContent = parseInt(value, 10);\n\t}\n\n\t#updateCounters()\n\t{\n\t\tajax.runComponentAction(\n\t\t\t'bitrix:socialnetwork.spaces.toolbar',\n\t\t\t'getTasksCounters',\n\t\t\t{\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tgroupId: this.#groupId,\n\t\t\t\t},\n\t\t\t},\n\t\t)\n\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\tthis.#update(response.data);\n\t\t\t})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tthis.#consoleError('changePrivacy', error);\n\t\t\t})\n\t\t;\n\t}\n\n\t#readAllGroup()\n\t{\n\t\tif (!this.#hasCounters())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tajax.runAction(\n\t\t\t'tasks.viewedGroup.project.markAsRead',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tgroupId: this.#groupId,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t)\n\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\tthis.#updateCounters();\n\t\t\t\tthis.#filter.applyFilter();\n\t\t\t})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tthis.#consoleError('readAllScrum', error);\n\t\t\t})\n\t\t;\n\t}\n\n\t#readAllUser()\n\t{\n\t\tif (!this.#hasCounters())\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tajax.runAction(\n\t\t\t'tasks.viewedGroup.user.markAsRead',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tgroupId: this.#groupId,\n\t\t\t\t\t\tuserId: this.#userId,\n\t\t\t\t\t\trole: this.#filterRole,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t)\n\t\t\t.then((response: AjaxResponse) => {\n\t\t\t\tthis.#updateCounters();\n\t\t\t\tthis.#filter.applyFilter();\n\t\t\t})\n\t\t\t.catch((error: AjaxError) => {\n\t\t\t\tthis.#consoleError('readAllScrum', error);\n\t\t\t})\n\t\t;\n\t}\n\n\t#hasCounters(): boolean\n\t{\n\t\tconst expiredCounter = parseInt(this.#counters.expired.counter, 10);\n\t\tconst newCommentsCounter = parseInt(this.#counters.new_comments.counter, 10);\n\n\t\treturn expiredCounter > 0 || newCommentsCounter > 0;\n\t}\n\n\t#getActiveClass(value: number): string\n\t{\n\t\treturn value > 0 ? '--active' : '';\n\t}\n\n\t#consoleError(action: string, error: AjaxError)\n\t{\n\t\t// eslint-disable-next-line no-console\n\t\tconsole.error(`TasksCounters: ${action} error`, error);\n\t}\n}\n","import { Event, Loc, Tag } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nimport '../css/robots.css';\n\ntype Params = {\n\tgroupId: number,\n\tisTaskLimitsExceeded: boolean,\n\tcanUseAutomation: boolean,\n\tsourceAnalytics: string,\n}\n\nexport class TasksRobots extends EventEmitter\n{\n\t#groupId: number;\n\t#isTaskLimitsExceeded: boolean;\n\t#canUseAutomation: boolean;\n\t#sourceAnalytics: string;\n\n\t#sidePanelManager: BX.SidePanel.Manager;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#groupId = params.groupId;\n\t\tthis.#isTaskLimitsExceeded = params.isTaskLimitsExceeded;\n\t\tthis.#canUseAutomation = params.canUseAutomation;\n\t\tthis.#sourceAnalytics = params.sourceAnalytics;\n\n\t\tthis.#sidePanelManager = BX.SidePanel.Instance;\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.TasksRobots');\n\t}\n\n\trenderBtn(): HTMLElement\n\t{\n\t\tlet className = 'tasks-scrum-robot-btn ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes ui-btn-no-caps ui-btn-themes ';\n\n\t\tif (this.#isShowLimitSidePanel())\n\t\t{\n\t\t\tclassName += ' ui-btn-icon-lock';\n\t\t}\n\n\t\tconst node = Tag.render`\n\t\t\t<button class=\"${className}\">\n\t\t\t\t${Loc.getMessage('SN_SPACES_TASKS_ROBOTS_BUTTON')}\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#onClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#onClick()\n\t{\n\t\tif (this.#isShowLimitSidePanel())\n\t\t{\n\t\t\tBX.UI.InfoHelper.show('limit_tasks_robots', {\n\t\t\t\tisLimit: true,\n\t\t\t\tlimitAnalyticsLabels: {\n\t\t\t\t\tmodule: 'tasks',\n\t\t\t\t\tsource: this.#sourceAnalytics,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst url = `/bitrix/components/bitrix/tasks.automation/slider.php?site_id=${\n\t\t\t\tLoc.getMessage('SITE_ID')}&project_id=${this.#groupId}`;\n\n\t\t\tthis.#sidePanelManager.open(url, {\n\t\t\t\tcustomLeftBoundary: 0,\n\t\t\t\tcacheable: false,\n\t\t\t\tloader: 'bizproc:automation-loader',\n\t\t\t});\n\t\t}\n\t}\n\n\t#isShowLimitSidePanel(): boolean\n\t{\n\t\treturn (this.#isTaskLimitsExceeded && !this.#canUseAutomation);\n\t}\n}\n","import { Uri } from 'main.core';\n\ntype Params = {\n\tpathToTasks?: string,\n\tpathToTasksTask?: string,\n}\n\nexport class TasksRouter\n{\n\t#sidePanelManager: BX.SidePanel.Manager;\n\n\t#pathToTasks: string;\n\t#pathToTasksTask: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#pathToTasks = params.pathToTasks;\n\t\tthis.#pathToTasksTask = params.pathToTasksTask;\n\n\t\tthis.#sidePanelManager = BX.SidePanel.Instance;\n\t}\n\n\tredirectTo(url)\n\t{\n\t\ttop.BX.Socialnetwork.Spaces.space.reloadPageContent(url);\n\t}\n\n\tredirectToTasks(urlParam: string, urlValue: string)\n\t{\n\t\tconst viewUri = new Uri(this.#pathToTasks);\n\t\tviewUri.setQueryParam(urlParam, urlValue);\n\n\t\ttop.BX.Socialnetwork.Spaces.space.reloadPageContent(viewUri.toString());\n\t}\n\n\tredirectToScrumView(view: string)\n\t{\n\t\tconst viewUri = new Uri(this.#pathToTasks);\n\n\t\tviewUri.setQueryParam('tab', view);\n\n\t\ttop.BX.Socialnetwork.Spaces.space.reloadPageContent(viewUri.toString());\n\t}\n\n\tshowTask(taskId: number)\n\t{\n\t\tthis.#sidePanelManager.open(\n\t\t\tthis.#pathToTasksTask\n\t\t\t\t.replace('#action#', 'view')\n\t\t\t\t.replace('#task_id#', taskId),\n\t\t);\n\t}\n\n\tshowSidePanel(url)\n\t{\n\t\tthis.#sidePanelManager.open(url);\n\t}\n\n\tshowByExtension(fullName: string, shortName: string, params: Object): Promise\n\t{\n\t\treturn top.BX.Runtime.loadExtension(fullName)\n\t\t\t.then((exports) => {\n\t\t\t\tconst className = shortName.replaceAll('-', '');\n\n\t\t\t\tif (exports && exports[className])\n\t\t\t\t{\n\t\t\t\t\tconst extension = new exports[className](params);\n\n\t\t\t\t\textension.show();\n\n\t\t\t\t\treturn extension;\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t})\n\t\t;\n\t}\n}\n","export class KanbanOrder\n{\n\tstatic SORT_ASC = 'asc';\n\tstatic SORT_DESC = 'desc';\n\tstatic SORT_ACTUAL = 'actual';\n}\n","import { Loc } from 'main.core';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\n\nexport const ReadAllItem: MenuItem = (view: TasksSettingsMenu, emptySpace: false) => new MenuItem({\n\tdataset: {\n\t\tid: `spaces-tasks-${view.getViewId()}-settings-read-all`,\n\t},\n\ttext: Loc.getMessage('SN_SPACES_TASKS_SETTINGS_READ_ALL'),\n\tclassName: emptySpace ? 'menu-popup-item-none' : '',\n\tonclick: () => {\n\t\tview.emit('realAll');\n\t},\n});\n","import { EventEmitter } from 'main.core.events';\nimport { Menu, MenuItem } from 'main.popup';\nimport { ReadAllItem } from './menu-items/read-all';\n\ntype Params = {\n\tbindElement: HTMLElement,\n}\n\nexport class TasksSettingsMenu extends EventEmitter\n{\n\t#menu: Menu;\n\t#bindElement: HTMLElement;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace(this.#getEventNamespace());\n\n\t\tthis.#bindElement = params.bindElement;\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#getMenu().show();\n\t}\n\n\tclose(): void\n\t{\n\t\tthis.#menu?.close();\n\t}\n\n\t#getMenu(): Menu\n\t{\n\t\tif (!this.#menu)\n\t\t{\n\t\t\tthis.#menu = this.#createMenu(this.#bindElement);\n\t\t}\n\n\t\treturn this.#menu;\n\t}\n\n\t#createMenu(bindElement: HTMLElement): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: `spaces-tasks-${this.getViewId()}-settings`,\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\tfor (const menuItem of this.getMenuItems())\n\t\t{\n\t\t\tmenu.addMenuItem(menuItem);\n\t\t}\n\n\t\treturn menu;\n\t}\n\n\t#getEventNamespace(): string\n\t{\n\t\tconst camelCase = this.getViewId().toLowerCase().replace(/(-[a-z])/g, (group) => group\n\t\t\t.toUpperCase()\n\t\t\t.replace('-', ''));\n\n\t\tconst pascalCase = camelCase.charAt(0).toUpperCase() + camelCase.slice(1);\n\n\t\treturn `BX.Socialnetwork.Spaces.${pascalCase}Settings`;\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tReadAllItem(this),\n\t\t];\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'base';\n\t}\n}\n","type Params = {\n\tisUserSpace: boolean,\n\tisScrumSpace: boolean,\n\tviewMode: string,\n}\n\nexport class TasksView\n{\n\t#isUserSpace: boolean;\n\t#isScrumSpace: boolean;\n\t#viewMode: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#isUserSpace = params.isUserSpace;\n\t\tthis.#isScrumSpace = params.isScrumSpace;\n\n\t\tthis.#setViewMode(params.viewMode);\n\t}\n\n\tgetCurrentViewMode(): string\n\t{\n\t\treturn this.#viewMode;\n\t}\n\n\t#setViewMode(viewMode: string)\n\t{\n\t\tconst availableModes = this.#getAvailableModes().get(this.#getCurrentSpace());\n\n\t\tthis.#viewMode = availableModes.has(viewMode) ? viewMode : this.#getDefaultMode();\n\t}\n\n\t#getAvailableModes(): Map\n\t{\n\t\treturn new Map([\n\t\t\t['user', new Set(['list', 'plan', 'timeline', 'calendar', 'gantt'])],\n\t\t\t['group', new Set(['list', 'kanban', 'plan', 'timeline', 'calendar', 'gantt'])],\n\t\t\t['scrum', new Set(['plan', 'active', 'complete'])],\n\t\t]);\n\t}\n\n\t#getDefaultMode(): string\n\t{\n\t\tconst defaultModes = new Map([\n\t\t\t['user', 'list'],\n\t\t\t['group', 'list'],\n\t\t\t['scrum', 'plan'],\n\t\t]);\n\n\t\treturn defaultModes.get(this.#getCurrentSpace());\n\t}\n\n\t#getCurrentSpace(): string\n\t{\n\t\tif (this.#isUserSpace)\n\t\t{\n\t\t\treturn 'user';\n\t\t}\n\n\t\tif (this.#isScrumSpace)\n\t\t{\n\t\t\treturn 'scrum';\n\t\t}\n\t\telse\n\t\t{\n\t\t\treturn 'group';\n\t\t}\n\t}\n}\n","import { Loc } from 'main.core';\nimport { MenuItem } from 'main.popup';\nimport { ScrumActiveSettings } from '../scrum/scrum-active-settings';\n\nexport const CompleteSprintItem: MenuItem = (view: ScrumActiveSettings) => new MenuItem({\n\tdataset: {\n\t\tid: `spaces-tasks-${view.getViewId()}-settings-complete-sprint`,\n\t},\n\ttext: Loc.getMessage('SN_SPACES_TASKS_SCRUM_SETTINGS_COMPLETE_SPRINT'),\n\tdisabled: !view.canCompleteSprint(),\n\tonclick: () => {\n\t\tview.close();\n\t\tview.emit('completeSprint');\n\t},\n});\n","import { Loc } from 'main.core';\nimport { MenuItem } from 'main.popup';\nimport { Label, LabelColor } from 'ui.label';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { KanbanSort } from 'tasks.kanban-sort';\nimport { KanbanOrder } from './kanban-order';\n\nclass KanbanSortItems\n{\n\t#view: TasksSettingsMenu;\n\t#order: KanbanOrder;\n\n\tconstructor(view: TasksSettingsMenu, order: KanbanOrder)\n\t{\n\t\tthis.#view = view;\n\t\tthis.#order = order;\n\t}\n\n\tgetItems(): MenuItem[]\n\t{\n\t\tconst hiddenItems = [\n\t\t\tthis.#getOrderTitleItem(),\n\t\t\tthis.#getOrderDescItem(),\n\t\t\tthis.#getOrderAscItem(),\n\t\t];\n\n\t\tconst items = [\n\t\t\tthis.#getTitleItem(),\n\t\t\tthis.#getActivitySortItem(),\n\t\t\tthis.#getMySortItem(hiddenItems),\n\t\t];\n\n\t\tif (this.#order !== KanbanOrder.SORT_ACTUAL)\n\t\t{\n\t\t\titems.push(...hiddenItems);\n\t\t}\n\n\t\treturn items;\n\t}\n\n\t#getTitleItem(): MenuItem\n\t{\n\t\treturn new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-sort-title-item` },\n\t\t\thtml: `<b>${Loc.getMessage('SN_SPACES_TASKS_SORT_TITLE_ITEM')}</b>`,\n\t\t\tclassName: 'menu-popup-item menu-popup-no-icon',\n\t\t});\n\t}\n\n\t#getActivitySortItem(): MenuItem\n\t{\n\t\tconst menuItem = new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-activity-sort-item` },\n\t\t\thtml: `\n\t\t\t\t${Loc.getMessage('SN_SPACES_TASKS_SORT_ACTIVITY_DATE_MSGVER_1')}\n\t\t\t\t<span style=\"margin-left: 5px\">${this.#getRecommendedLabel()}</span>\n\t\t\t`,\n\t\t\tclassName: `menu-popup-item-sort-field ${this.#getSelectedClass([KanbanOrder.SORT_ACTUAL])}`,\n\t\t\tonclick: KanbanSort.getInstance().disableCustomSort,\n\t\t});\n\n\t\tmenuItem.params = {\n\t\t\torder: KanbanOrder.SORT_ACTUAL,\n\t\t};\n\n\t\treturn menuItem;\n\t}\n\n\t#getRecommendedLabel(): string\n\t{\n\t\treturn new Label(\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_SORT_RECOMMENDED_LABEL').toUpperCase(),\n\t\t\t\tcolor: LabelColor.LIGHT_BLUE,\n\t\t\t\tfill: true,\n\t\t\t\tsize: 'ui-label-xs',\n\t\t\t},\n\t\t).render().outerHTML;\n\t}\n\n\t#getMySortItem(hiddenItems: MenuItem[]): MenuItem\n\t{\n\t\tconst menuItem = new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-my-sort-item` },\n\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_SORT_SORTING'),\n\t\t\tclassName: `menu-popup-item-sort-field ${this.#getSelectedClass([KanbanOrder.SORT_ASC, KanbanOrder.SORT_DESC])}`,\n\t\t\tonclick: KanbanSort.getInstance().enableCustomSort,\n\t\t});\n\n\t\tmenuItem.params = hiddenItems;\n\n\t\treturn menuItem;\n\t}\n\n\t#getOrderTitleItem(): MenuItem\n\t{\n\t\tconst menuItem = new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-sort-order-title-item` },\n\t\t\thtml: `<b>${Loc.getMessage('SN_SPACES_TASKS_SORT_ORDER_TITLE')}</b>`,\n\t\t\tclassName: 'menu-popup-item menu-popup-no-icon',\n\t\t});\n\n\t\tmenuItem.params = {\n\t\t\ttype: 'sub',\n\t\t};\n\n\t\treturn menuItem;\n\t}\n\n\t#getOrderDescItem(): MenuItem\n\t{\n\t\treturn this.#getOrderItem(KanbanOrder.SORT_DESC);\n\t}\n\n\t#getOrderAscItem(): MenuItem\n\t{\n\t\treturn this.#getOrderItem(KanbanOrder.SORT_ASC);\n\t}\n\n\t#getOrderItem(order: string): MenuItem\n\t{\n\t\tconst menuItem = new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-order-${order}-item` },\n\t\t\ttext: Loc.getMessage(`SN_SPACES_TASKS_SORT_${order.toUpperCase()}`),\n\t\t\tclassName: `menu-popup-item-sort-field ${this.#getSelectedClass([order])}`,\n\t\t\tonclick: KanbanSort.getInstance().selectCustomOrder,\n\t\t});\n\n\t\tmenuItem.params = {\n\t\t\ttype: 'sub',\n\t\t\torder,\n\t\t};\n\n\t\treturn menuItem;\n\t}\n\n\t#getSelectedClass(order: string[]): string\n\t{\n\t\tconst classSelected = 'menu-popup-item-accept';\n\t\tconst classDeselected = 'menu-popup-item-none';\n\n\t\treturn order.includes(this.#order) ? classSelected : classDeselected;\n\t}\n}\n\nexport { KanbanOrder, KanbanSortItems };\n","import { MenuItem } from 'main.popup';\nimport { CompleteSprintItem } from '../menu-items/complete-sprint';\nimport { KanbanOrder, KanbanSortItems } from '../menu-items/kanban-sort';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\torder: KanbanOrder,\n\tcanCompleteSprint: boolean,\n\tactiveSprintExists: boolean,\n}\n\nexport class ScrumActiveSettings extends TasksSettingsMenu\n{\n\t#order: KanbanOrder;\n\t#canCompleteSprint: boolean;\n\t#activeSprintExists: boolean;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#order = params.order;\n\t\tthis.#canCompleteSprint = params.canCompleteSprint;\n\t\tthis.#activeSprintExists = params.activeSprintExists;\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'scrum-active';\n\t}\n\n\tcanCompleteSprint(): boolean\n\t{\n\t\treturn this.#canCompleteSprint && this.#activeSprintExists;\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tCompleteSprintItem(this),\n\t\t\t...(new KanbanSortItems(this, this.#order)).getItems(),\n\t\t];\n\t}\n}\n","import { Loc } from 'main.core';\nimport { MenuItem } from 'main.popup';\nimport { ScrumCompleteSettings } from '../scrum/scrum-complete-settings';\n\nexport const BurnDownItem: MenuItem = (view: ScrumCompleteSettings) => new MenuItem({\n\tdataset: {\n\t\tid: `spaces-tasks-${view.getViewId()}-settings-burn-down`,\n\t},\n\ttext: Loc.getMessage('SN_SPACES_TASKS_SCRUM_SETTINGS_BURN_DOWN'),\n\tonclick: () => {\n\t\tview.close();\n\t\tview.emit('showBurnDown');\n\t},\n});\n","import { MenuItem } from 'main.popup';\nimport { BurnDownItem } from '../menu-items/burn-down';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\n\nexport class ScrumCompleteSettings extends TasksSettingsMenu\n{\n\tgetViewId(): string\n\t{\n\t\treturn 'scrum-complete';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tBurnDownItem(this),\n\t\t];\n\t}\n}\n","import { Loc } from 'main.core';\nimport { MenuItem } from 'main.popup';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\n\nconst PriorityItem: MenuItem = (view: TasksSettingsMenu, priority: string, isActive: boolean) => {\n\tconst menuItem = new MenuItem({\n\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-priority-${priority}` },\n\t\tclassName: isActive ? 'menu-popup-item-accept' : 'menu-popup-item-none',\n\t\ttext: Loc.getMessage(`SN_SPACES_TASKS_SCRUM_SETTINGS_${priority.toUpperCase()}`),\n\t\tonclick: () => BX.Tasks.Scrum.Entry.setDisplayPriority(document.querySelector(`[data-id=${menuItem.dataset.id}`), priority),\n\t});\n\n\treturn menuItem;\n};\n\nexport const PriorityItems: MenuItem[] = (view: TasksSettingsMenu, priority: string) => [\n\tPriorityItem(view, 'backlog', priority === 'backlog'),\n\tPriorityItem(view, 'sprint', priority === 'sprint'),\n];\n","import { MenuItem } from 'main.popup';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { PriorityItems } from '../menu-items/priority';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tdisplayPriority: string,\n}\n\nexport class ScrumPlanSettings extends TasksSettingsMenu\n{\n\t#displayPriority: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#displayPriority = params.displayPriority;\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'scrum-plan';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tReadAllItem(this, true),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t\t...PriorityItems(this, this.#displayPriority),\n\t\t];\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { KanbanOrder } from '../menu-items/kanban-order';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksView } from '../tasks-view';\nimport { ScrumActiveSettings } from './scrum-active-settings';\nimport { ScrumCompleteSettings } from './scrum-complete-settings';\nimport { ScrumPlanSettings } from './scrum-plan-settings';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tdisplayPriority: string,\n\ttasksView: TasksView,\n\torder: KanbanOrder,\n\tcanCompleteSprint: boolean,\n\tactiveSprintExists: boolean,\n}\n\nexport class ScrumSettings extends EventEmitter\n{\n\t#settings: TasksSettingsMenu;\n\n\t#tasksView: TasksView;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.TasksScrumSettings');\n\n\t\tthis.#tasksView = params.tasksView;\n\n\t\tthis.#createSettings(params);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#settings.show();\n\t}\n\n\t#createSettings(params: Params): void\n\t{\n\t\tswitch (this.#tasksView.getCurrentViewMode())\n\t\t{\n\t\t\tcase 'plan':\n\t\t\t\tthis.#settings = new ScrumPlanSettings(params);\n\t\t\t\tthis.#settings.subscribe('realAll', () => this.emit('realAll'));\n\t\t\t\tbreak;\n\t\t\tcase 'active':\n\t\t\t\tthis.#settings = new ScrumActiveSettings(params);\n\t\t\t\tthis.#settings.subscribe('completeSprint', () => this.emit('completeSprint'));\n\t\t\t\tbreak;\n\t\t\tcase 'complete':\n\t\t\t\tthis.#settings = new ScrumCompleteSettings(params);\n\t\t\t\tthis.#settings.subscribe('showBurnDown', () => this.emit('showBurnDown'));\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n","import { TasksSettingsMenu } from '../tasks-settings-menu';\n\nexport class GroupCalendarSettings extends TasksSettingsMenu\n{\n\tgetViewId(): string\n\t{\n\t\treturn 'group-calendar';\n\t}\n}\n","type Params = {\n\tpathToTasks: string,\n}\n\nexport class TasksExcelManager\n{\n\t#pathToTasks: number;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#pathToTasks = params?.pathToTasks;\n\t}\n\n\t/**\n\t * @param options {{isAll: boolean}}\n\t */\n\tgetExportHref(options = {}): string\n\t{\n\t\tlet href = `${this.#pathToTasks}?F_STATE=sV80&EXPORT_AS=EXCEL&ncc=1`;\n\t\tif (options.isAll)\n\t\t{\n\t\t\thref += '&COLUMNS=ALL';\n\t\t}\n\n\t\treturn href;\n\t}\n\n\tgetImportHref(): string\n\t{\n\t\treturn `${this.#pathToTasks}import/`;\n\t}\n}\n","import { Loc } from 'main.core';\nimport { TasksExcelManager } from '../tasks-excel-manager';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\n\nexport const ExportItem: MenuItem = (view: TasksSettingsMenu, excelManager: TasksExcelManager) => {\n\treturn {\n\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-export-list` },\n\t\ttext: Loc.getMessage('SN_SPACES_TASKS_EXPORT_LIST'),\n\t\tclassName: 'menu-popup-item-none',\n\t\titems: [\n\t\t\t{\n\t\t\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-to-excel` },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_EXPORT_TO_EXCEL'),\n\t\t\t\tclassName: 'sn-spaces-tasks-icon-excel',\n\t\t\t\thref: excelManager.getExportHref(),\n\t\t\t},\n\t\t],\n\t};\n};\n","import { Loc, Dom } from 'main.core';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\nimport { EventEmitter } from 'main.core.events';\n\ntype Params = {\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n}\n\nexport const GroupSubtasksItem: MenuItem = (view: TasksSettingsMenu, params: Params) => {\n\tlet shouldSubtasksBeGrouped = params.shouldSubtasksBeGrouped;\n\n\treturn new MenuItem({\n\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-group-subtasks` },\n\t\ttext: Loc.getMessage('SN_SPACES_TASKS_GROUP_SUBTASKS'),\n\t\tclassName: (shouldSubtasksBeGrouped ? 'menu-popup-item-accept' : 'menu-popup-item-none'),\n\t\tonclick: (event, item) => {\n\t\t\tBX.ajax.runComponentAction('bitrix:tasks.interface.filter', 'toggleGroupByTasks', {\n\t\t\t\tmode: 'class',\n\t\t\t\tdata: {\n\t\t\t\t\tuserId: params.userId,\n\t\t\t\t},\n\t\t\t}).then((response) => {\n\t\t\t\tif (response.status !== 'success')\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tDom.toggleClass(item.layout.item, ['menu-popup-item-accept', 'menu-popup-item-none']);\n\n\t\t\t\tif (BX.Main.gridManager)\n\t\t\t\t{\n\t\t\t\t\tshouldSubtasksBeGrouped = !shouldSubtasksBeGrouped;\n\t\t\t\t\tconst gridInstance = BX.Main.gridManager.data[0].instance;\n\t\t\t\t\tgridInstance.reloadTable();\n\t\t\t\t\tEventEmitter.emit('BX.Tasks.Filter.group', [gridInstance, 'groupBySubTasks', shouldSubtasksBeGrouped]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t}\n\t\t\t}, (error) => {\n\t\t\t\t// eslint-disable-next-line no-console\n\t\t\t\tconsole.log(error);\n\t\t\t});\n\t\t},\n\t});\n};\n","import { Loc } from 'main.core';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\nimport { TasksExcelManager } from '../tasks-excel-manager';\n\nexport const ImportCsvItem: MenuItem = (view: TasksSettingsMenu, excelManager: TasksExcelManager) => {\n\treturn {\n\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-import` },\n\t\ttext: Loc.getMessage('SN_SPACES_TASKS_IMPORT_LIST'),\n\t\tclassName: 'menu-popup-item-none',\n\t\titems: [\n\t\t\t{\n\t\t\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-import-csv` },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_IMPORT_LIST_CSV'),\n\t\t\t\tclassName: 'sn-spaces-tasks-icon-excel',\n\t\t\t\thref: excelManager.getImportHref(),\n\t\t\t\tonclick: () => view.close(),\n\t\t\t},\n\t\t],\n\t};\n};\n","type Params = {\n\tgridId: string,\n}\n\ntype TaskSort = {\n\tfield: string,\n\tdirection: string,\n}\n\nexport class TasksSortManager\n{\n\t#gridId: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#gridId = params.gridId;\n\t}\n\n\tsetSort(taskSort: TaskSort)\n\t{\n\t\tconst field = taskSort.field;\n\t\tconst dir = taskSort.direction || 'asc';\n\n\t\tif (BX.Main.gridManager === undefined)\n\t\t{\n\t\t\tBX.ajax.post(\n\t\t\t\tBX.util.add_url_param('/bitrix/components/bitrix/main.ui.grid/settings.ajax.php', {\n\t\t\t\t\tGRID_ID: this.#gridId,\n\t\t\t\t\taction: 'setSort',\n\t\t\t\t}),\n\t\t\t\t{\n\t\t\t\t\tby: field,\n\t\t\t\t\torder: dir,\n\t\t\t\t},\n\t\t\t\t(res) => {\n\t\t\t\t\ttry\n\t\t\t\t\t{\n\t\t\t\t\t\tres = JSON.parse(res);\n\n\t\t\t\t\t\tif (!res.error)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tcatch (err)\n\t\t\t\t\t{\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tconst grid = BX.Main.gridManager.getById(this.#gridId).instance;\n\t\t\tgrid.sortByColumn({ sort_by: field, sort_order: dir });\n\n\t\t\tif (field === 'SORTING')\n\t\t\t{\n\t\t\t\tgrid.getRows().enableDragAndDrop();\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tgrid.getRows().disableDragAndDrop();\n\t\t\t}\n\t\t}\n\t}\n}\n","import { Loc, Dom } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { MenuItem } from 'main.popup';\nimport { Label, LabelColor } from 'ui.label';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksSortManager } from '../tasks-sort-manager';\n\ntype TaskSort = {\n\tfield: string,\n\tdirection: string,\n}\n\ntype Params = {\n\tsortFields: string[],\n\ttaskSort: TaskSort,\n\tsortManager: TasksSortManager,\n}\n\nconst classSelected = 'menu-popup-item-accept';\nconst classSortField = 'menu-popup-item-sort-field';\nconst classSortDir = 'menu-popup-item-sort-dir';\n\nclass SortItem\n{\n\t#params: Params;\n\t#view: TasksSettingsMenu;\n\t#menuItems: MenuItem[];\n\n\tconstructor(view: TasksSettingsMenu, params: Params)\n\t{\n\t\tthis.#view = view;\n\t\tthis.#params = params;\n\t}\n\n\tgetItem(): MenuItem\n\t{\n\t\treturn {\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-sort` },\n\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_SORT'),\n\t\t\tclassName: 'menu-popup-item-none menu-popup-sort',\n\t\t\tevents: {\n\t\t\t\tonSubMenuShow: (event: BaseEvent) => {\n\t\t\t\t\tthis.#menuItems = event.target.getSubMenu().getMenuItems();\n\t\t\t\t\tthis.#updateStyles(this.#menuItems);\n\t\t\t\t},\n\t\t\t},\n\t\t\titems: this.#getMenuItems(),\n\t\t};\n\t}\n\n\t#getMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\t...this.#params.sortFields.flatMap(this.#getFieldItem.bind(this)),\n\t\t\tnew MenuItem({\n\t\t\t\tid: 'delimiterDir',\n\t\t\t\tdelimiter: true,\n\t\t\t}),\n\t\t\tthis.#getDirectionItem('asc'),\n\t\t\tthis.#getDirectionItem('desc'),\n\t\t];\n\t}\n\n\t#getFieldItem(field: string): MenuItem\n\t{\n\t\tconst isActivityField = field === 'ACTIVITY_DATE';\n\n\t\tconst menuItem = new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-sort-${field}` },\n\t\t\thtml: `\n\t\t\t\t${Loc.getMessage(`SN_SPACES_TASKS_SORT_${field}`)}\n\t\t\t\t${isActivityField ? `<span style=\"margin-left: 5px\">${this.#getRecommendedLabel()}</span>` : ''}\n\t\t\t`,\n\t\t\tvalue: field,\n\t\t\tclassName: `${classSortField} menu-popup-item-none`,\n\t\t\tonclick: (event, item) => {\n\t\t\t\tthis.#onMenuItemClick('field', item);\n\t\t\t},\n\t\t});\n\n\t\tif (isActivityField)\n\t\t{\n\t\t\treturn [new MenuItem({ delimiter: true }), menuItem, new MenuItem({ delimiter: true })];\n\t\t}\n\n\t\treturn menuItem;\n\t}\n\n\t#getDirectionItem(direction: string): MenuItem\n\t{\n\t\treturn new MenuItem({\n\t\t\tdataset: { id: `spaces-tasks-${this.#view.getViewId()}-settings-sort-${direction}` },\n\t\t\ttext: Loc.getMessage(`SN_SPACES_TASKS_SORT_BY_${direction.toUpperCase()}`),\n\t\t\tclassName: `${classSortDir} menu-popup-item-none`,\n\t\t\tvalue: direction,\n\t\t\tonclick: (event, item) => {\n\t\t\t\tthis.#onMenuItemClick('dir', item);\n\t\t\t},\n\t\t});\n\t}\n\n\t#getRecommendedLabel(): string\n\t{\n\t\treturn new Label(\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_SORT_RECOMMENDED_LABEL').toUpperCase(),\n\t\t\t\tcolor: LabelColor.LIGHT_BLUE,\n\t\t\t\tfill: true,\n\t\t\t\tsize: 'ui-label-xs',\n\t\t\t},\n\t\t).render().outerHTML;\n\t}\n\n\t#onMenuItemClick(selectedItemType, selectedItem)\n\t{\n\t\tif (selectedItemType === 'field')\n\t\t{\n\t\t\tthis.#params.taskSort.field = selectedItem.value;\n\t\t}\n\t\telse if (selectedItemType === 'dir')\n\t\t{\n\t\t\tthis.#params.taskSort.direction = selectedItem.value;\n\t\t}\n\n\t\tthis.#params.sortManager.setSort(this.#params.taskSort);\n\n\t\tthis.#updateStyles(this.#menuItems);\n\t}\n\n\t#updateStyles(menuItems: MenuItem[])\n\t{\n\t\tmenuItems.forEach((item: MenuItem) => {\n\t\t\tthis.#updateStyle(item, this.#params.taskSort);\n\t\t});\n\t}\n\n\t#updateStyle(item: MenuItem, taskSort: TaskSort)\n\t{\n\t\tconst itemNode = item.getContainer();\n\n\t\tconst isFieldItem = Dom.hasClass(itemNode, classSortField);\n\t\tconst isDirectionItem = Dom.hasClass(itemNode, classSortDir) || item.getId() === 'delimiterDir';\n\n\t\tconst isFieldSelected = isFieldItem && taskSort.field === item.value;\n\t\tconst isDirectionSelected = isDirectionItem && taskSort.direction === item.value;\n\t\tif (isFieldSelected || isDirectionSelected)\n\t\t{\n\t\t\tDom.addClass(itemNode, classSelected);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.removeClass(itemNode, classSelected);\n\t\t}\n\n\t\tif (taskSort.field === 'SORTING' && isDirectionItem)\n\t\t{\n\t\t\tDom.style(itemNode, 'display', 'none');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.style(itemNode, 'display', '');\n\t\t}\n\t}\n}\n\nexport { SortItem };\n","import { Loc } from 'main.core';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\n\nexport const SyncItem: MenuItem = (view: TasksSettingsMenu, syncScript: string) => {\n\treturn {\n\t\tdataset: {\n\t\t\tid: `spaces-tasks-${view.getViewId()}-settings-sync`,\n\t\t},\n\t\ttext: Loc.getMessage('SN_SPACES_TASKS_SYNC_LIST'),\n\t\tclassName: 'menu-popup-item-none',\n\t\titems: [\n\t\t\t{\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_SYNC_WITH_OUTLOOK'),\n\t\t\t\tclassName: 'sn-spaces-tasks-icon-outlook',\n\t\t\t\t// eslint-disable-next-line no-eval\n\t\t\t\tonclick: () => eval(syncScript),\n\t\t\t},\n\t\t],\n\t};\n};\n","import { ExportItem } from '../menu-items/export';\nimport { GroupSubtasksItem } from '../menu-items/group-subtasks';\nimport { ImportCsvItem } from '../menu-items/import-csv';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { SortItem } from '../menu-items/sort';\nimport { SyncItem } from '../menu-items/sync';\nimport { TasksExcelManager } from '../tasks-excel-manager';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksSortManager } from '../tasks-sort-manager';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tpathToTasks: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n}\n\nexport class GroupGanttSettings extends TasksSettingsMenu\n{\n\t#excelManager: TasksExcelManager;\n\t#sortManager: TasksSortManager;\n\t#params: Params;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#params = params;\n\n\t\tthis.#excelManager = new TasksExcelManager({\n\t\t\tpathToTasks: params.pathToTasks,\n\t\t});\n\n\t\tthis.#sortManager = new TasksSortManager({\n\t\t\tgridId: params.gridId,\n\t\t});\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'group-gantt';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\tconst menuItems = [\n\t\t\tReadAllItem(this, true),\n\t\t\tGroupSubtasksItem(this, this.#params),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t\tnew SortItem(this, {\n\t\t\t\tsortFields: this.#params.sortFields,\n\t\t\t\ttaskSort: this.#params.taskSort,\n\t\t\t\tsortManager: this.#sortManager,\n\t\t\t}).getItem(),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t];\n\n\t\tif (this.#params.permissions.import)\n\t\t{\n\t\t\tmenuItems.push(ImportCsvItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(ExportItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.import && this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(SyncItem(this, this.#params.syncScript));\n\t\t}\n\n\t\treturn menuItems;\n\t}\n}\n","import { Loc, Runtime } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\n\nexport const ConfigureViewItem: MenuItem = (view: TasksSettingsMenu) => new MenuItem({\n\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-configure-view` },\n\ttext: Loc.getMessage('SN_SPACES_TASKS_CONFIGURE_VIEW'),\n\tonclick: () => {\n\t\tRuntime.loadExtension('ui.dialogs.checkbox-list').then(() => {\n\t\t\tview.close();\n\t\t\tEventEmitter.emit('tasks-kanban-settings-fields-view');\n\t\t});\n\t},\n});\n","import { MenuItem } from 'main.popup';\nimport { ConfigureViewItem } from '../menu-items/configure-view';\nimport { KanbanOrder, KanbanSortItems } from '../menu-items/kanban-sort';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\torder: KanbanOrder,\n}\n\nexport class GroupKanbanSettings extends TasksSettingsMenu\n{\n\t#order: KanbanOrder;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#order = params.order;\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'group-kanban';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tReadAllItem(this),\n\t\t\t...(new KanbanSortItems(this, this.#order)).getItems(),\n\t\t\tConfigureViewItem(this),\n\t\t];\n\t}\n}\n","import { Loc } from 'main.core';\nimport { TasksExcelManager } from '../tasks-excel-manager';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { MenuItem } from 'main.popup';\n\nexport const ExportExcelItem: MenuItem = (view: TasksSettingsMenu, excelManager: TasksExcelManager) => {\n\treturn {\n\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-export-excel` },\n\t\ttext: Loc.getMessage('SN_SPACES_TASKS_EXPORT_LIST_TO_EXCEL'),\n\t\tclassName: 'menu-popup-item-none',\n\t\titems: [\n\t\t\t{\n\t\t\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-export-excel-grid-fields` },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_EXPORT_GRID_FIELDS'),\n\t\t\t\tclassName: 'sn-spaces-tasks-icon-excel',\n\t\t\t\thref: excelManager.getExportHref(),\n\t\t\t},\n\t\t\t{\n\t\t\t\tdataset: { id: `spaces-tasks-${view.getViewId()}-settings-export-excel-all-fields` },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_TASKS_EXPORT_ALL_FIELDS'),\n\t\t\t\tclassName: 'sn-spaces-tasks-icon-excel',\n\t\t\t\thref: excelManager.getExportHref({ isAll: true }),\n\t\t\t},\n\t\t],\n\t};\n};\n","import { ExportItem } from '../menu-items/export';\nimport { ExportExcelItem } from '../menu-items/export-excel';\nimport { GroupSubtasksItem } from '../menu-items/group-subtasks';\nimport { ImportCsvItem } from '../menu-items/import-csv';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { SortItem } from '../menu-items/sort';\nimport { SyncItem } from '../menu-items/sync';\nimport { TasksExcelManager } from '../tasks-excel-manager';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksSortManager } from '../tasks-sort-manager';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tpathToTasks: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n}\n\nexport class GroupListSettings extends TasksSettingsMenu\n{\n\t#excelManager: TasksExcelManager;\n\t#sortManager: TasksSortManager;\n\t#params: Params;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#params = params;\n\n\t\tthis.#excelManager = new TasksExcelManager({\n\t\t\tpathToTasks: params.pathToTasks,\n\t\t});\n\n\t\tthis.#sortManager = new TasksSortManager({\n\t\t\tgridId: params.gridId,\n\t\t});\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'group-list';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\tconst menuItems = [\n\t\t\tReadAllItem(this, true),\n\t\t\tGroupSubtasksItem(this, this.#params),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t\tnew SortItem(this, {\n\t\t\t\tsortFields: this.#params.sortFields,\n\t\t\t\ttaskSort: this.#params.taskSort,\n\t\t\t\tsortManager: this.#sortManager,\n\t\t\t}).getItem(),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t];\n\n\t\tif (this.#params.permissions.import)\n\t\t{\n\t\t\tmenuItems.push(ImportCsvItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(ExportExcelItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.import && this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(SyncItem(this, this.#params.syncScript));\n\t\t}\n\n\t\treturn menuItems;\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksView } from '../tasks-view';\nimport { GroupCalendarSettings } from './group-calendar-settings';\nimport { GroupGanttSettings } from './group-gantt-settings';\nimport { GroupKanbanSettings } from './group-kanban-settings';\nimport { GroupListSettings } from './group-list-settings';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\ttasksView: TasksView,\n\tpathToTasks: string,\n\torder: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n}\n\nexport class GroupSettings extends EventEmitter\n{\n\t#tasksView: TasksView;\n\t#settings: TasksSettingsMenu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.TasksGroupSettings');\n\n\t\tthis.#tasksView = params.tasksView;\n\n\t\tthis.#createSettings(params);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#settings.show();\n\t}\n\n\t#createSettings(params: Params): Menu\n\t{\n\t\tswitch (this.#tasksView.getCurrentViewMode())\n\t\t{\n\t\t\tcase 'list':\n\t\t\t\tthis.#settings = new GroupListSettings(params);\n\t\t\t\tbreak;\n\t\t\tcase 'kanban':\n\t\t\tcase 'plan':\n\t\t\tcase 'timeline':\n\t\t\t\tthis.#settings = new GroupKanbanSettings(params);\n\t\t\t\tbreak;\n\t\t\tcase 'calendar':\n\t\t\t\tthis.#settings = new GroupCalendarSettings(params);\n\t\t\t\tbreak;\n\t\t\tcase 'gantt':\n\t\t\t\tthis.#settings = new GroupGanttSettings(params);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tthis.#settings.subscribe('realAll', () => this.emit('realAll'));\n\t}\n}\n","import { Event, Tag, Text } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Dialog } from 'ui.entity-selector';\nimport { TasksRouter } from './tasks-router';\n\ntype Params = {\n\tgroupId: number,\n\tpathToScrumBurnDown: string,\n\trouter: TasksRouter,\n\tcurrentCompletedSprint: CurrentCompletedSprint,\n}\n\nexport type CurrentCompletedSprint = {\n\tid: number,\n\tselectorLabel: string,\n}\n\nexport class TasksScrum\n{\n\t#groupId: number;\n\t#pathToScrumBurnDown: string;\n\t#router: TasksRouter;\n\n\t#currentCompletedSprint: CurrentCompletedSprint;\n\n\t#layout: {\n\t\tselector: HTMLElement;\n\t\tselectorLabel: HTMLElement;\n\t};\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#groupId = params.groupId;\n\t\tthis.#pathToScrumBurnDown = params.pathToScrumBurnDown;\n\t\tthis.#router = params.router;\n\t\tthis.#currentCompletedSprint = params.currentCompletedSprint;\n\n\t\tthis.#layout = {};\n\t}\n\n\trenderSprintSelector(): HTMLElement\n\t{\n\t\tconst { selector, selectorLabel } = Tag.render`\n\t\t\t<div\n\t\t\t\tref=\"selector\"\n\t\t\t\n\t\t\t\tclass=\"ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-no-caps ui-btn-themes sn-spaces__toolbar-space_btn-options\"\n\t\t\t>\n\t\t\t\t<span class=\"sn-spaces__toolbar-space_btn-text\" ref=\"selectorLabel\">\n\t\t\t\t\t${Text.encode(this.#currentCompletedSprint.selectorLabel)}\n\t\t\t\t</span>\n\t\t\t\t<div class=\"ui-icon-set --chevron-down\" style=\"--ui-icon-set__icon-size: 19px;\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tthis.#layout.selector = selector;\n\t\tthis.#layout.selectorLabel = selectorLabel;\n\n\t\tEvent.bind(selector, 'click', this.#showSprintSelector.bind(this, selector));\n\n\t\treturn selector;\n\t}\n\n\tshowCompletionForm()\n\t{\n\t\tconst extensionName = 'Sprint-Completion-Form';\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tthis.#router.showByExtension(\n\t\t\t`tasks.scrum.${extensionName.toLowerCase()}`,\n\t\t\textensionName,\n\t\t\t{ groupId: this.#groupId },\n\t\t)\n\t\t\t.then((extension) => {\n\t\t\t\tif (extension)\n\t\t\t\t{\n\t\t\t\t\textension.subscribe('afterComplete', () => {\n\t\t\t\t\t\tthis.#router.redirectToScrumView('plan');\n\t\t\t\t\t});\n\t\t\t\t\textension.subscribe('taskClick', (baseEvent: BaseEvent) => {\n\t\t\t\t\t\tthis.#router.showTask(baseEvent.getData());\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t;\n\t}\n\n\tshowBurnDown()\n\t{\n\t\tthis.#router.showSidePanel(\n\t\t\tthis.#pathToScrumBurnDown.replace('#sprint_id#', this.#currentCompletedSprint.id),\n\t\t);\n\t}\n\n\t#showSprintSelector(selectorNode: HTMLElement)\n\t{\n\t\tconst dialog = new Dialog({\n\t\t\ttargetNode: selectorNode,\n\t\t\twidth: 400,\n\t\t\theight: 300,\n\t\t\tmultiple: false,\n\t\t\tdropdownMode: true,\n\t\t\tenableSearch: true,\n\t\t\tcompactView: true,\n\t\t\tshowAvatars: false,\n\t\t\tcacheable: false,\n\t\t\tpreselectedItems: [['sprint-selector', this.#currentCompletedSprint.id]],\n\t\t\tentities: [\n\t\t\t\t{\n\t\t\t\t\tid: 'sprint-selector',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tgroupId: this.#groupId,\n\t\t\t\t\t\tonlyCompleted: true,\n\t\t\t\t\t},\n\t\t\t\t\tdynamicLoad: true,\n\t\t\t\t\tdynamicSearch: true,\n\t\t\t\t},\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\tvar selectedItem = event.getData().item;\n\n\t\t\t\t\tthis.#currentCompletedSprint.id = selectedItem.id;\n\n\t\t\t\t\t// todo change to EventEmitter\n\t\t\t\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\t\t\t\tBX.onCustomEvent(selectorNode, 'onTasksGroupSelectorChange', [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tid: this.#groupId,\n\t\t\t\t\t\t\tsprintId: selectedItem.id,\n\t\t\t\t\t\t\tname: selectedItem.customData.get('name'),\n\t\t\t\t\t\t},\n\t\t\t\t\t]);\n\n\t\t\t\t\tthis.#layout.selectorLabel.textContent = selectedItem.customData.get('label');\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tdialog.show();\n\t}\n}\n","import { TasksSettingsMenu } from '../tasks-settings-menu';\n\nexport class UserCalendarSettings extends TasksSettingsMenu\n{\n\tgetViewId(): string\n\t{\n\t\treturn 'user-calendar';\n\t}\n}\n","import { ExportItem } from '../menu-items/export';\nimport { GroupSubtasksItem } from '../menu-items/group-subtasks';\nimport { ImportCsvItem } from '../menu-items/import-csv';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { SortItem } from '../menu-items/sort';\nimport { SyncItem } from '../menu-items/sync';\nimport { TasksExcelManager } from '../tasks-excel-manager';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksSortManager } from '../tasks-sort-manager';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tpathToTasks: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n}\n\nexport class UserGanttSettings extends TasksSettingsMenu\n{\n\t#excelManager: TasksExcelManager;\n\t#sortManager: TasksSortManager;\n\t#params: Params;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#params = params;\n\n\t\tthis.#excelManager = new TasksExcelManager({\n\t\t\tpathToTasks: params.pathToTasks,\n\t\t});\n\n\t\tthis.#sortManager = new TasksSortManager({\n\t\t\tgridId: params.gridId,\n\t\t});\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'user-gantt';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\tconst menuItems = [\n\t\t\tReadAllItem(this, true),\n\t\t\tGroupSubtasksItem(this, this.#params),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t\tnew SortItem(this, {\n\t\t\t\tsortFields: this.#params.sortFields,\n\t\t\t\ttaskSort: this.#params.taskSort,\n\t\t\t\tsortManager: this.#sortManager,\n\t\t\t}).getItem(),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t];\n\n\t\tif (this.#params.permissions.import)\n\t\t{\n\t\t\tmenuItems.push(ImportCsvItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(ExportItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.import && this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(SyncItem(this, this.#params.syncScript));\n\t\t}\n\n\t\treturn menuItems;\n\t}\n}\n","import { MenuItem } from 'main.popup';\nimport { ConfigureViewItem } from '../menu-items/configure-view';\nimport { KanbanOrder, KanbanSortItems } from '../menu-items/kanban-sort';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\torder: KanbanOrder,\n}\n\nexport class UserKanbanSettings extends TasksSettingsMenu\n{\n\t#order: KanbanOrder;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#order = params.order;\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'user-kanban';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tReadAllItem(this),\n\t\t\t...(new KanbanSortItems(this, this.#order)).getItems(),\n\t\t\tConfigureViewItem(this),\n\t\t];\n\t}\n}\n","import { ExportExcelItem } from '../menu-items/export-excel';\nimport { GroupSubtasksItem } from '../menu-items/group-subtasks';\nimport { ImportCsvItem } from '../menu-items/import-csv';\nimport { ReadAllItem } from '../menu-items/read-all';\nimport { SortItem } from '../menu-items/sort';\nimport { SyncItem } from '../menu-items/sync';\nimport { TasksExcelManager } from '../tasks-excel-manager';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksSortManager } from '../tasks-sort-manager';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tpathToTasks: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n}\n\nexport class UserListSettings extends TasksSettingsMenu\n{\n\t#excelManager: TasksExcelManager;\n\t#sortManager: TasksSortManager;\n\t#params: Params;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper(params);\n\n\t\tthis.#params = params;\n\n\t\tthis.#excelManager = new TasksExcelManager({\n\t\t\tpathToTasks: params.pathToTasks,\n\t\t});\n\n\t\tthis.#sortManager = new TasksSortManager({\n\t\t\tgridId: params.gridId,\n\t\t});\n\t}\n\n\tgetViewId(): string\n\t{\n\t\treturn 'user-list';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\tconst menuItems = [\n\t\t\tReadAllItem(this, true),\n\t\t\tGroupSubtasksItem(this, this.#params),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t\tnew SortItem(this, {\n\t\t\t\tsortFields: this.#params.sortFields,\n\t\t\t\ttaskSort: this.#params.taskSort,\n\t\t\t\tsortManager: this.#sortManager,\n\t\t\t}).getItem(),\n\t\t\t{\n\t\t\t\tdelimiter: true,\n\t\t\t},\n\t\t];\n\n\t\tif (this.#params.permissions.import)\n\t\t{\n\t\t\tmenuItems.push(ImportCsvItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(ExportExcelItem(this, this.#excelManager));\n\t\t}\n\n\t\tif (this.#params.permissions.import && this.#params.permissions.export)\n\t\t{\n\t\t\tmenuItems.push(SyncItem(this, this.#params.syncScript));\n\t\t}\n\n\t\treturn menuItems;\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { TasksSettingsMenu } from '../tasks-settings-menu';\nimport { TasksView } from '../tasks-view';\nimport { UserCalendarSettings } from './user-calendar-settings';\nimport { UserGanttSettings } from './user-gantt-settings';\nimport { UserKanbanSettings } from './user-kanban-settings';\nimport { UserListSettings } from './user-list-settings';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\ttasksView: TasksView,\n\tpathToTasks: string,\n\torder: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tuserId: number,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n}\n\nexport class UserSettings extends EventEmitter\n{\n\t#tasksView: TasksView;\n\t#settings: TasksSettingsMenu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.TasksUserSettings');\n\n\t\tthis.#tasksView = params.tasksView;\n\n\t\tthis.#createSettings(params);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#settings.show();\n\t}\n\n\t#createSettings(params: Params): Menu\n\t{\n\t\tswitch (this.#tasksView.getCurrentViewMode())\n\t\t{\n\t\t\tcase 'list':\n\t\t\t\tthis.#settings = new UserListSettings(params);\n\t\t\t\tbreak;\n\t\t\tcase 'plan':\n\t\t\tcase 'timeline':\n\t\t\t\tthis.#settings = new UserKanbanSettings(params);\n\t\t\t\tbreak;\n\t\t\tcase 'calendar':\n\t\t\t\tthis.#settings = new UserCalendarSettings(params);\n\t\t\t\tbreak;\n\t\t\tcase 'gantt':\n\t\t\t\tthis.#settings = new UserGanttSettings(params);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn;\n\t\t}\n\n\t\tthis.#settings.subscribe('realAll', () => this.emit('realAll'));\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tviewList: Array<ViewItem>,\n}\n\nexport type ViewItem = {\n\tid: number,\n\tkey: string,\n\ttitle: string,\n\turlParam: string,\n\turlValue: string,\n\tselected: boolean,\n}\n\nexport class TasksViewList extends EventEmitter\n{\n\t#menu: Menu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.TasksViewList');\n\n\t\tthis.#menu = this.#createMenu(params.bindElement, params.viewList);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.toggle();\n\t}\n\n\t#createMenu(bindElement: HTMLElement, viewList: Array<ViewItem>): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-tasks-view-list',\n\t\t\tclassName: 'sn-spaces-tasks-view-list-menu',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\tviewList.forEach((viewItem: ViewItem) => {\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: `spaces-tasks-${viewItem.key}` },\n\t\t\t\ttext: viewItem.title,\n\t\t\t\tclassName: `sn-spaces-tasks-${viewItem.key}-icon ${viewItem.selected ? '--selected' : ''}`,\n\t\t\t\tonclick: () => {\n\t\t\t\t\tif (viewItem.selected)\n\t\t\t\t\t{\n\t\t\t\t\t\tmenu.close();\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.emit('click', {\n\t\t\t\t\t\turlParam: viewItem.urlParam,\n\t\t\t\t\t\turlValue: viewItem.urlValue,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\n\t\treturn menu;\n\t}\n}\n","import { Cache, Dom, Event, Loc, Tag, Type } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { ShortView } from 'ui.short-view';\nimport { Counters, TasksCounters } from './tasks-counters';\nimport { Filter } from '../filter';\nimport { TasksRobots } from './tasks-robots';\nimport { TasksRouter } from './tasks-router';\nimport { ScrumSettings } from './scrum/scrum-settings';\nimport { GroupSettings } from './group/group-settings';\nimport { CurrentCompletedSprint, TasksScrum } from './tasks-scrum';\nimport { TasksView } from './tasks-view';\nimport { UserSettings } from './user/user-settings';\nimport { TasksViewList } from './tasks-view-list';\nimport { CreationMenu } from 'tasks.creation-menu';\n\nimport type { ViewItem } from './tasks-view-list';\n\nimport '../css/tasks.css';\n\ntype Params = {\n\tisUserSpace: boolean,\n\tisScrumSpace: boolean,\n\tuserId?: number,\n\tgroupId?: number,\n\tfilterId: string,\n\tfilterContainer: HTMLElement,\n\tfilterRole: string,\n\tcounters: Counters,\n\tviewList: Array<ViewItem>,\n\tpathToGroupTasks?: string,\n\tpathToGroupTasksTask?: string,\n\tpathToAddTask: string,\n\tpathToTemplateList: string,\n\tpathToTasks: string,\n\tdisplayPriority?: string,\n\tisShortView?: 'Y' | 'N',\n\tviewMode: string,\n\torder: string,\n\tshouldSubtasksBeGrouped: boolean,\n\tgridId: string,\n\tsortFields: string[],\n\ttaskSort: { field: string, direction: string },\n\tsyncScript: string,\n\tpermissions: any,\n\tactiveSprintId?: number,\n\ttaskLimitExceeded?: 'Y' | 'N',\n\tcanUseAutomation?: 'Y' | 'N',\n\tcanEditSprint?: 'Y' | 'N',\n\tcurrentCompletedSprint?: CurrentCompletedSprint,\n}\n\nexport class TasksToolbar\n{\n\t#cache = new Cache.MemoryCache();\n\n\t#filter: Filter;\n\t#router: TasksRouter;\n\t#counters: ?TasksCounters;\n\t#tasksView: TasksView;\n\t#tasksScrum: ?TasksScrum;\n\t#tasksViewList: TasksViewList;\n\t#settings: UserSettings | GroupSettings | ScrumSettings;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\n\t\tthis.#filter = new Filter({\n\t\t\tfilterId: this.#getParam('filterId'),\n\t\t\tfilterContainer: this.#getParam('filterContainer'),\n\t\t});\n\n\t\tif (this.#getParam('isUserSpace'))\n\t\t{\n\t\t\tthis.#router = new TasksRouter({\n\t\t\t\tpathToTasks: this.#getParam('pathToUserSpaceTasks'),\n\t\t\t\tpathToTasksTask: '',\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.#router = new TasksRouter({\n\t\t\t\tpathToTasks: this.#getParam('pathToGroupTasks'),\n\t\t\t\tpathToTasksTask: this.#getParam('pathToGroupTasksTask'),\n\t\t\t});\n\t\t}\n\n\t\tthis.#tasksView = new TasksView({\n\t\t\tisUserSpace: this.#getParam('isUserSpace'),\n\t\t\tisScrumSpace: this.#getParam('isScrumSpace'),\n\t\t\tviewMode: this.#getParam('viewMode'),\n\t\t});\n\n\t\tif (this.#getParam('isScrumSpace'))\n\t\t{\n\t\t\tthis.#tasksScrum = new TasksScrum({\n\t\t\t\tgroupId: this.#getParam('groupId'),\n\t\t\t\tpathToScrumBurnDown: this.#getParam('pathToScrumBurnDown'),\n\t\t\t\trouter: this.#router,\n\t\t\t\tcurrentCompletedSprint: this.#getParam('currentCompletedSprint'),\n\t\t\t});\n\t\t}\n\t}\n\n\trenderAddBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderAddBtn(), container);\n\t}\n\n\trenderScrumAddBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderScrumAddBtn(), container);\n\t}\n\n\trenderCountersTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tconst ignoreList = new Set([]);\n\t\tif (this.#getParam('isScrumSpace'))\n\t\t{\n\t\t\tignoreList.add('active');\n\t\t\tignoreList.add('complete');\n\t\t}\n\n\t\tif (ignoreList.has(this.#tasksView.getCurrentViewMode()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.#counters = new TasksCounters({\n\t\t\tfilter: this.#filter,\n\t\t\tfilterRole: this.#getParam('filterRole'),\n\t\t\tuserId: this.#getParam('userId'),\n\t\t\tgroupId: this.#getParam('groupId'),\n\t\t\tcounters: this.#getParam('counters'),\n\t\t\tisUserSpace: this.#getParam('isUserSpace'),\n\t\t\tisScrumSpace: this.#getParam('isScrumSpace'),\n\t\t\ttasksView: this.#tasksView,\n\t\t});\n\n\t\tDom.append(this.#counters.render(), container);\n\t}\n\n\trenderViewBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for view btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderViewBtn(), container);\n\t}\n\n\trenderScrumShortView(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for short view btn not found');\n\t\t}\n\n\t\tconst shortView = new ShortView({\n\t\t\tisShortView: this.#getParam('isShortView'),\n\t\t});\n\n\t\tshortView.renderTo(container);\n\t\tshortView.subscribe('change', (baseEvent: BaseEvent) => {\n\t\t\tBX.Tasks.Scrum.Entry.changeShortView(baseEvent.getData());\n\t\t});\n\t}\n\n\trenderScrumSprintSelector(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for sprint selector not found');\n\t\t}\n\n\t\tDom.append(this.#tasksScrum.renderSprintSelector(), container);\n\t}\n\n\trenderScrumRobots(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for robots btn not found');\n\t\t}\n\n\t\tif (this.#getParam('activeSprintId') > 0 && this.#getParam('canEditSprint') === 'Y')\n\t\t{\n\t\t\tconst tasksRobots = new TasksRobots({\n\t\t\t\tgroupId: this.#getParam('groupId'),\n\t\t\t\tisTaskLimitsExceeded: this.#getParam('isTaskLimitsExceeded'),\n\t\t\t\tcanUseAutomation: this.#getParam('canUseAutomation'),\n\t\t\t\tsourceAnalytics: 'scrumActiveSprint',\n\t\t\t});\n\n\t\t\tDom.append(tasksRobots.renderBtn(), container);\n\t\t}\n\t}\n\n\trenderSettingsBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.TasksToolbar: HTMLElement for settings btn not found');\n\t\t}\n\n\t\tconst ignoreList = new Set([]);\n\n\t\tif (ignoreList.has(this.#tasksView.getCurrentViewMode()))\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tDom.append(this.#renderSettingsBtn(), container);\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\t#renderAddBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"ui-btn-split ui-btn-success ui-btn-round ui-btn-no-caps\">\n\t\t\t\t<a\n\t\t\t\t\tdata-id=\"spaces-tasks-add-main-btn\"\n\t\t\t\t\tclass=\"ui-btn-main\"\n\t\t\t\t\thref=\"${this.#getParam('pathToAddTask')}\"\n\t\t\t\t>\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_TASKS_ADD_TASK')}\n\t\t\t\t</a>\n\t\t\t\t<button class=\"ui-btn-menu\" data-id=\"spaces-tasks-add-menu-btn\"></button>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node.querySelector('.ui-btn-menu'), 'click', this.#addMenuClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderScrumAddBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"ui-btn-split ui-btn-round ui-btn-no-caps ui-btn-light-border ui-btn-themes\">\n\t\t\t\t<a\n\t\t\t\t\tdata-id=\"spaces-tasks-add-main-btn\"\n\t\t\t\t\tclass=\"ui-btn-main\"\n\t\t\t\t\thref=\"${this.#getParam('pathToAddTask')}\"\n\t\t\t\t>\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_TASKS_ADD_TASK')}\n\t\t\t\t</a>\n\t\t\t\t<button class=\"ui-btn-menu\" data-id=\"spaces-tasks-add-menu-btn\"></button>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node.querySelector('.ui-btn-menu'), 'click', this.#addMenuClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderViewBtn(): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-no-caps ui-btn-themes';\n\n\t\tconst node = Tag.render`\n\t\t\t<button\n\t\t\t\tdata-id=\"sn-spaces-tasks-view-mode-btn\"\n\t\t\t\tclass=\"${uiClasses} sn-spaces__toolbar-space_btn-options\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"ui-icon-set --customer-cards\"\n\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 25px;\"\n\t\t\t\t></div>\n\t\t\t\t<div class=\"sn-spaces__toolbar-space_btn-text\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_TASKS_VIEW_BTN')}\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"ui-icon-set --chevron-down\"\n\t\t\t\t\tstyle=\"--ui-icon-set__icon-size: 19px;\"\n\t\t\t\t></div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#viewClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderSettingsBtn(): HTMLElement\n\t{\n\t\tconst uiClasses = 'ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes';\n\n\t\tconst node = Tag.render`\n\t\t\t<button\n\t\t\t\tdata-id=\"spaces-tasks-settings-btn\"\n\t\t\t\tclass=\"${uiClasses} sn-spaces__toolbar-space_btn-more\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#settingsClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#addMenuClick(event)\n\t{\n\t\tCreationMenu.toggle({\n\t\t\tbindElement: event.srcElement,\n\t\t\tcreateTaskLink: this.#getParam('pathToAddTask'),\n\t\t\ttemplatesListLink: this.#getParam('pathToTemplateList'),\n\t\t});\n\t}\n\n\t#viewClick(event)\n\t{\n\t\tif (!this.#tasksViewList)\n\t\t{\n\t\t\tthis.#tasksViewList = new TasksViewList({\n\t\t\t\tbindElement: event.target,\n\t\t\t\tviewList: this.#getParam('viewList'),\n\t\t\t});\n\n\t\t\tthis.#tasksViewList.subscribe(\n\t\t\t\t'click',\n\t\t\t\t(baseEvent: BaseEvent<{ urlParam: string, urlValue: string }>) => {\n\t\t\t\t\tconst { urlParam, urlValue } = baseEvent.getData();\n\t\t\t\t\tthis.#router.redirectToTasks(urlParam, urlValue);\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\n\t\tthis.#tasksViewList.show();\n\t}\n\n\t#settingsClick(event)\n\t{\n\t\tif (!this.#settings)\n\t\t{\n\t\t\tif (this.#getParam('isUserSpace'))\n\t\t\t{\n\t\t\t\tthis.#settings = new UserSettings({\n\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\ttasksView: this.#tasksView,\n\t\t\t\t\tpathToTasks: this.#getParam('pathToTasks'),\n\t\t\t\t\torder: this.#getParam('order'),\n\t\t\t\t\tshouldSubtasksBeGrouped: this.#getParam('shouldSubtasksBeGrouped'),\n\t\t\t\t\tuserId: this.#getParam('userId'),\n\t\t\t\t\tgridId: this.#getParam('gridId'),\n\t\t\t\t\tsortFields: this.#getParam('sortFields'),\n\t\t\t\t\ttaskSort: this.#getParam('taskSort'),\n\t\t\t\t\tsyncScript: this.#getParam('syncScript'),\n\t\t\t\t\tpermissions: this.#getParam('permissions'),\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t// eslint-disable-next-line no-lonely-if\n\t\t\t\tif (this.#getParam('isScrumSpace'))\n\t\t\t\t{\n\t\t\t\t\tthis.#settings = new ScrumSettings({\n\t\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\t\tdisplayPriority: this.#getParam('displayPriority'),\n\t\t\t\t\t\ttasksView: this.#tasksView,\n\t\t\t\t\t\trouter: this.#router,\n\t\t\t\t\t\torder: this.#getParam('order'),\n\t\t\t\t\t\tactiveSprintExists: this.#getParam('activeSprintId') > 0,\n\t\t\t\t\t\tcanCompleteSprint: this.#getParam('canEditSprint') === 'Y',\n\t\t\t\t\t});\n\t\t\t\t\tthis.#settings.subscribe('completeSprint', () => this.#tasksScrum.showCompletionForm());\n\t\t\t\t\tthis.#settings.subscribe('showBurnDown', () => this.#tasksScrum.showBurnDown());\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tthis.#settings = new GroupSettings({\n\t\t\t\t\t\tbindElement: event.target,\n\t\t\t\t\t\ttasksView: this.#tasksView,\n\t\t\t\t\t\tpathToTasks: this.#getParam('pathToTasks'),\n\t\t\t\t\t\torder: this.#getParam('order'),\n\t\t\t\t\t\tshouldSubtasksBeGrouped: this.#getParam('shouldSubtasksBeGrouped'),\n\t\t\t\t\t\tuserId: this.#getParam('userId'),\n\t\t\t\t\t\tgridId: this.#getParam('gridId'),\n\t\t\t\t\t\tsortFields: this.#getParam('sortFields'),\n\t\t\t\t\t\ttaskSort: this.#getParam('taskSort'),\n\t\t\t\t\t\tsyncScript: this.#getParam('syncScript'),\n\t\t\t\t\t\tpermissions: this.#getParam('permissions'),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.#settings.subscribe('realAll', () => {\n\t\t\t\tif (this.#counters)\n\t\t\t\t{\n\t\t\t\t\tthis.#counters.readAll();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.#settings.show();\n\t}\n}\n","import { Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tdocumentHandlers: Array<DocumentHandler>\n}\n\nexport type DocumentHandler = {\n\tcode: string,\n\tname: string,\n}\n\nexport class FilesAddSettings extends EventEmitter\n{\n\t#menu: Menu;\n\t#documentHandlers: Array<DocumentHandler>;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.FilesAddSettings');\n\n\t\tthis.#documentHandlers = params.documentHandlers;\n\n\t\tthis.#menu = this.#createMenu(params.bindElement);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.toggle();\n\t}\n\n\t#createMenu(bindElement: HTMLElement): Menu\n\t{\n\t\tconst fileUploadItemId = 'spaces-files-add-file-item';\n\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-files-add-settings',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t\tevents: {\n\t\t\t\tonShow: (event) => {\n\t\t\t\t\tthis.emit('show', {\n\t\t\t\t\t\tfileUploadContainer: menu.getMenuItem(fileUploadItemId).getContainer(),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tonClose: () => {\n\t\t\t\t\tthis.emit('close', {\n\t\t\t\t\t\tfileUploadContainer: menu.getMenuItem(fileUploadItemId).getContainer(),\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\tdataset: { id: 'spaces-files-add-settings-file' },\n\t\t\tid: fileUploadItemId,\n\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_ADD_SETTINGS_FILE'),\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\tdataset: { id: 'spaces-files-add-settings-folder' },\n\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_ADD_SETTINGS_FOLDER'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.emit('addFolder');\n\t\t\t},\n\t\t});\n\n\t\tthis.#documentHandlers.forEach((handler: DocumentHandler) => {\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: `spaces-files-add-settings-type-${handler.code}` },\n\t\t\t\ttext: handler.name,\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_ADD_SETTINGS_DOC'),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tmenu.close();\n\t\t\t\t\t\t\tthis.emit('addDoc', { handlerCode: handler.code });\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_ADD_SETTINGS_TABLE'),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tmenu.close();\n\t\t\t\t\t\t\tthis.emit('addTable', { handlerCode: handler.code });\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_ADD_SETTINGS_PRESENTATION'),\n\t\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\t\tmenu.close();\n\t\t\t\t\t\t\tthis.emit('addPresentation', { handlerCode: handler.code });\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t});\n\n\t\treturn menu;\n\t}\n}\n","type Params = {\n\tpathToTrash: string,\n\tpathToUserFilesVolume: string,\n}\n\nexport class FilesRouter\n{\n\t#pathToTrash: string;\n\t#pathToVolume: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#pathToTrash = params.pathToTrash;\n\t\tthis.#pathToVolume = params.pathToUserFilesVolume;\n\t}\n\n\tredirectToTrash()\n\t{\n\t\ttop.BX.Socialnetwork.Spaces.space.reloadPageContent(this.#pathToTrash);\n\t}\n\n\tredirectToVolume()\n\t{\n\t\ttop.location.href = this.#pathToVolume;\n\t}\n}","import { Cache, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tpermissions: { [key: string]: boolean },\n\tfeatureRestrictionMap: { [key: string]: string },\n\tisTrashMode: boolean,\n}\n\nexport class FilesSettings extends EventEmitter\n{\n\t#cache = new Cache.MemoryCache();\n\t#menu: Menu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.FilesSettings');\n\n\t\tthis.#setParams(params);\n\n\t\tthis.#menu = this.#createMenu(params.bindElement);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.toggle();\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\t#createMenu(bindElement: HTMLElement): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-files-settings',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\tconst permissions = this.#getParam('permissions');\n\n\t\tif (permissions.canChangeRights === true)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: 'spaces-files-settings-rights' },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_SETTINGS_RIGHTS'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('rights');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (permissions.canChangeBizproc === true)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: 'spaces-files-settings-bizproc' },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_BIZPROC'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('bizproc');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (permissions.canChangeBizprocSettings === true)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: 'spaces-files-settings-config-bizproc' },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_SETTINGS_BIZPROC'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('bizprocSettings');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tmenu.addMenuItem({\n\t\t\tdataset: { id: 'spaces-files-settings-network' },\n\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_SETTINGS_NETWORK'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.emit('network');\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\tdataset: { id: 'spaces-files-settings-doc' },\n\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_SETTINGS_DOC'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.emit('docSettings');\n\t\t\t},\n\t\t});\n\n\t\tif (permissions.canCleanFiles === true)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: 'spaces-files-settings-clean' },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_SETTINGS_CLEAN'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('clean');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (!this.#getParam('isTrashMode'))\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\tdataset: { id: 'spaces-files-settings-trash' },\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_FILES_SETTINGS_TRASH'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.emit('trash');\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\treturn menu;\n\t}\n}\n","import { Cache } from 'main.core';\n\ntype Params = {\n\tdiskComponentId: string,\n\tnetworkDriveLink: string,\n\tpathToFilesBizprocWorkflowAdmin?: string,\n\tlistAvailableFeatures: { [key: string]: boolean },\n\tfeatureRestrictionMap: { [key: string]: string },\n}\n\nexport class FilesDisk\n{\n\t#cache = new Cache.MemoryCache();\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\t}\n\n\tcreateFolder()\n\t{\n\t\tthis.#getDiskFolderList().createFolder();\n\t}\n\n\tappendUploadInput(container: HTMLElement)\n\t{\n\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\tBX.onCustomEvent(window, 'onDiskUploadPopupShow', [container]);\n\t}\n\n\thideUploadInput(container: HTMLElement)\n\t{\n\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\tBX.onCustomEvent(window, 'onDiskUploadPopupClose', [container]);\n\t}\n\n\trunCreatingDocFile(code: string)\n\t{\n\t\tthis.#getDiskFolderList().runCreatingFile('docx', code);\n\t}\n\n\trunCreatingTableFile(code: string)\n\t{\n\t\tthis.#getDiskFolderList().runCreatingFile('xlsx', code);\n\t}\n\n\trunCreatingPresentationFile(code: string)\n\t{\n\t\tthis.#getDiskFolderList().runCreatingFile('pptx', code);\n\t}\n\n\tshowRights()\n\t{\n\t\tconst listAvailableFeatures: { [key: string]: boolean } = this.#getParam('listAvailableFeatures');\n\t\tconst featureRestrictionMap: { [key: string]: string } = this.#getParam('featureRestrictionMap');\n\n\t\tif (listAvailableFeatures.disk_folder_sharing === true)\n\t\t{\n\t\t\tthis.#getDiskFolderList().showRightsOnStorage();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.UI.InfoHelper.show(featureRestrictionMap.disk_folder_sharing);\n\t\t}\n\t}\n\n\tshowBizproc()\n\t{\n\t\tthis.#getDiskFolderList().openSlider(this.#getParam('pathToFilesBizprocWorkflowAdmin'));\n\t}\n\n\tshowBizprocSettings()\n\t{\n\t\tthis.#getDiskFolderList().showSettingsOnBizproc();\n\t}\n\n\tshowNetworkDriveConnect()\n\t{\n\t\tthis.#getDiskFolderList().showNetworkDriveConnect({\n\t\t\tlink: this.#getParam('networkDriveLink'),\n\t\t});\n\t}\n\n\topenWindowForSelectDocumentService()\n\t{\n\t\tthis.#getDiskFolderList().openWindowForSelectDocumentService({});\n\t}\n\n\tcleanTrash()\n\t{\n\t\tthis.#getDiskFolderList().openConfirmEmptyTrash();\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\t#getDiskFolderList(): BX.Disk.FolderListClass\n\t{\n\t\treturn BX.Disk[`FolderListClass_${this.#getParam('diskComponentId')}`];\n\t}\n}","import { Dom, Event, Tag, Type, Loc, Cache } from 'main.core';\nimport { BaseEvent } from 'main.core.events';\nimport { Filter } from '../filter';\nimport { DocumentHandler, FilesAddSettings } from './files-add-settings';\nimport { FilesRouter } from './files-router';\nimport { FilesSettings } from './files-settings';\nimport { FilesDisk } from './files-disk';\n\ntype Params = {\n\tdiskComponentId: string,\n\tnetworkDriveLink: string,\n\tpathToUserFilesVolume?: string,\n\tpathToFilesBizprocWorkflowAdmin?: string,\n\tpathToTrash: string,\n\tdocumentHandlers: Array<DocumentHandler>,\n\tpermissions: { [key: string]: boolean },\n\tlistAvailableFeatures: { [key: string]: boolean },\n\tfeatureRestrictionMap: { [key: string]: string },\n\tisTrashMode?: boolean,\n\tfilterId: string,\n\tfilterContainer: HTMLElement,\n}\n\nexport class FilesToolbar\n{\n\t#cache = new Cache.MemoryCache();\n\n\t#router: FilesRouter;\n\t#disk: FilesDisk;\n\t#addSettings: FilesAddSettings;\n\t#settings: FilesSettings;\n\t#filter: Filter;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\n\t\tthis.#router = new FilesRouter({\n\t\t\tpathToTrash: this.#getParam('pathToTrash'),\n\t\t\tpathToUserFilesVolume: this.#getParam('pathToUserFilesVolume'),\n\t\t});\n\n\t\tthis.#disk = new FilesDisk({\n\t\t\tdiskComponentId: params.diskComponentId,\n\t\t\tnetworkDriveLink: this.#getParam('networkDriveLink'),\n\t\t\tpathToFilesBizprocWorkflowAdmin: this.#getParam('pathToFilesBizprocWorkflowAdmin'),\n\t\t\tlistAvailableFeatures: this.#getParam('listAvailableFeatures'),\n\t\t\tfeatureRestrictionMap: this.#getParam('featureRestrictionMap'),\n\t\t});\n\n\t\tthis.#filter = new Filter({\n\t\t\tfilterId: params.filterId,\n\t\t\tfilterContainer: params.filterContainer,\n\t\t});\n\t}\n\n\trenderAddBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.FilesToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderAddBtn(), container);\n\t}\n\n\trenderCleanBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.FilesToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderCleanBtn(), container);\n\t}\n\n\trenderSettingsBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.FilesToolbar: HTMLElement for settings btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderSettingsBtn(), container);\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\t#renderAddBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"ui-btn-split ui-btn-success ui-btn-round ui-btn-no-caps\">\n\t\t\t\t<div data-id=\"spaces-files-add-main-btn\" class=\"ui-btn-main\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_FILES_ADD_FILE')}\n\t\t\t\t</div>\n\t\t\t\t<div data-id=\"spaces-files-add-menu-btn\" class=\"ui-btn-menu\"></div>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node.querySelector('.ui-btn-menu'), 'click', this.#addMenuClick.bind(this));\n\n\t\tEvent.bind(node.querySelector('.ui-btn-main'), 'mouseenter', (event) => {\n\t\t\tthis.#disk.appendUploadInput(event.target);\n\t\t});\n\t\tEvent.bind(node.querySelector('.ui-btn-main'), 'mouseleave', (event) => {\n\t\t\tthis.#disk.hideUploadInput(event.target);\n\t\t});\n\n\t\treturn node;\n\t}\n\n\t#renderCleanBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div class=\"ui-btn ui-btn-success ui-btn-round ui-btn-no-caps\">\n\t\t\t\t${Loc.getMessage('SN_SPACES_FILES_CLEAN_BTN')}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#cleanClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderSettingsBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<button\n\t\t\t\tdata-id=\"spaces-files-settings-btn\"\n\t\t\t\tclass=\"ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes sn-spaces__toolbar-space_btn-more\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#settingsClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#addMenuClick(event)\n\t{\n\t\tif (!this.#addSettings)\n\t\t{\n\t\t\tthis.#addSettings = new FilesAddSettings({\n\t\t\t\tbindElement: event.target,\n\t\t\t\tdocumentHandlers: this.#getParam('documentHandlers'),\n\t\t\t});\n\t\t\tthis.#addSettings.subscribe('show', (baseEvent: BaseEvent) => {\n\t\t\t\tconst { fileUploadContainer } = baseEvent.getData();\n\t\t\t\tthis.#disk.appendUploadInput(fileUploadContainer);\n\t\t\t});\n\t\t\tthis.#addSettings.subscribe('close', (baseEvent: BaseEvent) => {\n\t\t\t\tconst { fileUploadContainer } = baseEvent.getData();\n\t\t\t\tthis.#disk.hideUploadInput(fileUploadContainer);\n\t\t\t});\n\t\t\tthis.#addSettings.subscribe('addFolder', () => {\n\t\t\t\tthis.#disk.createFolder();\n\t\t\t});\n\t\t\tthis.#addSettings.subscribe('addDoc', (baseEvent: BaseEvent) => {\n\t\t\t\tconst { handlerCode } = baseEvent.getData();\n\t\t\t\tthis.#disk.runCreatingDocFile(handlerCode);\n\t\t\t});\n\t\t\tthis.#addSettings.subscribe('addTable', (baseEvent: BaseEvent) => {\n\t\t\t\tconst { handlerCode } = baseEvent.getData();\n\t\t\t\tthis.#disk.runCreatingTableFile(handlerCode);\n\t\t\t});\n\t\t\tthis.#addSettings.subscribe('addPresentation', (baseEvent: BaseEvent) => {\n\t\t\t\tconst { handlerCode } = baseEvent.getData();\n\t\t\t\tthis.#disk.runCreatingPresentationFile(handlerCode);\n\t\t\t});\n\t\t}\n\n\t\tthis.#addSettings.show();\n\t}\n\n\t#cleanClick()\n\t{\n\t\tthis.#disk.cleanTrash();\n\t}\n\n\t#settingsClick(event)\n\t{\n\t\tif (!this.#settings)\n\t\t{\n\t\t\tthis.#settings = new FilesSettings({\n\t\t\t\tbindElement: event.target,\n\t\t\t\tpermissions: this.#getParam('permissions'),\n\t\t\t\tfeatureRestrictionMap: this.#getParam('featureRestrictionMap'),\n\t\t\t\tisTrashMode: this.#getParam('isTrashMode'),\n\t\t\t});\n\t\t\tthis.#settings.subscribe('rights', () => {\n\t\t\t\tthis.#disk.showRights();\n\t\t\t});\n\t\t\tthis.#settings.subscribe('bizproc', () => {\n\t\t\t\tthis.#disk.showBizproc();\n\t\t\t});\n\t\t\tthis.#settings.subscribe('bizprocSettings', () => {\n\t\t\t\tthis.#disk.showBizprocSettings();\n\t\t\t});\n\t\t\tthis.#settings.subscribe('network', () => {\n\t\t\t\tthis.#disk.showNetworkDriveConnect();\n\t\t\t});\n\t\t\tthis.#settings.subscribe('clean', () => {\n\t\t\t\tthis.#router.redirectToVolume();\n\t\t\t});\n\t\t\tthis.#settings.subscribe('docSettings', () => {\n\t\t\t\tthis.#disk.openWindowForSelectDocumentService();\n\t\t\t});\n\t\t\tthis.#settings.subscribe('trash', () => {\n\t\t\t\tthis.#router.redirectToTrash();\n\t\t\t});\n\t\t}\n\n\t\tthis.#settings.show();\n\t}\n}\n","import { Type } from 'main.core';\nimport { EntryManager } from 'calendar.entry';\n\ntype Params = {\n\ttype: string;\n\tlocationAccess: boolean;\n\tuserId: number;\n\townerId: number;\n}\n\nexport class Calendar\n{\n\t#type: string;\n\t#locationAccess: boolean;\n\t#userId: number;\n\t#ownerId: number;\n\t#calendarInstance = null;\n\n\tconstructor(params: Params)\n\t{\n\t\tif (!this.#isTypeAllowed(params.type))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.Calendar: calendar type is not allowed');\n\t\t}\n\n\t\tthis.#type = params.type;\n\t\tthis.#userId = params.userId;\n\t\tthis.#ownerId = params.ownerId;\n\t\tthis.#locationAccess = params.locationAccess;\n\t}\n\n\t#isTypeAllowed(type: string): boolean\n\t{\n\t\tconst allowedType = ['user', 'group'];\n\n\t\treturn allowedType.includes(type);\n\t}\n\n\t#setCalendarInstance(): void\n\t{\n\t\tif (Type.isUndefined(window.BXEventCalendar))\n\t\t{\n\t\t\tthrow new TypeError('BX.Socialnetwork.Spaces.CalendarSettings: BXEventCalendar is not allowed');\n\t\t}\n\n\t\tconst calendarId = Object.keys(window.BXEventCalendar.instances)[0];\n\t\tthis.#calendarInstance = window.BXEventCalendar.instances[calendarId];\n\t}\n\n\tgetCalendarInstance(): BXEventCalendar.instances\n\t{\n\t\tif (!this.#calendarInstance)\n\t\t{\n\t\t\tthis.#setCalendarInstance();\n\t\t}\n\n\t\treturn this.#calendarInstance;\n\t}\n\n\taddEvent(): void\n\t{\n\t\tEntryManager.openEditSlider({\n\t\t\ttype: this.#type,\n\t\t\tisLocationCalendar: false,\n\t\t\tlocationAccess: this.#locationAccess,\n\t\t\townerId: this.#ownerId,\n\t\t\tuserId: this.#userId,\n\t\t});\n\t}\n\n\taddTask(): void\n\t{\n\t\tBX.SidePanel.Instance.open(this.#getUrlForAddTask(this.#type), { loader: 'task-new-loader' });\n\t}\n\n\t#getUrlForAddTask(type: string): string\n\t{\n\t\tlet url = '';\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'group':\n\t\t\t\turl = `/workgroups/group/${this.#ownerId}`;\n\t\t\t\tbreak;\n\t\t\tcase 'user':\n\t\t\t\turl = `/company/personal/user/${this.#ownerId}`;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow new Error('BX.Socialnetwork.Spaces.Calendar: url for add task is empty');\n\t\t}\n\n\t\treturn (`${url}/tasks/task/edit/0/`);\n\t}\n}\n","import { Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\nimport { Calendar } from './calendar';\n\ntype Params = {\n\tbindElement: ?HTMLElement,\n\tcalendar: Calendar,\n\tshowMenu: ?boolean,\n}\n\nexport class CalendarAddButtonMenu extends EventEmitter\n{\n\t#menu: Menu;\n\t#calendar: Calendar;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.CalendarAddButtonMenu');\n\n\t\tif (params.showMenu ?? true)\n\t\t{\n\t\t\tthis.#menu = this.#createMenu(params.bindElement);\n\t\t}\n\n\t\tthis.#calendar = params.calendar;\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.show();\n\t}\n\n\t#createMenu(bindElement: HTMLElement): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-calendar-add-button-menu',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('SN_SPACES_CALENDAR_CREATE_EVENT'),\n\t\t\tdataset: { id: 'spaces-calendar-add-button-menu-create-event' },\n\t\t\tonclick: () => {\n\t\t\t\tmenu.close();\n\t\t\t\tthis.#calendar.addEvent();\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('SN_SPACES_CALENDAR_CREATE_TASK'),\n\t\t\tdataset: { id: 'spaces-calendar-add-button-menu-create-task' },\n\t\t\tonclick: () => {\n\t\t\t\tmenu.close();\n\t\t\t\tthis.#calendar.addTask();\n\t\t\t},\n\t\t});\n\n\t\treturn menu;\n\t}\n}\n","import { Loc, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\nimport { Calendar } from './calendar';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tcalendar: Calendar,\n}\n\nexport class CalendarSettings extends EventEmitter\n{\n\t#menu: Menu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.CalendarSettings');\n\n\t\tif (Type.isNil(params.calendar))\n\t\t{\n\t\t\tthrow new TypeError('BX.Socialnetwork.Spaces.CalendarSettings: calendar is not available');\n\t\t}\n\n\t\tthis.#menu = this.#createMenu(params.bindElement, params.calendar);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.show();\n\t}\n\n\t#createMenu(bindElement: HTMLElement, calendar: Calendar): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-calendar-settings',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\tif (\n\t\t\tcalendar.getCalendarInstance().util.userIsOwner()\n\t\t\t|| calendar.getCalendarInstance().util.config.TYPE_ACCESS\n\t\t)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_CALENDAR_SETTINGS_SETTINGS'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tmenu.close();\n\t\t\t\t\tthis.#openSettings(calendar);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tmenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('SN_SPACES_CALENDAR_SETTINGS_CALENDARS'),\n\t\t\tonclick: () => {\n\t\t\t\tmenu.close();\n\t\t\t\tthis.#openCalendars(calendar);\n\t\t\t},\n\t\t});\n\n\t\treturn menu;\n\t}\n\n\t#openCalendars(calendar: Calendar): void\n\t{\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tthis.#getSectionInterface()\n\t\t\t.then((SectionInterface) => {\n\t\t\t\tif (!this.sectionInterface)\n\t\t\t\t{\n\t\t\t\t\tconst calendarInstance = calendar.getCalendarInstance();\n\n\t\t\t\t\tthis.sectionInterface = new SectionInterface(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcalendarContext: calendarInstance,\n\t\t\t\t\t\t\treadonly: calendarInstance.util.readOnlyMode(),\n\t\t\t\t\t\t\tsectionManager: calendarInstance.sectionManager,\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.sectionInterface.show();\n\t\t\t});\n\t}\n\n\t#openSettings(calendar: Calendar): void\n\t{\n\t\t// eslint-disable-next-line promise/catch-or-return\n\t\tthis.#getSettingsInterface()\n\t\t\t.then((SettingsInterface) => {\n\t\t\t\tif (!this.settingsInterface)\n\t\t\t\t{\n\t\t\t\t\tconst calendarInstance = calendar.getCalendarInstance();\n\n\t\t\t\t\tif (Type.isNull(calendarInstance))\n\t\t\t\t\t{\n\t\t\t\t\t\tthrow new TypeError('BX.Socialnetwork.Spaces.CalendarSettings: calendar instance is not available');\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.settingsInterface = new SettingsInterface(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcalendarContext: calendarInstance,\n\t\t\t\t\t\t\tshowPersonalSettings: calendarInstance.util.userIsOwner(),\n\t\t\t\t\t\t\tshowGeneralSettings: Boolean(calendarInstance.util.config.perm\n\t\t\t\t\t\t\t\t&& calendarInstance.util.config.perm.access),\n\t\t\t\t\t\t\tsettings: calendarInstance.util.config.settings,\n\t\t\t\t\t\t},\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tthis.settingsInterface.show();\n\t\t\t});\n\t}\n\n\t#getSectionInterface(): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst bx = BX.Calendar.Util.getBX();\n\t\t\tif (bx.Calendar.SectionInterface)\n\t\t\t{\n\t\t\t\tresolve(bx.Calendar.SectionInterface);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst extensionName = 'calendar.sectioninterface';\n\t\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\t\tbx.Runtime.loadExtension(extensionName)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tif (bx.Calendar.SectionInterface)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(bx.Calendar.SectionInterface);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.error(`Extension ${extensionName} not found`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t#getSettingsInterface(): Promise\n\t{\n\t\treturn new Promise((resolve) => {\n\t\t\tconst bx = BX.Calendar.Util.getBX();\n\t\t\tif (bx.Calendar.SettingsInterface)\n\t\t\t{\n\t\t\t\tresolve(bx.Calendar.SettingsInterface);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tconst extensionName = 'calendar.settingsinterface';\n\t\t\t\t// eslint-disable-next-line promise/catch-or-return\n\t\t\t\tbx.Runtime.loadExtension(extensionName)\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\tif (bx.Calendar.SettingsInterface)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tresolve(bx.Calendar.SettingsInterface);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tconsole.error(`Extension ${extensionName} not found`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n}\n","import { Dom, Event, Tag, Type, Loc } from 'main.core';\nimport { Filter } from '../filter';\nimport { CalendarAddButtonMenu } from './calendar-add-button-menu';\nimport { CalendarSettings } from './calendar-settings';\nimport { Calendar } from './calendar';\n\ntype Params = {\n\ttype: string;\n\tlocationAccess: ?string;\n\tuserId: number;\n\townerId: number;\n\tfilterId: string,\n\tfilterContainer: HTMLElement,\n}\n\nexport class CalendarToolbar\n{\n\t#calendar: Calendar;\n\t#addButtonMenu: CalendarAddButtonMenu;\n\t#settings: CalendarSettings;\n\t#filter: Filter;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#calendar = new Calendar({\n\t\t\ttype: params.type,\n\t\t\t// eslint-disable-next-line no-constant-binary-expression\n\t\t\tlocationAccess: params.locationAccess === '1' ?? false,\n\t\t\tuserId: params.userId,\n\t\t\townerId: params.ownerId,\n\t\t});\n\n\t\tthis.#filter = new Filter({\n\t\t\tfilterId: params.filterId,\n\t\t\tfilterContainer: params.filterContainer,\n\t\t});\n\t}\n\n\trenderAddBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.CalendarToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderAddBtn(), container);\n\t}\n\n\trenderSettingsBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.CalendarToolbar: HTMLElement for settings btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderSettingsBtn(), container);\n\t}\n\n\t#renderAddBtn(): HTMLElement\n\t{\n\t\tconst { node, mainBtn, menuBtn } = Tag.render`\n\t\t\t<div class=\"ui-btn-split ui-btn-success ui-btn-round ui-btn-no-caps\" ref=\"node\">\n\t\t\t\t<button class=\"ui-btn-main\" data-id=\"spaces-calendar-add-main-btn\" ref=\"mainBtn\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_CALENDAR_CREATE_MEETING')}\n\t\t\t\t</button>\n\t\t\t\t<button \n\t\t\t\t\tclass=\"ui-btn-menu\" \n\t\t\t\t\tid=\"spaces-calendar-toolbar-menu\" \n\t\t\t\t\tdata-id=\"spaces-calendar-add-menu-btn\"\n\t\t\t\t\tref=\"menuBtn\"\n\t\t\t\t>\t\t\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(mainBtn, 'click', this.#addMainClick.bind(this));\n\t\tEvent.bind(menuBtn, 'click', this.#addMenuClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderSettingsBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<button \n\t\t\t\tclass=\"ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes\" \n\t\t\t\tdata-id=\"spaces-calendar-settings-btn\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --more\" style=\"--ui-icon-set__icon-color: white;\"></div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#settingsClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#createAddSettings(): void\n\t{\n\t\tthis.#addButtonMenu = new CalendarAddButtonMenu({\n\t\t\tbindElement: document.getElementById('spaces-calendar-toolbar-menu'),\n\t\t\tcalendar: this.#calendar,\n\t\t});\n\t}\n\n\t#addMainClick(): void\n\t{\n\t\tthis.#calendar.addEvent();\n\t}\n\n\t#addMenuClick(): void\n\t{\n\t\tif (!this.#addButtonMenu)\n\t\t{\n\t\t\tthis.#createAddSettings();\n\t\t}\n\n\t\tthis.#addButtonMenu.show();\n\t}\n\n\t#settingsClick(event): void\n\t{\n\t\tif (!this.#settings)\n\t\t{\n\t\t\tthis.#settings = new CalendarSettings({\n\t\t\t\tbindElement: event.target,\n\t\t\t\tcalendar: this.#calendar,\n\t\t\t});\n\t\t}\n\n\t\tthis.#settings.show();\n\t}\n}\n","import { Loc, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\nimport { Calendar } from '../calendar/calendar';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tcalendar: Calendar,\n\tisDiskStorageWasObtained: boolean,\n}\n\nexport class DiscussionsAddButtonMenu extends EventEmitter\n{\n\t#menu: Menu;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.DiscussionsAddButtonMenu');\n\n\t\tif (Type.isNil(params.calendar))\n\t\t{\n\t\t\tthrow new TypeError('BX.Socialnetwork.Spaces.DiscussionsAddButtonMenu: calendar is not allowed');\n\t\t}\n\n\t\tthis.#menu = this.#createMenu(params.bindElement, params.calendar, params.isDiskStorageWasObtained);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.show();\n\t}\n\n\t#createMenu(bindElement: HTMLElement, calendar: Calendar, isDiskStorageWasObtained: boolean): Menu\n\t{\n\t\tconst fileUploadItemId = 'spaces-discussions-add-button-menu-file-item';\n\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-discussions-add-button-menu',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t\tevents: {\n\t\t\t\tonShow: (event) => {\n\t\t\t\t\tif (isDiskStorageWasObtained)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.emit('showMenu', {\n\t\t\t\t\t\t\tfileUploadContainer: menu.getMenuItem(fileUploadItemId).getContainer(),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClose: () => {\n\t\t\t\t\tif (isDiskStorageWasObtained)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.emit('closeMenu', {\n\t\t\t\t\t\t\tfileUploadContainer: menu.getMenuItem(fileUploadItemId).getContainer(),\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('SN_SPACES_DISCUSSIONS_CREATE_TASK'),\n\t\t\tdataset: { id: 'spaces-discussions-add-button-menu-create-task' },\n\t\t\tonclick: () => {\n\t\t\t\tmenu.close();\n\t\t\t\tcalendar.addTask();\n\t\t\t},\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\ttext: Loc.getMessage('SN_SPACES_DISCUSSIONS_ORGANIZE_EVENT'),\n\t\t\tdataset: { id: 'spaces-discussions-add-button-menu-organize_event' },\n\t\t\tonclick: () => {\n\t\t\t\tmenu.close();\n\t\t\t\tcalendar.addEvent();\n\t\t\t},\n\t\t});\n\n\t\tif (isDiskStorageWasObtained)\n\t\t{\n\t\t\tmenu.addMenuItem({\n\t\t\t\ttext: Loc.getMessage('SN_SPACES_DISCUSSIONS_UPLOAD_FILE'),\n\t\t\t\tdataset: { id: 'spaces-discussions-add-button-menu-file' },\n\t\t\t\tid: fileUploadItemId,\n\t\t\t});\n\t\t}\n\n\t\treturn menu;\n\t}\n}\n","import { ajax, Dom, Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\n\ntype Params = {\n\tbindElement: HTMLElement,\n\tisSmartTrackingMode: string,\n\tmainFilterId: string,\n}\n\nexport class DiscussionsSettings extends EventEmitter\n{\n\t#menu: Menu;\n\t#isSmartTrackingMode: string;\n\t#mainFilterId: string;\n\n\tstatic SWITCHER = 'smart_tracking';\n\tstatic SELECTED = 'menu-popup-item-accept';\n\tstatic DESELECTED = 'menu-popup-item-none';\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.DiscussionsSettings');\n\n\t\tthis.#mainFilterId = params.mainFilterId;\n\t\tthis.#isSmartTrackingMode = String(params.isSmartTrackingMode) === 'Y';\n\t\tthis.#menu = this.#createMenu(params.bindElement);\n\t}\n\n\tshow(): void\n\t{\n\t\tthis.#menu.show();\n\t}\n\n\t#switch(): void\n\t{\n\t\tthis.#switchMode()\n\t\t\t.then((result) => {\n\t\t\t\tthis.#switchStyle(result.data.mode);\n\t\t\t\tthis.#refresh();\n\t\t\t});\n\t}\n\n\t#createMenu(bindElement: HTMLElement): Menu\n\t{\n\t\tconst menu = new Menu({\n\t\t\tid: 'spaces-discussions-settings',\n\t\t\tbindElement,\n\t\t\tcloseByEsc: true,\n\t\t});\n\n\t\tmenu.addMenuItem({\n\t\t\tid: DiscussionsSettings.SWITCHER,\n\t\t\ttext: Loc.getMessage('SN_SPACES_DISCUSSIONS_SETTINGS_SMART_TRACKING'),\n\t\t\tclassName: this.#isSmartTrackingMode ? DiscussionsSettings.DESELECTED : DiscussionsSettings.SELECTED,\n\t\t\tonclick: this.#switch.bind(this),\n\t\t});\n\n\t\tmenu.getMenuItem();\n\n\t\treturn menu;\n\t}\n\n\t#getStyleFromMode(mode: string): string\n\t{\n\t\tif (mode === 'Y')\n\t\t{\n\t\t\treturn DiscussionsSettings.DESELECTED;\n\t\t}\n\n\t\treturn DiscussionsSettings.SELECTED;\n\t}\n\n\t#switchMode(): Promise\n\t{\n\t\treturn ajax.runAction(\n\t\t\t'socialnetwork.api.livefeed.spaces.switcher.track',\n\t\t\t{\n\t\t\t\tdata: {\n\t\t\t\t\tswitcher: {\n\t\t\t\t\t\ttype: DiscussionsSettings.SWITCHER,\n\t\t\t\t\t\tspaceId: 0,\n\t\t\t\t\t},\n\t\t\t\t\tspace: 0,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t}\n\n\t#switchStyle(mode: string): string\n\t{\n\t\tconst item = this.#menu.getMenuItem(DiscussionsSettings.SWITCHER);\n\t\tDom.removeClass(item.layout.item, DiscussionsSettings.SELECTED);\n\t\tDom.removeClass(item.layout.item, DiscussionsSettings.DESELECTED);\n\t\tDom.addClass(item.layout.item, this.#getStyleFromMode(mode));\n\t}\n\n\t#refresh()\n\t{\n\t\tconst filter = BX.Main.filterManager.getById(this.#mainFilterId);\n\n\t\tif (filter instanceof BX.Main.Filter)\n\t\t{\n\t\t\tfilter.getApi().apply();\n\t\t}\n\t}\n}","import { ajax, Loc, Tag, Text } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Menu } from 'main.popup';\nimport { PopupComponentsMaker } from 'ui.popupcomponentsmaker';\nimport { Switcher } from 'ui.switcher';\n\ntype Params = {\n\tuserId: number,\n\tspaceId: number,\n\tbindElement: HTMLElement,\n\tspaceName: string,\n\tcompositionFilters: any,\n\tmainFilterId: string,\n\tappliedFields: string[],\n}\n\nexport class DiscussionsComposition extends EventEmitter\n{\n\t#params: Params;\n\t#menu: Menu;\n\t#fields: string[];\n\t#appliedFields: string[];\n\t#switchers: Object;\n\t#spaceName: string;\n\t#spaceId: number;\n\t#userId: number;\n\n\tconstructor(params: Params)\n\t{\n\t\tsuper();\n\n\t\tthis.setEventNamespace('BX.Socialnetwork.Spaces.DiscussionsComposition');\n\n\t\tthis.#params = params;\n\t\tthis.#init();\n\t}\n\n\t#init()\n\t{\n\t\tthis.#spaceId = this.#params.spaceId;\n\t\tthis.#userId = this.#params.userId;\n\t\tthis.#spaceName = this.#params.spaceName;\n\t\tthis.#fields = this.#params.compositionFilters;\n\t\tthis.#appliedFields = JSON.parse(this.#params.appliedFields);\n\t\tthis.#switchers = {};\n\t\tthis.#menu = this.#createMenu(this.#params.bindElement);\n\t}\n\n\tshow()\n\t{\n\t\tthis.#menu.show();\n\t}\n\n\t#createMenu(bindElement: HTMLElement): PopupComponentsMaker\n\t{\n\t\treturn new PopupComponentsMaker({\n\t\t\tid: 'spaces-discussions-composition',\n\t\t\ttarget: bindElement,\n\t\t\tpadding: 0,\n\t\t\tcontentPadding: 0,\n\t\t\toffsetTop: 5,\n\t\t\twidth: 300,\n\t\t\tuseAngle: false,\n\t\t\tcontent: [\n\t\t\t\t{\n\t\t\t\t\thtml: [\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\thtml: this.#renderMenuContent(),\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\n\t#renderMenuContent()\n\t{\n\t\treturn Tag.render`\n\t\t\t<div>\n\t\t\t\t${this.#renderHeader()}\n\t\t\t\t${this.#renderFilters()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderHeader(): HTMLElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"sn-spaces-discussions-composition-header\" data-id=\"spaces-discussions-composition-header\">\n\t\t\t\t<div class=\"sn-spaces-discussions-composition-header-title\">\n\t\t\t\t\t${\n\t\t\t\t\t\tLoc\n\t\t\t\t\t\t\t.getMessage('SN_SPACES_DISCUSSION_COMPOSITION_TITLE')\n\t\t\t\t\t\t\t.replace('%SPACE_NAME%', `<span>${Text.encode(this.#spaceName)}</span>`)\n\t\t\t\t\t}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"sn-spaces-discussions-composition-header-icon\"></div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\t#renderFilters(): HTMLElement\n\t{\n\t\tconst filtersContainer = Tag.render`\n\t\t\t<div data-id=\"spaces-discussions-composition-filters\" class=\"sn-spaces-discussions-composition-filters\"></div>\n\t\t`;\n\n\t\tthis.#fields.forEach((field: string) => {\n\t\t\tconst messageId = `SN_SPACES_DISCUSSIONS_COMPOSITION_FILTER_${field.toUpperCase()}`;\n\n\t\t\tconst { container, switchButton } = Tag.render`\n\t\t\t\t<div\n\t\t\t\t\tid=\"spaces-discussions-composition-filter-${field}\" \n\t\t\t\t\tref=\"container\"\n\t\t\t\t\tclass=\"sn-spaces-discussions-composition-filters-item\"\n\t\t\t\t>\n\t\t\t\t\t<div ref=\"switchButton\" class=\"sn-spaces-discussions-composition-item-switcher\"></div>\n\t\t\t\t\t<div class=\"sn-spaces__popup-settings_name\">\n\t\t\t\t\t\t${Loc.getMessage(messageId)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tthis.#switchers[field] = new Switcher({\n\t\t\t\tnode: switchButton,\n\t\t\t\tchecked: this.#appliedFields.includes(field),\n\t\t\t\tcolor: 'green',\n\t\t\t\tsize: 'small',\n\t\t\t\thandlers: {\n\t\t\t\t\ttoggled: () => {\n\t\t\t\t\t\tif (this.#switchers[field].isChecked())\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#appliedFields.push(field);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.#appliedFields.splice(this.#appliedFields.indexOf(field), 1);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.#applyComposition();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tfiltersContainer.append(container);\n\t\t});\n\n\t\treturn filtersContainer;\n\t}\n\n\t#applyComposition()\n\t{\n\t\tthis.#setCompositionSettings().then(() => {\n\t\t\tthis.#refresh();\n\t\t});\n\t}\n\n\t#setCompositionSettings(): Promise\n\t{\n\t\treturn ajax.runAction('socialnetwork.api.livefeed.spaces.composition.setSettings', {\n\t\t\tdata: {\n\t\t\t\tcomposition: this.#spaceId,\n\t\t\t\tsettings: this.#appliedFields,\n\t\t\t},\n\t\t});\n\t}\n\n\t#refresh(): void\n\t{\n\t\tconst params = {\n\t\t\tcomposition: this.#appliedFields,\n\t\t\tcontext: 'spaces',\n\t\t\tuseBXMainFilter: 'Y',\n\t\t\tspaceId: this.#spaceId,\n\t\t\tspaceUserId: this.#userId,\n\t\t};\n\t\tBX.Livefeed.PageInstance.refresh(params, null);\n\t}\n}","import { Dom, Event, Tag, Type, Loc, Cache, Reflection } from 'main.core';\nimport { Filter } from '../filter';\nimport { DiscussionsAddButtonMenu } from './discussions-add-button-menu';\nimport { DiscussionsSettings } from './discussions-settings';\nimport { Calendar } from '../calendar/calendar';\nimport { PostForm } from 'socialnetwork.post-form';\nimport { DiscussionsComposition } from './discussions-composition';\nimport { BaseEvent } from 'main.core.events';\n\nconst NotificationCenter = Reflection.namespace('BX.UI.Notification.Center');\n\nimport '../css/discussions.css';\n\ntype Params = {\n\ttype: 'user' | 'group',\n\tlocationAccess: ?boolean,\n\tuserId: number,\n\townerId: number,\n\tspaceId: number,\n\tspaceName: string,\n\tcompositionFilters: Array<string>,\n\threfChangeSmartTrackingMode: string,\n\tisSmartTrackingMode: string,\n\tmainFilterId: string,\n\tpathToUserPage: string,\n\tpathToGroupPage: string,\n\tpathToFilesPage: string,\n\tfilterContainer: HTMLElement,\n\tisDiskStorageWasObtained: 'Y' | 'N',\n}\n\nexport class DiscussionsToolbar\n{\n\t#cache = new Cache.MemoryCache();\n\n\t#postForm: PostForm;\n\t#addButtonMenu: DiscussionsAddButtonMenu;\n\t#composition: DiscussionsComposition;\n\t#settings: DiscussionsSettings;\n\t#filter: Filter;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\n\t\tthis.#filter = new Filter({\n\t\t\tfilterId: this.#getParam('filterId'),\n\t\t\tfilterContainer: this.#getParam('filterContainer'),\n\t\t});\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\trenderAddBtnTo(container: HTMLElement): void\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.DiscussionsToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderAddBtn(), container);\n\t}\n\n\trenderCompositionBtnTo(container: HTMLElement): void\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.DiscussionsToolbar: HTMLElement for add composition btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderCompositionBtn(), container);\n\t}\n\n\trenderSettingsBtnTo(container: HTMLElement): void\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.DiscussionsToolbar: HTMLElement for settings btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderSettingsBtn(), container);\n\t}\n\n\t#renderAddBtn(): HTMLElement\n\t{\n\t\tconst { node, mainBtn, menuBtn } = Tag.render`\n\t\t\t<div class=\"ui-btn-split ui-btn-success ui-btn-round ui-btn-no-caps\" ref=\"node\">\n\t\t\t\t<button class=\"ui-btn-main\" data-id=\"spaces-discussions-add-main-btn\" ref=\"mainBtn\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_DISCUSSIONS_START_DISCUSSIONS')}\n\t\t\t\t</button>\n\t\t\t\t<button \n\t\t\t\t\tclass=\"ui-btn-menu\"  \n\t\t\t\t\tid=\"spaces-discussions-toolbar-menu\" \n\t\t\t\t\tdata-id=\"spaces-discussions-add-menu-btn\"\n\t\t\t\t\tref=\"menuBtn\"\n\t\t\t\t>\t\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(mainBtn, 'click', this.#addMainClick.bind(this));\n\t\tEvent.bind(menuBtn, 'click', this.#addMenuClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#renderCompositionBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<button \n\t\t\t\tclass=\"ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-no-caps ui-btn-themes sn-spaces__toolbar-space_btn-options\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --customer-cards\" style=\"--ui-icon-set__icon-size: 25px;\"></div>\n\t\t\t\t<div class=\"sn-spaces__toolbar-space_btn-text\">\n\t\t\t\t\t${Loc.getMessage('SN_SPACES_DISCUSSIONS_COMPOSITION')}\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ui-icon-set --chevron-down\" style=\"--ui-icon-set__icon-size: 19px;\"></div>\n\t\t\t</button>\n\t\t`;\n\n\t\tthis.#composition = new DiscussionsComposition({\n\t\t\tuserId: this.#getParam('userId'),\n\t\t\tspaceId: this.#getParam('spaceId'),\n\t\t\tbindElement: node,\n\t\t\tspaceName: this.#getParam('spaceName'),\n\t\t\tcompositionFilters: this.#getParam('compositionFilters'),\n\t\t\tmainFilterId: this.#getParam('mainFilterId'),\n\t\t\tappliedFields: this.#getParam('appliedFields'),\n\t\t});\n\n\t\tEvent.bind(node, 'click', () => this.#composition.show());\n\n\t\treturn node;\n\t}\n\n\t#renderSettingsBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<button \n\t\t\t\tclass=\"ui-btn ui-btn-light ui-btn-sm ui-btn-round ui-btn-themes sn-spaces__toolbar-space_btn-more\" \n\t\t\t\tdata-id=\"spaces-discussions-settings-btn\"\n\t\t\t>\n\t\t\t\t<div class=\"ui-icon-set --more\"></div>\n\t\t\t</button>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#settingsClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#addMainClick(): void\n\t{\n\t\tif (!this.#postForm)\n\t\t{\n\t\t\tthis.#postForm = new PostForm({\n\t\t\t\tgroupId: this.#getParam('type') === 'user' ? 0 : this.#getParam('ownerId'),\n\t\t\t\tpathToDefaultRedirect: this.#getParam('pathToUserPage'),\n\t\t\t\tpathToGroupRedirect: this.#getParam('pathToGroupPage'),\n\t\t\t});\n\t\t}\n\n\t\tthis.#postForm.show();\n\t}\n\n\t#createAddButtonMenu(): void\n\t{\n\t\tconst calendar = new Calendar({\n\t\t\ttype: this.#getParam('type'),\n\t\t\t// eslint-disable-next-line no-constant-binary-expression\n\t\t\tlocationAccess: this.#getParam('locationAccess') === '1' ?? false,\n\t\t\tuserId: this.#getParam('userId'),\n\t\t\townerId: this.#getParam('ownerId'),\n\t\t});\n\n\t\tthis.#addButtonMenu = new DiscussionsAddButtonMenu({\n\t\t\tbindElement: document.getElementById('spaces-discussions-toolbar-menu'),\n\t\t\tcalendar,\n\t\t\tisDiskStorageWasObtained: this.#getParam('isDiskStorageWasObtained') === 'Y',\n\t\t});\n\n\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\tBX.addCustomEvent(window, 'onPopupFileUploadClose', () => {\n\t\t\tthis.#showSuccessUploadNotify();\n\t\t});\n\n\t\tthis.#addButtonMenu.subscribe('showMenu', (baseEvent: BaseEvent) => {\n\t\t\tconst { fileUploadContainer } = baseEvent.getData();\n\t\t\tthis.#appendUploadInput(fileUploadContainer);\n\t\t});\n\t\tthis.#addButtonMenu.subscribe('closeMenu', (baseEvent: BaseEvent) => {\n\t\t\tconst { fileUploadContainer } = baseEvent.getData();\n\t\t\tthis.#hideUploadInput(fileUploadContainer);\n\t\t});\n\t}\n\n\t#appendUploadInput(container: HTMLElement)\n\t{\n\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\tBX.onCustomEvent(window, 'onDiskUploadPopupShow', [container]);\n\t}\n\n\t#hideUploadInput(container: HTMLElement)\n\t{\n\t\t// eslint-disable-next-line @bitrix24/bitrix24-rules/no-bx\n\t\tBX.onCustomEvent(window, 'onDiskUploadPopupClose', [container]);\n\t}\n\n\t#showSuccessUploadNotify()\n\t{\n\t\tconst content = Loc.getMessage('SN_SPACES_LINE_UPLOAD_FILE_NOTIFY_MESSAGE')\n\t\t\t.replace(\n\t\t\t\t'#handler#',\n\t\t\t\t`top.BX.Socialnetwork.Spaces.space.reloadPageContent('${this.#getParam('pathToFilesPage')}');`,\n\t\t\t)\n\t\t;\n\n\t\tNotificationCenter.notify({ content });\n\t}\n\n\t#addMenuClick(): void\n\t{\n\t\tif (!this.#addButtonMenu)\n\t\t{\n\t\t\tthis.#createAddButtonMenu();\n\t\t}\n\n\t\tthis.#addButtonMenu.show();\n\t}\n\n\t#settingsClick(event): void\n\t{\n\t\tif (!this.#settings)\n\t\t{\n\t\t\tthis.#settings = new DiscussionsSettings({\n\t\t\t\tbindElement: event.target,\n\t\t\t\tisSmartTrackingMode: this.#getParam('isSmartTrackingMode'),\n\t\t\t\tmainFilterId: this.#getParam('mainFilterId'),\n\t\t\t});\n\t\t}\n\n\t\tthis.#settings.show();\n\t}\n}\n","type Params = {\n\tpathToInvite: string,\n}\n\nexport class UsersRouter\n{\n\t#sidePanelManager: BX.SidePanel.Manager;\n\n\t#pathToInvite: string;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#sidePanelManager = BX.SidePanel.Instance;\n\n\t\tthis.#pathToInvite = params.pathToInvite;\n\t}\n\n\topenInvite()\n\t{\n\t\tthis.#sidePanelManager.open(this.#pathToInvite, {\n\t\t\twidth: 950,\n\t\t\tloader: 'group-invite-loader',\n\t\t});\n\t}\n}","import { Dom, Event, Tag, Type, Loc, Cache } from 'main.core';\nimport { UsersRouter } from './users-router';\n\ntype Params = {\n\tpathToInvite: string,\n}\n\nexport class UsersToolbar\n{\n\t#cache = new Cache.MemoryCache();\n\n\t#router: UsersRouter;\n\n\tconstructor(params: Params)\n\t{\n\t\tthis.#setParams(params);\n\n\t\tthis.#initServices(params);\n\t}\n\n\trenderInviteBtnTo(container: HTMLElement)\n\t{\n\t\tif (!Type.isDomNode(container))\n\t\t{\n\t\t\tthrow new Error('BX.Socialnetwork.Spaces.UsersToolbar: HTMLElement for add btn not found');\n\t\t}\n\n\t\tDom.append(this.#renderInviteBtn(), container);\n\t}\n\n\t#setParams(params: Params)\n\t{\n\t\tthis.#cache.set('params', params);\n\t}\n\n\t#getParam(param: string): any\n\t{\n\t\treturn this.#cache.get('params')[param];\n\t}\n\n\t#initServices(params: Params)\n\t{\n\t\tthis.#router = new UsersRouter({\n\t\t\tpathToInvite: params.pathToInvite,\n\t\t});\n\t}\n\n\t#renderInviteBtn(): HTMLElement\n\t{\n\t\tconst node = Tag.render`\n\t\t\t<div\n\t\t\t\tdata-id=\"spaces-users-invite-btn\"\n\t\t\t\tclass=\"ui-btn ui-btn-success ui-btn-round ui-btn-no-caps\"\n\t\t\t>\n\t\t\t\t${Loc.getMessage('SN_SPACES_USERS_INVITE_BTN')}\n\t\t\t</div>\n\t\t`;\n\n\t\tEvent.bind(node, 'click', this.#inviteClick.bind(this));\n\n\t\treturn node;\n\t}\n\n\t#inviteClick()\n\t{\n\t\tthis.#router.openInvite();\n\t}\n}\n"],"names":["Filter","EventEmitter","constructor","params","setEventNamespace","BX","Main","filterManager","getById","filterId","filterContainer","getFilterFieldsValues","subscribe","bind","applyFilter","toggleField","fieldName","value","getApi","extendFilter","getFilterFields","forEach","field","getAttribute","getFields","deleteField","getSearch","apply","Dom","addClass","removeClass","Object","keys","includes","Type","isArray","length","toString","TasksCounters","isUndefined","userId","parseInt","groupId","filter","filterRole","counters","isUserSpace","isScrumSpace","node","listContainerNode","listNode","render","Tag","readAll","Pull","moduleId","callback","data","command","eventHandlers","user_counter","project_counter","has","prototype","hasOwnProperty","call","method","uiClasses","activeClass","expired","counter","Event","new_comments","newComments","filterField","code","newCommentsActiveClass","counterNode","querySelector","textContent","ajax","runComponentAction","mode","then","response","catch","error","runAction","fields","role","expiredCounter","newCommentsCounter","action","console","TasksRobots","isTaskLimitsExceeded","canUseAutomation","sourceAnalytics","SidePanel","Instance","renderBtn","className","Loc","getMessage","UI","InfoHelper","show","isLimit","limitAnalyticsLabels","module","source","url","open","customLeftBoundary","cacheable","loader","TasksRouter","pathToTasks","pathToTasksTask","redirectTo","top","Socialnetwork","Spaces","space","reloadPageContent","redirectToTasks","urlParam","urlValue","viewUri","Uri","setQueryParam","redirectToScrumView","view","showTask","taskId","replace","showSidePanel","showByExtension","fullName","shortName","Runtime","loadExtension","exports","replaceAll","extension","KanbanOrder","SORT_ASC","SORT_DESC","SORT_ACTUAL","ReadAllItem","emptySpace","MenuItem","dataset","id","getViewId","text","onclick","emit","TasksSettingsMenu","bindElement","close","getMenuItems","menu","Menu","closeByEsc","menuItem","addMenuItem","camelCase","toLowerCase","group","toUpperCase","pascalCase","charAt","slice","TasksView","viewMode","getCurrentViewMode","availableModes","get","Map","Set","defaultModes","CompleteSprintItem","disabled","canCompleteSprint","KanbanSortItems","order","getItems","hiddenItems","items","push","html","KanbanSort","getInstance","disableCustomSort","Label","color","LabelColor","LIGHT_BLUE","fill","size","outerHTML","enableCustomSort","type","selectCustomOrder","classSelected","classDeselected","ScrumActiveSettings","activeSprintExists","BurnDownItem","ScrumCompleteSettings","PriorityItem","priority","isActive","Tasks","Scrum","Entry","setDisplayPriority","document","PriorityItems","ScrumPlanSettings","displayPriority","delimiter","ScrumSettings","tasksView","GroupCalendarSettings","TasksExcelManager","getExportHref","options","href","isAll","getImportHref","ExportItem","excelManager","GroupSubtasksItem","shouldSubtasksBeGrouped","event","item","status","toggleClass","layout","gridManager","gridInstance","instance","reloadTable","window","location","reload","log","ImportCsvItem","TasksSortManager","gridId","setSort","taskSort","dir","direction","undefined","post","util","add_url_param","GRID_ID","by","res","JSON","parse","err","grid","sortByColumn","sort_by","sort_order","getRows","enableDragAndDrop","disableDragAndDrop","classSortField","classSortDir","SortItem","getItem","events","onSubMenuShow","target","getSubMenu","sortFields","flatMap","isActivityField","selectedItemType","selectedItem","sortManager","menuItems","itemNode","getContainer","isFieldItem","hasClass","isDirectionItem","getId","isFieldSelected","isDirectionSelected","style","SyncItem","syncScript","eval","GroupGanttSettings","permissions","import","export","ConfigureViewItem","GroupKanbanSettings","ExportExcelItem","GroupListSettings","GroupSettings","TasksScrum","pathToScrumBurnDown","router","currentCompletedSprint","renderSprintSelector","selector","selectorLabel","Text","encode","showCompletionForm","extensionName","baseEvent","getData","showBurnDown","selectorNode","dialog","Dialog","targetNode","width","height","multiple","dropdownMode","enableSearch","compactView","showAvatars","preselectedItems","entities","onlyCompleted","dynamicLoad","dynamicSearch","onCustomEvent","sprintId","name","customData","UserCalendarSettings","UserGanttSettings","UserKanbanSettings","UserListSettings","UserSettings","TasksViewList","viewList","toggle","viewItem","key","title","selected","TasksToolbar","Cache","MemoryCache","renderAddBtnTo","container","isDomNode","Error","append","renderScrumAddBtnTo","renderCountersTo","ignoreList","add","renderViewBtnTo","renderScrumShortView","shortView","ShortView","isShortView","renderTo","changeShortView","renderScrumSprintSelector","renderScrumRobots","tasksRobots","renderSettingsBtnTo","set","param","CreationMenu","srcElement","createTaskLink","templatesListLink","FilesAddSettings","documentHandlers","fileUploadItemId","onShow","fileUploadContainer","getMenuItem","onClose","handler","handlerCode","FilesRouter","pathToTrash","pathToUserFilesVolume","redirectToTrash","redirectToVolume","FilesSettings","canChangeRights","canChangeBizproc","canChangeBizprocSettings","canCleanFiles","FilesDisk","createFolder","appendUploadInput","hideUploadInput","runCreatingDocFile","runCreatingFile","runCreatingTableFile","runCreatingPresentationFile","showRights","listAvailableFeatures","featureRestrictionMap","disk_folder_sharing","showRightsOnStorage","showBizproc","openSlider","showBizprocSettings","showSettingsOnBizproc","showNetworkDriveConnect","link","openWindowForSelectDocumentService","cleanTrash","openConfirmEmptyTrash","Disk","FilesToolbar","diskComponentId","networkDriveLink","pathToFilesBizprocWorkflowAdmin","renderCleanBtnTo","isTrashMode","Calendar","ownerId","locationAccess","getCalendarInstance","addEvent","EntryManager","openEditSlider","isLocationCalendar","addTask","allowedType","BXEventCalendar","TypeError","calendarId","instances","CalendarAddButtonMenu","showMenu","calendar","CalendarSettings","isNil","userIsOwner","config","TYPE_ACCESS","SectionInterface","sectionInterface","calendarInstance","calendarContext","readonly","readOnlyMode","sectionManager","SettingsInterface","settingsInterface","isNull","showPersonalSettings","showGeneralSettings","Boolean","perm","access","settings","Promise","resolve","bx","Util","getBX","CalendarToolbar","mainBtn","menuBtn","getElementById","DiscussionsAddButtonMenu","isDiskStorageWasObtained","DiscussionsSettings","mainFilterId","String","isSmartTrackingMode","result","SWITCHER","DESELECTED","SELECTED","switcher","spaceId","DiscussionsComposition","spaceName","compositionFilters","appliedFields","PopupComponentsMaker","padding","contentPadding","offsetTop","useAngle","content","filtersContainer","messageId","switchButton","Switcher","checked","handlers","toggled","isChecked","splice","indexOf","composition","context","useBXMainFilter","spaceUserId","Livefeed","PageInstance","refresh","NotificationCenter","Reflection","namespace","DiscussionsToolbar","renderCompositionBtnTo","PostForm","pathToDefaultRedirect","pathToGroupRedirect","addCustomEvent","notify","UsersRouter","pathToInvite","openInvite","UsersToolbar","renderInviteBtnTo"],"mappings":"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"}