{"version":3,"file":"conference-edit.bundle.js","sources":["../src/fields/title.js","../src/fields/password.js","../src/fields/invitation.js","../src/fields/planner.js","../src/fields/broadcast.js","../src/conference-edit.js"],"sourcesContent":["import {ConferenceFieldState} from \"im.const\";\n\nexport const FieldTitle =\n\t{\n\t\tname: 'conference-field-title',\n\t\tcomponent:\n\t\t\t{\n\t\t\t\tprops:\n\t\t\t\t{\n\t\t\t\t\tmode: {type: String},\n\t\t\t\t\ttitle: {type: String},\n\t\t\t\t\tdefaultValue: {type: String}\n\t\t\t\t},\n\t\t\t\tdata: function() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: 'title'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomputed:\n\t\t\t\t{\n\t\t\t\t\tisViewMode()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.mode === ConferenceFieldState.view\n\t\t\t\t\t},\n\t\t\t\t\tlocalize()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.message;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmethods:\n\t\t\t\t{\n\t\t\t\t\tswitchToEdit()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$emit('switchToEdit', this.name);\n\t\t\t\t\t},\n\t\t\t\t\tonInput(event)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$emit('titleChange', event.target.value);\n\t\t\t\t\t},\n\t\t\t\t\tonFocus(fieldName)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.name === fieldName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\tthis.$refs['input'].focus();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$on('focus', this.onFocus);\n\t\t\t\t},\n\t\t\t\ttemplate: `\n\t\t\t\t\t<div class=\"im-conference-create-section\">\n\t\t\t\t\t\t<div class=\"im-conference-create-field\">\n\t\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-title\">{{ localize['BX_IM_COMPONENT_CONFERENCE_TITLE_LABEL'] }}</label>\n\t\t\t\t\t\t\t<div v-if=\"!isViewMode\" class=\"im-conference-create-field-title-container ui-ctl\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tid=\"im-conference-create-field-title\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t:name=\"name\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"defaultValue\"\n\t\t\t\t\t\t\t\t\t:value=\"title\"\n\t\t\t\t\t\t\t\t\t@input=\"onInput\"\n\t\t\t\t\t\t\t\t\tref=\"input\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-else @click=\"switchToEdit\" class=\"im-conference-create-field-view\">{{ title }}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t},\n\t};","import {ConferenceFieldState} from \"im.const\";\n\nexport const FieldPassword =\n\t{\n\t\tname: 'conference-field-password',\n\t\tcomponent:\n\t\t\t{\n\t\t\t\tprops:\n\t\t\t\t{\n\t\t\t\t\tmode: {type: String},\n\t\t\t\t\tpassword: {type: String},\n\t\t\t\t\tpasswordNeeded: {type: Boolean}\n\t\t\t\t},\n\t\t\t\tdata: function() {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: 'password'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomputed:\n\t\t\t\t{\n\t\t\t\t\tisViewMode()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.mode === ConferenceFieldState.view\n\t\t\t\t\t},\n\t\t\t\t\tcodedValue()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.passwordNeeded)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn `${this.localize['BX_IM_COMPONENT_CONFERENCE_PASSWORD_EXISTS']} (${this.password.replace(/./g, '*')})`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.localize['BX_IM_COMPONENT_CONFERENCE_NO_PASSWORD'];\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tlocalize()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.message;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmethods:\n\t\t\t\t{\n\t\t\t\t\tswitchToEdit()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$emit('switchToEdit', this.name);\n\t\t\t\t\t},\n\t\t\t\t\tonInput(event)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$emit('passwordChange', event.target.value);\n\t\t\t\t\t},\n\t\t\t\t\tonPasswordNeededChange()\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.$emit('passwordNeededChange');\n\t\t\t\t\t},\n\t\t\t\t\tonFocus(fieldName)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.name === fieldName)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\tif (this.$refs['input'])\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.$refs['input'].focus();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tthis.$root.$on('focus', this.onFocus);\n\t\t\t\t},\n\t\t\t\ttemplate: `\n\t\t\t\t\t<div class=\"im-conference-create-section im-conference-create-password-section\">\n\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-password\">{{ localize['BX_IM_COMPONENT_CONFERENCE_PASSWORD_LABEL'] }}</label>\n\t\t\t\t\t\t<template v-if=\"!isViewMode\">\n\t\t\t\t\t\t\t<div class=\"im-conference-create-field-inline\">\n\t\t\t\t\t\t\t\t<input @input=\"onPasswordNeededChange\" type=\"checkbox\" id=\"im-conference-create-field-password-checkbox\" :checked=\"passwordNeeded\">\n\t\t\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-password-checkbox\">{{ localize['BX_IM_COMPONENT_CONFERENCE_PASSWORD_CHECKBOX_LABEL'] }}</label>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div v-if=\"passwordNeeded\" class=\"im-conference-create-field-password-container ui-ctl\">\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\t\t\tid=\"im-conference-create-field-password\"\n\t\t\t\t\t\t\t\t\tclass=\"ui-ctl-element\"\n\t\t\t\t\t\t\t\t\t:name=\"name\"\n\t\t\t\t\t\t\t\t\t:placeholder=\"localize['BX_IM_COMPONENT_CONFERENCE_PASSWORD_PLACEHOLDER']\"\n\t\t\t\t\t\t\t\t\t:value=\"password\"\n\t\t\t\t\t\t\t\t\t@input=\"onInput\"\n\t\t\t\t\t\t\t\t\tref=\"input\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<div v-else @click=\"switchToEdit\" class=\"im-conference-create-field-view\">{{ codedValue }}</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t},\n\t};","import {Text} from \"main.core\";\nimport {ConferenceFieldState} from \"im.const\";\n\nexport const FieldInvitation =\n\t{\n\t\tname: 'conference-field-invitation',\n\t\tcomponent:\n\t\t\t{\n\t\t\t\tprops:\n\t\t\t\t{\n\t\t\t\t\tinvitation: {type: Object},\n\t\t\t\t\tchatHost: {type: Object},\n\t\t\t\t\ttitle: {type: String},\n\t\t\t\t\tdefaultTitle: {type: String},\n\t\t\t\t\tpublicLink: {type: String},\n\t\t\t\t\tformMode: {type: String}\n\t\t\t\t},\n\t\t\t\tdata: function()\n\t\t\t\t{\n\t\t\t\t\treturn {\n\t\t\t\t\t\tinitialValue: null,\n\t\t\t\t\t\teditedValue: null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomputed:\n\t\t\t\t{\n\t\t\t\t\tisViewMode()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.invitation.mode === ConferenceFieldState.view;\n\t\t\t\t\t},\n\t\t\t\t\tisFormCreateMode()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.formMode === ConferenceFieldState.create;\n\t\t\t\t\t},\n\t\t\t\t\tavatarClasses()\n\t\t\t\t\t{\n\t\t\t\t\t\tconst classes = ['im-conference-create-invitation-user-avatar'];\n\n\t\t\t\t\t\tif (!this.chatHost.AVATAR)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclasses.push('im-conference-create-invitation-user-avatar-default');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn classes;\n\t\t\t\t\t},\n\t\t\t\t\tavatarStyles()\n\t\t\t\t\t{\n\t\t\t\t\t\tconst styles = {};\n\n\t\t\t\t\t\tif (this.chatHost.AVATAR)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstyles.backgroundImage = `url(${this.chatHost.AVATAR})`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn styles;\n\t\t\t\t\t},\n\t\t\t\t\tformattedInvitation()\n\t\t\t\t\t{\n\t\t\t\t\t\tlet title = this.title ? this.title : '';\n\n\t\t\t\t\t\tif (this.isFormCreateMode && !this.title)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\ttitle = this.defaultTitle;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn this.invitation.value\n\t\t\t\t\t\t\t.replace(/#CREATOR#/gm, Text.encode(this.chatHost.FULL_NAME))\n\t\t\t\t\t\t\t.replace(/#TITLE#/gm, `\"${Text.encode(title)}\"`)\n\t\t\t\t\t\t\t.replace(/#LINK#/gm, `<a href=\"${this.publicLink}\" target=\"_blank\" class=\"im-conference-create-invitation-content-text-link\">${this.publicLink}</a>`);\n\t\t\t\t\t},\n\t\t\t\t\tlocalize()\n\t\t\t\t\t{\n\t\t\t\t\t\treturn BX.message;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tmethods:\n\t\t\t\t{\n\t\t\t\t\tonEditClick()\n\t\t\t\t\t{\n\t\t\t\t\t\tconst contentWidth = this.$refs['view'].offsetWidth;\n\t\t\t\t\t\tconst contentHeight = this.$refs['view'].offsetHeight;\n\t\t\t\t\t\tthis.invitation.mode = ConferenceFieldState.edit;\n\t\t\t\t\t\tthis.invitation.value = Text.decode(this.invitation.value);\n\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\tthis.$refs['editor'].style.width = (contentWidth + 20) + 'px';\n\t\t\t\t\t\t\tthis.$refs['editor'].style.height = (contentHeight + 30) + 'px';\n\t\t\t\t\t\t\tthis.$refs['editor'].focus();\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t\tonInput(event)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!this.initialValue)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.initialValue = this.invitation.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tthis.editedValue =  Text.encode(event.target.value);\n\t\t\t\t\t},\n\t\t\t\t\tsaveChanges()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.editedValue && this.initialValue && this.initialValue !== this.editedValue)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.invitation.value = this.editedValue;\n\t\t\t\t\t\t\tthis.initialValue = null;\n\t\t\t\t\t\t\tthis.editedValue = null;\n\n\t\t\t\t\t\t\tthis.$emit('invitationUpdate', this.invitation.value);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.invitation.value = Text.encode(this.invitation.value);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.invitation.mode = ConferenceFieldState.view;\n\t\t\t\t\t},\n\t\t\t\t\tdiscardChanges()\n\t\t\t\t\t{\n\t\t\t\t\t\tif (this.initialValue)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.invitation.value = this.initialValue;\n\t\t\t\t\t\t\tthis.initialValue = null;\n\t\t\t\t\t\t\tthis.editedValue = null;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.invitation.value = Text.encode(this.invitation.value);\n\t\t\t\t\t\tthis.invitation.mode = ConferenceFieldState.view;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t\tif (this.isFormCreateMode || !this.invitation.value)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.invitation.value = this.localize['BX_IM_COMPONENT_CONFERENCE_DEFAULT_INVITATION'];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!this.isFormCreateMode && this.invitation.value)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.invitation.value = Text.encode(this.invitation.value);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttemplate: `\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<div class=\"im-conference-create-section im-conference-create-invitation-title\">\n\t\t\t\t\t\t\t{{ localize['BX_IM_COMPONENT_CONFERENCE_INVITATION_TITLE'] }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"im-conference-create-section im-conference-create-invitation-wrap\">\n\t\t\t\t\t\t\t<div class=\"im-conference-create-invitation-user\">\n\t\t\t\t\t\t\t\t<div :class=\"avatarClasses\" :style=\"avatarStyles\"></div>\n\t\t\t\t\t\t\t\t<div class=\"im-conference-create-invitation-user-name\">{{ chatHost.FIRST_NAME }}</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"im-conference-create-invitation-content\">\n\t\t\t\t\t\t\t\t<template v-if=\"isViewMode\">\n\t\t\t\t\t\t\t\t\t<div @click=\"onEditClick\" v-html=\"formattedInvitation\" contenteditable=\"false\" ref=\"view\" class=\"im-conference-create-invitation-content-text\"></div>\n\t\t\t\t\t\t\t\t\t<div @click=\"onEditClick\" class=\"im-conference-create-invitation-edit\"></div>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t\t\t<textarea @input=\"onInput\" :value=\"invitation.value\" class=\"im-conference-create-invitation-editor\" ref=\"editor\"></textarea>\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<button @click=\"saveChanges\" class=\"ui-btn ui-btn-sm ui-btn-primary\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_SAVE'] }}</button>\n\t\t\t\t\t\t\t\t\t\t<button @click=\"discardChanges\" class=\"ui-btn ui-btn-sm ui-btn-light\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_CANCEL'] }}</button>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t},\n\t};","import { Reflection, ajax as Ajax } from \"main.core\";\nimport { TagSelector } from \"ui.entity-selector\";\nimport { Planner } from \"calendar.planner\";\nimport { Util } from \"calendar.util\";\nimport { ConferenceFieldState } from \"im.const\";\nimport { BaseEvent } from \"main.core.events\";\n\nexport const FieldPlanner =\n\t{\n\t\tname: 'conference-field-planner',\n\t\tcomponent:\n\t\t\t{\n\t\t\t\tprops:\n\t\t\t\t\t{\n\t\t\t\t\t\tmode: {type: String},\n\t\t\t\t\t\tselectedUsers: {type: Array, default: []},\n\t\t\t\t\t\tchatHost: {type: Object, default: []},\n\t\t\t\t\t\tselectedDate: {type: String, default: ''},\n\t\t\t\t\t\tselectedTime: {type: String, default: ''},\n\t\t\t\t\t\tselectedDuration: {type: String, default: '30'},\n\t\t\t\t\t\tselectedDurationType: {type: String, default: 'm'}\n\t\t\t\t\t},\n\t\t\t\tdata: () => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: 'planner',\n\t\t\t\t\t\tclockInstance: null,\n\t\t\t\t\t\tplanner: null\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcomputed:\n\t\t\t\t\t{\n\t\t\t\t\t\tisViewMode()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.mode === ConferenceFieldState.view;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuserListForPlanner()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.selectedUsers.map(user => {\n\t\t\t\t\t\t\t\treturn `U${user.id}`;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tuserListForSelector()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn this.selectedUsers.map(user => {\n\t\t\t\t\t\t\t\treturn ['user', user.id];\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tformattedDateForView()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn `${this.selectedDate}, ${this.selectedTime}`;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tformattedDurationForView()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet durationTypeText;\n\t\t\t\t\t\t\tif (this.selectedDurationType === 'm')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdurationTypeText = this.localize('BX_IM_COMPONENT_CONFERENCE_DURATION_MINUTES');\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if (this.selectedDurationType === 'h')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdurationTypeText = this.localize('BX_IM_COMPONENT_CONFERENCE_DURATION_HOURS');\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn `${this.selectedDuration} ${durationTypeText}`;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tstartDateTime()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn BX.parseDate(`${this.selectedDate} ${this.selectedTime}`);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tendDateTime()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet duration = Number(this.selectedDuration);\n\t\t\t\t\t\t\tconst durationType = this.selectedDurationType;\n\n\t\t\t\t\t\t\tif (durationType === 'h')\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tduration *= 60 * 60 * 1000;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tduration *= 60 * 1000;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst endDateTime = new Date();\n\t\t\t\t\t\t\tendDateTime.setTime(this.startDateTime.getTime() + duration);\n\n\t\t\t\t\t\t\treturn endDateTime;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tlocalize()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn BX.message;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\tmethods:\n\t\t\t\t\t{\n\t\t\t\t\t\tswitchToEdit()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$emit('switchToEdit', this.name);\n\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\t//this.userSelector.renderTo(this.$refs['userSelector']);\n\t\t\t\t\t\t\t\t//this.initPlanner();\n\t\t\t\t\t\t\t\t//this.updatePlanner();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDateFieldClick(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (Reflection.getClass('BX.calendar'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.calendar({\n\t\t\t\t\t\t\t\t\tnode: event.currentTarget,\n\t\t\t\t\t\t\t\t\tfield: this.$refs['dateInput'],\n\t\t\t\t\t\t\t\t\tbTime: false,\n\t\t\t\t\t\t\t\t\tcallback_after: (event) => {\n\t\t\t\t\t\t\t\t\t\tthis.$emit('dateChange', event);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonTimeFieldClick()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.clockInstance.setNode(this.$refs['timeInput']);\n\t\t\t\t\t\t\tthis.clockInstance.setTime(this.convertToSeconds(this.selectedTime));\n\t\t\t\t\t\t\tthis.clockInstance.setCallback((value) => {\n\t\t\t\t\t\t\t\tthis.$emit('timeChange', value);\n\t\t\t\t\t\t\t\tBX.fireEvent(this.$refs['timeInput'], 'change');\n\t\t\t\t\t\t\t\tthis.clockInstance.closeWnd();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.clockInstance.Show();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonUpdateDateTime()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//$nextTick didn't help there\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.planner.updateSelector(this.startDateTime, this.endDateTime, false);\n\t\t\t\t\t\t\t}, 0);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDurationChange(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$emit('durationChange', event.target.value);\n\t\t\t\t\t\t\tthis.onUpdateDateTime();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonDurationTypeChange(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$emit('durationTypeChange', event.target.value);\n\t\t\t\t\t\t\tthis.onUpdateDateTime();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tconvertToSeconds(time)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t//method converts string '13:12\" or '03:20 am' to number of seconds\n\t\t\t\t\t\t\tconst parts = time.split(/[\\s:]+/);\n\t\t\t\t\t\t\tlet hours = parseInt(parts[0], 10);\n\t\t\t\t\t\t\tconst minutes = parseInt(parts[1], 10);\n\n\t\t\t\t\t\t\tif (parts.length === 3)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tconst modifier = parts[2];\n\t\t\t\t\t\t\t\tif (modifier === 'pm' && hours < 12)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t//'03:00 pm' => 15:00\n\t\t\t\t\t\t\t\t\thours = hours + 12;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (modifier === 'am' && hours === 12)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t//'12:00 am' => 0:00\n\t\t\t\t\t\t\t\t\thours = 0;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst secondsInHours = hours * 3600;\n\t\t\t\t\t\t\tconst secondsInMinutes = minutes * 60;\n\n\t\t\t\t\t\t\treturn secondsInHours + secondsInMinutes;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonUserSelect(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$emit('userSelect', event);\n\t\t\t\t\t\t\t//this.updatePlanner();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonUserDeselect(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$emit('userDeselect', event);\n\t\t\t\t\t\t\t//this.updatePlanner();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonUpdateUserSelector()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\tthis.$refs['userSelector'].innerHTML = '';\n\t\t\t\t\t\t\t\tthis.initUserSelector();\n\t\t\t\t\t\t\t\tthis.userSelector.renderTo(this.$refs['userSelector']);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonSwitchModeForAll(mode)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (mode === ConferenceFieldState.edit)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tthis.switchToEdit();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinitUserSelector()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.userSelector = new TagSelector({\n\t\t\t\t\t\t\t\tid: 'user-tag-selector',\n\t\t\t\t\t\t\t\tdialogOptions: {\n\t\t\t\t\t\t\t\t\tid: 'user-tag-selector',\n\t\t\t\t\t\t\t\t\tpreselectedItems: this.userListForSelector,\n\t\t\t\t\t\t\t\t\tundeselectedItems: [['user', this.chatHost.ID]],\n\t\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\t\t\t\t\t\tthis.onUserSelect(event);\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\t\t\t\t\t\tthis.onUserDeselect(event);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tentities: [\n\t\t\t\t\t\t\t\t\t\t{id: 'user'},\n\t\t\t\t\t\t\t\t\t\t{id: 'department'}\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinitClock()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.clockInstance = new BX.CClockSelector({\n\t\t\t\t\t\t\t\tstart_time: this.convertToSeconds(this.selectedTime),\n\t\t\t\t\t\t\t\tnode: this.$refs['timeInput'],\n\t\t\t\t\t\t\t\tcallback: () => {}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tinitPlanner()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.planner = new Planner({\n\t\t\t\t\t\t\t\twrap: this.$refs['plannerNode'],\n\t\t\t\t\t\t\t\tshowEntryName: true,\n\t\t\t\t\t\t\t\tshowEntriesHeader: false,\n\t\t\t\t\t\t\t\tentriesListWidth: 200,\n\t\t\t\t\t\t\t\tcompactMode: false\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tthis.planner.show();\n\t\t\t\t\t\t\tthis.planner.subscribe('onDateChange', (event) => {\n\t\t\t\t\t\t\t\tthis.onPlannerSelectorChange(event);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tupdatePlanner()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (this.selectedUsers.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tAjax.runAction('calendar.api.calendarajax.updatePlanner', {\n\t\t\t\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\t\t\t\tcodes: this.userListForPlanner,\n\t\t\t\t\t\t\t\t\t\tdateFrom: Util.formatDate(this.startDateTime.getTime() - Util.getDayLength() * 3),\n\t\t\t\t\t\t\t\t\t\tdateTo: Util.formatDate(this.startDateTime.getTime() + Util.getDayLength() * 10)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.then(response => {\n\t\t\t\t\t\t\t\t\tthis.planner.update(\n\t\t\t\t\t\t\t\t\t\tresponse.data.entries,\n\t\t\t\t\t\t\t\t\t\tresponse.data.accessibility\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tthis.planner.updateSelector(this.startDateTime, this.endDateTime, false);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(error => {});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonPlannerSelectorChange(event)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (event instanceof BaseEvent)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlet data = event.getData();\n\n\t\t\t\t\t\t\t\tconst startDateTime = data.dateFrom;\n\t\t\t\t\t\t\t\tconst duration = (data.dateTo - data.dateFrom) / 1000 / 60; //duration in minutes\n\t\t\t\t\t\t\t\tconst durationType = this.selectedDurationType;\n\n\t\t\t\t\t\t\t\tthis.$emit('dateChange', startDateTime);\n\t\t\t\t\t\t\t\tthis.$emit('timeChange', this.$parent.formatTime(startDateTime));\n\n\t\t\t\t\t\t\t\tif (durationType === 'h' && duration % 60 === 0)\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.$emit('durationChange', duration / 60);\n\t\t\t\t\t\t\t\t\tthis.$emit('durationTypeChange', 'h');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tthis.$emit('durationChange', duration);\n\t\t\t\t\t\t\t\t\tthis.$emit('durationTypeChange', 'm');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetUserAvatarStyle(user)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (user.avatar)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tbackgroundImage: `url('${encodeURI(user.avatar)}')`\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn {};\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\tcreated()\n\t\t\t\t{\n\t\t\t\t},\n\t\t\t\tmounted()\n\t\t\t\t{\n\t\t\t\t\tthis.initUserSelector();\n\t\t\t\t\tthis.userSelector.renderTo(this.$refs['userSelector']);\n\t\t\t\t\t//this.initClock();\n\t\t\t\t\t//this.initPlanner();\n\t\t\t\t\t//this.updatePlanner();\n\n\t\t\t\t\tthis.$root.$on('switchModeForAll', (mode) => {\n\t\t\t\t\t\tthis.onSwitchModeForAll(mode);\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.$root.$on('updateUserSelector', () => {\n\t\t\t\t\t\tthis.onUpdateUserSelector();\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\ttemplate: `\n\t\t\t\t\t<div class=\"im-conference-create-section im-conference-create-planner-block\">\n\t\t\t\t\t\t<!-- Date block -->\n<!--\t\t\t\t\t\t<div v-if=\"!isViewMode\" class=\"im-conference-create-date-block\">-->\n<!--\t\t\t\t\t\t\t<div class=\"im-conference-create-date-block-left\">-->\n<!--\t\t\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-date-time\">{{ localize['BX_IM_COMPONENT_CONFERENCE_START_DATE_AND_TIME'] }}</label>-->\n<!--\t\t\t\t\t\t\t\t<div class=\"im-conference-create-date-block-left-fields\">-->\n<!--\t\t\t\t\t\t\t\t\t&lt;!&ndash; Date field &ndash;&gt;-->\n<!--\t\t\t\t\t\t\t\t\t<div @click=\"onDateFieldClick\" class=\"ui-ctl ui-ctl-after-icon ui-ctl-date im-conference-create-field-date-container\">-->\n<!--\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-calendar\"></div>-->\n<!--\t\t\t\t\t\t\t\t\t\t<input @change=\"onUpdateDateTime\" type=\"text\" class=\"ui-ctl-element\" ref=\"dateInput\" :value=\"selectedDate\">-->\n<!--\t\t\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t\t\t&lt;!&ndash; Time field &ndash;&gt;-->\n<!--\t\t\t\t\t\t\t\t\t<div @click=\"onTimeFieldClick\" class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown im-conference-create-field-time-container\">-->\n<!--\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>-->\n<!--\t\t\t\t\t\t\t\t\t\t<div @change=\"onUpdateDateTime\" class=\"ui-ctl-element\" ref=\"timeInput\">{{ selectedTime }}</div>-->\n<!--\t\t\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t<div class=\"im-conference-create-date-block-right\">-->\n<!--\t\t\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-date-time\">{{ localize['BX_IM_COMPONENT_CONFERENCE_DURATION'] }}</label>-->\n<!--\t\t\t\t\t\t\t\t<div class=\"im-conference-create-date-block-right-fields\">-->\n<!--\t\t\t\t\t\t\t\t\t&lt;!&ndash; Duration field &ndash;&gt;-->\n<!--\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl im-conference-create-field-duration-container\">-->\n<!--\t\t\t\t\t\t\t\t\t\t<input @change=\"onDurationChange\" type=\"text\" class=\"ui-ctl-element\" :value=\"selectedDuration\">-->\n<!--\t\t\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t\t\t&lt;!&ndash; Duration type field &ndash;&gt;-->\n<!--\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl ui-ctl-after-icon ui-ctl-dropdown im-conference-create-field-duration-type-container\">-->\n<!--\t\t\t\t\t\t\t\t\t\t<div class=\"ui-ctl-after ui-ctl-icon-angle\"></div>-->\n<!--\t\t\t\t\t\t\t\t\t\t<select @change=\"onDurationTypeChange\" class=\"ui-ctl-element\">-->\n<!--\t\t\t\t\t\t\t\t\t\t\t<option value=\"m\" :selected=\"selectedDurationType === 'm'\">{{ localize['BX_IM_COMPONENT_CONFERENCE_DURATION_MINUTES'] }}</option>-->\n<!--\t\t\t\t\t\t\t\t\t\t\t<option value=\"h\" :selected=\"selectedDurationType === 'h'\">{{ localize['BX_IM_COMPONENT_CONFERENCE_DURATION_HOURS'] }}</option>-->\n<!--\t\t\t\t\t\t\t\t\t\t</select>-->\n<!--\t\t\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t<template v-else-if=\"isViewMode\">-->\n<!--\t\t\t\t\t\t\t<div class=\"im-conference-create-field\">-->\n<!--\t\t\t\t\t\t\t\t<div class=\"im-conference-create-label\">{{ localize['BX_IM_COMPONENT_CONFERENCE_START_DATE_AND_TIME'] }}</div>-->\n<!--\t\t\t\t\t\t\t\t<div @click=\"switchToEdit\" class=\"im-conference-create-field-view\">{{ formattedDateForView }}</div>-->\n<!--\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t\t<div class=\"im-conference-create-field\">-->\n<!--\t\t\t\t\t\t\t\t<div class=\"im-conference-create-label\">{{ localize['BX_IM_COMPONENT_CONFERENCE_DURATION'] }}</div>-->\n<!--\t\t\t\t\t\t\t\t<div @click=\"switchToEdit\" class=\"im-conference-create-field-view\">{{ formattedDurationForView }}</div>-->\n<!--\t\t\t\t\t\t\t</div>-->\n<!--\t\t\t\t\t\t</template>-->\n\t\t\t\t\t\t<div v-show=\"!isViewMode\">\n<!--\t\t\t\t\t\t\t<div class=\"im-conference-create-delimiter\"></div>-->\n\t\t\t\t\t\t\t<!-- User selector block -->\n\t\t\t\t\t\t\t<div class=\"im-conference-create-user-selector-block\">\n\t\t\t\t\t\t\t\t<div class=\"im-conference-create-field\">\n\t\t\t\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-user-selector\">{{ localize['BX_IM_COMPONENT_CONFERENCE_USER_SELECTOR_LABEL'] }}</label>\n\t\t\t\t\t\t\t\t\t<div class=\"im-conference-create-user-selector\" ref=\"userSelector\"></div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<!-- Planner block -->\n<!--\t\t\t\t\t\t\t<div v-show=\"selectedUsers.length > 0\" class=\"im-conference-create-planner-block\" ref=\"plannerNode\"></div>-->\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-show=\"isViewMode\" class=\"im-conference-create-field im-conference-create-users-view\">\n\t\t\t\t\t\t\t<div class=\"im-conference-create-label\">{{ localize['BX_IM_COMPONENT_CONFERENCE_USER_SELECTOR_LABEL'] }}</div>\n\t\t\t\t\t\t\t<div @click=\"switchToEdit\" class=\"im-conference-create-users-view-content\">\n\t\t\t\t\t\t\t\t<div v-for=\"user in selectedUsers\" :key=\"user.id\" class=\"im-conference-create-users-view-item\">\n\t\t\t\t\t\t\t\t\t<div class=\"im-conference-create-users-view-avatar\" :style=\"getUserAvatarStyle(user)\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"im-conference-create-users-view-title\">{{ user.title }}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`\n\t\t\t},\n\t};","import \"ui.vue.components.hint\";\nimport {ConferenceFieldState} from \"im.const\";\nimport { TagSelector } from \"ui.entity-selector\";\n\nexport const FieldBroadcast =\n{\n\tname: 'conference-field-broadcast',\n\tcomponent:\n\t\t{\n\t\t\tprops:\n\t\t\t\t{\n\t\t\t\t\tmode: {type: String},\n\t\t\t\t\tbroadcastMode: {type: Boolean},\n\t\t\t\t\tchatHost: {type: Object},\n\t\t\t\t\tselectedPresenters: {type: Array}\n\t\t\t\t},\n\t\t\tdata: function() {\n\t\t\t\treturn {\n\t\t\t\t\tname: 'broadcast'\n\t\t\t\t}\n\t\t\t},\n\t\t\tcomputed:\n\t\t\t{\n\t\t\t\tisViewMode()\n\t\t\t\t{\n\t\t\t\t\treturn this.mode === ConferenceFieldState.view\n\t\t\t\t},\n\t\t\t\tcodedValue()\n\t\t\t\t{\n\t\t\t\t\tif (this.broadcastMode)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.localize['BX_IM_COMPONENT_CONFERENCE_BROADCAST_MODE_ON'];\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn this.localize['BX_IM_COMPONENT_CONFERENCE_BROADCAST_MODE_OFF'];\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpresenterListForSelector()\n\t\t\t\t{\n\t\t\t\t\treturn this.selectedPresenters.map(user => {\n\t\t\t\t\t\treturn ['user', user.id];\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tlocalize()\n\t\t\t\t{\n\t\t\t\t\treturn BX.message;\n\t\t\t\t}\n\t\t\t},\n\t\t\tmethods:\n\t\t\t{\n\t\t\t\tswitchToEdit()\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('switchToEdit', this.name);\n\t\t\t\t},\n\t\t\t\tonBroadcastModeChange()\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('broadcastModeChange');\n\t\t\t\t},\n\t\t\t\tonSwitchModeForAll(mode)\n\t\t\t\t{\n\t\t\t\t\tif (mode === ConferenceFieldState.edit)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.switchToEdit();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonPresenterSelect(event)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('presenterSelect', event);\n\t\t\t\t\t//this.updatePlanner();\n\t\t\t\t},\n\t\t\t\tonPresenterDeselect(event)\n\t\t\t\t{\n\t\t\t\t\tthis.$emit('presenterDeselect', event);\n\t\t\t\t\t//this.updatePlanner();\n\t\t\t\t},\n\t\t\t\tgetUserAvatarStyle(user)\n\t\t\t\t{\n\t\t\t\t\tif (user.avatar)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tbackgroundImage: `url('${encodeURI(user.avatar)}')`\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\treturn {};\n\t\t\t\t},\n\t\t\t\tinitPresenterSelector()\n\t\t\t\t{\n\t\t\t\t\tthis.presenterSelector = new TagSelector({\n\t\t\t\t\t\tid: 'presenter-tag-selector',\n\t\t\t\t\t\tdialogOptions: {\n\t\t\t\t\t\t\tid: 'presenter-tag-selector',\n\t\t\t\t\t\t\tpreselectedItems: this.presenterListForSelector,\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\t\t\t\tthis.onPresenterSelect(event);\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\t\t\t\tthis.onPresenterDeselect(event);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tentities: [\n\t\t\t\t\t\t\t\t{id: 'user'},\n\t\t\t\t\t\t\t\t{id: 'department'}\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tonUpdatePresenterSelector()\n\t\t\t\t{\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tthis.$refs['presenterSelector'].innerHTML = '';\n\t\t\t\t\t\tthis.initPresenterSelector();\n\t\t\t\t\t\tthis.presenterSelector.renderTo(this.$refs['presenterSelector']);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tmounted()\n\t\t\t{\n\t\t\t\tthis.initPresenterSelector();\n\t\t\t\tthis.presenterSelector.renderTo(this.$refs['presenterSelector']);\n\n\t\t\t\tthis.$root.$on('switchModeForAll', (mode) => {\n\t\t\t\t\tthis.onSwitchModeForAll(mode);\n\t\t\t\t});\n\n\t\t\t\tthis.$root.$on('updatePresenterSelector', () => {\n\t\t\t\t\tthis.onUpdatePresenterSelector();\n\t\t\t\t})\n\t\t\t},\n\t\t\ttemplate: `\n\t\t\t\t<div class=\"im-conference-create-section im-conference-create-broadcast-section\">\n\t\t\t\t\t<div class=\"im-conference-create-broadcast-section-title\">\n\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-broadcast\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BROADCAST_LABEL'] }}</label>\n\t\t\t\t\t\t<bx-hint :text=\"localize['BX_IM_COMPONENT_CONFERENCE_BROADCAST_HINT']\"/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-show=\"!isViewMode\">\n\t\t\t\t\t\t<div class=\"im-conference-create-field-inline im-conference-create-field-broadcast\">\n\t\t\t\t\t\t\t<input @input=\"onBroadcastModeChange\" type=\"checkbox\" id=\"im-conference-create-field-broadcast-checkbox\" :checked=\"broadcastMode\">\n\t\t\t\t\t\t\t<label class=\"im-conference-create-label\" for=\"im-conference-create-field-broadcast-checkbox\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BROADCAST_CHECKBOX_LABEL'] }}</label>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div v-show=\"broadcastMode\" class=\"im-conference-create-user-selector-block\">\n\t\t\t\t\t\t\t<div class=\"im-conference-create-field\">\n\t\t\t\t\t\t\t\t<label class=\"im-conference-create-label im-conference-create-label-broadcast\" for=\"im-conference-create-field-user-selector\">{{ localize['BX_IM_COMPONENT_CONFERENCE_PRESENTER_SELECTOR_LABEL'] }}</label>\n\t\t\t\t\t\t\t\t<div class=\"im-conference-create-user-selector\" ref=\"presenterSelector\"></div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div v-show=\"isViewMode\">\n\t\t\t\t\t\t<div @click=\"switchToEdit\" class=\"im-conference-create-field-view\">{{ codedValue }}</div>\n\t\t\t\t\t\t<div v-if=\"broadcastMode\" @click=\"switchToEdit\" class=\"im-conference-create-field im-conference-create-users-view\">\n\t\t\t\t\t\t\t<div class=\"im-conference-create-label\">{{ localize['BX_IM_COMPONENT_CONFERENCE_PRESENTER_SELECTOR_LABEL'] }}</div>\n\t\t\t\t\t\t\t<div class=\"im-conference-create-users-view-content\">\n\t\t\t\t\t\t\t\t<div v-for=\"user in selectedPresenters\" :key=\"user.id\" class=\"im-conference-create-users-view-item\">\n\t\t\t\t\t\t\t\t\t<div class=\"im-conference-create-users-view-avatar\" :style=\"getUserAvatarStyle(user)\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"im-conference-create-users-view-title\">{{ user.title }}</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`\n\t\t},\n};","import {Reflection, Text, Dom, ajax as Ajax} from \"main.core\";\nimport {BitrixVue} from \"ui.vue\";\nimport {ConferenceFieldState} from \"im.const\";\nimport {Logger} from \"im.lib.logger\";\nimport {Clipboard} from \"im.lib.clipboard\";\n\nimport {FieldTitle} from \"./fields/title\";\nimport {FieldPassword} from \"./fields/password\";\nimport {FieldInvitation} from \"./fields/invitation\";\nimport {FieldPlanner} from \"./fields/planner\";\nimport {FieldBroadcast} from \"./fields/broadcast\";\n\nconst FieldTypes = [\n\tFieldTitle,\n\tFieldPassword,\n\tFieldInvitation,\n\tFieldPlanner,\n\tFieldBroadcast\n];\n\nconst FieldComponents = {};\nFieldTypes.forEach(fieldType => {\n\tFieldComponents[fieldType.name] = fieldType.component;\n});\n\nBitrixVue.component('bx-im-component-conference-edit',\n{\n\tprops:\n\t{\n\t\tconferenceId: {type: Number, default: 0},\n\t\tfieldsData: { type: Object, default: {} },\n\t\tmode: { type: String, default: ConferenceFieldState.create },\n\t\tchatHost: { type: Object, default: {} },\n\t\tchatUsers: { type: Array, default: [] },\n\t\tpresenters: { type: Array, default: [] },\n\t\tpublicLink: { type: String, default: '' },\n\t\tchatId: { type: Number, default: 0 },\n\t\tinvitationText: { type: String, default: '' },\n\t\tgridId: { type: String, default: '' },\n\t\tpathToList: { type: String, default: '' },\n\t\tbroadcastingEnabled: { type: Boolean, default: false }\n\t},\n\tdata: function()\n\t{\n\t\treturn {\n\t\t\tfieldsMode: {\n\t\t\t\t'title': this.mode,\n\t\t\t\t'password': this.mode,\n\t\t\t\t'planner': this.mode,\n\t\t\t\t'broadcast': this.mode\n\t\t\t},\n\t\t\tfields: {},\n\t\t\tinitialValues: {},\n\t\t\ttitle: {\n\t\t\t\tcurrentValue: '',\n\t\t\t\tinitialValue: '',\n\t\t\t\tdefaultValue: ''\n\t\t\t},\n\t\t\tinvitation: {\n\t\t\t\tvalue: '',\n\t\t\t\tmode: ConferenceFieldState.view,\n\t\t\t\tedited: false\n\t\t\t},\n\t\t\tpassword: {\n\t\t\t\tcurrentValue: '',\n\t\t\t\tinitialValue: ''\n\t\t\t},\n\t\t\tpasswordNeeded: {\n\t\t\t\tcurrentValue: false,\n\t\t\t\tinitialValue: false\n\t\t\t},\n\t\t\tselectedUsers: {\n\t\t\t\tcurrentValue: [],\n\t\t\t\tinitialValue: []\n\t\t\t},\n\t\t\tbroadcastMode: {\n\t\t\t\tcurrentValue: false,\n\t\t\t\tinitialValue: false\n\t\t\t},\n\t\t\tselectedPresenters: {\n\t\t\t\tcurrentValue: [],\n\t\t\t\tinitialValue: []\n\t\t\t},\n\t\t\tselectedDate: {\n\t\t\t\tcurrentValue: '',\n\t\t\t\tinitialValue: ''\n\t\t\t},\n\t\t\tselectedTime: {\n\t\t\t\tcurrentValue: '',\n\t\t\t\tinitialValue: ''\n\t\t\t},\n\t\t\tselectedDuration: {\n\t\t\t\tcurrentValue: '30',\n\t\t\t\tinitialValue: '30'\n\t\t\t},\n\t\t\tselectedDurationType: {\n\t\t\t\tcurrentValue: 'm',\n\t\t\t\tinitialValue: 'm'\n\t\t\t},\n\t\t\terrors: [],\n\t\t\tlinkGenerated: false,\n\t\t\taliasData: {},\n\t\t\tisSubmitting: false\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tif (this.isFormViewMode)\n\t\t{\n\t\t\tthis.title.initialValue = this.fieldsData['TITLE'];\n\t\t\tthis.password.initialValue = this.fieldsData['PASSWORD'];\n\t\t\tthis.broadcastMode.currentValue = this.fieldsData['BROADCAST'];\n\t\t\tthis.invitation.value = this.invitationText;\n\t\t\tthis.passwordNeeded.currentValue = !!this.fieldsData['PASSWORD'];\n\t\t\tthis.publicLink = Text.encode(this.publicLink);\n\n\t\t\tthis.selectedUsers.currentValue = [...this.chatUsers];\n\t\t\tif (this.fieldsData['BROADCAST'])\n\t\t\t{\n\t\t\t\tthis.selectedPresenters.currentValue = [...this.presenters]\n\t\t\t}\n\t\t}\n\t\telse if (this.isFormCreateMode)\n\t\t{\n\t\t\tthis.generateLink();\n\n\t\t\tthis.title.initialValue = '';\n\t\t\tthis.password.initialValue = '';\n\t\t\tthis.passwordNeeded.currentValue = false;\n\t\t\tthis.broadcastMode.currentValue = false;\n\n\t\t\tconst currentUser = {\n\t\t\t\tid: this.chatHost.ID,\n\t\t\t\ttitle: this.chatHost.FULL_NAME,\n\t\t\t\tavatar: this.chatHost.AVATAR\n\t\t\t};\n\t\t\tthis.selectedUsers.currentValue.push(currentUser);\n\t\t\tthis.selectedPresenters.currentValue.push(currentUser);\n\t\t}\n\t\tthis.title.currentValue = this.title.initialValue;\n\t\tthis.password.currentValue = this.password.initialValue;\n\t\tthis.passwordNeeded.initialValue = this.passwordNeeded.currentValue;\n\t\tthis.broadcastMode.initialValue = this.broadcastMode.currentValue;\n\t\tthis.selectedUsers.initialValue = [...this.selectedUsers.currentValue];\n\t\tthis.selectedPresenters.initialValue = [...this.selectedPresenters.currentValue];\n\n\t\tthis.setDefaultDateAndTime();\n\t\tthis.setDefaultDuration();\n\t},\n\tmounted()\n\t{\n\t\tif (this.isFormCreateMode)\n\t\t{\n\t\t\tthis.checkRequirements();\n\t\t}\n\t},\n\tcomputed:\n\t{\n\t\tisFormCreateMode()\n\t\t{\n\t\t\treturn this.mode === ConferenceFieldState.create;\n\t\t},\n\t\tisFormViewMode()\n\t\t{\n\t\t\treturn this.mode === ConferenceFieldState.view;\n\t\t},\n\t\tisTitleEdited()\n\t\t{\n\t\t\treturn this.fieldsMode['title'] === ConferenceFieldState.edit;\n\t\t},\n\t\tisPasswordEdited()\n\t\t{\n\t\t\treturn this.fieldsMode['password'] === ConferenceFieldState.edit;\n\t\t},\n\t\tisPlannerEdited()\n\t\t{\n\t\t\treturn this.fieldsMode['planner'] === ConferenceFieldState.edit;\n\t\t},\n\t\tisPasswordCheckboxEdited()\n\t\t{\n\t\t\treturn this.passwordNeeded.currentValue !== this.passwordNeeded.initialValue;\n\t\t},\n\t\tisBroadcastEdited()\n\t\t{\n\t\t\treturn this.fieldsMode['broadcast'] === ConferenceFieldState.edit;\n\t\t},\n\t\tisEditing()\n\t\t{\n\t\t\treturn this.isFormViewMode\n\t\t\t\t&& (this.isTitleEdited || this.isPasswordEdited || this.invitation.edited || this.isPasswordCheckboxEdited || this.isPlannerEdited || this.isBroadcastEdited);\n\t\t},\n\t\tconferenceLink()\n\t\t{\n\t\t\tif (this.isFormCreateMode)\n\t\t\t{\n\t\t\t\tif (this.linkGenerated)\n\t\t\t\t{\n\t\t\t\t\treturn this.aliasData['LINK'];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\treturn '#LINK#';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (this.isFormViewMode)\n\t\t\t{\n\t\t\t\treturn this.publicLink;\n\t\t\t}\n\t\t},\n\t\tsubmitFormButtonClasses()\n\t\t{\n\t\t\tconst classes = ['ui-btn', 'ui-btn-success'];\n\n\t\t\tif (this.isSubmitting)\n\t\t\t{\n\t\t\t\tclasses.push('ui-btn-disabled');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn BX.message;\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\t/* region 01. Mode switching */\n\t\tswitchToEdit(fieldName)\n\t\t{\n\t\t\tthis.fieldsMode[fieldName] = ConferenceFieldState.edit;\n\t\t\tthis.$root.$emit('focus', fieldName);\n\t\t},\n\t\tswitchModeForAllFields(mode)\n\t\t{\n\t\t\tfor (let field in this.fieldsMode)\n\t\t\t{\n\t\t\t\tif (this.fieldsMode.hasOwnProperty(field))\n\t\t\t\t{\n\t\t\t\t\tthis.fieldsMode[field] = mode;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.$root.$emit('switchModeForAll', mode);\n\t\t},\n\t\t/* endregion 01. Mode switching */\n\n\t\t/* region 02. Field update handlers */\n\t\tonTitleChange(newTitle)\n\t\t{\n\t\t\tthis.title.currentValue = newTitle;\n\t\t},\n\t\tonPasswordChange(newPassword)\n\t\t{\n\t\t\tthis.password.currentValue = newPassword;\n\t\t},\n\t\tonPasswordNeededChange()\n\t\t{\n\t\t\tthis.passwordNeeded.currentValue = !this.passwordNeeded.currentValue;\n\n\t\t\tif (this.passwordNeeded.currentValue)\n\t\t\t{\n\t\t\t\tthis.$root.$emit('focus', 'password');\n\t\t\t}\n\t\t},\n\t\tonBroadcastModeChange()\n\t\t{\n\t\t\tthis.broadcastMode.currentValue = !this.broadcastMode.currentValue;\n\t\t},\n\t\tonInvitationUpdate(newValue)\n\t\t{\n\t\t\tthis.invitation.value = newValue;\n\t\t\tthis.invitation.edited = true;\n\t\t},\n\t\tonUserSelect(event)\n\t\t{\n\t\t\tconst index = this.selectedUsers.currentValue.findIndex((user) => {\n\t\t\t\treturn user.id === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.selectedUsers.currentValue.push({\n\t\t\t\t\tid: event.data.item.id,\n\t\t\t\t\ttitle: event.data.item.title,\n\t\t\t\t\tavatar: event.data.item.avatar,\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonUserDeselect(event)\n\t\t{\n\t\t\tconst index = this.selectedUsers.currentValue.findIndex((user) => {\n\t\t\t\treturn user.id === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index > -1)\n\t\t\t{\n\t\t\t\tthis.selectedUsers.currentValue.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tonPresenterSelect(event)\n\t\t{\n\t\t\tconst index = this.selectedPresenters.currentValue.findIndex((user) => {\n\t\t\t\treturn user.id === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.selectedPresenters.currentValue.push({\n\t\t\t\t\tid: event.data.item.id,\n\t\t\t\t\ttitle: event.data.item.title,\n\t\t\t\t\tavatar: event.data.item.avatar,\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonPresenterDeselect(event)\n\t\t{\n\t\t\tconst index = this.selectedPresenters.currentValue.findIndex((user) => {\n\t\t\t\treturn user.id === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index > -1)\n\t\t\t{\n\t\t\t\tthis.selectedPresenters.currentValue.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tonDateChange(newDate)\n\t\t{\n\t\t\tthis.selectedDate.currentValue = BX.formatDate(newDate, BX.message('FORMAT_DATE'));\n\t\t},\n\t\tonTimeChange(newTime)\n\t\t{\n\t\t\tthis.selectedTime.currentValue = newTime;\n\t\t},\n\t\tonDurationChange(newDuration)\n\t\t{\n\t\t\tthis.selectedDuration.currentValue = String(newDuration);\n\t\t},\n\t\tonDurationTypeChange(newDurationType)\n\t\t{\n\t\t\tthis.selectedDurationType.currentValue = newDurationType;\n\t\t},\n\t\t/* endregion 02. Field update handlers */\n\n\t\t/* region 03. Actions */\n\t\tdiscardChanges()\n\t\t{\n\t\t\tthis.clearErrors();\n\n\t\t\tthis.title.currentValue = this.title.initialValue;\n\t\t\tthis.password.currentValue = this.password.initialValue;\n\t\t\tthis.passwordNeeded.currentValue = this.passwordNeeded.initialValue;\n\t\t\tthis.broadcastMode.currentValue = this.broadcastMode.initialValue;\n\t\t\tthis.selectedUsers.currentValue = [...this.selectedUsers.initialValue];\n\t\t\tthis.$root.$emit('updateUserSelector');\n\t\t\tthis.selectedPresenters.currentValue = [...this.selectedPresenters.initialValue];\n\t\t\tthis.$root.$emit('updatePresenterSelector');\n\t\t\tthis.selectedDate.currentValue = this.selectedDate.initialValue;\n\t\t\tthis.selectedTime.currentValue = this.selectedTime.initialValue;\n\t\t\tthis.selectedDuration.currentValue = this.selectedDuration.initialValue;\n\t\t\tthis.selectedDurationType.currentValue = this.selectedDurationType.initialValue;\n\n\t\t\tthis.switchModeForAllFields(ConferenceFieldState.view);\n\t\t},\n\t\topenConference()\n\t\t{\n\t\t\tif (window.top[\"BX\"])\n\t\t\t{\n\t\t\t\twindow.top[\"BX\"].Messenger.Public.openConference({ link: this.publicLink });\n\t\t\t}\n\t\t},\n\t\tcopyInvitation()\n\t\t{\n\t\t\tlet link = '';\n\t\t\tif (this.isFormCreateMode && this.linkGenerated)\n\t\t\t{\n\t\t\t\tlink = Text.decode(this.aliasData['LINK']);\n\t\t\t}\n\t\t\telse if (this.isFormViewMode)\n\t\t\t{\n\t\t\t\tlink = Text.decode(this.publicLink);\n\t\t\t}\n\n\t\t\tlet title = this.localize['BX_IM_COMPONENT_CONFERENCE_DEFAULT_TITLE'];\n\t\t\tif (this.title.currentValue)\n\t\t\t{\n\t\t\t\ttitle = this.title.currentValue;\n\t\t\t}\n\n\t\t\tconst copyValue = Text.decode(this.invitation.value)\n\t\t\t\t.replace(/#CREATOR#/gm, this.chatHost.FULL_NAME)\n\t\t\t\t.replace(/#TITLE#/gm, `\"${title}\"`)\n\t\t\t\t.replace(/#LINK#/gm, `${link}`);\n\t\t\tClipboard.copy(copyValue);\n\n\t\t\tif (Reflection.getClass('BX.UI.Notification.Center'))\n\t\t\t{\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.localize['BX_IM_COMPONENT_CONFERENCE_INVITATION_COPIED']\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\topenChat()\n\t\t{\n\t\t\tif (window.top[\"BXIM\"])\n\t\t\t{\n\t\t\t\twindow.top[\"BXIM\"].openMessenger('chat' + this.chatId);\n\t\t\t}\n\t\t},\n\t\teditAll()\n\t\t{\n\t\t\tthis.switchModeForAllFields(ConferenceFieldState.edit);\n\t\t},\n\t\t/* endregion 03. Actions */\n\n\t\t/* region 04. Form handling */\n\t\tsubmitForm()\n\t\t{\n\t\t\tif (this.isSubmitting)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthis.isSubmitting = true;\n\n\t\t\tconst fieldsToSubmit = {};\n\n\t\t\tfieldsToSubmit['title'] = this.title.currentValue;\n\t\t\tfieldsToSubmit['password_needed'] = this.passwordNeeded.currentValue;\n\t\t\tfieldsToSubmit['password'] = this.password.currentValue;\n\t\t\tfieldsToSubmit['id'] = this.conferenceId;\n\t\t\tfieldsToSubmit['invitation'] = Text.decode(this.invitation.value);\n\t\t\tfieldsToSubmit['users'] = this.selectedUsers.currentValue.map(user => user.id);\n\t\t\tfieldsToSubmit['broadcast_mode'] = this.broadcastMode.currentValue;\n\t\t\tfieldsToSubmit['presenters'] = this.selectedPresenters.currentValue.map(user => user.id);\n\n\t\t\tthis.clearErrors();\n\n\t\t\tif (this.isFormViewMode || this.linkGenerated)\n\t\t\t{\n\t\t\t\tAjax.runAction('im.conference.create', {\n\t\t\t\t\tjson: {\n\t\t\t\t\t\tfields: fieldsToSubmit,\n\t\t\t\t\t\taliasData: this.aliasData\n\t\t\t\t\t},\n\t\t\t\t\tanalyticsLabel: {\n\t\t\t\t\t\tcreationType: 'section'\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.then((response) => {\n\t\t\t\t\tthis.onSuccessfulSubmit();\n\t\t\t\t})\n\t\t\t\t.catch((response) => {\n\t\t\t\t\tthis.onFailedSubmit(response);\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t\tonSuccessfulSubmit()\n\t\t{\n\t\t\tif (this.isFormCreateMode)\n\t\t\t{\n\t\t\t\tthis.copyInvitation();\n\t\t\t}\n\t\t\tthis.isSubmitting = false;\n\t\t\tthis.closeSlider();\n\t\t\tthis.reloadGrid();\n\t\t},\n\t\tonFailedSubmit(response)\n\t\t{\n\t\t\tthis.isSubmitting = false;\n\t\t\tlet errorMessage = response[\"errors\"][0].message;\n\t\t\tif (response[\"errors\"][0].code === 'NETWORK_ERROR')\n\t\t\t{\n\t\t\t\terrorMessage = this.localize['BX_IM_COMPONENT_CONFERENCE_NETWORK_ERROR'];\n\t\t\t}\n\t\t\tthis.addError(errorMessage);\n\t\t},\n\t\t/* endregion 04. Form handling */\n\n\t\t/* region 05. Helpers */\n\t\tcheckRequirements()\n\t\t{\n\t\t\tif (!top.BX.PULL.isPublishingEnabled())\n\t\t\t{\n\t\t\t\tthis.disableButton();\n\t\t\t\tthis.addError(this.localize['BX_IM_COMPONENT_CONFERENCE_PUSH_ERROR']);\n\t\t\t}\n\n\t\t\tif (!top.BX.Call.Util.isCallServerAllowed())\n\t\t\t{\n\t\t\t\tthis.disableButton();\n\t\t\t\tthis.addError(this.localize['BX_IM_COMPONENT_CONFERENCE_VOXIMPLANT_ERROR_WITH_LINK']);\n\t\t\t}\n\t\t},\n\t\tdisableButton()\n\t\t{\n\t\t\tconst createButton = document.querySelector('#im-conference-create-wrap #ui-button-panel-save');\n\t\t\tif (createButton)\n\t\t\t{\n\t\t\t\tDom.addClass(createButton, ['ui-btn-disabled', 'ui-btn-icon-lock']);\n\t\t\t}\n\t\t},\n\t\tgenerateLink()\n\t\t{\n\t\t\tAjax.runAction('im.conference.prepare', {\n\t\t\t\tjson: {},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tcreationType: 'section'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.aliasData = response.data['ALIAS_DATA'];\n\t\t\t\tthis.aliasData['LINK'] = Text.encode(this.aliasData['LINK']);\n\t\t\t\tthis.title.defaultValue = response.data['DEFAULT_TITLE'];\n\t\t\t\tthis.linkGenerated = true;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tLogger.warn('error', response[\"errors\"][0].message);\n\t\t\t});\n\t\t},\n\t\taddError(errorText)\n\t\t{\n\t\t\tthis.errors.push(errorText);\n\t\t},\n\t\tclearErrors()\n\t\t{\n\t\t\tthis.errors = [];\n\t\t},\n\t\tcloseSlider()\n\t\t{\n\t\t\tif (Reflection.getClass('BX.SidePanel'))\n\t\t\t{\n\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t}\n\t\t},\n\t\treloadGrid()\n\t\t{\n\t\t\tif (Reflection.getClass('top.BX.Main.gridManager'))\n\t\t\t{\n\t\t\t\ttop.BX.Main.gridManager.reload(this.gridId);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\ttop.window.location = this.pathToList;\n\t\t\t}\n\t\t},\n\t\tsetDefaultDateAndTime()\n\t\t{\n\t\t\tconst date = new Date();\n\t\t\tconst minutes = date.getMinutes();\n\t\t\tconst mod = minutes % 5;\n\n\t\t\tif (mod > 0)\n\t\t\t{\n\t\t\t\tdate.setMinutes(minutes - mod + (mod > 2 ? 5 : 0));\n\t\t\t}\n\n\t\t\tthis.selectedDate.currentValue = BX.formatDate(date, BX.message('FORMAT_DATE'));\n\t\t\tthis.selectedDate.initialValue = this.selectedDate.currentValue;\n\t\t\tthis.selectedTime.currentValue = this.formatTime(date);\n\t\t\tthis.selectedTime.initialValue = this.selectedTime.currentValue;\n\t\t},\n\t\tsetDefaultDuration()\n\t\t{\n\t\t\tthis.selectedDuration.currentValue = '30';\n\t\t\tthis.selectedDuration.initialValue = this.selectedDuration.currentValue;\n\t\t\tthis.selectedDurationType.currentValue = 'm';\n\t\t\tthis.selectedDurationType.initialValue = this.selectedDurationType.currentValue;\n\t\t},\n\t\tformatTime(date)\n\t\t{\n\t\t\tconst dateFormat = BX.date.convertBitrixFormat(BX.message('FORMAT_DATE')).replace(/:?\\s*s/, '');\n\t\t\tconst timeFormat = BX.date.convertBitrixFormat(BX.message('FORMAT_DATETIME')).replace(/:?\\s*s/, '');\n\t\t\tconst dateString = BX.date.format(dateFormat, date);\n\t\t\tconst timeString = BX.date.format(timeFormat, date);\n\n\t\t\treturn BX.util.trim(timeString.replace(dateString, ''));\n\t\t}\n\t\t/* endregion 05. Helpers */\n\t},\n\tcomponents: FieldComponents,\n\ttemplate: `\n\t\t<div>\n\t\t\t<template v-if=\"errors.length > 0\">\n\t\t\t\t<div class=\"ui-alert ui-alert-danger\" id=\"im-conference-create-errors\">\n\t\t\t\t\t<span v-for=\"error in errors\" class=\"ui-alert-message\" v-html=\"error\"></span>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<div class=\"im-conference-create-block im-conference-create-fields-wrapper\">\n\t\t\t\t<!-- Form fields -->\n\t\t\t\t<conference-field-title\n\t\t\t\t\t:mode=\"fieldsMode['title']\"\n\t\t\t\t\t:title=\"title.currentValue\"\n\t\t\t\t\t:defaultValue=\"title.defaultValue\"\n\t\t\t\t\t@titleChange=\"onTitleChange\"\n\t\t\t\t\t@switchToEdit=\"switchToEdit\"\n\t\t\t\t/>\n\t\t\t\t<conference-field-planner\n\t\t\t\t\t:mode=\"fieldsMode['planner']\"\n\t\t\t\t\t:selectedUsers=\"selectedUsers.currentValue\"\n\t\t\t\t\t:selectedDate=\"selectedDate.currentValue\"\n\t\t\t\t\t:selectedTime=\"selectedTime.currentValue\"\n\t\t\t\t\t:selectedDuration=\"selectedDuration.currentValue\"\n\t\t\t\t\t:selectedDurationType=\"selectedDurationType.currentValue\"\n\t\t\t\t\t:chatHost=\"chatHost\"\n\t\t\t\t\t@userSelect=\"onUserSelect\"\n\t\t\t\t\t@userDeselect=\"onUserDeselect\"\n\t\t\t\t\t@dateChange=\"onDateChange\"\n\t\t\t\t\t@timeChange=\"onTimeChange\"\n\t\t\t\t\t@durationChange=\"onDurationChange\"\n\t\t\t\t\t@durationTypeChange=\"onDurationTypeChange\"\n\t\t\t\t\t@switchToEdit=\"switchToEdit\"\n\t\t\t\t/>\n\t\t\t\t<conference-field-password\n\t\t\t\t\t:mode=\"fieldsMode['password']\"\n\t\t\t\t\t:password=\"password.currentValue\"\n\t\t\t\t\t:passwordNeeded=\"passwordNeeded.currentValue\"\n\t\t\t\t\t@passwordChange=\"onPasswordChange\"\n\t\t\t\t\t@passwordNeededChange=\"onPasswordNeededChange\"\n\t\t\t\t\t@switchToEdit=\"switchToEdit\"\n\t\t\t\t/>\n<!--\t\t\t\t<div v-if=\"isFormCreateMode\" class=\"im-conference-create-delimiter im-conference-create-delimiter-small\"></div>-->\n\t\t\t\t<template v-if=\"broadcastingEnabled\">\n\t\t\t\t\t<conference-field-broadcast\n\t\t\t\t\t\t:mode=\"fieldsMode['broadcast']\"\n\t\t\t\t\t\t:broadcastMode=\"broadcastMode.currentValue\"\n\t\t\t\t\t\t:selectedPresenters=\"selectedPresenters.currentValue\"\n\t\t\t\t\t\t:chatHost=\"chatHost\"\n\t\t\t\t\t\t@broadcastModeChange=\"onBroadcastModeChange\"\n\t\t\t\t\t\t@switchToEdit=\"switchToEdit\"\n\t\t\t\t\t\t@presenterSelect=\"onPresenterSelect\"\n\t\t\t\t\t\t@presenterDeselect=\"onPresenterDeselect\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t\t<!-- Action buttons -->\n\t\t\t\t<template v-if=\"!isFormCreateMode\">\n\t\t\t\t\t<div class=\"im-conference-create-section im-conference-create-actions\">\n\t\t\t\t\t\t<button @click=\"openConference\" class=\"ui-btn ui-btn-sm ui-btn-primary ui-btn-icon-camera\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_START'] }}</button>\n\t\t\t\t\t\t<button @click=\"copyInvitation\" class=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-share\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_INVITATION_COPY'] }}</button>\n\t\t\t\t\t\t<button @click=\"openChat\" class=\"ui-btn ui-btn-sm ui-btn-light-border ui-btn-icon-chat\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_CHAT'] }}</button>\n\t\t\t\t\t\t<button @click=\"editAll\" class=\"ui-btn ui-btn-sm ui-btn-light\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_EDIT'] }}</button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<!-- Bottom button panel -->\n\t\t\t\t<div v-if=\"isEditing\" class=\"im-conference-create-button-panel-edit ui-button-panel-wrapper ui-pinner ui-pinner-bottom ui-pinner-full-width\">\n\t\t\t\t\t<div class=\"ui-button-panel ui-button-panel-align-center\">\n\t\t\t\t\t\t<button @click=\"submitForm\" id=\"ui-button-panel-save\" :class=\"submitFormButtonClasses\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_SAVE'] }}</button>\n\t\t\t\t\t\t<a @click=\"discardChanges\" id=\"ui-button-panel-cancel\" class=\"ui-btn ui-btn-link\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_CANCEL'] }}</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div v-else-if=\"isFormCreateMode\" class=\"im-conference-create-button-panel-add ui-button-panel-wrapper ui-pinner ui-pinner-bottom ui-pinner-full-width\">\n\t\t\t\t\t<div class=\"ui-button-panel ui-button-panel-align-center\">\n\t\t\t\t\t\t<button @click=\"submitForm\" id=\"ui-button-panel-save\" name=\"save\" value=\"Y\" :class=\"submitFormButtonClasses\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_CREATE'] }}</button>\n\t\t\t\t\t\t<a @click=\"closeSlider\" id=\"ui-button-panel-cancel\" class=\"ui-btn ui-btn-link\">{{ localize['BX_IM_COMPONENT_CONFERENCE_BUTTON_CANCEL'] }}</a>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"im-conference-create-delimiter\"></div>\n\t\t\t\t<!-- Invitation -->\n\t\t\t\t<conference-field-invitation\n\t\t\t\t\t:invitation=\"invitation\"\n\t\t\t\t\t:chatHost=\"chatHost\"\n\t\t\t\t\t:title=\"title.currentValue\"\n\t\t\t\t\t:defaultTitle=\"title.defaultValue\"\n\t\t\t\t\t:publicLink=\"conferenceLink\"\n\t\t\t\t\t:formMode=\"mode\"\n\t\t\t\t\t@invitationUpdate=\"onInvitationUpdate\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`\n});"],"names":["FieldTitle","name","component","props","mode","type","String","title","defaultValue","data","computed","isViewMode","ConferenceFieldState","view","localize","BX","message","methods","switchToEdit","$emit","onInput","event","target","value","onFocus","fieldName","$nextTick","$refs","focus","created","$root","$on","template","FieldPassword","password","passwordNeeded","Boolean","codedValue","replace","onPasswordNeededChange","FieldInvitation","invitation","Object","chatHost","defaultTitle","publicLink","formMode","initialValue","editedValue","isFormCreateMode","create","avatarClasses","classes","AVATAR","push","avatarStyles","styles","backgroundImage","formattedInvitation","Text","encode","FULL_NAME","onEditClick","contentWidth","offsetWidth","contentHeight","offsetHeight","edit","decode","style","width","height","saveChanges","discardChanges","FieldPlanner","selectedUsers","Array","selectedDate","selectedTime","selectedDuration","selectedDurationType","clockInstance","planner","userListForPlanner","map","user","id","userListForSelector","formattedDateForView","formattedDurationForView","durationTypeText","startDateTime","parseDate","endDateTime","duration","Number","durationType","Date","setTime","getTime","onDateFieldClick","Reflection","getClass","calendar","node","currentTarget","field","bTime","callback_after","onTimeFieldClick","setNode","convertToSeconds","setCallback","fireEvent","closeWnd","Show","onUpdateDateTime","setTimeout","updateSelector","onDurationChange","onDurationTypeChange","time","parts","split","hours","parseInt","minutes","length","modifier","secondsInHours","secondsInMinutes","onUserSelect","onUserDeselect","onUpdateUserSelector","innerHTML","initUserSelector","userSelector","renderTo","onSwitchModeForAll","TagSelector","dialogOptions","preselectedItems","undeselectedItems","ID","events","entities","initClock","CClockSelector","start_time","callback","initPlanner","Planner","wrap","showEntryName","showEntriesHeader","entriesListWidth","compactMode","show","subscribe","onPlannerSelectorChange","updatePlanner","Ajax","runAction","codes","dateFrom","Util","formatDate","getDayLength","dateTo","then","response","update","entries","accessibility","error","BaseEvent","getData","$parent","formatTime","getUserAvatarStyle","avatar","encodeURI","mounted","FieldBroadcast","broadcastMode","selectedPresenters","presenterListForSelector","onBroadcastModeChange","onPresenterSelect","onPresenterDeselect","initPresenterSelector","presenterSelector","onUpdatePresenterSelector","FieldTypes","FieldComponents","forEach","fieldType","BitrixVue","conferenceId","fieldsData","chatUsers","presenters","chatId","invitationText","gridId","pathToList","broadcastingEnabled","fieldsMode","fields","initialValues","currentValue","edited","errors","linkGenerated","aliasData","isSubmitting","isFormViewMode","generateLink","currentUser","setDefaultDateAndTime","setDefaultDuration","checkRequirements","isTitleEdited","isPasswordEdited","isPlannerEdited","isPasswordCheckboxEdited","isBroadcastEdited","isEditing","conferenceLink","submitFormButtonClasses","switchModeForAllFields","hasOwnProperty","onTitleChange","newTitle","onPasswordChange","newPassword","onInvitationUpdate","newValue","index","findIndex","item","splice","onDateChange","newDate","onTimeChange","newTime","newDuration","newDurationType","clearErrors","openConference","window","top","Messenger","Public","link","copyInvitation","copyValue","Clipboard","copy","UI","Notification","Center","notify","content","openChat","openMessenger","editAll","submitForm","fieldsToSubmit","json","analyticsLabel","creationType","onSuccessfulSubmit","onFailedSubmit","closeSlider","reloadGrid","errorMessage","code","addError","PULL","isPublishingEnabled","disableButton","Call","isCallServerAllowed","createButton","document","querySelector","Dom","addClass","Logger","warn","errorText","SidePanel","Instance","close","Main","gridManager","reload","location","date","getMinutes","mod","setMinutes","dateFormat","convertBitrixFormat","timeFormat","dateString","format","timeString","util","trim","components"],"mappings":"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"}