{"version":3,"file":"sliderloader.bundle.js","sources":["../src/sliderloader.js"],"sourcesContent":["\"use strict\";\nimport {Loc, Runtime, Type} from \"main.core\";\nexport class SliderLoader\n{\n\tconstructor(eventId, options = {})\n\t{\n\t\tthis.extensionName = (Type.isString(eventId) && (eventId === 'NEW' || eventId.substr(0, 4) === 'EDIT'))\n\t\t\t? 'EventEditForm'\n\t\t\t: 'EventViewForm';\n\n\t\tthis.entryId = (Type.isString(eventId) && eventId.substr(0, 4) === 'EDIT')\n\t\t\t? parseInt(eventId.substr(4))\n\t\t\t: parseInt(eventId);\n\n\t\tthis.entry = options.entry || null;\n\t\tthis.formDataValue = options.formDataValue || null;\n\t\tthis.entryDateFrom = Type.isDate(options.entryDateFrom) ? options.entryDateFrom : null\n\t\tthis.timezoneOffset = options.timezoneOffset;\n\t\tthis.type = options.type;\n\t\tthis.ownerId = options.ownerId;\n\t\tthis.userId = options.userId;\n\t\tthis.sliderId = \"calendar:slider-\" + Math.random();\n\t}\n\n\tshow()\n\t{\n\t\tBX.SidePanel.Instance.open(this.sliderId, {\n\t\t\tcontentCallback: this.loadExtension.bind(this),\n\t\t\tlabel: {\n\t\t\t\ttext: Loc.getMessage('CALENDAR_EVENT'),\n\t\t\t\tbgColor: \"#55D0E0\"\n\t\t\t}\n\t\t});\n\t}\n\n\tloadExtension(slider)\n\t{\n\t\treturn new Promise((resolve) => {\n\n\t\t\tconst extensionName = 'calendar.' + this.extensionName.toLowerCase();\n\t\t\tRuntime.loadExtension(extensionName).then((exports) => {\n\t\t\t\tif (exports && exports[this.extensionName])\n\t\t\t\t{\n\t\t\t\t\tconst calendarForm = new exports[this.extensionName](\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tentryId: this.entryId,\n\t\t\t\t\t\t\tentry: this.entry,\n\t\t\t\t\t\t\tentryDateFrom: this.entryDateFrom,\n\t\t\t\t\t\t\ttimezoneOffset: this.timezoneOffset,\n\t\t\t\t\t\t\ttype: this.type,\n\t\t\t\t\t\t\townerId: this.ownerId,\n\t\t\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t\t\tformDataValue: this.formDataValue\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tif (typeof calendarForm.initInSlider)\n\t\t\t\t\t{\n\t\t\t\t\t\tcalendarForm.initInSlider(slider, resolve);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tconsole.error(`Extension \"calendar.${extensionName}\" not found`);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}"],"names":["SliderLoader","eventId","options","extensionName","Type","isString","substr","entryId","parseInt","entry","formDataValue","entryDateFrom","isDate","timezoneOffset","type","ownerId","userId","sliderId","Math","random","BX","SidePanel","Instance","open","contentCallback","loadExtension","bind","label","text","Loc","getMessage","bgColor","slider","Promise","resolve","toLowerCase","Runtime","then","exports","calendarForm","initInSlider","console","error"],"mappings":"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"}