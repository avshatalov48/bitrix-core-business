const fs=require("fs");const path=require("path");const fetchDependencies=require("./fetch-dependencies");const makeDepsPhpContent=require("./make-deps-php-content");const getExtensionsPath=require("./get-extensions-path");module.exports=function e(n){const t=path.join(getExtensionsPath(),...n.targetExtension.split("/"));const s=path.join(t,"extension.js");return{name:"web-to-mobile-plugin",generateBundle(e){if(!fs.existsSync(s)){fs.mkdirSync(t,{recursive:true})}let i=fs.readFileSync(e.file,"utf8");if(Array.isArray(n.replacements)){n.replacements.forEach((([e,n])=>{i=i.replace(e,n)}))}const r=fetchDependencies(i);if(r.length>0){const e=makeDepsPhpContent(r);const n=path.join(t,"deps.php");fs.writeFileSync(n,e,"utf8")}if(typeof n.banner==="string"){i=`${n.banner}\n${i}`}fs.writeFileSync(s,i,"utf8")}}};
//# sourceMappingURL=index.map.js