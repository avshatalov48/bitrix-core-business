{"version":3,"file":"parser.bundle.map.js","names":["this","BX","UI","exports","ui_bbcode_astProcessor","main_core","ui_bbcode_encoder","ui_linkify","ui_bbcode_model","getByIndex","array","index","Type","isArray","TypeError","isInteger","preparedIndex","length","ParserScheme","BBCodeScheme","getTagScheme","tagName","BBCodeTagScheme","name","isAllowedTag","isChildAllowed","parent","child","TAG_REGEX","TAG_REGEX_GS","isSpecialChar","symbol","includes","isList","String","toLowerCase","isListItem","parserScheme","BBCodeParser","constructor","options","allowedLinkify","scheme","setScheme","DefaultBBCodeScheme","isFunction","onUnknown","setOnUnknown","defaultOnUnknownHandler","encoder","BBCodeEncoder","setEncoder","isBoolean","linkify","setIsAllowedLinkify","getScheme","handler","onUnknownHandler","getOnUnknownHandler","getEncoder","value","Boolean","isAllowedLinkify","canBeLinkified","node","getName","notAllowedNodeNames","inNotAllowedNode","some","AstProcessor","findParentNodeByName","getType","BBCodeNode","ELEMENT_NODE","nodeName","newNode","createElement","replace","setChildren","getChildren","fragment","createFragment","children","openingTag","getOpeningTag","closingTag","getClosingTag","createText","isStringFilled","parseText","text","reduce","acc","push","lastItem","isNil","map","createNewLine","createTab","content","decodeText","findNextTagIndex","bbcode","startIndex","nextContent","slice","matchResult","match","RegExp","findNextTag","slash","isClosedTag","trimQuotes","source","test","parseAttributes","sourceAttributes","result","attributes","startsWith","decodeAttribute","trim","split","filter","item","key","parse","createRoot","firstTagIndex","textBeforeFirstTag","appendChild","stack","wasOpened","current","level","fullTag","attrs","isOpeningTag","lowerCaseTagName","isPotentiallyVoid","tagScheme","isAllowedVoidTag","isVoid","Object","fromEntries","nextTagIndex","openedTagIndex","indexOf","splice","nextTag","isNull","getFinalLineBreaksIndexes","skip","reduceRight","flattenAst","forEach","finalLinebreaksIndexes","toString","encode","tokens","Linkify","tokenize","nodes","token","t","toHref","BBCode"],"sources":["parser.bundle.js"],"mappings":"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","ignoreList":[]}