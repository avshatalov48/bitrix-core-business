{"version":3,"file":"sectioninterface.bundle.js","sources":["../src/editform.js","../src/trackingusersform.js","../src/trackinggroupsform.js","../src/trackingtypesform.js","../src/sectioninterface.js"],"sourcesContent":["import { Runtime, Dom, Event, Loc, Text, Type, Tag } from 'main.core';\nimport { Util } from 'calendar.util';\nimport {EventEmitter} from 'main.core.events';\nimport {Dialog as EntitySelectorDialog} from 'ui.entity-selector';\n\n\nexport class EditForm extends EventEmitter\n{\n\tDOM = {};\n\tisCreated = false;\n\n\tconstructor(options = {})\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.SectionInterface.EditForm');\n\n\t\tthis.DOM.outerWrap = options.wrap;\n\t\tthis.sectionAccessTasks = options.sectionAccessTasks;\n\t\tthis.sectionManager = options.sectionManager;\n\t\tthis.closeCallback = options.closeCallback;\n\t\tthis.BX = Util.getBX();\n\t\tthis.keyHandlerBinded = this.keyHandler.bind(this);\n\t}\n\n\tshow(params = {})\n\t{\n\t\tthis.section = params.section;\n\t\tthis.create();\n\t\tthis.showAccess = params.showAccess !== false;\n\t\tthis.allowChangeName = params.allowChangeName !== false;\n\t\tif (this.showAccess)\n\t\t{\n\t\t\tthis.DOM.accessLink.style.display = '';\n\t\t\tthis.DOM.accessWrap.style.display = '';\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.DOM.accessLink.style.display = 'none';\n\t\t\tthis.DOM.accessWrap.style.display = 'none';\n\t\t}\n\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBinded);\n\t\tDom.addClass(this.DOM.outerWrap, 'show');\n\n\t\tif (params.section)\n\t\t{\n\t\t\tif (params.section.color)\n\t\t\t{\n\t\t\t\tthis.setColor(params.section.color);\n\t\t\t}\n\n\t\t\tthis.setAccess(params.section.access || params.section.data.ACCESS || {});\n\n\t\t\tif (params.section.name)\n\t\t\t{\n\t\t\t\tthis.DOM.sectionTitleInput.value = params.section.name;\n\t\t\t}\n\t\t}\n\n\t\tif (this.allowChangeName)\n\t\t{\n\t\t\tBX.focus(this.DOM.sectionTitleInput);\n\t\t\tif (this.DOM.sectionTitleInput.value !== '')\n\t\t\t{\n\t\t\t\tthis.DOM.sectionTitleInput.select();\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tDom.addClass(this.DOM.sectionTitleInput, '--disabled');\n\t\t\tthis.DOM.sectionTitleInput.disabled = true;\n\t\t}\n\n\t\tthis.isOpenedState = true;\n\t}\n\n\tclose()\n\t{\n\t\tthis.isOpenedState = false;\n\t\tEvent.unbind(document, 'keydown', this.keyHandlerBinded);\n\t\tDom.removeClass(this.DOM.outerWrap, 'show');\n\n\t\tif (Type.isFunction(this.closeCallback))\n\t\t{\n\t\t\tthis.closeCallback();\n\t\t}\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.isOpenedState;\n\t}\n\n\tcreate()\n\t{\n\t\tthis.wrap = this.DOM.outerWrap.querySelector('.calendar-form-content');\n\n\t\tif (this.wrap)\n\t\t{\n\t\t\tDom.clean(this.wrap);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.wrap = this.DOM.outerWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-form-content'}}));\n\t\t}\n\n\t\tthis.DOM.formFieldsWrap = this.wrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-list-slider-widget-content'}\n\t\t\t\t}\n\t\t\t)\n\t\t)\n\t\t\t.appendChild(\n\t\t\t\tDom.create(\n\t\t\t\t\t'DIV',\n\t\t\t\t\t{\n\t\t\t\t\t\tprops: {className: 'calendar-list-slider-widget-content-block'}\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t);\n\n\t\t// Title\n\t\tthis.DOM.sectionTitleInput = this.DOM.formFieldsWrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-field-container calendar-field-container-string'}\n\t\t\t\t}\n\t\t\t)\n\t\t)\n\t\t\t.appendChild(Dom.create('DIV', {props: {className: 'calendar-field-block'}}))\n\t\t\t.appendChild(Dom.create('INPUT', {\n\t\t\t\tattrs: {type: 'text', placeholder: Loc.getMessage('EC_SEC_SLIDER_SECTION_TITLE')},\n\t\t\t\tprops: {className: 'calendar-field calendar-field-string'}\n\t\t\t}));\n\n\t\tthis.DOM.optionsWrap = this.DOM.formFieldsWrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-list-slider-new-calendar-options-container'}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tthis.initSectionColorSelector();\n\n\t\tthis.initAccessController();\n\n\t\t// Buttons\n\t\tthis.buttonsWrap = this.DOM.formFieldsWrap.appendChild(Dom.create('DIV', {props: {className: 'calendar-list-slider-btn-container'}}));\n\n\t\tthis.saveBtn = new BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_SAVE'),\n\t\t\tclassName: 'ui-btn ui-btn-success',\n\t\t\tevents: {click: this.save.bind(this)}\n\t\t});\n\t\tthis.saveBtn.renderTo(this.buttonsWrap);\n\n\t\tnew BX.UI.Button({\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_CANCEL'),\n\t\t\tclassName: 'ui-btn ui-btn-link',\n\t\t\tevents: {click: this.checkClose.bind(this)}\n\t\t}).renderTo(this.buttonsWrap);\n\n\t\tthis.isCreated = true;\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif(e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.checkClose();\n\t\t}\n\t\telse if(e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\t}\n\n\tcheckClose()\n\t{\n\t\tthis.close();\n\t}\n\n\tsave()\n\t{\n\t\tthis.saveBtn.setWaiting(true);\n\t\tthis.sectionManager.saveSection(\n\t\t\tthis.DOM.sectionTitleInput.value,\n\t\t\tthis.color,\n\t\t\tthis.access,\n\t\t\t{section: this.section}\n\t\t)\n\t\t\t.then(() => {\n\t\t\t\tthis.saveBtn.setWaiting(false);\n\t\t\t\tthis.close();\n\t\t\t});\n\t}\n\n\tinitSectionColorSelector()\n\t{\n\t\tthis.DOM.colorContWrap = this.DOM.optionsWrap.appendChild(Dom.create('DIV', {\n\t\t\tprops: { className: 'calendar-list-slider-new-calendar-option-color' },\n\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_COLOR')\n\t\t}));\n\t\tthis.colorIcon = this.DOM.colorContWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: { className: 'calendar-list-slider-new-calendar-option-color-selected' }\n\t\t}));\n\t\tthis.colorChangeLink = this.DOM.colorContWrap.appendChild(Dom.create('SPAN', {\n\t\t\tprops: { className: 'calendar-list-slider-new-calendar-option-color-change' },\n\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_CHANGE')\n\t\t}));\n\n\t\tEvent.bind(this.colorIcon, 'click', this.showSimplePicker.bind(this));\n\t\tEvent.bind(this.colorChangeLink, 'click', this.showSimplePicker.bind(this));\n\t}\n\n\tshowSimplePicker(value)\n\t{\n\t\tconst colors = Runtime.clone(Util.getDefaultColorList(), true);\n\t\tconst innerCont = Dom.create(\n\t\t\t'DIV',\n\t\t\t{\n\t\t\t\tprops: {className: 'calendar-simple-color-wrap calendar-field-container-colorpicker-square'}\n\t\t\t}\n\t\t);\n\t\tconst colorWrap = innerCont.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\t\tevents: {click: BX.delegate(this.simplePickerClick, this)}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tconst moreLinkWrap = innerCont.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'DIV',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-simple-color-more-link-wrap'}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tconst moreLink = moreLinkWrap.appendChild(\n\t\t\tDom.create(\n\t\t\t\t'SPAN',\n\t\t\t\t{\n\t\t\t\t\tprops: {className: 'calendar-simple-color-more-link'},\n\t\t\t\t\thtml: Loc.getMessage('EC_COLOR'),\n\t\t\t\t\tevents: {click: BX.delegate(this.showFullPicker, this)}\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\n\t\tthis.simplePickerColorWrap = colorWrap;\n\t\tthis.colors = [];\n\n\t\tif (!colors.includes(this.color))\n\t\t{\n\t\t\tcolors.push(this.color);\n\t\t}\n\n\t\tfor (let i = 0; i < colors.length; i++)\n\t\t{\n\t\t\tthis.colors.push({\n\t\t\t\tcolor: colors[i],\n\t\t\t\tnode: colorWrap.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-field-colorpicker-color-item'},\n\t\t\t\t\tstyle: {backgroundColor: colors[i]},\n\t\t\t\t\tattrs: {'data-bx-calendar-color': colors[i]},\n\t\t\t\t\thtml: '<span class=\"calendar-field-colorpicker-color\"></span>'\n\t\t\t\t}))\n\t\t\t});\n\t\t}\n\n\t\tthis.lastActiveNode = this.colors[BX.util.array_search(this.color, colors) || 0].node;\n\t\tDom.addClass(this.lastActiveNode, 'active');\n\n\t\tthis.simpleColorPopup = BX.PopupWindowManager.create(\n\t\t\t\"simple-color-popup-\" + Util.getRandomInt(),\n\t\t\tthis.colorIcon,\n\t\t\t{\n\t\t\t\t//zIndex: this.zIndex,\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 9,\n\t\t\t\tlightShadow: true,\n\t\t\t\tcontent: innerCont,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.simpleColorPopup.setAngle({offset: 10});\n\t\tthis.simpleColorPopup.show(true);\n\t}\n\n\tsimplePickerClick(e)\n\t{\n\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\tif (Type.isElementNode(target))\n\t\t{\n\t\t\tconst value = target.getAttribute('data-bx-calendar-color');\n\t\t\tif(value !== null)\n\t\t\t{\n\t\t\t\tif (this.lastActiveNode)\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(this.lastActiveNode, 'active');\n\t\t\t\t}\n\n\t\t\t\tDom.addClass(target, 'active');\n\t\t\t\tthis.lastActiveNode = target;\n\t\t\t\tthis.setColor(value);\n\t\t\t}\n\t\t}\n\t}\n\n\tshowFullPicker()\n\t{\n\t\tif (this.simpleColorPopup)\n\t\t{\n\t\t\tthis.simpleColorPopup.close();\n\t\t}\n\n\t\tif (!this.fullColorPicker || this.fullColorPicker.getPopupWindow()?.isDestroyed())\n\t\t{\n\t\t\tthis.fullColorPicker = new BX.ColorPicker({\n\t\t\t\tbindElement: this.DOM.colorContWrap,\n\t\t\t\tonColorSelected: BX.delegate(function(color){\n\t\t\t\t\tthis.setColor(color);\n\t\t\t\t}, this),\n\t\t\t\tpopupOptions: {\n\t\t\t\t\tcacheable: false,\n\t\t\t\t\tzIndex: this.zIndex,\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tonPopupClose:BX.delegate(function(){\n\t\t\t\t\t\t}, this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tthis.fullColorPicker.open();\n\t}\n\n\tsetColor(value)\n\t{\n\t\tthis.colorIcon.style.backgroundColor = value;\n\t\tthis.color = value;\n\t}\n\n\tsetAccess(value)\n\t{\n\t\tlet rowsCount = 0;\n\t\tfor (let code in value)\n\t\t{\n\t\t\tif (value.hasOwnProperty(code))\n\t\t\t{\n\t\t\t\trowsCount++;\n\t\t\t}\n\t\t}\n\t\tthis.accessRowsCount = rowsCount;\n\t\tthis.access = value;\n\n\t\tfor (let code in value)\n\t\t{\n\t\t\tif (value.hasOwnProperty(code))\n\t\t\t{\n\t\t\t\tthis.insertAccessRow(Util.getAccessName(code), code, value[code]);\n\t\t\t}\n\t\t}\n\t\tthis.checkAccessTableHeight();\n\t}\n\n\tinitAccessController()\n\t{\n\t\tthis.buildAccessController();\n\t\tif (this.sectionManager && this.sectionManager.calendarType === 'group')\n\t\t{\n\t\t\tthis.initDialogGroup();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.initDialogStandard();\n\t\t}\n\t\tthis.initAccessSelectorPopup();\n\t}\n\n\tinitAccessSelectorPopup()\n\t{\n\t\tEvent.bind(this.DOM.accessWrap, 'click', (e) => {\n\t\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\t\tif (Type.isElementNode(target))\n\t\t\t{\n\t\t\t\tif (target.getAttribute('data-bx-calendar-access-selector') !== null)\n\t\t\t\t{\n\t\t\t\t\t// show selector\n\t\t\t\t\tconst code = target.getAttribute('data-bx-calendar-access-selector');\n\t\t\t\t\tif (this.accessControls[code])\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.showAccessSelectorPopup({\n\t\t\t\t\t\t\t\tnode: this.accessControls[code].removeIcon,\n\t\t\t\t\t\t\t\tsetValueCallback: (value) => {\n\t\t\t\t\t\t\t\t\tif (this.accessTasks[value] && this.accessControls[code])\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tthis.accessControls[code].valueNode.innerHTML =\n\t\t\t\t\t\t\t\t\t\t\tText.encode(this.accessTasks[value].title);\n\t\t\t\t\t\t\t\t\t\tthis.access[code] = value;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (target.getAttribute('data-bx-calendar-access-remove') !== null)\n\t\t\t\t{\n\t\t\t\t\tconst code = target.getAttribute('data-bx-calendar-access-remove');\n\t\t\t\t\tif (this.accessControls[code])\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.remove(this.accessControls[code].rowNode);\n\t\t\t\t\t\tthis.accessControls[code] = null;\n\t\t\t\t\t\tdelete this.access[code];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tbuildAccessController()\n\t{\n\t\tthis.DOM.accessLink = this.DOM.optionsWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-new-calendar-option-more\">${Loc.getMessage('EC_SEC_SLIDER_ACCESS')}</div>`,\n\t\t);\n\n\t\tthis.DOM.accessWrap = this.DOM.formFieldsWrap.appendChild(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-list-slider-access-container\">\n\t\t\t\t\t<div class=\"calendar-list-slider-access-inner-wrap\">\n\t\t\t\t\t\t${this.DOM.accessTable = Tag.render`\n\t\t\t\t\t\t\t<table class=\"calendar-section-slider-access-table\"></table>\n\t\t\t\t\t\t`}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"calendar-list-slider-new-calendar-options-container\">\n\t\t\t\t\t\t${this.DOM.accessButton = Tag.render`\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-new-calendar-option-add\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_ACCESS_ADD')}\n\t\t\t\t\t\t\t</span>`\n\t\t\t}\n\t\t\t\t\t</div>\n\t\t\t\t</div>`,\n\t\t);\n\n\t\tthis.accessControls = {};\n\t\tthis.accessTasks = this.sectionAccessTasks;\n\n\t\tEvent.bind(this.DOM.accessLink, 'click', () => {\n\t\t\tif (Dom.hasClass(this.DOM.accessWrap, 'shown'))\n\t\t\t{\n\t\t\t\tDom.removeClass(this.DOM.accessWrap, 'shown');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(this.DOM.accessWrap, 'shown');\n\t\t\t}\n\t\t\tthis.checkAccessTableHeight();\n\t\t});\n\t}\n\n\tinitDialogStandard()\n\t{\n\t\tEvent.bind(this.DOM.accessButton, 'click', () => {\n\t\t\tconst entities = [\n\t\t\t\t{\n\t\t\t\t\tid: 'user',\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tanalyticsSource: 'calendar',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'department',\n\t\t\t\t\toptions: { selectMode: 'usersAndDepartments' },\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tid: 'meta-user',\n\t\t\t\t\toptions: { 'all-users': true },\n\t\t\t\t},\n\t\t\t];\n\n\t\t\tif (Util.isProjectFeatureEnabled())\n\t\t\t{\n\t\t\t\tentities.push({\n\t\t\t\t\tid: 'project',\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.entitySelectorDialog = new EntitySelectorDialog({\n\t\t\t\ttargetNode: this.DOM.accessButton,\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: [],\n\t\t\t\tenableSearch: true,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t},\n\t\t\t\tentities,\n\t\t\t});\n\t\t\tthis.entitySelectorDialog.show();\n\t\t});\n\t}\n\n\tinitDialogGroup()\n\t{\n\t\tEvent.bind(this.DOM.accessButton, 'click', () => {\n\t\t\tthis.entitySelectorDialog = new EntitySelectorDialog({\n\t\t\t\ttargetNode: this.DOM.accessButton,\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: [],\n\t\t\t\tenableSearch: true,\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleEntitySelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tpopupOptions: {\n\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tanalyticsSource: 'calendar',\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'department',\n\t\t\t\t\t\toptions: { selectMode: 'usersAndDepartments' },\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'meta-user',\n\t\t\t\t\t\toptions: { 'all-users': true },\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\ttabs: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'groupAccess',\n\t\t\t\t\t\ttitle: this.sectionManager.ownerName,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\titems: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'SG' + this.sectionManager.ownerId + '_' + 'A',\n\t\t\t\t\t\tentityId: 'group',\n\t\t\t\t\t\ttabs: 'groupAccess',\n\t\t\t\t\t\ttitle: Loc.getMessage('EC_ACCESS_GROUP_ADMIN'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'SG' + this.sectionManager.ownerId + '_' + 'E',\n\t\t\t\t\t\tentityId: 'group',\n\t\t\t\t\t\ttabs: 'groupAccess',\n\t\t\t\t\t\ttitle: Loc.getMessage('EC_ACCESS_GROUP_MODERATORS'),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'SG' + this.sectionManager.ownerId + '_' + 'K',\n\t\t\t\t\t\tentityId: 'group',\n\t\t\t\t\t\ttabs: 'groupAccess',\n\t\t\t\t\t\ttitle: Loc.getMessage('EC_ACCESS_GROUP_MEMBERS'),\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t});\n\t\t\tthis.entitySelectorDialog.show();\n\t\t});\n\t}\n\n\thandleEntitySelectorChanges()\n\t{\n\t\tconst entityList = this.entitySelectorDialog.getSelectedItems();\n\t\tthis.entitySelectorDialog.hide();\n\t\tif (Type.isArray(entityList))\n\t\t{\n\t\t\tentityList.forEach((entity) => {\n\t\t\t\tlet title;\n\t\t\t\tif (entity.entityId === 'group')\n\t\t\t\t{\n\t\t\t\t\ttitle = this.sectionManager.ownerName + ': ' + entity.title.text;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitle = entity.title.text;\n\t\t\t\t}\n\t\t\t\tconst code = Util.convertEntityToAccessCode(entity);\n\t\t\t\tUtil.setAccessName(code, title);\n\t\t\t\tthis.insertAccessRow(title, code);\n\t\t\t});\n\t\t}\n\n\t\tRuntime.debounce(() => {\n\t\t\tthis.entitySelectorDialog.destroy();\n\t\t}, 400)();\n\t}\n\n\t// todo: refactor it\n\tinsertAccessRow(title, code, value)\n\t{\n\t\tif (!this.accessControls[code])\n\t\t{\n\t\t\tif (value === undefined)\n\t\t\t{\n\t\t\t\tfor(let taskId in this.sectionAccessTasks)\n\t\t\t\t{\n\t\t\t\t\tif (\n\t\t\t\t\t\tthis.sectionAccessTasks.hasOwnProperty(taskId)\n\t\t\t\t\t\t&& this.sectionAccessTasks[taskId].name === 'calendar_view'\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tvalue = taskId;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst\n\t\t\t\trowNode = Dom.adjust(this.DOM.accessTable.insertRow(-1), {props : {className: 'calendar-section-slider-access-table-row'}}),\n\t\t\t\ttitleNode = Dom.adjust(rowNode.insertCell(-1), {\n\t\t\t\t\tprops : {className: 'calendar-section-slider-access-table-cell'},\n\t\t\t\t\thtml: '<span class=\"calendar-section-slider-access-title\">' + Text.encode(title) + ':</span>'}),\n\t\t\t\tvalueCell = Dom.adjust(rowNode.insertCell(-1), {\n\t\t\t\t\tprops : {className: 'calendar-section-slider-access-table-cell'},\n\t\t\t\t\tattrs: {'data-bx-calendar-access-selector': code}\n\t\t\t\t}),\n\t\t\t\tselectNode = valueCell.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-section-slider-access-container'}\n\t\t\t\t})),\n\t\t\t\tvalueNode = selectNode.appendChild(Dom.create('SPAN', {\n\t\t\t\t\ttext: this.accessTasks[value] ? this.accessTasks[value].title : '',\n\t\t\t\t\tprops: {className: 'calendar-section-slider-access-value'}\n\t\t\t\t})),\n\t\t\t\tremoveIcon = selectNode.appendChild(Dom.create('SPAN', {\n\t\t\t\t\tprops: {className: 'calendar-section-slider-access-remove'},\n\t\t\t\t\tattrs: {'data-bx-calendar-access-remove': code}\n\t\t\t\t}));\n\n\t\t\tthis.access[code] = value;\n\n\t\t\tthis.accessControls[code] = {\n\t\t\t\trowNode: rowNode,\n\t\t\t\ttitleNode: titleNode,\n\t\t\t\tvalueNode: valueNode,\n\t\t\t\tremoveIcon: removeIcon\n\t\t\t};\n\t\t}\n\t}\n\n\tcheckAccessTableHeight()\n\t{\n\t\tif (this.checkTableTimeout)\n\t\t{\n\t\t\tthis.checkTableTimeout = clearTimeout(this.checkTableTimeout);\n\t\t}\n\n\t\tthis.checkTableTimeout = setTimeout(() => {\n\t\t\tif (Dom.hasClass(this.DOM.accessWrap, 'shown'))\n\t\t\t{\n\t\t\t\tif (this.DOM.accessWrap.offsetHeight - this.DOM.accessTable.offsetHeight < 36)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.accessWrap.style.maxHeight = parseInt(this.DOM.accessTable.offsetHeight) + 100 + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.accessWrap.style.maxHeight = '';\n\t\t\t}\n\t\t}, 300);\n\t}\n\n\tshowAccessSelectorPopup(params)\n\t{\n\t\tif (\n\t\t\tthis.accessPopupMenu\n\t\t\t&& this.accessPopupMenu.popupWindow\n\t\t\t&& this.accessPopupMenu.popupWindow.isShown()\n\t\t)\n\t\t{\n\t\t\treturn this.accessPopupMenu.close();\n\t\t}\n\n\t\tconst _this = this;\n\t\tconst menuItems = [];\n\n\t\tfor(let taskId in this.accessTasks)\n\t\t{\n\t\t\tif (this.accessTasks.hasOwnProperty(taskId))\n\t\t\t{\n\t\t\t\tmenuItems.push(\n\t\t\t\t\t{\n\t\t\t\t\t\ttext: this.accessTasks[taskId].title,\n\t\t\t\t\t\tonclick: (function (value)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tparams.setValueCallback(value);\n\t\t\t\t\t\t\t\t_this.accessPopupMenu.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})(taskId)\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\n\t\tthis.accessPopupMenu = this.BX.PopupMenu.create(\n\t\t\t'section-access-popup' + Util.randomInt(),\n\t\t\tparams.node,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc : true,\n\t\t\t\tautoHide : true,\n\t\t\t\toffsetTop: -5,\n\t\t\t\toffsetLeft: 0,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false\n\t\t\t}\n\t\t);\n\n\t\tthis.accessPopupMenu.show();\n\n\t}\n}\n\n\n\n\n\n\n\n\n","import { Runtime, Dom, Event, Loc, Type, Tag, Text} from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Util } from 'calendar.util';\nimport { Dialog, TagSelector } from 'ui.entity-selector';\n\nexport class TrackingUsersForm\n{\n\tDOM = {};\n\tisCreated = false;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.interfaceType = 'users';\n\t\tthis.DOM.outerWrap = options.wrap;\n\t\tthis.trackingUsers = options.trackingUsers || [];\n\t\tthis.trackingUserIdList = this.trackingUsers.map((item) => {\n\t\t\treturn parseInt(item.ID)\n\t\t});\n\t\tthis.trackingGroupIdList = [];\n\n\t\tthis.CHECKED_CLASS = 'calendar-list-slider-item-checkbox-checked';\n\t\tthis.selectorId = 'add-tracking' + Util.getRandomInt();\n\t\tthis.closeCallback = options.closeCallback;\n\n\t\tthis.superposedSections = Type.isArray(options.superposedSections) ? options.superposedSections : [];\n\t\tthis.selected = {};\n\t\tthis.superposedSections.forEach((section) => {\n\t\t\tthis.selected[section.id] = true;\n\t\t}, this);\n\n\t\tthis.isCreated = false;\n\t\tthis.keyHandlerBinded = this.keyHandler.bind(this);\n\t}\n\n\tshow()\n\t{\n\t\tif (!this.isCreated)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\tDom.addClass(this.DOM.outerWrap, 'show');\n\t\tthis.checkInnerWrapHeight();\n\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBinded);\n\n\t\tthis.updateSectionList();\n\n\t\tthis.firstTrackingUserIdList = Runtime.clone(this.trackingUserIdList);\n\t\tthis.isOpenedState = true;\n\t}\n\n\tclose()\n\t{\n\t\tEvent.unbind(document, 'keydown', this.keyHandlerBinded);\n\n\t\tthis.isOpenedState = false;\n\t\tDom.removeClass(this.DOM.outerWrap, 'show');\n\t\tthis.DOM.outerWrap.style.cssText = '';\n\n\t\tif (Type.isFunction(this.closeCallback))\n\t\t{\n\t\t\tthis.closeCallback();\n\t\t}\n\t}\n\n\tisOpened()\n\t{\n\t\treturn this.isOpenedState;\n\t}\n\n\tcreate()\n\t{\n\t\tif (!this.DOM.innerWrap)\n\t\t{\n\t\t\tthis.DOM.innerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div></div>`);\n\t\t}\n\n\t\tthis.selectorWrap = this.DOM.innerWrap.appendChild(\n\t\t\tDom.create('DIV', { props: { className: 'calendar-list-slider-selector-wrap' } })\n\t\t);\n\n\t\tthis.userTagSelector = new TagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\twidth: 320,\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: this.trackingUsers.map((item) => {\n\t\t\t\t\treturn ['user', parseInt(item.ID)]\n\t\t\t\t}),\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleUserSelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'user'\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t});\n\n\t\tthis.userTagSelector.renderTo(this.selectorWrap);\n\n\t\t// List of sections\n\t\tthis.sectionsWrap = this.DOM.innerWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-sections-wrap\"></div>`\n\t\t);\n\t\tthis.createButtons();\n\n\t\tthis.isCreated = true;\n\t}\n\n\tcreateButtons()\n\t{\n\t\tthis.DOM.innerWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-btn-container\">\n\t\t\t\t<button \n\t\t\t\t\tclass=\"ui-btn ui-btn-sm ui-btn-primary\"\n\t\t\t\t\tonclick=\"${this.save.bind(this)}\"\n\t\t\t\t>${Loc.getMessage('EC_SEC_SLIDER_SAVE')}</button>\n\t\t\t\t<button \n\t\t\t\t\tclass=\"ui-btn ui-btn-link\"\n\t\t\t\t\tonclick=\"${this.close.bind(this)}\"\n\t\t\t\t>${Loc.getMessage('EC_SEC_SLIDER_CANCEL')}</button>\n\t\t\t</div>`\n\t\t);\n\t}\n\n\thandleUserSelectorChanges()\n\t{\n\t\tconst selectedItems = this.userTagSelector.getDialog().getSelectedItems();\n\t\tthis.trackingUserIdList = [];\n\t\tselectedItems.forEach((item) => {\n\t\t\tif (item.entityId === 'user')\n\t\t\t{\n\t\t\t\tthis.trackingUserIdList.push(item.id);\n\t\t\t}\n\t\t});\n\t\tthis.updateSectionList();\n\t}\n\n\tsave()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tuserIdList: this.trackingUserIdList,\n\t\t\t\t\tsections: this.prepareTrackingSections(),\n\t\t\t\t\ttype: this.interfaceType\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\n\t\tthis.close();\n\t}\n\n\tprepareTrackingSections()\n\t{\n\t\tlet sections = this.getSelectedSections();\n\n\t\tfor (let id in this.sectionIndex)\n\t\t{\n\t\t\tif (this.sectionIndex.hasOwnProperty(id) && this.sectionIndex[id].checkbox)\n\t\t\t{\n\t\t\t\tif (Dom.hasClass(this.sectionIndex[id].checkbox, this.CHECKED_CLASS))\n\t\t\t\t{\n\t\t\t\t\tif (!sections.includes(parseInt(id)))\n\t\t\t\t\t{\n\t\t\t\t\t\tsections.push(parseInt(id));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (sections.includes(parseInt(id)))\n\t\t\t\t{\n\t\t\t\t\tsections = sections.filter((section) => {return parseInt(section) !== parseInt(id)});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn sections;\n\t}\n\n\tgetSelectedSections()\n\t{\n\t\tconst sections = [];\n\t\tthis.superposedSections.forEach((section) => {\n\t\t\tif (\n\t\t\t\tthis.interfaceType === 'users'\n\t\t\t\t&& section.type === 'user'\n\t\t\t\t&& this.trackingUserIdList\n\t\t\t\t&& !this.trackingUserIdList.includes(section.ownerId)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tsections.push(parseInt(section.id));\n\n\t\t}, this);\n\n\t\treturn sections;\n\t}\n\n\tupdateSectionList(delayExecution)\n\t{\n\t\tif (this.updateSectionLoader)\n\t\t{\n\t\t\tDom.remove(this.updateSectionLoader);\n\t\t}\n\t\tthis.updateSectionLoader = this.sectionsWrap.appendChild(\n\t\t\tDom.adjust(Util.getLoader(), {style: {height: '140px'}})\n\t\t);\n\n\t\tif (this.updateSectionTimeout)\n\t\t{\n\t\t\tthis.updateSectionTimeout = clearTimeout(this.updateSectionTimeout);\n\t\t}\n\n\t\tif (delayExecution !== false)\n\t\t{\n\t\t\tthis.updateSectionTimeout = setTimeout(() => {\n\t\t\t\tthis.updateSectionList(false);\n\t\t\t}, 300);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.checkInnerWrapHeight();\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.getTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tuserIdList: this.trackingUserIdList,\n\t\t\t\t\ttype: 'users'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t// Success\n\t\t\t\t(response) => {\n\t\t\t\t\tDom.clean(this.sectionsWrap);\n\t\t\t\t\tthis.sectionIndex = {};\n\t\t\t\t\tthis.checkInnerWrapHeight();\n\n\t\t\t\t\t// Users calendars\n\t\t\t\t\tresponse.data.users.forEach((user) => {\n\t\t\t\t\t\tconst sections = response.data.sections.filter(function(section)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn parseInt(section.OWNER_ID) === parseInt(user.ID);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tthis.sectionsWrap.appendChild(Tag.render`\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">\n\t\t\t\t\t\t\t\t\t${Text.encode(user.FORMATTED_NAME)}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`);\n\n\t\t\t\t\t\tif (sections.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.createSectionBlock({\n\t\t\t\t\t\t\t\tsectionList: sections,\n\t\t\t\t\t\t\t\twrap: this.sectionsWrap\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.sectionsWrap.appendChild(Tag.render`\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_NO_SECTIONS')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\t}\n\n\tcreateSectionBlock(params = {})\n\t{\n\t\tlet result = false;\n\t\tif (Type.isArray(params.sectionList) && params.sectionList.length\n\t\t\t&& Type.isElementNode(params.wrap))\n\t\t{\n\t\t\tlet listWrap;\n\t\t\tparams.wrap.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-widget-content\">\n\t\t\t\t\t<div class=\"calendar-list-slider-widget-content-block\">\n\t\t\t\t\t\t${listWrap = Tag.render`<ul class=\"calendar-list-slider-container\"></ul>`}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`);\n\n\t\t\tEvent.bind(listWrap, 'click', this.sectionClick.bind(this));\n\n\t\t\tparams.sectionList.forEach((section) => {\n\t\t\t\tconst id = section.ID.toString();\n\t\t\t\tlet checkbox;\n\n\t\t\t\tconst li = listWrap.appendChild(Tag.render`\n\t\t\t\t\t<li class=\"calendar-list-slider-item\" data-bx-calendar-section=\"${id}\">\n\t\t\t\t\t\t${checkbox = Tag.render`\n\t\t\t\t\t\t\t<div class=\"calendar-list-slider-item-checkbox\" style=\"background: ${section.COLOR}\"></div>\n\t\t\t\t\t\t`}\n\t\t\t\t\t\t<div class=\"calendar-list-slider-item-name\">${Text.encode(section.NAME)}</div>\n\t\t\t\t\t</li>\n\t\t\t\t`);\n\n\t\t\t\tthis.sectionIndex[id] = {\n\t\t\t\t\titem: li,\n\t\t\t\t\tcheckbox: checkbox\n\t\t\t\t};\n\n\t\t\t\tif (\n\t\t\t\t\tthis.selected[id]\n\t\t\t\t\t|| !Type.isArray(this.firstTrackingUserIdList)\n\t\t\t\t\t|| !this.firstTrackingUserIdList.includes(parseInt(section.OWNER_ID))\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tDom.addClass(checkbox, this.CHECKED_CLASS);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tsectionClick(e)\n\t{\n\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\tif (Type.isElementNode(target))\n\t\t{\n\t\t\tif(target.getAttribute('data-bx-calendar-section') !== null)\n\t\t\t{\n\t\t\t\tconst id = target.getAttribute('data-bx-calendar-section');\n\t\t\t\tif (this.sectionIndex[id] && this.sectionIndex[id].checkbox)\n\t\t\t\t{\n\t\t\t\t\tif (Dom.hasClass(this.sectionIndex[id].checkbox, this.CHECKED_CLASS))\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.removeClass(this.sectionIndex[id].checkbox, this.CHECKED_CLASS);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tDom.addClass(this.sectionIndex[id].checkbox, this.CHECKED_CLASS);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif(e.keyCode === Util.getKeyCode('escape'))\n\t\t{\n\t\t\tthis.close();\n\t\t}\n\t\telse if(e.keyCode === Util.getKeyCode('enter'))\n\t\t{\n\t\t\tthis.save();\n\t\t}\n\t}\n\n\tcheckInnerWrapHeight()\n\t{\n\t\tif (this.checkHeightTimeout)\n\t\t{\n\t\t\tthis.checkHeightTimeout = clearTimeout(this.checkHeightTimeout);\n\t\t}\n\n\t\tthis.checkHeightTimeout = setTimeout(() => {\n\t\t\tif (Dom.hasClass(this.DOM.outerWrap, 'show'))\n\t\t\t{\n\t\t\t\tif (this.DOM.outerWrap.offsetHeight - this.DOM.innerWrap.offsetHeight < 36)\n\t\t\t\t{\n\t\t\t\t\tthis.DOM.outerWrap.style.maxHeight = parseInt(this.DOM.innerWrap.offsetHeight) + 200 + 'px';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.DOM.outerWrap.style.maxHeight = '';\n\t\t\t}\n\t\t}, 300);\n\t}\n}\n\n\n\n\n\n\n\n\n","import { Dom, Tag } from 'main.core';\nimport { Util } from 'calendar.util';\nimport { TagSelector } from 'ui.entity-selector';\nimport { TrackingUsersForm } from './trackingusersform';\n\nexport class TrackingGroupsForm extends TrackingUsersForm\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.interfaceType = 'groups';\n\t\tthis.trackingGroupIdList = options.trackingGroups || [];\n\t}\n\n\tcreate()\n\t{\n\t\tif (!this.DOM.innerWrap)\n\t\t{\n\t\t\tthis.DOM.innerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div></div>`);\n\t\t}\n\n\t\tthis.selectorWrap = this.DOM.innerWrap.appendChild(\n\t\t\tDom.create('DIV', { props: { className: 'calendar-list-slider-selector-wrap' } }),\n\t\t);\n\n\t\tthis.groupTagSelector = new TagSelector({\n\t\t\tdialogOptions: {\n\t\t\t\twidth: 320,\n\t\t\t\tcontext: 'CALENDAR',\n\t\t\t\tpreselectedItems: this.trackingGroupIdList.map((id) => {\n\t\t\t\t\treturn ['project', id];\n\t\t\t\t}),\n\t\t\t\tevents: {\n\t\t\t\t\t'Item:onSelect': this.handleGroupSelectorChanges.bind(this),\n\t\t\t\t\t'Item:onDeselect': this.handleGroupSelectorChanges.bind(this),\n\t\t\t\t},\n\t\t\t\tentities: [\n\t\t\t\t\t{\n\t\t\t\t\t\tid: 'project',\n\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\tlockProjectLink: !Util.isProjectFeatureEnabled(),\n\t\t\t\t\t\t\tlockProjectLinkFeatureId: 'socialnetwork_projects_groups',\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t});\n\n\t\tthis.groupTagSelector.renderTo(this.selectorWrap);\n\n\t\t// List of sections\n\t\tthis.sectionsWrap = this.DOM.innerWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-sections-wrap\"></div>`,\n\t\t);\n\t\tthis.createButtons();\n\n\t\tthis.isCreated = true;\n\t}\n\n\thandleGroupSelectorChanges()\n\t{\n\t\tconst selectedItems = this.groupTagSelector.getDialog().getSelectedItems();\n\t\tthis.trackingGroupIdList = [];\n\t\tselectedItems.forEach((item) => {\n\t\t\tif (item.entityId === 'project')\n\t\t\t{\n\t\t\t\tthis.trackingGroupIdList.push(item.id);\n\t\t\t}\n\t\t});\n\t\tthis.updateSectionList();\n\t}\n\n\tupdateSectionList()\n\t{\n\t\tif (this.updateSectionLoader)\n\t\t{\n\t\t\tDom.remove(this.updateSectionLoader);\n\t\t}\n\t\tthis.updateSectionLoader = this.sectionsWrap.appendChild(\n\t\t\tDom.adjust(Util.getLoader(), { style: { height: '140px' } }),\n\t\t);\n\n\t\tif (this.updateSectionTimeout)\n\t\t{\n\t\t\tthis.updateSectionTimeout = clearTimeout(this.updateSectionTimeout);\n\t\t}\n\n\t\tthis.checkInnerWrapHeight();\n\t\tBX.ajax.runAction('calendar.api.calendarajax.getTrackingSections', {\n\t\t\tdata: {\n\t\t\t\tgroupIdList: this.trackingGroupIdList,\n\t\t\t\ttype: 'groups',\n\t\t\t},\n\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tDom.clean(this.sectionsWrap);\n\t\t\t\t\tthis.sectionIndex = {};\n\t\t\t\t\tthis.checkInnerWrapHeight();\n\n\t\t\t\t\t// Groups calendars\n\t\t\t\t\tthis.createSectionBlock({\n\t\t\t\t\t\tsectionList: response.data.sections,\n\t\t\t\t\t\twrap: this.sectionsWrap,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t},\n\t\t\t);\n\t}\n\n\tgetSelectedSections()\n\t{\n\t\tconst sections = [];\n\t\tthis.superposedSections.forEach((section) => {\n\t\t\tif (\n\t\t\t\tthis.interfaceType === 'groups'\n\t\t\t\t&& section.type === 'group'\n\t\t\t\t&& this.trackingGroupIdList\n\t\t\t\t&& !this.trackingGroupIdList.includes(section.ownerId)\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsections.push(parseInt(section.id));\n\t\t});\n\n\t\treturn sections;\n\t}\n}\n","import { Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { Util } from 'calendar.util';\nimport {TrackingUsersForm} from \"./trackingusersform\"\n\nexport class TrackingTypesForm extends TrackingUsersForm\n{\n\tconstructor(options = {})\n\t{\n\t\tsuper(options);\n\t\tthis.trackingGroups = options.trackingGroups || [];\n\t\tthis.interfaceType = 'company';\n\t\tthis.selectGroups = true;\n\t\tthis.selectUsers = false;\n\t\tthis.addLinkMessage = Loc.getMessage('EC_SEC_SLIDER_SELECT_GROUPS');\n\t}\n\n\tshow ()\n\t{\n\t\tif (!this.isCreated)\n\t\t{\n\t\t\tthis.create();\n\t\t}\n\n\t\tthis.updateSectionList();\n\t\tthis.isOpenedState = true;\n\t\tDom.addClass(this.DOM.outerWrap, 'show');\n\t}\n\n\tcreate()\n\t{\n\t\tif (!this.DOM.innerWrap)\n\t\t{\n\t\t\tthis.DOM.innerWrap = this.DOM.outerWrap.appendChild(Tag.render`<div></div>`);\n\t\t}\n\n\t\t// List of sections\n\t\tthis.sectionsWrap = this.DOM.innerWrap.appendChild(\n\t\t\tTag.render`<div class=\"calendar-list-slider-sections-wrap\"></div>`\n\t\t);\n\n\t\tthis.createButtons();\n\n\t\tthis.isCreated = true;\n\t}\n\n\tupdateSectionList()\n\t{\n\t\tif (this.updateSectionLoader)\n\t\t{\n\t\t\tDom.remove(this.updateSectionLoader);\n\t\t}\n\t\tthis.updateSectionLoader = this.sectionsWrap.appendChild(\n\t\t\tDom.adjust(Util.getLoader(), {style: {height: '140px'}})\n\t\t);\n\n\t\tif (this.updateSectionTimeout)\n\t\t{\n\t\t\tthis.updateSectionTimeout = clearTimeout(this.updateSectionTimeout);\n\t\t}\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.getTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\ttype: 'company'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tDom.clean(this.sectionsWrap);\n\t\t\t\t\tthis.sectionIndex = {};\n\t\t\t\t\tthis.checkInnerWrapHeight();\n\n\t\t\t\t\tif (Type.isArray(response.data.sections)\n\t\t\t\t\t\t&& response.data.sections.length)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.createSectionBlock({\n\t\t\t\t\t\t\tsectionList: response.data.sections,\n\t\t\t\t\t\t\twrap: this.sectionsWrap\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.sectionsWrap.appendChild(Tag.render`\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">\n\t\t\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_NO_SECTIONS')}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t`);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\n\t\tthis.checkInnerWrapHeight();\n\t}\n\n\tsave()\n\t{\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setTrackingSections', {\n\t\t\t\tdata: {\n\t\t\t\t\tsections: this.prepareTrackingSections(),\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(\n\t\t\t\t(response) => {\n\t\t\t\t\tlocation.reload();\n\t\t\t\t},\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t}\n\t\t\t);\n\n\t\tthis.close();\n\t}\n\n\tgetSelectedSections()\n\t{\n\t\tconst sections = [];\n\t\tthis.superposedSections.forEach((section) => {\n\t\t\tsections.push(parseInt(section.id));\n\t\t}, this);\n\n\t\treturn sections;\n\t}\n}\n\n\n\n\n\n\n\n\n","import { Util } from 'calendar.util';\nimport { IcalSyncPopup } from 'calendar.sync.interface';\nimport { Dom, Event, Loc, Tag, Text, Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { MenuItem, MenuManager } from 'main.popup';\nimport { FeaturePromotersRegistry } from 'ui.info-helper';\nimport { EditForm } from './editform';\nimport { TrackingUsersForm } from './trackingusersform';\nimport { TrackingGroupsForm } from './trackinggroupsform';\nimport { TrackingTypesForm } from './trackingtypesform';\nimport { SectionManager } from 'calendar.sectionmanager';\nimport { MessageBox } from 'ui.dialogs.messagebox';\n\nexport class SectionInterface extends EventEmitter\n{\n\tname = 'sectioninterface';\n\tuid = null;\n\tDOM = {};\n\tSLIDER_WIDTH = 400;\n\tSLIDER_DURATION = 80;\n\tsliderId = 'calendar:section-slider';\n\tdenyClose = false;\n\tdeletedSectionsIds = [];\n\n\tconstructor({ calendarContext, readonly, sectionManager })\n\t{\n\t\tsuper();\n\t\tthis.setEventNamespace('BX.Calendar.SectionInterface');\n\t\tthis.sectionManager = sectionManager;\n\t\tthis.calendarContext = calendarContext;\n\t\tthis.readonly = readonly;\n\t\tthis.BX = Util.getBX();\n\t\tthis.deleteSectionHandlerBinded = this.deleteSectionHandler.bind(this);\n\t\tthis.refreshSectionListBinded = this.refreshSectionList.bind(this);\n\t\tthis.keyHandlerBinded = this.keyHandler.bind(this);\n\n\t\tif (this.calendarContext !== null && this.calendarContext.util.config.accessNames)\n\t\t{\n\t\t\tUtil.setAccessNames(this.calendarContext?.util?.config?.accessNames);\n\t\t}\n\t}\n\n\tshow()\n\t{\n\t\tthis.BX.SidePanel.Instance.open(this.sliderId, {\n\t\t\tcontentCallback: this.createContent.bind(this),\n\t\t\twidth: this.SLIDER_WIDTH,\n\t\t\tanimationDuration: this.SLIDER_DURATION,\n\t\t\tevents: {\n\t\t\t\tonCloseByEsc: this.escHide.bind(this),\n\t\t\t\tonClose: this.hide.bind(this),\n\t\t\t\tonCloseComplete: this.destroy.bind(this),\n\t\t\t\tonLoad: this.onLoadSlider.bind(this),\n\t\t\t},\n\t\t});\n\n\t\tthis.addEventEmitterSubscriptions();\n\n\t\tEvent.bind(document, 'keydown', this.keyHandlerBinded);\n\t}\n\n\taddEventEmitterSubscriptions()\n\t{\n\t\tthis.BX.Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Section:delete',\n\t\t\tthis.deleteSectionHandlerBinded,\n\t\t);\n\t\tthis.BX.Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Section:pull-delete',\n\t\t\tthis.deleteSectionHandlerBinded,\n\t\t);\n\t\tthis.BX.Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Section:edit',\n\t\t\tthis.refreshSectionListBinded,\n\t\t);\n\n\t\tthis.BX.Event.EventEmitter.subscribe(\n\t\t\t'BX.Calendar.Section:pull-reload-data',\n\t\t\tthis.refreshSectionListBinded,\n\t\t);\n\t}\n\n\tdestroyEventEmitterSubscriptions()\n\t{\n\t\tthis.BX.Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Section:delete',\n\t\t\tthis.deleteSectionHandlerBinded,\n\t\t);\n\t\tthis.BX.Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Section:pull-delete',\n\t\t\tthis.deleteSectionHandlerBinded,\n\t\t);\n\t\tthis.BX.Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Section:edit',\n\t\t\tthis.refreshSectionListBinded,\n\t\t);\n\t\tthis.BX.Event.EventEmitter.unsubscribe(\n\t\t\t'BX.Calendar.Section:pull-reload-data',\n\t\t\tthis.refreshSectionListBinded,\n\t\t);\n\t}\n\n\tescHide(event)\n\t{\n\t\tif (event && event.getSlider && event.getSlider().getUrl() === this.sliderId && this.denyClose)\n\t\t{\n\t\t\tevent.denyAction();\n\t\t}\n\t}\n\n\thide(event)\n\t{\n\t\tif (event && event.getSlider && event.getSlider().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.closeForms();\n\t\t\tthis.destroyEventEmitterSubscriptions();\n\t\t\tEvent.unbind(document, 'keydown', this.keyHandlerBinded);\n\t\t}\n\t}\n\n\tclose()\n\t{\n\t\tBX.SidePanel.Instance.close();\n\t}\n\n\tdestroy(event)\n\t{\n\t\tif (event && event.getSlider && event.getSlider().getUrl() === this.sliderId)\n\t\t{\n\t\t\tthis.destroyEventEmitterSubscriptions();\n\t\t\tEvent.unbind(document, 'keydown', this.keyHandlerBinded);\n\n\t\t\tUtil.getBX().Event.EventEmitter.unsubscribe('BX.Calendar.Section:delete', this.deleteSectionHandlerBinded);\n\t\t\tUtil.getBX().Event.EventEmitter.unsubscribe('BX.Calendar.Section:pull-delete', this.deleteSectionHandlerBinded);\n\n\t\t\tBX.removeCustomEvent('SidePanel.Slider:onCloseComplete', BX.proxy(this.destroy, this));\n\t\t\tBX.SidePanel.Instance.destroy(this.sliderId);\n\t\t\tdelete this.DOM.localSectionListWrap;\n\n\t\t\tthis.deletedSectionsIds = [];\n\n\t\t\tif (this.sectionActionMenu)\n\t\t\t{\n\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t}\n\n\t\t\tif (this.trackingTypesForm)\n\t\t\t{\n\t\t\t\tdelete this.trackingTypesForm;\n\t\t\t}\n\n\t\t\tif (this.trackingUsersForm)\n\t\t\t{\n\t\t\t\tdelete this.trackingUsersForm;\n\t\t\t}\n\n\t\t\tif (this.trackingGroupsForm)\n\t\t\t{\n\t\t\t\tdelete this.trackingGroupsForm;\n\t\t\t}\n\n\t\t\tif (this.addBtnMenu)\n\t\t\t{\n\t\t\t\tthis.addBtnMenu.destroy();\n\t\t\t\tdelete this.addBtnMenu;\n\t\t\t}\n\t\t}\n\t}\n\n\tcreateContent()\n\t{\n\t\tthis.DOM.outerWrap = Tag.render`\n\t\t\t<div class=\"calendar-list-slider-wrap\"></div>\n\t\t`;\n\t\tthis.DOM.titleWrap = this.DOM.outerWrap.appendChild(\n\t\t\tTag.render`\n\t\t\t\t<div class=\"calendar-list-slider-title-container\">\n\t\t\t\t\t<div class=\"calendar-list-slider-title\"> \n\t\t\t\t\t\t${Loc.getMessage('EC_SECTION_BUTTON')}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`,\n\t\t);\n\t\tconst calendarContext = this.calendarContext || Util.getCalendarContext();\n\n\t\tif (calendarContext && !this.readonly)\n\t\t{\n\t\t\tthis.DOM.sectionFormWrap = this.DOM.outerWrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"calendar-list-slider-card-widget calendar-list-slider-form-wrap\">\n\t\t\t\t\t\t<div class=\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_NEW_SECTION')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t);\n\t\t}\n\n\t\tif (\n\t\t\tcalendarContext\n\t\t\t&& !this.readonly\n\t\t\t&& !this.calendarContext?.util?.isExtranetUser()\n\t\t\t&&\t\t\t(\n\t\t\t\t!calendarContext.util.isUserCalendar()\n\t\t\t\t|| calendarContext.util.userIsOwner()\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\t// #1. Controls\n\t\t\tthis.createAddButton();\n\n\t\t\t// #2. Forms\n\t\t\tthis.DOM.trackingGroupsFormWrap = this.DOM.outerWrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"calendar-list-slider-card-widget calendar-list-slider-form-wrap\">\n\t\t\t\t\t\t<div class=\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_GROUP')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t`,\n\t\t\t);\n\t\t\tthis.DOM.trackingUsersFormWrap = this.DOM.outerWrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"calendar-list-slider-card-widget calendar-list-slider-form-wrap\">\n\t\t\t\t\t\t<div class=\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_USER')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t`,\n\t\t\t);\n\t\t\tthis.DOM.trackingTypesFormWrap = this.DOM.outerWrap.appendChild(\n\t\t\t\tTag.render`\n\t\t\t\t\t<div class=\"calendar-list-slider-card-widget calendar-list-slider-form-wrap\">\n\t\t\t\t\t\t<div class=\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_COMP')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\t\t\t\t\t\t\t\t\n\t\t\t\t`,\n\t\t\t);\n\t\t}\n\n\t\t// #3. List of sections\n\t\tthis.createSectionList();\n\n\t\treturn this.DOM.outerWrap;\n\t}\n\n\tonLoadSlider(event)\n\t{\n\t\tthis.slider = event.getSlider();\n\t\tthis.sliderId = this.slider.getUrl();\n\t\tthis.DOM.content = this.slider.layout.content;\n\t}\n\n\tcreateSectionList()\n\t{\n\t\tthis.sliderSections = this.sectionManager.getSections().filter((section) => {\n\t\t\treturn !this.deletedSectionsIds.find((id) => id === section.id);\n\t\t});\n\t\tif (Type.isElementNode(this.DOM.sectonListOuterWrap))\n\t\t{\n\t\t\tDom.remove(this.DOM.sectonListOuterWrap);\n\t\t}\n\t\tthis.DOM.sectonListOuterWrap = this.DOM.outerWrap.appendChild(Tag.render`<div></div>`);\n\t\tEvent.bind(this.DOM.sectonListOuterWrap, 'click', this.sectionClickHandler.bind(this));\n\n\t\tthis.createLocalSectionsList();\n\t\tthis.createExternalSectionsList();\n\t}\n\n\tcreateLocalSectionsList()\n\t{\n\t\tthis.DOM.localSectionListWrap = this.DOM.sectonListOuterWrap.appendChild(\n\t\t\tthis.getSectionListWrap(this.getLocalSectionListTitle()),\n\t\t);\n\n\t\tthis.createSectionsBlock({\n\t\t\twrap: this.DOM.localSectionListWrap,\n\t\t\tsectionList: this.sliderSections.filter((section) => {\n\t\t\t\treturn (section.externalTypeIsLocal() && section.belongsToView()) || section.isPseudo();\n\t\t\t}),\n\t\t});\n\n\t\tthis.createCompanySectionList();\n\t\tthis.createUsersSectionList();\n\t\tthis.createGroupsSectionList();\n\t}\n\n\tcreateExternalSectionsList()\n\t{\n\t\tconst externalSections = this.sliderSections.filter((section) => {\n\t\t\treturn !section.externalTypeIsLocal() && section.belongsToView();\n\t\t});\n\n\t\tthis.DOM.extSectionListWrap = [];\n\n\t\texternalSections.forEach((section) => {\n\t\t\tconst listWrap = this.getSectionListWrapForSection(section);\n\n\t\t\tthis.createSectionUnit({\n\t\t\t\tsection,\n\t\t\t\twrap: listWrap,\n\t\t\t});\n\t\t});\n\t}\n\n\tgetSectionListWrapForSection(section)\n\t{\n\t\tlet sectionExternalType = section.getExternalType();\n\t\tif (section.isGoogle())\n\t\t{\n\t\t\tsectionExternalType = 'google';\n\t\t}\n\n\t\tif (section.data.IS_EXCHANGE)\n\t\t{\n\t\t\tsectionExternalType = 'exchange';\n\t\t}\n\n\t\tconst sectionExternalConnection = SectionManager.getSectionExternalConnection(section, sectionExternalType);\n\t\tconst calendarContext = this.calendarContext || Util.getCalendarContext();\n\n\t\tsection.data.CAL_DAV_CON = sectionExternalConnection?.addParams?.id || null;\n\t\tconst key = sectionExternalType + (\n\t\t\tsectionExternalConnection\n\t\t\t\t? sectionExternalConnection.getId()\n\t\t\t\t: '-disconnected'\n\t\t);\n\n\t\tif (!Type.isElementNode(this.DOM.extSectionListWrap[key]))\n\t\t{\n\t\t\tconst sectionListWrap = this.DOM.sectonListOuterWrap.appendChild(\n\t\t\t\tthis.getSectionListWrap(this.getExternalConnectionBlockTitle(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: sectionExternalType,\n\t\t\t\t\t\tconnection: sectionExternalConnection,\n\t\t\t\t\t},\n\t\t\t\t)),\n\t\t\t);\n\n\t\t\tsectionListWrap.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-widget-content\">\n\t\t\t\t\t<div class=\"calendar-list-slider-widget-content-block\">\n\t\t\t\t\t\t${this.DOM.extSectionListWrap[key] = Tag.render`<ul class=\"calendar-list-slider-container\"/>`}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t`);\n\n\t\t\tif (\n\t\t\t\t!sectionExternalConnection\n\t\t\t\t&& calendarContext\n\t\t\t\t&& calendarContext.util.userIsOwner()\n\t\t\t\t&& !section.isArchive()\n\t\t\t\t&& (\n\t\t\t\t\t!section.isExchange()\n\t\t\t\t\t||\t(!calendarContext.util.config.bExchange && section.isExchange())\n\t\t\t\t)\n\t\t\t)\n\t\t\t{\n\t\t\t\tsectionListWrap.querySelector('.calendar-list-slider-widget-content-block')\n\t\t\t\t\t.appendChild(\n\t\t\t\t\t\tTag.render`\n\t\t\t\t\t\t\t<div data-bx-calendar-open-sync=\"Y\" class=\"calendar-list-slider-card-widget-bottom-button\">\n\t\t\t\t\t\t\t\t<span class=\"calendar-list-slider-link\">\n\t\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_ADJUST_SYNC')}\n\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`,\n\t\t\t\t\t);\n\n\t\t\t\tsectionListWrap.querySelector('.calendar-list-slider-card-widget-title')\n\t\t\t\t\t.appendChild(\n\t\t\t\t\t\tTag.render`\n\t\t\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text calendar-list-title-disabled\" >\n\t\t\t\t\t\t\t\t${Loc.getMessage('EC_SEC_SLIDER_SYNC_DISABLED')}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t`,\n\t\t\t\t\t);\n\t\t\t}\n\t\t\telse if (section.isArchive())\n\t\t\t{\n\t\t\t\tconst hintNode = sectionListWrap.querySelector('.calendar-list-slider-card-widget-title')\n\t\t\t\t\t.appendChild(Tag.render`\n\t\t\t\t\t\t<div class=\"ui-icon ui-icon-common-question calendar-list-slider-archive-hint\"\n\t\t\t\t\t\tdata-hint=\"${Loc.getMessage('EC_SEC_SLIDER_TYPE_ARCHIVE_HELPER')}\">\n\t\t\t\t\t\t\t<i></i>\t\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`);\n\t\t\t\tif (Type.isDomNode(hintNode))\n\t\t\t\t{\n\t\t\t\t\tUtil.initHintNode(hintNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn this.DOM.extSectionListWrap[key];\n\t}\n\n\tgetExternalConnectionBlockTitle({ type, connection }): string\n\t{\n\t\tlet title = '';\n\t\tconst connectionName = connection\n\t\t\t? connection.getConnectionAccountName() || connection.getConnectionName()\n\t\t\t: null\n\t\t;\n\n\t\tswitch (type)\n\t\t{\n\t\t\tcase 'google':\n\t\t\t\tif (connectionName)\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage(\n\t\t\t\t\t\t'EC_SEC_SLIDER_TYPE_GOOGLE',\n\t\t\t\t\t\t{ '#CONNECTION_NAME#': connectionName },\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_GOOGLE_DIS');\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'office365':\n\t\t\t\tif (connectionName)\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage(\n\t\t\t\t\t\t'EC_SEC_SLIDER_TYPE_OFFICE365',\n\t\t\t\t\t\t{ '#CONNECTION_NAME#': connectionName },\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_OFFICE365_DIS');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'icloud':\n\t\t\t\tif (connectionName)\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage(\n\t\t\t\t\t\t'EC_SEC_SLIDER_TYPE_ICLOUD',\n\t\t\t\t\t\t{ '#CONNECTION_NAME#': connectionName },\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_ICLOUD_DIS');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'caldav':\n\t\t\t\tif (connectionName)\n\t\t\t\t{\n\t\t\t\t\tif (connection.getType() === 'yandex')\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle = Loc.getMessage(\n\t\t\t\t\t\t\t'EC_SEC_SLIDER_TYPE_YANDEX',\n\t\t\t\t\t\t\t{ '#CONNECTION_NAME#': connectionName },\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\ttitle = Loc.getMessage(\n\t\t\t\t\t\t\t'EC_SEC_SLIDER_TYPE_CALDAV',\n\t\t\t\t\t\t\t{ '#CONNECTION_NAME#': connectionName },\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_DEFAULT');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'exchange':\n\t\t\t\ttitle = Loc.getMessage('EC_CAL_SYNC_EXCHANGE');\n\t\t\t\tbreak;\n\t\t\tcase 'archive':\n\t\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_ARCHIVE');\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\ttitle = Loc.getMessage('EC_SEC_SLIDER_TYPE_DEFAULT');\n\t\t}\n\n\t\treturn title;\n\t}\n\n\tcreateCompanySectionList()\n\t{\n\t\tconst sections = this.sliderSections.filter((section) => {\n\t\t\treturn section.isCompanyCalendar() && !section.belongsToView();\n\t\t});\n\n\t\tif (sections.length > 0)\n\t\t{\n\t\t\tthis.DOM.localSectionListWrap.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-card-section-title\">\n\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">${Loc.getMessage('EC_SEC_SLIDER_TITLE_COMP_CAL')}</span>\n\t\t\t\t</div>\n\t\t\t`);\n\n\t\t\tthis.createSectionsBlock({\n\t\t\t\twrap: this.DOM.localSectionListWrap,\n\t\t\t\tsectionList: this.sliderSections.filter((section) => {\n\t\t\t\t\treturn section.isCompanyCalendar();\n\t\t\t\t}),\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateUsersSectionList()\n\t{\n\t\tthis.calendarContext.util.getSuperposedTrackedUsers().forEach((user) => {\n\t\t\tconst sections = this.sliderSections.filter((section) => {\n\t\t\t\treturn !section.belongsToView()\n\t\t\t\t\t&& section.type === 'user'\n\t\t\t\t\t&& section.data.OWNER_ID === user.ID;\n\t\t\t});\n\n\t\t\tif (sections.length > 0)\n\t\t\t{\n\t\t\t\tthis.DOM.localSectionListWrap.appendChild(Tag.render`\n\t\t\t\t\t<div class=\"calendar-list-slider-card-section-title\">\n\t\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">${Text.encode(user.FORMATTED_NAME)}</span>\n\t\t\t\t\t</div>\n\t\t\t\t`);\n\n\t\t\t\tthis.createSectionsBlock({\n\t\t\t\t\twrap: this.DOM.localSectionListWrap,\n\t\t\t\t\tsectionList: sections,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tcreateGroupsSectionList()\n\t{\n\t\tconst sections = this.sliderSections.filter((section) => {\n\t\t\treturn !section.belongsToView() && section.type === 'group';\n\t\t});\n\n\t\tif (sections.length > 0)\n\t\t{\n\t\t\tthis.DOM.localSectionListWrap.appendChild(Tag.render`\n\t\t\t\t<div class=\"calendar-list-slider-card-section-title\">\n\t\t\t\t\t<span class=\"calendar-list-slider-card-section-title-text\">${Loc.getMessage('EC_SEC_SLIDER_TITLE_GROUP_CAL')}</span>\n\t\t\t\t</div>\n\t\t\t`);\n\n\t\t\tthis.createSectionsBlock({\n\t\t\t\twrap: this.DOM.localSectionListWrap,\n\t\t\t\tsectionList: sections,\n\t\t\t});\n\t\t}\n\t}\n\n\tgetSectionListWrap(title)\n\t{\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-list-slider-card-widget\">\n\t\t\t\t<div class=\"calendar-list-slider-card-widget-title\">\n\t\t\t\t\t<span class=\"calendar-list-slider-card-widget-title-text\">\n\t\t\t\t\t\t${Text.encode(title)}\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t`;\n\t}\n\n\tgetLocalSectionListTitle()\n\t{\n\t\tif (this.sectionManager.calendarType === 'user')\n\t\t{\n\t\t\treturn Loc.getMessage('EC_SEC_SLIDER_MY_CALENDARS_LIST');\n\t\t}\n\n\t\tif (this.sectionManager.calendarType === 'group')\n\t\t{\n\t\t\treturn Loc.getMessage('EC_SEC_SLIDER_GROUP_CALENDARS_LIST');\n\t\t}\n\n\t\treturn Loc.getMessage('EC_SEC_SLIDER_TYPE_CALENDARS_LIST');\n\t}\n\n\tcreateAddButton()\n\t{\n\t\tif (\n\t\t\tthis.calendarContext.util.config.perm\n\t\t\t&& this.calendarContext.util.config.perm.edit_section\n\t\t)\n\t\t{\n\t\t\tconst addButtonOuter = this.DOM.titleWrap.appendChild(Tag.render`\n\t\t\t\t<span class=\"ui-btn-split ui-btn-light-border\" style=\"margin-right: 0\"></span>\n\t\t\t`);\n\t\t\tthis.DOM.addButton = addButtonOuter.appendChild(Tag.render`\n\t\t\t\t<span class=\"ui-btn-main\">${Loc.getMessage('EC_ADD')}</span>\n\t\t\t`);\n\t\t\tthis.DOM.addButtonMore = addButtonOuter.appendChild(Tag.render`\n\t\t\t\t<span class=\"ui-btn-extra\"></span>\n\t\t\t`);\n\n\t\t\tEvent.bind(this.DOM.addButtonMore, 'click', this.showAddButtonPopup.bind(this));\n\t\t\tEvent.bind(this.DOM.addButton, 'click', this.showEditSectionForm.bind(this));\n\t\t}\n\t}\n\n\tshowAddButtonPopup()\n\t{\n\t\tif (this.addBtnMenu && this.addBtnMenu.popupWindow && this.addBtnMenu.popupWindow.isShown())\n\t\t{\n\t\t\treturn this.addBtnMenu.close();\n\t\t}\n\n\t\tconst menuItems = [\n\t\t\tnew MenuItem({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_POPUP_NEW_TITLE'),\n\t\t\t\tdelimiter: true,\n\t\t\t}),\n\t\t\t{\n\t\t\t\thtml: Loc.getMessage('EC_SEC_SLIDER_POPUP_NEW_MENU'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\t\tthis.showEditSectionForm();\n\t\t\t\t},\n\t\t\t},\n\t\t\tnew MenuItem({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_POPUP_EXIST_TITLE'),\n\t\t\t\tdelimiter: true,\n\t\t\t}),\n\t\t\tthis.getAddCompanyMenuItem(),\n\t\t\tthis.getAddUserMenuItem(),\n\t\t\tthis.getAddGroupMenuItem(),\n\t\t];\n\n\t\tthis.addBtnMenu = MenuManager.create(\n\t\t\t`add-btn-${Util.getRandomInt()}`,\n\t\t\tthis.DOM.addButtonMore,\n\t\t\tmenuItems,\n\t\t\t{\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tautoHide: true,\n\t\t\t\tzIndex: this.zIndex,\n\t\t\t\toffsetTop: 0,\n\t\t\t\toffsetLeft: 15,\n\t\t\t\tangle: true,\n\t\t\t\tcacheable: false,\n\t\t\t},\n\t\t);\n\n\t\tthis.addBtnMenu.show();\n\t}\n\n\tgetAddCompanyMenuItem(): Object\n\t{\n\t\treturn {\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_COMP'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\tthis.showTrackingTypesForm();\n\t\t\t},\n\t\t};\n\t}\n\n\tgetAddUserMenuItem(): Object\n\t{\n\t\treturn {\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_USER'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\tthis.showTrackingUsersForm();\n\t\t\t},\n\t\t};\n\t}\n\n\tgetAddGroupMenuItem(): Object\n\t{\n\t\tconst calendarContext = this.calendarContext || Util.getCalendarContext();\n\n\t\tif (calendarContext.util.config.projectFeatureEnabled)\n\t\t{\n\t\t\treturn {\n\t\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_GROUP'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\t\tthis.showTrackingGroupsForm();\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\tclassName: 'menu-popup-item-lock',\n\t\t\ttext: Loc.getMessage('EC_SEC_SLIDER_POPUP_MENU_ADD_GROUP'),\n\t\t\tonclick: () => {\n\t\t\t\tthis.addBtnMenu.close();\n\t\t\t\tFeaturePromotersRegistry.getPromoter({ featureId: 'socialnetwork_projects_groups' }).show();\n\t\t\t},\n\t\t};\n\t}\n\n\tcreateSectionsBlock({ sectionList, wrap })\n\t{\n\t\tif (Type.isArray(sectionList))\n\t\t{\n\t\t\tconst listWrap = wrap.appendChild(Tag.render`<div class=\"calendar-list-slider-widget-content\"></div>`)\n\t\t\t\t.appendChild(Tag.render`<div class=\"calendar-list-slider-widget-content-block\"></div>`)\n\t\t\t\t.appendChild(Tag.render`<ul class=\"calendar-list-slider-container\"></ul>`)\n\t\t\t;\n\n\t\t\tsectionList.forEach((section) => {\n\t\t\t\tthis.createSectionUnit({ section, wrap: listWrap });\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateSectionUnit({ section, wrap })\n\t{\n\t\tif (!section.DOM)\n\t\t{\n\t\t\tsection.DOM = {};\n\t\t}\n\t\tconst sectionId = section.id.toString();\n\t\tconst li = wrap.appendChild(Tag.render`\n\t\t\t<li class=\"calendar-list-slider-item\" data-bx-calendar-section=\"${sectionId}\"></li>\n\t\t`);\n\t\tconst checkbox = li.appendChild(Tag.render`\n\t\t\t<div class=\"calendar-list-slider-item-checkbox ${section.isShown() ? 'calendar-list-slider-item-checkbox-checked' : ''}\" style=\"background-color: ${section.color}\"></div>\n\t\t`);\n\t\tconst title = li.appendChild(Tag.render`\n\t\t\t<div class=\"calendar-list-slider-item-name\" title=\"${Text.encode(section.name)}\">${Text.encode(section.name)}</div>\n\t\t`);\n\n\t\tsection.DOM.item = li;\n\t\tsection.DOM.checkbox = checkbox;\n\t\tsection.DOM.title = title;\n\n\t\tsection.DOM.actionCont = li.appendChild(Tag.render`\n\t\t\t<div class=\"calendar-list-slider-item-actions-container\" data-bx-calendar-section-menu=\"${sectionId}\">\n\t\t\t\t<span class=\"calendar-list-slider-item-context-menu\"></span>\n\t\t\t</div>\n\t\t`);\n\t}\n\n\tsectionClickHandler(e)\n\t{\n\t\tconst target = Util.findTargetNode(e.target || e.srcElement, this.DOM.outerWrap);\n\t\tif (target && target.getAttribute)\n\t\t{\n\t\t\tif (target.getAttribute('data-bx-calendar-section-menu') !== null)\n\t\t\t{\n\t\t\t\tlet sectionId = target.getAttribute('data-bx-calendar-section-menu');\n\t\t\t\tsectionId = sectionId === 'tasks' ? sectionId : parseInt(sectionId);\n\t\t\t\tthis.showSectionMenu(this.sectionManager.getSection(sectionId), target);\n\t\t\t}\n\t\t\telse if (target.getAttribute('data-bx-calendar-section') !== null)\n\t\t\t{\n\t\t\t\tthis.switchSection(this.sectionManager.getSection(target.getAttribute('data-bx-calendar-section')));\n\t\t\t}\n\t\t\telse if (target.getAttribute('data-bx-calendar-open-sync') !== null)\n\t\t\t{\n\t\t\t\tthis.calendarContext.syncInterface.openSyncPanel();\n\t\t\t}\n\t\t}\n\t}\n\n\tfindCheckBoxNodes(id)\n\t{\n\t\treturn this.DOM.sectonListOuterWrap.querySelectorAll(\n\t\t\t`.calendar-list-slider-item[data-bx-calendar-section='${id}'] .calendar-list-slider-item-checkbox`,\n\t\t);\n\t}\n\n\tswitchSection(section)\n\t{\n\t\tconst checkboxNodes = this.findCheckBoxNodes(section.id);\n\n\t\tfor (const checkboxNode of checkboxNodes)\n\t\t{\n\t\t\tif (section.isShown())\n\t\t\t{\n\t\t\t\tDom.removeClass(checkboxNode, 'calendar-list-slider-item-checkbox-checked');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tDom.addClass(checkboxNode, 'calendar-list-slider-item-checkbox-checked');\n\t\t\t}\n\t\t}\n\n\t\tif (section.isShown())\n\t\t{\n\t\t\tsection.hide();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tsection.show();\n\t\t}\n\n\t\t// TODO: should use eventEmtter\n\t\tthis.calendarContext.reload();\n\t}\n\n\tswitchOnSection(section)\n\t{\n\t\tconst checkboxNodes = this.findCheckBoxNodes(section.id);\n\n\t\tfor (const checkboxNode of checkboxNodes)\n\t\t{\n\t\t\tif (!section.isShown())\n\t\t\t{\n\t\t\t\tDom.addClass(checkboxNode, 'calendar-list-slider-item-checkbox-checked');\n\t\t\t}\n\t\t}\n\n\t\tif (!section.isShown())\n\t\t{\n\t\t\tsection.show();\n\t\t}\n\t}\n\n\tswitchOffSection(section)\n\t{\n\t\tconst checkboxNodes = this.findCheckBoxNodes(section.id);\n\n\t\tfor (const checkboxNode of checkboxNodes)\n\t\t{\n\t\t\tif (section.isShown())\n\t\t\t{\n\t\t\t\tDom.removeClass(checkboxNode, 'calendar-list-slider-item-checkbox-checked');\n\t\t\t}\n\t\t}\n\n\t\tif (section.isShown())\n\t\t{\n\t\t\tsection.hide();\n\t\t}\n\t}\n\n\tshowSectionMenu(section, menuItemNode)\n\t{\n\t\tconst menuItems = [];\n\t\tconst itemNode = menuItemNode.closest('[data-bx-calendar-section]');\n\t\tif (Type.isElementNode(itemNode))\n\t\t{\n\t\t\tDom.addClass(itemNode, 'active');\n\t\t}\n\n\t\tif (section.canDo('view_time'))\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_LEAVE_ONE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tthis.showOnlyOneSection(section, this.sectionManager.sections);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (!section.isPseudo() && section.getLink() && !section.belongsToView())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_OPEN_LINK'),\n\t\t\t\thref: section.getLink(),\n\t\t\t});\n\t\t}\n\n\t\tif (\n\t\t\t!this.readonly\n\t\t\t&& section.canDo('edit_section')\n\t\t\t&& !section.isPseudo()\n\t\t\t&& !this.calendarContext?.util?.isExtranetUser()\n\t\t)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_EDIT'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tthis.showEditSectionForm({ section });\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (section.isSuperposed() && !section.belongsToView())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_HIDE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.hideSuperposedHandler(section);\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (section.canBeConnectedToOutlook() && section.data.EXTERNAL_TYPE === 'local')\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_CONNECT_TO_OUTLOOK'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tsection.connectToOutlook();\n\t\t\t\t\tthis.close();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (\n\t\t\t!section.isPseudo()\n\t\t\t&& section.data.EXPORT\n\t\t\t&& section.data.EXPORT.LINK\n\t\t\t&& section.data.EXTERNAL_TYPE === 'local'\n\t\t\t&& !this.calendarContext?.util?.isExtranetUser()\n\t\t)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_ACTION_EXPORT'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\n\t\t\t\t\tconst options = {\n\t\t\t\t\t\tsectionLink: section.data.EXPORT.LINK,\n\t\t\t\t\t\tcalendarPath: this.calendarContext.util.config.path,\n\t\t\t\t\t};\n\t\t\t\t\tif (IcalSyncPopup.checkPathes(options))\n\t\t\t\t\t{\n\t\t\t\t\t\tIcalSyncPopup.createInstance(options).show();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tIcalSyncPopup.showPopupWithPathesError();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tlet provider;\n\t\tlet connection;\n\n\t\tif (section.data.CAL_DAV_CON\n\t\t\t&& section.belongsToView()\n\t\t\t&& this.calendarContext.syncInterface\n\t\t)\n\t\t{\n\t\t\t[provider, connection] = this.calendarContext.syncInterface.getProviderById(section.data.CAL_DAV_CON);\n\t\t}\n\n\t\tif (\n\t\t\tsection.canDo('edit_section')\n\t\t\t&& section.belongsToView()\n\t\t\t&& !section.isPseudo()\n\t\t\t&& !this.calendarContext?.util?.isExtranetUser()\n\t\t\t&& (\n\t\t\t\t(!section.isGoogle() && !connection)\n\t\t\t\t|| section.data.EXTERNAL_TYPE === 'local'\n\t\t\t\t|| !connection\n\t\t\t)\n\t\t)\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_DELETE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tthis.showSectionConfirm('delete', section);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (section.canDo('edit_section') && connection)\n\t\t{\n\t\t\tif (section.isGoogle() || section.isIcloud() || section.isOffice365() || section.isCalDav())\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext: Loc.getMessage('EC_ACTION_EXTERNAL_ADJUST'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\t\tif (provider)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprovider.openActiveConnectionSlider(connection);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (section.isGoogle() || section.isIcloud() || section.isOffice365())\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext: Loc.getMessage('EC_ACTION_HIDE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\t\tthis.showSectionConfirm('hideSync', section);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\n\t\t\telse if (section.isCalDav())\n\t\t\t{\n\t\t\t\tmenuItems.push({\n\t\t\t\t\ttext: Loc.getMessage('EC_ACTION_HIDE'),\n\t\t\t\t\tonclick: () => {\n\t\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\t\tthis.showSectionConfirm('hideExternal', section);\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (section.isPseudo() && section.taskSectionBelongToUser())\n\t\t{\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_EDIT'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tthis.showEditSectionForm({\n\t\t\t\t\t\tsection,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\n\t\t\tmenuItems.push({\n\t\t\t\ttext: Loc.getMessage('EC_SEC_TASK_HIDE'),\n\t\t\t\tonclick: () => {\n\t\t\t\t\tthis.sectionActionMenu.close();\n\t\t\t\t\tBX.userOptions.save('calendar', 'user_settings', 'showTasks', 'N');\n\n\t\t\t\t\tDom.addClass(section.DOM.item, 'calendar-list-slider-item-disappearing');\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tDom.clean(section.DOM.item, true);\n\t\t\t\t\t\tBX.reload();\n\t\t\t\t\t}, 300);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tif (menuItems && menuItems.length > 0)\n\t\t{\n\t\t\tthis.sectionActionMenu = MenuManager.create(\n\t\t\t\t`section-menu-${Util.getRandomInt()}`,\n\t\t\t\tmenuItemNode,\n\t\t\t\tmenuItems,\n\t\t\t\t{\n\t\t\t\t\tcloseByEsc: true,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tzIndex: this.zIndex,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\toffsetLeft: 9,\n\t\t\t\t\tangle: true,\n\t\t\t\t\tcacheable: false,\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tthis.sectionActionMenu.show();\n\t\t\tthis.sectionActionMenu.popupWindow.subscribe('onClose', () => {\n\t\t\t\tif (Type.isElementNode(itemNode))\n\t\t\t\t{\n\t\t\t\t\tDom.removeClass(itemNode, 'active');\n\t\t\t\t}\n\t\t\t\tthis.allowSliderClose();\n\t\t\t});\n\n\t\t\tthis.denySliderClose();\n\t\t}\n\t}\n\n\tdenySliderClose()\n\t{\n\t\tthis.denyClose = true;\n\t}\n\n\tallowSliderClose()\n\t{\n\t\tthis.denyClose = false;\n\t}\n\n\tcloseForms()\n\t{\n\t\tif (this.addBtnMenu)\n\t\t{\n\t\t\tthis.addBtnMenu.close();\n\t\t}\n\n\t\tif (this.editSectionForm)\n\t\t{\n\t\t\tthis.editSectionForm.close();\n\t\t}\n\n\t\tif (this.trackingUsersForm)\n\t\t{\n\t\t\tthis.trackingUsersForm.close();\n\t\t}\n\n\t\tif (this.trackingGroupsForm)\n\t\t{\n\t\t\tthis.trackingGroupsForm.close();\n\t\t}\n\n\t\tif (this.trackingTypesForm)\n\t\t{\n\t\t\tthis.trackingTypesForm.close();\n\t\t}\n\t}\n\n\tshowEditSectionForm(params = {})\n\t{\n\t\tif (!this.DOM.sectionFormWrap)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tthis.closeForms();\n\t\tconst formTitleNode = this.DOM.sectionFormWrap.querySelector('.calendar-list-slider-card-widget-title-text');\n\n\t\tthis.editSectionForm = new EditForm({\n\t\t\twrap: this.DOM.sectionFormWrap,\n\t\t\tsectionAccessTasks: this.sectionManager.getSectionAccessTasks(),\n\t\t\tsectionManager: this.sectionManager,\n\t\t\tcloseCallback: () => {\n\t\t\t\tthis.allowSliderClose();\n\t\t\t},\n\t\t});\n\n\t\tlet showAccessControl = true;\n\t\tif (params.section && (!params.section.belongsToView() || params.section.isPseudo()))\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_EDIT_SECTION_PERSONAL');\n\t\t\tshowAccessControl = false;\n\t\t}\n\t\telse if (params.section && params.section.id)\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_EDIT_SECTION');\n\t\t\tshowAccessControl = params.section.hasPermission('access');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tformTitleNode.innerHTML = Loc.getMessage('EC_SEC_SLIDER_NEW_SECTION');\n\t\t}\n\n\t\tthis.editSectionForm.show({\n\t\t\tshowAccess: showAccessControl,\n\t\t\tallowChangeName: params.section ? !params.section.isPrimaryForConnection() : true,\n\t\t\tsection: params.section || {\n\t\t\t\tcolor: Util.getRandomColor(),\n\t\t\t\taccess: this.sectionManager.getDefaultSectionAccess(),\n\t\t\t},\n\t\t});\n\n\t\tthis.denySliderClose();\n\t}\n\n\tshowTrackingTypesForm()\n\t{\n\t\tthis.closeForms();\n\n\t\tif (!this.trackingTypesForm)\n\t\t{\n\t\t\tthis.trackingTypesForm = new TrackingTypesForm({\n\t\t\t\twrap: this.DOM.trackingTypesFormWrap,\n\t\t\t\tsuperposedSections: this.sectionManager.getSuperposedSectionList(),\n\t\t\t\tcloseCallback: () => {\n\t\t\t\t\tthis.allowSliderClose();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.trackingTypesForm.show();\n\t\tthis.denySliderClose();\n\t}\n\n\tshowTrackingUsersForm()\n\t{\n\t\tthis.closeForms();\n\n\t\tif (!this.trackingUsersForm)\n\t\t{\n\t\t\tthis.trackingUsersForm = new TrackingUsersForm({\n\t\t\t\twrap: this.DOM.trackingUsersFormWrap,\n\t\t\t\ttrackingUsers: this.calendarContext.util.getSuperposedTrackedUsers(),\n\t\t\t\tsuperposedSections: this.sectionManager.getSuperposedSectionList(),\n\t\t\t\tcloseCallback: () => {\n\t\t\t\t\tthis.allowSliderClose();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.trackingUsersForm.show();\n\t\tthis.denySliderClose();\n\t}\n\n\tshowTrackingGroupsForm()\n\t{\n\t\tthis.closeForms();\n\n\t\tif (!this.trackingGroupsForm)\n\t\t{\n\t\t\tconst superposedSections = this.sectionManager.getSuperposedSectionList();\n\t\t\tconst trackingGroups = this.calendarContext.util.getSuperposedTrackedGroups();\n\n\t\t\tsuperposedSections.forEach((section) => {\n\t\t\t\tif (section.getType() === 'group'\n\t\t\t\t\t&& !trackingGroups.includes(section.getOwnerId()))\n\t\t\t\t{\n\t\t\t\t\ttrackingGroups.push(section.getOwnerId());\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.trackingGroupsForm = new TrackingGroupsForm({\n\t\t\t\twrap: this.DOM.trackingGroupsFormWrap,\n\t\t\t\ttrackingGroups,\n\t\t\t\tsuperposedSections,\n\t\t\t\tcloseCallback: () => {\n\t\t\t\t\tthis.allowSliderClose();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.trackingGroupsForm.show();\n\t\tthis.denySliderClose();\n\t}\n\n\tdeleteSectionHandler(event)\n\t{\n\t\tif (event && event instanceof this.BX.Event.BaseEvent)\n\t\t{\n\t\t\tconst data = event.getData();\n\t\t\tconst sectionId = parseInt(data.sectionId, 10);\n\n\t\t\tthis.sliderSections.forEach((section, index) => {\n\t\t\t\tif (parseInt(section.id) === sectionId)\n\t\t\t\t{\n\t\t\t\t\tthis.sectionManager.deleteSectionHandler(sectionId);\n\t\t\t\t\tthis.deletedSectionsIds.push(sectionId);\n\t\t\t\t\tconst deleteSectionNodes = this.DOM.sectonListOuterWrap.querySelectorAll(\n\t\t\t\t\t\t`.calendar-list-slider-item[data-bx-calendar-section='${sectionId}']`,\n\t\t\t\t\t);\n\n\t\t\t\t\tdeleteSectionNodes.forEach((node) => {\n\t\t\t\t\t\tDom.addClass(node, 'calendar-list-slider-item-disappearing');\n\t\t\t\t\t});\n\n\t\t\t\t\tif (!section.externalTypeIsLocal())\n\t\t\t\t\t{\n\t\t\t\t\t\tconst listWrap = this.getSectionListWrapForSection(section);\n\t\t\t\t\t\tthis.sliderSections = BX.util.deleteFromArray(this.sliderSections, index);\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tdeleteSectionNodes.forEach((node) => {\n\t\t\t\t\t\t\t\tDom.remove(node);\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif (!listWrap.querySelector('li.calendar-list-slider-item'))\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tDom.remove(listWrap.closest('.calendar-list-slider-card-widget'));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.closeForms();\n\t\t}\n\t}\n\n\thideSuperposedHandler(section)\n\t{\n\t\tconst superposedSections = this.sectionManager.getSuperposedSectionList();\n\t\tconst sections = [];\n\t\tlet i;\n\n\t\tfor (i = 0; i < superposedSections.length; i++)\n\t\t{\n\t\t\tif (parseInt(section.id) !== parseInt(superposedSections[i].id))\n\t\t\t{\n\t\t\t\tsections.push(parseInt(superposedSections[i].id));\n\t\t\t}\n\t\t}\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.setTrackingSections', {\n\t\t\tdata: {\n\t\t\t\tsections,\n\t\t\t},\n\t\t})\n\t\t\t.then(\n\t\t\t\t// Success\n\t\t\t\t(response) => {\n\t\t\t\t\tBX.reload();\n\t\t\t\t},\n\t\t\t\t// Failure\n\t\t\t\t(response) => {\n\t\t\t\t\tUtil.displayError(response.errors);\n\t\t\t\t},\n\t\t\t);\n\t}\n\n\trefreshSectionList()\n\t{\n\t\tthis.createSectionList();\n\t}\n\n\tshowOnlyOneSection(section, sections)\n\t{\n\t\tfor (const curSection of sections)\n\t\t{\n\t\t\tif (curSection.id === section.id)\n\t\t\t{\n\t\t\t\tthis.switchOnSection(curSection);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.switchOffSection(curSection);\n\t\t\t}\n\t\t}\n\n\t\tthis.calendarContext.reload();\n\t}\n\n\tkeyHandler(e)\n\t{\n\t\tif (\n\t\t\te.keyCode === Util.getKeyCode('enter')\n\t\t\t&& this.DOM.confirmSectionPopup\n\t\t\t&& this.currentConfirmMode\n\t\t\t&& this.currentSection\n\t\t)\n\t\t{\n\t\t\tswitch (this.currentConfirmMode)\n\t\t\t{\n\t\t\t\tcase 'delete': {\n\t\t\t\t\tthis.removeSection(this.currentSection);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase 'hideSync': {\n\t\t\t\t\tthis.hideSyncSection(this.currentSection);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcase 'hideExternal': {\n\t\t\t\t\tthis.hideExternalSection(this.currentSection);\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t// No default\n\t\t\t}\n\t\t}\n\t}\n\n\tshowSectionConfirm(mode, section)\n\t{\n\t\tthis.currentSection = section;\n\t\tthis.currentConfirmMode = mode;\n\n\t\tconst confirmCallback = this.getConfirmCallback();\n\t\tconst okCaption = this.getOkCaption();\n\n\t\tthis.DOM.confirmSectionPopup = new MessageBox({\n\t\t\tmessage: this.getSectionConfirmContent(),\n\t\t\tminHeight: 120,\n\t\t\tminWidth: 280,\n\t\t\tmaxWidth: 300,\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,\n\t\t\tonOk: confirmCallback,\n\t\t\tonCancel: () => {\n\t\t\t\tthis.DOM.confirmSectionPopup.close();\n\t\t\t},\n\t\t\tokCaption,\n\t\t\tpopupOptions: {\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tdelete this.DOM.confirmSectionPopup;\n\t\t\t\t\t\tdelete this.currentSection;\n\t\t\t\t\t\tdelete this.currentConfirmMode;\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t},\n\t\t});\n\n\t\tthis.DOM.confirmSectionPopup.show();\n\t}\n\n\tgetConfirmCallback()\n\t{\n\t\tif (this.currentConfirmMode === 'delete')\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tthis.removeSection(this.currentSection);\n\t\t\t};\n\t\t}\n\n\t\tif (this.currentConfirmMode === 'hideSync')\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tthis.hideSyncSection(this.currentSection);\n\t\t\t};\n\t\t}\n\n\t\tif (this.currentConfirmMode === 'hideExternal')\n\t\t{\n\t\t\treturn () => {\n\t\t\t\tthis.hideExternalSection(this.currentSection);\n\t\t\t};\n\t\t}\n\t}\n\n\tgetOkCaption()\n\t{\n\t\tif (this.currentConfirmMode === 'delete')\n\t\t{\n\t\t\treturn Loc.getMessage('EC_SEC_DELETE');\n\t\t}\n\n\t\tif (this.currentConfirmMode === 'hideSync' || this.currentConfirmMode === 'hideExternal')\n\t\t{\n\t\t\treturn Loc.getMessage('EC_CAL_SYNC_DISCONNECT');\n\t\t}\n\t}\n\n\tgetSectionConfirmContent()\n\t{\n\t\tlet phrase = '';\n\n\t\tif (this.currentConfirmMode === 'delete')\n\t\t{\n\t\t\tphrase = Loc.getMessage('EC_SEC_DELETE_CONFIRM');\n\t\t}\n\t\telse if (this.currentConfirmMode === 'hideSync' || this.currentConfirmMode === 'hideExternal')\n\t\t{\n\t\t\tphrase = Loc.getMessage('EC_CAL_GOOGLE_HIDE_CONFIRM');\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"calendar-list-slider-messagebox-text\">${phrase}</div>\n\t\t`;\n\t}\n\n\tremoveSection(section)\n\t{\n\t\tsection.remove();\n\t\tthis.DOM.confirmSectionPopup.close();\n\t}\n\n\thideSyncSection(section)\n\t{\n\t\tsection.hideSyncSection();\n\t\tthis.DOM.confirmSectionPopup.close();\n\t}\n\n\thideExternalSection(section)\n\t{\n\t\tsection.hideExternalCalendarSection();\n\t\tthis.DOM.confirmSectionPopup.close();\n\t}\n}\n"],"names":["EditForm","EventEmitter","constructor","options","DOM","isCreated","setEventNamespace","outerWrap","wrap","sectionAccessTasks","sectionManager","closeCallback","BX","Util","getBX","keyHandlerBinded","keyHandler","bind","show","params","section","create","showAccess","allowChangeName","accessLink","style","display","accessWrap","Event","document","Dom","addClass","color","setColor","setAccess","access","data","ACCESS","name","sectionTitleInput","value","focus","select","disabled","isOpenedState","close","unbind","removeClass","Type","isFunction","isOpened","querySelector","clean","appendChild","props","className","formFieldsWrap","attrs","type","placeholder","Loc","getMessage","optionsWrap","initSectionColorSelector","initAccessController","buttonsWrap","saveBtn","UI","Button","text","events","click","save","renderTo","checkClose","e","keyCode","getKeyCode","setWaiting","saveSection","then","colorContWrap","html","colorIcon","colorChangeLink","showSimplePicker","colors","Runtime","clone","getDefaultColorList","innerCont","colorWrap","delegate","simplePickerClick","moreLinkWrap","moreLink","showFullPicker","simplePickerColorWrap","includes","push","i","length","node","backgroundColor","lastActiveNode","util","array_search","simpleColorPopup","PopupWindowManager","getRandomInt","autoHide","closeByEsc","offsetTop","offsetLeft","lightShadow","content","cacheable","setAngle","offset","target","findTargetNode","srcElement","isElementNode","getAttribute","fullColorPicker","getPopupWindow","isDestroyed","ColorPicker","bindElement","onColorSelected","popupOptions","zIndex","onPopupClose","open","rowsCount","code","hasOwnProperty","accessRowsCount","insertAccessRow","getAccessName","checkAccessTableHeight","buildAccessController","calendarType","initDialogGroup","initDialogStandard","initAccessSelectorPopup","accessControls","showAccessSelectorPopup","removeIcon","setValueCallback","accessTasks","valueNode","innerHTML","Text","encode","title","remove","rowNode","Tag","render","accessTable","accessButton","hasClass","entities","id","analyticsSource","selectMode","isProjectFeatureEnabled","entitySelectorDialog","EntitySelectorDialog","targetNode","context","preselectedItems","enableSearch","handleEntitySelectorChanges","targetContainer","body","tabs","ownerName","items","ownerId","entityId","entityList","getSelectedItems","hide","isArray","forEach","entity","convertEntityToAccessCode","setAccessName","debounce","destroy","undefined","taskId","adjust","insertRow","titleNode","insertCell","valueCell","selectNode","checkTableTimeout","clearTimeout","setTimeout","offsetHeight","maxHeight","parseInt","accessPopupMenu","popupWindow","isShown","_this","menuItems","onclick","PopupMenu","randomInt","angle","TrackingUsersForm","interfaceType","trackingUsers","trackingUserIdList","map","item","ID","trackingGroupIdList","CHECKED_CLASS","selectorId","superposedSections","selected","checkInnerWrapHeight","updateSectionList","firstTrackingUserIdList","cssText","innerWrap","selectorWrap","userTagSelector","TagSelector","dialogOptions","width","handleUserSelectorChanges","sectionsWrap","createButtons","selectedItems","getDialog","ajax","runAction","userIdList","sections","prepareTrackingSections","response","location","reload","displayError","errors","getSelectedSections","sectionIndex","checkbox","filter","delayExecution","updateSectionLoader","getLoader","height","updateSectionTimeout","users","user","OWNER_ID","FORMATTED_NAME","createSectionBlock","sectionList","result","listWrap","sectionClick","toString","li","COLOR","NAME","checkHeightTimeout","TrackingGroupsForm","trackingGroups","groupTagSelector","handleGroupSelectorChanges","lockProjectLink","lockProjectLinkFeatureId","groupIdList","TrackingTypesForm","selectGroups","selectUsers","addLinkMessage","SectionInterface","calendarContext","readonly","uid","SLIDER_WIDTH","SLIDER_DURATION","sliderId","denyClose","deletedSectionsIds","deleteSectionHandlerBinded","deleteSectionHandler","refreshSectionListBinded","refreshSectionList","config","accessNames","setAccessNames","SidePanel","Instance","contentCallback","createContent","animationDuration","onCloseByEsc","escHide","onClose","onCloseComplete","onLoad","onLoadSlider","addEventEmitterSubscriptions","subscribe","destroyEventEmitterSubscriptions","unsubscribe","event","getSlider","getUrl","denyAction","closeForms","removeCustomEvent","proxy","localSectionListWrap","sectionActionMenu","trackingTypesForm","trackingUsersForm","trackingGroupsForm","addBtnMenu","titleWrap","getCalendarContext","sectionFormWrap","isExtranetUser","isUserCalendar","userIsOwner","createAddButton","trackingGroupsFormWrap","trackingUsersFormWrap","trackingTypesFormWrap","createSectionList","slider","layout","sliderSections","getSections","find","sectonListOuterWrap","sectionClickHandler","createLocalSectionsList","createExternalSectionsList","getSectionListWrap","getLocalSectionListTitle","createSectionsBlock","externalTypeIsLocal","belongsToView","isPseudo","createCompanySectionList","createUsersSectionList","createGroupsSectionList","externalSections","extSectionListWrap","getSectionListWrapForSection","createSectionUnit","sectionExternalType","getExternalType","isGoogle","IS_EXCHANGE","sectionExternalConnection","SectionManager","getSectionExternalConnection","CAL_DAV_CON","addParams","key","getId","sectionListWrap","getExternalConnectionBlockTitle","connection","isArchive","isExchange","bExchange","hintNode","isDomNode","initHintNode","connectionName","getConnectionAccountName","getConnectionName","getType","isCompanyCalendar","getSuperposedTrackedUsers","perm","edit_section","addButtonOuter","addButton","addButtonMore","showAddButtonPopup","showEditSectionForm","MenuItem","delimiter","getAddCompanyMenuItem","getAddUserMenuItem","getAddGroupMenuItem","MenuManager","showTrackingTypesForm","showTrackingUsersForm","projectFeatureEnabled","showTrackingGroupsForm","FeaturePromotersRegistry","getPromoter","featureId","sectionId","actionCont","showSectionMenu","getSection","switchSection","syncInterface","openSyncPanel","findCheckBoxNodes","querySelectorAll","checkboxNodes","checkboxNode","switchOnSection","switchOffSection","menuItemNode","itemNode","closest","canDo","showOnlyOneSection","getLink","href","isSuperposed","hideSuperposedHandler","canBeConnectedToOutlook","EXTERNAL_TYPE","connectToOutlook","EXPORT","LINK","sectionLink","calendarPath","path","IcalSyncPopup","checkPathes","createInstance","showPopupWithPathesError","provider","getProviderById","showSectionConfirm","isIcloud","isOffice365","isCalDav","openActiveConnectionSlider","taskSectionBelongToUser","userOptions","allowSliderClose","denySliderClose","editSectionForm","formTitleNode","getSectionAccessTasks","showAccessControl","hasPermission","isPrimaryForConnection","getRandomColor","getDefaultSectionAccess","getSuperposedSectionList","getSuperposedTrackedGroups","getOwnerId","BaseEvent","getData","index","deleteSectionNodes","deleteFromArray","curSection","confirmSectionPopup","currentConfirmMode","currentSection","removeSection","hideSyncSection","hideExternalSection","mode","confirmCallback","getConfirmCallback","okCaption","getOkCaption","MessageBox","message","getSectionConfirmContent","minHeight","minWidth","maxWidth","buttons","Dialogs","MessageBoxButtons","OK_CANCEL","onOk","onCancel","padding","contentPadding","animation","phrase","hideExternalCalendarSection"],"mappings":"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"}