{"version":3,"file":"ears.bundle.js","sources":["../src/ears.js"],"sourcesContent":["import {Tag, Dom, Cache} from 'main.core';\n\nexport class Ears\n{\n\tconstructor(options)\n\t{\n\t\tthis.container = options.container;\n\t\tthis.smallSize = options.smallSize || null;\n\t\tthis.noScrollbar = options.noScrollbar ? options.noScrollbar : false;\n\t\tthis.className = options.className ? options.className : null;\n\t\tthis.wrapper = null;\n\t\tthis.leftEar = null;\n\t\tthis.rightEar = null;\n\t\tthis.parentContainer = this.container.parentNode;\n\t\tthis.delay = 6;\n\t\tthis.scrollTimeout = null;\n\t\tthis.cache = new Cache.MemoryCache();\n\t}\n\n\tbindEvents() {\n\t\tthis.container.addEventListener('scroll', this.toggleEars.bind(this));\n\t\tthis.container.addEventListener('wheel', this.onWheel.bind(this));\n\n\t\tthis.getLeftEar().addEventListener('mouseenter', this.scrollLeft.bind(this));\n\t\tthis.getLeftEar().addEventListener('mouseleave', this.stopScroll.bind(this));\n\t\tthis.getLeftEar().addEventListener('mousedown', this.stopScroll.bind(this));\n\t\tthis.getLeftEar().addEventListener('mouseup', this.scrollLeft.bind(this));\n\n\t\tthis.getRightEar().addEventListener('mouseenter', this.scrollRight.bind(this));\n\t\tthis.getRightEar().addEventListener('mouseleave', this.stopScroll.bind(this));\n\t\tthis.getRightEar().addEventListener('mousedown', this.stopScroll.bind(this));\n\t\tthis.getRightEar().addEventListener('mouseup', this.scrollRight.bind(this));\n\t}\n\n\tinit() {\n\t\tthis.setWrapper();\n\t\tthis.bindEvents();\n\n\t\tsetTimeout(() => {\n\t\t\tif (this.container.scrollWidth > this.container.offsetWidth)\n\t\t\t{\n\t\t\t\tthis.toggleRightEar();\n\n\t\t\t\tlet activeItem = this.container.querySelector('[data-role=\"ui-ears-active\"]');\n\n\t\t\t\tactiveItem ? this.scrollToActiveItem(activeItem) : null;\n\t\t\t}\n\t\t}, 600);\n\t}\n\n\tscrollToActiveItem(activeItem)\n\t{\n\t\tlet scrollToPoint = activeItem.offsetLeft - (this.container.offsetWidth / 2 - activeItem.offsetWidth / 2);\n\t\tlet scrollWidth = 0;\n\t\tlet interval = setInterval(() => {\n\t\t\tif( scrollWidth >= scrollToPoint ||\n\t\t\t\tscrollWidth + this.container.offsetWidth >= this.container.scrollWidth)\n\t\t\t{\n\t\t\t\tclearInterval(interval);\n\t\t\t}\n\n\t\t\tthis.container.scrollLeft = scrollWidth += 10;\n\t\t},10)\n\t}\n\n\tonWheel(event)\n\t{\n\t\tif (event.deltaY < 0 || event.deltaX > 0)\n\t\t{\n\t\t\tthis.scrollRight();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.scrollLeft();\n\t\t}\n\n\t\tclearTimeout(this.scrollTimeout);\n\t\tthis.scrollTimeout = setTimeout(() => this.stopScroll(), 150);\n\t}\n\n\tsetWrapper() {\n\t\tthis.container.classList.add('ui-ear-container');\n\t\tif (this.noScrollbar)\n\t\t{\n\t\t\tthis.container.classList.add('ui-ear-container-no-scrollbar');\n\t\t}\n\t\tDom.append(this.getWrapper(), this.parentContainer);\n\t}\n\n\tgetWrapper()\n\t{\n\t\treturn this.cache.remember('wrapper', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t\t<div class='ui-ears-wrapper ${this.smallSize ? ' ui-ears-wrapper-sm' : ''} ${this.className ? this.className : ''}'>\n\t\t\t\t\t\t${this.getLeftEar()}\n\t\t\t\t\t\t${this.getRightEar()}\n\t\t\t\t\t\t${this.container}\n\t\t\t\t\t</div>\n\t\t\t\t`;\n\t\t});\n\t}\n\n\tgetLeftEar()\n\t{\n\t\treturn this.cache.remember('leftEar', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t\t<div class='ui-ear ui-ear-left'></div>\n\t\t\t\t`;\n\t\t});\n\t}\n\n\tgetRightEar()\n\t{\n\t\treturn this.cache.remember('rightEar', () => {\n\t\t\treturn Tag.render`\n\t\t\t\t\t<div class='ui-ear ui-ear-right'></div>\n\t\t\t\t`;\n\t\t});\n\t}\n\n\ttoggleEars() {\n\t\tthis.toggleRightEar();\n\t\tthis.toggleLeftEar();\n\t}\n\n\ttoggleRightEar() {\n\t\tif (this.container.scrollWidth > this.container.offsetWidth\n\t\t\t&& (this.container.offsetWidth + this.container.scrollLeft) < this.container.scrollWidth)\n\t\t{\n\t\t\tthis.getRightEar().classList.add('ui-ear-show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getRightEar().classList.remove('ui-ear-show');\n\t\t}\n\t}\n\n\ttoggleLeftEar() {\n\t\tif (this.container.scrollLeft > 0)\n\t\t{\n\t\t\tthis.getLeftEar().classList.add('ui-ear-show');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.getLeftEar().classList.remove('ui-ear-show');\n\t\t}\n\t}\n\n\tscrollLeft() {\n\t\tthis.stopScroll('right');\n\n\t\tthis.container.scrollLeft -= 10;\n\t\tthis.setDelay();\n\t\tthis.scrollInterval = setInterval(\n\t\t\tthis.scrollLeft.bind(this),\n\t\t\tthis.delay);\n\n\t\tthis.left = true;\n\t}\n\n\tscrollRight() {\n\t\tthis.stopScroll('left');\n\n\t\tthis.container.scrollLeft += 10;\n\t\tthis.setDelay();\n\t\tthis.scrollInterval = setInterval(\n\t\t\tthis.scrollRight.bind(this),\n\t\t\tthis.delay);\n\n\t\tthis.right = true;\n\t}\n\n\tsetDelay() {\n\t\tif (this.container.scrollWidth < this.container.offsetWidth * 1.6)\n\t\t{\n\t\t\tthis.delay = 20;\n\t\t\treturn;\n\t\t}\n\n\t\tconst fullScrollLeft = this.container.scrollWidth - this.container.offsetWidth;\n\t\tconst conditionRight = this.container.scrollLeft > fullScrollLeft / 1.3;\n\t\tconst conditionLeft = this.container.scrollLeft < fullScrollLeft / 4;\n\n\t\tif (this.container.scrollLeft === fullScrollLeft)\n\t\t{\n\t\t\tthis.delay = 6;\n\t\t}\n\n\t\tif (this.left)\n\t\t{\n\t\t\tif (conditionLeft)\n\t\t\t{\n\t\t\t\tthis.delay = 25;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.delay = 6;\n\t\t\t}\n\t\t}\n\n\t\tif (this.right)\n\t\t{\n\t\t\tif (conditionRight)\n\t\t\t{\n\t\t\t\tthis.delay = 25;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.delay = 6;\n\t\t\t}\n\t\t}\n\t}\n\n\tstopScroll(direction) {\n\t\tif (this.scrollInterval)\n\t\t{\n\t\t\tclearInterval(this.scrollInterval);\n\t\t\tthis.scrollInterval = 0;\n\t\t}\n\n\t\tif (direction === 'right')\n\t\t{\n\t\t\tthis.right = false;\n\t\t}\n\t\telse if (direction === 'left')\n\t\t{\n\t\t\tthis.left = false;\n\t\t}\n\t}\n}\n"],"names":["Ears","options","container","smallSize","noScrollbar","className","wrapper","leftEar","rightEar","parentContainer","parentNode","delay","scrollTimeout","cache","Cache","MemoryCache","addEventListener","toggleEars","bind","onWheel","getLeftEar","scrollLeft","stopScroll","getRightEar","scrollRight","setWrapper","bindEvents","setTimeout","scrollWidth","offsetWidth","toggleRightEar","activeItem","querySelector","scrollToActiveItem","scrollToPoint","offsetLeft","interval","setInterval","clearInterval","event","deltaY","deltaX","clearTimeout","classList","add","Dom","append","getWrapper","remember","Tag","render","toggleLeftEar","remove","setDelay","scrollInterval","left","right","fullScrollLeft","conditionRight","conditionLeft","direction"],"mappings":"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"}