this.BX=this.BX||{};this.BX.Socialnetwork=this.BX.Socialnetwork||{};(function(e,t,i,a,s,r,n,l,o,c,u,d,p,h){"use strict";function b(e,t){f(e,t);t.add(e)}function v(e,t,i){f(e,t);t.set(e,i)}function f(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function g(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var m=new WeakMap;var w=new WeakMap;var H=new WeakSet;var y=new WeakSet;var S=new WeakSet;var _=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));b(babelHelpers.assertThisInitialized(a),S);b(babelHelpers.assertThisInitialized(a),y);b(babelHelpers.assertThisInitialized(a),H);v(babelHelpers.assertThisInitialized(a),m,{writable:true,value:void 0});v(babelHelpers.assertThisInitialized(a),w,{writable:true,value:void 0});a.setEventNamespace("BX.Socialnetwork.Spaces.Menu.PullRequests");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),m,parseInt(e,10));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),w,parseInt(i,10));return a}babelHelpers.createClass(t,[{key:"getModuleId",value:function e(){return"socialnetwork"}},{key:"getMap",value:function e(){return{workgroup_user_add:g(this,H,T).bind(this),workgroup_user_delete:g(this,H,T).bind(this),workgroup_user_update:g(this,H,T).bind(this),workgroup_update:g(this,H,T).bind(this),user_spaces_counter:g(this,y,P).bind(this),space_feature_change:g(this,S,k).bind(this)}}}]);return t}(d.EventEmitter);function T(e){if(parseInt(e.params.GROUP_ID,10)===babelHelpers.classPrivateFieldGet(this,m)){this.emit("update")}}function P(e){var t=this;if(e.userId&&parseInt(e.userId,10)===babelHelpers.classPrivateFieldGet(this,w)){e.space=e.spaces.find((function(e){return e.id===babelHelpers.classPrivateFieldGet(t,m)}));if(!e.space){e.space={id:babelHelpers.classPrivateFieldGet(this,m),metrics:{countersTasksTotal:0,countersCalendarTotal:0,countersLiveFeedTotal:0}}}this.emit("updateCounters",e)}}function k(e){if(e.GROUP_ID===babelHelpers.classPrivateFieldGet(this,m)&&e.USER_ID===babelHelpers.classPrivateFieldGet(this,w)){this.emit("updateMenuItem",e)}}var E;function I(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */I=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},s="function"==typeof Symbol?Symbol:{},r=s.iterator||"@@iterator",n=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,a){return t[i]=a}}function c(e,t,i,s){var r=t&&t.prototype instanceof p?t:p,n=Object.create(r.prototype),l=new P(s||[]);return a(n,"_invoke",{value:y(e,i,l)}),n}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function p(){}function h(){}function b(){}var v={};o(v,r,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(k([])));g&&g!==t&&i.call(g,r)&&(v=g);var m=b.prototype=p.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function H(e,t){function s(a,r,n,l){var o=u(e[a],e,r);if("throw"!==o.type){var c=o.arg,d=c.value;return d&&"object"==babelHelpers["typeof"](d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){s("next",e,n,l)}),(function(e){s("throw",e,n,l)})):t.resolve(d).then((function(e){c.value=e,n(c)}),(function(e){return s("throw",e,n,l)}))}l(o.arg)}var r;a(this,"_invoke",{value:function e(i,a){function n(){return new t((function(e,t){s(i,a,e,t)}))}return r=r?r.then(n,n):n()}})}function y(e,t,i){var a="suspendedStart";return function(s,r){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===s)throw r;return E()}for(i.method=s,i.arg=r;;){var n=i.delegate;if(n){var l=S(n,i);if(l){if(l===d)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var o=u(e,t,i);if("normal"===o.type){if(a=i.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(a="completed",i.method="throw",i.arg=o.arg)}}}function S(e,t){var i=t.method,a=e.iterator[i];if(undefined===a)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var s=u(a,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,d;var r=s.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,s=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=undefined,t.done=!0,t};return s.next=s}}return{next:E}}function E(){return{value:undefined,done:!0}}return h.prototype=b,a(m,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=o(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(H.prototype),o(H.prototype,n,(function(){return this})),e.AsyncIterator=H,e.async=function(t,i,a,s,r){void 0===r&&(r=Promise);var n=new H(c(t,i,a,s),r);return e.isGeneratorFunction(i)?n:n.next().then((function(e){return e.done?e.value:n.next()}))},w(m),o(m,l,"Generator"),o(m,r,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var a=this;function s(e,i){return l.type="throw",l.arg=t,a.next=e,i&&(a.method="next",a.arg=undefined),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r],l=n.completion;if("root"===n.tryLoc)return s("end");if(n.tryLoc<=this.prev){var o=i.call(n,"catchLoc"),c=i.call(n,"finallyLoc");if(o&&c){if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}}},abrupt:function e(t,a){for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=a&&a<=n.finallyLoc&&(n=null);var l=n?n.completion:{};return l.type=t,l.arg=a,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(l)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),d},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),T(a),d}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc===t){var s=a.completion;if("throw"===s.type){var r=s.arg;T(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,a){return this.delegate={iterator:k(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=undefined),d}},e}function F(e,t,i){C(e,t);t.set(e,i)}function C(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var G=new WeakMap;var L=function(e){babelHelpers.inherits(t,e);function t(e,i){var a;babelHelpers.classCallCheck(this,t);a=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e,i));F(babelHelpers.assertThisInitialized(a),G,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(a),G,{createChatButton:null,cancelButton:null});a.handleDialogDestroy=a.handleDialogDestroy.bind(babelHelpers.assertThisInitialized(a));a.handleSelectedItemsUpdated=a.handleSelectedItemsUpdated.bind(babelHelpers.assertThisInitialized(a));a.bindEvents();return a}babelHelpers.createClass(t,[{key:"getContent",value:function e(){this.options.containerClass="sn-ui-selector-footer-create-chat";return u.Tag.render(E||(E=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),this.renderCreateChatButton(),this.renderCancelButton())}},{key:"renderCreateChatButton",value:function e(){babelHelpers.classPrivateFieldGet(this,G).createChatButton=new n.Button({text:u.Loc.getMessage("SOCNET_ENTITY_SELECTOR_CREATE"),round:true,color:n.ButtonColor.PRIMARY,size:n.ButtonSize.SMALL,events:{click:this.createChatButtonClickHandler.bind(this)}});babelHelpers.classPrivateFieldGet(this,G).createChatButton.setDisabled(true);return babelHelpers.classPrivateFieldGet(this,G).createChatButton.getContainer()}},{key:"createChatButtonClickHandler",value:function e(){var t=this;var i=this.getDialog().getSelectedItems().map((function(e){return e.getId()}));babelHelpers.classPrivateFieldGet(this,G).createChatButton.setWaiting(true);this.createChatAction(i).then(function(){var e=babelHelpers.asyncToGenerator(I().mark((function e(i){var a,s,r;return I().wrap((function e(n){while(1)switch(n.prev=n.next){case 0:a="chat"+i.data;n.next=3;return u.Runtime.loadExtension("im.public.iframe");case 3:s=n.sent;r=s.Messenger;r.openChat(a);babelHelpers.classPrivateFieldGet(t,G).createChatButton.setWaiting(false);t.getDialog().deselectAll();t.getDialog().hide();case 9:case"end":return n.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"createChatAction",value:function e(t){return BX.ajax.runAction("socialnetwork.api.chat.create",{data:{userIds:t}})}},{key:"renderCancelButton",value:function e(){babelHelpers.classPrivateFieldGet(this,G).cancelButton=new n.Button({text:u.Loc.getMessage("SOCNET_ENTITY_SELECTOR_CANCEL"),round:true,color:n.ButtonColor.LIGHT_BORDER,size:n.ButtonSize.SMALL,events:{click:this.cancelButtonClickHandler.bind(this)}});return babelHelpers.classPrivateFieldGet(this,G).cancelButton.getContainer()}},{key:"cancelButtonClickHandler",value:function e(){this.getDialog().hide()}},{key:"bindEvents",value:function e(){this.getDialog().subscribe("onDestroy",this.handleDialogDestroy);this.getDialog().subscribe("Item:onSelect",this.handleSelectedItemsUpdated);this.getDialog().subscribe("Item:onDeselect",this.handleSelectedItemsUpdated)}},{key:"unbindEvents",value:function e(){this.getDialog().unsubscribe("onDestroy",this.handleDialogDestroy);this.getDialog().unsubscribe("Item:onSelect",this.handleSelectedItemsUpdated);this.getDialog().unsubscribe("Item:onDeselect",this.handleSelectedItemsUpdated)}},{key:"handleSelectedItemsUpdated",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,G).createChatButton){return}babelHelpers.classPrivateFieldGet(this,G).createChatButton.setDisabled(this.getDialog().getSelectedItems().length===0)}},{key:"handleDialogDestroy",value:function e(){this.unbindEvents()}}]);return t}(r.DefaultFooter);var M;function W(e,t){z(e,t);t.add(e)}function N(e,t,i){z(e,t);t.set(e,i)}function z(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function x(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var D=new WeakMap;var A=new WeakMap;var O=new WeakMap;var B=new WeakMap;var R=new WeakMap;var U=new WeakMap;var j=new WeakMap;var X=new WeakSet;var V=new WeakSet;var q=new WeakSet;var Y=function(e){babelHelpers.inherits(t,e);function t(e){var i,a,s,r,n;var l;babelHelpers.classCallCheck(this,t);l=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));W(babelHelpers.assertThisInitialized(l),q);W(babelHelpers.assertThisInitialized(l),V);W(babelHelpers.assertThisInitialized(l),X);N(babelHelpers.assertThisInitialized(l),D,{writable:true,value:void 0});N(babelHelpers.assertThisInitialized(l),A,{writable:true,value:void 0});N(babelHelpers.assertThisInitialized(l),O,{writable:true,value:void 0});N(babelHelpers.assertThisInitialized(l),B,{writable:true,value:void 0});N(babelHelpers.assertThisInitialized(l),R,{writable:true,value:void 0});N(babelHelpers.assertThisInitialized(l),U,{writable:true,value:void 0});N(babelHelpers.assertThisInitialized(l),j,{writable:true,value:void 0});l.setEventNamespace("SocialNetwork.Spaces.UserSelector");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),D,e.bindElement);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),A,e.title);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),O,(i=e.preselectedItems)!==null&&i!==void 0?i:[]);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),B,(a=e.onClose)!==null&&a!==void 0?a:function(){});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),R,(s=e.onLoad)!==null&&s!==void 0?s:function(){});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),U,(r=e.groupId)!==null&&r!==void 0?r:0);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(l),j,(n=e.createChat)!==null&&n!==void 0?n:false);return l}babelHelpers.createClass(t,[{key:"getDialog",value:function e(){if(!this.dialog){var t=babelHelpers.classPrivateFieldGet(this,A);var i=function(e){babelHelpers.inherits(i,e);function i(){babelHelpers.classCallCheck(this,i);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(i).apply(this,arguments))}babelHelpers.createClass(i,[{key:"render",value:function e(){return u.Tag.render(M||(M=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t\t\t<div class="sn-spaces__entity-dialog-header">',"</div>\n\t\t\t\t\t"])),t)}}]);return i}(r.BaseHeader);this.dialog=new r.Dialog({targetNode:babelHelpers.classPrivateFieldGet(this,D),width:400,dropdownMode:true,header:i,enableSearch:true,context:"socialnetwork.spaces",preselectedItems:babelHelpers.classPrivateFieldGet(this,O),entities:[{id:"user",substituteEntityId:babelHelpers.classPrivateFieldGet(this,j)?"project-user":null,options:{footerInviteIntranetOnly:true,showInvitationFooter:!babelHelpers.classPrivateFieldGet(this,j),projectId:babelHelpers.classPrivateFieldGet(this,U)}}],searchTabOptions:babelHelpers.classPrivateFieldGet(this,j)&&{stubOptions:{title:u.Loc.getMessage("SN_SPACES_USER_SELECTOR_SEARCH_TAB_EMPTY_TITLE"),subtitle:u.Loc.getMessage("SN_SPACES_USER_SELECTOR_SEARCH_TAB_EMPTY_TEXT")}},events:{onHide:babelHelpers.classPrivateFieldGet(this,B),onLoad:babelHelpers.classPrivateFieldGet(this,R),"SearchTab:onLoad":babelHelpers.classPrivateFieldGet(this,R)}});if(babelHelpers.classPrivateFieldGet(this,j)){this.dialog.setFooter(L)}x(this,X,J).call(this)}return this.dialog}},{key:"reload",value:function e(){this.dialog.loadState="UNSENT";this.dialog.load()}}]);return t}(d.EventEmitter);function J(){var e=this;d.EventEmitter.subscribe("SidePanel.Slider:onOpenStart",(function(t){var i=t.target;if(x(e,q,K).call(e)){u.Dom.style(x(e,q,K).call(e),"zIndex",i.getZindex())}}));d.EventEmitter.subscribe("SidePanel.Slider:onBeforeCloseComplete",(function(t){var i=t.target;if(x(e,V,Z).call(e,i)&&x(e,q,K).call(e)){u.Dom.style(x(e,q,K).call(e),"zIndex","")}}))}function Z(e){var t;return((t=e.options.data)===null||t===void 0?void 0:t.entitySelectorId)===this.dialog.getId()}function K(){return document.getElementById("bx-im-bar")}function Q(e,t){ee(e,t);t.add(e)}function $(e,t,i){ee(e,t);t.set(e,i)}function ee(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function te(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ie=new WeakMap;var ae=new WeakMap;var se=new WeakMap;var re=new WeakSet;var ne=function(){function e(t){babelHelpers.classCallCheck(this,e);Q(this,re);$(this,ie,{writable:true,value:void 0});$(this,ae,{writable:true,value:void 0});$(this,se,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(this,ie,t.entityType);babelHelpers.classPrivateFieldSet(this,ae,t.entityId);babelHelpers.classPrivateFieldSet(this,se,t.groupMembersList)}babelHelpers.createClass(e,[{key:"startVideoCall",value:function e(){var t=this;u.ajax.runAction("intranet.controlbutton.getVideoCallChat",{data:{entityType:babelHelpers.classPrivateFieldGet(this,ie)==="group"?"workgroup":"user",entityId:babelHelpers.classPrivateFieldGet(this,ae)},analyticsLabel:{entity:babelHelpers.classPrivateFieldGet(this,ie)}}).then((function(e){if(e.data){s.Messenger.startVideoCall("chat".concat(e.data),true)}t.chatLockCounter=0}),(function(e){if(e.errors[0].code==="lock_error"&&t.chatLockCounter<4){t.chatLockCounter++;t.startVideoCall()}}))}},{key:"openChat",value:function e(){var t=this;u.ajax.runAction("intranet.controlbutton.getChat",{data:{entityType:babelHelpers.classPrivateFieldGet(this,ie)==="group"?"workgroup":"user",entityId:babelHelpers.classPrivateFieldGet(this,ae)},analyticsLabel:{entity:babelHelpers.classPrivateFieldGet(this,ie)}}).then((function(e){if(e.data){s.Messenger.openChat("chat".concat(parseInt(e.data,10)))}t.chatLockCounter=0}),(function(e){if(e.errors[0].code==="lock_error"&&t.chatLockCounter<4){t.chatLockCounter++;t.openChat()}}))}},{key:"createChat",value:function e(t){this.getDialog(t).show()}},{key:"getDialog",value:function e(t){if(!this.userSelector){this.userSelector=new Y({bindElement:t,createChat:true,title:u.Loc.getMessage("SN_SPACES_CREATE_CHAT"),onLoad:te(this,re,le).bind(this),groupId:babelHelpers.classPrivateFieldGet(this,ae)})}return this.userSelector.getDialog()}},{key:"update",value:function e(t){var i=this;t.then((function(e){var t;babelHelpers.classPrivateFieldSet(i,se,e.groupMembersList);(t=i.userSelector)===null||t===void 0?void 0:t.reload()}))}}]);return e}();function le(){var e=babelHelpers.classPrivateFieldGet(this,se).filter((function(e){return e.isMember})).map((function(e){return parseInt(e.id)}));this.getDialog().getItems().forEach((function(t){var i=!e.includes(t.getId());t.setHidden(i);if(i&&t.isSelected()){t.deselect()}}))}function oe(e,t){ue(e,t);t.add(e)}function ce(e,t,i){ue(e,t);t.set(e,i)}function ue(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function de(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var pe=new WeakMap;var he=new WeakMap;var be=new WeakMap;var ve=new WeakSet;var fe=new WeakSet;var ge=new WeakSet;var me=new WeakSet;var we=new WeakSet;var He=new WeakSet;var ye=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e));oe(babelHelpers.assertThisInitialized(i),He);oe(babelHelpers.assertThisInitialized(i),we);oe(babelHelpers.assertThisInitialized(i),me);oe(babelHelpers.assertThisInitialized(i),ge);oe(babelHelpers.assertThisInitialized(i),fe);oe(babelHelpers.assertThisInitialized(i),ve);ce(babelHelpers.assertThisInitialized(i),pe,{writable:true,value:void 0});ce(babelHelpers.assertThisInitialized(i),he,{writable:true,value:void 0});ce(babelHelpers.assertThisInitialized(i),be,{writable:true,value:void 0});i.setEventNamespace("SocialNetwork.Spaces.Invite");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),pe,e.node);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),he,de(babelHelpers.assertThisInitialized(i),me,Pe).call(babelHelpers.assertThisInitialized(i),e.groupMembersList));babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),be,de(babelHelpers.assertThisInitialized(i),we,ke).call(babelHelpers.assertThisInitialized(i),e.groupMembersList));return i}babelHelpers.createClass(t,[{key:"show",value:function e(){this.getDialog().show()}},{key:"close",value:function e(){this.getDialog().hide()}},{key:"isShown",value:function e(){this.getDialogPopup().isShown()}},{key:"getDialogPopup",value:function e(){return this.getDialog().getPopup()}},{key:"getDialog",value:function e(){if(!this.dialog){var t=new Y({bindElement:babelHelpers.classPrivateFieldGet(this,pe),title:u.Loc.getMessage("SN_SPACES_MENU_SPACE_INVITE_MEMBERS"),preselectedItems:de(this,He,Ee).call(this),onClose:de(this,ve,Se).bind(this),onLoad:de(this,ge,Te).bind(this)});this.dialog=t.getDialog();this.dialog.getPopup().setAngle({position:"top",offset:babelHelpers.classPrivateFieldGet(this,pe).offsetWidth+parseInt(getComputedStyle(babelHelpers.classPrivateFieldGet(this,pe)).marginLeft)})}return this.dialog}},{key:"update",value:function e(t){var i=this;t.then((function(e){babelHelpers.classPrivateFieldSet(i,he,de(i,me,Pe).call(i,e.groupMembersList));babelHelpers.classPrivateFieldSet(i,be,de(i,we,ke).call(i,e.groupMembersList));de(i,ge,Te).call(i)}))}}]);return t}(d.EventEmitter);function Se(){var e=babelHelpers.toConsumableArray(this.dialog.getSelectedItems()).map((function(e){return e.id}));if(!de(this,fe,_e).call(this,e,babelHelpers.classPrivateFieldGet(this,he))){babelHelpers.classPrivateFieldSet(this,he,e);this.emit("usersSelected",babelHelpers.classPrivateFieldGet(this,he))}this.emit("onClose")}function _e(e,t){return babelHelpers.toConsumableArray(e).sort().toString()===babelHelpers.toConsumableArray(t).sort().toString()}function Te(){var e,t=this;(e=this.dialog)===null||e===void 0?void 0:e.getItems().forEach((function(e){var i=!babelHelpers.classPrivateFieldGet(t,he).includes(e.getId());var a=babelHelpers.classPrivateFieldGet(t,be).includes(e.getId());e.setHidden(a);if((a||i)&&e.isSelected()){e.deselect()}}))}function Pe(e){return e.filter((function(e){return e.invited})).map((function(e){return parseInt(e.id)}))}function ke(e){return e.filter((function(e){return!e.invited})).map((function(e){return parseInt(e.id)}))}function Ee(){return babelHelpers.classPrivateFieldGet(this,he).map((function(e){return["user",parseInt(e)]}))}var Ie;function Fe(e,t,i){Ce(e,t);t.set(e,i)}function Ce(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var Ge=new WeakMap;var Le=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Fe(babelHelpers.assertThisInitialized(i),Ge,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.ChatAction");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ge,e.canUse===true);return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t=this;var i="spaces-settings-video-call";var a="spaces-settings-open-chat";var s="spaces-settings-create-chat";var r=babelHelpers.classPrivateFieldGet(this,Ge)?"":"--disabled";var n=u.Tag.render(Ie||(Ie=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-communication">\n\t\t\t\t<div\n\t\t\t\t\tdata-id="','"\n\t\t\t\t\tclass="sn-spaces__popup-communication-item ','"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --video-1"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 26px;"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class="sn-spaces__popup-communication-item_text">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tdata-id="','"\n\t\t\t\t\tclass="sn-spaces__popup-communication-item ','"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --chat-1"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 26px;"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class="sn-spaces__popup-communication-item_text">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tdata-id="','"\n\t\t\t\t\tclass="sn-spaces__popup-communication-item ','" \n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --add-chat"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 26px;"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div class="sn-spaces__popup-communication-item_text">\n\t\t\t\t\t\t',"\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i,r,u.Loc.getMessage("SN_SPACES_MENU_CHAT_VIDEO_CALL_HD"),a,r,u.Loc.getMessage("SN_SPACES_MENU_CHAT_OPEN"),s,r,u.Loc.getMessage("SN_SPACES_MENU_CHAT_CREATE"));u.Event.bind(n.querySelector("[data-id='".concat(i,"']")),"click",(function(){return t.emit("videoCall")}));u.Event.bind(n.querySelector("[data-id='".concat(a,"']")),"click",(function(){return t.emit("openChat")}));u.Event.bind(n.querySelector("[data-id='".concat(s,"']")),"click",(function(){return t.emit("createChat")}));return n}}]);return t}(d.EventEmitter);var Me;function We(e,t){ze(e,t);t.add(e)}function Ne(e,t,i){ze(e,t);t.set(e,i)}function ze(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function xe(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var De=new WeakMap;var Ae=new WeakMap;var Oe=new WeakMap;var Be=new WeakMap;var Re=new WeakSet;var Ue=new WeakSet;var je=new WeakSet;var Xe=new WeakSet;var Ve=new WeakSet;var qe=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));We(babelHelpers.assertThisInitialized(i),Ve);We(babelHelpers.assertThisInitialized(i),Xe);We(babelHelpers.assertThisInitialized(i),je);We(babelHelpers.assertThisInitialized(i),Ue);We(babelHelpers.assertThisInitialized(i),Re);Ne(babelHelpers.assertThisInitialized(i),De,{writable:true,value:void 0});Ne(babelHelpers.assertThisInitialized(i),Ae,{writable:true,value:void 0});Ne(babelHelpers.assertThisInitialized(i),Oe,{writable:true,value:void 0});Ne(babelHelpers.assertThisInitialized(i),Be,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Follow");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),De,e.follow);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ae,e.canUse===true);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Oe,false);xe(babelHelpers.assertThisInitialized(i),Ve,Qe).call(babelHelpers.assertThisInitialized(i));return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t="spaces-settings-follow";var i=babelHelpers.classPrivateFieldGet(this,De)?"--sound-on":"--sound-off";var a=babelHelpers.classPrivateFieldGet(this,Ae)?"":"--disabled";babelHelpers.classPrivateFieldSet(this,Be,u.Tag.render(Me||(Me=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="','"\n\t\t\t\tclass="sn-spaces__popup-item --mini ','"\n\t\t\t>\n\t\t\t\t<div class="sn-spaces__popup-icon-round">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set ','"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 22px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-icon-round-name">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t,a,i,xe(this,Xe,Ke).call(this,babelHelpers.classPrivateFieldGet(this,De))));u.Event.bind(babelHelpers.classPrivateFieldGet(this,Be),"click",xe(this,Re,Ye).bind(this));return babelHelpers.classPrivateFieldGet(this,Be)}},{key:"unDisable",value:function e(){babelHelpers.classPrivateFieldSet(this,Oe,false)}}]);return t}(d.EventEmitter);function Ye(){if(babelHelpers.classPrivateFieldGet(this,Oe)){return}babelHelpers.classPrivateFieldSet(this,Oe,true);babelHelpers.classPrivateFieldSet(this,De,!babelHelpers.classPrivateFieldGet(this,De));this.emit("update",babelHelpers.classPrivateFieldGet(this,De));xe(this,Ue,Je).call(this,babelHelpers.classPrivateFieldGet(this,De));xe(this,je,Ze).call(this,babelHelpers.classPrivateFieldGet(this,De))}function Je(e){var t=babelHelpers.classPrivateFieldGet(this,Be).querySelector(".ui-icon-set");if(e){u.Dom.removeClass(t,"--sound-off");u.Dom.addClass(t,"--sound-on")}else{u.Dom.removeClass(t,"--sound-on");u.Dom.addClass(t,"--sound-off")}}function Ze(e){var t=babelHelpers.classPrivateFieldGet(this,Be).querySelector(".sn-spaces__popup-icon-round-name");t.textContent=xe(this,Xe,Ke).call(this,e)}function Ke(e){return e?u.Loc.getMessage("SN_SPACES_MENU_FOLLOW_N"):u.Loc.getMessage("SN_SPACES_MENU_FOLLOW_Y")}function Qe(){d.EventEmitter.subscribe("followChanged",function(e){babelHelpers.classPrivateFieldSet(this,De,e.data.isFollowed);xe(this,je,Ze).call(this,babelHelpers.classPrivateFieldGet(this,De));xe(this,Ue,Je).call(this,babelHelpers.classPrivateFieldGet(this,De))}.bind(this))}var $e,et,tt,it,at,st,rt,nt,lt,ot,ct;function ut(e,t){pt(e,t);t.add(e)}function dt(e,t,i){pt(e,t);t.set(e,i)}function pt(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function ht(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var bt=new WeakMap;var vt=new WeakMap;var ft=new WeakMap;var gt=new WeakMap;var mt=new WeakMap;var wt=new WeakMap;var Ht=new WeakMap;var yt=new WeakSet;var St=new WeakSet;var _t=new WeakSet;var Tt=new WeakSet;var Pt=new WeakSet;var kt=new WeakSet;var Et=new WeakSet;var It=new WeakSet;var Ft=new WeakSet;var Ct=new WeakSet;var Gt=new WeakSet;var Lt=new WeakSet;var Mt=new WeakSet;var Wt=new WeakSet;var Nt=new WeakSet;var zt=new WeakSet;var xt=new WeakSet;var Dt=new WeakSet;var At=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));ut(babelHelpers.assertThisInitialized(i),Dt);ut(babelHelpers.assertThisInitialized(i),xt);ut(babelHelpers.assertThisInitialized(i),zt);ut(babelHelpers.assertThisInitialized(i),Nt);ut(babelHelpers.assertThisInitialized(i),Wt);ut(babelHelpers.assertThisInitialized(i),Mt);ut(babelHelpers.assertThisInitialized(i),Lt);ut(babelHelpers.assertThisInitialized(i),Gt);ut(babelHelpers.assertThisInitialized(i),Ct);ut(babelHelpers.assertThisInitialized(i),Ft);ut(babelHelpers.assertThisInitialized(i),It);ut(babelHelpers.assertThisInitialized(i),Et);ut(babelHelpers.assertThisInitialized(i),kt);ut(babelHelpers.assertThisInitialized(i),Pt);ut(babelHelpers.assertThisInitialized(i),Tt);ut(babelHelpers.assertThisInitialized(i),_t);ut(babelHelpers.assertThisInitialized(i),St);ut(babelHelpers.assertThisInitialized(i),yt);dt(babelHelpers.assertThisInitialized(i),bt,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),vt,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),ft,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),gt,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),mt,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),wt,{writable:true,value:void 0});dt(babelHelpers.assertThisInitialized(i),Ht,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Info");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Ht,{});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),bt,e.groupId);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),vt,e.title);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ft,e.logo);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),gt,e.privacyCode);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),wt,e.actions);return i}babelHelpers.createClass(t,[{key:"update",value:function e(t){var i=t.name,a=t.privacyCode,s=t.avatar;if(i){ht(this,Pt,jt).call(this,i)}if(a){ht(this,xt,ii).call(this,a)}if(s){ht(this,Dt,ai).call(this,s)}}},{key:"render",value:function e(){var t=this;babelHelpers.classPrivateFieldGet(this,Ht).wrapNode=u.Tag.render($e||($e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item --main">\n\t\t\t\t<div class="sn-spaces__popup-settings_logo">\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-settings_info">\n\t\t\t\t\t',"\n\t\t\t\t\t","\n\t\t\t\t\t","\n\t\t\t\t</div>\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),ht(this,yt,Ot).call(this),ht(this,kt,Xt).call(this),ht(this,It,qt).call(this),ht(this,Ct,Jt).call(this),ht(this,St,Bt).call(this));u.Event.bind(babelHelpers.classPrivateFieldGet(this,Ht).wrapNode,"click",(function(e){if(e.target===babelHelpers.classPrivateFieldGet(t,Ht).wrapNode||e.target===babelHelpers.classPrivateFieldGet(t,Ht).moreButtonNode){t.emit("more")}}));return babelHelpers.classPrivateFieldGet(this,Ht).wrapNode}}]);return t}(d.EventEmitter);function Ot(){var e,t;var i=new l.Logo(babelHelpers.classPrivateFieldGet(this,ft));var a=u.Tag.render(et||(et=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__space-logo ','">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),(e=i.getClass())!==null&&e!==void 0?e:"",i.render());(t=babelHelpers.classPrivateFieldGet(this,Ht).avatar)===null||t===void 0?void 0:t.replaceWith(a);babelHelpers.classPrivateFieldGet(this,Ht).avatar=a;return babelHelpers.classPrivateFieldGet(this,Ht).avatar}function Bt(){babelHelpers.classPrivateFieldGet(this,Ht).moreButtonNode=u.Tag.render(tt||(tt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div \n\t\t\t\tdata-id="spaces-settings-space-info-btn"\n\t\t\t\tclass="ui-icon-set --chevron-right"\n\t\t\t\ttitle="','"\n\t\t\t></div>\n\t\t'])),u.Loc.getMessage("SN_SPACES_MENU_INFO_MORE_BTN"));return babelHelpers.classPrivateFieldGet(this,Ht).moreButtonNode}function Rt(){u.Dom.addClass(babelHelpers.classPrivateFieldGet(this,Ht).titleNode,"--hidden");u.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,Ht).editTitleNode,"--hidden");var e=babelHelpers.classPrivateFieldGet(this,Ht).editTitleInput;e.focus();e.setSelectionRange(e.value.length,e.value.length)}function Ut(){u.Dom.addClass(babelHelpers.classPrivateFieldGet(this,Ht).editTitleNode,"--hidden");u.Dom.removeClass(babelHelpers.classPrivateFieldGet(this,Ht).titleNode,"--hidden")}function jt(e){babelHelpers.classPrivateFieldSet(this,vt,e);babelHelpers.classPrivateFieldGet(this,Ht).editTitleInput.value=babelHelpers.classPrivateFieldGet(this,vt);babelHelpers.classPrivateFieldGet(this,Ht).titleTextNode.textContent=u.Text.encode(babelHelpers.classPrivateFieldGet(this,vt))}function Xt(){babelHelpers.classPrivateFieldGet(this,Ht).titleNode=u.Tag.render(it||(it=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-settings_title">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),ht(this,Et,Vt).call(this),babelHelpers.classPrivateFieldGet(this,wt).canEdit?ht(this,Wt,$t).call(this):"");return babelHelpers.classPrivateFieldGet(this,Ht).titleNode}function Vt(){babelHelpers.classPrivateFieldGet(this,Ht).titleTextNode=u.Tag.render(at||(at=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="spaces-settings-space-info-name"\n\t\t\t\tclass="sn-spaces__popup-settings_name"\n\t\t\t>\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),u.Text.encode(babelHelpers.classPrivateFieldGet(this,vt)));return babelHelpers.classPrivateFieldGet(this,Ht).titleTextNode}function qt(){var e=this;var t="ui-ctl ui-ctl-textbox ui-ctl--w100 ui-ctl--transp "+"ui-ctl-no-border ui-ctl-xs ui-ctl-no-padding";babelHelpers.classPrivateFieldGet(this,Ht).editTitleNode=u.Tag.render(st||(st=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="spaces-settings-space-info-edit"\n\t\t\t\tclass="sn-spaces__popup-settings_title --hidden"\n\t\t\t>\n\t\t\t\t<div class="','">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t,ht(this,Ft,Yt).call(this));var i=babelHelpers.classPrivateFieldGet(this,Ht).editTitleInput;u.Event.bind(i,"keydown",(function(e){if(e.key==="Escape"||e.key==="Enter"){i.blur();e.stopImmediatePropagation()}}));u.Event.bind(i,"blur",(function(){if(babelHelpers.classPrivateFieldGet(e,vt)!==i.value){ht(e,Pt,jt).call(e,i.value);h.Controller.changeTitle(babelHelpers.classPrivateFieldGet(e,bt),babelHelpers.classPrivateFieldGet(e,vt));e.emit("changeTitle",babelHelpers.classPrivateFieldGet(e,vt))}ht(e,Tt,Ut).call(e)}));return babelHelpers.classPrivateFieldGet(this,Ht).editTitleNode}function Yt(){babelHelpers.classPrivateFieldGet(this,Ht).editTitleInput=u.Tag.render(rt||(rt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<input\n\t\t\t\ttype="text"\n\t\t\t\tclass="ui-ctl-element sn-spaces__popup-settings_name-input"\n\t\t\t\tvalue="','"\n\t\t\t>\n\t\t'])),u.Text.encode(babelHelpers.classPrivateFieldGet(this,vt)));return babelHelpers.classPrivateFieldGet(this,Ht).editTitleInput}function Jt(){babelHelpers.classPrivateFieldSet(this,mt,ht(this,Gt,Zt).call(this));var e=u.Tag.render(nt||(nt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="spaces-settings-space-info-privacy"\n\t\t\t\tclass="sn-spaces__popup-settings_select-private"\n\t\t\t>\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),ht(this,Mt,Qt).call(this),babelHelpers.classPrivateFieldGet(this,wt).canEdit?ht(this,Nt,ei).call(this):"");if(babelHelpers.classPrivateFieldGet(this,wt).canEdit){u.Event.bind(e,"click",ht(this,Lt,Kt).bind(this))}return e}function Zt(){var e=this;var t=new o.GroupPrivacy({privacyCode:babelHelpers.classPrivateFieldGet(this,gt)});t.subscribe("onShow",(function(){return e.emit("setAutoHide",false)}));t.subscribe("onAfterClose",(function(){return e.emit("setAutoHide",true)}));t.subscribe("changePrivacy",ht(this,zt,ti).bind(this));return t}function Kt(e){babelHelpers.classPrivateFieldGet(this,mt).show(e.target)}function Qt(){babelHelpers.classPrivateFieldGet(this,Ht).privacyTextNode=u.Tag.render(lt||(lt=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-settings_select-private-text">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),babelHelpers.classPrivateFieldGet(this,mt).getLabel());return babelHelpers.classPrivateFieldGet(this,Ht).privacyTextNode}function $t(){var e=u.Tag.render(ot||(ot=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="spaces-settings-space-info-title-edit" \n\t\t\t\tclass="ui-icon-set --pencil-40"\n\t\t\t\tstyle="--ui-icon-set__icon-size: 18px;"\n\t\t\t></div>\n\t\t'])));u.Event.bind(e,"click",ht(this,_t,Rt).bind(this));return e}function ei(){return u.Tag.render(ct||(ct=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tclass="ui-icon-set --chevron-down"\n\t\t\t\tstyle="--ui-icon-set__icon-size: 14px;"\n\t\t\t></div>\n\t\t'])))}function ti(e){var t=e.getData();ht(this,xt,ii).call(this,t);h.Controller.changePrivacy(babelHelpers.classPrivateFieldGet(this,bt),t);this.emit("changePrivacy",t)}function ii(e){babelHelpers.classPrivateFieldSet(this,gt,e);babelHelpers.classPrivateFieldGet(this,mt).setPrivacy(babelHelpers.classPrivateFieldGet(this,gt));babelHelpers.classPrivateFieldGet(this,Ht).privacyTextNode.textContent=babelHelpers.classPrivateFieldGet(this,mt).getLabel()}function ai(e){babelHelpers.classPrivateFieldSet(this,ft,{id:e,type:"image"});ht(this,yt,Ot).call(this)}var si,ri,ni,li,oi,ci,ui,di,pi,hi,bi;function vi(e,t){gi(e,t);t.add(e)}function fi(e,t,i){gi(e,t);t.set(e,i)}function gi(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function mi(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var wi=new WeakMap;var Hi=new WeakMap;var yi=new WeakMap;var Si=new WeakMap;var _i=new WeakSet;var Ti=new WeakSet;var Pi=new WeakSet;var ki=new WeakSet;var Ei=new WeakSet;var Ii=new WeakSet;var Fi=new WeakSet;var Ci=new WeakSet;var Gi=new WeakSet;var Li=new WeakSet;var Mi=new WeakSet;var Wi=new WeakSet;var Ni=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));vi(babelHelpers.assertThisInitialized(i),Wi);vi(babelHelpers.assertThisInitialized(i),Mi);vi(babelHelpers.assertThisInitialized(i),Li);vi(babelHelpers.assertThisInitialized(i),Gi);vi(babelHelpers.assertThisInitialized(i),Ci);vi(babelHelpers.assertThisInitialized(i),Fi);vi(babelHelpers.assertThisInitialized(i),Ii);vi(babelHelpers.assertThisInitialized(i),Ei);vi(babelHelpers.assertThisInitialized(i),ki);vi(babelHelpers.assertThisInitialized(i),Pi);vi(babelHelpers.assertThisInitialized(i),Ti);vi(babelHelpers.assertThisInitialized(i),_i);fi(babelHelpers.assertThisInitialized(i),wi,{writable:true,value:void 0});fi(babelHelpers.assertThisInitialized(i),Hi,{writable:true,value:void 0});fi(babelHelpers.assertThisInitialized(i),yi,{writable:true,value:void 0});fi(babelHelpers.assertThisInitialized(i),Si,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Members");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),wi,e.amount);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Hi,e.list);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),yi,e.counters);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),Si,e.actions);return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t=this;var i="spaces-settings-create-members-btn";var a=u.Tag.render(si||(si=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_expandable">\n\t\t\t\t<div class="sn-spaces__popup-item --expandable">\n\t\t\t\t\t<div class="sn-spaces__popup-item_icon-block">\n\t\t\t\t\t\t<div class="sn-spaces__popup-item_icon">\n\t\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass="ui-icon-set --persons-3"\n\t\t\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 27px;"\n\t\t\t\t\t\t\t></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="sn-spaces__popup-item_main-info">\n\t\t\t\t\t\t<div class="sn-spaces__popup-item_members">\n\t\t\t\t\t\t\t<div class="sn-spaces__popup-item_members-info">\n\t\t\t\t\t\t\t\t',": ","\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t","\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),u.Loc.getMessage("SN_SPACES_MENU_MEMBERS_LABEL"),parseInt(babelHelpers.classPrivateFieldGet(this,wi),10),mi(this,Gi,ji).call(this)?mi(this,_i,zi).call(this,i):"",mi(this,Ti,xi).call(this),mi(this,Gi,ji).call(this)&&mi(this,Li,Xi).call(this)?mi(this,Pi,Di).call(this):"");var s=a.querySelector("[data-id='".concat(i,"']"));u.Event.bind(a.querySelector(".--expandable"),"click",(function(e){if(!s||!e.target.isEqualNode(s)){t.emit("showUsers","all")}}));return a}}]);return t}(d.EventEmitter);function zi(e){var t=this;var i=u.Tag.render(ri||(ri=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div \n\t\t\t\tdata-id="','" \n\t\t\t\tclass="ui-popupcomponentmaker__btn --border sn----spaces__popup-settings_btn"\n\t\t\t>\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),e,u.Loc.getMessage("SN_SPACES_MENU_MEMBERS_INVITE_BTN"));u.Event.bind(i,"click",(function(){return t.emit("invite")}));return i}function xi(){var e=this;var t=mi(this,Ci,Ui).call(this);var i=3;var a=t.moderators.slice(0,i);var s=t.users.slice(0,i);var r=babelHelpers.classPrivateFieldGet(this,wi)-(1+a.length+s.length);return u.Tag.render(ni||(ni=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_lists">\n\t\t\t\t<div class="sn-spaces__popup-item_list">\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass="sn-spaces__popup-item_list"\n\t\t\t\t\tstyle="','"\n\t\t\t\t>\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass="sn-spaces__popup-item_list"\n\t\t\t\t\tstyle="','"\n\t\t\t\t>\n\t\t\t\t\t','\n\t\t\t\t</div>\n\t\t\t\t<div\n\t\t\t\t\tclass="sn-spaces__popup-item_list-quantity"\n\t\t\t\t\tstyle="','"\n\t\t\t\t>+',"</div>\n\t\t\t</div>\n\t\t"])),mi(this,ki,Ai).call(this,t.owner),a.length>0?"":"display: none;",a.map((function(t){return mi(e,Ei,Oi).call(e,t)})),s.length>0?"":"display: none;",s.map((function(t){return mi(e,Ii,Bi).call(e,t)})),r>0?"":"display: none;",r)}function Di(){var e=this;var t=parseInt(babelHelpers.classPrivateFieldGet(this,yi).workgroup_requests_out,10);var i=parseInt(babelHelpers.classPrivateFieldGet(this,yi).workgroup_requests_in,10);var a="spaces-settings-members-counter-out";var s="spaces-settings-members-counter-in";var r=function i(){if(!mi(e,Mi,Vi).call(e)){return""}return u.Tag.render(li||(li=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div data-id="','" class="sn-spaces__popup-item --primary">\n\t\t\t\t\t<div class="sn-spaces__popup-item_counter">','</div>\n\t\t\t\t\t<span class="">','</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --chevron-right"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 14px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t'])),a,t,u.Loc.getMessage("SN_SPACES_MENU_MEMBERS_GREEN_LABEL"))};var n=function t(){if(!mi(e,Wi,qi).call(e)){return""}return u.Tag.render(oi||(oi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div data-id="','" class="sn-spaces__popup-item --warning">\n\t\t\t\t\t<div class="sn-spaces__popup-item_counter">','</div>\n\t\t\t\t\t<span class="">','</span>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --chevron-right"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 14px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t'])),s,i,u.Loc.getMessage("SN_SPACES_MENU_MEMBERS_RED_LABEL"))};var l=u.Tag.render(ci||(ci=babelHelpers.taggedTemplateLiteral(["\n\t\t\t<div>\n\t\t\t\t","\n\t\t\t\t","\n\t\t\t</div>\n\t\t"])),r(),n());u.Event.bind(l.querySelector("[data-id='".concat(a,"']")),"click",(function(){return e.emit("showUsers","out")}));u.Event.bind(l.querySelector("[data-id='".concat(s,"']")),"click",(function(){return e.emit("showUsers","in")}));return l}function Ai(e){var t="/bitrix/components/bitrix/socialnetwork.spaces.menu/"+"templates/.default/images/sn-spaces__popup-icon_super-admin.svg";var i=e.photo?"":"ui-icon ui-icon-common-user ui-icon-xs";return u.Tag.render(ui||(ui=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_list-item --super-admin ','">\n\t\t\t\t','\n\t\t\t\t<img src="','" class="sn-spaces__popup-icon_svg" alt="crown">\n\t\t\t</div>\n\t\t'])),i,mi(this,Fi,Ri).call(this,e.photo),t)}function Oi(e){var t="/bitrix/components/bitrix/socialnetwork.spaces.menu/"+"templates/.default/images/sn-spaces__popup-icon_admin.svg";var i=e.photo?"":"ui-icon ui-icon-common-user ui-icon-xs";return u.Tag.render(di||(di=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_list-item --admin ','">\n\t\t\t\t','\n\t\t\t\t<img src="','" class="sn-spaces__popup-icon_svg" alt="crown">\n\t\t\t</div>\n\t\t'])),i,mi(this,Fi,Ri).call(this,e.photo),t)}function Bi(e){var t=e.photo?"":"ui-icon ui-icon-common-user ui-icon-xs";return u.Tag.render(pi||(pi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__popup-item_list-item ','">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),t,mi(this,Fi,Ri).call(this,e.photo))}function Ri(e){if(e){return u.Tag.render(hi||(hi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<i\n\t\t\t\t\tclass="sn-spaces__popup-item_list-item-img"\n\t\t\t\t\tstyle="background-image: url(\'',"');\"\n\t\t\t\t></i>\n\t\t\t"])),encodeURI(e))}return u.Tag.render(bi||(bi=babelHelpers.taggedTemplateLiteral(["<i></i>"])))}function Ui(){var e={owner:null,moderators:[],users:[]};babelHelpers.classPrivateFieldGet(this,Hi).forEach((function(t){if(t.isOwner){e.owner=t}else if(t.isModerator){e.moderators.push(t)}else{e.users.push(t)}}));return e}function ji(){return babelHelpers.classPrivateFieldGet(this,Si).canEdit||babelHelpers.classPrivateFieldGet(this,Si).canInvite}function Xi(){var e=parseInt(babelHelpers.classPrivateFieldGet(this,yi).workgroup_requests_out,10);var t=parseInt(babelHelpers.classPrivateFieldGet(this,yi).workgroup_requests_in,10);return e>0||t>0}function Vi(){return parseInt(babelHelpers.classPrivateFieldGet(this,yi).workgroup_requests_out,10)>0}function qi(){return parseInt(babelHelpers.classPrivateFieldGet(this,yi).workgroup_requests_in,10)>0}var Yi;function Ji(e,t){Ki(e,t);t.add(e)}function Zi(e,t,i){Ki(e,t);t.set(e,i)}function Ki(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Qi(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var $i=new WeakMap;var ea=new WeakMap;var ta=new WeakMap;var ia=new WeakMap;var aa=new WeakSet;var sa=new WeakSet;var ra=new WeakSet;var na=new WeakSet;var la=new WeakSet;var oa=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ji(babelHelpers.assertThisInitialized(i),la);Ji(babelHelpers.assertThisInitialized(i),na);Ji(babelHelpers.assertThisInitialized(i),ra);Ji(babelHelpers.assertThisInitialized(i),sa);Ji(babelHelpers.assertThisInitialized(i),aa);Zi(babelHelpers.assertThisInitialized(i),$i,{writable:true,value:void 0});Zi(babelHelpers.assertThisInitialized(i),ea,{writable:true,value:void 0});Zi(babelHelpers.assertThisInitialized(i),ta,{writable:true,value:void 0});Zi(babelHelpers.assertThisInitialized(i),ia,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Pin");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),$i,e.pin);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ta,e.canUse===true);babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ea,false);Qi(babelHelpers.assertThisInitialized(i),la,ha).call(babelHelpers.assertThisInitialized(i));return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t="spaces-settings-pin";var i=babelHelpers.classPrivateFieldGet(this,$i)?"--pin-2":"--pin-1";var a=babelHelpers.classPrivateFieldGet(this,ta)?"":"--disabled";babelHelpers.classPrivateFieldSet(this,ia,u.Tag.render(Yi||(Yi=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="','"\n\t\t\t\tclass="sn-spaces__popup-item --mini ','"\n\t\t\t>\n\t\t\t\t<div class="sn-spaces__popup-icon-round">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set ','"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 22px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-icon-round-name">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),t,a,i,Qi(this,na,pa).call(this,babelHelpers.classPrivateFieldGet(this,$i))));u.Event.bind(babelHelpers.classPrivateFieldGet(this,ia),"click",Qi(this,aa,ca).bind(this));return babelHelpers.classPrivateFieldGet(this,ia)}},{key:"unDisable",value:function e(){babelHelpers.classPrivateFieldSet(this,ea,false)}}]);return t}(d.EventEmitter);function ca(){if(babelHelpers.classPrivateFieldGet(this,ea)){return}babelHelpers.classPrivateFieldSet(this,ea,true);babelHelpers.classPrivateFieldSet(this,$i,!babelHelpers.classPrivateFieldGet(this,$i));this.emit("update",babelHelpers.classPrivateFieldGet(this,$i));Qi(this,sa,ua).call(this,babelHelpers.classPrivateFieldGet(this,$i));Qi(this,ra,da).call(this,babelHelpers.classPrivateFieldGet(this,$i))}function ua(e){var t=babelHelpers.classPrivateFieldGet(this,ia).querySelector(".ui-icon-set");if(e){u.Dom.removeClass(t,"--pin-1");u.Dom.addClass(t,"--pin-2")}else{u.Dom.removeClass(t,"--pin-2");u.Dom.addClass(t,"--pin-1")}}function da(e){var t=babelHelpers.classPrivateFieldGet(this,ia).querySelector(".sn-spaces__popup-icon-round-name");t.textContent=Qi(this,na,pa).call(this,e)}function pa(e){return e?u.Loc.getMessage("SN_SPACES_MENU_PIN_N"):u.Loc.getMessage("SN_SPACES_MENU_PIN_Y")}function ha(){d.EventEmitter.subscribe("pinChanged",function(e){babelHelpers.classPrivateFieldSet(this,$i,e.data.isPinned);Qi(this,ra,da).call(this,babelHelpers.classPrivateFieldGet(this,$i));Qi(this,sa,ua).call(this,babelHelpers.classPrivateFieldGet(this,$i))}.bind(this))}var ba;function va(e,t,i){fa(e,t);t.set(e,i)}function fa(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var ga=new WeakMap;var ma=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));va(babelHelpers.assertThisInitialized(i),ga,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.Settings.Roles");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),ga,e.canEdit===true);return i}babelHelpers.createClass(t,[{key:"render",value:function e(){var t=this;var i="spaces-settings-roles";var a=babelHelpers.classPrivateFieldGet(this,ga)?"":"--disabled";var s=u.Tag.render(ba||(ba=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tdata-id="','"\n\t\t\t\tclass="sn-spaces__popup-item --mini ','"\n\t\t\t>\n\t\t\t\t<div class="sn-spaces__popup-icon-round">\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass="ui-icon-set --crown-1"\n\t\t\t\t\t\tstyle="--ui-icon-set__icon-size: 22px;"\n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t\t<div class="sn-spaces__popup-icon-round-name">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i,a,u.Loc.getMessage("SN_SPACES_MENU_ROLES"));u.Event.bind(s,"click",(function(){if(babelHelpers.classPrivateFieldGet(t,ga)){t.emit("click")}}));return s}}]);return t}(d.EventEmitter);function wa(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */wa=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},s="function"==typeof Symbol?Symbol:{},r=s.iterator||"@@iterator",n=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,a){return t[i]=a}}function c(e,t,i,s){var r=t&&t.prototype instanceof p?t:p,n=Object.create(r.prototype),l=new P(s||[]);return a(n,"_invoke",{value:y(e,i,l)}),n}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function p(){}function h(){}function b(){}var v={};o(v,r,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(k([])));g&&g!==t&&i.call(g,r)&&(v=g);var m=b.prototype=p.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function H(e,t){function s(a,r,n,l){var o=u(e[a],e,r);if("throw"!==o.type){var c=o.arg,d=c.value;return d&&"object"==babelHelpers["typeof"](d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){s("next",e,n,l)}),(function(e){s("throw",e,n,l)})):t.resolve(d).then((function(e){c.value=e,n(c)}),(function(e){return s("throw",e,n,l)}))}l(o.arg)}var r;a(this,"_invoke",{value:function e(i,a){function n(){return new t((function(e,t){s(i,a,e,t)}))}return r=r?r.then(n,n):n()}})}function y(e,t,i){var a="suspendedStart";return function(s,r){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===s)throw r;return E()}for(i.method=s,i.arg=r;;){var n=i.delegate;if(n){var l=S(n,i);if(l){if(l===d)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var o=u(e,t,i);if("normal"===o.type){if(a=i.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(a="completed",i.method="throw",i.arg=o.arg)}}}function S(e,t){var i=t.method,a=e.iterator[i];if(undefined===a)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var s=u(a,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,d;var r=s.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,s=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=undefined,t.done=!0,t};return s.next=s}}return{next:E}}function E(){return{value:undefined,done:!0}}return h.prototype=b,a(m,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=o(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(H.prototype),o(H.prototype,n,(function(){return this})),e.AsyncIterator=H,e.async=function(t,i,a,s,r){void 0===r&&(r=Promise);var n=new H(c(t,i,a,s),r);return e.isGeneratorFunction(i)?n:n.next().then((function(e){return e.done?e.value:n.next()}))},w(m),o(m,l,"Generator"),o(m,r,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var a=this;function s(e,i){return l.type="throw",l.arg=t,a.next=e,i&&(a.method="next",a.arg=undefined),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r],l=n.completion;if("root"===n.tryLoc)return s("end");if(n.tryLoc<=this.prev){var o=i.call(n,"catchLoc"),c=i.call(n,"finallyLoc");if(o&&c){if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}}},abrupt:function e(t,a){for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=a&&a<=n.finallyLoc&&(n=null);var l=n?n.completion:{};return l.type=t,l.arg=a,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(l)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),d},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),T(a),d}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc===t){var s=a.completion;if("throw"===s.type){var r=s.arg;T(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,a){return this.delegate={iterator:k(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=undefined),d}},e}function Ha(e,t){Sa(e,t);t.add(e)}function ya(e,t,i){Sa(e,t);t.set(e,i)}function Sa(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function _a(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var Ta=new WeakMap;var Pa=new WeakMap;var ka=new WeakMap;var Ea=new WeakMap;var Ia=new WeakMap;var Fa=new WeakMap;var Ca=new WeakSet;var Ga=new WeakSet;var La=new WeakSet;var Ma=new WeakSet;var Wa=new WeakSet;var Na=new WeakSet;var za=new WeakSet;var xa=new WeakSet;var Da=new WeakSet;var Aa=new WeakSet;var Oa=new WeakSet;var Ba=new WeakSet;var Ra=new WeakSet;var Ua=new WeakSet;var ja=new WeakSet;var Xa=new WeakSet;var Va=function(){function e(t){babelHelpers.classCallCheck(this,e);Ha(this,Xa);Ha(this,ja);Ha(this,Ua);Ha(this,Ra);Ha(this,Ba);Ha(this,Oa);Ha(this,Aa);Ha(this,Da);Ha(this,xa);Ha(this,za);Ha(this,Na);Ha(this,Wa);Ha(this,Ma);Ha(this,La);Ha(this,Ga);Ha(this,Ca);ya(this,Ta,{writable:true,value:new u.Cache.MemoryCache});ya(this,Pa,{writable:true,value:void 0});ya(this,ka,{writable:true,value:void 0});ya(this,Ea,{writable:true,value:void 0});ya(this,Ia,{writable:true,value:void 0});ya(this,Fa,{writable:true,value:{members:null}});_a(this,Ga,Ya).call(this,t);babelHelpers.classPrivateFieldSet(this,Pa,_a(this,Ma,Za).call(this))}babelHelpers.createClass(e,[{key:"show",value:function e(){babelHelpers.classPrivateFieldGet(this,Pa).show();_a(this,Ca,qa).call(this)}},{key:"update",value:function e(t){var i=this;t.then((function(e){babelHelpers.classPrivateFieldSet(i,Ea,e);babelHelpers.classPrivateFieldGet(i,ka).update(e)}));_a(this,za,$a).call(this,t)}}]);return e}();function qa(){var e=babelHelpers.classPrivateFieldGet(this,Pa).getPopup();var t=e.getPopupContainer();var i=t.getBoundingClientRect();if(Math.abs(i.right-e.bindElement.getBoundingClientRect().right)>=2){return}var a=i.left;var s=i.right+20-i.width;var r=e.angle.element;u.Dom.style(t,"left","".concat(s,"px"));u.Dom.style(r,"left","".concat(parseInt(u.Dom.style(r,"left"),10)-(s-a),"px"))}function Ya(e){babelHelpers.classPrivateFieldGet(this,Ta).set("params",e)}function Ja(e){return babelHelpers.classPrivateFieldGet(this,Ta).get("params")[e]}function Za(){var e=this;var t=h.Controller.getGroupData(_a(this,La,Ja).call(this,"groupId"),["AVATAR","ACTIONS","NUMBER_OF_MEMBERS","LIST_OF_MEMBERS","GROUP_MEMBERS_LIST","PRIVACY_TYPE","PIN","USER_DATA","COUNTERS","DESCRIPTION","EFFICIENCY","SUBJECT_DATA","DATE_CREATE"]);t.then((function(t){babelHelpers.classPrivateFieldSet(e,Ea,t)}));return new c.PopupComponentsMaker({id:"spaces-settings-menu",target:_a(this,La,Ja).call(this,"bindElement"),content:[{html:[{html:_a(this,Wa,Ka).call(this,t),backgroundColor:"#fafafa"}]},{html:[{html:_a(this,Na,Qa).call(this),withoutBackground:true}]},{html:[{html:_a(this,za,$a).call(this,t),withoutBackground:true}]},{html:[{html:_a(this,xa,es).call(this,t),backgroundColor:"#fafafa"},{html:_a(this,Da,ts).call(this,t),backgroundColor:"#fafafa"},{html:_a(this,Aa,is).call(this,t),backgroundColor:"#fafafa"}]}]})}function Ka(e){var t=this;return new Promise((function(i){e.then((function(e){babelHelpers.classPrivateFieldSet(t,ka,new At({groupId:e.id,title:e.name,logo:_a(t,La,Ja).call(t,"logo"),privacyCode:e.privacyCode,actions:e.actions}));babelHelpers.classPrivateFieldGet(t,ka).subscribe("setAutoHide",(function(e){babelHelpers.classPrivateFieldGet(t,Pa).getPopup().setAutoHide(e.getData())}));babelHelpers.classPrivateFieldGet(t,ka).subscribe("more",_a(t,Ra,rs).bind(t));i(babelHelpers.classPrivateFieldGet(t,ka).render())}))}))}function Qa(){var e=this;return new Promise((function(t){var i=new Le({canUse:_a(e,La,Ja).call(e,"isMember")});i.subscribe("videoCall",(function(){babelHelpers.classPrivateFieldGet(e,Pa).close();_a(e,La,Ja).call(e,"chat").startVideoCall()}));i.subscribe("openChat",(function(){babelHelpers.classPrivateFieldGet(e,Pa).close();_a(e,La,Ja).call(e,"chat").openChat()}));i.subscribe("createChat",(function(){babelHelpers.classPrivateFieldGet(e,Pa).close();_a(e,La,Ja).call(e,"chat").createChat(_a(e,La,Ja).call(e,"bindElement"))}));t({node:i.render(),options:{disabled:!_a(e,La,Ja).call(e,"isMember")}})}))}function $a(e){var t=this;return new Promise((function(i){e.then((function(e){var a=new Ni({amount:e.numberOfMembers,list:e.listOfMembers,counters:e.counters,actions:e.actions});a.subscribe("showUsers",(function(e){babelHelpers.classPrivateFieldGet(t,Pa).close();h.Controller.openGroupUsers(e.getData())}));a.subscribe("invite",(function(){babelHelpers.classPrivateFieldGet(t,Pa).close();h.Controller.openGroupInvite()}));var s=a.render();if(babelHelpers.classPrivateFieldGet(t,Fa).members){babelHelpers.classPrivateFieldGet(t,Fa).members.replaceWith(s)}babelHelpers.classPrivateFieldGet(t,Fa).members=s;i(babelHelpers.classPrivateFieldGet(t,Fa).members)}))}))}function es(e){var t=this;return new Promise((function(i){e.then((function(e){var a=new qe({follow:e.isSubscribed,canUse:_a(t,La,Ja).call(t,"isMember")});a.subscribe("update",(function(e){_a(t,Oa,as).call(t,babelHelpers.classPrivateFieldGet(t,Ea).id,e.getData(),a)}));i({node:a.render(),options:{disabled:!_a(t,La,Ja).call(t,"isMember")}})}))}))}function ts(e){var t=this;return new Promise((function(i){e.then((function(e){var a=new oa({pin:e.isPin,canUse:_a(t,La,Ja).call(t,"isMember")});a.subscribe("update",(function(e){_a(t,Ba,ss).call(t,babelHelpers.classPrivateFieldGet(t,Ea).id,e.getData(),a)}));i({node:a.render(),options:{disabled:!_a(t,La,Ja).call(t,"isMember")}})}))}))}function is(e){var t=this;return new Promise((function(i){e.then((function(e){var a=new ma({canEdit:e.actions.canEditFeatures});a.subscribe("click",(function(){babelHelpers.classPrivateFieldGet(t,Pa).close();h.Controller.openGroupFeatures()}));i({node:a.render(),options:{disabled:!e.actions.canEditFeatures}})}))}))}function as(e,t,i){var a=this;h.Controller.setSubscription(e,t).then((function(){i===null||i===void 0?void 0:i.unDisable()}))["catch"]((function(e){i===null||i===void 0?void 0:i.unDisable();_a(a,Xa,ds).call(a,"changeSubscribe",e)}))}function ss(e,t,i){var a=this;h.Controller.changePin(e,t).then((function(){i===null||i===void 0?void 0:i.unDisable()}))["catch"]((function(e){i===null||i===void 0?void 0:i.unDisable();_a(a,Xa,ds).call(a,"changePin",e)}))}function rs(){return ns.apply(this,arguments)}function ns(){ns=babelHelpers.asyncToGenerator(wa().mark((function e(){return wa().wrap((function e(t){while(1)switch(t.prev=t.next){case 0:t.next=2;return _a(this,Ua,ls).call(this);case 2:t.sent.openInSlider();babelHelpers.classPrivateFieldGet(this,Pa).close();case 4:case"end":return t.stop()}}),e,this)})));return ns.apply(this,arguments)}function ls(){return os.apply(this,arguments)}function os(){os=babelHelpers.asyncToGenerator(wa().mark((function e(){var t;return wa().wrap((function e(i){while(1)switch(i.prev=i.next){case 0:if(!((t=babelHelpers.classPrivateFieldGet(this,Ia))!==null&&t!==void 0)){i.next=4;break}i.next=11;break;case 4:i.t0=babelHelpers;i.t1=this;i.t2=Ia;i.next=9;return _a(this,ja,cs).call(this);case 9:i.t3=i.sent;i.t0.classPrivateFieldSet.call(i.t0,i.t1,i.t2,i.t3);case 11:return i.abrupt("return",babelHelpers.classPrivateFieldGet(this,Ia));case 12:case"end":return i.stop()}}),e,this)})));return os.apply(this,arguments)}function cs(){return us.apply(this,arguments)}function us(){us=babelHelpers.asyncToGenerator(wa().mark((function e(){var t,i;return wa().wrap((function e(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return top.BX.Runtime.loadExtension("socialnetwork.group-settings");case 2:t=a.sent;i=t.GroupSettings;return a.abrupt("return",new i({groupData:babelHelpers.classPrivateFieldGet(this,Ea),logo:_a(this,La,Ja).call(this,"logo")}));case 5:case"end":return a.stop()}}),e,this)})));return us.apply(this,arguments)}function ds(e,t){console.error("GroupSettings: ".concat(e," error"),t)}function ps(e,t){bs(e,t);t.add(e)}function hs(e,t,i){bs(e,t);t.set(e,i)}function bs(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function vs(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var fs=new WeakMap;var gs=new WeakMap;var ms=new WeakSet;var ws=new WeakSet;var Hs=function(){function e(t){babelHelpers.classCallCheck(this,e);ps(this,ws);ps(this,ms);hs(this,fs,{writable:true,value:new u.Cache.MemoryCache});hs(this,gs,{writable:true,value:void 0});vs(this,ms,ys).call(this,t)}babelHelpers.createClass(e,[{key:"show",value:function e(){}}]);return e}();function ys(e){babelHelpers.classPrivateFieldGet(this,fs).set("params",e)}function Ss(e,t){Ts(e,t);t.add(e)}function _s(e,t,i){Ts(e,t);t.set(e,i)}function Ts(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function Ps(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var ks=new WeakMap;var Es=new WeakMap;var Is=new WeakSet;var Fs=new WeakSet;var Cs=function(){function e(t){babelHelpers.classCallCheck(this,e);Ss(this,Fs);Ss(this,Is);_s(this,ks,{writable:true,value:new u.Cache.MemoryCache});_s(this,Es,{writable:true,value:void 0});Ps(this,Is,Gs).call(this,t)}babelHelpers.createClass(e,[{key:"show",value:function e(){if(!babelHelpers.classPrivateFieldGet(this,Es)){if(Ps(this,Fs,Ls).call(this,"type")==="user"){babelHelpers.classPrivateFieldSet(this,Es,new Hs({bindElement:Ps(this,Fs,Ls).call(this,"bindElement"),userId:Ps(this,Fs,Ls).call(this,"entityId")}))}else{babelHelpers.classPrivateFieldSet(this,Es,new Va({bindElement:Ps(this,Fs,Ls).call(this,"bindElement"),availableFeatures:Ps(this,Fs,Ls).call(this,"availableFeatures"),isMember:Ps(this,Fs,Ls).call(this,"isMember"),groupId:Ps(this,Fs,Ls).call(this,"entityId"),logo:Ps(this,Fs,Ls).call(this,"logo"),chat:Ps(this,Fs,Ls).call(this,"chat")}))}}babelHelpers.classPrivateFieldGet(this,Es).show()}},{key:"update",value:function e(t){var i;(i=babelHelpers.classPrivateFieldGet(this,Es))===null||i===void 0?void 0:i.update(t)}}]);return e}();function Gs(e){babelHelpers.classPrivateFieldGet(this,ks).set("params",e)}function Ls(e){return babelHelpers.classPrivateFieldGet(this,ks).get("params")[e]}function Ms(e,t){Ns(e,t);t.add(e)}function Ws(e,t,i){Ns(e,t);t.set(e,i)}function Ns(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function zs(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var xs=new WeakMap;var Ds=new WeakSet;var As=function(e){babelHelpers.inherits(t,e);function t(e){var i;babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this));Ms(babelHelpers.assertThisInitialized(i),Ds);Ws(babelHelpers.assertThisInitialized(i),xs,{writable:true,value:void 0});i.setEventNamespace("BX.Socialnetwork.Spaces.VideoCall");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(i),xs,zs(babelHelpers.assertThisInitialized(i),Ds,Os).call(babelHelpers.assertThisInitialized(i),e.bindElement));return i}babelHelpers.createClass(t,[{key:"show",value:function e(){babelHelpers.classPrivateFieldGet(this,xs).toggle()}}]);return t}(d.EventEmitter);function Os(e){var t=this;var i=new p.Menu({id:"spaces-video-call-menu",bindElement:e,closeByEsc:true,angle:{position:"top",offset:31}});i.addMenuItem({dataset:{id:"spaces-menu-video-call-hd"},text:u.Loc.getMessage("SN_SPACES_MENU_VIDEO_CALL_HD"),className:"sn-spaces-menu-video-call-hd-icon",onclick:function e(){t.emit("hd");i.close()}});i.addMenuItem({delimiter:true});i.addMenuItem({dataset:{id:"spaces-menu-video-call-chat"},text:u.Loc.getMessage("SN_SPACES_MENU_VIDEO_CALL_CHAT"),className:"sn-spaces-menu-video-call-chat-icon",onclick:function e(){t.emit("chat");i.close()}});i.addMenuItem({dataset:{id:"spaces-menu-create-chat"},text:u.Loc.getMessage("SN_SPACES_MENU_CREATE_CHAT"),className:"sn-spaces-menu-create-chat-icon",onclick:function e(){t.emit("createChat");i.close()}});return i}var Bs,Rs,Us,js,Xs,Vs,qs,Ys,Js;function Zs(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */Zs=function t(){return e};var e={},t=Object.prototype,i=t.hasOwnProperty,a=Object.defineProperty||function(e,t,i){e[t]=i.value},s="function"==typeof Symbol?Symbol:{},r=s.iterator||"@@iterator",n=s.asyncIterator||"@@asyncIterator",l=s.toStringTag||"@@toStringTag";function o(e,t,i){return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{o({},"")}catch(e){o=function e(t,i,a){return t[i]=a}}function c(e,t,i,s){var r=t&&t.prototype instanceof p?t:p,n=Object.create(r.prototype),l=new P(s||[]);return a(n,"_invoke",{value:y(e,i,l)}),n}function u(e,t,i){try{return{type:"normal",arg:e.call(t,i)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var d={};function p(){}function h(){}function b(){}var v={};o(v,r,(function(){return this}));var f=Object.getPrototypeOf,g=f&&f(f(k([])));g&&g!==t&&i.call(g,r)&&(v=g);var m=b.prototype=p.prototype=Object.create(v);function w(e){["next","throw","return"].forEach((function(t){o(e,t,(function(e){return this._invoke(t,e)}))}))}function H(e,t){function s(a,r,n,l){var o=u(e[a],e,r);if("throw"!==o.type){var c=o.arg,d=c.value;return d&&"object"==babelHelpers["typeof"](d)&&i.call(d,"__await")?t.resolve(d.__await).then((function(e){s("next",e,n,l)}),(function(e){s("throw",e,n,l)})):t.resolve(d).then((function(e){c.value=e,n(c)}),(function(e){return s("throw",e,n,l)}))}l(o.arg)}var r;a(this,"_invoke",{value:function e(i,a){function n(){return new t((function(e,t){s(i,a,e,t)}))}return r=r?r.then(n,n):n()}})}function y(e,t,i){var a="suspendedStart";return function(s,r){if("executing"===a)throw new Error("Generator is already running");if("completed"===a){if("throw"===s)throw r;return E()}for(i.method=s,i.arg=r;;){var n=i.delegate;if(n){var l=S(n,i);if(l){if(l===d)continue;return l}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if("suspendedStart"===a)throw a="completed",i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);a="executing";var o=u(e,t,i);if("normal"===o.type){if(a=i.done?"completed":"suspendedYield",o.arg===d)continue;return{value:o.arg,done:i.done}}"throw"===o.type&&(a="completed",i.method="throw",i.arg=o.arg)}}}function S(e,t){var i=t.method,a=e.iterator[i];if(undefined===a)return t.delegate=null,"throw"===i&&e.iterator["return"]&&(t.method="return",t.arg=undefined,S(e,t),"throw"===t.method)||"return"!==i&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+i+"' method")),d;var s=u(a,e.iterator,t.arg);if("throw"===s.type)return t.method="throw",t.arg=s.arg,t.delegate=null,d;var r=s.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=undefined),t.delegate=null,d):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function _(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(_,this),this.reset(!0)}function k(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var a=-1,s=function t(){for(;++a<e.length;)if(i.call(e,a))return t.value=e[a],t.done=!1,t;return t.value=undefined,t.done=!0,t};return s.next=s}}return{next:E}}function E(){return{value:undefined,done:!0}}return h.prototype=b,a(m,"constructor",{value:b,configurable:!0}),a(b,"constructor",{value:h,configurable:!0}),h.displayName=o(b,l,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,o(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e},e.awrap=function(e){return{__await:e}},w(H.prototype),o(H.prototype,n,(function(){return this})),e.AsyncIterator=H,e.async=function(t,i,a,s,r){void 0===r&&(r=Promise);var n=new H(c(t,i,a,s),r);return e.isGeneratorFunction(i)?n:n.next().then((function(e){return e.done?e.value:n.next()}))},w(m),o(m,l,"Generator"),o(m,r,(function(){return this})),o(m,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),i=[];for(var a in t)i.push(a);return i.reverse(),function e(){for(;i.length;){var a=i.pop();if(a in t)return e.value=a,e.done=!1,e}return e.done=!0,e}},e.values=k,P.prototype={constructor:P,reset:function e(t){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(T),!t)for(var a in this)"t"===a.charAt(0)&&i.call(this,a)&&!isNaN(+a.slice(1))&&(this[a]=undefined)},stop:function e(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function e(t){if(this.done)throw t;var a=this;function s(e,i){return l.type="throw",l.arg=t,a.next=e,i&&(a.method="next",a.arg=undefined),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r],l=n.completion;if("root"===n.tryLoc)return s("end");if(n.tryLoc<=this.prev){var o=i.call(n,"catchLoc"),c=i.call(n,"finallyLoc");if(o&&c){if(this.prev<n.catchLoc)return s(n.catchLoc,!0);if(this.prev<n.finallyLoc)return s(n.finallyLoc)}else if(o){if(this.prev<n.catchLoc)return s(n.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return s(n.finallyLoc)}}}},abrupt:function e(t,a){for(var s=this.tryEntries.length-1;s>=0;--s){var r=this.tryEntries[s];if(r.tryLoc<=this.prev&&i.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var n=r;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=a&&a<=n.finallyLoc&&(n=null);var l=n?n.completion:{};return l.type=t,l.arg=a,n?(this.method="next",this.next=n.finallyLoc,d):this.complete(l)},complete:function e(t,i){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&i&&(this.next=i),d},finish:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.finallyLoc===t)return this.complete(a.completion,a.afterLoc),T(a),d}},catch:function e(t){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc===t){var s=a.completion;if("throw"===s.type){var r=s.arg;T(a)}return r}}throw new Error("illegal catch attempt")},delegateYield:function e(t,i,a){return this.delegate={iterator:k(t),resultName:i,nextLoc:a},"next"===this.method&&(this.arg=undefined),d}},e}function Ks(e,t){$s(e,t);t.add(e)}function Qs(e,t,i){$s(e,t);t.set(e,i)}function $s(e,t){if(t.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function er(e,t,i){if(!t.has(e)){throw new TypeError("attempted to get private field on non-instance")}return i}var tr=new WeakMap;var ir=new WeakMap;var ar=new WeakMap;var sr=new WeakMap;var rr=new WeakMap;var nr=new WeakMap;var lr=new WeakMap;var or=new WeakMap;var cr=new WeakMap;var ur=new WeakMap;var dr=new WeakMap;var pr=new WeakMap;var hr=new WeakSet;var br=new WeakSet;var vr=new WeakSet;var fr=new WeakSet;var gr=new WeakSet;var mr=new WeakSet;var wr=new WeakSet;var Hr=new WeakSet;var yr=new WeakSet;var Sr=new WeakSet;var _r=new WeakSet;var Tr=new WeakSet;var Pr=new WeakSet;var kr=new WeakSet;var Er=new WeakSet;var Ir=new WeakSet;var Fr=new WeakSet;var Cr=new WeakSet;var Gr=new WeakSet;var Lr=new WeakSet;var Mr=new WeakSet;var Wr=new WeakSet;var Nr=new WeakSet;var zr=new WeakSet;var xr=new WeakSet;var Dr=new WeakSet;var Ar=new WeakSet;var Or=new WeakSet;var Br=new WeakSet;var Rr=new WeakSet;var Ur=new WeakSet;var jr=function(){function e(t){babelHelpers.classCallCheck(this,e);Ks(this,Ur);Ks(this,Rr);Ks(this,Br);Ks(this,Or);Ks(this,Ar);Ks(this,Dr);Ks(this,xr);Ks(this,zr);Ks(this,Nr);Ks(this,Wr);Ks(this,Mr);Ks(this,Lr);Ks(this,Gr);Ks(this,Cr);Ks(this,Fr);Ks(this,Ir);Ks(this,Er);Ks(this,kr);Ks(this,Pr);Ks(this,Tr);Ks(this,_r);Ks(this,Sr);Ks(this,yr);Ks(this,Hr);Ks(this,wr);Ks(this,mr);Ks(this,gr);Ks(this,fr);Ks(this,vr);Ks(this,br);Ks(this,hr);Qs(this,tr,{writable:true,value:new u.Cache.MemoryCache});Qs(this,ir,{writable:true,value:void 0});Qs(this,ar,{writable:true,value:void 0});Qs(this,sr,{writable:true,value:void 0});Qs(this,rr,{writable:true,value:void 0});Qs(this,nr,{writable:true,value:void 0});Qs(this,lr,{writable:true,value:void 0});Qs(this,or,{writable:true,value:void 0});Qs(this,cr,{writable:true,value:void 0});Qs(this,ur,{writable:true,value:void 0});Qs(this,dr,{writable:true,value:false});Qs(this,pr,{writable:true,value:[]});babelHelpers.classPrivateFieldSet(this,nr,{});t.entityId=u.Type.isUndefined(t.entityId)?0:parseInt(t.entityId,10);er(this,wr,Kr).call(this,t);er(this,Hr,Qr).call(this,t);er(this,hr,Xr).call(this)}babelHelpers.createClass(e,[{key:"renderLogoTo",value:function e(t){if(!u.Type.isDomNode(t)){throw new Error("BX.Socialnetwork.Spaces.Menu: HTMLElement for space not found")}babelHelpers.classPrivateFieldGet(this,nr).avatar=t;er(this,Sr,en).call(this)}},{key:"renderUserLogoTo",value:function e(t){if(!u.Type.isDomNode(t)){throw new Error("BX.Socialnetwork.Spaces.Menu: HTMLElement for space not found")}u.Dom.addClass(t,["sonet-common-workgroup-avatar","--common-space"]);u.Dom.append(u.Tag.render(Bs||(Bs=babelHelpers.taggedTemplateLiteral(["<i></i>"]))),t)}},{key:"renderToolbarTo",value:function e(t){if(er(this,yr,$r).call(this,"isMember")){u.Dom.append(er(this,_r,tn).call(this),t)}if(er(this,yr,$r).call(this,"canInvite")){u.Dom.append(er(this,Er,nn).call(this),t)}u.Dom.append(er(this,Ir,ln).call(this),t)}},{key:"renderScrumToolbarTo",value:function e(t){var i=er(this,yr,$r).call(this,"availableFeatures");if(er(this,yr,$r).call(this,"isMember")&&i.tasks&&i.calendar){u.Dom.append(er(this,Tr,an).call(this),t)}if(i.tasks){u.Dom.append(er(this,Pr,sn).call(this),t)}if(er(this,yr,$r).call(this,"canInvite")){u.Dom.append(er(this,Er,nn).call(this),t)}u.Dom.append(er(this,Ir,ln).call(this),t)}},{key:"renderUserToolbarTo",value:function e(t){u.Dom.append(er(this,kr,rn).call(this),t);u.Dom.append(er(this,Fr,on).call(this),t)}}]);return e}();function Xr(){var e=new _(er(this,yr,$r).call(this,"entityId"),er(this,yr,$r).call(this,"currentUserId"));e.subscribe("update",er(this,br,Vr).bind(this));e.subscribe("updateCounters",er(this,vr,qr).bind(this));e.subscribe("updateMenuItem",er(this,fr,Yr).bind(this));t.PULL.subscribe(e)}function Vr(){var e,t=this;var i=h.Controller.getGroupData(er(this,yr,$r).call(this,"entityId"),["AVATAR","ACTIONS","NUMBER_OF_MEMBERS","LIST_OF_MEMBERS","GROUP_MEMBERS_LIST","PRIVACY_TYPE","PIN","USER_DATA","COUNTERS","DESCRIPTION","EFFICIENCY","SUBJECT_DATA","DATE_CREATE"]);(e=babelHelpers.classPrivateFieldGet(this,or))===null||e===void 0?void 0:e.update(i);er(this,Nr,bn).call(this).update(i);babelHelpers.classPrivateFieldGet(this,ur).update(i);i.then((function(e){var i=e.avatar;if(i){er(t,mr,Zr).call(t,i)}}))}function qr(e){var t=e.getData();if(u.Type.isUndefined(t.space)){return}var i=t.userId;var a=parseInt(t.space.id,10);var s=t.space.metrics.countersTasksTotal;var r=t.space.metrics.countersCalendarTotal;var n=t.space.metrics.countersLiveFeedTotal;var l=a===0?BX.Main.interfaceButtonsManager.getById("spaces_user_menu_".concat(i)):BX.Main.interfaceButtonsManager.getById("spaces_group_menu_".concat(a));if(l){var o="spaces_top_menu_".concat(i,"_").concat(a);var c="".concat(o,"_tasks");var d="".concat(o,"_calendar");var p="".concat(o,"_discussions");l.updateCounter(c,s);l.updateCounter(d,r);l.updateCounter(p,n)}}function Yr(e){var t=e.getData();if(u.Type.isUndefined(t.FEATURE)){return}var i=t.FEATURE;var a=parseInt(t.GROUP_ID,10);if(!a){return}var s=i.featureName;var r="spaces_group_menu_".concat(a,"_").concat(s);var n=BX.Main.interfaceButtonsManager.getById("spaces_group_menu_".concat(a));var l=n.getItemById(r);if(t.ACTION==="add"){var o=er(this,gr,Jr).call(this,e);n.addMenuItem(o)}if(t.ACTION==="delete"){var c=n.getActive();if(c.DATA_ID===s){var d=new u.Uri(babelHelpers.classPrivateFieldGet(this,cr));top.BX.Socialnetwork.Spaces.space.reloadPageContent(d.toString())}n.deleteMenuItem(l)}if(t.ACTION==="change"){var p;var h=(p=i.customName)!==null&&p!==void 0?p:i.name;n.updateMenuItemText(l,h)}}function Jr(e){var t=e.getData();if(u.Type.isUndefined(t.FEATURE)){return}var i=t.FEATURE;var a=parseInt(t.GROUP_ID,10);var s=i.featureName;var r="spaces_group_menu_".concat(a,"_").concat(s);var n=i.name;if(i.customName){n=i.customName.length>0?i.customName:i.name}return{counterId:r,dataId:s,id:r,onClick:'top.BX.Socialnetwork.Spaces.space.reloadPageContent("/spaces/group/'.concat(a,"/").concat(s,'/");'),text:n,url:""}}function Zr(e){babelHelpers.classPrivateFieldSet(this,lr,{id:e,type:"image"});er(this,Sr,en).call(this)}function Kr(e){babelHelpers.classPrivateFieldGet(this,tr).set("params",e);if(e.groupMembersList){babelHelpers.classPrivateFieldSet(this,pr,e.groupMembersList.filter((function(e){return e.invited})).map((function(e){return parseInt(e.id,10)})))}babelHelpers.classPrivateFieldSet(this,lr,e.logo);babelHelpers.classPrivateFieldSet(this,cr,e.pathToDiscussions)}function Qr(e){babelHelpers.classPrivateFieldSet(this,ur,new ne({entityType:er(this,yr,$r).call(this,"type"),entityId:er(this,yr,$r).call(this,"entityId"),groupMembersList:er(this,yr,$r).call(this,"groupMembersList")}))}function $r(e){return babelHelpers.classPrivateFieldGet(this,tr).get("params")[e]}function en(){var e;var t=new l.Logo(babelHelpers.classPrivateFieldGet(this,lr));var i=u.Tag.render(Rs||(Rs=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="sn-spaces__space-logo ','">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t"])),(e=t.getClass())!==null&&e!==void 0?e:"",t.render());babelHelpers.classPrivateFieldGet(this,nr).avatar.replaceWith(i);babelHelpers.classPrivateFieldGet(this,nr).avatar=i;return babelHelpers.classPrivateFieldGet(this,nr).avatar}function tn(){var e=u.Tag.render(Us||(Us=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div\n\t\t\t\tref="node"\n\t\t\t\tdata-id="spaces-video-call-menu"\n\t\t\t\tclass="sn-spaces__menu-toolbar_btn"\n\t\t\t>\n\t\t\t\t<div class="ui-icon-set --video-1"></div>\n\t\t\t\t<div\n\t\t\t\t\tref="chevronDown"\n\t\t\t\t\tclass="ui-icon-set --chevron-down"\n\t\t\t\t\tstyle="--ui-icon-set__icon-size: 14px;"\n\t\t\t\t></div>\n\t\t\t</div>\n\t\t']))),t=e.node,i=e.chevronDown;u.Event.bind(t,"click",er(this,Cr,cn).bind(this,i));return t}function an(){var e=u.Tag.render(js||(js=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-scrum-video-call-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --video-1"></div>\n\t\t\t\t<div class="ui-icon-set --chevron-down" style="--ui-icon-set__icon-size: 14px;"></div>\n\t\t\t</div>\n\t\t'])));u.Event.bind(e,"click",er(this,Gr,un).bind(this));return e}function sn(){var e=u.Tag.render(Xs||(Xs=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-scrum-elements-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --elements"></div>\n\t\t\t</div>\n\t\t'])));u.Event.bind(e,"click",er(this,Lr,dn).bind(this));return e}function rn(){var e=u.Tag.render(Vs||(Vs=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-video-call-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --video-1"></div>\n\t\t\t\t<div class="ui-icon-set --chevron-down" style="--ui-icon-set__icon-size: 14px;"></div>\n\t\t\t</div>\n\t\t'])));u.Event.bind(e,"click",er(this,Mr,pn).bind(this));return e}function nn(){var e=this;if(!babelHelpers.classPrivateFieldGet(this,nr).inviteNode){babelHelpers.classPrivateFieldGet(this,nr).inviteNode=u.Tag.render(qs||(qs=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div data-id="spaces-invite-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t\t<div class="ui-icon-set --person-plus"></div>\n\t\t\t\t</div>\n\t\t\t'])));u.Event.bind(babelHelpers.classPrivateFieldGet(this,nr).inviteNode,"click",er(this,Wr,hn).bind(this));if(er(this,yr,$r).call(this,"isNew")){setTimeout((function(){return er(e,Dr,gn).call(e,babelHelpers.classPrivateFieldGet(e,nr).inviteNode)}),500)}}return babelHelpers.classPrivateFieldGet(this,nr).inviteNode}function ln(){var e=u.Tag.render(Ys||(Ys=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-settings-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --more"></div>\n\t\t\t</div>\n\t\t'])));u.Event.bind(e,"click",er(this,Rr,Sn).bind(this));return e}function on(){var e=u.Tag.render(Js||(Js=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div data-id="spaces-settings-menu" class="sn-spaces__menu-toolbar_btn">\n\t\t\t\t<div class="ui-icon-set --more"></div>\n\t\t\t</div>\n\t\t'])));u.Event.bind(e,"click",er(this,Ur,_n).bind(this));return e}function cn(e){var t=this;if(!babelHelpers.classPrivateFieldGet(this,ir)){babelHelpers.classPrivateFieldSet(this,ir,new As({bindElement:e}));babelHelpers.classPrivateFieldGet(this,ir).subscribe("hd",(function(){babelHelpers.classPrivateFieldGet(t,ur).startVideoCall()}));babelHelpers.classPrivateFieldGet(this,ir).subscribe("chat",(function(){babelHelpers.classPrivateFieldGet(t,ur).openChat()}));babelHelpers.classPrivateFieldGet(this,ir).subscribe("createChat",(function(){babelHelpers.classPrivateFieldGet(t,ur).createChat(e)}))}babelHelpers.classPrivateFieldGet(this,ir).show()}function un(e){if(!babelHelpers.classPrivateFieldGet(this,ar)){babelHelpers.classPrivateFieldSet(this,ar,new i.Meetings({groupId:er(this,yr,$r).call(this,"entityId")}))}babelHelpers.classPrivateFieldGet(this,ar).showMenu(e.target)}function dn(e){if(!babelHelpers.classPrivateFieldGet(this,sr)){babelHelpers.classPrivateFieldSet(this,sr,new a.Methodology({groupId:er(this,yr,$r).call(this,"entityId"),teamSpeedPath:er(this,yr,$r).call(this,"pathToScrumTeamSpeed"),burnDownPath:er(this,yr,$r).call(this,"pathToScrumBurnDown"),pathToTask:er(this,yr,$r).call(this,"pathToGroupTasksTask")}))}babelHelpers.classPrivateFieldGet(this,sr).showMenu(e.target)}function pn(e){}function hn(){var e=er(this,Nr,bn).call(this);if(e.isShown()){e.close()}else{e.show()}}function bn(){if(!babelHelpers.classPrivateFieldGet(this,rr)){babelHelpers.classPrivateFieldSet(this,rr,new ye({node:babelHelpers.classPrivateFieldGet(this,nr).inviteNode,groupMembersList:er(this,yr,$r).call(this,"groupMembersList")}));babelHelpers.classPrivateFieldGet(this,rr).subscribe("onClose",er(this,xr,fn).bind(this));babelHelpers.classPrivateFieldGet(this,rr).subscribe("usersSelected",er(this,zr,vn).bind(this))}return babelHelpers.classPrivateFieldGet(this,rr)}function vn(e){var t=e.data;er(this,Or,Hn).call(this,t)}function fn(){if(er(this,yr,$r).call(this,"isNew")&&!babelHelpers.classPrivateFieldGet(this,dr)){var e=document.querySelector("[data-id=spaces-discussions-add-main-btn]");if(!e){return}er(this,Dr,gn).call(this,e,{title:u.Loc.getMessage("SN_SPACES_DISCUSSION_AHA_MOMENT_TITLE"),text:u.Loc.getMessage("SN_SPACES_DISCUSSION_AHA_MOMENT_TEXT")});babelHelpers.classPrivateFieldSet(this,dr,true)}}function gn(e){var t=this;var i=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null;u.Runtime.loadExtension(["spotlight","ui.tour"]).then((function(){var a=new BX.SpotLight({targetElement:e,targetVertex:"middle-center"});u.Dom.addClass(e,"--active");a.bindEvents({onTargetEnter:function t(){u.Dom.removeClass(e,"--active");a.close()}});a.setColor("#2fc6f6");a.show();if(i){er(t,Ar,mn).call(t,e,{title:i.title,text:i.text,spotlight:a})}}))}function mn(e,t){return wn.apply(this,arguments)}function wn(){wn=babelHelpers.asyncToGenerator(Zs().mark((function e(t,i){var a,s,r,n;return Zs().wrap((function e(l){while(1)switch(l.prev=l.next){case 0:l.next=2;return u.Runtime.loadExtension("ui.tour");case 2:a=l.sent;s=a.Guide;r=new s({simpleMode:true,onEvents:true,steps:[{target:t,title:i.title,text:i.text,position:"bottom",condition:{top:true,bottom:false,color:"primary"}}]});r.showNextStep();n=r.getPopup();n.setWidth(380);n.getContentContainer().style.paddingRight=getComputedStyle(n.closeIcon)["width"];n.setAngle({offset:t.offsetWidth/2-5});n.subscribe("onClose",(function(){return i.spotlight.close()}));n.subscribe("onDestroy",(function(){return i.spotlight.close()}));n.setAutoHide(true);case 13:case"end":return l.stop()}}),e)})));return wn.apply(this,arguments)}function Hn(e){var t=this;var i=e.filter((function(e){return!babelHelpers.classPrivateFieldGet(t,pr).includes(e)}));var a=babelHelpers.classPrivateFieldGet(this,pr).filter((function(t){return!e.includes(t)}));babelHelpers.classPrivateFieldSet(this,pr,e);h.Controller.inviteUsers(er(this,yr,$r).call(this,"entityId"),e).then((function(){BX.UI.Notification.Center.notify({content:er(t,Br,yn).call(t,i,a)})}),(function(e){return console.log(e)}))}function yn(e,t){var i=e.length>0;var a=t.length>0;if(i&&!a){return u.Loc.getMessage("SN_SPACES_INVITATIONS_SENT")}if(!i&&a){return u.Loc.getMessage("SN_SPACES_INVITATIONS_REMOVED")}if(i&&a){return u.Loc.getMessage("SN_SPACES_INVITATIONS_CHANGED")}return u.Loc.getMessage("SN_SPACES_INVITATIONS_SENT")}function Sn(e){if(!babelHelpers.classPrivateFieldGet(this,or)){babelHelpers.classPrivateFieldSet(this,or,new Cs({bindElement:e.target,availableFeatures:er(this,yr,$r).call(this,"availableFeatures"),isMember:er(this,yr,$r).call(this,"isMember"),type:er(this,yr,$r).call(this,"type"),entityId:er(this,yr,$r).call(this,"entityId"),logo:babelHelpers.classPrivateFieldGet(this,lr),chat:babelHelpers.classPrivateFieldGet(this,ur)}))}babelHelpers.classPrivateFieldGet(this,or).show()}function _n(e){}e.Menu=jr})(this.BX.Socialnetwork.Spaces=this.BX.Socialnetwork.Spaces||{},BX,BX.Tasks.Scrum,BX.Tasks.Scrum,BX.Messenger.v2.Lib,BX.UI.EntitySelector,BX.UI,BX.Socialnetwork,BX.Socialnetwork,BX.UI,BX,BX.Event,BX.Main,BX.Socialnetwork);
//# sourceMappingURL=script.map.js