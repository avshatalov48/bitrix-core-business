{"version":3,"file":"registry.bundle.js","sources":["../src/add-to-chat/add-to-chat-content.js","../src/add-to-chat/add-to-chat.js"],"sourcesContent":["import { TagSelector } from 'ui.entity-selector';\n\nimport { Messenger } from 'im.public';\nimport { Core } from 'im.v2.application.core';\nimport { ChatService } from 'im.v2.provider.service';\nimport { DialogType, SearchEntityIdTypes } from 'im.v2.const';\nimport { SearchResult } from 'im.v2.component.search.search-result';\nimport { Button as MessengerButton, ButtonSize, ButtonColor } from 'im.v2.component.elements';\n\nimport './add-to-chat-content.css';\n\nimport type { ImModelDialog } from 'im.v2.model';\n\nconst searchConfig = {\n\tcurrentUser: false,\n\tchats: false,\n\tnetwork: false,\n};\n\n// @vue/component\nexport const AddToChatContent = {\n\tname: 'AddToChatContent',\n\tcomponents: { SearchResult, MessengerButton },\n\tprops: {\n\t\tchatId: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata() {\n\t\treturn {\n\t\t\tsearchQuery: '',\n\t\t\tshowHistory: true,\n\t\t\tisLoading: false,\n\t\t\tselectedItems: new Set(),\n\t\t\tneedTopShadow: false,\n\t\t\tneedBottomShadow: true,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonColor: () => ButtonColor,\n\t\tsearchConfig: () => searchConfig,\n\t\tdialog(): ImModelDialog\n\t\t{\n\t\t\treturn this.$store.getters['dialogues/get'](this.dialogId, true);\n\t\t},\n\t\tisChat(): boolean\n\t\t{\n\t\t\treturn this.dialog.type !== DialogType.user;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.chatService = new ChatService();\n\t\tthis.membersSelector = this.getTagSelector();\n\t},\n\tmounted()\n\t{\n\t\tthis.membersSelector.renderTo(this.$refs['tag-selector']);\n\t\tthis.membersSelector.focusTextBox();\n\t},\n\tmethods:\n\t{\n\t\tgetTagSelector(): TagSelector\n\t\t{\n\t\t\tlet timeoutId = null;\n\n\t\t\treturn new TagSelector({\n\t\t\t\tmaxHeight: 111,\n\t\t\t\tshowAddButton: false,\n\t\t\t\tshowTextBox: true,\n\t\t\t\taddButtonCaption: this.$Bitrix.Loc.getMessage('IM_ENTITY_SELECTOR_ADD_TO_CHAT_ADD'),\n\t\t\t\taddButtonCaptionMore: this.$Bitrix.Loc.getMessage('IM_ENTITY_SELECTOR_ADD_TO_CHAT_ADD_MORE'),\n\t\t\t\tshowCreateButton: false,\n\t\t\t\tevents: {\n\t\t\t\t\tonBeforeTagAdd: () => {\n\t\t\t\t\t\tclearTimeout(timeoutId);\n\t\t\t\t\t},\n\t\t\t\t\tonAfterTagAdd: (event) => {\n\t\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\t\tconst itemUniqId = `${tag.entityId}|${tag.id}`;\n\t\t\t\t\t\tthis.selectedItems.add(itemUniqId);\n\t\t\t\t\t\tthis.focusSelector();\n\t\t\t\t\t},\n\t\t\t\t\tonBeforeTagRemove: () => {\n\t\t\t\t\t\tclearTimeout(timeoutId);\n\t\t\t\t\t},\n\t\t\t\t\tonAfterTagRemove: (event) => {\n\t\t\t\t\t\tconst { tag } = event.getData();\n\t\t\t\t\t\tconst itemUniqId = `${tag.entityId}|${tag.id}`;\n\t\t\t\t\t\tthis.selectedItems.delete(itemUniqId);\n\t\t\t\t\t\tthis.focusSelector();\n\t\t\t\t\t},\n\t\t\t\t\tonInput: () => {\n\t\t\t\t\t\tthis.searchQuery = this.membersSelector.getTextBoxValue();\n\t\t\t\t\t},\n\t\t\t\t\tonBlur: (event) => {\n\t\t\t\t\t\tconst inputText = this.membersSelector.getTextBoxValue();\n\t\t\t\t\t\tif (inputText.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\ttimeoutId = setTimeout(() => {\n\t\t\t\t\t\t\tthis.membersSelector.hideTextBox();\n\t\t\t\t\t\t\tthis.membersSelector.showAddButton();\n\t\t\t\t\t\t}, 200);\n\t\t\t\t\t},\n\t\t\t\t\tonContainerClick: () => {\n\t\t\t\t\t\tthis.focusSelector();\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tfocusSelector()\n\t\t{\n\t\t\tthis.membersSelector.hideAddButton();\n\t\t\tthis.membersSelector.showTextBox();\n\t\t\tthis.membersSelector.focusTextBox();\n\t\t},\n\t\tprepareMembers(members: Set<string>): string[]\n\t\t{\n\t\t\tconst preparedMembers = [];\n\t\t\t[...members].forEach((item) => {\n\t\t\t\tconst [type, id] = item.split('|');\n\t\t\t\tif (type === SearchEntityIdTypes.user || type === SearchEntityIdTypes.bot)\n\t\t\t\t{\n\t\t\t\t\tpreparedMembers.push(id);\n\t\t\t\t}\n\t\t\t\telse if (type === SearchEntityIdTypes.department)\n\t\t\t\t{\n\t\t\t\t\tpreparedMembers.push(`${type}${id}`);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\treturn preparedMembers;\n\t\t},\n\t\tonSelectItem(event: {selectedItem: Object, selectedStatus: boolean})\n\t\t{\n\t\t\tconst { selectedItem, selectedStatus, nativeEvent } = event;\n\t\t\tif (selectedStatus)\n\t\t\t{\n\t\t\t\tthis.membersSelector.addTag({\n\t\t\t\t\tid: selectedItem.getId(),\n\t\t\t\t\tentityId: selectedItem.getEntityId(),\n\t\t\t\t\tentityType: selectedItem.getEntityType(),\n\t\t\t\t\ttitle: selectedItem.getTitle(),\n\t\t\t\t\tavatar: selectedItem.getAvatar()\n\t\t\t\t});\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.membersSelector.removeTag({\n\t\t\t\t\tid: selectedItem.getId(),\n\t\t\t\t\tentityId: selectedItem.getEntityId(),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.membersSelector.clearTextBox();\n\t\t\tif (!nativeEvent.altKey)\n\t\t\t{\n\t\t\t\tthis.searchQuery = '';\n\t\t\t}\n\t\t},\n\t\tonInviteClick()\n\t\t{\n\t\t\tconst members = this.prepareMembers(this.selectedItems);\n\t\t\tif (this.isChat)\n\t\t\t{\n\t\t\t\tthis.extendChat(members);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tmembers.push(this.dialogId, Core.getUserId());\n\t\t\t\tthis.createChat(members);\n\t\t\t}\n\t\t},\n\t\textendChat(members: Array<string | number>)\n\t\t{\n\t\t\tthis.isLoading = true;\n\n\t\t\tthis.chatService.addToChat({\n\t\t\t\tchatId: this.chatId,\n\t\t\t\tmembers,\n\t\t\t\tshowHistory: this.showHistory,\n\t\t\t}).then(() => {\n\t\t\t\tthis.isLoading = false;\n\t\t\t\tthis.$emit('close');\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\tthis.isLoading = false;\n\t\t\t\tthis.$emit('close');\n\t\t\t});\n\t\t},\n\t\tcreateChat(members: number[])\n\t\t{\n\t\t\tthis.isLoading = true;\n\t\t\tthis.chatService.createChat({\n\t\t\t\ttitle: null,\n\t\t\t\tdescription: null,\n\t\t\t\tmembers,\n\t\t\t\townerId: Core.getUserId(),\n\t\t\t\tisPrivate: true,\n\t\t\t}).then((newDialogId: string) => {\n\t\t\t\tthis.isLoading = false;\n\t\t\t\tMessenger.openChat(newDialogId);\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\tthis.isLoading = false;\n\t\t\t});\n\t\t},\n\t\tonListScroll(event: Event)\n\t\t{\n\t\t\tthis.needBottomShadow = event.target.scrollTop + event.target.clientHeight !== event.target.scrollHeight;\n\n\t\t\tif (event.target.scrollTop === 0)\n\t\t\t{\n\t\t\t\tthis.needTopShadow = false;\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.needTopShadow = true;\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-entity-selector-add-to-chat__container bx-im-entity-selector-add-to-chat__scope\">\n\t\t\t<div class=\"bx-im-entity-selector-add-to-chat__input\" ref=\"tag-selector\"></div>\n\t\t\t<div v-if=\"isChat\" class=\"bx-im-entity-selector-add-to-chat__show-history\">\n\t\t\t\t<input type=\"checkbox\" id=\"bx-im-entity-selector-add-to-chat-show-history\" v-model=\"showHistory\">\n\t\t\t\t<label for=\"bx-im-entity-selector-add-to-chat-show-history\">\n\t\t\t\t\t{{ $Bitrix.Loc.getMessage('IM_ENTITY_SELECTOR_ADD_TO_CHAT_SHOW_HISTORY')}}\n\t\t\t\t</label>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-entity-selector-add-to-chat__search-result-container\">\n\t\t\t\t<div v-if=\"needTopShadow\" class=\"bx-im-entity-selector-add-to-chat__shadow --top\">\n\t\t\t\t\t<div class=\"bx-im-entity-selector-add-to-chat__shadow-inner\"></div>\n\t\t\t\t</div>\n\t\t\t\t<SearchResult\n\t\t\t\t\t:searchMode=\"true\"\n\t\t\t\t\t:searchQuery=\"searchQuery\"\n\t\t\t\t\t:searchConfig=\"searchConfig\"\n\t\t\t\t\t:selectMode=\"true\"\n\t\t\t\t\t:selectedItems=\"[...selectedItems]\"\n\t\t\t\t\t@selectItem=\"onSelectItem\"\n\t\t\t\t\t@scroll=\"onListScroll\"\n\t\t\t\t/>\n\t\t\t\t<div v-if=\"needBottomShadow\" class=\"bx-im-entity-selector-add-to-chat__shadow --bottom\">\n\t\t\t\t\t<div class=\"bx-im-entity-selector-add-to-chat__shadow-inner\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-entity-selector-add-to-chat__buttons\">\n\t\t\t\t<MessengerButton\n\t\t\t\t\t:size=\"ButtonSize.L\"\n\t\t\t\t\t:color=\"ButtonColor.Primary\"\n\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t:isLoading=\"isLoading\"\n\t\t\t\t\t:text=\"$Bitrix.Loc.getMessage('IM_ENTITY_SELECTOR_ADD_TO_CHAT_INVITE_BUTTON')\"\n\t\t\t\t\t:isDisabled=\"selectedItems.size === 0\"\n\t\t\t\t\t@click=\"onInviteClick\"\n\t\t\t\t/>\n\t\t\t\t<MessengerButton\n\t\t\t\t\t:size=\"ButtonSize.L\"\n\t\t\t\t\t:color=\"ButtonColor.LightBorder\"\n\t\t\t\t\t:isRounded=\"true\"\n\t\t\t\t\t:text=\"$Bitrix.Loc.getMessage('IM_ENTITY_SELECTOR_ADD_TO_CHAT_CANCEL_BUTTON')\"\n\t\t\t\t\t@click=\"$emit('close')\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import {PopupOptions} from 'main.popup';\nimport {MessengerPopup} from 'im.v2.component.elements';\nimport {AddToChatContent} from './add-to-chat-content';\n\nconst POPUP_ID = 'im-add-to-chat-popup';\n\n// @vue/component\nexport const AddToChat = {\n\tname: 'AddToChat',\n\tcomponents: {MessengerPopup, AddToChatContent},\n\tprops:\n\t{\n\t\tshowPopup: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true\n\t\t},\n\t\tbindElement: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t},\n\t\tchatId: {\n\t\t\ttype: Number,\n\t\t\trequired: true\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true\n\t\t},\n\t\tpopupConfig: {\n\t\t\ttype: Object,\n\t\t\trequired: true\n\t\t}\n\t},\n\temits: ['close'],\n\tcomputed:\n\t{\n\t\tPOPUP_ID: () => POPUP_ID,\n\t\tconfig(): PopupOptions\n\t\t{\n\t\t\treturn {\n\t\t\t\ttitleBar: this.$Bitrix.Loc.getMessage('IM_ENTITY_SELECTOR_ADD_TO_CHAT_INVITE_MEMBERS_TITLE'),\n\t\t\t\tcloseIcon: true,\n\t\t\t\tbindElement: this.bindElement,\n\t\t\t\toffsetTop: this.popupConfig.offsetTop,\n\t\t\t\toffsetLeft: this.popupConfig.offsetLeft,\n\t\t\t\tpadding: 0,\n\t\t\t\tcontentPadding: 0,\n\t\t\t\tcontentBackground: '#fff',\n\t\t\t\tclassName: 'bx-im-entity-selector-add-to-chat__scope',\n\t\t\t};\n\t\t}\n\t},\n\ttemplate: `\n\t\t<MessengerPopup\n\t\t\tv-if=\"showPopup\"\n\t\t\tv-slot=\"{enableAutoHide, disableAutoHide}\"\n\t\t\t:config=\"config\"\n\t\t\t@close=\"$emit('close')\"\n\t\t\t:id=\"POPUP_ID\"\n\t\t>\n\t\t\t<AddToChatContent :chatId=\"chatId\" :dialogId=\"dialogId\" @close=\"$emit('close')\"/>\n\t\t</MessengerPopup>\n\t`\n};"],"names":["searchConfig","currentUser","chats","network","AddToChatContent","name","components","SearchResult","MessengerButton","props","chatId","type","Number","required","dialogId","String","data","searchQuery","showHistory","isLoading","selectedItems","Set","needTopShadow","needBottomShadow","computed","ButtonSize","ButtonColor","dialog","$store","getters","isChat","DialogType","user","created","chatService","ChatService","membersSelector","getTagSelector","mounted","renderTo","$refs","focusTextBox","methods","timeoutId","TagSelector","maxHeight","showAddButton","showTextBox","addButtonCaption","$Bitrix","Loc","getMessage","addButtonCaptionMore","showCreateButton","events","onBeforeTagAdd","clearTimeout","onAfterTagAdd","event","tag","getData","itemUniqId","entityId","id","add","focusSelector","onBeforeTagRemove","onAfterTagRemove","delete","onInput","getTextBoxValue","onBlur","inputText","length","setTimeout","hideTextBox","onContainerClick","hideAddButton","prepareMembers","members","preparedMembers","forEach","item","split","SearchEntityIdTypes","bot","push","department","onSelectItem","selectedItem","selectedStatus","nativeEvent","addTag","getId","getEntityId","entityType","getEntityType","title","getTitle","avatar","getAvatar","removeTag","clearTextBox","altKey","onInviteClick","extendChat","Core","getUserId","createChat","addToChat","then","$emit","catch","error","console","description","ownerId","isPrivate","newDialogId","Messenger","openChat","onListScroll","target","scrollTop","clientHeight","scrollHeight","template","POPUP_ID","AddToChat","MessengerPopup","showPopup","Boolean","bindElement","Object","popupConfig","emits","config","titleBar","closeIcon","offsetTop","offsetLeft","padding","contentPadding","contentBackground","className"],"mappings":"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"}