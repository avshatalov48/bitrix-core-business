this.BX=this.BX||{};this.BX.Socialnetwork=this.BX.Socialnetwork||{};this.BX.Socialnetwork.Blog=this.BX.Socialnetwork.Blog||{};(function(e,s,t){"use strict";let a=e=>e,i;var l=babelHelpers.classPrivateFieldLooseKey("params");var o=babelHelpers.classPrivateFieldLooseKey("layout");var r=babelHelpers.classPrivateFieldLooseKey("copilotLoaded");var n=babelHelpers.classPrivateFieldLooseKey("copilotContextMenu");var b=babelHelpers.classPrivateFieldLooseKey("copilotShown");var c=babelHelpers.classPrivateFieldLooseKey("adjustAnimation");var d=babelHelpers.classPrivateFieldLooseKey("render");var v=babelHelpers.classPrivateFieldLooseKey("createCopilot");var p=babelHelpers.classPrivateFieldLooseKey("bindEvents");var P=babelHelpers.classPrivateFieldLooseKey("startAdjustAnimation");var h=babelHelpers.classPrivateFieldLooseKey("onButtonMouseDown");var B=babelHelpers.classPrivateFieldLooseKey("onButtonClick");var L=babelHelpers.classPrivateFieldLooseKey("show");var u=babelHelpers.classPrivateFieldLooseKey("getBindElement");var H=babelHelpers.classPrivateFieldLooseKey("hide");var F=babelHelpers.classPrivateFieldLooseKey("copyIntoComment");var f=babelHelpers.classPrivateFieldLooseKey("copyIntoNewPost");class m{constructor(e){Object.defineProperty(this,f,{value:K});Object.defineProperty(this,F,{value:C});Object.defineProperty(this,H,{value:_});Object.defineProperty(this,u,{value:j});Object.defineProperty(this,L,{value:E});Object.defineProperty(this,B,{value:T});Object.defineProperty(this,h,{value:I});Object.defineProperty(this,P,{value:w});Object.defineProperty(this,p,{value:g});Object.defineProperty(this,v,{value:O});Object.defineProperty(this,d,{value:y});Object.defineProperty(this,l,{writable:true,value:void 0});Object.defineProperty(this,o,{writable:true,value:void 0});Object.defineProperty(this,r,{writable:true,value:void 0});Object.defineProperty(this,n,{writable:true,value:void 0});Object.defineProperty(this,b,{writable:true,value:void 0});Object.defineProperty(this,c,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,l)[l]=e;babelHelpers.classPrivateFieldLooseBase(this,o)[o]={};if(babelHelpers.classPrivateFieldLooseBase(this,l)[l].enabledBySettings){void babelHelpers.classPrivateFieldLooseBase(this,v)[v]()}s.Dom.append(babelHelpers.classPrivateFieldLooseBase(this,d)[d](),babelHelpers.classPrivateFieldLooseBase(this,l)[l].container)}}function y(){babelHelpers.classPrivateFieldLooseBase(this,o)[o].button=s.Tag.render(i||(i=a`
			<span class="feed-inform-item feed-inform-comments feed-copilot-readonly">
				<a>${0}</a>
			</span>
		`),s.Loc.getMessage("BLOG_POST_BUTTON_COPILOT"));s.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,o)[o].button,"mousedown",babelHelpers.classPrivateFieldLooseBase(this,h)[h].bind(this));s.Event.bind(babelHelpers.classPrivateFieldLooseBase(this,o)[o].button,"click",babelHelpers.classPrivateFieldLooseBase(this,B)[B].bind(this));return babelHelpers.classPrivateFieldLooseBase(this,o)[o].button}async function O(){const{CopilotContextMenu:e}=await s.Runtime.loadExtension("ai.copilot");const t={moduleId:babelHelpers.classPrivateFieldLooseBase(this,l)[l].copilotParams.moduleId,contextId:babelHelpers.classPrivateFieldLooseBase(this,l)[l].copilotParams.contextId,category:babelHelpers.classPrivateFieldLooseBase(this,l)[l].copilotParams.category,bindElement:babelHelpers.classPrivateFieldLooseBase(this,u)[u](),angle:true,extraResultMenuItems:[{code:"insert-into-comment",text:s.Loc.getMessage("BLOG_POST_BUTTON_COPILOT_COPY_INTO_COMMENT"),command:()=>{const e=babelHelpers.classPrivateFieldLooseBase(this,n)[n].getResultText();babelHelpers.classPrivateFieldLooseBase(this,n)[n].hide();babelHelpers.classPrivateFieldLooseBase(this,F)[F](e)}},{code:"insert-into-new-post",text:s.Loc.getMessage("BLOG_POST_BUTTON_COPILOT_COPY_INTO_NEW_POST"),command:()=>{const e=babelHelpers.classPrivateFieldLooseBase(this,n)[n].getResultText();babelHelpers.classPrivateFieldLooseBase(this,n)[n].hide();babelHelpers.classPrivateFieldLooseBase(this,f)[f](e)}}]};babelHelpers.classPrivateFieldLooseBase(this,n)[n]=new e(t);babelHelpers.classPrivateFieldLooseBase(this,p)[p]();try{await babelHelpers.classPrivateFieldLooseBase(this,n)[n].init();babelHelpers.classPrivateFieldLooseBase(this,r)[r]=true}catch(e){console.error("Failed to init copilot",e)}}function g(){t.EventEmitter.subscribe("onPullEvent-unicomments",babelHelpers.classPrivateFieldLooseBase(this,P)[P].bind(this))}function w(){var e;(e=babelHelpers.classPrivateFieldLooseBase(this,c)[c])==null?void 0:e.stop();babelHelpers.classPrivateFieldLooseBase(this,c)[c]=new BX.easing({duration:1e3,start:{},finish:{},transition:BX.easing.makeEaseOut(BX.easing.transitions.linear),step:()=>{if(babelHelpers.classPrivateFieldLooseBase(this,n)[n].isShown()){babelHelpers.classPrivateFieldLooseBase(this,n)[n].adjustPosition()}},complete:()=>{babelHelpers.classPrivateFieldLooseBase(this,c)[c]=null}});babelHelpers.classPrivateFieldLooseBase(this,c)[c].animate()}function I(){var e;if(!babelHelpers.classPrivateFieldLooseBase(this,l)[l].enabledBySettings){return}babelHelpers.classPrivateFieldLooseBase(this,b)[b]=(e=babelHelpers.classPrivateFieldLooseBase(this,n)[n])==null?void 0:e.isShown()}function T(){if(!babelHelpers.classPrivateFieldLooseBase(this,l)[l].enabledBySettings){BX.UI.InfoHelper.show("limit_copilot_off");return}if(babelHelpers.classPrivateFieldLooseBase(this,b)[b]){babelHelpers.classPrivateFieldLooseBase(this,H)[H]()}else{babelHelpers.classPrivateFieldLooseBase(this,L)[L]()}}function E(){if(babelHelpers.classPrivateFieldLooseBase(this,r)[r]){babelHelpers.classPrivateFieldLooseBase(this,n)[n].setContext(babelHelpers.classPrivateFieldLooseBase(this,l)[l].blogText);babelHelpers.classPrivateFieldLooseBase(this,n)[n].show({bindElement:babelHelpers.classPrivateFieldLooseBase(this,u)[u]()})}}function j(){return babelHelpers.classPrivateFieldLooseBase(this,o)[o].button}function _(){babelHelpers.classPrivateFieldLooseBase(this,n)[n].hide()}function C(e){var s;const t=FCList.getInstance({ENTITY_XML_ID:babelHelpers.classPrivateFieldLooseBase(this,l)[l].blogId});const a=t.form;const i=LHEPostForm.getHandlerByFormId(t.form.formId);if((s=i.oEditor)!=null&&s.IsShown()){i.oEditor.action.Exec("insertHTML",e)}const o=()=>{i.oEditor.action.Exec("insertHTML",e);BX.removeCustomEvent(i.oEditor,"OnAfterIframeInit",o)};i.exec((()=>{BX.addCustomEvent(i.oEditor,"OnAfterIframeInit",o)}));a.show(t)}function K(e){const t=s.Uri.addParam(babelHelpers.classPrivateFieldLooseBase(this,l)[l].pathToPostCreate,{getTextFromHash:"Y"});location.href=`${t}#${encodeURIComponent(e)}`}e.BlogCopilotReadonly=m})(this.BX.Socialnetwork.Blog.Post=this.BX.Socialnetwork.Blog.Post||{},BX,BX.Event);
//# sourceMappingURL=index.map.js