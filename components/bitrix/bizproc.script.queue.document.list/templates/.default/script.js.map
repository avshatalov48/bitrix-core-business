{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import { Reflection, Loc, Type, ajax } from 'main.core';\nimport { Router } from 'bizproc.router';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { UI } from 'ui.notification';\n\nconst namespace = Reflection.namespace('BX.Bizproc');\n\nclass ScriptQueueDocumentListComponent\n{\n\t#gridId;\n\n\tconstructor(options)\n\t{\n\t\tif (Type.isPlainObject(options))\n\t\t{\n\t\t\tthis.#gridId = options.gridId;\n\t\t}\n\t}\n\n\topenWorkflowLog(workflowId: string)\n\t{\n\t\tRouter.openWorkflowLog(workflowId);\n\t}\n\n\tterminateWorkflow(workflowId: string)\n\t{\n\t\tMessageBox.confirm(\n\t\t\tLoc.getMessage('BIZPROC_SCRIPT_QDL_CONFIRM_TERMINATE'),\n\t\t\t() => {\n\t\t\t\tthis.#terminateWorkflowRunAction(workflowId);\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tLoc.getMessage('BIZPROC_SCRIPT_QDL_BTN_TERMINATE'),\n\t\t);\n\t}\n\n\t#terminateWorkflowRunAction(workflowId: string)\n\t{\n\t\tajax.runAction('bizproc.workflow.terminate', { data: { workflowId } })\n\t\t\t.then(() => {\n\t\t\t\tthis.#reloadGrid();\n\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\tcontent: Loc.getMessage('BIZPROC_SCRIPT_QDL_TERMINATE_SUCCESS'),\n\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t});\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tresponse.errors.forEach((error) => {\n\t\t\t\t\tUI.Notification.Center.notify({\n\t\t\t\t\t\tcontent: error.message,\n\t\t\t\t\t\tautoHideDelay: 5000,\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t}\n\n\t#reloadGrid()\n\t{\n\t\tif (this.#gridId)\n\t\t{\n\t\t\tconst grid = BX.Main.gridManager && BX.Main.gridManager.getInstanceById(this.#gridId);\n\t\t\tif (grid)\n\t\t\t{\n\t\t\t\tgrid.reload();\n\t\t\t}\n\t\t}\n\t}\n}\n\nnamespace.ScriptQueueDocumentListComponent = ScriptQueueDocumentListComponent;\n"],"names":["namespace","Reflection","ScriptQueueDocumentListComponent","options","Type","isPlainObject","gridId","workflowId","Router","openWorkflowLog","MessageBox","confirm","Loc","getMessage","ajax","runAction","data","then","UI","Notification","Center","notify","content","autoHideDelay","response","errors","forEach","error","message","grid","BX","Main","gridManager","getInstanceById","reload"],"mappings":";;;;;;;;AAAA,CAKA,IAAMA,SAAS,GAAGC,oBAAU,CAACD,SAAS,CAAC,YAAY,CAAC;CAAC;CAAA;CAAA;CAAA,IAE/CE,gCAAgC;GAIrC,0CAAYC,OAAO,EACnB;KAAA;KAAA;KAAA;KAAA;OAAA;OAAA;;KACC,IAAIC,cAAI,CAACC,aAAa,CAACF,OAAO,CAAC,EAC/B;OACC,sCAAI,WAAWA,OAAO,CAACG,MAAM;;;GAE9B;KAAA;KAAA,gCAEeC,UAAkB,EAClC;OACCC,qBAAM,CAACC,eAAe,CAACF,UAAU,CAAC;;;KAClC;KAAA,kCAEiBA,UAAkB,EACpC;OAAA;OACCG,gCAAU,CAACC,OAAO,CACjBC,aAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC,EACtD,YAAM;SACL,4BAAI,kEAAJ,KAAI,EAA6BN,UAAU;SAE3C,OAAO,IAAI;QACX,EACDK,aAAG,CAACC,UAAU,CAAC,kCAAkC,CAAC,CAClD;;;GACD;CAAA;CAAA,sCAE2BN,UAAkB,EAC9C;GAAA;GACCO,cAAI,CAACC,SAAS,CAAC,4BAA4B,EAAE;KAAEC,IAAI,EAAE;OAAET,UAAU,EAAVA;;IAAc,CAAC,CACpEU,IAAI,CAAC,YAAM;KACX,6BAAI,kCAAJ,MAAI;KACJC,kBAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;OAC7BC,OAAO,EAAEV,aAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC;OAC/DU,aAAa,EAAE;MACf,CAAC;IACF,CAAC,SACI,CAAC,UAACC,QAAQ,EAAK;KACpBA,QAAQ,CAACC,MAAM,CAACC,OAAO,CAAC,UAACC,KAAK,EAAK;OAClCT,kBAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;SAC7BC,OAAO,EAAEK,KAAK,CAACC,OAAO;SACtBL,aAAa,EAAE;QACf,CAAC;MACF,CAAC;IACF,CAAC;CACJ;CAAC,wBAGD;GACC,sCAAI,IAAI,YACR;KACC,IAAMM,IAAI,GAAGC,EAAE,CAACC,IAAI,CAACC,WAAW,IAAIF,EAAE,CAACC,IAAI,CAACC,WAAW,CAACC,eAAe,mCAAC,IAAI,WAAS;KACrF,IAAIJ,IAAI,EACR;OACCA,IAAI,CAACK,MAAM,EAAE;;;CAGhB;CAGDlC,SAAS,CAACE,gCAAgC,GAAGA,gCAAgC;;;;"}