{"version":3,"file":"theme.bundle.js","sources":["../src/color-scheme.js","../src/theme.js"],"sourcesContent":["export const ThemeType = Object.freeze({\n\tlight: 'light',\n\tdark: 'dark',\n});\n\nexport const SelectableBackground = Object.freeze({\n\t// dark ones\n\t1: {\n\t\tcolor: '#9fcfff',\n\t\ttype: ThemeType.dark,\n\t},\n\t2: {\n\t\tcolor: '#81d8bf',\n\t\ttype: ThemeType.dark,\n\t},\n\t3: {\n\t\tcolor: '#7fadd1',\n\t\ttype: ThemeType.dark,\n\t},\n\t4: {\n\t\tcolor: '#7a90b6',\n\t\ttype: ThemeType.dark,\n\t},\n\t5: {\n\t\tcolor: '#5f9498',\n\t\ttype: ThemeType.dark,\n\t},\n\t6: {\n\t\tcolor: '#799fe1',\n\t\ttype: ThemeType.dark,\n\t},\n\t// light ones\n\t7: {\n\t\tcolor: '#cfeefa',\n\t\ttype: ThemeType.light,\n\t},\n\t9: {\n\t\tcolor: '#efded3',\n\t\ttype: ThemeType.light,\n\t},\n\t11: {\n\t\tcolor: '#eff4f6',\n\t\ttype: ThemeType.light,\n\t},\n});\n\nexport const SpecialBackgroundId = {\n\tcollab: 'collab-v2',\n};\n\nexport const SpecialBackground = {\n\t[SpecialBackgroundId.collab]: {\n\t\tcolor: '#76c68b',\n\t\ttype: ThemeType.dark,\n\t},\n};\n\nexport type BackgroundItem = {\n\tcolor: string,\n\ttype: $Values<typeof ThemeType>\n};\n","import { Core } from 'im.v2.application.core';\nimport { Settings } from 'im.v2.const';\nimport { SelectableBackground, SpecialBackground, SpecialBackgroundId, ThemeType } from './color-scheme';\n\nimport type { BackgroundItem } from './color-scheme';\n\nexport { SelectableBackground, SpecialBackgroundId as SpecialBackground, ThemeType, ThemeManager };\n\nconst IMAGE_FOLDER_PATH = '/bitrix/js/im/images/chat-v2-background';\n\nexport type BackgroundStyle = {\n\tbackgroundColor: string,\n\tbackgroundImage: string,\n\tbackgroundRepeat: string,\n\tbackgroundSize: string\n};\n\nconst BackgroundPatternColor = Object.freeze({\n\twhite: 'white',\n\tgray: 'gray',\n});\n\nconst ThemeManager = {\n\tisLightTheme(): boolean\n\t{\n\t\tconst selectedBackgroundId = Core.getStore().getters['application/settings/get'](Settings.appearance.background);\n\t\tconst selectedColorScheme: BackgroundItem = SelectableBackground[selectedBackgroundId];\n\n\t\treturn selectedColorScheme?.type === ThemeType.light;\n\t},\n\n\tisDarkTheme(): boolean\n\t{\n\t\tconst selectedBackgroundId = Core.getStore().getters['application/settings/get'](Settings.appearance.background);\n\t\tconst selectedColorScheme: BackgroundItem = SelectableBackground[selectedBackgroundId];\n\n\t\treturn selectedColorScheme?.type === ThemeType.dark;\n\t},\n\n\tgetCurrentBackgroundStyle(): BackgroundStyle\n\t{\n\t\tconst selectedBackgroundId = Core.getStore().getters['application/settings/get'](Settings.appearance.background);\n\n\t\treturn this.getBackgroundStyleById(selectedBackgroundId);\n\t},\n\n\tgetBackgroundStyleById(backgroundId: string | number): BackgroundStyle\n\t{\n\t\tconst backgroundsList = { ...SelectableBackground, ...SpecialBackground };\n\t\tconst colorScheme: BackgroundItem = backgroundsList[backgroundId];\n\t\tif (!colorScheme)\n\t\t{\n\t\t\treturn {};\n\t\t}\n\n\t\tconst patternColor = colorScheme.type === ThemeType.light\n\t\t\t? BackgroundPatternColor.gray\n\t\t\t: BackgroundPatternColor.white\n\t\t;\n\t\tconst patternImage = `url('${IMAGE_FOLDER_PATH}/pattern-${patternColor}.svg')`;\n\t\tconst highlightImage = `url('${IMAGE_FOLDER_PATH}/${backgroundId}.png')`;\n\n\t\treturn {\n\t\t\tbackgroundColor: colorScheme.color,\n\t\t\tbackgroundImage: `${patternImage}, ${highlightImage}`,\n\t\t\tbackgroundPosition: 'top right, center',\n\t\t\tbackgroundRepeat: 'repeat, no-repeat',\n\t\t\tbackgroundSize: 'auto, cover',\n\t\t};\n\t},\n};\n"],"names":["ThemeType","Object","freeze","light","dark","SelectableBackground","color","type","SpecialBackgroundId","collab","SpecialBackground","IMAGE_FOLDER_PATH","BackgroundPatternColor","white","gray","ThemeManager","isLightTheme","selectedBackgroundId","Core","getStore","getters","Settings","appearance","background","selectedColorScheme","isDarkTheme","getCurrentBackgroundStyle","getBackgroundStyleById","backgroundId","backgroundsList","colorScheme","patternColor","patternImage","highlightImage","backgroundColor","backgroundImage","backgroundPosition","backgroundRepeat","backgroundSize"],"mappings":"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"}