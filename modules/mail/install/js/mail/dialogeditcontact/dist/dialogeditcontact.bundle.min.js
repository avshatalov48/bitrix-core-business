this.BX=this.BX||{};this.BX.Mail=this.BX.Mail||{};(function(t,e,a,o){"use strict";function n(){var t=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div>\n\t\t\t\t<div data-role="name-container" class="mail-addressbook-dialogeditcontact-item">\n\t\t\t\t\t<label class="mail-addressbook-dialogeditcontact-lable">','\n\t\t\t\t\t\t<div id="mail-addressbook-dialogeditcontact-contact-email-container" class="ui-ctl ui-ctl-textbox mail-addressbook-dialogeditcontact-field">\n\t\t\t\t\t\t\t<input data-role = "input" value="','" class="ui-ctl-element" placeholder="">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\t\t\t\t\t<div data-role = "error-title" class="mail-addressbook-dialogeditcontact-contact-error"></div>\n\t\t\t\t</div>\n\t\t\t\t<div data-role="email-container" class="mail-addressbook-dialogeditcontact-item">\n\t\t\t\t\t<label class="mail-addressbook-dialogeditcontact-lable">','\n\t\t\t\t\t\t<div id="mail-addressbook-dialogeditcontact-contact-email-container" class="ui-ctl ui-ctl-textbox mail-addressbook-dialogeditcontact-field">\n\t\t\t\t\t\t\t<input data-role = "input" value="','" class="ui-ctl-element" placeholder="info@example.com">\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</label>\n\t\t\t\t\t<div data-role = "error-title" class="mail-addressbook-dialogeditcontact-contact-error">',"</div>\t\t\t\n\t\t\t\t</div>\n\t\t\t</div>"]);n=function e(){return t};return t}var i=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,null,[{key:"getCheckedFields",value:function t(a){var o=a.querySelector('[data-role="email-container"]');var n=o.querySelector('[data-role="input"]');var i=n.value;var r=a.querySelector('[data-role="name-container"]');var l=r.querySelector('[data-role="input"]');var c=l.value;var s=true;var d=[];if(!e.Validation.isEmail(i)){s=false;o.showError()}else if(c.length<1){c=i.split("@")[0]}d={name:c,email:i};if(s){return d}return false}},{key:"openRemoveDialog",value:function t(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{id:""};var n=new BX.Promise;var i=this.removeContact;var r=BX.SidePanel.Instance.getTopSlider();var l=1;if(r!=null){l+=r.getZindex()}var c=new o.MessageBox({title:e.Loc.getMessage("MAIL_DIALOG_EDIT_CONTACT_REMOVE_DIALOG_TITLE"),message:e.Loc.getMessage("MAIL_DIALOG_EDIT_CONTACT_REMOVE_DIALOG_MESSAGE"),buttons:BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,popupOptions:{zIndex:l},onOk:function t(){i(a["id"]).then(function(){return n.fulfill()});c.close()},onCancel:function t(){n.reject();c.close()}});c.show();return n}},{key:"removeContact",value:function t(e){return BX.ajax.runAction("mail.addressbook.removecontacts",{data:{idSet:[e]}})}},{key:"saveContact",value:function t(e,a,o){var n={NAME:e,EMAIL:a};if(o!==undefined){n["ID"]=o}return BX.ajax.runAction("mail.addressbook.savecontact",{data:{contactData:n}})}},{key:"showError",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this;var a=e.querySelector('[data-role="error-title"]');a.style.display="block"}},{key:"hideError",value:function t(){var e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:this;var a=e.querySelector('[data-role="error-title"]');a.style.display="none"}},{key:"openDialog",value:function t(o){var i=this;var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var l="";var c="";if(r["contactData"]!==undefined){c=e.Text.encode(r["contactData"]["name"]);l=e.Text.encode(r["contactData"]["email"])}var s=e.Tag.render(n(),e.Loc.getMessage("MAIL_DIALOG_EDIT_CONTACT_NAME_TITLE"),c,e.Loc.getMessage("MAIL_DIALOG_EDIT_CONTACT_EMAIL_TITLE"),l,e.Loc.getMessage("MAIL_DIALOG_EDIT_CONTACT_EMAIL_ERROR"));var d=s.querySelector('[data-role="email-container"]');d.showError=this.showError;d.hideError=this.hideError;var u=s.querySelector('[data-role="name-container"]');u.showError=this.showError;u.hideError=this.hideError;var v=d.querySelector('[data-role="input"]');v.oninput=function(){return d.hideError()};var g=u.querySelector('[data-role="input"]');g.oninput=function(){return u.hideError()};a.SidePanelWrapper.open({id:"dialogEditContact",titleText:o,footerIsActive:true,content:s,cancelButton:{text:e.Loc.getMessage("MAIL_DIALOG_EDIT_CONTACT_BUTTON_CANCEL")},consentButton:{text:e.Loc.getMessage("MAIL_DIALOG_EDIT_CONTACT_BUTTON_SAVE"),function:function t(e){var a=i.getCheckedFields(s);if(a){e.setClocking(true);i.saveContact(a["name"],a["email"],r["contactID"]).then(function(){BX.SidePanel.Instance.close();BX.SidePanel.Instance.postMessageAll("mail:side-panel","dialogEditContact::reloadList",{})})}}}})}},{key:"openCreateDialog",value:function t(a){this.openDialog(e.Loc.getMessage("MAIL_DIALOG_EDIT_CONTACT_TITLE_BAR_ADD"),a)}},{key:"openEditDialog",value:function t(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{contactID:"",contactData:{name:"",email:""}};this.openDialog(e.Loc.getMessage("MAIL_DIALOG_EDIT_CONTACT_TITLE_BAR_EDIT"),a)}}]);return t}();t.DialogEditContact=i})(this.BX.Mail.AddressBook=this.BX.Mail.AddressBook||{},BX,BX.Mail,BX.UI.Dialogs);
//# sourceMappingURL=dialogeditcontact.bundle.map.js