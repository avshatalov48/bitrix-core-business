this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,a,o,c){"use strict";const s=Object.freeze({private:"chatType_private",multiuser:"chatType_multiuser"});const i=Object.freeze({openMessenger:"open_messenger",openChat:"open_chat",createNewChat:"create_new_chat",audioUse:"audio_use",openTab:"open_tab",popupOpen:"popup_open",openPrices:"open_prices",openSettings:"open_settings",clickCreateNew:"click_create_new",openExisting:"open_existing",clickDelete:"click_delete",cancelDelete:"cancel_delete",delete:"delete",view:"view",click:"click",clickEdit:"click_edit",submitEdit:"submit_edit",clickCallButton:"click_call_button",clickStartConf:"click_start_conf",clickJoin:"click_join"});const n=Object.freeze({ai:"ai",checkin:"checkin",im:"im",infoHelper:"InfoHelper"});const l=Object.freeze({chatOperations:"chat_operations",shift:"shift",messenger:"messenger",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",limit:"limit",limitBanner:"limit_banner",toolOff:"tool_off",message:"message",chatPopup:"chat_popup",call:"call"});const r=Object.freeze({ai:"ai",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",deletedMessage:"deleted_message",limitOfficeChatingHistory:"limit_office_chating_history",privateCall:"private",groupCall:"group"});const p=Object.freeze({copilotTab:"copilot_tab",chat:"chat",chatStart:"chat_start",chatHistory:"chat_history",sidebar:"sidebar",popup:"popup",activeChat:"active_chat",comments:"comments"});const d=Object.freeze({contextMenu:"context_menu",sidebar:"sidebar",chatWindow:"chat_window",messageLink:"message_link",chatSidebar:"chat_sidebar",chatList:"chat_list",window:"window"});const h=Object.freeze({initialBanner:"initial_banner",videocall:"videocall",audiocall:"audiocall",startButton:"start_button"});const g=Object.freeze({success:"success",errorTurnedOff:"error_turnedoff"});function y(e){switch(e){case c.ChatType.channel:case c.ChatType.openChannel:case c.ChatType.comment:case c.ChatType.generalChannel:return l.channel;case c.ChatType.copilot:return l.copilot;case c.ChatType.videoconf:return l.videoconf;default:return l.chat}}const b="custom";function m(e){var t;return(t=c.ChatType[e.type])!=null?t:b}class u{onClick(e){const t=o.Core.getStore().getters["chats/get"](e);a.sendData({tool:n.im,category:y(t.type),event:i.clickDelete,type:m(t),c_section:p.sidebar,c_sub_section:d.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onCancel(e){const t=o.Core.getStore().getters["chats/get"](e);a.sendData({tool:n.im,category:y(t.type),event:i.cancelDelete,type:m(t),c_section:p.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onConfirm(e){const t=o.Core.getStore().getters["chats/get"](e);a.sendData({tool:n.im,category:y(t.type),event:i.delete,type:m(t),c_section:p.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onChatDeletedNotification(e){const t=o.Core.getStore().getters["chats/get"](e);const c=y(t);a.sendData({tool:n.im,category:l.chatPopup,event:i.view,type:`deleted_${c}`,c_section:p.activeChat,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}}class _{onClickDelete({messageId:e,dialogId:c}){const s=o.Core.getStore().getters["messages/getById"](e);const r=new t.MessageComponentManager(s).getName();const p=o.Core.getStore().getters["chats/get"](c);a.sendData({tool:n.im,category:l.message,event:i.clickDelete,type:r,c_sub_section:d.contextMenu,p1:`chatType_${p.type}`,p5:`chatId_${p.chatId}`})}onCancel({messageId:e,dialogId:c}){const s=o.Core.getStore().getters["messages/getById"](e);const r=new t.MessageComponentManager(s).getName();const h=o.Core.getStore().getters["chats/get"](c);a.sendData({tool:n.im,category:l.message,event:i.cancelDelete,type:r,c_section:p.popup,c_sub_section:d.contextMenu,p1:`chatType_${h.type}`,p5:`chatId_${h.chatId}`})}onNotFoundNotification({dialogId:e}){const t=o.Core.getStore().getters["chats/get"](e);a.sendData({tool:n.im,category:l.chatPopup,event:i.view,type:r.deletedMessage,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onDeletedPostNotification({messageId:e,dialogId:t}){const c=o.Core.getStore().getters["chats/get"](t);const s=o.Core.getStore().getters["messages/comments/getByMessageId"](e);a.sendData({tool:n.im,category:l.chatPopup,event:i.view,type:r.deletedMessage,c_section:p.comments,p1:`chatType_${c.type}`,p4:`parentChatId_${c.chatId}`,p5:`chatId_${s.chatId}`})}}var v=babelHelpers.classPrivateFieldLooseKey("onBannerClick");var C=babelHelpers.classPrivateFieldLooseKey("getSidebarPanelNameForAnalytics");class f{constructor(){Object.defineProperty(this,C,{value:B});Object.defineProperty(this,v,{value:I})}onDialogLimitExceeded({dialogId:e,noMessages:t}){const c=t?p.chatStart:p.chatHistory;const s=o.Core.getStore().getters["chats/get"](e);const d=m(s);const h={tool:n.im,category:l.limitBanner,event:i.view,type:r.limitOfficeChatingHistory,c_section:c,p1:`chatType_${d}`};a.sendData(h)}onSidebarLimitExceeded({dialogId:e,panel:t}){const c=o.Core.getStore().getters["chats/get"](e);const s=m(c);const d={tool:n.im,category:l.limitBanner,event:i.view,type:r.limitOfficeChatingHistory,c_section:p.sidebar,c_element:babelHelpers.classPrivateFieldLooseBase(this,C)[C](t),p1:`chatType_${s}`};a.sendData(d)}onDialogBannerClick({dialogId:e}){const t=p.chatWindow;babelHelpers.classPrivateFieldLooseBase(this,v)[v]({dialogId:e,section:t})}onSidebarBannerClick({dialogId:e,panel:t}){const a=p.sidebar;const o=babelHelpers.classPrivateFieldLooseBase(this,C)[C](t);babelHelpers.classPrivateFieldLooseBase(this,v)[v]({dialogId:e,section:a,element:o})}onGoToContextLimitExceeded({dialogId:e}){const t=p.messageLink;babelHelpers.classPrivateFieldLooseBase(this,v)[v]({dialogId:e,section:t})}}function I({dialogId:e,section:t,element:c}){const s=o.Core.getStore().getters["chats/get"](e);const p=m(s);const d={tool:n.im,category:l.limitBanner,event:i.click,type:r.limitOfficeChatingHistory,c_section:t,p1:`chatType_${p}`};if(c){d.c_element=c}a.sendData(d)}function B(e){switch(e){case c.SidebarDetailBlock.main:return"main";case c.SidebarDetailBlock.file:case c.SidebarDetailBlock.fileUnsorted:case c.SidebarDetailBlock.audio:case c.SidebarDetailBlock.brief:case c.SidebarDetailBlock.document:case c.SidebarDetailBlock.media:case c.SidebarDetailBlock.other:return"docs";case c.SidebarDetailBlock.messageSearch:return"message_search";case c.SidebarDetailBlock.favorite:return"favs";case c.SidebarDetailBlock.link:return"links";case c.SidebarDetailBlock.task:return"task";case c.SidebarDetailBlock.meeting:return"event";default:return"unknown"}}var k=babelHelpers.classPrivateFieldLooseKey("excludedChats");var S=babelHelpers.classPrivateFieldLooseKey("currentTab");var D=babelHelpers.classPrivateFieldLooseKey("instance");class T{constructor(){Object.defineProperty(this,k,{writable:true,value:new Set});Object.defineProperty(this,S,{writable:true,value:c.Layout.chat.name});this.chatDelete=new u;this.messageDelete=new _;this.historyLimit=new f}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,D)[D]){babelHelpers.classPrivateFieldLooseBase(this,D)[D]=new this}return babelHelpers.classPrivateFieldLooseBase(this,D)[D]}onOpenMessenger(){a.sendData({event:i.openMessenger,tool:n.im,category:l.messenger})}onCreateCopilotChat({chatId:e,dialogId:t}){babelHelpers.classPrivateFieldLooseBase(this,k)[k].add(t);a.sendData({event:i.createNewChat,tool:n.ai,category:l.chatOperations,c_section:p.copilotTab,type:r.ai,p3:s.private,p5:`chatId_${e}`})}onOpenCopilotChat(e){const t=o.Core.getStore().getters["chats/get"](e);const c=t.userCounter<=2?s.private:s.multiuser;a.sendData({event:i.openChat,tool:n.ai,category:l.chatOperations,c_section:p.copilotTab,type:r.ai,p3:c,p5:`chatId_${t.chatId}`})}onOpenCopilotTab({isAvailable:e=true}={}){const t={event:i.openTab,tool:n.ai,category:l.chatOperations,c_section:p.copilotTab,status:e?g.success:g.errorTurnedOff};a.sendData(t)}onOpenTab(e){const t=[c.Layout.chat.name,c.Layout.copilot.name,c.Layout.channel.name,c.Layout.notification.name,c.Layout.settings.name,c.Layout.openlines.name];if(!t.includes(e)){return}if(babelHelpers.classPrivateFieldLooseBase(this,S)[S]===e){return}babelHelpers.classPrivateFieldLooseBase(this,S)[S]=e;a.sendData({event:i.openTab,tool:n.im,category:l.messenger,type:e})}onUseCopilotAudioInput(){a.sendData({event:i.audioUse,tool:n.ai,category:l.chatOperations,c_section:p.copilotTab})}onOpenCheckInPopup(){a.sendData({event:i.popupOpen,tool:n.checkin,category:l.shift,c_section:p.chat})}onOpenPriceTable(e){a.sendData({tool:n.infoHelper,category:l.limit,event:i.openPrices,type:e,c_section:p.chat})}onOpenToolsSettings(e){a.sendData({tool:n.infoHelper,category:l.toolOff,event:i.openSettings,type:e,c_section:p.chat})}onStartCreateNewChat(e){const t=o.Core.getStore().getters["application/getLayout"].name;a.sendData({tool:n.im,category:y(e),event:i.clickCreateNew,type:e,c_section:`${t}_tab`})}onCreateChat(e){babelHelpers.classPrivateFieldLooseBase(this,k)[k].add(e)}onOpenChat(e){if(babelHelpers.classPrivateFieldLooseBase(this,k)[k].has(e.dialogId)){babelHelpers.classPrivateFieldLooseBase(this,k)[k].delete(e.dialogId);return}const t=m(e);if(t===c.ChatType.copilot){this.onOpenCopilotChat(e.dialogId)}const s=o.Core.getStore().getters["application/getLayout"].name;const l=e.role===c.UserRole.guest?"N":"Y";const r={tool:n.im,category:y(t),event:i.openExisting,type:t,c_section:`${s}_tab`,p3:`isMember_${l}`,p5:`chatId_${e.chatId}`};if(t===c.ChatType.comment){const t=o.Core.getStore().getters["chats/getByChatId"](e.parentChatId);r.p1=`chatType_${t.type}`;r.p4=`parentChatId_${e.parentChatId}`}a.sendData(r)}onOpenChatEditForm(e){const t=o.Core.getStore().getters["chats/get"](e);a.sendData({tool:n.im,category:y(t.type),event:i.clickEdit,c_section:p.sidebar,c_sub_section:d.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onSubmitChatEditForm(e){babelHelpers.classPrivateFieldLooseBase(this,k)[k].add(e);const t=o.Core.getStore().getters["chats/get"](e);a.sendData({tool:n.im,category:y(t.type),event:i.submitEdit,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onCancelChatEditForm(e){babelHelpers.classPrivateFieldLooseBase(this,k)[k].add(e)}onStartCallClick(e){a.sendData({tool:n.im,category:l.messenger,event:i.clickCallButton,type:e.type,c_section:e.section,c_sub_section:e.subSection,c_element:e.element,p5:`chatId_${e.chatId}`})}onStartConferenceClick(e){a.sendData({tool:n.im,category:l.call,event:i.clickStartConf,type:r.videoconf,c_section:p.chatWindow,c_element:e.element,p5:`chatId_${e.chatId}`})}onJoinConferenceClick(e){a.sendData({tool:n.im,category:l.call,event:i.clickJoin,type:r.videoconf,c_section:p.chatList,p5:`callId_${e.callId}`})}}Object.defineProperty(T,D,{writable:true,value:void 0});T.AnalyticsType=r;T.AnalyticsSection=p;T.AnalyticsSubSection=d;T.AnalyticsElement=h;e.Analytics=T})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Lib,BX.UI.Analytics,BX.Messenger.v2.Application,BX.Messenger.v2.Const);
//# sourceMappingURL=analytics.bundle.map.js