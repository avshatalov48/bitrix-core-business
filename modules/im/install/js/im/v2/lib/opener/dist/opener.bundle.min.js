this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,n,s,a,r,i,o,l,g,c){"use strict";const d={async openChat(e=""){const s=e.toString();if(l.Utils.dialog.isLinesExternalId(s)){return this.openLines(s)}await g.MessengerSlider.getInstance().openSlider();await r.LayoutManager.getInstance().setLayout({name:n.Layout.chat.name,entityId:s});t.EventEmitter.emit(n.EventType.layout.onOpenChat,{dialogId:s});return Promise.resolve()},async openLines(e=""){let t=e.toString();if(l.Utils.dialog.isLinesExternalId(t)){const e=new c.LinesService;t=await e.getDialogIdByUserCode(t)}await g.MessengerSlider.getInstance().openSlider();return r.LayoutManager.getInstance().setLayout({name:n.Layout.openlines.name,entityId:t})},async openCopilot(e=""){const t=e.toString();await g.MessengerSlider.getInstance().openSlider();return r.LayoutManager.getInstance().setLayout({name:n.Layout.copilot.name,entityId:t})},openHistory(e=""){if(l.Utils.dialog.isDialogId(e)){return this.openChat(e)}if(!p(e)){return Promise.reject()}const t=L(e);BX.SidePanel.Instance.open(t,{width:l.Utils.dialog.isLinesExternalId(e)?700:1e3,allowChangeHistory:false,allowChangeTitle:false,cacheable:false});return Promise.resolve()},async openNotifications(){await g.MessengerSlider.getInstance().openSlider();await r.LayoutManager.getInstance().setLayout({name:n.Layout.notification.name});t.EventEmitter.emit(n.EventType.layout.onOpenNotifications);return Promise.resolve()},async openRecentSearch(){await g.MessengerSlider.getInstance().openSlider();await r.LayoutManager.getInstance().setLayout({name:n.Layout.chat.name});t.EventEmitter.emit(n.EventType.recent.openSearch);return Promise.resolve()},async openSettings(e){i.Logger.warn("Slider: openSettings",e);await g.MessengerSlider.getInstance().openSlider();await r.LayoutManager.getInstance().setLayout({name:n.Layout.settings.name,entityId:e});return Promise.resolve()},openConference(e=""){i.Logger.warn("Slider: openConference",e);if(!l.Utils.conference.isValidCode(e)){return Promise.reject()}const t=l.Utils.conference.getUrlByCode(e);l.Utils.browser.openLink(t,l.Utils.conference.getWindowNameByCode(e));return Promise.resolve()},startVideoCall(e="",t=true){i.Logger.warn("Slider: onStartVideoCall",e,t);if(!l.Utils.dialog.isDialogId(e)){i.Logger.error("Slider: onStartVideoCall - dialogId is not correct",e);return false}s.CallManager.getInstance().startCall(e,t);return Promise.resolve()},startPhoneCall(e,t){i.Logger.warn("Slider: startPhoneCall",e,t);void o.PhoneManager.getInstance().startCall(e,t);return Promise.resolve()},startCallList(e,t){i.Logger.warn("Slider: startCallList",e,t);o.PhoneManager.getInstance().startCallList(e,t);return Promise.resolve()},openNewTab(e){if(a.DesktopApi.isChatTab()&&a.DesktopApi.isFeatureSupported(a.DesktopFeature.openNewTab)){a.DesktopApi.createImTab(`${e}&${n.GetParameter.desktopChatTabMode}=Y`)}else{l.Utils.browser.openLink(e)}}};const p=e=>l.Utils.dialog.isLinesHistoryId(e)||l.Utils.dialog.isLinesExternalId(e);const L=e=>{const t=new URLSearchParams({[n.GetParameter.openHistory]:e,[n.GetParameter.backgroundType]:"light"});return`/desktop_app/history.php?${t.toString()}`};e.Opener=d})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Event,BX.Messenger.v2.Const,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Lib,BX.Messenger.v2.Provider.Service);
//# sourceMappingURL=opener.bundle.map.js