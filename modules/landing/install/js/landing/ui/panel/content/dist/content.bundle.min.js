this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};this.BX.Landing.UI=this.BX.Landing.UI||{};(function(e,t,n){"use strict";function i(e){var t=e.deltaX;var i=-1*e.deltaY;if(n.Type.isUndefined(t)||n.Type.isUndefined(i)){t=-1*e.wheelDeltaX/6;i=e.wheelDeltaY/6}if(e.deltaMode===1){t*=10;i*=10}if(Number.isNaN(t)&&Number.isNaN(i)){t=0;i=e.wheelDelta}return{x:t,y:i}}function a(e){var t=300;return Math.min(400/500*e,t)}function o(e,t){return new Promise(function(i){var o=0;var s=0;if(t){var l=20;var r=Math.max(parseInt(n.Dom.style(t,"margin-top")),l);var u=e.scrollTop;if(!(e instanceof HTMLIFrameElement)){o=t.offsetTop-(e.offsetTop||0)-r}else{u=e.contentWindow.scrollY;o=BX.pos(t).top-r-100}s=a(Math.abs(o-u));var d=Math.max(u,0);var c=Math.max(o,0);if(d!==c){new BX.easing({duration:s,start:{scrollTop:d},finish:{scrollTop:c},step:function t(n){if(!(e instanceof HTMLIFrameElement)){e.scrollTop=n.scrollTop}else{e.contentWindow.scrollTo(0,Math.max(n.scrollTop,0))}}}).animate();setTimeout(i,s)}else{i()}}else{i()}})}function s(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t\t<div class="landing-ui-panel-content-subtitle">',"</div>\n\t\t\t"]);s=function t(){return e};return e}function l(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-element landing-ui-panel-content-footer"></div>\n\t\t']);l=function t(){return e};return e}function r(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-body-content"></div>\n\t\t']);r=function t(){return e};return e}function u(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-body-sidebar"></div>\n\t\t']);u=function t(){return e};return e}function d(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-element landing-ui-panel-content-body"></div>\n\t\t']);d=function t(){return e};return e}function c(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-title"></div>\n\t\t']);c=function t(){return e};return e}function h(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-element landing-ui-panel-content-header"></div>\n\t\t']);h=function t(){return e};return e}function v(){var e=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div class="landing-ui-panel-content-overlay landing-ui-hide" data-is-shown="false" hidden></div>\n\t\t']);v=function t(){return e};return e}var f=function(e){babelHelpers.inherits(t,e);babelHelpers.createClass(t,null,[{key:"createOverlay",value:function e(){return n.Tag.render(v())}},{key:"createHeader",value:function e(){return n.Tag.render(h())}},{key:"createTitle",value:function e(){return n.Tag.render(c())}},{key:"createBody",value:function e(){return n.Tag.render(d())}},{key:"createSidebar",value:function e(){return n.Tag.render(u())}},{key:"createContent",value:function e(){return n.Tag.render(r())}},{key:"createFooter",value:function e(){return n.Tag.render(l())}},{key:"calculateTransitionDuration",value:function e(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;return a(t)}},{key:"scrollTo",value:function e(t,n){return o(t,n)}},{key:"getDeltaFromEvent",value:function e(t){return i(t)}}]);function t(e){var i;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};babelHelpers.classCallCheck(this,t);i=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,e,a));n.Dom.addClass(i.layout,"landing-ui-panel-content");i.data=Object.freeze(a);i.overlay=t.createOverlay();i.header=t.createHeader();i.title=t.createTitle();i.body=t.createBody();i.footer=t.createFooter();i.sidebar=t.createSidebar();i.content=t.createContent();i.closeButton=new BX.Landing.UI.Button.BaseButton("close",{className:"landing-ui-panel-content-close",onClick:function e(){void i.hide();i.emit("onCancel")},attrs:{title:BX.Landing.Loc.getMessage("LANDING_TITLE_OF_SLIDER_CLOSE")}});i.forms=new BX.Landing.UI.Collection.FormCollection;i.buttons=new BX.Landing.UI.Collection.ButtonCollection;i.sidebarButtons=new BX.Landing.UI.Collection.ButtonCollection;i.wheelEventName=n.Type.isNil(window.onwheel)?window.onwheel:window.onmousewheel;i.onMouseWheel=i.onMouseWheel.bind(babelHelpers.assertThisInitialized(i));i.onMouseEnter=i.onMouseEnter.bind(babelHelpers.assertThisInitialized(i));i.onMouseLeave=i.onMouseLeave.bind(babelHelpers.assertThisInitialized(i));n.Dom.removeClass(i.layout,"landing-ui-hide");n.Dom.addClass(i.overlay,"landing-ui-hide");n.Dom.append(i.sidebar,i.body);n.Dom.append(i.content,i.body);n.Dom.append(i.header,i.layout);n.Dom.append(i.title,i.header);n.Dom.append(i.body,i.layout);n.Dom.append(i.footer,i.layout);n.Dom.append(i.closeButton.layout,i.layout);if(n.Type.isString(a.className)){n.Dom.addClass(i.layout,[a.className,"".concat(a.className,"-overlay")])}if(n.Type.isString(a.subTitle)&&a.subTitle!==""){i.subTitle=n.Tag.render(s(),a.subTitle);n.Dom.append(i.subTitle,i.header);n.Dom.addClass(i.layout,"landing-ui-panel-content-with-subtitle")}i.init();n.Event.bind(window.top,"keydown",i.onKeyDown.bind(babelHelpers.assertThisInitialized(i)));BX.Landing.PageObject.getInstance().view().then(function(e){void(!!e&&n.Event.bind(e.contentWindow,"keydown",i.onKeyDown.bind(babelHelpers.assertThisInitialized(i))))},console.warn);if(i.data.scrollAnimation){i.scrollObserver=new IntersectionObserver(i.onIntersecting.bind(babelHelpers.assertThisInitialized(i)))}return i}babelHelpers.createClass(t,[{key:"init",value:function e(){var t=this;n.Dom.append(this.overlay,document.body);n.Event.bind(this.overlay,"click",function(){t.emit("onCancel");void t.hide()});n.Event.bind(this.layout,"mouseenter",this.onMouseEnter);n.Event.bind(this.layout,"mouseleave",this.onMouseLeave);n.Event.bind(this.content,"mouseenter",this.onMouseEnter);n.Event.bind(this.content,"mouseleave",this.onMouseLeave);n.Event.bind(this.sidebar,"mouseenter",this.onMouseEnter);n.Event.bind(this.sidebar,"mouseleave",this.onMouseLeave);n.Event.bind(this.header,"mouseenter",this.onMouseEnter);n.Event.bind(this.header,"mouseleave",this.onMouseLeave);n.Event.bind(this.footer,"mouseenter",this.onMouseEnter);n.Event.bind(this.footer,"mouseleave",this.onMouseLeave);if("title"in this.data){this.setTitle(this.data.title)}if("footer"in this.data){if(n.Type.isArray(this.data.footer)){this.data.footer.forEach(function(e){if(e instanceof BX.Landing.UI.Button.BaseButton){t.appendFooterButton(e)}if(n.Type.isDomNode(e)){n.Dom.append(e,t.footer)}})}}}},{key:"onIntersecting",value:function e(t){t.forEach(function(e){if(e.isIntersecting){n.Dom.removeClass(e.target,"landing-ui-is-not-visible");n.Dom.addClass(e.target,"landing-ui-is-visible")}else{n.Dom.addClass(e.target,"landing-ui-is-not-visible");n.Dom.removeClass(e.target,"landing-ui-is-visible")}})}},{key:"onKeyDown",value:function e(t){if(t.keyCode===27){this.emit("onCancel");void this.hide()}}},{key:"onMouseEnter",value:function e(t){t.stopPropagation();n.Event.bind(this.layout,this.wheelEventName,this.onMouseWheel);n.Event.bind(this.layout,"touchmove",this.onMouseWheel);if(this.sidebar.contains(t.target)||this.content.contains(t.target)||this.header.contains(t.target)||this.footer.contains(t.target)||this.right&&this.right.contains(t.target)){this.scrollTarget=t.currentTarget}}},{key:"onMouseLeave",value:function e(t){t.stopPropagation();BX.unbind(this.layout,this.wheelEventName,this.onMouseWheel);BX.unbind(this.layout,"touchmove",this.onMouseWheel)}},{key:"onMouseWheel",value:function e(n){var i=this;n.preventDefault();n.stopPropagation();var a=t.getDeltaFromEvent(n);var o=this.scrollTarget.scrollTop;requestAnimationFrame(function(){i.scrollTarget.scrollTop=o-a.y})}},{key:"scrollTo",value:function e(n){void t.scrollTo(this.content,n)}},{key:"isShown",value:function e(){return this.state==="shown"}},{key:"show",value:function e(t){var n=this;if(!this.isShown()){void BX.Landing.Utils.Show(this.overlay);return BX.Landing.Utils.Show(this.layout).then(function(){n.state="shown"})}return Promise.resolve(true)}},{key:"hide",value:function e(){var t=this;if(this.isShown()){void BX.Landing.Utils.Hide(this.overlay);return BX.Landing.Utils.Hide(this.layout).then(function(){t.state="hidden"})}return Promise.resolve(true)}},{key:"appendForm",value:function e(t){this.forms.add(t);n.Dom.append(t.getNode(),this.content)}},{key:"appendCard",value:function e(t){if(this.data.scrollAnimation){n.Dom.addClass(t.layout,"landing-ui-is-not-visible");this.scrollObserver.observe(t.layout)}n.Dom.append(t.layout,this.content)}},{key:"clear",value:function e(){this.clearContent();this.clearSidebar();this.forms.clear()}},{key:"clearContent",value:function e(){n.Dom.clean(this.content)}},{key:"clearSidebar",value:function e(){n.Dom.clean(this.sidebar)}},{key:"setTitle",value:function e(t){this.title.innerHTML=t}},{key:"appendFooterButton",value:function e(t){this.buttons.add(t);n.Dom.append(t.layout,this.footer)}},{key:"appendSidebarButton",value:function e(t){this.sidebarButtons.add(t);n.Dom.append(t.layout,this.sidebar)}}]);return t}(t.BasePanel);e.Content=f})(this.BX.Landing.UI.Panel=this.BX.Landing.UI.Panel||{},BX.Landing.UI.Panel,BX);
//# sourceMappingURL=content.bundle.map.js