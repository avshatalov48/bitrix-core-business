this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};this.BX.Messenger.v2=this.BX.Messenger.v2||{};(function(e,t,a,c,o){"use strict";const s=Object.freeze({private:"chatType_private",multiuser:"chatType_multiuser"});const n=Object.freeze({openMessenger:"open_messenger",openChat:"open_chat",createNewChat:"create_new_chat",audioUse:"audio_use",openTab:"open_tab",popupOpen:"popup_open",openPrices:"open_prices",openSettings:"open_settings",clickCreateNew:"click_create_new",openExisting:"open_existing",clickDelete:"click_delete",cancelDelete:"cancel_delete",delete:"delete",view:"view",click:"click",clickEdit:"click_edit",submitEdit:"submit_edit",clickCallButton:"click_call_button",clickStartConf:"click_start_conf",clickJoin:"click_join",clickAddUser:"click_add_user",openCalendar:"open_calendar",openTasks:"open_tasks",openFiles:"open_files",clickCreateTask:"click_create_task",clickCreateEvent:"click_create_event",clickAttach:"click_attach"});const i=Object.freeze({ai:"ai",checkin:"checkin",im:"im",infoHelper:"InfoHelper"});const r=Object.freeze({chatOperations:"chat_operations",shift:"shift",messenger:"messenger",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",limit:"limit",limitBanner:"limit_banner",toolOff:"tool_off",message:"message",chatPopup:"chat_popup",call:"call",collab:"collab"});const l=Object.freeze({ai:"ai",chat:"chat",channel:"channel",videoconf:"videoconf",copilot:"copilot",deletedMessage:"deleted_message",limitOfficeChatingHistory:"limit_office_chating_history",privateCall:"private",groupCall:"group"});const p=Object.freeze({copilotTab:"copilot_tab",chat:"chat",chatStart:"chat_start",chatHistory:"chat_history",sidebar:"sidebar",popup:"popup",activeChat:"active_chat",comments:"comments",chatHeader:"chat_header",chatSidebar:"chat_sidebar",chatTextarea:"chat_textarea",editor:"editor"});const d=Object.freeze({contextMenu:"context_menu",sidebar:"sidebar",chatWindow:"chat_window",messageLink:"message_link",chatSidebar:"chat_sidebar",chatList:"chat_list",window:"window"});const h=Object.freeze({initialBanner:"initial_banner",videocall:"videocall",audiocall:"audiocall",startButton:"start_button"});const g=Object.freeze({success:"success",errorTurnedOff:"error_turnedoff"});const b=Object.freeze({collabEmptyState:"collab_empty_state"});function y(e){const t=o.Core.getStore().getters["chats/collabs/getByChatId"](e);if(!t){return null}return`collabId_${t.collabId}`}const u=Object.freeze({userIntranet:"user_intranet",userExtranet:"user_extranet",userCollaber:"user_collaber"});function _(){const e=o.Core.getStore().getters["users/get"](o.Core.getUserId(),true);switch(e.type){case c.UserType.user:return u.userIntranet;case c.UserType.extranet:return u.userExtranet;case c.UserType.collaber:return u.userCollaber;default:return u.userIntranet}}function C(e){switch(e){case c.ChatType.channel:case c.ChatType.openChannel:case c.ChatType.comment:case c.ChatType.generalChannel:return r.channel;case c.ChatType.copilot:return r.copilot;case c.ChatType.videoconf:return r.videoconf;case c.ChatType.collab:return r.collab;default:return r.chat}}const m="custom";function v(e){var t;return(t=c.ChatType[e.type])!=null?t:m}const f={[c.CollabEntityType.tasks]:n.openTasks,[c.CollabEntityType.calendar]:n.openCalendar,[c.CollabEntityType.files]:n.openFiles};class I{onClick(e,t){const s=f[t];if(!s){return}const n=o.Core.getStore().getters["chats/get"](e,true);const l={tool:i.im,category:r.collab,event:s,c_section:p.chatHeader,p2:_(),p5:`chatId_${n.chatId}`};if(n.type===c.ChatType.collab){l.p4=y(n.chatId)}a.sendData(l)}}var k=babelHelpers.classPrivateFieldLooseKey("onClick");class T{constructor(){Object.defineProperty(this,k,{value:S})}onCreateTaskFromSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,k)[k]({dialogId:e,event:n.clickCreateTask,section:p.chatSidebar})}onCreateTaskFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,k)[k]({dialogId:e,event:n.clickCreateTask,section:p.chatTextarea})}onCreateEventFromSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,k)[k]({dialogId:e,event:n.clickCreateEvent,section:p.chatSidebar})}onCreateEventFromTextareaClick(e){babelHelpers.classPrivateFieldLooseBase(this,k)[k]({dialogId:e,event:n.clickCreateEvent,section:p.chatTextarea})}}function S({dialogId:e,event:t,section:s}){const n=o.Core.getStore().getters["chats/get"](e,true);const r={tool:i.im,category:C(n.type),event:t,c_section:s,p1:`chatType_${v(n)}`,p2:_(),p5:`chatId_${n.chatId}`};if(n.type===c.ChatType.collab){r.p4=y(n.chatId)}a.sendData(r)}class B{onClick(e){const t=o.Core.getStore().getters["chats/get"](e);a.sendData({tool:i.im,category:C(t.type),event:n.clickDelete,type:v(t),c_section:p.sidebar,c_sub_section:d.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onCancel(e){const t=o.Core.getStore().getters["chats/get"](e);a.sendData({tool:i.im,category:C(t.type),event:n.cancelDelete,type:v(t),c_section:p.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onConfirm(e){const t=o.Core.getStore().getters["chats/get"](e);a.sendData({tool:i.im,category:C(t.type),event:n.delete,type:v(t),c_section:p.popup,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onChatDeletedNotification(e){const t=o.Core.getStore().getters["chats/get"](e);const c=C(t);a.sendData({tool:i.im,category:r.chatPopup,event:n.view,type:`deleted_${c}`,c_section:p.activeChat,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}}class D{onClickDelete({messageId:e,dialogId:c}){const s=o.Core.getStore().getters["messages/getById"](e);const l=new t.MessageComponentManager(s).getName();const p=o.Core.getStore().getters["chats/get"](c);a.sendData({tool:i.im,category:r.message,event:n.clickDelete,type:l,c_sub_section:d.contextMenu,p1:`chatType_${p.type}`,p5:`chatId_${p.chatId}`})}onCancel({messageId:e,dialogId:c}){const s=o.Core.getStore().getters["messages/getById"](e);const l=new t.MessageComponentManager(s).getName();const h=o.Core.getStore().getters["chats/get"](c);a.sendData({tool:i.im,category:r.message,event:n.cancelDelete,type:l,c_section:p.popup,c_sub_section:d.contextMenu,p1:`chatType_${h.type}`,p5:`chatId_${h.chatId}`})}onNotFoundNotification({dialogId:e}){const t=o.Core.getStore().getters["chats/get"](e);a.sendData({tool:i.im,category:r.chatPopup,event:n.view,type:l.deletedMessage,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`})}onDeletedPostNotification({messageId:e,dialogId:t}){const c=o.Core.getStore().getters["chats/get"](t);const s=o.Core.getStore().getters["messages/comments/getByMessageId"](e);a.sendData({tool:i.im,category:r.chatPopup,event:n.view,type:l.deletedMessage,c_section:p.comments,p1:`chatType_${c.type}`,p4:`parentChatId_${c.chatId}`,p5:`chatId_${s.chatId}`})}}var L=babelHelpers.classPrivateFieldLooseKey("onBannerClick");var w=babelHelpers.classPrivateFieldLooseKey("getSidebarPanelNameForAnalytics");class O{constructor(){Object.defineProperty(this,w,{value:H});Object.defineProperty(this,L,{value:P})}onDialogLimitExceeded({dialogId:e,noMessages:t}){const c=t?p.chatStart:p.chatHistory;const s=o.Core.getStore().getters["chats/get"](e);const d=v(s);const h={tool:i.im,category:r.limitBanner,event:n.view,type:l.limitOfficeChatingHistory,c_section:c,p1:`chatType_${d}`};a.sendData(h)}onSidebarLimitExceeded({dialogId:e,panel:t}){const c=o.Core.getStore().getters["chats/get"](e);const s=v(c);const d={tool:i.im,category:r.limitBanner,event:n.view,type:l.limitOfficeChatingHistory,c_section:p.sidebar,c_element:babelHelpers.classPrivateFieldLooseBase(this,w)[w](t),p1:`chatType_${s}`};a.sendData(d)}onDialogBannerClick({dialogId:e}){const t=p.chatWindow;babelHelpers.classPrivateFieldLooseBase(this,L)[L]({dialogId:e,section:t})}onSidebarBannerClick({dialogId:e,panel:t}){const a=p.sidebar;const c=babelHelpers.classPrivateFieldLooseBase(this,w)[w](t);babelHelpers.classPrivateFieldLooseBase(this,L)[L]({dialogId:e,section:a,element:c})}onGoToContextLimitExceeded({dialogId:e}){const t=p.messageLink;babelHelpers.classPrivateFieldLooseBase(this,L)[L]({dialogId:e,section:t})}}function P({dialogId:e,section:t,element:c}){const s=o.Core.getStore().getters["chats/get"](e);const p=v(s);const d={tool:i.im,category:r.limitBanner,event:n.click,type:l.limitOfficeChatingHistory,c_section:t,p1:`chatType_${p}`};if(c){d.c_element=c}a.sendData(d)}function H(e){switch(e){case c.SidebarDetailBlock.main:return"main";case c.SidebarDetailBlock.file:case c.SidebarDetailBlock.fileUnsorted:case c.SidebarDetailBlock.audio:case c.SidebarDetailBlock.brief:case c.SidebarDetailBlock.document:case c.SidebarDetailBlock.media:case c.SidebarDetailBlock.other:return"docs";case c.SidebarDetailBlock.messageSearch:return"message_search";case c.SidebarDetailBlock.favorite:return"favs";case c.SidebarDetailBlock.link:return"links";case c.SidebarDetailBlock.task:return"task";case c.SidebarDetailBlock.meeting:return"event";default:return"unknown"}}var $=babelHelpers.classPrivateFieldLooseKey("onAddUserClick");class F{constructor(){Object.defineProperty(this,$,{value:M})}onChatSidebarClick(e){babelHelpers.classPrivateFieldLooseBase(this,$)[$](e,p.chatSidebar)}onChatHeaderClick(e){babelHelpers.classPrivateFieldLooseBase(this,$)[$](e,p.chatHeader)}}function M(e,t){const s=o.Core.getStore().getters["chats/get"](e,true);const r={tool:i.im,category:C(s.type),event:n.clickAddUser,c_section:t,p2:_(),p5:`chatId_${s.chatId}`};if(s.type===c.ChatType.collab){r.p4=y(s.chatId)}a.sendData(r)}class x{onOpenForm(e){const t=o.Core.getStore().getters["chats/get"](e);const s={tool:i.im,category:C(t.type),event:n.clickEdit,c_section:p.sidebar,c_sub_section:d.contextMenu,p1:`chatType_${t.type}`,p5:`chatId_${t.chatId}`};if(t.type===c.ChatType.collab){s.p4=y(t.chatId)}a.sendData(s)}onSubmitForm(e){const t=o.Core.getStore().getters["chats/get"](e);const s={tool:i.im,category:C(t.type),c_section:p.editor,event:n.submitEdit,p1:`chatType_${t.type}`,p2:_(),p5:`chatId_${t.chatId}`};if(t.type===c.ChatType.collab){s.p4=y(t.chatId)}a.sendData(s)}}class E{onStartClick(e){const t=o.Core.getStore().getters["application/getLayout"].name;a.sendData({tool:i.im,category:C(e),event:n.clickCreateNew,type:e,c_section:`${t}_tab`,p2:_()})}onCollabEmptyStateCreateClick(){a.sendData({tool:i.im,category:C(c.ChatType.collab),event:n.clickCreateNew,type:c.ChatType.collab,c_section:b.collabEmptyState,p2:_()})}}class j{onOpenPriceTable(e){a.sendData({tool:i.infoHelper,category:r.limit,event:n.openPrices,type:e,c_section:p.chat})}onOpenToolsSettings(e){a.sendData({tool:i.infoHelper,category:r.toolOff,event:n.openSettings,type:e,c_section:p.chat})}}class U{onOpenCheckInPopup(){a.sendData({event:n.popupOpen,tool:i.checkin,category:r.shift,c_section:p.chat})}}class N{onCreateChat(e){a.sendData({event:n.createNewChat,tool:i.ai,category:r.chatOperations,c_section:p.copilotTab,type:l.ai,p3:s.private,p5:`chatId_${e}`})}onOpenChat(e){const t=o.Core.getStore().getters["chats/get"](e);const c=t.userCounter<=2?s.private:s.multiuser;a.sendData({event:n.openChat,tool:i.ai,category:r.chatOperations,c_section:p.copilotTab,type:l.ai,p3:c,p5:`chatId_${t.chatId}`})}onOpenTab({isAvailable:e=true}={}){const t={event:n.openTab,tool:i.ai,category:r.chatOperations,c_section:p.copilotTab,status:e?g.success:g.errorTurnedOff};a.sendData(t)}onUseAudioInput(){a.sendData({event:n.audioUse,tool:i.ai,category:r.chatOperations,c_section:p.copilotTab})}}class A{onOpenUploadMenu(e){const t=o.Core.getStore().getters["chats/get"](e);const s=v(t);const r={tool:i.im,category:C(t.type),event:n.clickAttach,c_section:p.chatTextarea,p1:`chatType_${s}`,p2:_(),p5:`chatId_${t.chatId}`};if(t.type===c.ChatType.collab){r.p4=y(t.chatId)}a.sendData(r)}}var X=babelHelpers.classPrivateFieldLooseKey("excludedChats");var z=babelHelpers.classPrivateFieldLooseKey("currentTab");var K=babelHelpers.classPrivateFieldLooseKey("instance");class W{constructor(){Object.defineProperty(this,X,{writable:true,value:new Set});Object.defineProperty(this,z,{writable:true,value:c.Layout.chat.name});this.chatCreate=new E;this.chatEdit=new x;this.chatDelete=new B;this.messageDelete=new D;this.historyLimit=new O;this.userAdd=new F;this.collabEntities=new I;this.chatEntities=new T;this.supervisor=new j;this.checkIn=new U;this.copilot=new N;this.attachMenu=new A}static getInstance(){if(!babelHelpers.classPrivateFieldLooseBase(this,K)[K]){babelHelpers.classPrivateFieldLooseBase(this,K)[K]=new this}return babelHelpers.classPrivateFieldLooseBase(this,K)[K]}ignoreNextChatOpen(e){babelHelpers.classPrivateFieldLooseBase(this,X)[X].add(e)}onOpenMessenger(){a.sendData({event:n.openMessenger,tool:i.im,category:r.messenger})}onOpenTab(e){const t=[c.Layout.chat.name,c.Layout.copilot.name,c.Layout.collab.name,c.Layout.channel.name,c.Layout.notification.name,c.Layout.settings.name,c.Layout.openlines.name];if(!t.includes(e)){return}if(babelHelpers.classPrivateFieldLooseBase(this,z)[z]===e){return}babelHelpers.classPrivateFieldLooseBase(this,z)[z]=e;a.sendData({event:n.openTab,tool:i.im,category:r.messenger,type:e,p2:_()})}onOpenChat(e){if(babelHelpers.classPrivateFieldLooseBase(this,X)[X].has(e.dialogId)){babelHelpers.classPrivateFieldLooseBase(this,X)[X].delete(e.dialogId);return}const t=v(e);if(t===c.ChatType.copilot){this.copilot.onOpenChat(e.dialogId)}const s=o.Core.getStore().getters["application/getLayout"].name;const r=e.role===c.UserRole.guest?"N":"Y";const l={tool:i.im,category:C(t),event:n.openExisting,type:t,c_section:`${s}_tab`,p2:_(),p3:`isMember_${r}`,p5:`chatId_${e.chatId}`};if(t===c.ChatType.comment){const t=o.Core.getStore().getters["chats/getByChatId"](e.parentChatId);l.p1=`chatType_${t.type}`;l.p4=`parentChatId_${e.parentChatId}`}if(t===c.ChatType.collab){l.p4=y(e.chatId)}a.sendData(l)}}Object.defineProperty(W,K,{writable:true,value:void 0});e.Analytics=W;e.CreateChatContext=b;e.getCollabId=y;e.getUserType=_})(this.BX.Messenger.v2.Lib=this.BX.Messenger.v2.Lib||{},BX.Messenger.v2.Lib,BX.UI.Analytics,BX.Messenger.v2.Const,BX.Messenger.v2.Application);
//# sourceMappingURL=analytics.bundle.map.js