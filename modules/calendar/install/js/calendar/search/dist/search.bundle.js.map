{"version":3,"file":"search.bundle.js","sources":["../src/search.js"],"sourcesContent":["import { Util } from 'calendar.util';\nimport { EventEmitter } from 'main.core.events';\nimport { Tag, Loc } from 'main.core';\nimport { Popup } from 'main.popup';\n\nexport class Search\n{\n\tPRESET_INVITED = 'filter_calendar_meeting_status_q';\n\tEMPTY_RESULT_POPUP_WIDTH = 466;\n\tMIN_QUERY_LENGTH = 3;\n\tSHOW_LOADER_DELAY = 500;\n\tMIN_LOADER_DURATION = 1000;\n\n\tconstructor(filterId)\n\t{\n\t\tthis.BX = BX; // for calendar in slider\n\t\tthis.filterId = filterId;\n\t\tthis.filter = this.BX.Main.filterManager.getById(this.filterId);\n\t\tthis.filterApi = this.filter.getApi();\n\t\tthis.isActive = false;\n\t\tthis.isInvitationEnabled = false;\n\n\t\tthis.DOM = {\n\t\t\tfilterWrap: this.filter.popupBindElement,\n\t\t\tfilterInput: this.filter.popupBindElement.querySelector('input'),\n\t\t};\n\n\t\tthis.updateActive();\n\n\t\tthis.DOM.filterInput.removeEventListener('input', this.updateActive.bind(this));\n\t\tthis.DOM.filterInput.addEventListener('input', this.updateActive.bind(this));\n\n\t\tEventEmitter.unsubscribe('BX.Filter.Search:input', this.updateActive.bind(this));\n\t\tEventEmitter.unsubscribe('BX.Main.Filter:beforeApply', this.beforeApplyFilterHandler.bind(this));\n\t\tEventEmitter.unsubscribe('BX.Main.Filter:apply', this.applyFilterHandler.bind(this));\n\n\t\tEventEmitter.subscribe('BX.Filter.Search:input', this.updateActive.bind(this));\n\t\tEventEmitter.subscribe('BX.Main.Filter:beforeApply', this.beforeApplyFilterHandler.bind(this));\n\t\tEventEmitter.subscribe('BX.Main.Filter:apply', this.applyFilterHandler.bind(this));\n\t}\n\n\tgetFilter()\n\t{\n\t\treturn this.filter;\n\t}\n\n\tbeforeApplyFilterHandler()\n\t{\n\t\tconst calendarContext = Util.getCalendarContext();\n\n\t\tthis.filterDataLoaderStartTime = false;\n\t\tthis.filterDataRequestSent = true;\n\t\tclearTimeout(this.showLoaderTimeout);\n\t\tthis.showLoaderTimeout = setTimeout(() => {\n\t\t\tif (this.filterDataRequestSent)\n\t\t\t{\n\t\t\t\tthis.filterDataLoaderStartTime = (new Date()).getTime();\n\t\t\t\tcalendarContext.showLoader();\n\t\t\t}\n\t\t}, this.SHOW_LOADER_DELAY);\n\n\t\tthis.updateActive();\n\t}\n\n\tapplyFilterHandler()\n\t{\n\t\tthis.isInvitationEnabled = false;\n\t\tthis.applyFilter();\n\t}\n\n\tapplyFilter()\n\t{\n\t\tconst calendarContext = Util.getCalendarContext();\n\n\t\tif (this.isFilterEmpty())\n\t\t{\n\t\t\tif (calendarContext.getView().resetFilterMode)\n\t\t\t{\n\t\t\t\tcalendarContext.getView().resetFilterMode({resetSearchFilter: false});\n\t\t\t}\n\n\t\t\tthis.filterDataRequestSent = false;\n\t\t\tcalendarContext.hideLoader();\n\n\t\t\treturn;\n\t\t}\n\n\t\tBX.ajax.runAction('calendar.api.calendarajax.getFilterData', {\n\t\t\tdata: {\n\t\t\t\townerId: calendarContext.util.config.ownerId,\n\t\t\t\tuserId: calendarContext.util.config.userId,\n\t\t\t\ttype: calendarContext.util.config.type,\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tthis.filterDataRequestSent = false;\n\n\t\t\tif (this.filterDataLoaderStartTime)\n\t\t\t{\n\t\t\t\tconst timePassed = (new Date()).getTime() - this.filterDataLoaderStartTime;\n\t\t\t\tconst remainingTimeout = this.MIN_LOADER_DURATION - timePassed;\n\t\t\t\tif (remainingTimeout > 0)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tcalendarContext.hideLoader();\n\t\t\t\t\t\tthis.displaySearchResult(calendarContext, response.data.entries);\n\t\t\t\t\t}, remainingTimeout);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tcalendarContext.hideLoader();\n\t\t\t\t\tthis.displaySearchResult(calendarContext, response.data.entries);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.displaySearchResult(calendarContext, response.data.entries);\n\t\t\t}\n\t\t}, (error) => {\n\t\t\tconsole.error(error);\n\t\t\tcalendarContext.hideLoader();\n\t\t});\n\t}\n\n\tdisplaySearchResult(calendarContext, entries)\n\t{\n\t\tif (!entries)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.isInvitationPresetEnabled() && entries.length === 0)\n\t\t{\n\t\t\tthis.showEmptyResultPopup();\n\t\t\treturn;\n\t\t}\n\n\t\tcalendarContext.viewNameBeforeFilter = calendarContext.getView().name;\n\t\tif (calendarContext.getView().getViewRange)\n\t\t{\n\t\t\tcalendarContext.dateBeforeFilter = calendarContext.getView().getViewRange().start;\n\t\t}\n\n\t\tcalendarContext.setView('list', {animation: true});\n\t\tcalendarContext.getView().applyFilterMode();\n\t\tthis.displayFilterResult(entries);\n\t}\n\n\tdisplayFilterResult(filteredEntries)\n\t{\n\t\tconst calendarContext = Util.getCalendarContext();\n\t\tconst entries = [];\n\n\t\tfor (const entry of filteredEntries)\n\t\t{\n\t\t\tentries.push(new window.BXEventCalendar.Entry(calendarContext, entry));\n\t\t}\n\n\t\tcalendarContext.getView().displayResult(entries);\n\t}\n\n\tshowEmptyResultPopup()\n\t{\n\t\tconst popupWidth = this.EMPTY_RESULT_POPUP_WIDTH;\n\n\t\tif (!this.emptyResultPopup)\n\t\t{\n\t\t\tthis.emptyResultPopup = new Popup({\n\t\t\t\tclassName: 'calendar-search-no-result-popup',\n\t\t\t\tcontent: this.getEmptyResultPopupContent(),\n\t\t\t\tbindElement: this.DOM.filterWrap,\n\t\t\t\toffsetTop: 5,\n\t\t\t\toffsetLeft: (this.DOM.filterWrap.offsetWidth / 2) - popupWidth / 2,\n\t\t\t\twidth: popupWidth,\n\t\t\t\tcloseIcon: true,\n\t\t\t\toverlay: {\n\t\t\t\t\topacity: 0,\n\t\t\t\t},\n\t\t\t\tautoHide: true,\n\t\t\t\tcloseByEsc: true,\n\t\t\t\tanimation: \"fading-slide\",\n\t\t\t\tangle: {\n\t\t\t\t\tposition: 'top',\n\t\t\t\t\toffset: popupWidth / 2 - 10,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tthis.emptyResultPopup.show();\n\t}\n\n\tgetEmptyResultPopupContent()\n\t{\n\t\treturn Tag.render`<div class=\"calendar-search-no-result-popup-container\">\n\t\t\t<div class=\"calendar-search-no-result-popup-title\">${Loc.getMessage('EC_CALENDAR_EMPTY_SEARCH_RESULT_TITLE')}</div>\n\t\t\t<div class=\"calendar-search-no-result-popup-text\">${Loc.getMessage('EC_CALENDAR_EMPTY_SEARCH_RESULT_TEXT')}</div>\n\t\t</div>`;\n\t}\n\n\tisFilterEmpty()\n\t{\n\t\treturn this.arePresetsEmpty() && this.isSearchEmpty();\n\t}\n\n\tarePresetsEmpty()\n\t{\n\t\tconst searchField = this.filter.getSearch();\n\t\treturn !searchField.getLastSquare();\n\t}\n\n\tisSearchEmpty()\n\t{\n\t\tconst query = this.getSearchQuery();\n\t\treturn !query || query.length < this.MIN_QUERY_LENGTH;\n\t}\n\n\tgetSearchQuery()\n\t{\n\t\treturn this.filter.getSearch().getSearchString();\n\t}\n\n\tsetPresetInvitation()\n\t{\n\t\tthis.isInvitationEnabled = true;\n\t\tthis.filterApi.setFilter({preset_id: this.PRESET_INVITED});\n\t}\n\n\tresetPreset()\n\t{\n\t\tthis.filterApi.setFilter({preset_id: 'default_filter'});\n\t}\n\n\tresetFilter()\n\t{\n\t\tthis.filter.resetFilter();\n\t}\n\n\tisInvitationPresetEnabled()\n\t{\n\t\tconst filterFields = this.filter.getFilterFieldsValues();\n\t\treturn this.getFilterPreset() === this.PRESET_INVITED || filterFields.MEETING_STATUS === 'Q';\n\t}\n\n\tupdateActive()\n\t{\n\t\tif (this.emptyResultPopup)\n\t\t{\n\t\t\tthis.emptyResultPopup.close();\n\t\t}\n\n\t\tthis.setActive(this.isFilterActive());\n\t}\n\n\tisFilterActive()\n\t{\n\t\tif (this.isInvitationEnabled && !this.isActive)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst isPresetApplied = !['default_filter', 'tmp_filter'].includes(this.getFilterPreset());\n\t\tconst isSearchEmpty = this.filter.getSearch().getSearchString() === '';\n\t\treturn isPresetApplied || !isSearchEmpty || this.hasFilledFields();\n\t}\n\n\thasFilledFields()\n\t{\n\t\tconst fields = this.filter.getFilterFieldsValues();\n\t\tfor (const fieldName in fields)\n\t\t{\n\t\t\tconst field = fields[fieldName];\n\t\t\tconst isFieldFilled = this.isArrayFieldFilled(field) || this.isStringFieldFilled(field);\n\t\t\tif (isFieldFilled)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tisArrayFieldFilled(field)\n\t{\n\t\treturn BX.Type.isArrayFilled(field);\n\t}\n\n\tisStringFieldFilled(field)\n\t{\n\t\treturn field !== 'NONE' && BX.Type.isStringFilled(field);\n\t}\n\n\tgetFilterPreset()\n\t{\n\t\treturn this.filter.getPreset().getCurrentPresetId();\n\t}\n\n\tsetActive(isActive)\n\t{\n\t\tthis.isActive = isActive;\n\t\tif (this.isActive)\n\t\t{\n\t\t\tBX.removeClass(this.DOM.filterWrap, 'main-ui-filter-default-applied');\n\t\t\tBX.addClass(this.DOM.filterWrap, 'main-ui-filter-search--showed');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tBX.removeClass(this.DOM.filterWrap, 'main-ui-filter-search--showed');\n\t\t\tBX.addClass(this.DOM.filterWrap, 'main-ui-filter-default-applied');\n\t\t}\n\t}\n}"],"names":["Search","constructor","filterId","PRESET_INVITED","EMPTY_RESULT_POPUP_WIDTH","MIN_QUERY_LENGTH","SHOW_LOADER_DELAY","MIN_LOADER_DURATION","BX","filter","Main","filterManager","getById","filterApi","getApi","isActive","isInvitationEnabled","DOM","filterWrap","popupBindElement","filterInput","querySelector","updateActive","removeEventListener","bind","addEventListener","EventEmitter","unsubscribe","beforeApplyFilterHandler","applyFilterHandler","subscribe","getFilter","calendarContext","Util","getCalendarContext","filterDataLoaderStartTime","filterDataRequestSent","clearTimeout","showLoaderTimeout","setTimeout","Date","getTime","showLoader","applyFilter","isFilterEmpty","getView","resetFilterMode","resetSearchFilter","hideLoader","ajax","runAction","data","ownerId","util","config","userId","type","then","response","timePassed","remainingTimeout","displaySearchResult","entries","error","console","isInvitationPresetEnabled","length","showEmptyResultPopup","viewNameBeforeFilter","name","getViewRange","dateBeforeFilter","start","setView","animation","applyFilterMode","displayFilterResult","filteredEntries","entry","push","window","BXEventCalendar","Entry","displayResult","popupWidth","emptyResultPopup","Popup","className","content","getEmptyResultPopupContent","bindElement","offsetTop","offsetLeft","offsetWidth","width","closeIcon","overlay","opacity","autoHide","closeByEsc","angle","position","offset","show","Tag","render","Loc","getMessage","arePresetsEmpty","isSearchEmpty","searchField","getSearch","getLastSquare","query","getSearchQuery","getSearchString","setPresetInvitation","setFilter","preset_id","resetPreset","resetFilter","filterFields","getFilterFieldsValues","getFilterPreset","MEETING_STATUS","close","setActive","isFilterActive","isPresetApplied","includes","hasFilledFields","fields","fieldName","field","isFieldFilled","isArrayFieldFilled","isStringFieldFilled","Type","isArrayFilled","isStringFilled","getPreset","getCurrentPresetId","removeClass","addClass"],"mappings":"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"}