{"version":3,"file":"registry.bundle.js","sources":["../src/chat/header/components/call-button/types/call-types.js","../src/chat/header/components/call-button/classes/call-menu.js","../src/chat/header/components/call-button/call-button.js","../src/chat/header/components/entity-link/const/chat-type-params.js","../src/chat/header/components/entity-link/entity-link.js","../src/chat/header/components/title/group-chat.js","../src/chat/header/components/title/user.js","../src/chat/header/components/header-avatar.js","../src/chat/header/chat-header.js","../src/chat/base-content/const/size.js","../src/chat/base-content/components/drop-area.js","../src/chat/base-content/components/mute-panel.js","../src/chat/base-content/components/join-panel.js","../src/chat/base-content/components/loading-bar.js","../src/chat/base-content/utils/observer-directive.js","../src/chat/base-content/base-content.js"],"sourcesContent":["import { Core } from 'im.v2.application.core';\nimport { Messenger } from 'im.public';\nimport { CallManager } from 'im.v2.lib.call';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nexport const CallTypes = {\n\tvideo: {\n\t\tid: 'video',\n\t\tlocCode: 'IM_CONTENT_CHAT_HEADER_VIDEOCALL',\n\t\tstart: (dialogId: string) => {\n\t\t\tMessenger.startVideoCall(dialogId);\n\t\t},\n\t},\n\taudio: {\n\t\tid: 'audio',\n\t\tlocCode: 'IM_CONTENT_CHAT_HEADER_CALL_MENU_AUDIO',\n\t\tstart: (dialogId: string) => {\n\t\t\tMessenger.startVideoCall(dialogId, false);\n\t\t},\n\t},\n\tbeta: {\n\t\tid: 'beta',\n\t\tlocCode: 'IM_CONTENT_CHAT_HEADER_CALL_MENU_BETA_2',\n\t\tstart: (dialogId: string) => {\n\t\t\tconst dialog: ImModelChat = Core.getStore().getters['chats/get'](dialogId);\n\t\t\tCallManager.getInstance().createBetaCallRoom(dialog.chatId);\n\t\t},\n\t},\n};\n","import { Loc, Tag, Extension } from 'main.core';\n\nimport { Messenger } from 'im.public';\nimport { Core } from 'im.v2.application.core';\nimport { ChatActionType, ChatType, RestMethod } from 'im.v2.const';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { BaseMenu } from 'im.v2.lib.menu';\nimport { CallManager } from 'im.v2.lib.call';\nimport { runAction } from 'im.v2.lib.rest';\nimport { Feature, FeatureManager } from 'im.v2.lib.feature';\nimport { Analytics } from 'im.v2.lib.analytics';\n\nimport { CallTypes } from '../types/call-types';\n\nimport type { ImModelChat, ImModelUser } from 'im.v2.model';\nimport type { MenuItem } from 'im.v2.lib.menu';\nimport type { PopupOptions } from 'main.popup';\n\nexport class CallMenu extends BaseMenu\n{\n\tcontext: ImModelChat;\n\n\tstatic events = {\n\t\tonMenuItemClick: 'onMenuItemClick',\n\t};\n\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.id = 'bx-im-chat-header-call-menu';\n\t}\n\n\tgetMenuOptions(): PopupOptions\n\t{\n\t\treturn {\n\t\t\t...super.getMenuOptions(),\n\t\t\tclassName: this.getMenuClassName(),\n\t\t\tangle: true,\n\t\t\toffsetLeft: 4,\n\t\t\toffsetTop: 5,\n\t\t};\n\t}\n\n\tgetMenuClassName(): String\n\t{\n\t\treturn 'bx-im-messenger__scope bx-im-chat-header-call-button__scope';\n\t}\n\n\tgetMenuItems(): MenuItem[]\n\t{\n\t\treturn [\n\t\t\tthis.#getVideoCallItem(),\n\t\t\tthis.#getAudioCallItem(),\n\t\t\tthis.#getZoomItem(),\n\t\t\tthis.#getDelimiter(),\n\t\t\tthis.#getPersonalPhoneItem(),\n\t\t\tthis.#getWorkPhoneItem(),\n\t\t\tthis.#getInnerPhoneItem(),\n\t\t];\n\t}\n\n\t#getDelimiter(): MenuItem\n\t{\n\t\treturn { delimiter: true };\n\t}\n\n\t#getVideoCallItem(): MenuItem\n\t{\n\t\tconst isAvailable = this.#isCallAvailable(this.context.dialogId);\n\n\t\treturn {\n\t\t\ttext: Loc.getMessage('IM_CONTENT_CHAT_HEADER_VIDEOCALL'),\n\t\t\tonclick: () => {\n\t\t\t\tif (!isAvailable)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.#analyticsOnStartCallClick(CallTypes.video.id);\n\n\t\t\t\tCallTypes.video.start(this.context.dialogId);\n\t\t\t\tthis.emit(CallMenu.events.onMenuItemClick, CallTypes.video);\n\t\t\t\tthis.menuInstance.close();\n\t\t\t},\n\t\t\tdisabled: !isAvailable,\n\t\t};\n\t}\n\n\t#getAudioCallItem(): MenuItem\n\t{\n\t\tconst isAvailable = this.#isCallAvailable(this.context.dialogId);\n\n\t\treturn {\n\t\t\ttext: Loc.getMessage('IM_CONTENT_CHAT_HEADER_CALL_MENU_AUDIO'),\n\t\t\tonclick: () => {\n\t\t\t\tif (!isAvailable)\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.#analyticsOnStartCallClick(CallTypes.audio.id);\n\t\t\t\tCallTypes.audio.start(this.context.dialogId);\n\n\t\t\t\tthis.emit(CallMenu.events.onMenuItemClick, CallTypes.audio);\n\t\t\t\tthis.menuInstance.close();\n\t\t\t},\n\t\t\tdisabled: !isAvailable,\n\t\t};\n\t}\n\n\t#analyticsOnStartCallClick(callType)\n\t{\n\t\tAnalytics.getInstance().onStartCallClick({\n\t\t\ttype: this.#isUser()\n\t\t\t\t? Analytics.AnalyticsType.privateCall\n\t\t\t\t: Analytics.AnalyticsType.groupCall,\n\t\t\tsection: Analytics.AnalyticsSection.chatWindow,\n\t\t\tsubSection: Analytics.AnalyticsSubSection.contextMenu,\n\t\t\telement: callType === CallTypes.video.id\n\t\t\t\t? Analytics.AnalyticsElement.videocall\n\t\t\t\t: Analytics.AnalyticsElement.audiocall,\n\t\t\tchatId: this.context.chatId,\n\t\t});\n\t}\n\n\t#getPersonalPhoneItem(): ?MenuItem\n\t{\n\t\tif (!this.#isUser())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { phones } = this.#getUser();\n\t\tif (!phones.personalMobile)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst title = Loc.getMessage('IM_CONTENT_CHAT_HEADER_CALL_MENU_PERSONAL_PHONE');\n\n\t\treturn {\n\t\t\tclassName: 'menu-popup-no-icon bx-im-chat-header-call-button-menu__item',\n\t\t\thtml: this.#getUserPhoneHtml(title, phones.personalMobile),\n\t\t\tonclick: () => {\n\t\t\t\tMessenger.startPhoneCall(phones.personalMobile);\n\t\t\t\tthis.menuInstance.close();\n\t\t\t},\n\t\t};\n\t}\n\n\t#getWorkPhoneItem(): ?MenuItem\n\t{\n\t\tif (!this.#isUser())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { phones } = this.#getUser();\n\t\tif (!phones.workPhone)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst title = Loc.getMessage('IM_CONTENT_CHAT_HEADER_CALL_MENU_WORK_PHONE');\n\n\t\treturn {\n\t\t\tclassName: 'menu-popup-no-icon bx-im-chat-header-call-button-menu__item',\n\t\t\thtml: this.#getUserPhoneHtml(title, phones.workPhone),\n\t\t\tonclick: () => {\n\t\t\t\tMessenger.startPhoneCall(phones.workPhone);\n\t\t\t\tthis.menuInstance.close();\n\t\t\t},\n\t\t};\n\t}\n\n\t#getInnerPhoneItem(): ?MenuItem\n\t{\n\t\tif (!this.#isUser())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { phones } = this.#getUser();\n\t\tif (!phones.innerPhone)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst title = Loc.getMessage('IM_CONTENT_CHAT_HEADER_CALL_MENU_INNER_PHONE_MSGVER_1');\n\n\t\treturn {\n\t\t\tclassName: 'menu-popup-no-icon bx-im-chat-header-call-button-menu__item',\n\t\t\thtml: this.#getUserPhoneHtml(title, phones.innerPhone),\n\t\t\tonclick: () => {\n\t\t\t\tMessenger.startPhoneCall(phones.innerPhone);\n\t\t\t\tthis.menuInstance.close();\n\t\t\t},\n\t\t};\n\t}\n\n\t#getZoomItem(): ?MenuItem\n\t{\n\t\tconst isActive = FeatureManager.isFeatureAvailable(Feature.zoomActive);\n\t\tif (!isActive)\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst classNames = ['bx-im-chat-header-call-button-menu__zoom', 'menu-popup-no-icon'];\n\t\tconst isFeatureAvailable = FeatureManager.isFeatureAvailable(Feature.zoomAvailable);\n\t\tif (!isFeatureAvailable)\n\t\t{\n\t\t\tclassNames.push('--disabled');\n\t\t}\n\n\t\treturn {\n\t\t\tclassName: classNames.join(' '),\n\t\t\ttext: Loc.getMessage('IM_CONTENT_CHAT_HEADER_CALL_MENU_ZOOM'),\n\t\t\tonclick: () => {\n\t\t\t\tif (!isFeatureAvailable)\n\t\t\t\t{\n\t\t\t\t\tBX.UI.InfoHelper.show('limit_video_conference_zoom');\n\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.#requestCreateZoomConference(this.context.dialogId);\n\t\t\t\tthis.menuInstance.close();\n\t\t\t},\n\t\t};\n\t}\n\n\t#getUserPhoneHtml(title, phoneNumber): HTMLSpanElement\n\t{\n\t\treturn Tag.render`\n\t\t\t<span class=\"bx-im-chat-header-call-button-menu__phone_container\">\n\t\t\t\t<span class=\"bx-im-chat-header-call-button-menu__phone_title\">${title}</span>\n\t\t\t\t<span class=\"bx-im-chat-header-call-button-menu__phone_number\">${phoneNumber}</span>\n\t\t\t</span>\n\t\t`;\n\t}\n\n\t#isCallAvailable(dialogId: String): boolean\n\t{\n\t\tif (\n\t\t\tCore.getStore().getters['recent/calls/hasActiveCall'](dialogId)\n\t\t\t&& CallManager.getInstance().getCurrentCallDialogId() === dialogId\n\t\t)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (Core.getStore().getters['recent/calls/hasActiveCall']())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tconst chatCanBeCalled = CallManager.getInstance().chatCanBeCalled(dialogId);\n\t\tconst chatIsAllowedToCall = PermissionManager.getInstance().canPerformAction(ChatActionType.call, dialogId);\n\n\t\treturn chatCanBeCalled && chatIsAllowedToCall;\n\t}\n\n\t#getUser(): ?ImModelUser\n\t{\n\t\tif (!this.#isUser())\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\treturn Core.getStore().getters['users/get'](this.context.dialogId);\n\t}\n\n\t#isUser(): true\n\t{\n\t\treturn this.context.type === ChatType.user;\n\t}\n\n\t#requestCreateZoomConference(dialogId: string)\n\t{\n\t\trunAction(RestMethod.imV2CallZoomCreate, { data: { dialogId } })\n\t\t\t.catch((errors) => {\n\t\t\t\tlet errorText = Loc.getMessage('IM_CONTENT_CHAT_HEADER_CALL_MENU_ZOOM_CREATE_ERROR');\n\n\t\t\t\tconst notConnected = errors.some((error) => error.code === 'ZOOM_CONNECTED_ERROR');\n\t\t\t\tif (notConnected)\n\t\t\t\t{\n\t\t\t\t\tconst userProfileUri = `/company/personal/user/${Core.getUserId()}/social_services/`;\n\t\t\t\t\terrorText = Loc.getMessage('IM_CONTENT_CHAT_HEADER_CALL_MENU_ZOOM_CONNECT_ERROR')\n\t\t\t\t\t\t.replace('#HREF_START#', `<a href=${userProfileUri}>`)\n\t\t\t\t\t\t.replace('#HREF_END#', '</>');\n\t\t\t\t}\n\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: errorText,\n\t\t\t\t});\n\t\t\t});\n\t}\n}\n","import { BaseEvent } from 'main.core.events';\n\nimport { Messenger } from 'im.public';\nimport { LocalStorageKey, ChatType } from 'im.v2.const';\nimport { CallManager } from 'im.v2.lib.call';\nimport { LocalStorageManager } from 'im.v2.lib.local-storage';\nimport { Analytics } from 'im.v2.lib.analytics';\n\nimport { CallMenu } from './classes/call-menu';\nimport { CallTypes } from './types/call-types';\n\nimport { hint } from 'ui.vue3.directives.hint';\n\nimport './css/call-button.css';\n\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const CallButton = {\n\tdirectives: { hint },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: [],\n\tdata()\n\t{\n\t\treturn {\n\t\t\tlastCallType: '',\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tchatId(): number\n\t\t{\n\t\t\treturn this.dialog.chatId;\n\t\t},\n\t\tisConference(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.videoconf;\n\t\t},\n\t\tcallButtonText(): string\n\t\t{\n\t\t\tconst locCode = CallTypes[this.lastCallType].locCode;\n\n\t\t\treturn this.loc(locCode);\n\t\t},\n\t\thasActiveCurrentCall(): boolean\n\t\t{\n\t\t\treturn CallManager\n\t\t\t\t.getInstance()\n\t\t\t\t.hasActiveCurrentCall(this.dialogId);\n\t\t},\n\t\thasActiveAnotherCall(): boolean\n\t\t{\n\t\t\treturn CallManager\n\t\t\t\t.getInstance()\n\t\t\t\t.hasActiveAnotherCall(this.dialogId);\n\t\t},\n\t\tisActive(): boolean\n\t\t{\n\t\t\tif (\n\t\t\t\tthis.hasActiveCurrentCall\n\t\t\t)\n\t\t\t{\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (this.hasActiveAnotherCall)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn CallManager\n\t\t\t\t.getInstance()\n\t\t\t\t.chatCanBeCalled(this.dialogId);\n\t\t},\n\t\tuserLimit(): number\n\t\t{\n\t\t\treturn CallManager\n\t\t\t\t.getInstance()\n\t\t\t\t.getCallUserLimit();\n\t\t},\n\t\tisChatUserLimitExceeded(): boolean\n\t\t{\n\t\t\treturn CallManager\n\t\t\t\t.getInstance()\n\t\t\t\t.isChatUserLimitExceeded(this.dialogId);\n\t\t},\n\t\thintContent(): Object | null\n\t\t{\n\t\t\tif (this.isChatUserLimitExceeded)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\ttext: this.loc('IM_LIB_CALL_USER_LIMIT_EXCEEDED_TOOLTIP', { '#USER_LIMIT#': this.userLimit }),\n\t\t\t\t\tpopupOptions: {\n\t\t\t\t\t\tbindOptions: {\n\t\t\t\t\t\t\tposition: 'bottom',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tangle: { position: 'top' },\n\t\t\t\t\t\ttargetContainer: document.body,\n\t\t\t\t\t\toffsetLeft: 63,\n\t\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.lastCallType = this.getLastCallChoice();\n\t\tthis.subscribeToMenuItemClick();\n\t},\n\tmethods:\n\t{\n\t\tstartVideoCall()\n\t\t{\n\t\t\tif (!this.isActive)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tMessenger.startVideoCall(this.dialogId);\n\t\t},\n\t\tsubscribeToMenuItemClick()\n\t\t{\n\t\t\tthis.getCallMenu().subscribe(\n\t\t\t\tCallMenu.events.onMenuItemClick,\n\t\t\t\t(event: BaseEvent<{id: string}>) => {\n\t\t\t\t\tconst { id: callTypeId } = event.getData();\n\t\t\t\t\tthis.saveLastCallChoice(callTypeId);\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tgetCallMenu(): CallMenu\n\t\t{\n\t\t\tif (!this.callMenu)\n\t\t\t{\n\t\t\t\tthis.callMenu = new CallMenu();\n\t\t\t}\n\n\t\t\treturn this.callMenu;\n\t\t},\n\t\tonButtonClick()\n\t\t{\n\t\t\tif (!this.isActive)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tAnalytics.getInstance().onStartCallClick({\n\t\t\t\ttype: this.dialog.type === ChatType.user\n\t\t\t\t\t? Analytics.AnalyticsType.privateCall\n\t\t\t\t\t: Analytics.AnalyticsType.groupCall,\n\t\t\t\tsection: Analytics.AnalyticsSection.chatWindow,\n\t\t\t\tsubSection: Analytics.AnalyticsSubSection.window,\n\t\t\t\telement: this.lastCallType === CallTypes.video.id\n\t\t\t\t\t? Analytics.AnalyticsElement.videocall\n\t\t\t\t\t: Analytics.AnalyticsElement.audiocall,\n\t\t\t\tchatId: this.chatId,\n\t\t\t});\n\n\t\t\tCallTypes[this.lastCallType].start(this.dialogId);\n\t\t},\n\t\tonMenuClick()\n\t\t{\n\t\t\tif (!this.shouldShowMenu())\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.getCallMenu().openMenu(this.dialog, this.$refs.menu);\n\t\t},\n\t\tonStartConferenceClick()\n\t\t{\n\t\t\tif (!this.isActive)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tAnalytics.getInstance().onStartConferenceClick({\n\t\t\t\telement: Analytics.AnalyticsElement.startButton,\n\t\t\t\tchatId: this.chatId,\n\t\t\t});\n\n\t\t\tMessenger.openConference({ code: this.dialog.public.code });\n\t\t},\n\t\tgetLastCallChoice(): string\n\t\t{\n\t\t\tconst result = LocalStorageManager.getInstance().get(LocalStorageKey.lastCallType, CallTypes.video.id);\n\t\t\tif (result === CallTypes.beta.id)\n\t\t\t{\n\t\t\t\treturn CallTypes.video.id;\n\t\t\t}\n\n\t\t\treturn result;\n\t\t},\n\t\tsaveLastCallChoice(callTypeId: string)\n\t\t{\n\t\t\tthis.lastCallType = callTypeId;\n\t\t\tLocalStorageManager.getInstance().set(LocalStorageKey.lastCallType, callTypeId);\n\t\t},\n\t\tshouldShowMenu(): boolean\n\t\t{\n\t\t\treturn this.isActive;\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div\n\t\t\tv-if=\"isConference\"\n\t\t\tclass=\"bx-im-chat-header-call-button__scope bx-im-chat-header-call-button__container --conference\"\n\t\t\t:class=\"{'--disabled': !isActive}\"\n\t\t\t@click=\"onStartConferenceClick\"\n\t\t>\n\t\t\t<div class=\"bx-im-chat-header-call-button__text\">\n\t\t\t\t{{ loc('IM_CONTENT_CHAT_HEADER_START_CONFERENCE') }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div\n\t\t\tv-else\n\t\t\tclass=\"bx-im-chat-header-call-button__scope bx-im-chat-header-call-button__container\"\n\t\t\t:class=\"{'--disabled': !isActive}\"\n\t\t\tv-hint=\"hintContent\"\n\t\t\t@click=\"onButtonClick\"\n\t\t>\n\t\t\t<div class=\"bx-im-chat-header-call-button__text\">\n\t\t\t\t{{ callButtonText }}\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-chat-header-call-button__separator\"></div>\n\t\t\t<div class=\"bx-im-chat-header-call-button__chevron_container\" @click.stop=\"onMenuClick\">\n\t\t\t\t<div class=\"bx-im-chat-header-call-button__chevron\" ref=\"menu\"></div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ChatType, ChatEntityLinkType } from 'im.v2.const';\nimport { Loc } from 'main.core';\n\ntype ChatTypeParams = {\n\t[chatType: $Values<typeof ChatType>]: {\n\t\tclassName: string,\n\t\tloc: string,\n\t}\n};\n\nexport const ParamsByLinkType: ChatTypeParams = {\n\t[ChatEntityLinkType.tasks]: {\n\t\tclassName: '--task',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_TASK'),\n\t},\n\t[ChatEntityLinkType.calendar]: {\n\t\tclassName: '--calendar',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_MEETING_MSGVER_1'),\n\t},\n\t[ChatEntityLinkType.sonetGroup]: {\n\t\tclassName: '--group',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_GROUP_MSGVER_1'),\n\t},\n\t[ChatEntityLinkType.mail]: {\n\t\tclassName: '--mail',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_MAIL_MSGVER_1'),\n\t},\n\t[ChatEntityLinkType.contact]: {\n\t\tclassName: '--crm',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_CONTACT'),\n\t},\n\t[ChatEntityLinkType.deal]: {\n\t\tclassName: '--crm',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_DEAL'),\n\t},\n\t[ChatEntityLinkType.lead]: {\n\t\tclassName: '--crm',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_LEAD'),\n\t},\n\t[ChatEntityLinkType.dynamic]: {\n\t\tclassName: '--crm',\n\t\tloc: Loc.getMessage('IM_CONTENT_CHAT_HEADER_OPEN_DYNAMIC_ELEMENT'),\n\t},\n};\n","import { ParamsByLinkType } from './const/chat-type-params';\n\nimport './css/entity-link.css';\n\nimport type { ImModelChat } from 'im.v2.model';\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const EntityLink = {\n\tname: 'EntityLink',\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tentityType(): string\n\t\t{\n\t\t\treturn this.dialog.entityLink.type;\n\t\t},\n\t\tentityUrl(): string\n\t\t{\n\t\t\treturn this.dialog.entityLink.url;\n\t\t},\n\t\tcontainerClassName(): string\n\t\t{\n\t\t\treturn ParamsByLinkType[this.entityType]?.className ?? '';\n\t\t},\n\t\tlinkText(): string\n\t\t{\n\t\t\treturn ParamsByLinkType[this.entityType]?.loc ?? 'Open entity';\n\t\t},\n\t},\n\ttemplate: `\n\t\t<a :href=\"entityUrl\" class=\"bx-im-chat-header-entity-link__container\" :class=\"containerClassName\" target=\"_blank\">\n\t\t\t<div class=\"bx-im-chat-header-entity-link__icon\"></div>\n\t\t\t<div class=\"bx-im-chat-header-entity-link__text\">{{ linkText }}</div>\n\t\t\t<div class=\"bx-im-chat-header-entity-link__arrow\"></div>\n\t\t</a>\n\t`,\n};\n","import { Loc } from 'main.core';\n\nimport { ChatType } from 'im.v2.const';\nimport { EditableChatTitle, LineLoader } from 'im.v2.component.elements';\nimport { FadeAnimation } from 'im.v2.component.animation';\n\nimport { EntityLink } from '../entity-link/entity-link';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelChat } from 'im.v2.model';\n\nconst UserCounterPhraseCodeByChatType = {\n\t[ChatType.openChannel]: 'IM_CONTENT_CHAT_HEADER_CHANNEL_USER_COUNT',\n\t[ChatType.channel]: 'IM_CONTENT_CHAT_HEADER_CHANNEL_USER_COUNT',\n\t[ChatType.generalChannel]: 'IM_CONTENT_CHAT_HEADER_CHANNEL_USER_COUNT',\n\tdefault: 'IM_CONTENT_CHAT_HEADER_USER_COUNT',\n};\n\n// @vue/component\nexport const GroupChatTitle = {\n\tname: 'GroupChatTitle',\n\tcomponents: { EditableChatTitle, EntityLink, LineLoader, FadeAnimation },\n\tprops:\n\t\t{\n\t\t\tdialogId: {\n\t\t\t\ttype: String,\n\t\t\t\trequired: true,\n\t\t\t},\n\t\t},\n\temits: ['membersClick', 'newTitle'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t\t{\n\t\t\tdialog(): ImModelChat\n\t\t\t{\n\t\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t\t},\n\t\t\thasEntityLink(): boolean\n\t\t\t{\n\t\t\t\treturn Boolean(this.dialog.entityLink?.url);\n\t\t\t},\n\t\t\tuserCounterPhraseCode(): string\n\t\t\t{\n\t\t\t\treturn UserCounterPhraseCodeByChatType[this.dialog.type] ?? UserCounterPhraseCodeByChatType.default;\n\t\t\t},\n\t\t\tuserCounterText(): string\n\t\t\t{\n\t\t\t\treturn Loc.getMessagePlural(this.userCounterPhraseCode, this.dialog.userCounter, {\n\t\t\t\t\t'#COUNT#': this.dialog.userCounter,\n\t\t\t\t});\n\t\t\t},\n\t\t},\n\tmethods:\n\t\t{\n\t\t\tloc(phraseCode: string): string\n\t\t\t{\n\t\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t\t},\n\t\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-header__info\">\n\t\t\t<EditableChatTitle :dialogId=\"dialogId\" @newTitleSubmit=\"$emit('newTitle', $event)\" />\n\t\t\t<LineLoader v-if=\"!dialog.inited\" :width=\"50\" :height=\"16\" />\n\t\t\t<FadeAnimation :duration=\"100\">\n\t\t\t\t<div v-if=\"dialog.inited\" class=\"bx-im-chat-header__subtitle_container\">\n\t\t\t\t\t<div\n\t\t\t\t\t\t:title=\"loc('IM_CONTENT_CHAT_HEADER_OPEN_MEMBERS')\"\n\t\t\t\t\t\t@click=\"$emit('membersClick')\"\n\t\t\t\t\t\tclass=\"bx-im-chat-header__subtitle_content --click\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{{ userCounterText }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<EntityLink v-if=\"hasEntityLink\" :dialogId=\"dialogId\" />\n\t\t\t\t</div>\n\t\t\t</FadeAnimation>\n\t\t</div>\n\t`,\n};\n","import { Utils } from 'im.v2.lib.utils';\nimport { ChatTitle } from 'im.v2.component.elements';\n\nimport type { JsonObject } from 'main.core';\n\nconst ONE_MINUTE = 60 * 1000;\n\n// @vue/component\nexport const UserTitle = {\n\tname: 'UserTitle',\n\tcomponents: { ChatTitle },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tuserLastOnlineText: '',\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tuserPosition(): string\n\t\t{\n\t\t\treturn this.$store.getters['users/getPosition'](this.dialogId);\n\t\t},\n\t\tuserLastOnline(): string\n\t\t{\n\t\t\treturn this.$store.getters['users/getLastOnline'](this.dialogId);\n\t\t},\n\t\tuserLink(): string\n\t\t{\n\t\t\treturn Utils.user.getProfileLink(this.dialogId);\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tuserLastOnline(value)\n\t\t{\n\t\t\tthis.userLastOnlineText = value;\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.updateUserOnline();\n\t\tthis.userLastOnlineInterval = setInterval(this.updateUserOnline, ONE_MINUTE);\n\t},\n\tbeforeUnmount()\n\t{\n\t\tclearInterval(this.userLastOnlineInterval);\n\t},\n\tmethods:\n\t{\n\t\tupdateUserOnline(): void\n\t\t{\n\t\t\tthis.userLastOnlineText = this.$store.getters['users/getLastOnline'](this.dialogId);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-header__info\">\n\t\t\t<div class=\"bx-im-chat-header__title --user\">\n\t\t\t\t<a :href=\"userLink\" target=\"_blank\" class=\"bx-im-chat-header__title_container\">\n\t\t\t\t\t<ChatTitle :dialogId=\"dialogId\" />\n\t\t\t\t</a>\n\t\t\t\t<span class=\"bx-im-chat-header__user-status\">{{ userLastOnlineText }}</span>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-chat-header__subtitle_container\">\n\t\t\t\t<div class=\"bx-im-chat-header__subtitle_content\">{{ userPosition }}</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ChatAvatar, AvatarSize } from 'im.v2.component.elements';\nimport { ChatActionType, ChatType } from 'im.v2.const';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { Utils } from 'im.v2.lib.utils';\nimport { ChatService } from 'im.v2.provider.service';\n\nimport type { ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const HeaderAvatar = {\n\tname: 'HeaderAvatar',\n\tcomponents: { ChatAvatar },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['avatarClick'],\n\tcomputed:\n\t{\n\t\tAvatarSize: () => AvatarSize,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tisUser(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.user;\n\t\t},\n\t\tcanChangeAvatar(): boolean\n\t\t{\n\t\t\treturn PermissionManager.getInstance().canPerformAction(ChatActionType.avatar, this.dialogId);\n\t\t},\n\t\tuserLink(): string\n\t\t{\n\t\t\treturn Utils.user.getProfileLink(this.dialogId);\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonAvatarClick()\n\t\t{\n\t\t\tif (this.isUser || !this.canChangeAvatar)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.$refs.avatarInput.click();\n\t\t},\n\t\tasync onAvatarSelect(event: Event)\n\t\t{\n\t\t\tconst input: HTMLInputElement = event.target;\n\t\t\tconst file: File = input.files[0];\n\t\t\tif (!file)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst preparedAvatar = await this.getChatService().prepareAvatar(file);\n\t\t\tif (!preparedAvatar)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvoid this.getChatService().changeAvatar(this.dialog.chatId, preparedAvatar);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-header__avatar\" :class=\"{'--can-change': canChangeAvatar}\" @click=\"onAvatarClick\">\n\t\t\t<a v-if=\"isUser\" :href=\"userLink\" target=\"_blank\">\n\t\t\t\t<ChatAvatar :avatarDialogId=\"dialogId\" :contextDialogId=\"dialogId\" :size=\"AvatarSize.L\" />\n\t\t\t</a>\n\t\t\t<ChatAvatar v-else :avatarDialogId=\"dialogId\" :contextDialogId=\"dialogId\" :size=\"AvatarSize.L\" />\n\t\t</div>\n\t\t<input\n\t\t\ttype=\"file\"\n\t\t\taccept=\"image/*\"\n\t\t\tclass=\"bx-im-chat-header__avatar_input\"\n\t\t\tref=\"avatarInput\"\n\t\t\t@change=\"onAvatarSelect\"\n\t\t>\n\t`,\n};\n","import { Type } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport 'ui.notification';\n\nimport { LineLoader, ChatAvatar } from 'im.v2.component.elements';\nimport { ChatService } from 'im.v2.provider.service';\nimport { ChatType, ChatActionType, EventType, SidebarDetailBlock } from 'im.v2.const';\nimport { AddToChat } from 'im.v2.component.entity-selector';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { FadeAnimation } from 'im.v2.component.animation';\n\nimport { CallButton } from './components/call-button/call-button';\nimport { GroupChatTitle } from './components/title/group-chat';\nimport { UserTitle as UserChatTitle } from './components/title/user';\nimport { HeaderAvatar } from './components/header-avatar';\n\nimport './css/chat-header.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelUser, ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const ChatHeader = {\n\tname: 'ChatHeader',\n\tcomponents: {\n\t\tChatAvatar,\n\t\tAddToChat,\n\t\tCallButton,\n\t\tGroupChatTitle,\n\t\tUserChatTitle,\n\t\tLineLoader,\n\t\tFadeAnimation,\n\t\tHeaderAvatar,\n\t},\n\tinject: ['currentSidebarPanel'],\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\twithCallButton: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSearchButton: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t\twithSidebarButton: {\n\t\t\ttype: Boolean,\n\t\t\tdefault: true,\n\t\t},\n\t},\n\temits: ['toggleRightPanel', 'toggleSearchPanel', 'toggleMembersPanel', 'buttonPanelReady'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tshowAddToChatPopup: false,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tuser(): ImModelUser\n\t\t{\n\t\t\treturn this.$store.getters['users/get'](this.dialogId, true);\n\t\t},\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tisInited(): boolean\n\t\t{\n\t\t\treturn this.dialog.inited;\n\t\t},\n\t\tisUser(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.user;\n\t\t},\n\t\tisBot(): boolean\n\t\t{\n\t\t\tif (!this.isUser)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn this.user.bot === true;\n\t\t},\n\t\tshowCallButton(): boolean\n\t\t{\n\t\t\tif (this.isBot || !this.withCallButton)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn PermissionManager.getInstance().canPerformAction(ChatActionType.call, this.dialogId);\n\t\t},\n\t\tshowInviteButton(): boolean\n\t\t{\n\t\t\tif (this.isBot)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn PermissionManager.getInstance().canPerformAction(ChatActionType.extend, this.dialogId);\n\t\t},\n\t\tshowSearchButton(): boolean\n\t\t{\n\t\t\treturn this.withSearchButton;\n\t\t},\n\t\tshowSidebarButton(): boolean\n\t\t{\n\t\t\tif (!this.withSidebarButton)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn PermissionManager.getInstance().canPerformAction(ChatActionType.openSidebar, this.dialogId);\n\t\t},\n\t\tisSidebarOpened(): boolean\n\t\t{\n\t\t\treturn Type.isStringFilled(this.currentSidebarPanel);\n\t\t},\n\t\tisMessageSearchActive(): boolean\n\t\t{\n\t\t\treturn this.currentSidebarPanel === SidebarDetailBlock.messageSearch;\n\t\t},\n\t\tisMembersPanelActive(): boolean\n\t\t{\n\t\t\treturn this.currentSidebarPanel === SidebarDetailBlock.members;\n\t\t},\n\t\tchatTitleComponent(): string\n\t\t{\n\t\t\treturn this.isUser ? UserChatTitle : GroupChatTitle;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\ttoggleRightPanel()\n\t\t{\n\t\t\tif (this.isSidebarOpened)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(EventType.sidebar.close, { panel: '' });\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEventEmitter.emit(EventType.sidebar.open, {\n\t\t\t\tpanel: SidebarDetailBlock.main,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t\ttoggleSearchPanel()\n\t\t{\n\t\t\tif (this.isMessageSearchActive)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(EventType.sidebar.close, { panel: SidebarDetailBlock.messageSearch });\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEventEmitter.emit(EventType.sidebar.open, {\n\t\t\t\tpanel: SidebarDetailBlock.messageSearch,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t\tonMembersClick()\n\t\t{\n\t\t\tif (!this.isInited)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.isMembersPanelActive)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(EventType.sidebar.close, { panel: SidebarDetailBlock.members });\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEventEmitter.emit(EventType.sidebar.open, {\n\t\t\t\tpanel: SidebarDetailBlock.members,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t\tonNewTitleSubmit(newTitle: string)\n\t\t{\n\t\t\tthis.getChatService().renameChat(this.dialogId, newTitle).catch(() => {\n\t\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.loc('IM_CONTENT_CHAT_HEADER_RENAME_ERROR'),\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-chat-header__scope bx-im-chat-header__container\">\n\t\t\t<div class=\"bx-im-chat-header__left\">\n\t\t\t\t<slot name=\"left\">\n\t\t\t\t\t<HeaderAvatar :dialogId=\"dialogId\" />\n\t\t\t\t\t<slot name=\"title\" :onNewTitleHandler=\"onNewTitleSubmit\">\n\t\t\t\t\t\t<component\n\t\t\t\t\t\t\t:is=\"chatTitleComponent\"\n\t\t\t\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t\t\t\t@membersClick=\"onMembersClick\"\n\t\t\t\t\t\t\t@newTitle=\"onNewTitleSubmit\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</slot>\n\t\t\t\t</slot>\n\t\t\t</div>\n\t\t\t<LineLoader v-if=\"!isInited\" :width=\"45\" :height=\"22\" />\n\t\t\t<FadeAnimation @afterEnter=\"$emit('buttonPanelReady')\" :duration=\"100\">\n\t\t\t\t<div v-if=\"isInited\" class=\"bx-im-chat-header__right\">\n\t\t\t\t\t<slot name=\"before-actions\"></slot>\n\t\t\t\t\t<CallButton v-if=\"showCallButton\" :dialogId=\"dialogId\" />\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"showInviteButton\"\n\t\t\t\t\t\t:title=\"loc('IM_CONTENT_CHAT_HEADER_OPEN_INVITE_POPUP_TITLE')\"\n\t\t\t\t\t\t:class=\"{'--active': showAddToChatPopup}\"\n\t\t\t\t\t\tclass=\"bx-im-chat-header__icon --add-people\"\n\t\t\t\t\t\t@click=\"showAddToChatPopup = true\" \n\t\t\t\t\t\tref=\"add-members\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<slot name=\"invite-hint\" :inviteButtonRef=\"$refs['add-members']\"></slot>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"showSearchButton\"\n\t\t\t\t\t\t:title=\"loc('IM_CONTENT_CHAT_HEADER_OPEN_SEARCH')\"\n\t\t\t\t\t\t:class=\"{'--active': isMessageSearchActive}\"\n\t\t\t\t\t\tclass=\"bx-im-chat-header__icon --search\" \n\t\t\t\t\t\t@click=\"toggleSearchPanel\"\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-if=\"showSidebarButton\"\n\t\t\t\t\t\tclass=\"bx-im-chat-header__icon --panel\"\n\t\t\t\t\t\t:title=\"loc('IM_CONTENT_CHAT_HEADER_OPEN_SIDEBAR')\"\n\t\t\t\t\t\t:class=\"{'--active': isSidebarOpened}\"\n\t\t\t\t\t\t@click=\"toggleRightPanel\" \n\t\t\t\t\t></div>\n\t\t\t\t</div>\n\t\t\t</FadeAnimation>\n\t\t\t<AddToChat\n\t\t\t\t:bindElement=\"$refs['add-members'] ?? {}\"\n\t\t\t\t:dialogId=\"dialogId\"\n\t\t\t\t:showPopup=\"showAddToChatPopup\"\n\t\t\t\t:popupConfig=\"{ offsetTop: 15, offsetLeft: -300 }\"\n\t\t\t\t@close=\"showAddToChatPopup = false\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","export const Height = {\n\tchatHeader: 64,\n\tpinnedMessages: 53,\n\tblockedTextarea: 50,\n\tdropAreaOffset: 16,\n};\n","import { hasDataTransferOnlyFiles } from 'ui.uploader.core';\nimport { Event, Type, type JsonObject } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\n\nimport { EventType } from 'im.v2.const';\nimport { UploadingService } from 'im.v2.provider.service';\nimport { ChannelManager } from 'im.v2.lib.channel';\n\nimport { Height } from '../const/size';\n\nimport type { ImModelChat } from 'im.v2.model';\n\nimport '../css/drop-area.css';\n\n// @vue/component\nexport const DropArea = {\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t\tcontainer: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tshowDropArea: false,\n\t\t\tlastDropAreaEnterTarget: null,\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\thasPinnedMessages(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['messages/pin/getPinned'](this.dialog.chatId).length > 0;\n\t\t},\n\t\tdropAreaStyles(): {[top: string]: string}\n\t\t{\n\t\t\tlet offset = Height.dropAreaOffset + Height.chatHeader;\n\t\t\tif (this.hasPinnedMessages)\n\t\t\t{\n\t\t\t\toffset += Height.pinnedMessages;\n\t\t\t}\n\n\t\t\treturn { top: `${offset}px` };\n\t\t},\n\t},\n\twatch:\n\t{\n\t\tcontainer: {\n\t\t\timmediate: true,\n\t\t\thandler(newValue)\n\t\t\t{\n\t\t\t\tif (!Type.isElementNode(newValue))\n\t\t\t\t{\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tthis.bindEvents();\n\t\t\t},\n\t\t},\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.unbindEvents();\n\t},\n\tmethods:\n\t{\n\t\tbindEvents()\n\t\t{\n\t\t\tEvent.bind(this.container, 'dragenter', this.onDragEnter);\n\t\t\tEvent.bind(this.container, 'dragleave', this.onDragLeave);\n\t\t\tEvent.bind(this.container, 'dragover', this.onDragOver);\n\t\t\tEvent.bind(this.container, 'drop', this.onDrop);\n\t\t},\n\t\tunbindEvents()\n\t\t{\n\t\t\tEvent.unbind(this.container, 'dragenter', this.onDragEnter);\n\t\t\tEvent.unbind(this.container, 'dragleave', this.onDragLeave);\n\t\t\tEvent.unbind(this.container, 'dragover', this.onDragOver);\n\t\t\tEvent.unbind(this.container, 'drop', this.onDrop);\n\t\t},\n\t\tasync onDragEnter(event: DragEvent)\n\t\t{\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tconst success = await hasDataTransferOnlyFiles(event.dataTransfer, false);\n\t\t\tif (!success)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.lastDropAreaEnterTarget = event.target;\n\t\t\tthis.showDropArea = true;\n\t\t},\n\t\tonDragLeave(event: DragEvent)\n\t\t{\n\t\t\tevent.stopPropagation();\n\t\t\tevent.preventDefault();\n\n\t\t\tif (this.lastDropAreaEnterTarget !== event.target)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.showDropArea = false;\n\t\t},\n\t\tonDragOver(event: DragEvent)\n\t\t{\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tasync onDrop(event: DragEvent)\n\t\t{\n\t\t\tevent.preventDefault();\n\n\t\t\tconst isChannelType = ChannelManager.isChannel(this.dialogId);\n\t\t\tconst uploaderId = await this.getUploadingService().uploadFromDragAndDrop({\n\t\t\t\tevent,\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t\tsendAsFile: false,\n\t\t\t\tautoUpload: !isChannelType,\n\t\t\t});\n\n\t\t\tif (Type.isStringFilled(uploaderId) && isChannelType)\n\t\t\t{\n\t\t\t\tEventEmitter.emit(EventType.textarea.openUploadPreview, { uploaderId });\n\t\t\t}\n\t\t\tthis.showDropArea = false;\n\t\t},\n\t\tgetUploadingService(): UploadingService\n\t\t{\n\t\t\tif (!this.uploadingService)\n\t\t\t{\n\t\t\t\tthis.uploadingService = UploadingService.getInstance();\n\t\t\t}\n\n\t\t\treturn this.uploadingService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<Transition name=\"drop-area-fade\">\n\t\t\t<div v-if=\"showDropArea\" :style=\"dropAreaStyles\" class=\"bx-im-content-chat-drop-area__container bx-im-content-chat-drop-area__scope\">\n\t\t\t\t<div class=\"bx-im-content-chat-drop-area__box\">\n\t\t\t\t\t<span class=\"bx-im-content-chat-drop-area__icon\"></span>\n\t\t\t\t\t<label class=\"bx-im-content-chat-drop-area__label-text\">\n\t\t\t\t\t\t{{ loc('IM_CONTENT_BASE_CHAT_DROP_AREA') }}\n\t\t\t\t\t</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</Transition>\n\t`,\n};\n","import { Core } from 'im.v2.application.core';\nimport { Button as ChatButton, ButtonSize } from 'im.v2.component.elements';\nimport { Color } from 'im.v2.const';\nimport { ChatService } from 'im.v2.provider.service';\n\nimport type { CustomColorScheme } from 'im.v2.component.elements';\nimport type { ImModelChat } from 'im.v2.model';\n\nconst BUTTON_BACKGROUND_COLOR = 'rgba(0, 0, 0, 0.1)';\nconst BUTTON_HOVER_COLOR = 'rgba(0, 0, 0, 0.2)';\nconst BUTTON_TEXT_COLOR = '#fff';\n\n// @vue/component\nexport const MutePanel = {\n\tcomponents: { ChatButton },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata()\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tisMuted(): boolean\n\t\t{\n\t\t\treturn this.dialog.muteList.includes(Core.getUserId());\n\t\t},\n\t\tbuttonText(): string\n\t\t{\n\t\t\tconst mutedCode = this.loc('IM_CONTENT_BLOCKED_TEXTAREA_ENABLE_NOTIFICATIONS');\n\t\t\tconst unmutedCode = this.loc('IM_CONTENT_BLOCKED_TEXTAREA_DISABLE_NOTIFICATIONS');\n\n\t\t\treturn this.isMuted ? mutedCode : unmutedCode;\n\t\t},\n\t\tbuttonColorScheme(): CustomColorScheme\n\t\t{\n\t\t\treturn {\n\t\t\t\tborderColor: Color.transparent,\n\t\t\t\tbackgroundColor: BUTTON_BACKGROUND_COLOR,\n\t\t\t\ticonColor: BUTTON_TEXT_COLOR,\n\t\t\t\ttextColor: BUTTON_TEXT_COLOR,\n\t\t\t\thoverColor: BUTTON_HOVER_COLOR,\n\t\t\t};\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonButtonClick()\n\t\t{\n\t\t\tif (this.isMuted)\n\t\t\t{\n\t\t\t\tthis.getChatService().unmuteChat(this.dialogId);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.getChatService().muteChat(this.dialogId);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat__textarea_placeholder\">\n\t\t\t<ChatButton\n\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t:customColorScheme=\"buttonColorScheme\"\n\t\t\t\t:text=\"buttonText\"\n\t\t\t\t:isRounded=\"true\"\n\t\t\t\t@click=\"onButtonClick\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import { Button as ChatButton, ButtonColor, ButtonSize } from 'im.v2.component.elements';\nimport { ChatService } from 'im.v2.provider.service';\n\n// @vue/component\nexport const JoinPanel = {\n\tcomponents: { ChatButton },\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): {}\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tButtonSize: () => ButtonSize,\n\t\tButtonColor: () => ButtonColor,\n\t},\n\tmethods:\n\t{\n\t\tonButtonClick()\n\t\t{\n\t\t\tthis.getChatService().joinChat(this.dialogId);\n\t\t},\n\t\tgetChatService(): ChatService\n\t\t{\n\t\t\tif (!this.chatService)\n\t\t\t{\n\t\t\t\tthis.chatService = new ChatService();\n\t\t\t}\n\n\t\t\treturn this.chatService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat__textarea_placeholder\">\n\t\t\t<ChatButton\n\t\t\t\t:size=\"ButtonSize.XL\"\n\t\t\t\t:color=\"ButtonColor.Primary\"\n\t\t\t\t:text=\"loc('IM_CONTENT_BLOCKED_TEXTAREA_JOIN_CHAT')\"\n\t\t\t\t:isRounded=\"true\"\n\t\t\t\t@click=\"onButtonClick\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n","import '../css/loading-bar.css';\n\nimport type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const LoadingBar = {\n\tname: 'LoadingBar',\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat__loading-bar\"></div>\n\t`,\n};\n","export const TextareaObserverDirective = {\n\tmounted(element, binding)\n\t{\n\t\tbinding.instance.textareaResizeManager.observeTextarea(element);\n\t},\n\tbeforeUnmount(element, binding)\n\t{\n\t\tbinding.instance.textareaResizeManager.unobserveTextarea(element);\n\t},\n};\n","import { EventEmitter, BaseEvent } from 'main.core.events';\nimport { computed } from 'ui.vue3';\n\nimport { ChatDialog } from 'im.v2.component.dialog.chat';\nimport { ChatTextarea } from 'im.v2.component.textarea';\nimport { ThemeManager } from 'im.v2.lib.theme';\nimport { PermissionManager } from 'im.v2.lib.permission';\nimport { ResizeManager } from 'im.v2.lib.textarea';\nimport { ChatSidebar } from 'im.v2.component.sidebar';\nimport { ChatActionType, Settings, UserRole, EventType, SidebarDetailBlock } from 'im.v2.const';\n\nimport { Height } from './const/size';\nimport { ChatHeader } from '../header/chat-header';\nimport { DropArea } from './components/drop-area';\nimport { MutePanel } from './components/mute-panel';\nimport { JoinPanel } from './components/join-panel';\nimport { LoadingBar } from './components/loading-bar';\nimport { TextareaObserverDirective } from './utils/observer-directive';\n\nimport './css/base-chat-content.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelChat } from 'im.v2.model';\nimport type { BackgroundStyle } from 'im.v2.lib.theme';\n\ntype SidebarDetailBlockType = $Values<typeof SidebarDetailBlock>;\n\n// @vue/component\nexport const BaseChatContent = {\n\tname: 'BaseChatContent',\n\tcomponents:\n\t{\n\t\tChatHeader,\n\t\tChatDialog,\n\t\tChatTextarea,\n\t\tChatSidebar,\n\t\tDropArea,\n\t\tMutePanel,\n\t\tJoinPanel,\n\t\tLoadingBar,\n\t},\n\tdirectives: { 'textarea-observer': TextareaObserverDirective },\n\tprovide(): { currentSidebarPanel: SidebarDetailBlockType }\n\t{\n\t\treturn {\n\t\t\tcurrentSidebarPanel: computed(() => this.currentSidebarPanel),\n\t\t};\n\t},\n\tprops:\n\t{\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\tdefault: '',\n\t\t},\n\t\tbackgroundId: {\n\t\t\ttype: [Number, null],\n\t\t\tdefault: null,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\ttextareaHeight: 0,\n\t\t\tshowLoadingBar: false,\n\t\t\tcurrentSidebarPanel: '',\n\t\t};\n\t},\n\tcomputed:\n\t{\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.dialogId, true);\n\t\t},\n\t\tcanSend(): boolean\n\t\t{\n\t\t\treturn PermissionManager.getInstance().canPerformAction(ChatActionType.send, this.dialog.dialogId);\n\t\t},\n\t\tisGuest(): boolean\n\t\t{\n\t\t\treturn this.dialog.role === UserRole.guest;\n\t\t},\n\t\thasCommentsOnTop(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['messages/comments/areOpenedForChannel'](this.dialogId);\n\t\t},\n\t\tcontainerClasses(): string[]\n\t\t{\n\t\t\tconst alignment = this.$store.getters['application/settings/get'](Settings.appearance.alignment);\n\n\t\t\treturn [`--${alignment}-align`];\n\t\t},\n\t\tbackgroundStyle(): BackgroundStyle\n\t\t{\n\t\t\tif (this.backgroundId)\n\t\t\t{\n\t\t\t\treturn ThemeManager.getBackgroundStyleById(this.backgroundId);\n\t\t\t}\n\n\t\t\treturn ThemeManager.getCurrentBackgroundStyle();\n\t\t},\n\t\tdialogContainerStyle(): Object\n\t\t{\n\t\t\tlet textareaHeight = this.textareaHeight;\n\t\t\tif (!this.canSend)\n\t\t\t{\n\t\t\t\ttextareaHeight = Height.blockedTextarea;\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\theight: `calc(100% - ${Height.chatHeader}px - ${textareaHeight}px)`,\n\t\t\t};\n\t\t},\n\t},\n\twatch:\n\t{\n\t\ttextareaHeight(newValue, oldValue)\n\t\t{\n\t\t\tif (!this.dialog.inited || oldValue === 0)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tEventEmitter.emit(EventType.dialog.scrollToBottom, {\n\t\t\t\tchatId: this.dialog.chatId,\n\t\t\t\tanimation: false,\n\t\t\t});\n\t\t},\n\t},\n\tcreated()\n\t{\n\t\tthis.initTextareaResizeManager();\n\t\tthis.bindEvents();\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.unbindEvents();\n\t},\n\tmethods:\n\t{\n\t\tinitTextareaResizeManager()\n\t\t{\n\t\t\tthis.textareaResizeManager = new ResizeManager();\n\t\t\tthis.textareaResizeManager.subscribe(ResizeManager.events.onHeightChange, this.onTextareaHeightChange);\n\t\t},\n\t\tonTextareaMount()\n\t\t{\n\t\t\tconst textareaContainer: HTMLDivElement = this.$refs['textarea-container'];\n\t\t\tthis.textareaHeight = textareaContainer.clientHeight;\n\t\t},\n\t\tonTextareaHeightChange(event: BaseEvent<{newHeight: number}>)\n\t\t{\n\t\t\tconst { newHeight } = event.getData();\n\t\t\tthis.textareaHeight = newHeight;\n\t\t},\n\t\tonShowLoadingBar(event: BaseEvent<{ dialogId: string }>)\n\t\t{\n\t\t\tconst { dialogId } = event.getData();\n\t\t\tif (dialogId !== this.dialogId)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.showLoadingBar = true;\n\t\t},\n\t\tonHideLoadingBar(event: BaseEvent<{ dialogId: string }>)\n\t\t{\n\t\t\tconst { dialogId } = event.getData();\n\t\t\tif (dialogId !== this.dialogId)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.showLoadingBar = false;\n\t\t},\n\t\tonChangeSidebarPanel({ panel }: { panel: SidebarDetailBlockType })\n\t\t{\n\t\t\tthis.currentSidebarPanel = panel;\n\t\t},\n\t\tbindEvents()\n\t\t{\n\t\t\tEventEmitter.subscribe(EventType.dialog.showLoadingBar, this.onShowLoadingBar);\n\t\t\tEventEmitter.subscribe(EventType.dialog.hideLoadingBar, this.onHideLoadingBar);\n\t\t},\n\t\tunbindEvents()\n\t\t{\n\t\t\tEventEmitter.unsubscribe(EventType.dialog.showLoadingBar, this.onShowLoadingBar);\n\t\t\tEventEmitter.unsubscribe(EventType.dialog.hideLoadingBar, this.onHideLoadingBar);\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-content-chat__scope bx-im-content-chat__container\" :class=\"containerClasses\" :style=\"backgroundStyle\">\n\t\t\t<div class=\"bx-im-content-chat__content\" ref=\"content\">\n\t\t\t\t<slot name=\"header\">\n\t\t\t\t\t<ChatHeader :dialogId=\"dialogId\" :key=\"dialogId\" />\n\t\t\t\t</slot>\n\t\t\t\t<div :style=\"dialogContainerStyle\" class=\"bx-im-content-chat__dialog_container\">\n\t\t\t\t\t<Transition name=\"loading-bar-transition\">\n\t\t\t\t\t\t<LoadingBar v-if=\"showLoadingBar\" />\n\t\t\t\t\t</Transition>\n\t\t\t\t\t<div class=\"bx-im-content-chat__dialog_content\">\n\t\t\t\t\t\t<slot name=\"dialog\">\n\t\t\t\t\t\t\t<ChatDialog :dialogId=\"dialogId\" :key=\"dialogId\" />\n\t\t\t\t\t\t</slot>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!-- Textarea -->\n\t\t\t\t<div v-if=\"canSend\" v-textarea-observer class=\"bx-im-content-chat__textarea_container\" ref=\"textarea-container\">\n\t\t\t\t\t<slot name=\"textarea\" :onTextareaMount=\"onTextareaMount\">\n\t\t\t\t\t\t<ChatTextarea \n\t\t\t\t\t\t\t:dialogId=\"dialogId\" \n\t\t\t\t\t\t\t:key=\"dialogId\" \n\t\t\t\t\t\t\t:withAudioInput=\"false\" \n\t\t\t\t\t\t\t@mounted=\"onTextareaMount\" \n\t\t\t\t\t\t/>\n\t\t\t\t\t</slot>\n\t\t\t\t</div>\n\t\t\t\t<slot v-else-if=\"isGuest\" name=\"join-panel\">\n\t\t\t\t\t<JoinPanel :dialogId=\"dialogId\" />\n\t\t\t\t</slot>\n\t\t\t\t<MutePanel v-else :dialogId=\"dialogId\" />\n\t\t\t\t<!-- End textarea -->\n\t\t\t\t<DropArea :dialogId=\"dialogId\" :container=\"$refs.content || {}\" :key=\"dialogId\" />\n\t\t\t</div>\n\t\t\t<ChatSidebar\n\t\t\t\tv-if=\"dialogId.length > 0\" \n\t\t\t\t:originDialogId=\"dialogId\"\n\t\t\t\t:isActive=\"!hasCommentsOnTop\"\n\t\t\t\t@changePanel=\"onChangeSidebarPanel\"\n\t\t\t/>\n\t\t</div>\n\t`,\n};\n"],"names":["CallTypes","video","id","locCode","start","dialogId","Messenger","startVideoCall","audio","beta","dialog","Core","getStore","getters","CallManager","getInstance","createBetaCallRoom","chatId","CallMenu","BaseMenu","constructor","getMenuOptions","className","getMenuClassName","angle","offsetLeft","offsetTop","getMenuItems","delimiter","isAvailable","context","text","Loc","getMessage","onclick","emit","events","onMenuItemClick","menuInstance","close","disabled","callType","Analytics","onStartCallClick","type","AnalyticsType","privateCall","groupCall","section","AnalyticsSection","chatWindow","subSection","AnalyticsSubSection","contextMenu","element","AnalyticsElement","videocall","audiocall","phones","personalMobile","title","html","startPhoneCall","workPhone","innerPhone","isActive","FeatureManager","isFeatureAvailable","Feature","zoomActive","classNames","zoomAvailable","push","join","BX","UI","InfoHelper","show","phoneNumber","Tag","render","getCurrentCallDialogId","chatCanBeCalled","chatIsAllowedToCall","PermissionManager","canPerformAction","ChatActionType","call","ChatType","user","runAction","RestMethod","imV2CallZoomCreate","data","catch","errors","errorText","notConnected","some","error","code","userProfileUri","getUserId","replace","Notification","Center","notify","content","CallButton","directives","hint","props","String","required","emits","lastCallType","computed","$store","isConference","videoconf","callButtonText","loc","hasActiveCurrentCall","hasActiveAnotherCall","userLimit","getCallUserLimit","isChatUserLimitExceeded","hintContent","popupOptions","bindOptions","position","targetContainer","document","body","created","getLastCallChoice","subscribeToMenuItemClick","methods","getCallMenu","subscribe","event","callTypeId","getData","saveLastCallChoice","callMenu","onButtonClick","window","onMenuClick","shouldShowMenu","openMenu","$refs","menu","onStartConferenceClick","startButton","openConference","public","result","LocalStorageManager","get","LocalStorageKey","set","phraseCode","replacements","$Bitrix","template","ParamsByLinkType","ChatEntityLinkType","tasks","calendar","sonetGroup","mail","contact","deal","lead","dynamic","EntityLink","name","entityType","entityLink","entityUrl","url","containerClassName","linkText","UserCounterPhraseCodeByChatType","openChannel","channel","generalChannel","default","GroupChatTitle","components","EditableChatTitle","LineLoader","FadeAnimation","hasEntityLink","Boolean","userCounterPhraseCode","userCounterText","getMessagePlural","userCounter","ONE_MINUTE","UserTitle","ChatTitle","userLastOnlineText","userPosition","userLastOnline","userLink","Utils","getProfileLink","watch","value","updateUserOnline","userLastOnlineInterval","setInterval","beforeUnmount","clearInterval","HeaderAvatar","ChatAvatar","AvatarSize","isUser","canChangeAvatar","avatar","onAvatarClick","avatarInput","click","onAvatarSelect","input","target","file","files","preparedAvatar","getChatService","prepareAvatar","changeAvatar","chatService","ChatService","ChatHeader","AddToChat","UserChatTitle","inject","withCallButton","withSearchButton","withSidebarButton","showAddToChatPopup","isInited","inited","isBot","bot","showCallButton","showInviteButton","extend","showSearchButton","showSidebarButton","openSidebar","isSidebarOpened","Type","isStringFilled","currentSidebarPanel","isMessageSearchActive","SidebarDetailBlock","messageSearch","isMembersPanelActive","members","chatTitleComponent","toggleRightPanel","EventEmitter","EventType","sidebar","panel","open","main","toggleSearchPanel","onMembersClick","onNewTitleSubmit","newTitle","renameChat","Height","chatHeader","pinnedMessages","blockedTextarea","dropAreaOffset","DropArea","container","Object","showDropArea","lastDropAreaEnterTarget","hasPinnedMessages","length","dropAreaStyles","offset","top","immediate","handler","newValue","isElementNode","bindEvents","unbindEvents","Event","bind","onDragEnter","onDragLeave","onDragOver","onDrop","unbind","stopPropagation","preventDefault","success","hasDataTransferOnlyFiles","dataTransfer","isChannelType","ChannelManager","isChannel","uploaderId","getUploadingService","uploadFromDragAndDrop","sendAsFile","autoUpload","textarea","openUploadPreview","uploadingService","UploadingService","BUTTON_BACKGROUND_COLOR","BUTTON_HOVER_COLOR","BUTTON_TEXT_COLOR","MutePanel","ChatButton","ButtonSize","isMuted","muteList","includes","buttonText","mutedCode","unmutedCode","buttonColorScheme","borderColor","Color","transparent","backgroundColor","iconColor","textColor","hoverColor","unmuteChat","muteChat","JoinPanel","ButtonColor","joinChat","LoadingBar","TextareaObserverDirective","mounted","binding","instance","textareaResizeManager","observeTextarea","unobserveTextarea","BaseChatContent","ChatDialog","ChatTextarea","ChatSidebar","provide","backgroundId","Number","textareaHeight","showLoadingBar","canSend","send","isGuest","role","UserRole","guest","hasCommentsOnTop","containerClasses","alignment","Settings","appearance","backgroundStyle","ThemeManager","getBackgroundStyleById","getCurrentBackgroundStyle","dialogContainerStyle","height","oldValue","scrollToBottom","animation","initTextareaResizeManager","ResizeManager","onHeightChange","onTextareaHeightChange","onTextareaMount","textareaContainer","clientHeight","newHeight","onShowLoadingBar","onHideLoadingBar","onChangeSidebarPanel","hideLoadingBar","unsubscribe"],"mappings":"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"}