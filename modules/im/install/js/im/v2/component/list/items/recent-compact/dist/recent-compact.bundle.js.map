{"version":3,"file":"recent-compact.bundle.js","sources":["../src/components/recent-item.js","../src/components/active-call.js","../src/components/empty-state.js","../src/recent-compact.js"],"sourcesContent":["import { Core } from 'im.v2.application.core';\nimport { ChatType } from 'im.v2.const';\nimport { ChatAvatar, AvatarSize } from 'im.v2.component.elements';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelRecentItem, ImModelChat } from 'im.v2.model';\n\n// @vue/component\nexport const RecentItem = {\n\tname: 'RecentItem',\n\tcomponents: { ChatAvatar },\n\tprops:\n\t{\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tAvatarSize: () => AvatarSize,\n\t\trecentItem(): ImModelRecentItem\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\tdialog(): ImModelChat\n\t\t{\n\t\t\treturn this.$store.getters['chats/get'](this.recentItem.dialogId, true);\n\t\t},\n\t\tisUser(): boolean\n\t\t{\n\t\t\treturn this.dialog.type === ChatType.user;\n\t\t},\n\t\tisChatMuted(): boolean\n\t\t{\n\t\t\tif (this.isUser)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst isMuted = this.dialog.muteList.find((element) => {\n\t\t\t\treturn element === Core.getUserId();\n\t\t\t});\n\n\t\t\treturn Boolean(isMuted);\n\t\t},\n\t\tinvitation(): { isActive: boolean, originator: number, canResend: boolean }\n\t\t{\n\t\t\treturn this.recentItem.invitation;\n\t\t},\n\t\ttotalCounter(): number\n\t\t{\n\t\t\treturn this.dialog.counter + this.channelCommentsCounter;\n\t\t},\n\t\tchannelCommentsCounter(): number\n\t\t{\n\t\t\treturn this.$store.getters['counters/getChannelCommentsCounter'](this.dialog.chatId);\n\t\t},\n\t\tformattedCounter(): string\n\t\t{\n\t\t\treturn this.totalCounter > 99 ? '99+' : this.totalCounter.toString();\n\t\t},\n\t\twrapClasses(): Object\n\t\t{\n\t\t\treturn { '--pinned': this.recentItem.pinned };\n\t\t},\n\t\titemClasses(): Object\n\t\t{\n\t\t\treturn { '--no-counter': this.totalCounter === 0 };\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\t// language=Vue\n\ttemplate: `\n\t\t<div :data-id=\"recentItem.dialogId\" :class=\"wrapClasses\" class=\"bx-im-list-recent-compact-item__wrap\">\n\t\t\t<div :class=\"itemClasses\" class=\"bx-im-list-recent-compact-item__container\" ref=\"container\">\n\t\t\t\t<div class=\"bx-im-list-recent-compact-item__avatar_container\">\n\t\t\t\t\t<div v-if=\"invitation.isActive\" class=\"bx-im-list-recent-compact-item__avatar_invitation\"></div>\n\t\t\t\t\t<ChatAvatar \n\t\t\t\t\t\tv-else \n\t\t\t\t\t\t:contextDialogId=\"recentItem.dialogId\"\n\t\t\t\t\t\t:avatarDialogId=\"recentItem.dialogId\"\n\t\t\t\t\t\t:size=\"AvatarSize.M\" \n\t\t\t\t\t\t:withSpecialTypes=\"false\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div v-if=\"totalCounter > 0\" :class=\"{'--muted': isChatMuted}\" class=\"bx-im-list-recent-compact-item__avatar_counter\">\n\t\t\t\t\t\t{{ formattedCounter }}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import { ChatAvatar, AvatarSize } from 'im.v2.component.elements';\n\nimport type { ImModelCallItem } from 'im.v2.model';\n\n// @vue/component\nexport const ActiveCall = {\n\tname: 'ActiveCall',\n\tcomponents: { ChatAvatar },\n\tprops:\n\t{\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t},\n\temits: ['click'],\n\tcomputed:\n\t{\n\t\tAvatarSize: () => AvatarSize,\n\t\tactiveCall(): ImModelCallItem\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonClick(event)\n\t\t{\n\t\t\tconst recentItem = this.$store.getters['recent/get'](this.activeCall.dialogId);\n\t\t\tif (!recentItem)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$emit('click', { item: recentItem, $event: event });\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div :data-id=\"activeCall.dialogId\" class=\"bx-im-list-recent-compact-item__wrap\">\n\t\t\t<div @click=\"onClick\" class=\"bx-im-list-recent-compact-item__container\">\n\t\t\t\t<div class=\"bx-im-list-recent-compact-item__avatar_container\">\n\t\t\t\t\t<ChatAvatar \n\t\t\t\t\t\t:avatarDialogId=\"activeCall.dialogId\"\n\t\t\t\t\t\t:contextDialogId=\"activeCall.dialogId\"\n\t\t\t\t\t\t:size=\"AvatarSize.M\" \n\t\t\t\t\t\t:withSpecialTypes=\"false\" \n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"bx-im-list-recent-compact-active-call__icon\" :class=\"'--' + activeCall.state\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n","import type { JsonObject } from 'main.core';\n\n// @vue/component\nexport const EmptyState = {\n\tname: 'EmptyState',\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tmethods:\n\t{\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-list-recent-compact__empty\">\n\t\t\t{{ loc('IM_LIST_RECENT_COMPACT_EMPTY') }}\n\t\t</div>\n\t`,\n};\n","import { Core } from 'im.v2.application.core';\nimport { ChatType, Settings } from 'im.v2.const';\nimport { Utils } from 'im.v2.lib.utils';\nimport { RecentService } from 'im.v2.provider.service';\nimport { RecentMenu } from 'im.v2.lib.menu';\nimport { Messenger } from 'im.public';\nimport 'im.v2.css.tokens';\n\nimport { RecentItem } from './components/recent-item';\nimport { ActiveCall } from './components/active-call';\nimport { EmptyState } from './components/empty-state';\n\nimport './css/recent-list.css';\n\nimport type { JsonObject } from 'main.core';\nimport type { ImModelRecentItem, ImModelCallItem } from 'im.v2.model';\n\n// @vue/component\nexport const RecentList = {\n\tname: 'RecentList',\n\tcomponents: { RecentItem, ActiveCall, EmptyState },\n\temits: ['chatClick'],\n\tdata(): JsonObject\n\t{\n\t\treturn {};\n\t},\n\tcomputed:\n\t{\n\t\tcollection(): ImModelRecentItem[]\n\t\t{\n\t\t\treturn this.getRecentService().getCollection();\n\t\t},\n\t\tpreparedItems(): ImModelRecentItem[]\n\t\t{\n\t\t\tconst filteredCollection = this.collection.filter((item) => {\n\t\t\t\tlet result = true;\n\t\t\t\tif (!this.showBirthdays && item.isBirthdayPlaceholder)\n\t\t\t\t{\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\n\t\t\t\tif (item.isFakeElement && !this.isFakeItemNeeded(item))\n\t\t\t\t{\n\t\t\t\t\tresult = false;\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t});\n\n\t\t\treturn [...filteredCollection].sort((a, b) => {\n\t\t\t\tconst firstDate = this.$store.getters['recent/getSortDate'](a.dialogId);\n\t\t\t\tconst secondDate = this.$store.getters['recent/getSortDate'](b.dialogId);\n\n\t\t\t\treturn secondDate - firstDate;\n\t\t\t});\n\t\t},\n\t\tactiveCalls(): ImModelCallItem[]\n\t\t{\n\t\t\treturn this.$store.getters['recent/calls/get'];\n\t\t},\n\t\tpinnedItems(): ImModelRecentItem[]\n\t\t{\n\t\t\treturn this.preparedItems.filter((item) => {\n\t\t\t\treturn item.pinned === true;\n\t\t\t});\n\t\t},\n\t\tgeneralItems(): ImModelRecentItem[]\n\t\t{\n\t\t\treturn this.preparedItems.filter((item) => {\n\t\t\t\treturn item.pinned === false;\n\t\t\t});\n\t\t},\n\t\tshowBirthdays(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['application/settings/get'](Settings.recent.showBirthday);\n\t\t},\n\t\tshowInvited(): boolean\n\t\t{\n\t\t\treturn this.$store.getters['application/settings/get'](Settings.recent.showInvited);\n\t\t},\n\t},\n\tasync created()\n\t{\n\t\tthis.contextMenuManager = new RecentMenu();\n\n\t\tthis.managePreloadedList();\n\n\t\tawait this.getRecentService().loadFirstPage();\n\t},\n\tbeforeUnmount()\n\t{\n\t\tthis.contextMenuManager.destroy();\n\t},\n\tmethods:\n\t{\n\t\tonClick(item)\n\t\t{\n\t\t\tMessenger.openChat(item.dialogId);\n\t\t},\n\t\tonRightClick(item, event)\n\t\t{\n\t\t\tif (Utils.key.isCombination(event, 'Alt+Shift'))\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst context = {\n\t\t\t\t...item,\n\t\t\t\tcompactMode: true,\n\t\t\t};\n\n\t\t\tthis.contextMenuManager.openMenu(context, event.currentTarget);\n\n\t\t\tevent.preventDefault();\n\t\t},\n\t\tmanagePreloadedList()\n\t\t{\n\t\t\tconst { preloadedList } = Core.getApplicationData();\n\t\t\tif (!preloadedList)\n\t\t\t{\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.getRecentService().setPreloadedData(preloadedList);\n\t\t},\n\t\tisFakeItemNeeded(item: ImModelRecentItem): boolean\n\t\t{\n\t\t\tconst dialog = this.$store.getters['chats/get'](item.dialogId, true);\n\t\t\tconst isUser = dialog.type === ChatType.user;\n\t\t\tconst hasBirthday = isUser && this.showBirthdays && this.$store.getters['users/hasBirthday'](item.dialogId);\n\n\t\t\treturn this.showInvited || hasBirthday;\n\t\t},\n\t\tgetRecentService(): RecentService\n\t\t{\n\t\t\tif (!this.service)\n\t\t\t{\n\t\t\t\tthis.service = RecentService.getInstance();\n\t\t\t}\n\n\t\t\treturn this.service;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-messenger__scope bx-im-list-recent-compact__container\">\n\t\t\t<div v-if=\"activeCalls.length > 0\" class=\"bx-im-list-recent-compact__calls_container\">\n\t\t\t\t<ActiveCall\n\t\t\t\t\tv-for=\"activeCall in activeCalls\"\n\t\t\t\t\t:key=\"activeCall.dialogId\"\n\t\t\t\t\t:item=\"activeCall\"\n\t\t\t\t\t@click=\"onClick\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-list-recent-compact__scroll-container\">\n\t\t\t\t<div v-if=\"pinnedItems.length > 0\" class=\"bx-im-list-recent-compact__pinned_container\">\n\t\t\t\t\t<RecentItem\n\t\t\t\t\t\tv-for=\"item in pinnedItems\"\n\t\t\t\t\t\t:key=\"item.dialogId\"\n\t\t\t\t\t\t:item=\"item\"\n\t\t\t\t\t\t@click=\"onClick(item)\"\n\t\t\t\t\t\t@click.right=\"onRightClick(item, $event)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-list-recent-compact__general_container\">\n\t\t\t\t\t<RecentItem\n\t\t\t\t\t\tv-for=\"item in generalItems\"\n\t\t\t\t\t\t:key=\"item.dialogId\"\n\t\t\t\t\t\t:item=\"item\"\n\t\t\t\t\t\t@click=\"onClick(item)\"\n\t\t\t\t\t\t@click.right=\"onRightClick(item, $event)\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\t\n\t\t\t\t<EmptyState v-if=\"collection.length === 0\" />\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n"],"names":["RecentItem","name","components","ChatAvatar","props","item","type","Object","required","data","computed","AvatarSize","recentItem","dialog","$store","getters","dialogId","isUser","ChatType","user","isChatMuted","isMuted","muteList","find","element","Core","getUserId","Boolean","invitation","totalCounter","counter","channelCommentsCounter","chatId","formattedCounter","toString","wrapClasses","pinned","itemClasses","methods","loc","phraseCode","$Bitrix","Loc","getMessage","template","ActiveCall","emits","activeCall","onClick","event","$emit","$event","EmptyState","RecentList","collection","getRecentService","getCollection","preparedItems","filteredCollection","filter","result","showBirthdays","isBirthdayPlaceholder","isFakeElement","isFakeItemNeeded","sort","a","b","firstDate","secondDate","activeCalls","pinnedItems","generalItems","Settings","recent","showBirthday","showInvited","created","contextMenuManager","RecentMenu","managePreloadedList","loadFirstPage","beforeUnmount","destroy","Messenger","openChat","onRightClick","Utils","key","isCombination","context","compactMode","openMenu","currentTarget","preventDefault","preloadedList","getApplicationData","setPreloadedData","hasBirthday","service","RecentService","getInstance"],"mappings":"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"}