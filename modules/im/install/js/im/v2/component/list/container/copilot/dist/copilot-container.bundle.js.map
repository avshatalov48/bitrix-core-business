{"version":3,"file":"copilot-container.bundle.js","sources":["../src/copilot-container.js"],"sourcesContent":["import { Messenger } from 'im.public';\nimport { CopilotList } from 'im.v2.component.list.items.copilot';\nimport { Layout } from 'im.v2.const';\nimport { Logger } from 'im.v2.lib.logger';\nimport { CopilotService } from 'im.v2.provider.service';\n\nimport type { JsonObject } from 'main.core';\n\n// import { HeaderMenu } from './components/header-menu';\n// import { CreateChatMenu } from './components/create-chat-menu/create-chat-menu';\n\nimport './css/copilot-container.css';\n\n// @vue/component\nexport const CopilotListContainer = {\n\tname: 'CopilotListContainer',\n\tcomponents: { CopilotList },\n\temits: ['selectEntity'],\n\tdata(): JsonObject\n\t{\n\t\treturn {\n\t\t\tisCreatingChat: false,\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tLogger.warn('List: Copilot container created');\n\t},\n\tmethods:\n\t{\n\t\tasync onCreateChatClick()\n\t\t{\n\t\t\tthis.isCreatingChat = true;\n\n\t\t\tconst newDialogId = await this.getCopilotService().createChat()\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.isCreatingChat = false;\n\t\t\t\t\tthis.showCreateChatError();\n\t\t\t\t});\n\n\t\t\tthis.isCreatingChat = false;\n\t\t\tvoid Messenger.openCopilot(newDialogId);\n\t\t},\n\t\tonChatClick(dialogId)\n\t\t{\n\t\t\tthis.$emit('selectEntity', { layoutName: Layout.copilot.name, entityId: dialogId });\n\t\t},\n\t\tshowCreateChatError()\n\t\t{\n\t\t\tBX.UI.Notification.Center.notify({\n\t\t\t\tcontent: this.loc('IM_LIST_CONTAINER_COPILOT_CREATE_CHAT_ERROR'),\n\t\t\t});\n\t\t},\n\t\tgetCopilotService(): CopilotService\n\t\t{\n\t\t\tif (!this.copilotService)\n\t\t\t{\n\t\t\t\tthis.copilotService = new CopilotService();\n\t\t\t}\n\n\t\t\treturn this.copilotService;\n\t\t},\n\t\tloc(phraseCode: string): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<div class=\"bx-im-list-container-copilot__scope bx-im-list-container-copilot__container\">\n\t\t\t<div class=\"bx-im-list-container-copilot__header_container\">\n\t\t\t\t<div class=\"bx-im-list-container-copilot__header_title\">CoPilot</div>\n\t\t\t\t<div\n\t\t\t\t\tclass=\"bx-im-list-container-copilot__create-chat\"\n\t\t\t\t\t:class=\"{'--loading': isCreatingChat}\"\n\t\t\t\t\t@click=\"onCreateChatClick\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"bx-im-list-container-copilot__create-chat_icon\"></div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"bx-im-list-container-copilot__elements_container\">\n\t\t\t\t<div class=\"bx-im-list-container-copilot__elements\">\n\t\t\t\t\t<CopilotList @chatClick=\"onChatClick\" />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`,\n};\n"],"names":["CopilotListContainer","name","components","CopilotList","emits","data","isCreatingChat","created","Logger","warn","methods","onCreateChatClick","newDialogId","getCopilotService","createChat","catch","showCreateChatError","Messenger","openCopilot","onChatClick","dialogId","$emit","layoutName","Layout","copilot","entityId","BX","UI","Notification","Center","notify","content","loc","copilotService","CopilotService","phraseCode","$Bitrix","Loc","getMessage","template"],"mappings":";;;;;;;;CAaA;AACA,OAAaA,oBAAoB,GAAG;GACnCC,IAAI,EAAE,sBAAsB;GAC5BC,UAAU,EAAE;kBAAEC;IAAa;GAC3BC,KAAK,EAAE,CAAC,cAAc,CAAC;GACvBC,IAAI,GACJ;KACC,OAAO;OACNC,cAAc,EAAE;MAChB;IACD;GACDC,OAAO,GACP;KACCC,uBAAM,CAACC,IAAI,CAAC,iCAAiC,CAAC;IAC9C;GACDC,OAAO,EACP;KACC,MAAMC,iBAAiB,GACvB;OACC,IAAI,CAACL,cAAc,GAAG,IAAI;OAE1B,MAAMM,WAAW,GAAG,MAAM,IAAI,CAACC,iBAAiB,EAAE,CAACC,UAAU,EAAE,CAC7DC,KAAK,CAAC,MAAM;SACZ,IAAI,CAACT,cAAc,GAAG,KAAK;SAC3B,IAAI,CAACU,mBAAmB,EAAE;QAC1B,CAAC;OAEH,IAAI,CAACV,cAAc,GAAG,KAAK;OAC3B,KAAKW,mBAAS,CAACC,WAAW,CAACN,WAAW,CAAC;MACvC;KACDO,WAAW,CAACC,QAAQ,EACpB;OACC,IAAI,CAACC,KAAK,CAAC,cAAc,EAAE;SAAEC,UAAU,EAAEC,kBAAM,CAACC,OAAO,CAACvB,IAAI;SAAEwB,QAAQ,EAAEL;QAAU,CAAC;MACnF;KACDJ,mBAAmB,GACnB;OACCU,EAAE,CAACC,EAAE,CAACC,YAAY,CAACC,MAAM,CAACC,MAAM,CAAC;SAChCC,OAAO,EAAE,IAAI,CAACC,GAAG,CAAC,6CAA6C;QAC/D,CAAC;MACF;KACDnB,iBAAiB,GACjB;OACC,IAAI,CAAC,IAAI,CAACoB,cAAc,EACxB;SACC,IAAI,CAACA,cAAc,GAAG,IAAIC,qCAAc,EAAE;;OAG3C,OAAO,IAAI,CAACD,cAAc;MAC1B;KACDD,GAAG,CAACG,UAAkB,EACtB;OACC,OAAO,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,UAAU,CAACH,UAAU,CAAC;;IAE/C;GACDI,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;CAmBZ,CAAC;;;;;;;;"}