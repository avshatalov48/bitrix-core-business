this.BX=this.BX||{};this.BX.Landing=this.BX.Landing||{};this.BX.Landing.UI=this.BX.Landing.UI||{};(function(e,a,t,n,i,l,s){"use strict";var r,o,d;function c(e,a){u(e,a);a.add(e)}function p(e,a,t){u(e,a);a.set(e,t)}function u(e,a){if(a.has(e)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function h(e,a,t){if(!a.has(e)){throw new TypeError("attempted to get private field on non-instance")}return t}var b=new WeakMap;var m=new WeakSet;var g=new WeakSet;var f=function(e){babelHelpers.inherits(t,e);function t(){var e;var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,t);e=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(t).call(this,n));c(babelHelpers.assertThisInitialized(e),g);c(babelHelpers.assertThisInitialized(e),m);p(babelHelpers.assertThisInitialized(e),b,{writable:true,value:void 0});e.setEventNamespace("BX.Landing.UI.Form.StyleForm");e.subscribeFromOptions(s.fetchEventsFromOptions(n));a.Dom.addClass(e.layout,"landing-ui-form-style");e.iframe="iframe"in n?n.iframe:null;e.node="node"in n?n.node:null;e.selector="selector"in n?n.selector:null;e.collapsed="collapsed"in n?n.collapsed:null;e.currentTarget="currentTarget"in n?n.currentTarget:null;e.specialType="specialType"in n?n.specialType:null;babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(e),b,new Map);e.onHeaderEnter=e.onHeaderEnter.bind(babelHelpers.assertThisInitialized(e));e.onHeaderLeave=e.onHeaderLeave.bind(babelHelpers.assertThisInitialized(e));e.onHeaderClick=e.onHeaderClick.bind(babelHelpers.assertThisInitialized(e));e.prepareHeader();a.Event.bind(e.header,"click",e.onHeaderClick);a.Event.bind(e.header,"mouseenter",e.onHeaderEnter);a.Event.bind(e.header,"mouseleave",e.onHeaderLeave);if(e.iframe){e.onFrameLoad()}if(e.collapsed){a.Dom.addClass(e.layout,"landing-ui-form-style--collapsed")}if(e.specialType&&e.specialType==="crm_forms"&&l.Env.getInstance().getOptions().specialType==="crm_forms"){h(babelHelpers.assertThisInitialized(e),g,y).call(babelHelpers.assertThisInitialized(e))}return e}babelHelpers.createClass(t,[{key:"onFrameLoad",value:function e(){if(!this.node){this.node=babelHelpers.toConsumableArray(this.iframe.document.querySelectorAll(this.selector))}}},{key:"onHeaderEnter",value:function e(){n.Highlight.getInstance().show(this.node)}},{key:"onHeaderLeave",value:function e(){n.Highlight.getInstance().hide()}},{key:"onHeaderClick",value:function e(t){t.preventDefault();a.Dom.toggleClass(this.layout,"landing-ui-form-style--collapsed")}},{key:"addField",value:function e(a){if(a){var t;var n=a===null||a===void 0?void 0:(t=a.data)===null||t===void 0?void 0:t.attrKey;a.subscribe("onChange",this.onChange.bind(this));a.subscribe("onInit",this.onInit.bind(this));this.fields.add(a);BX.Dom.append(a.layout,this.body);if(n){babelHelpers.classPrivateFieldGet(this,b).set(n,a.getLayout())}}}},{key:"onChange",value:function e(a){h(this,m,v).call(this,a.getData());this.emit("onChange")}},{key:"onInit",value:function e(a){h(this,m,v).call(this,a.getData());this.emit("onInit")}},{key:"prepareHeader",value:function e(){var a=BX.Dom.create({tag:"div",props:{classList:"landing-ui-form-header-text"}});if(this.header.childNodes){this.header.childNodes.forEach((function(e){BX.Dom.append(e,a)}))}BX.Dom.append(a,this.header)}}]);return t}(t.BaseForm);function v(e){var t=this;if(e.hide&&a.Type.isArray(e.hide)){e.hide.map((function(e){var a=babelHelpers.classPrivateFieldGet(t,b).get(e);if(a){BX.Dom.style(a,"display","none")}return null}))}if(e.show&&a.Type.isArray(e.show)){e.show.map((function(e){var a=babelHelpers.classPrivateFieldGet(t,b).get(e);if(a){BX.Dom.style(a,"display","block")}return null}))}}function y(){var e=l.Env.getInstance().getOptions().allow_minisites;var t=e?"":a.Tag.render(r||(r=babelHelpers.taggedTemplateLiteral(['<span class="landing-ui-form-lock-icon"></span>'])));var n=a.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<span class="landing-ui-form-replace-by-templates-card-button ui-btn ui-btn-sm ui-btn-primary ui-btn-hover ui-btn-round">\n\t\t\t\t',"\n\t\t\t\t","\n\t\t\t</span>\n\t\t"])),a.Loc.getMessage("LANDING_REPLACE_BY_TEMPLATES_BUTTON"),t);var i=a.Tag.render(d||(d=babelHelpers.taggedTemplateLiteral(['<div class="landing-ui-form-replace-by-templates-card">\n\t\t\t<div class="landing-ui-form-replace-by-templates-card-title">\n\t\t\t\t',"\n\t\t\t</div>\n\t\t\t","\n\t\t</div>"])),a.Loc.getMessage("LANDING_REPLACE_BY_TEMPLATES_TITLE"),n);a.Dom.insertBefore(i,this.header);a.Event.bind(n,"click",(function(){if(!e){BX.UI.InfoHelper.show("limit_crm_forms_templates");return}var a=new BX.Landing.Metrika(true);a.sendLabel(null,"templateMarket","open&replaceLid="+landingParams["LANDING_ID"]);var t=landingParams["PAGE_URL_LANDING_REPLACE_FROM_STYLE"];if(t){BX.SidePanel.Instance.open(t,{allowChangeHistory:false,cacheable:false,customLeftBoundary:0})}}))}e.StyleForm=f})(this.BX.Landing.UI.Form=this.BX.Landing.UI.Form||{},BX,BX.Landing.UI.Form,BX.Landing.UI,BX.Landing.UI.Field,BX.Landing,BX.Landing.UI.Component);
//# sourceMappingURL=styleform.bundle.map.js