{"version":3,"file":"conference-create.bundle.js","sources":["../src/conference-create.js"],"sourcesContent":["import 'ui.design-tokens';\nimport 'ui.fonts.opensans';\n\nimport { ajax as Ajax, Reflection, Runtime } from \"main.core\";\nimport {BitrixVue} from \"ui.vue\";\nimport {Logger} from \"im.lib.logger\";\nimport {Clipboard} from \"im.lib.clipboard\";\nimport \"ui.vue.components.hint\";\n\nimport \"./conference-create.css\";\n\nBitrixVue.component('bx-im-component-conference-create',\n{\n\tprops: ['userId', 'darkTheme', 'broadcastingEnabled'],\n\tdata: function() {\n\t\treturn {\n\t\t\ttitle: '',\n\t\t\tdefaultTitle: '',\n\t\t\tbroadcastMode: false,\n\t\t\tlinkGenerated: false,\n\t\t\tisCreatingConference: false,\n\t\t\tconferenceCreated: false,\n\t\t\taliasData: null,\n\t\t\tuserSelectorLoaded: false,\n\t\t\tuserSelector: null,\n\t\t\tselectedUsers: [],\n\t\t\tselectedPresenters: [],\n\t\t\tchatId: null,\n\t\t\terrors: []\n\t\t};\n\t},\n\tcreated()\n\t{\n\t\tthis.checkRequirements();\n\t\tthis.selectedUsers.push(this.userId);\n\t\tthis.selectedPresenters.push(this.userId);\n\t\tthis.generateLink();\n\t},\n\tmounted()\n\t{\n\t\tthis.initUserSelector().then(() => {\n\t\t\tthis.userSelector.renderTo(this.$refs['userSelector']);\n\t\t\tthis.initPresenterSelector();\n\t\t\tthis.presenterSelector.renderTo(this.$refs['presenterSelector']);\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs['titleInput'].focus();\n\t\t\t});\n\t\t});\n\t},\n\tcomputed:\n\t{\n\t\tconferenceLink()\n\t\t{\n\t\t\tif (this.linkGenerated)\n\t\t\t{\n\t\t\t\treturn this.aliasData['LINK'];\n\t\t\t}\n\n\t\t\treturn this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_LINK_LOADING'];\n\t\t},\n\t\tdefaultTitlePlaceholder()\n\t\t{\n\t\t\tif (this.linkGenerated)\n\t\t\t{\n\t\t\t\treturn this.defaultTitle;\n\t\t\t}\n\n\t\t\treturn this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_PLACEHOLDER_TITLE_2'];\n\t\t},\n\t\tcontainerClasses()\n\t\t{\n\t\t\tconst classes = ['bx-conference-quick-create-wrap'];\n\n\t\t\tif (this.darkTheme)\n\t\t\t{\n\t\t\t\tclasses.push('bx-conference-quick-create-wrap-dark');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t\tstartButtonClasses()\n\t\t{\n\t\t\tconst classes = ['ui-btn', 'ui-btn-primary'];\n\n\t\t\tif (!this.userSelectorLoaded)\n\t\t\t{\n\t\t\t\tclasses.push('ui-btn-disabled');\n\t\t\t}\n\n\t\t\tif (this.errors.length > 0)\n\t\t\t{\n\t\t\t\tclasses.push('ui-btn-disabled', 'ui-btn-icon-lock');\n\t\t\t}\n\n\t\t\tif (this.isCreatingConference)\n\t\t\t{\n\t\t\t\tclasses.push('ui-btn-wait');\n\t\t\t}\n\n\t\t\treturn classes;\n\t\t},\n\t\tlocalize()\n\t\t{\n\t\t\treturn BX.message;\n\t\t}\n\t},\n\tmethods:\n\t{\n\t\tgenerateLink()\n\t\t{\n\t\t\tAjax.runAction('im.conference.prepare', {\n\t\t\t\tjson: {},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tcreationType: 'chat'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.aliasData = response.data['ALIAS_DATA'];\n\t\t\t\tthis.defaultTitle = response.data['DEFAULT_TITLE'];\n\t\t\t\tthis.linkGenerated = true;\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tLogger.warn('error', response[\"errors\"][0].message);\n\t\t\t});\n\t\t},\n\t\tcopyLink()\n\t\t{\n\t\t\tif (this.linkGenerated && Reflection.getClass('BX.UI.Notification.Center'))\n\t\t\t{\n\t\t\t\tClipboard.copy(this.aliasData['LINK']);\n\n\t\t\t\ttop.BX.UI.Notification.Center.notify({\n\t\t\t\t\tcontent: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_COPY_CONFIRMATION']\n\t\t\t\t})\n\t\t\t}\n\t\t},\n\t\tsaveConference()\n\t\t{\n\t\t\tif (!this.linkGenerated)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst fieldsToSubmit = {\n\t\t\t\tid: 0,\n\t\t\t\ttitle: this.title,\n\t\t\t\tpassword_needed: false,\n\t\t\t\tusers: this.selectedUsers,\n\t\t\t\tbroadcast_mode: this.broadcastMode,\n\t\t\t\tpresenters: this.selectedPresenters\n\t\t\t};\n\n\t\t\tthis.clearErrors();\n\t\t\tthis.isCreatingConference = true;\n\t\t\tAjax.runAction('im.conference.create', {\n\t\t\t\tjson: {\n\t\t\t\t\tfields: fieldsToSubmit,\n\t\t\t\t\taliasData: this.aliasData\n\t\t\t\t},\n\t\t\t\tanalyticsLabel: {\n\t\t\t\t\tcreationType: 'chat'\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then((response) => {\n\t\t\t\tthis.chatId = response.data['CHAT_ID'];\n\t\t\t\tthis.isCreatingConference = false;\n\t\t\t\tthis.conferenceCreated = true;\n\t\t\t\tthis.copyLink();\n\t\t\t})\n\t\t\t.catch((response) => {\n\t\t\t\tthis.isCreatingConference = false;\n\t\t\t\tthis.onFailedSubmit(response);\n\t\t\t});\n\t\t},\n\t\tstartConference()\n\t\t{\n\t\t\tthis.openChat();\n\t\t\tif (BXIM)\n\t\t\t{\n\t\t\t\tBXIM.openVideoconf(this.aliasData['ALIAS']);\n\t\t\t}\n\t\t},\n\t\tcancelCreation()\n\t\t{\n\t\t\tif (BXIM && BXIM.messenger)\n\t\t\t{\n\t\t\t\tBXIM.messenger.extraClose();\n\t\t\t}\n\t\t},\n\t\topenChat()\n\t\t{\n\t\t\tif (window.top[\"BXIM\"] && this.chatId)\n\t\t\t{\n\t\t\t\twindow.top[\"BXIM\"].openMessenger('chat' + this.chatId);\n\t\t\t}\n\t\t},\n\t\tinitUserSelector()\n\t\t{\n\t\t\treturn Runtime.loadExtension('ui.entity-selector').then((exports) => {\n\t\t\t\tthis.TagSelector = exports.TagSelector;\n\t\t\t\tthis.userSelectorLoaded = true;\n\n\t\t\t\tthis.userSelector = new this.TagSelector({\n\t\t\t\t\tid: 'user-tag-selector',\n\t\t\t\t\tdialogOptions: {\n\t\t\t\t\t\tid: 'user-tag-selector',\n\t\t\t\t\t\tpreselectedItems: [['user', this.userId]],\n\t\t\t\t\t\tundeselectedItems: [['user', this.userId]],\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\t\t\tthis.onUserSelect(event);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\t\t\tthis.onUserDeselect(event);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tentities: [\n\t\t\t\t\t\t\t{id: 'user', options: {inviteEmployeeLink: false}},\n\t\t\t\t\t\t\t{id: 'department'}\n\t\t\t\t\t\t],\n\t\t\t\t\t\tzIndex: 4000\n\t\t\t\t\t},\n\t\t\t\t\taddButtonCaption: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_ADD_USERS'],\n\t\t\t\t\taddButtonCaptionMore: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_ADD_USERS']\n\t\t\t\t});\n\t\t\t});\n\t\t},\n\t\tinitPresenterSelector()\n\t\t{\n\t\t\tthis.presenterSelector = new this.TagSelector({\n\t\t\t\tid: 'presenter-tag-selector',\n\t\t\t\tdialogOptions: {\n\t\t\t\t\tid: 'presenter-tag-selector',\n\t\t\t\t\tpreselectedItems: [['user', this.userId]],\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t'Item:onSelect': (event) => {\n\t\t\t\t\t\t\tthis.onPresenterSelect(event);\n\t\t\t\t\t\t},\n\t\t\t\t\t\t'Item:onDeselect': (event) => {\n\t\t\t\t\t\t\tthis.onPresenterDeselect(event);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tentities: [\n\t\t\t\t\t\t{id: 'user', options: {inviteEmployeeLink: false}},\n\t\t\t\t\t\t{id: 'department'}\n\t\t\t\t\t],\n\t\t\t\t\tzIndex: 4000\n\t\t\t\t},\n\t\t\t\taddButtonCaption: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_ADD_USERS'],\n\t\t\t\taddButtonCaptionMore: this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_ADD_USERS']\n\t\t\t});\n\t\t},\n\t\tcheckRequirements()\n\t\t{\n\t\t\tif (!BX.PULL.isPublishingEnabled())\n\t\t\t{\n\t\t\t\tthis.addError(this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_PUSH_ERROR']);\n\t\t\t}\n\n\t\t\tif (!BX.Call.Util.isCallServerAllowed())\n\t\t\t{\n\t\t\t\tthis.addError(this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_VOXIMPLANT_ERROR_WITH_LINK']);\n\t\t\t}\n\t\t},\n\t\taddError(errorText)\n\t\t{\n\t\t\tthis.errors.push(errorText);\n\t\t},\n\t\tclearErrors()\n\t\t{\n\t\t\tthis.errors = [];\n\t\t},\n\t\tonUserSelect(event)\n\t\t{\n\t\t\tconst index = this.selectedUsers.findIndex((userId) => {\n\t\t\t\treturn userId === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.selectedUsers.push(event.data.item.id);\n\t\t\t}\n\t\t},\n\t\tonUserDeselect(event)\n\t\t{\n\t\t\tconst index = this.selectedUsers.findIndex((userId) => {\n\t\t\t\treturn userId === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index > -1)\n\t\t\t{\n\t\t\t\tthis.selectedUsers.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tonPresenterSelect(event)\n\t\t{\n\t\t\tconst index = this.selectedPresenters.findIndex((userId) => {\n\t\t\t\treturn userId === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index === -1)\n\t\t\t{\n\t\t\t\tthis.selectedPresenters.push(event.data.item.id);\n\t\t\t}\n\t\t},\n\t\tonPresenterDeselect(event)\n\t\t{\n\t\t\tconst index = this.selectedPresenters.findIndex((userId) => {\n\t\t\t\treturn userId === event.data.item.id;\n\t\t\t});\n\n\t\t\tif (index > -1)\n\t\t\t{\n\t\t\t\tthis.selectedPresenters.splice(index, 1);\n\t\t\t}\n\t\t},\n\t\tonFailedSubmit(response)\n\t\t{\n\t\t\tlet errorMessage = response[\"errors\"][0].message;\n\t\t\tif (response[\"errors\"][0].code === 'NETWORK_ERROR')\n\t\t\t{\n\t\t\t\terrorMessage = this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_NETWORK_ERROR'];\n\t\t\t}\n\t\t\tthis.addError(errorMessage);\n\t\t}\n\t},\n\ttemplate:\n\t`\n\t\t<div :class=\"containerClasses\">\n\t\t\t<div class=\"bx-conference-quick-create-content\">\n\t\t\t\t<!-- Fields -->\n\t\t\t\t<template v-if=\"!conferenceCreated\">\n\t\t\t\t\t<!-- Title -->\n\t\t\t\t\t<div class=\"bx-conference-quick-create-title\">\n\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_HEADER_TITLE'] }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- Errors -->\n\t\t\t\t\t<template v-if=\"errors.length > 0\">\n\t\t\t\t\t\t<div class=\"ui-alert ui-alert-danger bx-conference-quick-create-error-wrap\">\n\t\t\t\t\t\t\t<span v-for=\"error in errors\" class=\"ui-alert-message\" v-html=\"error\"></span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t\t<!-- Title field -->\n\t\t\t\t\t<div class=\"bx-conference-quick-create-field-block\">\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-field-label\">\n\t\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_LABEL_TITLE'] }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\tv-model=\"title\"\n\t\t\t\t\t\t\t:placeholder=\"defaultTitlePlaceholder\"\n\t\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\t\tclass=\"bx-conference-quick-create-field-input\"\n\t\t\t\t\t\t\tref=\"titleInput\"\n\t\t\t\t\t\t>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- User selector field -->\n\t\t\t\t\t<div class=\"bx-conference-quick-create-field-block\">\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-field-label\">\n\t\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_LABEL_USERS'] }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<template v-if=\"userSelectorLoaded\">\n\t\t\t\t\t\t\t<div class=\"bx-conference-quick-create-selector-wrap\" ref=\"userSelector\"></div>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t\t<input type=\"text\" class=\"bx-conference-quick-create-field-input\" :placeholder=\"localize['BX_IM_COMPONENT_CONFERENCE_CREATE_USERS_LOADING']\" disabled>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</div>\n\t\t\t\t\t<!-- Broadcast mode field -->\n\t\t\t\t\t<template v-if=\"broadcastingEnabled\">\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-field-block-inline\">\n\t\t\t\t\t\t\t<input type=\"checkbox\" id=\"bx-conference-quick-create-field-broadcast-mode\" v-model=\"broadcastMode\">\n\t\t\t\t\t\t\t<label class=\"bx-conference-quick-create-field-label bx-conference-quick-create-broadcast-mode-label\" for=\"bx-conference-quick-create-field-broadcast-mode\">{{ localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BROADCAST_MODE'] }}</label>\n\t\t\t\t\t\t\t<bx-hint :text=\"localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BROADCAST_MODE_HINT']\"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<!-- Presenter selector field -->\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-field-block\" v-show=\"broadcastMode\">\n\t\t\t\t\t\t\t<div class=\"bx-conference-quick-create-field-label\">\n\t\t\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_PRESENTERS'] }}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div class=\"bx-conference-quick-create-selector-wrap\" ref=\"presenterSelector\"></div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</template>\n\t\t\t\t<!-- Confirmation -->\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class=\"bx-conference-quick-create-success-block\">\n\t\t\t\t\t\t<div class=\"bx-conference-quick-create-success-title\">\n\t\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_SUCCESS'] }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t\t<!-- Link field -->\n\t\t\t\t<div v-if=\"conferenceCreated\" class=\"bx-conference-quick-create-field-block\">\n\t\t\t\t\t<div class=\"bx-conference-quick-create-field-label\">\n\t\t\t\t\t\t{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_LABEL_LINK'] }}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"bx-conference-quick-create-link-wrap\">\n\t\t\t\t\t\t<input type=\"text\" class=\"bx-conference-quick-create-field-input\" :placeholder=\"conferenceLink\" disabled>\n\t\t\t\t\t\t<div @click=\"copyLink\" class=\"bx-conference-quick-create-link-copy\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<!-- Create button -->\n\t\t\t\t<div class=\"bx-conference-quick-create-button-wrap\">\n\t\t\t\t\t<template v-if=\"!conferenceCreated\">\n\t\t\t\t\t\t<button @click=\"saveConference\" class=\"bx-conference-quick-create-button-save\" :class=\"startButtonClasses\">{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BUTTON_SAVE'] }}</button>\n\t\t\t\t\t\t<button @click=\"cancelCreation\" class=\"ui-btn ui-btn-link bx-conference-quick-create-button-cancel\">{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BUTTON_CANCEL'] }}</button>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template v-else>\n\t\t\t\t\t\t<button @click=\"startConference\" class=\"bx-conference-quick-create-button-start\" :class=\"startButtonClasses\">{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BUTTON_START'] }}</button>\n\t\t\t\t\t\t<button @click=\"openChat\" class=\"ui-btn ui-btn-link bx-conference-quick-create-button-cancel\">{{ this.localize['BX_IM_COMPONENT_CONFERENCE_CREATE_BUTTON_OPEN_CHAT'] }}</button>\n\t\t\t\t\t</template>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t`\n});"],"names":["BitrixVue","component","props","data","title","defaultTitle","broadcastMode","linkGenerated","isCreatingConference","conferenceCreated","aliasData","userSelectorLoaded","userSelector","selectedUsers","selectedPresenters","chatId","errors","created","checkRequirements","push","userId","generateLink","mounted","initUserSelector","then","renderTo","$refs","initPresenterSelector","presenterSelector","$nextTick","focus","computed","conferenceLink","localize","defaultTitlePlaceholder","containerClasses","classes","darkTheme","startButtonClasses","length","BX","message","methods","Ajax","runAction","json","analyticsLabel","creationType","response","Logger","warn","copyLink","Reflection","getClass","Clipboard","copy","top","UI","Notification","Center","notify","content","saveConference","fieldsToSubmit","id","password_needed","users","broadcast_mode","presenters","clearErrors","fields","onFailedSubmit","startConference","openChat","BXIM","openVideoconf","cancelCreation","messenger","extraClose","window","openMessenger","Runtime","loadExtension","exports","TagSelector","dialogOptions","preselectedItems","undeselectedItems","events","event","onUserSelect","onUserDeselect","entities","options","inviteEmployeeLink","zIndex","addButtonCaption","addButtonCaptionMore","onPresenterSelect","onPresenterDeselect","PULL","isPublishingEnabled","addError","Call","Util","isCallServerAllowed","errorText","index","findIndex","item","splice","errorMessage","code","template"],"mappings":"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"}