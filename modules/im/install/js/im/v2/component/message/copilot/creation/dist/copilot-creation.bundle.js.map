{"version":3,"file":"copilot-creation.bundle.js","sources":["../src/copilot-creation.js"],"sourcesContent":["import { SendingService } from 'im.v2.provider.service';\nimport { BaseMessage } from 'im.v2.component.message.base';\nimport { AvatarSize, MessageAvatar } from 'im.v2.component.elements';\n\nimport './css/copilot-creation-message.css';\n\nimport type { ImModelMessage, ImModelCopilotPrompt, ImModelCopilotRole } from 'im.v2.model';\n\n// @vue/component\nexport const ChatCopilotCreationMessage = {\n\tname: 'ChatCopilotCreationMessage',\n\tcomponents: { BaseMessage, MessageAvatar },\n\tprops: {\n\t\titem: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tdialogId: {\n\t\t\ttype: String,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tcomputed:\n\t{\n\t\tAvatarSize: () => AvatarSize,\n\t\tmessage(): ImModelMessage\n\t\t{\n\t\t\treturn this.item;\n\t\t},\n\t\tpreparedTitle(): string\n\t\t{\n\t\t\tconst phrase = this.message.componentParams?.copilotRoleUpdated\n\t\t\t\t? 'IM_MESSAGE_COPILOT_CREATION_HEADER_TITLE_AFTER_CHANGE'\n\t\t\t\t: 'IM_MESSAGE_COPILOT_CREATION_HEADER_TITLE'\n\t\t\t;\n\n\t\t\treturn this.loc(phrase, {\n\t\t\t\t'#COPILOT_ROLE_NAME#': this.roleName,\n\t\t\t});\n\t\t},\n\t\tpromptList(): ImModelCopilotPrompt[]\n\t\t{\n\t\t\treturn this.$store.getters['copilot/messages/getPrompts'](this.message.id);\n\t\t},\n\t\trole(): ImModelCopilotRole\n\t\t{\n\t\t\treturn this.$store.getters['copilot/messages/getRole'](this.message.id);\n\t\t},\n\t\troleName(): string\n\t\t{\n\t\t\treturn this.role.name;\n\t\t},\n\t},\n\tmethods:\n\t{\n\t\tonMessageClick(prompt: ImModelCopilotPrompt)\n\t\t{\n\t\t\tvoid this.getSendingService().sendCopilotPrompt({\n\t\t\t\ttext: prompt.text,\n\t\t\t\tcopilot: {\n\t\t\t\t\tpromptCode: prompt.code,\n\t\t\t\t},\n\t\t\t\tdialogId: this.dialogId,\n\t\t\t});\n\t\t},\n\t\tgetSendingService(): SendingService\n\t\t{\n\t\t\tif (!this.sendingService)\n\t\t\t{\n\t\t\t\tthis.sendingService = SendingService.getInstance();\n\t\t\t}\n\n\t\t\treturn this.sendingService;\n\t\t},\n\t\tloc(phraseCode: string, replacements: {[p: string]: string} = {}): string\n\t\t{\n\t\t\treturn this.$Bitrix.Loc.getMessage(phraseCode, replacements);\n\t\t},\n\t},\n\ttemplate: `\n\t\t<BaseMessage\n\t\t\t:dialogId=\"dialogId\"\n\t\t\t:item=\"item\"\n\t\t\t:withContextMenu=\"false\"\n\t\t\t:withReactions=\"false\"\n\t\t\t:withBackground=\"false\"\n\t\t>\n\t\t\t<div class=\"bx-im-message-copilot-creation__container\">\n\t\t\t\t<div class=\"bx-im-message-copilot-creation__header\">\n\t\t\t\t\t<MessageAvatar \n\t\t\t\t\t\t:messageId=\"message.id\"\n\t\t\t\t\t\t:authorId=\"message.authorId\"\n\t\t\t\t\t\t:size=\"AvatarSize.XXL\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"bx-im-message-copilot-creation__info\">\n\t\t\t\t\t\t<div class=\"bx-im-message-copilot-creation__title\" :title=\"preparedTitle\">\n\t\t\t\t\t\t\t{{ preparedTitle }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div \n\t\t\t\t\t\t\tclass=\"bx-im-message-copilot-creation__text\" \n\t\t\t\t\t\t\t:title=\"loc('IM_MESSAGE_COPILOT_CREATION_HEADER_DESC')\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{{ loc('IM_MESSAGE_COPILOT_CREATION_HEADER_DESC') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"bx-im-message-copilot-creation__separator\"><div></div></div>\n\t\t\t\t<div class=\"bx-im-message-copilot-creation__actions\">\n\t\t\t\t\t<div\n\t\t\t\t\t\tv-for=\"prompt in promptList\"\n\t\t\t\t\t\t:key=\"prompt.code\"\n\t\t\t\t\t\t@click=\"onMessageClick(prompt)\"\n\t\t\t\t\t\tclass=\"bx-im-message-copilot-creation__action\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"bx-im-message-copilot-creation__action-text\">\n\t\t\t\t\t\t\t{{ prompt.title }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</BaseMessage>\n\t`,\n};\n"],"names":["ChatCopilotCreationMessage","name","components","BaseMessage","MessageAvatar","props","item","type","Object","required","dialogId","String","computed","AvatarSize","message","preparedTitle","phrase","componentParams","copilotRoleUpdated","loc","roleName","promptList","$store","getters","id","role","methods","onMessageClick","prompt","getSendingService","sendCopilotPrompt","text","copilot","promptCode","code","sendingService","SendingService","getInstance","phraseCode","replacements","$Bitrix","Loc","getMessage","template"],"mappings":";;;;;;;;CAQA;AACA,OAAaA,0BAA0B,GAAG;GACzCC,IAAI,EAAE,4BAA4B;GAClCC,UAAU,EAAE;kBAAEC,wCAAW;oBAAEC;IAAe;GAC1CC,KAAK,EAAE;KACNC,IAAI,EAAE;OACLC,IAAI,EAAEC,MAAM;OACZC,QAAQ,EAAE;MACV;KACDC,QAAQ,EAAE;OACTH,IAAI,EAAEI,MAAM;OACZF,QAAQ,EAAE;;IAEX;GACDG,QAAQ,EACR;KACCC,UAAU,EAAE,MAAMA,mCAAU;KAC5BC,OAAO,GACP;OACC,OAAO,IAAI,CAACR,IAAI;MAChB;KACDS,aAAa,GACb;OAAA;OACC,MAAMC,MAAM,GAAG,6BAAI,CAACF,OAAO,CAACG,eAAe,aAA5B,sBAA8BC,kBAAkB,GAC5D,uDAAuD,GACvD,0CAA0C;OAG7C,OAAO,IAAI,CAACC,GAAG,CAACH,MAAM,EAAE;SACvB,qBAAqB,EAAE,IAAI,CAACI;QAC5B,CAAC;MACF;KACDC,UAAU,GACV;OACC,OAAO,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,6BAA6B,CAAC,CAAC,IAAI,CAACT,OAAO,CAACU,EAAE,CAAC;MAC1E;KACDC,IAAI,GACJ;OACC,OAAO,IAAI,CAACH,MAAM,CAACC,OAAO,CAAC,0BAA0B,CAAC,CAAC,IAAI,CAACT,OAAO,CAACU,EAAE,CAAC;MACvE;KACDJ,QAAQ,GACR;OACC,OAAO,IAAI,CAACK,IAAI,CAACxB,IAAI;;IAEtB;GACDyB,OAAO,EACP;KACCC,cAAc,CAACC,MAA4B,EAC3C;OACC,KAAK,IAAI,CAACC,iBAAiB,EAAE,CAACC,iBAAiB,CAAC;SAC/CC,IAAI,EAAEH,MAAM,CAACG,IAAI;SACjBC,OAAO,EAAE;WACRC,UAAU,EAAEL,MAAM,CAACM;UACnB;SACDxB,QAAQ,EAAE,IAAI,CAACA;QACf,CAAC;MACF;KACDmB,iBAAiB,GACjB;OACC,IAAI,CAAC,IAAI,CAACM,cAAc,EACxB;SACC,IAAI,CAACA,cAAc,GAAGC,qCAAc,CAACC,WAAW,EAAE;;OAGnD,OAAO,IAAI,CAACF,cAAc;MAC1B;KACDhB,GAAG,CAACmB,UAAkB,EAAEC,YAAmC,GAAG,EAAE,EAChE;OACC,OAAO,IAAI,CAACC,OAAO,CAACC,GAAG,CAACC,UAAU,CAACJ,UAAU,EAAEC,YAAY,CAAC;;IAE7D;GACDI,QAAQ,EAAG;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CA2CZ,CAAC;;;;;;;;"}