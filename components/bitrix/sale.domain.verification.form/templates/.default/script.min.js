BX.namespace("BX.Sale.DomainVerificationForm");(function(){"use strict";BX.Sale.DomainVerificationForm={init:function(e){this.signedParameters=e.signedParameters;this.saveButton=BX(e.saveButtonId);this.closeButton=BX(e.closeButtonId);this.form=BX(e.formId);this.fileInputButton=BX(e.fileInputId);this.fileInputLabel=BX(e.fileLabelId);this.bindEvents()},bindEvents:function(){BX.addCustomEvent("button-click",BX.proxy(this.buttonFormClick,this));BX.bind(this.fileInputButton,"change",BX.delegate((e=>{const t=e.target.files;let i=BX.Loc.getMessage("SALE_DVF_TEMPLATE_FILE_NOT_SELECTED");if(t.length>0){let e=t[0].name;if(e.length>40){e=`${e.slice(0,9)}...${e.slice(-9)}`}i=e}this.fileInputLabel.innerHTML=i}),this))},buttonFormClick:function(e){if(e.TYPE==="save"||e.TYPE==="close"){e.WAIT=false}if(e.TYPE==="save"){e.WAIT=true;this.submitForm()}},submitForm:function(){this.form.submit()},showLoader:function(){if(this.loader===undefined){this.loader=new BX.Loader({target:document.querySelector(".ui-slider-page")})}this.loader.show()},deleteDomainAction:function(e){this.showLoader();BX.ajax.runComponentAction("bitrix:sale.domain.verification.form","deleteDomain",{mode:"ajax",signedParameters:this.signedParameters,data:{id:e}}).then((function(e){BX.SidePanel.Instance.reload()}),(function(e){var t="";for(var i in e.errors){if(e.errors.hasOwnProperty(i)){t+=e.errors[i].message+"\n"}}alert(t)}))}}})();
//# sourceMappingURL=script.map.js