this.BX=this.BX||{};this.BX.Messenger=this.BX.Messenger||{};(function(t,e,n,r){"use strict";function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){babelHelpers.defineProperty(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}n.BitrixVue.component("bx-im-component-sidebar",{data:function t(){return{}},created:function t(){},computed:o(o({},r.Vuex.mapState({recent:function t(e){return e.recent.collection.general},pinned:function t(e){return e.recent.collection.pinned}})),{},{recentData:function t(){return[].concat(babelHelpers.toConsumableArray(this.recent),babelHelpers.toConsumableArray(this.pinned))}}),methods:{getController:function t(){return this.$Bitrix.Data.get("controller")},getStore:function t(){return this.getController().store},onScroll:function t(e){if(this.oneScreenRemaining(e)){this.getController().recent.loadMore()}},onClick:function t(e){this.getController().recent.openOldDialog(e)},onRightClick:function t(e){this.getController().recent.openOldContextMenu(e)},oneScreenRemaining:function t(e){return e.target.scrollTop+e.target.clientHeight>=e.target.scrollHeight-e.target.clientHeight}},template:'\n\t\t\t<div class="sidebar-wrap">\n\t\t\t\t<bx-im-view-list-sidebar\n\t\t\t\t\t:recentData="recentData"\n\t\t\t\t\t@scroll="onScroll"\n\t\t\t\t\t@click="onClick"\n\t\t\t\t\t@rightClick="onRightClick"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t'});
/**
	 * Bitrix Im
	 * Core application
	 *
	 * @package bitrix
	 * @subpackage im
	 * @copyright 2001-2020 Bitrix
	 */var c=function(){function t(){var e=this;var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};babelHelpers.classCallCheck(this,t);this.inited=false;this.initPromise=new BX.Promise;this.params=r;this.template=null;this.rootNode=this.params.node||document.createElement("div");this.templateTemp=null;this.rootNodeTemp=this.params.nodeTemp||document.createElement("div");this.eventBus=new n.VueVendorV2;this.initCore().then((function(){return e.initParams()})).then((function(){return e.initComponent()})).then((function(){return e.initComplete()}))}babelHelpers.createClass(t,[{key:"initCore",value:function t(){var n=this;return new Promise((function(t,r){e.Core.ready().then((function(e){n.controller=e;t()}))}))}},{key:"initParams",value:function t(){return new Promise((function(t,e){return t()}))}},{key:"initComponent",value:function t(){var e=this;return this.controller.createVue(this,{el:this.rootNode,template:"<bx-im-component-sidebar/>"}).then((function(t){e.template=t;return new Promise((function(t,e){return t()}))}))}},{key:"initComplete",value:function t(){this.inited=true;this.initPromise.resolve(this);return this.requestData()}},{key:"requestData",value:function t(){this.controller.recent.drawPlaceholders();this.controller.recent.getRecentData();return new Promise((function(t,e){return t()}))}},{key:"ready",value:function t(){if(this.inited){var e=new BX.Promise;e.resolve(this);return e}return this.initPromise}},{key:"emit",value:function t(e){var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.eventBus.$emit(e,n);return true}},{key:"listen",value:function t(e,n){if(typeof n!=="function"){return false}this.eventBus.$on(e,n);return true}}]);return t}();t.SidebarApplication=c})(this.BX.Messenger.Application=this.BX.Messenger.Application||{},BX.Messenger.Application,BX,BX);
//# sourceMappingURL=sidebar.bundle.map.js