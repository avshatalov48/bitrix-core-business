{"version":3,"file":"feature.bundle.js","sources":["../src/classes/chat-history.js","../src/feature.js"],"sourcesContent":["import { Loc } from 'main.core';\nimport { FeaturePromoter } from 'ui.info-helper';\n\nimport { SliderCode } from 'im.v2.const';\nimport { Core } from 'im.v2.application.core';\n\ntype TariffRestrictions = {\n\tfullChatHistory: {\n\t\tisAvailable: boolean,\n\t\tlimitDays: number | null,\n\t}\n};\n\nexport const ChatHistoryManager = {\n\tisAvailable(): boolean\n\t{\n\t\tconst { fullChatHistory } = this.getTariffRestrictions();\n\n\t\treturn fullChatHistory.isAvailable;\n\t},\n\n\tgetDaysLimit(): number\n\t{\n\t\tconst { fullChatHistory } = this.getTariffRestrictions();\n\n\t\treturn fullChatHistory.limitDays;\n\t},\n\n\topenFeatureSlider(): void\n\t{\n\t\tconst promoter = new FeaturePromoter({ code: SliderCode.historyLimited });\n\t\tpromoter.show();\n\t},\n\n\tgetLimitTitle(): string\n\t{\n\t\treturn Loc.getMessage('IM_LIB_FEATURE_HISTORY_LIMIT_TITLE');\n\t},\n\n\tgetLimitSubtitle(withEmphasis: boolean = false): string\n\t{\n\t\tif (withEmphasis)\n\t\t{\n\t\t\treturn Loc.getMessagePlural(\n\t\t\t\t'IM_LIB_FEATURE_HISTORY_LIMIT_SUBTITLE',\n\t\t\t\tthis.getDaysLimit(),\n\t\t\t\t{ '#DAY_LIMIT#': this.getDaysLimit() },\n\t\t\t);\n\t\t}\n\n\t\treturn Loc.getMessagePlural(\n\t\t\t'IM_LIB_FEATURE_HISTORY_LIMIT_SUBTITLE',\n\t\t\tthis.getDaysLimit(),\n\t\t\t{\n\t\t\t\t'#DAY_LIMIT#': this.getDaysLimit(),\n\t\t\t\t'[action_emphasis]': '',\n\t\t\t\t'[/action_emphasis]': '',\n\t\t\t},\n\t\t);\n\t},\n\n\tgetLearnMoreText(): string\n\t{\n\t\treturn Loc.getMessage('IM_LIB_FEATURE_HISTORY_LIMIT_LEARN_MORE');\n\t},\n\n\tgetTooltipText(): string\n\t{\n\t\treturn Loc.getMessage('IM_LIB_FEATURE_HISTORY_LIMIT_TOOLTIP');\n\t},\n\n\tgetTariffRestrictions(): TariffRestrictions\n\t{\n\t\treturn Core.getStore().getters['application/tariffRestrictions/get'];\n\t},\n};\n","import { Core } from 'im.v2.application.core';\n\nimport { ChatHistoryManager } from './classes/chat-history';\n\nexport const Feature = {\n\tchatV2: 'chatV2',\n\topenLinesV2: 'openLinesV2',\n\tchatDepartments: 'chatDepartments',\n\tcopilotActive: 'copilotActive',\n\tcopilotAvailable: 'copilotAvailable',\n\tsidebarLinks: 'sidebarLinks',\n\tsidebarFiles: 'sidebarFiles',\n\tsidebarBriefs: 'sidebarBriefs',\n\tzoomActive: 'zoomActive',\n\tzoomAvailable: 'zoomAvailable',\n\tgiphyAvailable: 'giphyAvailable',\n\tcollabAvailable: 'collabAvailable',\n\tcollabCreationAvailable: 'collabCreationAvailable',\n\tinviteByLinkAvailable: 'inviteByLinkAvailable',\n\tinviteByPhoneAvailable: 'inviteByPhoneAvailable',\n\tdocumentSignAvailable: 'documentSignAvailable',\n\tintranetInviteAvailable: 'intranetInviteAvailable',\n\tvoteCreationAvailable: 'voteCreationAvailable',\n};\n\nexport const FeatureManager = {\n\tchatHistory: ChatHistoryManager,\n\n\tisFeatureAvailable(featureName: $Values<typeof Feature>): boolean\n\t{\n\t\tconst { featureOptions = {} } = Core.getApplicationData();\n\n\t\treturn featureOptions[featureName] ?? false;\n\t},\n};\n"],"names":["ChatHistoryManager","isAvailable","fullChatHistory","getTariffRestrictions","getDaysLimit","limitDays","openFeatureSlider","promoter","FeaturePromoter","code","SliderCode","historyLimited","show","getLimitTitle","Loc","getMessage","getLimitSubtitle","withEmphasis","getMessagePlural","getLearnMoreText","getTooltipText","Core","getStore","getters","Feature","chatV2","openLinesV2","chatDepartments","copilotActive","copilotAvailable","sidebarLinks","sidebarFiles","sidebarBriefs","zoomActive","zoomAvailable","giphyAvailable","collabAvailable","collabCreationAvailable","inviteByLinkAvailable","inviteByPhoneAvailable","documentSignAvailable","intranetInviteAvailable","voteCreationAvailable","FeatureManager","chatHistory","isFeatureAvailable","featureName","featureOptions","getApplicationData"],"mappings":";;;;;;;CAaO,MAAMA,kBAAkB,GAAG;GACjCC,WAAW,GACX;KACC,MAAM;OAAEC;MAAiB,GAAG,IAAI,CAACC,qBAAqB,EAAE;KAExD,OAAOD,eAAe,CAACD,WAAW;IAClC;GAEDG,YAAY,GACZ;KACC,MAAM;OAAEF;MAAiB,GAAG,IAAI,CAACC,qBAAqB,EAAE;KAExD,OAAOD,eAAe,CAACG,SAAS;IAChC;GAEDC,iBAAiB,GACjB;KACC,MAAMC,QAAQ,GAAG,IAAIC,6BAAe,CAAC;OAAEC,IAAI,EAAEC,sBAAU,CAACC;MAAgB,CAAC;KACzEJ,QAAQ,CAACK,IAAI,EAAE;IACf;GAEDC,aAAa,GACb;KACC,OAAOC,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC;IAC3D;GAEDC,gBAAgB,CAACC,YAAqB,GAAG,KAAK,EAC9C;KACC,IAAIA,YAAY,EAChB;OACC,OAAOH,aAAG,CAACI,gBAAgB,CAC1B,uCAAuC,EACvC,IAAI,CAACd,YAAY,EAAE,EACnB;SAAE,aAAa,EAAE,IAAI,CAACA,YAAY;QAAI,CACtC;;KAGF,OAAOU,aAAG,CAACI,gBAAgB,CAC1B,uCAAuC,EACvC,IAAI,CAACd,YAAY,EAAE,EACnB;OACC,aAAa,EAAE,IAAI,CAACA,YAAY,EAAE;OAClC,mBAAmB,EAAE,EAAE;OACvB,oBAAoB,EAAE;MACtB,CACD;IACD;GAEDe,gBAAgB,GAChB;KACC,OAAOL,aAAG,CAACC,UAAU,CAAC,yCAAyC,CAAC;IAChE;GAEDK,cAAc,GACd;KACC,OAAON,aAAG,CAACC,UAAU,CAAC,sCAAsC,CAAC;IAC7D;GAEDZ,qBAAqB,GACrB;KACC,OAAOkB,2BAAI,CAACC,QAAQ,EAAE,CAACC,OAAO,CAAC,oCAAoC,CAAC;;CAEtE,CAAC;;OCvEYC,OAAO,GAAG;GACtBC,MAAM,EAAE,QAAQ;GAChBC,WAAW,EAAE,aAAa;GAC1BC,eAAe,EAAE,iBAAiB;GAClCC,aAAa,EAAE,eAAe;GAC9BC,gBAAgB,EAAE,kBAAkB;GACpCC,YAAY,EAAE,cAAc;GAC5BC,YAAY,EAAE,cAAc;GAC5BC,aAAa,EAAE,eAAe;GAC9BC,UAAU,EAAE,YAAY;GACxBC,aAAa,EAAE,eAAe;GAC9BC,cAAc,EAAE,gBAAgB;GAChCC,eAAe,EAAE,iBAAiB;GAClCC,uBAAuB,EAAE,yBAAyB;GAClDC,qBAAqB,EAAE,uBAAuB;GAC9CC,sBAAsB,EAAE,wBAAwB;GAChDC,qBAAqB,EAAE,uBAAuB;GAC9CC,uBAAuB,EAAE,yBAAyB;GAClDC,qBAAqB,EAAE;CACxB,CAAC;AAED,OAAaC,cAAc,GAAG;GAC7BC,WAAW,EAAE5C,kBAAkB;GAE/B6C,kBAAkB,CAACC,WAAoC,EACvD;KAAA;KACC,MAAM;OAAEC,cAAc,GAAG;MAAI,GAAG1B,2BAAI,CAAC2B,kBAAkB,EAAE;KAEzD,gCAAOD,cAAc,CAACD,WAAW,CAAC,oCAAI,KAAK;;CAE7C,CAAC;;;;;;;;;"}