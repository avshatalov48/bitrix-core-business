{"version":3,"file":"script.js","sources":["script.es6.js"],"sourcesContent":["import {Reflection, Dom, Tag, Loc, Type} from \"main.core\";\n\nclass CalendarEvent\n{\n\tconstructor(options = {})\n\t{\n\t\tthis.eventId = options.eventId;\n\t\tthis.hasDecision = options.hasDecision;\n\t\tthis.isPositiveDecision = options.isPositiveDecision;\n\t\tthis.hash = options.hash;\n\t\tthis.downnoloadLink = options.downloadLink;\n\t\tthis.decisionButtonsBlock = document.querySelector('.calendar-pub-event-btn-container');\n\t\tthis.titleBlock = document.querySelector('.calendar-pub-event-title-main');\n\t\tthis.eventWrapper = document.querySelector('.calendar-pub-event-wrap');\n\t\tthis.listBoxWrapper = document.querySelector('.calendar-pub-event-user-list-box');\n\t\tthis.decisionBlockWrapper = decisionBlock;\n\t\tthis.buttonsContainer = buttonsContainer;\n\n\t\tthis.init();\n\t}\n\n\tinit()\n\t{\n\t\tthis.initWrappersForButtons();\n\t\tthis.initHandler();\n\t}\n\n\tinitWrappersForButtons()\n\t{\n\t\tthis.primaryButtonWrapper = this.buttonsContainer.children[0];\n\t\tthis.secondButtonWrapper = this.buttonsContainer.children[1];\n\t}\n\n\tinitHandler()\n\t{\n\t\tif (this.hasDecision)\n\t\t{\n\t\t\tthis.initChangeDecisionButton();\n\t\t\tDom.append(this.changeDecisionButton, this.primaryButtonWrapper)\n\t\t\tif (this.isPositiveDecision)\n\t\t\t{\n\t\t\t\tthis.initDownloadButton();\n\t\t\t\tDom.append(this.downloadButton, this.secondButtonWrapper);\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.initAcceptButton();\n\t\t\tthis.initDeclineButton();\n\t\t\tDom.append(this.acceptDecisionButton, this.primaryButtonWrapper);\n\t\t\tDom.append(this.declineDecisionButton, this.secondButtonWrapper);\n\t\t}\n\n\t\tthis.initListBoxHandlers();\n\t}\n\n\tinitChangeDecisionButton()\n\t{\n\t\tthis.changeDecisionButton = this.getChangeDecisionButton();\n\t\tthis.changeDecisionButton.addEventListener('click', () => {this.changeStateWithoutDecision()})\n\t}\n\n\tinitAcceptButton()\n\t{\n\t\tthis.acceptDecisionButton = this.getAcceptDecisionButton();\n\t\tthis.acceptDecisionButton.addEventListener('click', () => {this.changeStateWithDecision(true)});\n\t}\n\n\tinitDeclineButton()\n\t{\n\t\tthis.declineDecisionButton = this.getDeclineDecisionButton();\n\t\tthis.declineDecisionButton.addEventListener('click', () => {this.changeStateWithDecision(false)});\n\t}\n\n\tchangeStateWithDecision(decision)\n\t{\n\t\tthis.hasDecision = true;\n\n\t\tDom.remove(this.acceptDecisionButton);\n\t\tthis.acceptDecisionButton = undefined;\n\t\tDom.remove(this.declineDecisionButton);\n\t\tthis.declineDecisionButton = undefined;\n\n\t\tthis.showChangeDecisionButton();\n\n\t\tif (decision)\n\t\t{\n\t\t\tthis.showAcceptDecisionBlock();\n\t\t\tthis.showDownloadButton();\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis.showDeclineDecisionBlock();\n\t\t}\n\n\t\tthis.isPositiveDecision = decision;\n\n\t\tBX.ajax.runComponentAction('bitrix:calendar.pub.event', 'handleDecision', {\n\t\t\tmode: 'class',\n\t\t\tdata: {\n\t\t\t\t'decision': decision ? 'Y' : 'N',\n\t\t\t\t'eventId': this.eventId,\n\t\t\t\t'hash': this.hash,\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\tif (response.data.attendeesList.length > 0)\n\t\t\t{\n\t\t\t\tthis.rebuildUserList(response.data.attendeesList);\n\t\t\t}\n\t\t});\n\t}\n\n\tshowChangeDecisionButton()\n\t{\n\t\tif (!this.changeDecisionButton)\n\t\t{\n\t\t\tthis.initChangeDecisionButton();\n\t\t}\n\n\t\tDom.append(this.changeDecisionButton, this.primaryButtonWrapper);\n\t}\n\n\tgetChangeDecisionButton()\n\t{\n\t\treturn Tag.render `\n\t\t\t<button id=\"changeDecisionButton\" class=\"ui-btn ui-btn-round ui-btn-lg ui-btn-success calendar-pub-event-btn calendar-pub-event-btn-change-decision\">\n\t\t\t\t${Loc.getMessage('EC_CALENDAR_CHANGE_DECISION_TITLE')}\n\t\t\t</button>\n\t\t`;\n\t}\n\n\tshowAcceptDecisionBlock()\n\t{\n\t\tconst decisionBlock = this.decisionBlockWrapper.children[1];\n\t\tdecisionBlock.innerText = Loc.getMessage('EC_CALENDAR_PUB_EVENT_DECISION_YES');\n\t\tDom.removeClass(this.eventWrapper, 'calendar-pub-event--decline ');\n\t\tDom.addClass(this.eventWrapper, 'calendar-pub-event--accept');\n\t}\n\n\tshowDeclineDecisionBlock()\n\t{\n\t\tconst decisionBlock = this.decisionBlockWrapper.children[1];\n\t\tdecisionBlock.innerText = Loc.getMessage('EC_CALENDAR_PUB_EVENT_DECISION_NO');\n\t\tDom.removeClass(this.eventWrapper, 'calendar-pub-event--accept');\n\t\tDom.addClass(this.eventWrapper, 'calendar-pub-event--decline ');\n\t}\n\n\tchangeStateWithoutDecision()\n\t{\n\t\tDom.remove(this.changeDecisionButton);\n\t\tthis.changeDecisionButton = undefined;\n\t\tif (this.downloadButton)\n\t\t{\n\t\t\tDom.remove(this.downloadButton);\n\t\t\tthis.downloadButton = undefined;\n\t\t}\n\t\tthis.showAcceptDecisionButton();\n\t\tthis.showDeclineDecisionButton();\n\t}\n\n\tshowAcceptDecisionButton()\n\t{\n\t\tif (!this.acceptDecisionButton)\n\t\t{\n\t\t\tthis.initAcceptButton();\n\t\t}\n\n\t\tDom.append(this.acceptDecisionButton, this.primaryButtonWrapper);\n\t}\n\n\tgetAcceptDecisionButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"acceptDecisionButton\" class=\"ui-btn ui-btn-round ui-btn-lg ui-btn-success calendar-pub-event-btn\">\n\t\t\t\t${Loc.getMessage('EC_CALENDAR_DECISION_TITLE_YES')}\n\t\t\t</button>\n\t\t`;\n\t}\n\n\tshowDeclineDecisionButton()\n\t{\n\t\tif (!this.declineDecisionButton)\n\t\t{\n\t\t\tthis.initDeclineButton();\n\t\t}\n\n\t\tDom.append(this.declineDecisionButton, this.secondButtonWrapper);\n\t}\n\n\tgetDeclineDecisionButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<button id=\"declineDecisionButton\" class=\"ui-btn ui-btn-link ui-btn-lg calendar-pub-event-btn\" data-decision=\"N\">\n\t\t\t${Loc.getMessage('EC_CALENDAR_DECISION_TITLE_NO')}\n\t\t</button>\n\t\t`;\n\t}\n\n\tinitListBoxHandlers()\n\t{\n\t\tthis.initAttendeesListBoxHandlers();\n\t\tthis.initAttachmentsListBoxHandlers();\n\t}\n\n\tinitAttendeesListBoxHandlers()\n\t{\n\t\tconst attendeesListButton = document.querySelector('.calendar-pub-event-user-list-btn');\n\t\tconst contentBox = document.querySelector('.calendar-pub-event-user-list-content');\n\n\t\tif (Type.isDomNode(attendeesListButton))\n\t\t{\n\t\t\tattendeesListButton.addEventListener('click', () =>\n\t\t\t{\n\t\t\t\tconst contentHeight = contentBox.scrollHeight;\n\t\t\t\tcontentBox.style.height = contentHeight + 'px';\n\t\t\t\tcontentBox.style.maxHeight = contentHeight + 'px';\n\t\t\t\tattendeesListButton.style.display = 'none';\n\t\t\t})\n\t\t}\n\t}\n\n\tinitAttachmentsListBoxHandlers()\n\t{\n\t\tconst attachmentBtn = document.querySelector('.calendar-pub-event-user-attachment-btn');\n\t\tconst attachmentContentBox = document.querySelector('.calendar-pub-event-user-attachment-content');\n\t\tif (Type.isDomNode(attachmentBtn))\n\t\t{\n\t\t\tattachmentBtn.addEventListener('click', () =>\n\t\t\t{\n\t\t\t\tconst contentHeight = attachmentContentBox.scrollHeight;\n\t\t\t\tattachmentContentBox.style.height = contentHeight + 'px';\n\t\t\t\tattachmentContentBox.style.maxHeight = contentHeight + 'px';\n\t\t\t\tattachmentBtn.style.display = 'none';\n\t\t\t})\n\t\t}\n\t}\n\n\tinitDownloadButton()\n\t{\n\t\tthis.downloadButton = this.getDownloadButton();\n\t}\n\n\tshowDownloadButton()\n\t{\n\t\tthis.initDownloadButton();\n\t\tDom.append(this.downloadButton, this.secondButtonWrapper);\n\t}\n\n\tgetDownloadButton()\n\t{\n\t\treturn Tag.render`\n\t\t\t<a id=\"downloadButton\" href=\"${BX.util.htmlspecialchars(this.downnoloadLink)}\" class=\"ui-btn ui-btn-link ui-btn-lg calendar-pub-event-btn\" >\n\t\t\t${Loc.getMessage('EC_CALENDAR_ICAL_INVITATION_DOWNLOAD_INVITATION')}\n\t\t</a>\n\t\t`;\n\t}\n\n\tgetDecisionBlock()\n\t{\n\t\tif (this.hasDecision)\n\t\t{\n\t\t\treturn document.querySelector('.calendar-pub-event-desc');\n\t\t}\n\n\t\treturn null;\n\t}\n\n\trebuildUserList(attendeesList)\n\t{\n\t\tif (Type.isArray(attendeesList))\n\t\t{\n\t\t\tconst userListContainer = Tag.render`\n\t\t\t\t<div class=\"calendar-pub-event-user-list-content\">\n\t\t\t\t\t${attendeesList.map((attendee) => Tag.render`\n\t\t\t\t\t\t<div class=\"calendar-pub-event-user-list-item ${this.getAdditionalClassForAttendeesList(attendee['status'])}\">\n\t\t\t\t\t\t\t${attendee['name']}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`)}\n\t\t\t\t</div>\n\t\t\t`;\n\t\t\tconst oldAttendeesContainer = document.querySelector('.calendar-pub-event-user-list-content');\n\t\t\tconst oldAttendeesListButton = document.querySelector('.calendar-pub-event-user-list-btn');\n\t\t\tif (Type.isDomNode(oldAttendeesContainer))\n\t\t\t{\n\t\t\t\tconst wrapper = oldAttendeesContainer.parentElement;\n\t\t\t\tDom.remove(oldAttendeesContainer);\n\t\t\t\tif (Type.isDomNode(oldAttendeesListButton))\n\t\t\t\t{\n\t\t\t\t\tDom.remove(oldAttendeesListButton);\n\t\t\t\t}\n\n\t\t\t\tDom.append(userListContainer, wrapper);\n\n\t\t\t\tif (attendeesList.length > 3)\n\t\t\t\t{\n\t\t\t\t\tconst attendeesListButton = Tag.render`\n\t\t\t\t\t\t<div data-button=\"users\" class=\"calendar-pub-event-user-list-btn\">\n\t\t\t\t\t\t\t${Loc.getMessage('EC_CALENDAR_PUB_EVENT_ALL_ATTENDEES_TITLE')}\n\t\t\t\t\t\t\t<span>(${attendeesList.length})</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`;\n\t\t\t\t\tDom.append(attendeesListButton, wrapper);\n\t\t\t\t\tthis.initAttendeesListBoxHandlers();\n\t\t\t\t}\n\n\t\t\t}\n\t\t}\n\t}\n\n\tgetAdditionalClassForAttendeesList(status)\n\t{\n\t\tswitch (status)\n\t\t{\n\t\t\tcase 'ACCEPTED':\n\t\t\t\treturn 'calendar-pub-event-user--accept';\n\t\t\tcase 'DECLINED':\n\t\t\t\treturn 'calendar-pub-event-user--cancel';\n\t\t\tdefault:\n\t\t\t\treturn 'calendar-pub-event-user--waiting';\n\t\t}\n\t}\n}\n\nReflection.namespace('BX.Calendar.Pub').CalendarEvent = CalendarEvent;\n"],"names":["CalendarEvent","options","eventId","hasDecision","isPositiveDecision","hash","downnoloadLink","downloadLink","decisionButtonsBlock","document","querySelector","titleBlock","eventWrapper","listBoxWrapper","decisionBlockWrapper","decisionBlock","buttonsContainer","init","initWrappersForButtons","initHandler","primaryButtonWrapper","children","secondButtonWrapper","initChangeDecisionButton","Dom","append","changeDecisionButton","initDownloadButton","downloadButton","initAcceptButton","initDeclineButton","acceptDecisionButton","declineDecisionButton","initListBoxHandlers","getChangeDecisionButton","addEventListener","changeStateWithoutDecision","getAcceptDecisionButton","changeStateWithDecision","getDeclineDecisionButton","decision","remove","undefined","showChangeDecisionButton","showAcceptDecisionBlock","showDownloadButton","showDeclineDecisionBlock","BX","ajax","runComponentAction","mode","data","then","response","attendeesList","length","rebuildUserList","Tag","render","Loc","getMessage","innerText","removeClass","addClass","showAcceptDecisionButton","showDeclineDecisionButton","initAttendeesListBoxHandlers","initAttachmentsListBoxHandlers","attendeesListButton","contentBox","Type","isDomNode","contentHeight","scrollHeight","style","height","maxHeight","display","attachmentBtn","attachmentContentBox","getDownloadButton","util","htmlspecialchars","isArray","userListContainer","map","attendee","getAdditionalClassForAttendeesList","oldAttendeesContainer","oldAttendeesListButton","wrapper","parentElement","status","Reflection","namespace"],"mappings":";;;;;AAAA,CAA0D,IAEpDA,aAAa;GAElB,yBACA;KAAA,IADYC,OAAO,uEAAG,EAAE;KAAA;KAEvB,IAAI,CAACC,OAAO,GAAGD,OAAO,CAACC,OAAO;KAC9B,IAAI,CAACC,WAAW,GAAGF,OAAO,CAACE,WAAW;KACtC,IAAI,CAACC,kBAAkB,GAAGH,OAAO,CAACG,kBAAkB;KACpD,IAAI,CAACC,IAAI,GAAGJ,OAAO,CAACI,IAAI;KACxB,IAAI,CAACC,cAAc,GAAGL,OAAO,CAACM,YAAY;KAC1C,IAAI,CAACC,oBAAoB,GAAGC,QAAQ,CAACC,aAAa,CAAC,mCAAmC,CAAC;KACvF,IAAI,CAACC,UAAU,GAAGF,QAAQ,CAACC,aAAa,CAAC,gCAAgC,CAAC;KAC1E,IAAI,CAACE,YAAY,GAAGH,QAAQ,CAACC,aAAa,CAAC,0BAA0B,CAAC;KACtE,IAAI,CAACG,cAAc,GAAGJ,QAAQ,CAACC,aAAa,CAAC,mCAAmC,CAAC;KACjF,IAAI,CAACI,oBAAoB,GAAGC,aAAa;KACzC,IAAI,CAACC,gBAAgB,GAAGA,gBAAgB;KAExC,IAAI,CAACC,IAAI,EAAE;;GACX;KAAA;KAAA,uBAGD;OACC,IAAI,CAACC,sBAAsB,EAAE;OAC7B,IAAI,CAACC,WAAW,EAAE;;;KAClB;KAAA,yCAGD;OACC,IAAI,CAACC,oBAAoB,GAAG,IAAI,CAACJ,gBAAgB,CAACK,QAAQ,CAAC,CAAC,CAAC;OAC7D,IAAI,CAACC,mBAAmB,GAAG,IAAI,CAACN,gBAAgB,CAACK,QAAQ,CAAC,CAAC,CAAC;;;KAC5D;KAAA,8BAGD;OACC,IAAI,IAAI,CAAClB,WAAW,EACpB;SACC,IAAI,CAACoB,wBAAwB,EAAE;SAC/BC,aAAG,CAACC,MAAM,CAAC,IAAI,CAACC,oBAAoB,EAAE,IAAI,CAACN,oBAAoB,CAAC;SAChE,IAAI,IAAI,CAAChB,kBAAkB,EAC3B;WACC,IAAI,CAACuB,kBAAkB,EAAE;WACzBH,aAAG,CAACC,MAAM,CAAC,IAAI,CAACG,cAAc,EAAE,IAAI,CAACN,mBAAmB,CAAC;;QAE1D,MAED;SACC,IAAI,CAACO,gBAAgB,EAAE;SACvB,IAAI,CAACC,iBAAiB,EAAE;SACxBN,aAAG,CAACC,MAAM,CAAC,IAAI,CAACM,oBAAoB,EAAE,IAAI,CAACX,oBAAoB,CAAC;SAChEI,aAAG,CAACC,MAAM,CAAC,IAAI,CAACO,qBAAqB,EAAE,IAAI,CAACV,mBAAmB,CAAC;;OAGjE,IAAI,CAACW,mBAAmB,EAAE;;;KAC1B;KAAA,2CAGD;OAAA;OACC,IAAI,CAACP,oBAAoB,GAAG,IAAI,CAACQ,uBAAuB,EAAE;OAC1D,IAAI,CAACR,oBAAoB,CAACS,gBAAgB,CAAC,OAAO,EAAE,YAAM;SAAC,KAAI,CAACC,0BAA0B,EAAE;QAAC,CAAC;;;KAC9F;KAAA,mCAGD;OAAA;OACC,IAAI,CAACL,oBAAoB,GAAG,IAAI,CAACM,uBAAuB,EAAE;OAC1D,IAAI,CAACN,oBAAoB,CAACI,gBAAgB,CAAC,OAAO,EAAE,YAAM;SAAC,MAAI,CAACG,uBAAuB,CAAC,IAAI,CAAC;QAAC,CAAC;;;KAC/F;KAAA,oCAGD;OAAA;OACC,IAAI,CAACN,qBAAqB,GAAG,IAAI,CAACO,wBAAwB,EAAE;OAC5D,IAAI,CAACP,qBAAqB,CAACG,gBAAgB,CAAC,OAAO,EAAE,YAAM;SAAC,MAAI,CAACG,uBAAuB,CAAC,KAAK,CAAC;QAAC,CAAC;;;KACjG;KAAA,wCAEuBE,QAAQ,EAChC;OAAA;OACC,IAAI,CAACrC,WAAW,GAAG,IAAI;OAEvBqB,aAAG,CAACiB,MAAM,CAAC,IAAI,CAACV,oBAAoB,CAAC;OACrC,IAAI,CAACA,oBAAoB,GAAGW,SAAS;OACrClB,aAAG,CAACiB,MAAM,CAAC,IAAI,CAACT,qBAAqB,CAAC;OACtC,IAAI,CAACA,qBAAqB,GAAGU,SAAS;OAEtC,IAAI,CAACC,wBAAwB,EAAE;OAE/B,IAAIH,QAAQ,EACZ;SACC,IAAI,CAACI,uBAAuB,EAAE;SAC9B,IAAI,CAACC,kBAAkB,EAAE;QACzB,MAED;SACC,IAAI,CAACC,wBAAwB,EAAE;;OAGhC,IAAI,CAAC1C,kBAAkB,GAAGoC,QAAQ;OAElCO,EAAE,CAACC,IAAI,CAACC,kBAAkB,CAAC,2BAA2B,EAAE,gBAAgB,EAAE;SACzEC,IAAI,EAAE,OAAO;SACbC,IAAI,EAAE;WACL,UAAU,EAAEX,QAAQ,GAAG,GAAG,GAAG,GAAG;WAChC,SAAS,EAAE,IAAI,CAACtC,OAAO;WACvB,MAAM,EAAE,IAAI,CAACG;;QAEd,CAAC,CAAC+C,IAAI,CAAC,UAACC,QAAQ,EAAK;SACrB,IAAIA,QAAQ,CAACF,IAAI,CAACG,aAAa,CAACC,MAAM,GAAG,CAAC,EAC1C;WACC,MAAI,CAACC,eAAe,CAACH,QAAQ,CAACF,IAAI,CAACG,aAAa,CAAC;;QAElD,CAAC;;;KACF;KAAA,2CAGD;OACC,IAAI,CAAC,IAAI,CAAC5B,oBAAoB,EAC9B;SACC,IAAI,CAACH,wBAAwB,EAAE;;OAGhCC,aAAG,CAACC,MAAM,CAAC,IAAI,CAACC,oBAAoB,EAAE,IAAI,CAACN,oBAAoB,CAAC;;;KAChE;KAAA,0CAGD;OACC,OAAOqC,aAAG,CAACC,MAAM,wRAEbC,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;;;KAGvD;KAAA,0CAGD;OACC,IAAM7C,aAAa,GAAG,IAAI,CAACD,oBAAoB,CAACO,QAAQ,CAAC,CAAC,CAAC;OAC3DN,aAAa,CAAC8C,SAAS,GAAGF,aAAG,CAACC,UAAU,CAAC,oCAAoC,CAAC;OAC9EpC,aAAG,CAACsC,WAAW,CAAC,IAAI,CAAClD,YAAY,EAAE,8BAA8B,CAAC;OAClEY,aAAG,CAACuC,QAAQ,CAAC,IAAI,CAACnD,YAAY,EAAE,4BAA4B,CAAC;;;KAC7D;KAAA,2CAGD;OACC,IAAMG,aAAa,GAAG,IAAI,CAACD,oBAAoB,CAACO,QAAQ,CAAC,CAAC,CAAC;OAC3DN,aAAa,CAAC8C,SAAS,GAAGF,aAAG,CAACC,UAAU,CAAC,mCAAmC,CAAC;OAC7EpC,aAAG,CAACsC,WAAW,CAAC,IAAI,CAAClD,YAAY,EAAE,4BAA4B,CAAC;OAChEY,aAAG,CAACuC,QAAQ,CAAC,IAAI,CAACnD,YAAY,EAAE,8BAA8B,CAAC;;;KAC/D;KAAA,6CAGD;OACCY,aAAG,CAACiB,MAAM,CAAC,IAAI,CAACf,oBAAoB,CAAC;OACrC,IAAI,CAACA,oBAAoB,GAAGgB,SAAS;OACrC,IAAI,IAAI,CAACd,cAAc,EACvB;SACCJ,aAAG,CAACiB,MAAM,CAAC,IAAI,CAACb,cAAc,CAAC;SAC/B,IAAI,CAACA,cAAc,GAAGc,SAAS;;OAEhC,IAAI,CAACsB,wBAAwB,EAAE;OAC/B,IAAI,CAACC,yBAAyB,EAAE;;;KAChC;KAAA,2CAGD;OACC,IAAI,CAAC,IAAI,CAAClC,oBAAoB,EAC9B;SACC,IAAI,CAACF,gBAAgB,EAAE;;OAGxBL,aAAG,CAACC,MAAM,CAAC,IAAI,CAACM,oBAAoB,EAAE,IAAI,CAACX,oBAAoB,CAAC;;;KAChE;KAAA,0CAGD;OACC,OAAOqC,aAAG,CAACC,MAAM,mPAEbC,aAAG,CAACC,UAAU,CAAC,gCAAgC,CAAC;;;KAGpD;KAAA,4CAGD;OACC,IAAI,CAAC,IAAI,CAAC5B,qBAAqB,EAC/B;SACC,IAAI,CAACF,iBAAiB,EAAE;;OAGzBN,aAAG,CAACC,MAAM,CAAC,IAAI,CAACO,qBAAqB,EAAE,IAAI,CAACV,mBAAmB,CAAC;;;KAChE;KAAA,2CAGD;OACC,OAAOmC,aAAG,CAACC,MAAM,oPAEdC,aAAG,CAACC,UAAU,CAAC,+BAA+B,CAAC;;;KAGlD;KAAA,sCAGD;OACC,IAAI,CAACM,4BAA4B,EAAE;OACnC,IAAI,CAACC,8BAA8B,EAAE;;;KACrC;KAAA,+CAGD;OACC,IAAMC,mBAAmB,GAAG3D,QAAQ,CAACC,aAAa,CAAC,mCAAmC,CAAC;OACvF,IAAM2D,UAAU,GAAG5D,QAAQ,CAACC,aAAa,CAAC,uCAAuC,CAAC;OAElF,IAAI4D,cAAI,CAACC,SAAS,CAACH,mBAAmB,CAAC,EACvC;SACCA,mBAAmB,CAACjC,gBAAgB,CAAC,OAAO,EAAE,YAC9C;WACC,IAAMqC,aAAa,GAAGH,UAAU,CAACI,YAAY;WAC7CJ,UAAU,CAACK,KAAK,CAACC,MAAM,GAAGH,aAAa,GAAG,IAAI;WAC9CH,UAAU,CAACK,KAAK,CAACE,SAAS,GAAGJ,aAAa,GAAG,IAAI;WACjDJ,mBAAmB,CAACM,KAAK,CAACG,OAAO,GAAG,MAAM;UAC1C,CAAC;;;;KAEH;KAAA,iDAGD;OACC,IAAMC,aAAa,GAAGrE,QAAQ,CAACC,aAAa,CAAC,yCAAyC,CAAC;OACvF,IAAMqE,oBAAoB,GAAGtE,QAAQ,CAACC,aAAa,CAAC,6CAA6C,CAAC;OAClG,IAAI4D,cAAI,CAACC,SAAS,CAACO,aAAa,CAAC,EACjC;SACCA,aAAa,CAAC3C,gBAAgB,CAAC,OAAO,EAAE,YACxC;WACC,IAAMqC,aAAa,GAAGO,oBAAoB,CAACN,YAAY;WACvDM,oBAAoB,CAACL,KAAK,CAACC,MAAM,GAAGH,aAAa,GAAG,IAAI;WACxDO,oBAAoB,CAACL,KAAK,CAACE,SAAS,GAAGJ,aAAa,GAAG,IAAI;WAC3DM,aAAa,CAACJ,KAAK,CAACG,OAAO,GAAG,MAAM;UACpC,CAAC;;;;KAEH;KAAA,qCAGD;OACC,IAAI,CAACjD,cAAc,GAAG,IAAI,CAACoD,iBAAiB,EAAE;;;KAC9C;KAAA,qCAGD;OACC,IAAI,CAACrD,kBAAkB,EAAE;OACzBH,aAAG,CAACC,MAAM,CAAC,IAAI,CAACG,cAAc,EAAE,IAAI,CAACN,mBAAmB,CAAC;;;KACzD;KAAA,oCAGD;OACC,OAAOmC,aAAG,CAACC,MAAM,8NACeX,EAAE,CAACkC,IAAI,CAACC,gBAAgB,CAAC,IAAI,CAAC5E,cAAc,CAAC,EAC1EqD,aAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC;;;KAGpE;KAAA,mCAGD;OACC,IAAI,IAAI,CAACzD,WAAW,EACpB;SACC,OAAOM,QAAQ,CAACC,aAAa,CAAC,0BAA0B,CAAC;;OAG1D,OAAO,IAAI;;;KACX;KAAA,gCAEe4C,aAAa,EAC7B;OAAA;OACC,IAAIgB,cAAI,CAACa,OAAO,CAAC7B,aAAa,CAAC,EAC/B;SACC,IAAM8B,iBAAiB,GAAG3B,aAAG,CAACC,MAAM,0LAEhCJ,aAAa,CAAC+B,GAAG,CAAC,UAACC,QAAQ;WAAA,OAAK7B,aAAG,CAACC,MAAM,4MACK,MAAI,CAAC6B,kCAAkC,CAACD,QAAQ,CAAC,QAAQ,CAAC,CAAC,EACxGA,QAAQ,CAAC,MAAM,CAAC;UAEnB,CAAC,CAEH;SACD,IAAME,qBAAqB,GAAG/E,QAAQ,CAACC,aAAa,CAAC,uCAAuC,CAAC;SAC7F,IAAM+E,sBAAsB,GAAGhF,QAAQ,CAACC,aAAa,CAAC,mCAAmC,CAAC;SAC1F,IAAI4D,cAAI,CAACC,SAAS,CAACiB,qBAAqB,CAAC,EACzC;WACC,IAAME,OAAO,GAAGF,qBAAqB,CAACG,aAAa;WACnDnE,aAAG,CAACiB,MAAM,CAAC+C,qBAAqB,CAAC;WACjC,IAAIlB,cAAI,CAACC,SAAS,CAACkB,sBAAsB,CAAC,EAC1C;aACCjE,aAAG,CAACiB,MAAM,CAACgD,sBAAsB,CAAC;;WAGnCjE,aAAG,CAACC,MAAM,CAAC2D,iBAAiB,EAAEM,OAAO,CAAC;WAEtC,IAAIpC,aAAa,CAACC,MAAM,GAAG,CAAC,EAC5B;aACC,IAAMa,mBAAmB,GAAGX,aAAG,CAACC,MAAM,+PAElCC,aAAG,CAACC,UAAU,CAAC,2CAA2C,CAAC,EACpDN,aAAa,CAACC,MAAM,CAE9B;aACD/B,aAAG,CAACC,MAAM,CAAC2C,mBAAmB,EAAEsB,OAAO,CAAC;aACxC,IAAI,CAACxB,4BAA4B,EAAE;;;;;;KAKtC;KAAA,mDAEkC0B,MAAM,EACzC;OACC,QAAQA,MAAM;SAEb,KAAK,UAAU;WACd,OAAO,iCAAiC;SACzC,KAAK,UAAU;WACd,OAAO,iCAAiC;SACzC;WACC,OAAO,kCAAkC;;;;GAE3C;CAAA;AAGFC,qBAAU,CAACC,SAAS,CAAC,iBAAiB,CAAC,CAAC9F,aAAa,GAAGA,aAAa;;;;"}