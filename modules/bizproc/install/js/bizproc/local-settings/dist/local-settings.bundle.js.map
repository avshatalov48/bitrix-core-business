{"version":3,"file":"local-settings.bundle.js","sources":["../src/settings.js"],"sourcesContent":["import {Cache, Type} from 'main.core';\n\nexport class Settings\n{\n\t#prefix = 'bp'\n\n\tconstructor(section: string)\n\t{\n\t\tif (section)\n\t\t{\n\t\t\tthis.#prefix += ('-' + section);\n\t\t}\n\t}\n\n\tgetSet(name: string): Set\n\t{\n\t\tconst value = this.get(name);\n\n\t\treturn value instanceof Array ? new Set(value) : new Set();\n\t}\n\n\tget(name: string): any\n\t{\n\t\tconst settings = (new Cache.LocalStorageCache()).remember(this.#prefix, {});\n\n\t\treturn settings.hasOwnProperty(name) ? settings[name] : null;\n\t}\n\n\tset(name: string, value: any): this\n\t{\n\t\tif (value instanceof Set)\n\t\t{\n\t\t\tvalue = Array.from(value);\n\t\t}\n\n\t\tconst cache = new Cache.LocalStorageCache();\n\t\tconst settings = cache.remember(this.#prefix, {});\n\t\tsettings[name] = value;\n\n\t\tcache.set(this.#prefix, settings);\n\n\t\treturn this;\n\t}\n\n\tremember(key: string, defaultValue)\n\t{\n\t\tconst cacheValue = this.get(key);\n\n\t\tif (!Type.isNull(cacheValue))\n\t\t{\n\t\t\treturn cacheValue;\n\t\t}\n\n\t\tthis.set(key, defaultValue);\n\n\t\treturn this.get(key);\n\t}\n\n\tgetAll(): {}\n\t{\n\t\treturn (new Cache.LocalStorageCache()).remember(this.#prefix, {});\n\t}\n\n\tdeleteAll()\n\t{\n\t\tconst cache = new Cache.LocalStorageCache();\n\t\tcache.set(this.#prefix, {});\n\t}\n}"],"names":["Settings","constructor","section","getSet","name","value","get","Array","Set","settings","Cache","LocalStorageCache","remember","hasOwnProperty","set","from","cache","key","defaultValue","cacheValue","Type","isNull","getAll","deleteAll"],"mappings":";;;;;CAAsC;AAEtC,CAAO,MAAMA,QAAQ,CACrB;GAGCC,WAAW,CAACC,OAAe,EAC3B;KAAA;OAAA;OAAA,OAHU;;KAIT,IAAIA,OAAO,EACX;OACC,4CAAI,uBAAa,GAAG,GAAGA,OAAQ;;;GAIjCC,MAAM,CAACC,IAAY,EACnB;KACC,MAAMC,KAAK,GAAG,IAAI,CAACC,GAAG,CAACF,IAAI,CAAC;KAE5B,OAAOC,KAAK,YAAYE,KAAK,GAAG,IAAIC,GAAG,CAACH,KAAK,CAAC,GAAG,IAAIG,GAAG,EAAE;;GAG3DF,GAAG,CAACF,IAAY,EAChB;KACC,MAAMK,QAAQ,GAAI,IAAIC,eAAK,CAACC,iBAAiB,EAAE,CAAEC,QAAQ,yCAAC,IAAI,qBAAU,EAAE,CAAC;KAE3E,OAAOH,QAAQ,CAACI,cAAc,CAACT,IAAI,CAAC,GAAGK,QAAQ,CAACL,IAAI,CAAC,GAAG,IAAI;;GAG7DU,GAAG,CAACV,IAAY,EAAEC,KAAU,EAC5B;KACC,IAAIA,KAAK,YAAYG,GAAG,EACxB;OACCH,KAAK,GAAGE,KAAK,CAACQ,IAAI,CAACV,KAAK,CAAC;;KAG1B,MAAMW,KAAK,GAAG,IAAIN,eAAK,CAACC,iBAAiB,EAAE;KAC3C,MAAMF,QAAQ,GAAGO,KAAK,CAACJ,QAAQ,yCAAC,IAAI,qBAAU,EAAE,CAAC;KACjDH,QAAQ,CAACL,IAAI,CAAC,GAAGC,KAAK;KAEtBW,KAAK,CAACF,GAAG,yCAAC,IAAI,qBAAUL,QAAQ,CAAC;KAEjC,OAAO,IAAI;;GAGZG,QAAQ,CAACK,GAAW,EAAEC,YAAY,EAClC;KACC,MAAMC,UAAU,GAAG,IAAI,CAACb,GAAG,CAACW,GAAG,CAAC;KAEhC,IAAI,CAACG,cAAI,CAACC,MAAM,CAACF,UAAU,CAAC,EAC5B;OACC,OAAOA,UAAU;;KAGlB,IAAI,CAACL,GAAG,CAACG,GAAG,EAAEC,YAAY,CAAC;KAE3B,OAAO,IAAI,CAACZ,GAAG,CAACW,GAAG,CAAC;;GAGrBK,MAAM,GACN;KACC,OAAQ,IAAIZ,eAAK,CAACC,iBAAiB,EAAE,CAAEC,QAAQ,yCAAC,IAAI,qBAAU,EAAE,CAAC;;GAGlEW,SAAS,GACT;KACC,MAAMP,KAAK,GAAG,IAAIN,eAAK,CAACC,iBAAiB,EAAE;KAC3CK,KAAK,CAACF,GAAG,yCAAC,IAAI,qBAAU,EAAE,CAAC;;CAE7B;;;;;;;;"}