this.BX=this.BX||{};this.BX.Socialnetwork=this.BX.Socialnetwork||{};(function(t,e,r,n,i,a){"use strict";var s,o;function l(t,e){u(t,e);e.add(t)}function c(t,e,r){u(t,e);e.set(t,r)}function u(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}function h(t,e,r){if(!e.has(t)){throw new TypeError("attempted to get private field on non-instance")}return r}var d=new WeakMap;var f=new WeakMap;var p=new WeakMap;var v=new WeakMap;var b=new WeakSet;var g=new WeakSet;var y=new WeakSet;var m=new WeakSet;var w=new WeakSet;var L=new WeakSet;var _=new WeakSet;var S=new WeakSet;var H=new WeakSet;var E=new WeakSet;var T=new WeakSet;var k=new WeakSet;var C=new WeakSet;var F=new WeakSet;var I=new WeakSet;var P=new WeakSet;var G=new WeakSet;var x=new WeakSet;var A=function(t){babelHelpers.inherits(e,t);function e(t){var r;babelHelpers.classCallCheck(this,e);r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).call(this,t));l(babelHelpers.assertThisInitialized(r),x);l(babelHelpers.assertThisInitialized(r),G);l(babelHelpers.assertThisInitialized(r),P);l(babelHelpers.assertThisInitialized(r),I);l(babelHelpers.assertThisInitialized(r),F);l(babelHelpers.assertThisInitialized(r),C);l(babelHelpers.assertThisInitialized(r),k);l(babelHelpers.assertThisInitialized(r),T);l(babelHelpers.assertThisInitialized(r),E);l(babelHelpers.assertThisInitialized(r),H);l(babelHelpers.assertThisInitialized(r),S);l(babelHelpers.assertThisInitialized(r),_);l(babelHelpers.assertThisInitialized(r),L);l(babelHelpers.assertThisInitialized(r),w);l(babelHelpers.assertThisInitialized(r),m);l(babelHelpers.assertThisInitialized(r),y);l(babelHelpers.assertThisInitialized(r),g);l(babelHelpers.assertThisInitialized(r),b);c(babelHelpers.assertThisInitialized(r),d,{writable:true,value:void 0});c(babelHelpers.assertThisInitialized(r),f,{writable:true,value:void 0});c(babelHelpers.assertThisInitialized(r),p,{writable:true,value:null});c(babelHelpers.assertThisInitialized(r),v,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(r),d,t);r.setEventNamespace("BX.Socialnetwork.Collab.Form");babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(r),f,{});r.sidePanelId="sn-collab-access-rights";return r}babelHelpers.createClass(e,[{key:"open",value:function t(){}},{key:"prepareFormData",value:function t(e){return{id:Number(e.id),ownerId:Number(e.ownerId),moderators:i.Type.isArray(e.moderatorMembers)?e.moderatorMembers:[],permissions:i.Type.isPlainObject(e.permissions)?e.permissions:{},options:i.Type.isPlainObject(e.options)?e.options:{},permissionsLabels:i.Type.isPlainObject(e.permissionsLabels)?e.permissionsLabels:{},rightsPermissionsLabels:i.Type.isPlainObject(e.rightsPermissionsLabels)?e.rightsPermissionsLabels:{},optionsLabels:i.Type.isPlainObject(e.optionsLabels)?e.optionsLabels:{}}}},{key:"render",value:function t(e){var r=this;var n="ui-sidepanel-layout-content ui-sidepanel-layout-content-margin";h(this,m,j).call(this,e);var a=i.Tag.render(s||(s=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div ref="content" class="sn-collab__access-right-side-panel ui-sidepanel-layout">\n\t\t\t\t<div class="ui-sidepanel-layout-header">\n\t\t\t\t\t<div class="ui-sidepanel-layout-title">\n\t\t\t\t\t\t','\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<form ref="form" class="',' sn-collab__access-right-form">\n\t\t\t\t\t<div class="sn-collab__access-right-form-box">\n\t\t\t\t\t\t<div class="sn-collab__access-right-form-box-label">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="sn-collab__access-right-form-box --selectors">\n\t\t\t\t\t\t<div class="sn-collab__access-right-form-box-label">\n\t\t\t\t\t\t\t',"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t","\n\t\t\t\t\t\t",'\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\t\t\t\t<div class="ui-sidepanel-layout-footer-anchor"></div>\n\t\t\t\t<div class="ui-sidepanel-layout-footer">\n\t\t\t\t<div class="ui-sidepanel-layout-buttons">\n\t\t\t\t\t',"\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t"])),i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS"),n,i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_MANAGEMENT_LABEL"),babelHelpers.classPrivateFieldGet(this,f).ownerField.render(),babelHelpers.classPrivateFieldGet(this,f).moderatorsField.render(),babelHelpers.classPrivateFieldGet(this,f).showHistory.render(),babelHelpers.classPrivateFieldGet(this,f).whoCanInvite.render(),babelHelpers.classPrivateFieldGet(this,f).manageMessages.render(),i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_TASKS_LABEL"),babelHelpers.classPrivateFieldGet(this,f).tasksViewUsersField.render(),babelHelpers.classPrivateFieldGet(this,f).tasksSortTasksField.render(),babelHelpers.classPrivateFieldGet(this,f).tasksCreateTasksField.render(),babelHelpers.classPrivateFieldGet(this,f).tasksEditTasksField.render(),babelHelpers.classPrivateFieldGet(this,f).tasksDeleteTasksField.render(),h(this,b,O).call(this,e)),o=a.content,l=a.form;i.Event.bind(l,"change",(function(){h(r,g,N).call(r)}));return o}},{key:"onLoad",value:function t(e){babelHelpers.classPrivateFieldSet(this,p,BX.UI.Hint.createInstance({id:this.sidePanelId,popupParameters:{targetContainer:window.top.document.body}}));babelHelpers.classPrivateFieldGet(this,p).init(e.slider.getContainer());babelHelpers.classPrivateFieldSet(this,v,e.slider)}},{key:"onClose",value:function t(){babelHelpers.classPrivateFieldGet(this,p).hide()}}]);return e}(a.EventEmitter);function O(t){var e=this;var r=i.Tag.render(o||(o=babelHelpers.taggedTemplateLiteral(['\n\t\t\t<div ref="buttons">\n\t\t\t\t<button ref="save" class="ui-btn ui-btn-success">\n\t\t\t\t\t','\n\t\t\t\t</button>\n\t\t\t\t<button ref="cancel" class="ui-btn ui-btn-link">\n\t\t\t\t\t',"\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t"])),i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_BUTTON_SAVE"),i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_BUTTON_CANCEL")),n=r.buttons,a=r.save,s=r.cancel;i.Event.bind(a,"click",(function(){if(h(e,g,N).call(e)){if(babelHelpers.classPrivateFieldGet(e,d).enableServerSave===true){i.ajax.runAction("socialnetwork.collab.AccessRights.saveRights",{data:h(e,y,B).call(e,t)}).then((function(){babelHelpers.classPrivateFieldGet(e,v).close()}))["catch"]((function(t){console.error(t)}))}else{e.emit("save",h(e,y,B).call(e,t));babelHelpers.classPrivateFieldGet(e,v).close()}}}));i.Event.bind(s,"click",(function(){e.emit("cancel");babelHelpers.classPrivateFieldGet(e,v).close()}));return n}function N(){var t;var e=(t=babelHelpers.classPrivateFieldGet(this,f).ownerField)===null||t===void 0?void 0:t.getSelector().getTags().map((function(t){return t.id}));if(e.length===0){babelHelpers.classPrivateFieldGet(this,f).ownerField.setErrors([i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_ERROR_REQUIRED_OWNER")]);return false}babelHelpers.classPrivateFieldGet(this,f).ownerField.cleanError();return true}function B(t){var e,r;var n=t.ownerId;if((e=babelHelpers.classPrivateFieldGet(this,f).ownerField)!==null&&e!==void 0&&e.getSelector().getDialog().isLoaded()){var i;n=(i=babelHelpers.classPrivateFieldGet(this,f).ownerField)===null||i===void 0?void 0:i.getSelector().getTags().map((function(t){return t.id}))}var a=t.moderators;if((r=babelHelpers.classPrivateFieldGet(this,f).moderatorsField)!==null&&r!==void 0&&r.getSelector().getDialog().isLoaded()){var s;a=(s=babelHelpers.classPrivateFieldGet(this,f).moderatorsField)===null||s===void 0?void 0:s.getSelector().getTags().map((function(t){return t.id}))}return{id:t.id,ownerId:n[0],moderators:a,options:{showHistory:babelHelpers.classPrivateFieldGet(this,f).showHistory.getValue(),manageMessages:babelHelpers.classPrivateFieldGet(this,f).manageMessages.getValue(),whoCanInvite:babelHelpers.classPrivateFieldGet(this,f).whoCanInvite.getValue()},permissions:{tasks:{view_all:babelHelpers.classPrivateFieldGet(this,f).tasksViewUsersField.getValue(),sort:babelHelpers.classPrivateFieldGet(this,f).tasksSortTasksField.getValue(),create_tasks:babelHelpers.classPrivateFieldGet(this,f).tasksCreateTasksField.getValue(),edit_tasks:babelHelpers.classPrivateFieldGet(this,f).tasksEditTasksField.getValue(),delete_tasks:babelHelpers.classPrivateFieldGet(this,f).tasksDeleteTasksField.getValue()}}}}function j(t){h(this,w,R).call(this,t);h(this,L,M).call(this,t)}function R(t){var e,r,n;babelHelpers.classPrivateFieldGet(this,f).ownerField=h(this,_,z).call(this,t.ownerId);babelHelpers.classPrivateFieldGet(this,f).moderatorsField=h(this,S,W).call(this,t.moderators);babelHelpers.classPrivateFieldGet(this,f).showHistory=h(this,H,X).call(this,t.optionsLabels,(e=t.options)===null||e===void 0?void 0:e.showHistory);babelHelpers.classPrivateFieldGet(this,f).whoCanInvite=h(this,E,D).call(this,t.permissionsLabels,(r=t.options)===null||r===void 0?void 0:r.whoCanInvite);babelHelpers.classPrivateFieldGet(this,f).manageMessages=h(this,T,V).call(this,t.permissionsLabels,(n=t.options)===null||n===void 0?void 0:n.manageMessages)}function M(t){var e;var r=i.Type.isPlainObject((e=t.permissions)===null||e===void 0?void 0:e.tasks)?t.permissions.tasks:{};babelHelpers.classPrivateFieldGet(this,f).tasksViewUsersField=h(this,k,U).call(this,t.rightsPermissionsLabels,r===null||r===void 0?void 0:r.view_all);babelHelpers.classPrivateFieldGet(this,f).tasksSortTasksField=h(this,C,Y).call(this,t.rightsPermissionsLabels,r===null||r===void 0?void 0:r.sort);babelHelpers.classPrivateFieldGet(this,f).tasksCreateTasksField=h(this,F,K).call(this,t.rightsPermissionsLabels,r===null||r===void 0?void 0:r.create_tasks);babelHelpers.classPrivateFieldGet(this,f).tasksEditTasksField=h(this,I,q).call(this,t.rightsPermissionsLabels,r===null||r===void 0?void 0:r.edit_tasks);babelHelpers.classPrivateFieldGet(this,f).tasksDeleteTasksField=h(this,P,Q).call(this,t.rightsPermissionsLabels,r===null||r===void 0?void 0:r.delete_tasks)}function z(t){var r=h(this,G,J).call(this,"OwnerHint",i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_OWNER_LABEL"),i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_OWNER_LABEL_HINT"));return new e.UserSelector({id:"sn-collab-form-field-owner",label:r,enableAll:false,enableDepartments:false,multiple:false,values:[["user",t]]})}function W(t){var r=h(this,G,J).call(this,"ModeratorsHint",i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_MODERATORS_LABEL"),i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_MODERATORS_LABEL_HINT"));return new e.UserSelector({id:"sn-collab-form-field-moderators",label:r,enableAll:false,enableDepartments:false,multiple:true,values:t.map((function(t){return["user",t]}))})}function X(t,e){var r=h(this,G,J).call(this,"ShowHistoryHint",i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_SHOW_HISTORY_LABEL"));return h(this,x,Z).call(this,"showHistory",r,t,e)}function D(t,e){var r=h(this,G,J).call(this,"InitiateHint",i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_INITIATE_LABEL"),i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_INITIATE_LABEL_HINT"));return h(this,x,Z).call(this,"whoCanInvite",r,t,e)}function V(t,e){var r=h(this,G,J).call(this,"ChatHint",i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_CHAT_LABEL"),i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_CHAT_LABEL_HINT"));return h(this,x,Z).call(this,"manageMessages",r,t,e)}function U(t,e){var r=h(this,G,J).call(this,"TasksViewUsersHint",i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_TVU_LABEL"));return h(this,x,Z).call(this,"initiate",r,t,e)}function Y(t,e){var r=h(this,G,J).call(this,"TasksSortTasksHint",i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_TST_LABEL"));return h(this,x,Z).call(this,"initiate",r,t,e)}function K(t,e){var r=h(this,G,J).call(this,"TasksCreateTasksHint",i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_TCT_LABEL"));return h(this,x,Z).call(this,"initiate",r,t,e)}function q(t,e){var r=h(this,G,J).call(this,"TasksEditTasksHint",i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_TET_LABEL"));return h(this,x,Z).call(this,"initiate",r,t,e)}function Q(t,e){var r=h(this,G,J).call(this,"TasksDeleteTasksHint",i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS_TDT_LABEL"));return h(this,x,Z).call(this,"initiate",r,t,e)}function J(t,e){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(r===null){return'\n\t\t\t\t<div class="tasks-flow__create-title-with-hint">\n\t\t\t\t\t'.concat(e,"\n\t\t\t\t</div>\n\t\t\t")}return'\n\t\t\t<div class="tasks-flow__create-title-with-hint">\n\t\t\t\t'.concat(e,'\n\t\t\t\t<span\n\t\t\t\t\tdata-id="').concat(t,'"\n\t\t\t\t\tclass="ui-hint"\n\t\t\t\t\tdata-hint="').concat(r,'" \n\t\t\t\t\tdata-hint-no-icon\n\t\t\t\t><span class="ui-hint-icon"></span></span>\n\t\t\t</div>\n\t\t')}function Z(t,r,n){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"K";var a=[];Object.entries(n).forEach((function(t){var e=babelHelpers.slicedToArray(t,2),r=e[0],n=e[1];a.push({value:r,name:n,selected:r===i})}));return new e.Selector({id:"sn-collab-form-field-".concat(t),label:r,items:a,current:i})}function $(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */$=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var a=e&&e.prototype instanceof d?e:d,s=Object.create(a.prototype),o=new E(i||[]);return n(s,"_invoke",{value:L(t,r,o)}),s}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function d(){}function f(){}function p(){}var v={};l(v,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(T([])));g&&g!==e&&r.call(g,a)&&(v=g);var y=p.prototype=d.prototype=Object.create(v);function m(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,s,o){var l=u(t[n],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==babelHelpers["typeof"](h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,s,o)}),(function(t){i("throw",t,s,o)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return i("throw",t,s,o)}))}o(l.arg)}var a;n(this,"_invoke",{value:function t(r,n){function s(){return new e((function(t,e){i(r,n,t,e)}))}return a=a?a.then(s,s):s()}})}function L(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var o=_(s,r);if(o){if(o===h)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=u(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function H(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:undefined,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,l(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(w.prototype),l(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var s=new w(c(e,r,n,i),a);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},m(y),l(y,o,"Generator"),l(y,a,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=T,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(H),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=n,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(o)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),h},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),H(n),h}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;H(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),h}},t}var tt=function(t){babelHelpers.inherits(e,t);function e(){babelHelpers.classCallCheck(this,e);return babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).apply(this,arguments))}babelHelpers.createClass(e,[{key:"open",value:function t(){var e=this;var r=BX.SidePanel.Instance.getSlider(this.sidePanelId);if(r!==null&&r!==void 0&&r.isOpen()){return}BX.SidePanel.Instance.open(this.sidePanelId,{cacheable:false,title:i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS"),contentCallback:function(){var t=babelHelpers.asyncToGenerator($().mark((function t(r){var n,a;return $().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return i.ajax.runAction("socialnetwork.collab.AccessRights.getAddForm",{data:{}});case 3:n=r.sent;a=n.data;return r.abrupt("return",e.render(e.prepareFormData(a)));case 8:r.prev=8;r.t0=r["catch"](0);console.error(r.t0);return r.abrupt("return",Promise.reject());case 12:case"end":return r.stop()}}),t,null,[[0,8]])})));function r(e){return t.apply(this,arguments)}return r}(),width:661,events:{onLoad:this.onLoad.bind(this),onClose:this.onClose.bind(this)}})}}]);return e}(A);function et(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */et=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var a=e&&e.prototype instanceof d?e:d,s=Object.create(a.prototype),o=new E(i||[]);return n(s,"_invoke",{value:L(t,r,o)}),s}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function d(){}function f(){}function p(){}var v={};l(v,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(T([])));g&&g!==e&&r.call(g,a)&&(v=g);var y=p.prototype=d.prototype=Object.create(v);function m(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,s,o){var l=u(t[n],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==babelHelpers["typeof"](h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,s,o)}),(function(t){i("throw",t,s,o)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return i("throw",t,s,o)}))}o(l.arg)}var a;n(this,"_invoke",{value:function t(r,n){function s(){return new e((function(t,e){i(r,n,t,e)}))}return a=a?a.then(s,s):s()}})}function L(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var o=_(s,r);if(o){if(o===h)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=u(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function H(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:undefined,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,l(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(w.prototype),l(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var s=new w(c(e,r,n,i),a);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},m(y),l(y,o,"Generator"),l(y,a,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=T,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(H),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=n,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(o)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),h},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),H(n),h}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;H(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),h}},t}function rt(t,e,r){nt(t,e);e.set(t,r)}function nt(t,e){if(e.has(t)){throw new TypeError("Cannot initialize the same private elements twice on an object")}}var it=new WeakMap;var at=function(t){babelHelpers.inherits(e,t);function e(t){var r;babelHelpers.classCallCheck(this,e);r=babelHelpers.possibleConstructorReturn(this,babelHelpers.getPrototypeOf(e).call(this,t));rt(babelHelpers.assertThisInitialized(r),it,{writable:true,value:void 0});babelHelpers.classPrivateFieldSet(babelHelpers.assertThisInitialized(r),it,t);if(!i.Type.isNumber(babelHelpers.classPrivateFieldGet(babelHelpers.assertThisInitialized(r),it).collabId)){throw new TypeError("Collab id is required")}return r}babelHelpers.createClass(e,[{key:"open",value:function t(){var e=this;var r="sn-collab-access-rights-".concat(babelHelpers.classPrivateFieldGet(this,it).collabId);var n=BX.SidePanel.Instance.getSlider(r);if(n!==null&&n!==void 0&&n.isOpen()){return}BX.SidePanel.Instance.open(r,{cacheable:false,title:i.Loc.getMessage("SN_COLLAB_ACCESS_RIGHTS"),contentCallback:function(){var t=babelHelpers.asyncToGenerator(et().mark((function t(r){var n,a;return et().wrap((function t(r){while(1)switch(r.prev=r.next){case 0:r.prev=0;r.next=3;return i.ajax.runAction("socialnetwork.collab.AccessRights.getEditForm",{data:{collabId:babelHelpers.classPrivateFieldGet(e,it).collabId}});case 3:n=r.sent;a=n.data;return r.abrupt("return",e.render(e.prepareFormData(a)));case 8:r.prev=8;r.t0=r["catch"](0);console.error(r.t0);return r.abrupt("return",Promise.reject());case 12:case"end":return r.stop()}}),t,null,[[0,8]])})));function r(e){return t.apply(this,arguments)}return r}(),width:661,events:{onLoad:this.onLoad.bind(this),onClose:this.onClose.bind(this)}})}}]);return e}(A);function st(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */st=function e(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",s=i.asyncIterator||"@@asyncIterator",o=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function t(e,r,n){return e[r]=n}}function c(t,e,r,i){var a=e&&e.prototype instanceof d?e:d,s=Object.create(a.prototype),o=new E(i||[]);return n(s,"_invoke",{value:L(t,r,o)}),s}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h={};function d(){}function f(){}function p(){}var v={};l(v,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(T([])));g&&g!==e&&r.call(g,a)&&(v=g);var y=p.prototype=d.prototype=Object.create(v);function m(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function i(n,a,s,o){var l=u(t[n],t,a);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==babelHelpers["typeof"](h)&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,s,o)}),(function(t){i("throw",t,s,o)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return i("throw",t,s,o)}))}o(l.arg)}var a;n(this,"_invoke",{value:function t(r,n){function s(){return new e((function(t,e){i(r,n,t,e)}))}return a=a?a.then(s,s):s()}})}function L(t,e,r){var n="suspendedStart";return function(i,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw a;return k()}for(r.method=i,r.arg=a;;){var s=r.delegate;if(s){var o=_(s,r);if(o){if(o===h)continue;return o}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}function _(t,e){var r=e.method,n=t.iterator[r];if(undefined===n)return e.delegate=null,"throw"===r&&t.iterator["return"]&&(e.method="return",e.arg=undefined,_(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var i=u(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,h;var a=i.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=undefined),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function H(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function E(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=undefined,e.done=!0,e};return i.next=i}}return{next:k}}function k(){return{value:undefined,done:!0}}return f.prototype=p,n(y,"constructor",{value:p,configurable:!0}),n(p,"constructor",{value:f,configurable:!0}),f.displayName=l(p,o,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,l(t,o,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(w.prototype),l(w.prototype,s,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,i,a){void 0===a&&(a=Promise);var s=new w(c(e,r,n,i),a);return t.isGeneratorFunction(r)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},m(y),l(y,o,"Generator"),l(y,a,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=T,E.prototype={constructor:E,reset:function t(e){if(this.prev=0,this.next=0,this.sent=this._sent=undefined,this.done=!1,this.delegate=null,this.method="next",this.arg=undefined,this.tryEntries.forEach(H),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=undefined)},stop:function t(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function t(e){if(this.done)throw e;var n=this;function i(t,r){return o.type="throw",o.arg=e,n.next=t,r&&(n.method="next",n.arg=undefined),!!r}for(var a=this.tryEntries.length-1;a>=0;--a){var s=this.tryEntries[a],o=s.completion;if("root"===s.tryLoc)return i("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return i(s.catchLoc,!0);if(this.prev<s.finallyLoc)return i(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return i(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return i(s.finallyLoc)}}}},abrupt:function t(e,n){for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i];if(a.tryLoc<=this.prev&&r.call(a,"finallyLoc")&&this.prev<a.finallyLoc){var s=a;break}}s&&("break"===e||"continue"===e)&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var o=s?s.completion:{};return o.type=e,o.arg=n,s?(this.method="next",this.next=s.finallyLoc,h):this.complete(o)},complete:function t(e,r){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&r&&(this.next=r),h},finish:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),H(n),h}},catch:function t(e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;H(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function t(e,r,n){return this.delegate={iterator:T(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=undefined),h}},t}var ot=function(){function t(){babelHelpers.classCallCheck(this,t)}babelHelpers.createClass(t,null,[{key:"openForm",value:function(){var t=babelHelpers.asyncToGenerator(st().mark((function t(e){var r,n,i;return st().wrap((function t(a){while(1)switch(a.prev=a.next){case 0:a.next=2;return top.BX.Runtime.loadExtension("socialnetwork.collab.access-rights");case 2:r=Number(e===null||e===void 0?void 0:e.collabId)>0;if(!r){a.next=7;break}n=new at(e);n.open();return a.abrupt("return",n);case 7:i=new tt(e);i.open();return a.abrupt("return",i);case 10:case"end":return a.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}]);return t}();t.AccessRights=ot})(this.BX.Socialnetwork.Collab=this.BX.Socialnetwork.Collab||{},BX.UI.FormElements,BX,BX,BX,BX.Event);
//# sourceMappingURL=access-rights.bundle.map.js