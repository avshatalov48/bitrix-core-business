{"version":3,"file":"index.bundle.js","sources":["../src/automation-page.js","../src/index.js"],"sourcesContent":["import { Checker } from 'ui.form-elements.view';\nimport { SettingsSection, BaseSettingsPage } from 'ui.form-elements.field';\nimport { Loc } from 'main.core';\nimport { EventEmitter } from 'main.core.events';\nimport { Section } from 'ui.section';\n\nexport class AutomationPage extends BaseSettingsPage\n{\n\tstatic get type(): string\n\t{\n\t\treturn 'automation';\n\t}\n\n\tconstructor()\n\t{\n\t\tsuper();\n\n\t\tthis.titlePage = Loc.getMessage('BIZPROC_INTRANET_SETTINGS_TITLE_PAGE_AUTOMATION') ?? '';\n\t\tthis.descriptionPage = Loc.getMessage('BIZPROC_INTRANET_SETTINGS_DESCRIPTION_PAGE_AUTOMATION') ?? '';\n\t}\n\n\tgetType(): string\n\t{\n\t\treturn this.constructor.type;\n\t}\n\n\tappendSections(contentNode: HTMLElement): void\n\t{\n\t\tthis.#buildAdditionalSection().renderTo(contentNode);\n\t}\n\n\t#buildAdditionalSection(): ?SettingsSection\n\t{\n\t\tif (!this.hasValue('SECTION_MAIN'))\n\t\t{\n\t\t\treturn null;\n\t\t}\n\n\t\tconst additionalSection = new Section(this.getValue('SECTION_MAIN'));\n\n\t\tconst sectionSettings = new SettingsSection({\n\t\t\tsection: additionalSection,\n\t\t\tparent: this,\n\t\t});\n\n\t\tif (this.hasValue('crm_activity_wait_for_closure_task'))\n\t\t{\n\t\t\tconst showQuitField = new Checker(this.getValue('crm_activity_wait_for_closure_task'));\n\t\t\tthis.#subscribeAnalytics(showQuitField, 'crm_activity_wait_for_closure_task');\n\t\t\tAutomationPage.addToSectionHelper(showQuitField, sectionSettings);\n\t\t}\n\n\t\tif (this.hasValue('crm_activity_wait_for_closure_comments'))\n\t\t{\n\t\t\tconst newUserField = new Checker(this.getValue('crm_activity_wait_for_closure_comments'));\n\t\t\tthis.#subscribeAnalytics(newUserField, 'crm_activity_wait_for_closure_comments');\n\t\t\tAutomationPage.addToSectionHelper(newUserField, sectionSettings);\n\t\t}\n\n\t\treturn sectionSettings;\n\t}\n\n\t#subscribeAnalytics(checker: Checker, tag: string): void\n\t{\n\t\tEventEmitter.subscribe(\n\t\t\tchecker,\n\t\t\t'change',\n\t\t\t() => {\n\t\t\t\tthis.getAnalytic()?.addEvent(\n\t\t\t\t\t`bizproc_${tag}`,\n\t\t\t\t\t{\n\t\t\t\t\t\ttool: 'crm',\n\t\t\t\t\t\tcategory: 'bizproc_operations',\n\t\t\t\t\t\tevent: 'settings_edit',\n\t\t\t\t\t\ttype: tag,\n\t\t\t\t\t\tc_element: checker.isChecked() ? 'on' : 'off',\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t},\n\t\t);\n\t}\n}\n","import { EventEmitter } from 'main.core.events';\nimport { AutomationPage } from './automation-page';\n\nEventEmitter.subscribe(\n\tEventEmitter.GLOBAL_TARGET,\n\t'BX.Intranet.Settings:onExternalPageLoaded:automation',\n\t() => new AutomationPage(),\n);\n"],"names":["AutomationPage","titlePage","Loc","getMessage","descriptionPage","constructor","type","contentNode","renderTo","BaseSettingsPage","hasValue","additionalSection","Section","getValue","sectionSettings","SettingsSection","section","parent","showQuitField","Checker","addToSectionHelper","newUserField","checker","tag","EventEmitter","subscribe","getAnalytic","addEvent","tool","category","event","c_element","isChecked","GLOBAL_TARGET"],"mappings":";;;;;;;;;;AAAA,CAIqC;CAAA;AAErC,KAAaA,cAAc;GAAA;GAAA;KAAA;KAAA,oBAG1B;OACC,OAAO,YAAY;;;GAGpB,0BACA;KAAA;KAAA;KAAA;KACC;KAAQ;KAAA;KAER,MAAKC,SAAS,sBAAGC,aAAG,CAACC,UAAU,CAAC,iDAAiD,CAAC,6DAAI,EAAE;KACxF,MAAKC,eAAe,uBAAGF,aAAG,CAACC,UAAU,CAAC,uDAAuD,CAAC,+DAAI,EAAE;KAAC;;GACrG;KAAA;KAAA,0BAGD;OACC,OAAO,IAAI,CAACE,WAAW,CAACC,IAAI;;;KAC5B;KAAA,+BAEcC,WAAwB,EACvC;OACC,2BAAI,0DAAJ,IAAI,EAA2BC,QAAQ,CAACD,WAAW,CAAC;;;GACpD;CAAA,EAvBkCE,sCAAgB;CA2EnD,oCAjDA;GACC,IAAI,CAAC,IAAI,CAACC,QAAQ,CAAC,cAAc,CAAC,EAClC;KACC,OAAO,IAAI;;GAGZ,IAAMC,iBAAiB,GAAG,IAAIC,kBAAO,CAAC,IAAI,CAACC,QAAQ,CAAC,cAAc,CAAC,CAAC;GAEpE,IAAMC,eAAe,GAAG,IAAIC,qCAAe,CAAC;KAC3CC,OAAO,EAAEL,iBAAiB;KAC1BM,MAAM,EAAE;IACR,CAAC;GAEF,IAAI,IAAI,CAACP,QAAQ,CAAC,oCAAoC,CAAC,EACvD;KACC,IAAMQ,aAAa,GAAG,IAAIC,4BAAO,CAAC,IAAI,CAACN,QAAQ,CAAC,oCAAoC,CAAC,CAAC;KACtF,2BAAI,kDAAJ,IAAI,EAAqBK,aAAa,EAAE,oCAAoC;KAC5ElB,cAAc,CAACoB,kBAAkB,CAACF,aAAa,EAAEJ,eAAe,CAAC;;GAGlE,IAAI,IAAI,CAACJ,QAAQ,CAAC,wCAAwC,CAAC,EAC3D;KACC,IAAMW,YAAY,GAAG,IAAIF,4BAAO,CAAC,IAAI,CAACN,QAAQ,CAAC,wCAAwC,CAAC,CAAC;KACzF,2BAAI,kDAAJ,IAAI,EAAqBQ,YAAY,EAAE,wCAAwC;KAC/ErB,cAAc,CAACoB,kBAAkB,CAACC,YAAY,EAAEP,eAAe,CAAC;;GAGjE,OAAOA,eAAe;CACvB;CAAC,8BAEmBQ,OAAgB,EAAEC,GAAW,EACjD;GAAA;GACCC,6BAAY,CAACC,SAAS,CACrBH,OAAO,EACP,QAAQ,EACR,YAAM;KAAA;KACL,4BAAI,CAACI,WAAW,EAAE,uDAAlB,mBAAoBC,QAAQ,mBAChBJ,GAAG,GACd;OACCK,IAAI,EAAE,KAAK;OACXC,QAAQ,EAAE,oBAAoB;OAC9BC,KAAK,EAAE,eAAe;OACtBxB,IAAI,EAAEiB,GAAG;OACTQ,SAAS,EAAET,OAAO,CAACU,SAAS,EAAE,GAAG,IAAI,GAAG;MACxC,CACD;IACD,CACD;CACF;;AC7EDR,8BAAY,CAACC,SAAS,CACrBD,6BAAY,CAACS,aAAa,EAC1B,sDAAsD,EACtD;GAAA,OAAM,IAAIjC,cAAc,EAAE;CAAA,EAC1B;;;;"}