{"version":3,"file":"dialogeditcontact.bundle.js","sources":["../src/dialogeditcontact.js"],"sourcesContent":["import { Tag, Loc, Validation } from 'main.core';\nimport { SidePanelWrapper } from 'mail.sidepanelwrapper';\nimport { MessageBox } from 'ui.dialogs.messagebox';\nimport { Avatar } from 'mail.avatar';\n\nimport './css/style.css';\nimport '/bitrix/js/ui/forms/ui.forms.css';\nimport 'ui.forms';\nimport 'ui.alerts';\n\nexport class DialogEditContact\n{\n\tstatic getCheckedFields(contentElement)\n\t{\n\t\tconst emailItem = contentElement.querySelector('[data-role=\"email-container\"]');\n\t\tconst emailInput = emailItem.querySelector('[data-role=\"input-field\"]');\n\t\tconst email = emailInput.value;\n\n\t\tconst nameItem = contentElement.querySelector('[data-role=\"name-container\"]');\n\t\tconst nameInput = nameItem.querySelector('[data-role=\"input-field\"]');\n\t\tlet name = nameInput.value;\n\n\t\tlet fieldsAreFilledCorrectly = true;\n\t\tlet checkedFields = [];\n\n\t\tif (!Validation.isEmail(email))\n\t\t{\n\t\t\tfieldsAreFilledCorrectly = false;\n\t\t\temailItem.showError(0);\n\t\t}\n\t\telse if (name.length < 1)\n\t\t{\n\t\t\tname = email.split('@')[0];\n\t\t}\n\n\t\tcheckedFields = {\n\t\t\tname: name,\n\t\t\temail: email,\n\t\t};\n\n\t\tif (fieldsAreFilledCorrectly)\n\t\t{\n\t\t\treturn checkedFields;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tstatic openRemoveDialog(config = {\n\t\tid: '',\n\t})\n\t{\n\t\tlet promiseRemoveContact = new BX.Promise();\n\t\tlet removeContact = this.removeContact;\n\t\tconst topSlider = BX.SidePanel.Instance.getTopSlider();\n\t\tlet messageBoxZIndex = 1;\n\n\t\tif (topSlider != null)\n\t\t{\n\t\t\tmessageBoxZIndex += topSlider.getZindex();\n\t\t}\n\n\t\tconst messageBox = new MessageBox({\n\t\t\ttitle: Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_REMOVE_DIALOG_TITLE\"),\n\t\t\tmessage: Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_REMOVE_DIALOG_MESSAGE\"),\n\t\t\tbuttons: BX.UI.Dialogs.MessageBoxButtons.OK_CANCEL,\n\t\t\tpopupOptions: {\n\t\t\t\tzIndex: messageBoxZIndex,\n\t\t\t},\n\t\t\tonOk: function() {\n\t\t\t\tremoveContact(config['id']).then(() => promiseRemoveContact.fulfill());\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t\tonCancel: function() {\n\t\t\t\tpromiseRemoveContact.reject();\n\t\t\t\tmessageBox.close();\n\t\t\t},\n\t\t});\n\n\t\tmessageBox.show();\n\n\t\treturn promiseRemoveContact;\n\t}\n\n\tstatic removeContact(id)\n\t{\n\t\treturn BX.ajax.runAction('mail.addressbook.removecontacts', {\n\t\t\tdata: {\n\t\t\t\tidSet: [id],\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic saveContact(name, email, id)\n\t{\n\t\tconst data = Avatar.getAvatarData({\n\t\t\tfullName: name,\n\t\t\temail: email,\n\t\t});\n\n\t\tlet contactData = {\n\t\t\tNAME: name,\n\t\t\tEMAIL: email,\n\t\t\tCOLOR: data['color'],\n\t\t\tINITIALS: data['abbreviation'],\n\t\t};\n\n\t\tif (id !== undefined)\n\t\t{\n\t\t\tcontactData['ID'] = id;\n\t\t}\n\n\t\treturn BX.ajax.runAction('mail.addressbook.savecontact', {\n\t\t\tdata: {\n\t\t\t\tcontactData: contactData,\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic showError(id=0)\n\t{\n\t\tthis.emailInputWrapper.classList.add('ui-ctl-danger');\n\t\tBX.show(this.errorTitle[id]);\n\t}\n\n\tstatic hideError(id= 'all')\n\t{\n\t\tthis.emailInputWrapper.classList.remove('ui-ctl-danger');\n\t\tif(id === 'all'){\n\t\t\tthis.errorTitle.forEach(element => {\n\t\t\t\tBX.hide(element)\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\t\tBX.hide(this.errorTitle[id]);\n\t}\n\n\tstatic openDialog(titleText, contactConfig = {\n\t\tcontactID: 'new'\n\t})\n\t{\n\t\tconst sliderId = 'dialogEditContact_' + contactConfig['contactID'];\n\n\t\tlet currentEmail = '';\n\t\tlet currentName = '';\n\t\tlet disablingEmailInputClass = '';\n\t\tlet disablingEmailInputAttribute = '';\n\n\t\tif (contactConfig['contactData'] !== undefined)\n\t\t{\n\t\t\tcurrentName = contactConfig['contactData']['name'];\n\t\t\tcurrentEmail = contactConfig['contactData']['email'];\n\t\t\tdisablingEmailInputClass = 'ui-ctl-disabled';\n\t\t\tdisablingEmailInputAttribute = 'disabled';\n\t\t}\n\n\t\tconst emailInput = Tag.render`<input data-role=\"input-field\" type=\"text\" class=\"ui-ctl-element\" value=\"\" placeholder=\"info@example.com\"  ${disablingEmailInputAttribute}>`;\n\t\tconst emailInputWrapper = Tag.render`<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100 ${disablingEmailInputClass}\">\n\t\t\t${emailInput}\n\t\t</div>`;\n\t\temailInput.value = currentEmail;\n\n\t\tconst errorTitleEmailIsIncorrect = Tag.render`<div class=\"ui-alert ui-alert-danger mail-addressbook-error-box\">\n\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_EMAIL_ERROR\")}</span>\n\t\t</div>`;\n\n\t\tconst errorTitleEmailIsAlreadyExists = Tag.render`<div class=\"ui-alert ui-alert-danger mail-addressbook-error-box\">\n\t\t\t<span class=\"ui-alert-message\">${Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_EMAIL_ERROR_EMAIL_IS_ALREADY_EXISTS\")}</span>\n\t\t\t<br>\n\t\t</div>`;\n\n\t\tconst openEditSliderBtn = errorTitleEmailIsAlreadyExists.querySelector('[data-role=\"contact-email\"]')\n\n\t\tconst emailItem = Tag.render`<div data-role=\"email-container\" class=\"mail-addressbook-dialogeditcontact-item\">\n\t\t\t<label class=\"mail-addressbook-dialogeditcontact-lable\">${Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_EMAIL_TITLE\")}\n\t\t\t\t<div id=\"mail-addressbook-dialogeditcontact-contact-email-container\" class=\"ui-ctl ui-ctl-textbox mail-addressbook-dialogeditcontact-field\">\n\t\t\t\t\t${emailInputWrapper}\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t\t${errorTitleEmailIsIncorrect}\n\t\t\t${errorTitleEmailIsAlreadyExists}\n\t\t</div>`;\n\n\t\tconst nameInput = Tag.render`<input data-role=\"input-field\" type=\"text\" class=\"ui-ctl-element\" value=\"\" placeholder=\"\">`;\n\t\tconst nameInputWrapper = Tag.render`<div class=\"ui-ctl ui-ctl-textbox ui-ctl-w100\">\n\t\t\t${nameInput}\n\t\t</div>`;\n\t\tnameInput.value = currentName;\n\n\t\tconst nameItem = Tag.render`<div data-role=\"name-container\" class=\"mail-addressbook-dialogeditcontact-item\">\n\t\t\t<label class=\"mail-addressbook-dialogeditcontact-lable\">${Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_NAME_TITLE\")}\n\t\t\t\t<div id=\"mail-addressbook-dialogeditcontact-contact-email-container\" class=\"ui-ctl ui-ctl-textbox mail-addressbook-dialogeditcontact-field\">\n\t\t\t\t\t${nameInputWrapper}\n\t\t\t\t</div>\n\t\t\t</label>\n\t\t</div>`;\n\n\t\tlet content = Tag.render`\n\t\t<div>\n\t\t\t${nameItem}\n\t\t\t${emailItem}\n\t\t</div>`;\n\n\t\temailItem.errorTitle = [\n\t\t\terrorTitleEmailIsIncorrect,\n\t\t\terrorTitleEmailIsAlreadyExists\n\t\t];\n\n\t\temailItem.emailInputWrapper = emailInputWrapper;\n\t\temailItem.showError = this.showError;\n\t\temailItem.hideError = this.hideError;\n\t\temailItem.hideError();\n\n\t\temailInput.oninput = () => emailItem.hideError();\n\n\t\tSidePanelWrapper.open({\n\t\t\tid: sliderId,\n\t\t\ttitleText: titleText,\n\t\t\tfooterIsActive: true,\n\t\t\tcontent: content,\n\t\t\tcancelButton: {\n\t\t\t\ttext: Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_BUTTON_CANCEL\"),\n\t\t\t},\n\t\t\tconsentButton: {\n\t\t\t\ttext: Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_BUTTON_SAVE\"),\n\t\t\t\tfunction: (eventObject) => {\n\t\t\t\t\tconst checkedFields = this.getCheckedFields(content);\n\n\t\t\t\t\tif (checkedFields)\n\t\t\t\t\t{\n\t\t\t\t\t\teventObject.setClocking(true);\n\n\t\t\t\t\t\tthis.saveContact(checkedFields['name'], checkedFields['email'], contactConfig['contactID']).then((response) => {\n\t\t\t\t\t\t\tBX.SidePanel.Instance.postMessageAll(sliderId, 'dialogEditContact::reloadList', {});\n\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t}).catch((response) => {\n\n\t\t\t\t\t\t\tlet message = null;\n\n\t\t\t\t\t\t\tfor (const error of response.errors)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tif (error.code === 'ALL_CONTACTS_ALREADY_ADDED')\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tmessage = error.customData.lastFound[0];\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(message !== null)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\teventObject.setClocking(false);\n\t\t\t\t\t\t\t\topenEditSliderBtn.onclick = () => {\n\t\t\t\t\t\t\t\t\tthis.openEditDialog({\n\t\t\t\t\t\t\t\t\t\tcontactID: Number(message['ID']),\n\t\t\t\t\t\t\t\t\t\tcontactData: {\n\t\t\t\t\t\t\t\t\t\t\tname: message['NAME'],\n\t\t\t\t\t\t\t\t\t\t\temail: message['EMAIL'],\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\temailItem.showError(1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.postMessageAll(sliderId, 'dialogEditContact::reloadList', {});\n\t\t\t\t\t\t\t\tBX.SidePanel.Instance.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t}\n\n\tstatic openCreateDialog(config)\n\t{\n\t\tthis.openDialog(Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_TITLE_BAR_ADD\"), config);\n\t}\n\n\tstatic openEditDialog(config = {\n\t\tcontactID: '',\n\t\tcontactData: {\n\t\t\tname: '',\n\t\t\temail: '',\n\t\t},\n\t})\n\t{\n\t\tthis.openDialog(Loc.getMessage(\"MAIL_DIALOG_EDIT_CONTACT_TITLE_BAR_EDIT\"), config);\n\t}\n}"],"names":["DialogEditContact","contentElement","emailItem","querySelector","emailInput","email","value","nameItem","nameInput","name","fieldsAreFilledCorrectly","checkedFields","Validation","isEmail","showError","length","split","config","id","promiseRemoveContact","BX","Promise","removeContact","topSlider","SidePanel","Instance","getTopSlider","messageBoxZIndex","getZindex","messageBox","MessageBox","title","Loc","getMessage","message","buttons","UI","Dialogs","MessageBoxButtons","OK_CANCEL","popupOptions","zIndex","onOk","then","fulfill","close","onCancel","reject","show","ajax","runAction","data","idSet","Avatar","getAvatarData","fullName","contactData","NAME","EMAIL","COLOR","INITIALS","undefined","emailInputWrapper","classList","add","errorTitle","remove","forEach","element","hide","titleText","contactConfig","contactID","sliderId","currentEmail","currentName","disablingEmailInputClass","disablingEmailInputAttribute","Tag","render","errorTitleEmailIsIncorrect","errorTitleEmailIsAlreadyExists","openEditSliderBtn","nameInputWrapper","content","hideError","oninput","SidePanelWrapper","open","footerIsActive","cancelButton","text","consentButton","eventObject","getCheckedFields","setClocking","saveContact","response","postMessageAll","errors","error","code","customData","lastFound","onclick","openEditDialog","Number","openDialog"],"mappings":"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"}