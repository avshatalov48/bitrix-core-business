this.BX=this.BX||{};this.BX.Calendar=this.BX.Calendar||{};(function(e,s,a,i){"use strict";var t=babelHelpers.classPrivateFieldLooseKey("params");var l=babelHelpers.classPrivateFieldLooseKey("icsFile");var r=babelHelpers.classPrivateFieldLooseKey("handleAction");var o=babelHelpers.classPrivateFieldLooseKey("getLayoutProps");var n=babelHelpers.classPrivateFieldLooseKey("prepareMembers");var b=babelHelpers.classPrivateFieldLooseKey("getTitle");var c=babelHelpers.classPrivateFieldLooseKey("getIconClassName");var v=babelHelpers.classPrivateFieldLooseKey("getBottomButtons");var d=babelHelpers.classPrivateFieldLooseKey("acceptInvitation");var p=babelHelpers.classPrivateFieldLooseKey("declineInvitation");var P=babelHelpers.classPrivateFieldLooseKey("handleDecisionAction");var h=babelHelpers.classPrivateFieldLooseKey("getStatus");var L=babelHelpers.classPrivateFieldLooseKey("updateStatus");var F=babelHelpers.classPrivateFieldLooseKey("getOwner");var u=babelHelpers.classPrivateFieldLooseKey("downloadIcsFile");class B{constructor(e){Object.defineProperty(this,u,{value:A});Object.defineProperty(this,F,{value:T});Object.defineProperty(this,L,{value:C});Object.defineProperty(this,h,{value:O});Object.defineProperty(this,P,{value:D});Object.defineProperty(this,p,{value:_});Object.defineProperty(this,d,{value:I});Object.defineProperty(this,v,{value:N});Object.defineProperty(this,c,{value:m});Object.defineProperty(this,b,{value:y});Object.defineProperty(this,n,{value:E});Object.defineProperty(this,o,{value:f});Object.defineProperty(this,r,{value:H});Object.defineProperty(this,t,{writable:true,value:void 0});Object.defineProperty(this,l,{writable:true,value:void 0});babelHelpers.classPrivateFieldLooseBase(this,t)[t]=e;babelHelpers.classPrivateFieldLooseBase(this,r)[r](e.action)}render(){const e=new a.EventLayout(babelHelpers.classPrivateFieldLooseBase(this,o)[o]());babelHelpers.classPrivateFieldLooseBase(this,t)[t].container.innerHTML="";babelHelpers.classPrivateFieldLooseBase(this,t)[t].container.append(e.render())}}function H(e){if(e==="accept"){babelHelpers.classPrivateFieldLooseBase(this,P)[P]("Y")}if(e==="decline"){babelHelpers.classPrivateFieldLooseBase(this,P)[P]("N")}if(e==="ics"){babelHelpers.classPrivateFieldLooseBase(this,u)[u]()}}function f(){if(!babelHelpers.classPrivateFieldLooseBase(this,t)[t].event){return{eventNotFound:{title:s.Loc.getMessage("CALENDAR_PUBLIC_EVENT_TITLE_NOT_ATTENDEES"),subtitle:s.Loc.getMessage("CALENDAR_PUBLIC_EVENT_DESCRIPTION_NOT_ATTENDEES")}}}let e=0;if(babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.timezone){e=(i.Util.getTimeZoneOffset()-i.Util.getTimeZoneOffset(babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.timezone))*60*1e3}return{eventName:babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.name,from:new Date(parseInt(babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.timestampFrom)*1e3+e),to:new Date(parseInt(babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.timestampTo)*1e3+e),timezone:babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.timezone,browserTimezone:Intl.DateTimeFormat().resolvedOptions().timeZone,isFullDay:babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.isFullDay,location:babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.location,description:babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.description,rruleDescription:babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.rruleDescription,members:babelHelpers.classPrivateFieldLooseBase(this,n)[n](),files:babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.files,allAttendees:true,filled:true,onDeclineEvent:babelHelpers.classPrivateFieldLooseBase(this,h)[h]()==="Y"?babelHelpers.classPrivateFieldLooseBase(this,p)[p].bind(this):null,title:babelHelpers.classPrivateFieldLooseBase(this,b)[b](),iconClassName:babelHelpers.classPrivateFieldLooseBase(this,c)[c](),bottomButtons:babelHelpers.classPrivateFieldLooseBase(this,v)[v](),poweredLabel:{isRu:babelHelpers.classPrivateFieldLooseBase(this,t)[t].isRu}}}function E(){var e;if(((e=babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.members)==null?void 0:e.length)===1&&babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.members[0].isOwner){return[]}return[...babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.members].sort(((e,s)=>{const a=e.isOwner?1:0;const i=s.isOwner?1:0;return i-a}))}function y(){if(babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.isDeleted||!babelHelpers.classPrivateFieldLooseBase(this,h)[h]()){return s.Loc.getMessage("CALENDAR_PUBLIC_EVENT_MEETING_IS_CANCELLED")}if(babelHelpers.classPrivateFieldLooseBase(this,h)[h]()==="Q"){return s.Loc.getMessage("CALENDAR_PUBLIC_EVENT_YOU_WAS_INVITED")}if(babelHelpers.classPrivateFieldLooseBase(this,h)[h]()==="Y"){return s.Loc.getMessage("CALENDAR_PUBLIC_EVENT_YOU_ACCEPTED_MEETING")}if(babelHelpers.classPrivateFieldLooseBase(this,h)[h]()==="N"){return s.Loc.getMessage("CALENDAR_PUBLIC_EVENT_YOU_DECLINED_MEETING")}return""}function m(){if(babelHelpers.classPrivateFieldLooseBase(this,h)[h]()==="N"||!babelHelpers.classPrivateFieldLooseBase(this,h)[h]()||babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.isDeleted){return"--decline"}return"--accept"}function N(){if(babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.isDeleted){return{}}if(babelHelpers.classPrivateFieldLooseBase(this,h)[h]()==="Q"){return{onAcceptInvitation:babelHelpers.classPrivateFieldLooseBase(this,d)[d].bind(this),onDeclineInvitation:babelHelpers.classPrivateFieldLooseBase(this,p)[p].bind(this)}}if(babelHelpers.classPrivateFieldLooseBase(this,h)[h]()==="Y"){return{onDownloadIcs:babelHelpers.classPrivateFieldLooseBase(this,u)[u].bind(this)}}if(babelHelpers.classPrivateFieldLooseBase(this,h)[h]()==="N"){return{onAcceptInvitation:babelHelpers.classPrivateFieldLooseBase(this,d)[d].bind(this)}}return{}}function I(){babelHelpers.classPrivateFieldLooseBase(this,P)[P]("Y")}function _(){babelHelpers.classPrivateFieldLooseBase(this,P)[P]("N")}function D(e){BX.ajax.runAction("calendar.api.publicevent.handleDecision",{data:{decision:e,eventId:babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.id,hash:babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.hash}}).then((e=>{babelHelpers.classPrivateFieldLooseBase(this,L)[L](e.data)}))}function O(){const e=babelHelpers.classPrivateFieldLooseBase(this,F)[F]();return e.status}function C(e){const s=babelHelpers.classPrivateFieldLooseBase(this,F)[F]();s.status=e;this.render()}function T(){var e;return(e=babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.members.find((e=>e.isOwner)))!=null?e:{}}async function A(){if(!babelHelpers.classPrivateFieldLooseBase(this,l)[l]){const e=await BX.ajax.runAction("calendar.api.publicevent.getIcsFileContent",{data:{eventId:babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.id,hash:babelHelpers.classPrivateFieldLooseBase(this,t)[t].event.hash}});babelHelpers.classPrivateFieldLooseBase(this,l)[l]=e.data}i.Util.downloadIcsFile(babelHelpers.classPrivateFieldLooseBase(this,l)[l],"event")}e.PublicEvent=B})(this.BX.Calendar.Public=this.BX.Calendar.Public||{},BX,BX.Calendar.Sharing,BX.Calendar);
//# sourceMappingURL=public-event.bundle.map.js