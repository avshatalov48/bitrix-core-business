(function(){if(typeof this.BX!=="undefined"&&typeof this.BX.Vue3!=="undefined"&&typeof this.BX.Vue3.BitrixVue!=="undefined"){console.warn("BX.Vue3.BitrixVue already loaded.");return}this.BX=this.BX||{};(function(e,t,i,n,s,o){"use strict";
/*!
	 * Utilities from VueUse collection
	 * (c) 2019-2022 Anthony Fu
	 * Released under the MIT License.
	 *
	 * @source: https://github.com/vueuse/vueuse/blob/main/packages/shared/tryOnScopeDispose/index.ts
	 * @source: https://github.com/vueuse/vueuse/blob/main/packages/rxjs/useObservable/index.ts
	 */function r(e){if(o.getCurrentScope()){o.onScopeDispose(e);return true}return false}function a(e,t){const i=o.ref(t==null?void 0:t.initialValue);const n=e.subscribe({next:e=>i.value=e,error:t==null?void 0:t.onError});r((()=>{n.unsubscribe()}));return i}
/**
	 * Bitrix Vue3 plugin
	 *
	 * @package bitrix
	 * @subpackage ui
	 * @copyright 2001-2021 Bitrix
	 */var l=babelHelpers.classPrivateFieldLooseKey("getComponentParamsWithMutation");var c=babelHelpers.classPrivateFieldLooseKey("getFinalComponentParams");var p=babelHelpers.classPrivateFieldLooseKey("cloneObjectBeforeApplyMutation");var u=babelHelpers.classPrivateFieldLooseKey("applyMutation");class f{constructor(){Object.defineProperty(this,u,{value:b});Object.defineProperty(this,p,{value:m});Object.defineProperty(this,c,{value:h});Object.defineProperty(this,l,{value:d});this.components={};this.proxyComponents={};this.finalComponents={};this.cloneCounter=0;this.cloneComponents={};this.mutations={};this.developerMode=false;this.events={restClientChange:"RestClient::change",pullClientChange:"PullClient::change"};const e=i.Extension.getSettings("ui.vue3");this.localizationMode=e.get("localizationDebug",false)?"development":"production"}createApp(e,t){return{config:{},directive:()=>{},mixin:()=>{},provide:()=>{},mount:()=>{},unmount:()=>{},use:()=>{}}}mutableComponent(e,t){this.components[e]=Object.assign({},t);this.components[e].bitrixVue={name:e};this.finalComponents[e]=babelHelpers.classPrivateFieldLooseBase(this,c)[c](e);this.proxyComponents[e]=new Proxy(this.finalComponents[e],{get:function(e,t){if(!i.Type.isUndefined(this.finalComponents[e.bitrixVue.name])&&!i.Type.isUndefined(this.finalComponents[e.bitrixVue.name][t])){return this.finalComponents[e.bitrixVue.name][t]}return Reflect.get(...arguments)}.bind(this)});return this.proxyComponents[e]}getMutableComponent(e,t=false){if(!this.isComponent(e)){if(!t){this.showNotice('Component "'+e+'" is not registered yet.')}return null}const i=babelHelpers.classPrivateFieldLooseBase(this,c)[c](e);for(const t in i){if(!i.hasOwnProperty(t)){continue}this.proxyComponents[e][t]=i[t]}return this.finalComponents[e]}defineAsyncComponent(e,t,n){let s=()=>new Promise(((n,s)=>{i.Runtime.loadExtension(e).then((s=>{if(!i.Type.isUndefined(s[t])){n(s[t])}else{n({template:`\n\t\t\t\t\t\t\t<div style="display: inline-block; border: 1px dashed red; padding: 5px; margin: 5px;">\n\t\t\t\t\t\t\t\tExtension <strong>${e}</strong> or export variable <strong>${t}</strong> is not found!\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t`})}}))}));if(!i.Type.isObjectLike(n)){return o.defineAsyncComponent(s)}if(!i.Type.isObjectLike(n.loadingComponent)){return o.defineAsyncComponent((()=>new Promise(((t,i)=>{t({template:`\n\t\t\t\t\t\t<div style="display: inline-block; border: 1px dashed red; padding: 5px; margin: 5px;">\n\t\t\t\t\t\t\tExtension <strong>${e}</strong> was not loaded due to a configuration error. Property <strong>loadingComponent</strong> is not defined.\n\t\t\t\t\t\t</div>\n\t\t\t\t\t`})}))))}if(i.Type.isInteger(n.delayLoadExtension)){const e=n.delayLoadExtension;const t=s;delete n.delayLoadExtension;s=()=>new Promise(((i,n)=>{setTimeout((()=>{t().then((e=>i(e)))}),e)}))}return o.defineAsyncComponent({loader:s,...n})}mutateComponent(e,t){if(i.Type.isString(e)){if(i.Type.isUndefined(this.mutations[e])){this.mutations[e]=[]}this.mutations[e].push(t);this.getMutableComponent(e,true);return true}if(i.Type.isPlainObject(e)&&!i.Type.isUndefined(e.bitrixVue)){return this.mutateComponent(e.bitrixVue.name,t)}this.showError(`You can not mutate classic Vue components. If you need to mutate, use BitrixVue.cloneComponent instead.`,e,t);return false}cloneComponent(e,t){if(i.Type.isString(e)){const n=babelHelpers.classPrivateFieldLooseBase(this,l)[l](e,[t]);if(n){return n}this.cloneCounter+=1;const s={bitrixVue:{source:e,cloneCounter:this.cloneCounter,mutations:t}};return new Proxy(s,{get:function(e,t,n){let s;if(i.Type.isUndefined(this.cloneComponents[e.bitrixVue.cloneCounter])){s=babelHelpers.classPrivateFieldLooseBase(this,l)[l](e.bitrixVue.source,[e.bitrixVue.mutations]);if(s){this.cloneComponents[e.bitrixVue.cloneCounter]=s}}else{s=this.cloneComponents[e.bitrixVue.cloneCounter]}if(!s){if(t==="template"){this.showError(`Clone component #${e.bitrixVue.cloneCounter} is failed. Component ${e.bitrixVue.source} is not register yet.`,e.bitrixVue);if(this.developerMode){return`\n\t\t\t\t\t\t\t\t\t<div style="display: inline-block; border: 1px dashed red; padding: 5px; margin: 5px;">\n\t\t\t\t\t\t\t\t\t\tThe cloned component <strong>#${e.bitrixVue.cloneCounter}</strong> is not shown because the original component <strong>${e.bitrixVue.source}</strong> was not registered.\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t`}return`\x3c!-- Placeholder for clone component #${e.bitrixVue.cloneCounter}. Component ${e.bitrixVue.source} was not registered. --\x3e`}return Reflect.get(...arguments)}if(!i.Type.isUndefined(s[t])){return s[t]}return Reflect.get(...arguments)}.bind(this)})}if(i.Type.isPlainObject(e)&&!i.Type.isUndefined(e.bitrixVue)){return babelHelpers.classPrivateFieldLooseBase(this,l)[l](e.bitrixVue.name,[t])}if(i.Type.isPlainObject(e)){return babelHelpers.classPrivateFieldLooseBase(this,u)[u](babelHelpers.classPrivateFieldLooseBase(this,p)[p](e,t),t)}return null}isComponent(e){return!i.Type.isUndefined(this.components[e])}isMutable(){this.showNotice("Method BitrixVue.isMutable is deprecated, remove usages.");return true}isLocal(){this.showNotice("Method BitrixVue.isLocal is deprecated, remove usages.");return false}component(e){this.showError('Method BitrixVue.component is deprecated, use Vue.component or BitrixVue.mutableComponent. Component "'+e+'" was not registered.')}localComponent(e,t){this.showNotice('Method BitrixVue.localComponent is deprecated, use Vue.mutableComponent instead. Component "'+e+'" has been registered, but this behavior will be removed in the future.');return this.mutableComponent(e,t)}directive(e){this.showError('Method BitrixVue.directive is deprecated, use Vue.directive (from ui.vue3 extension import). Directive "'+e+'" was not registered.')}testNode(e,t){if(!t||!i.Type.isPlainObject(t)){return true}for(const n in t){if(!t.hasOwnProperty(n)){continue}switch(n){case"tag":case"tagName":if(i.Type.isString(t[n])){if(e.tagName.toUpperCase()!==t[n].toUpperCase()){return false}}else if(t[n]instanceof RegExp){if(!t[n].test(e.tagName)){return false}}break;case"class":case"className":if(i.Type.isString(t[n])){if(!i.Dom.hasClass(e,t[n].trim())){return false}}else if(t[n]instanceof RegExp){if(!i.Type.isString(e.className)||!t[n].test(e.className)){return false}}break;case"attr":case"attrs":case"attribute":if(i.Type.isString(t[n])){if(!e.getAttribute(t[n])){return false}}else if(t[n]&&Object.prototype.toString.call(t[n])==="[object Array]"){for(let i=0,s=t[n].length;i<s;i++){if(t[n][i]&&!e.getAttribute(t[n][i])){return false}}}else{for(const s in t[n]){if(!t[n].hasOwnProperty(s)){continue}const o=e.getAttribute(s);if(!i.Type.isString(o)){return false}if(t[n][s]instanceof RegExp){if(!t[n][s].test(o)){return false}}else if(o!==""+t[n][s]){return false}}}break;case"property":case"props":if(i.Type.isString(t[n])){if(!e[t[n]]){return false}}else if(t[n]&&Object.prototype.toString.call(t[n])==="[object Array]"){for(let i=0,s=t[n].length;i<s;i++){if(t[n][i]&&!e[t[n][i]]){return false}}}else{for(const s in t[n]){if(!t[n].hasOwnProperty(s)){continue}if(i.Type.isString(t[n][s])){if(e[s]!==t[n][s]){return false}}else if(t[n][s]instanceof RegExp){if(!i.Type.isString(e[s])||!t[n][s].test(e[s])){return false}}}}break}}return true}getFilteredPhrases(e,t,i=null){const n={};if(!i){i=e.$bitrix.Loc.getMessages()}if(Array.isArray(t)){for(const e in i){if(!i.hasOwnProperty(e)){continue}if(!t.find((t=>e.toString().startsWith(t)))){continue}if(this.localizationMode==="development"){n[e]=e}else{n[e]=i[e]}}}else{for(const e in i){if(!i.hasOwnProperty(e)){continue}if(!e.startsWith(t)){continue}if(this.localizationMode==="development"){n[e]=e}else{n[e]=i[e]}}}return Object.freeze(n)}showNotice(e,...t){if(this.developerMode){console.warn("BitrixVue: "+e,...t)}}showError(e,...t){console.error("BitrixVue: "+e,...t)}install(e){const o=this;const r={};r.Loc={messages:{},getMessage:function(e,t=null){if(o.localizationMode==="development"){let n=[e];if(i.Type.isPlainObject(t)){const i=Object.keys(t);if(i.length>0){n=[e," (replacements: ",i.join(", "),")"]}}return n.join("")}let n="";if(!i.Type.isUndefined(this.messages[e])){n=this.messages[e]}else{n=i.Loc.getMessage(e);this.messages[e]=n}if(i.Type.isString(n)&&i.Type.isPlainObject(t)){Object.keys(t).forEach((e=>{const s=new RegExp(e,"gi");n=n.replace(s,(()=>i.Type.isNil(t[e])?"":String(t[e])))}))}return n},hasMessage:function(e){return i.Type.isString(e)&&!i.Type.isNil(this.getMessages()[e])},getMessages:function(){if(!i.Type.isUndefined(BX.message)){return{...BX.message,...this.messages}}return{...this.messages}},setMessage:function(e,t){if(i.Type.isString(e)){this.messages[e]=t}if(i.Type.isObject(e)){for(const t in e){if(e.hasOwnProperty(t)){this.messages[t]=e[t]}}}}};r.Application={instance:null,get:function(){return this.instance},set:function(e){this.instance=e}};r.Data={data:{},get:function(e,t){var i;return(i=this.data[e])!=null?i:t},set:function(e,t){this.data[e]=t}};r.eventEmitter=new t.EventEmitter;if(!i.Type.isFunction(r.eventEmitter.setEventNamespace)){window.BX.Event.EventEmitter.prototype.setEventNamespace=function(){};r.eventEmitter.setEventNamespace=function(){}}r.eventEmitter.setEventNamespace("vue:app:"+e._uid);r.RestClient={instance:null,get:function(){var e;return(e=this.instance)!=null?e:n.rest},set:function(e){this.instance=e;r.eventEmitter.emit(o.events.restClientChange)},isCustom(){return!i.Type.isNull(this.instance)}};r.PullClient={instance:null,get:function(){var e;return(e=this.instance)!=null?e:s.PULL},set:function(e){this.instance=e;r.eventEmitter.emit(o.events.pullClientChange)},isCustom(){return!i.Type.isNull(this.instance)}};e.config.globalProperties.$bitrix=r;const a=this;e.mixin({computed:{$Bitrix:function(){return this.$bitrix}},mounted:function(){if(!i.Type.isNil(this.$root.$bitrixApplication)){a.showNotice("Store reference in global variables (like: this.$bitrixApplication) is deprecated, use this.$Bitrix.Data.set(...) instead.")}if(!i.Type.isNil(this.$root.$bitrixController)){a.showNotice("Store reference in global variables (like: this.$bitrixController) is deprecated, use this.$Bitrix.Data.set(...) instead.")}if(!i.Type.isNil(this.$root.$bitrixMessages)){a.showNotice("Store localization in global variable this.$bitrixMessages is deprecated, use this.$Bitrix.Log.setMessage(...) instead.")}if(!i.Type.isNil(this.$root.$bitrixRestClient)){a.showNotice("Working with a Rest-client through an old variable this.$bitrixRestClient is deprecated, use this.$Bitrix.RestClient.get() instead.")}if(!i.Type.isNil(this.$root.$bitrixPullClient)){a.showNotice("Working with a Pull-client through an old variable this.$bitrixPullClient is deprecated, use this.$Bitrix.PullClient.get() instead.")}}})}}function d(e,t){if(i.Type.isUndefined(this.components[e])){return null}let n=Object.assign({},this.components[e]);if(i.Type.isUndefined(t)){return n}t.forEach((e=>{n=babelHelpers.classPrivateFieldLooseBase(this,u)[u](babelHelpers.classPrivateFieldLooseBase(this,p)[p](n,e),e)}));return n}function h(e){return babelHelpers.classPrivateFieldLooseBase(this,l)[l](e,this.mutations[e])}function m(e={},t={},n=1,s=""){const o={};for(const r in e){if(!e.hasOwnProperty(r)){continue}if(i.Type.isString(e[r])){o[r]=e[r]}else if(i.Type.isArray(e[r])){o[r]=[].concat(e[r])}else if(i.Type.isObjectLike(e[r])){if(s==="watch"||s==="props"||s==="directives"){o[r]=e[r]}else if(i.Type.isNull(e[r])){o[r]=null}else if(i.Type.isObjectLike(t[r])){o[r]=babelHelpers.classPrivateFieldLooseBase(this,p)[p](e[r],t[r],n+1,r)}else{o[r]=Object.assign({},e[r])}}else if(i.Type.isFunction(e[r])){if(!i.Type.isFunction(t[r])){o[r]=e[r]}else if(n>1){if(s==="watch"){o[r]=e[r]}else{o["parent"+r[0].toUpperCase()+r.substr(1)]=e[r]}}else{if(i.Type.isUndefined(o["methods"])){o["methods"]={}}o["methods"]["parent"+r[0].toUpperCase()+r.substr(1)]=e[r];if(i.Type.isUndefined(e["methods"])){e["methods"]={}}e["methods"]["parent"+r[0].toUpperCase()+r.substr(1)]=e[r]}}else if(!i.Type.isUndefined(e[r])){o[r]=e[r]}}return o}function b(e={},t={},n=1){const s=Object.assign({},e);for(const e in t){if(!t.hasOwnProperty(e)){continue}if(n===1&&(e==="compilerOptions"||e==="setup")){s[e]=t[e]}else if(n===1&&e==="extends"){s[e]=t[e]}else if(i.Type.isString(t[e])){if(i.Type.isString(s[e])){s[e]=t[e].replace(`#PARENT_${e.toUpperCase()}#`,s[e])}else{s[e]=t[e].replace(`#PARENT_${e.toUpperCase()}#`,"")}}else if(i.Type.isArray(t[e])){if(n===1&&e==="replaceMixins"){s["mixins"]=[].concat(t[e])}else if(n===1&&e==="replaceInject"){s["inject"]=[].concat(t[e])}else if(n===1&&e==="replaceEmits"){s["emits"]=[].concat(t[e])}else if(n===1&&e==="replaceExpose"){s["expose"]=[].concat(t[e])}else if(i.Type.isPlainObject(s[e])){t[e].forEach((t=>s[e][t]=null))}else{s[e]=s[e].concat(t[e])}}else if(i.Type.isObjectLike(t[e])){if(n===1&&e==="props"&&i.Type.isArray(s[e])||n===1&&e==="emits"&&i.Type.isArray(s[e])){const t={};s[e].forEach((e=>{t[e]=null}));s[e]=t}if(n===1&&e==="watch"){for(const t in s[e]){if(!s[e].hasOwnProperty(t)){continue}if(t.includes(".")){continue}if(i.Type.isFunction(s[e][t])||i.Type.isObject(s[e][t])&&i.Type.isFunction(s[e][t]["handler"])){if(i.Type.isUndefined(s["methods"])){s["methods"]={}}const n="parentWatch"+t[0].toUpperCase()+t.substr(1);if(i.Type.isFunction(s[e][t])){s["methods"][n]=s[e][t]}else{s["methods"][n]=s[e][t]["handler"]}}}}if(n===1&&e==="replaceEmits"){s["emits"]=Object.assign({},t[e])}else if(n===1&&(e==="components"||e==="directives")){if(i.Type.isUndefined(s[e])){s[e]={}}for(const n in t[e]){if(!t[e].hasOwnProperty(n)){continue}let o=n[0].toUpperCase()+n.substr(1);o=e==="components"?"Parent"+o:"parent"+o;s[e][o]=Object.assign({},s[e][n]);if(e==="components"){if(i.Type.isUndefined(t[e][n].components)){t[e][n].components={}}t[e][n].components=Object.assign({[o]:s[e][n]},t[e][n].components)}s[e][n]=t[e][n]}}else if(i.Type.isArray(s[e])){for(const i in t[e]){if(!t[e].hasOwnProperty(i)){continue}s[e].push(i)}}else if(i.Type.isObjectLike(s[e])){s[e]=babelHelpers.classPrivateFieldLooseBase(this,u)[u](s[e],t[e],n+1)}else{s[e]=t[e]}}else{s[e]=t[e]}}return s}f=new f;e.useObservable=a;e.BitrixVue=f})(this.BX.Vue3=this.BX.Vue3||{},BX.Event,BX,BX,BX,BX.Vue3)})();
//# sourceMappingURL=bitrixvue.bundle.map.js