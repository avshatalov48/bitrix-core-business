{"version":3,"file":"registry.bundle.js","sources":["../src/application.js","../src/callapplication.js","../src/messages.js","../src/dialogues.js","../src/users.js","../src/files.js","../src/recent.js"],"sourcesContent":["/**\n * Bitrix Messenger\n * Application model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {DeviceType, DeviceOrientation} from 'im.const';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class ApplicationModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'application';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcommon:\n\t\t\t{\n\t\t\t\thost: this.getVariable('common.host', location.protocol+'//'+location.host),\n\t\t\t\tsiteId: this.getVariable('common.siteId', 'default'),\n\t\t\t\tuserId: this.getVariable('common.userId', 0),\n\t\t\t\tlanguageId: this.getVariable('common.languageId', 'en'),\n\t\t\t},\n\t\t\tdialog:\n\t\t\t{\n\t\t\t\tdialogId: this.getVariable('dialog.dialogId', '0'),\n\t\t\t\tchatId: this.getVariable('dialog.chatId', 0),\n\t\t\t\tdiskFolderId: this.getVariable('dialog.diskFolderId', 0),\n\t\t\t\tmessageLimit: this.getVariable('dialog.messageLimit', 20),\n\t\t\t\tenableReadMessages: this.getVariable('dialog.enableReadMessages', true),\n\t\t\t\tmessageExtraCount: 0,\n\t\t\t},\n\t\t\tdisk:\n\t\t\t{\n\t\t\t\tenabled: false,\n\t\t\t\tmaxFileSize: 5242880,\n\t\t\t},\n\t\t\tmobile:\n\t\t\t{\n\t\t\t\tkeyboardShow: false,\n\t\t\t},\n\t\t\tdevice:\n\t\t\t{\n\t\t\t\ttype: this.getVariable('device.type', DeviceType.desktop),\n\t\t\t\torientation: this.getVariable('device.orientation', DeviceOrientation.portrait),\n\t\t\t},\n\t\t\toptions:\n\t\t\t{\n\t\t\t\tquoteEnable: this.getVariable('options.quoteEnable', true),\n\t\t\t\tquoteFromRight: this.getVariable('options.quoteFromRight', true),\n\t\t\t\tautoplayVideo: this.getVariable('options.autoplayVideo', true),\n\t\t\t\tdarkBackground: this.getVariable('options.darkBackground', false),\n\t\t\t\tshowSmiles: false\n\t\t\t},\n\t\t\terror:\n\t\t\t{\n\t\t\t\tactive: false,\n\t\t\t\tcode: '',\n\t\t\t\tdescription: '',\n\t\t\t},\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn Object.assign({\n\t\t\tcommon: this.getVariable('saveException.common', null),\n\t\t\tdialog: this.getVariable('saveException.dialog', null),\n\t\t\tmobile: this.getVariable('saveException.mobile', null),\n\t\t\tdevice: this.getVariable('saveException.device', null),\n\t\t\terror: this.getVariable('saveException.error', null)\n\t\t});\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('set', this.validate(payload));\n\t\t\t},\n\t\t\tshowSmiles: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('showSmiles')\n\t\t\t},\n\t\t\thideSmiles: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('hideSmiles');\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tlet hasChange = false;\n\t\t\t\tfor (let group in payload)\n\t\t\t\t{\n\t\t\t\t\tif (!payload.hasOwnProperty(group))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (let field in payload[group])\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!payload[group].hasOwnProperty(field))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tstate[group][field] = payload[group][field];\n\t\t\t\t\t\thasChange = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (hasChange && this.isSaveNeeded(payload))\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tincreaseDialogExtraCount(state, payload = {})\n\t\t\t{\n\t\t\t\tlet {count = 1} = payload;\n\n\t\t\t\tstate.dialog.messageExtraCount += count;\n\t\t\t},\n\t\t\tdecreaseDialogExtraCount(state, payload = {})\n\t\t\t{\n\t\t\t\tlet {count = 1} = payload;\n\n\t\t\t\tlet newCounter = state.dialog.messageExtraCount - count;\n\t\t\t\tif (newCounter <= 0)\n\t\t\t\t{\n\t\t\t\t\tnewCounter = 0;\n\t\t\t\t}\n\n\t\t\t\tstate.dialog.messageExtraCount = newCounter;\n\t\t\t},\n\t\t\tclearDialogExtraCount(state)\n\t\t\t{\n\t\t\t\tstate.dialog.messageExtraCount = 0;\n\t\t\t},\n\t\t\tshowSmiles(state)\n\t\t\t{\n\t\t\t\tstate.options.showSmiles = true;\n\t\t\t},\n\t\t\thideSmiles(state)\n\t\t\t{\n\t\t\t\tstate.options.showSmiles = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tvalidate(fields)\n\t{\n\t\tconst result = {};\n\n\t\tif (typeof fields.common === 'object' && fields.common)\n\t\t{\n\t\t\tresult.common = {};\n\n\t\t\tif (typeof fields.common.userId === 'number')\n\t\t\t{\n\t\t\t\tresult.common.userId = fields.common.userId;\n\t\t\t}\n\n\t\t\tif (typeof fields.common.languageId === 'string')\n\t\t\t{\n\t\t\t\tresult.common.languageId = fields.common.languageId;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.dialog === 'object' && fields.dialog)\n\t\t{\n\t\t\tresult.dialog = {};\n\n\t\t\tif (typeof fields.dialog.dialogId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.dialogId = fields.dialog.dialogId.toString();\n\t\t\t\tresult.dialog.chatId = 0;\n\t\t\t}\n\t\t\telse if (typeof fields.dialog.dialogId === 'string')\n\t\t\t{\n\t\t\t\tresult.dialog.dialogId = fields.dialog.dialogId;\n\n\t\t\t\tif (typeof fields.dialog.chatId !== 'number')\n\t\t\t\t{\n\t\t\t\t\tlet chatId = fields.dialog.dialogId;\n\t\t\t\t\tif (chatId.startsWith('chat'))\n\t\t\t\t\t{\n\t\t\t\t\t\tchatId = fields.dialog.dialogId.substr(4);\n\t\t\t\t\t}\n\n\t\t\t\t\tchatId = parseInt(chatId);\n\n\t\t\t\t\tresult.dialog.chatId = !isNaN(chatId)? chatId: 0;\n\t\t\t\t\tfields.dialog.chatId = result.dialog.chatId;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.chatId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.chatId = fields.dialog.chatId;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.diskFolderId === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.diskFolderId = fields.dialog.diskFolderId;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.messageLimit === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.messageLimit = fields.dialog.messageLimit;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.messageExtraCount === 'number')\n\t\t\t{\n\t\t\t\tresult.dialog.messageExtraCount = fields.dialog.messageExtraCount;\n\t\t\t}\n\n\t\t\tif (typeof fields.dialog.enableReadMessages === 'boolean')\n\t\t\t{\n\t\t\t\tresult.dialog.enableReadMessages = fields.dialog.enableReadMessages;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.disk === 'object' && fields.disk)\n\t\t{\n\t\t\tresult.disk = {};\n\n\t\t\tif (typeof fields.disk.enabled === 'boolean')\n\t\t\t{\n\t\t\t\tresult.disk.enabled = fields.disk.enabled;\n\t\t\t}\n\n\t\t\tif (typeof fields.disk.maxFileSize === 'number')\n\t\t\t{\n\t\t\t\tresult.disk.maxFileSize = fields.disk.maxFileSize;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.mobile === 'object' && fields.mobile)\n\t\t{\n\t\t\tresult.mobile = {};\n\n\t\t\tif (typeof fields.mobile.keyboardShow === 'boolean')\n\t\t\t{\n\t\t\t\tresult.mobile.keyboardShow = fields.mobile.keyboardShow;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.device === 'object' && fields.device)\n\t\t{\n\t\t\tresult.device = {};\n\n\t\t\tif (typeof fields.device.type === 'string' && typeof DeviceType[fields.device.type] !== 'undefined')\n\t\t\t{\n\t\t\t\tresult.device.type = fields.device.type;\n\t\t\t}\n\n\t\t\tif (typeof fields.device.orientation === 'string' && typeof DeviceOrientation[fields.device.orientation] !== 'undefined')\n\t\t\t{\n\t\t\t\tresult.device.orientation = fields.device.orientation;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.error === 'object' && fields.error)\n\t\t{\n\t\t\tif (typeof fields.error.active === 'boolean')\n\t\t\t{\n\t\t\t\tresult.error = {\n\t\t\t\t\tactive: fields.error.active,\n\t\t\t\t\tcode: fields.error.code.toString() || '',\n\t\t\t\t\tdescription: fields.error.description.toString() || '',\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}","/**\n * Bitrix Messenger\n * Call Application model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {CallStateType} from 'im.const';\n\nexport class CallApplicationModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'callApplication';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcommon:\n\t\t\t{\n\t\t\t\tinited: false,\n\t\t\t\tshowChat: false,\n\t\t\t\tuserCount: 0,\n\t\t\t\tuserInCallCount: 0,\n\t\t\t\tstate: CallStateType.preparation,\n\t\t\t\tcomponentError: '',\n\t\t\t\tcallError: '',\n\t\t\t\tshowSmiles: false\n\t\t\t},\n\t\t\tuser:\n\t\t\t{\n\t\t\t\tid: -1,\n\t\t\t\thash: ''\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tcommon: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.inited === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.inited = payload.inited;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.showChat === 'boolean')\n\t\t\t\t{\n\t\t\t\t\tstate.common.showChat = payload.showChat;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.userCount === 'number' || typeof payload.userCount === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.userCount = parseInt(payload.userCount);\n\t\t\t\t}\n\t\t\t\tif (typeof payload.userInCallCount === 'number' || typeof payload.userInCallCount === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.userInCallCount = parseInt(payload.userInCallCount);\n\t\t\t\t}\n\t\t\t\tif (typeof payload.componentError === 'string')\n\t\t\t\t{\n\t\t\t\t\tstate.common.componentError = payload.componentError;\n\t\t\t\t}\n\t\t\t},\n\t\t\tuser: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof payload.id === 'number')\n\t\t\t\t{\n\t\t\t\t\tstate.user.id = payload.id;\n\t\t\t\t}\n\t\t\t\tif (typeof payload.hash === 'string' && payload.hash !== state.user.hash)\n\t\t\t\t{\n\t\t\t\t\tstate.user.hash = payload.hash;\n\t\t\t\t}\n\t\t\t\tif (this.isSaveNeeded({user: payload}))\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tstartCall: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.state = CallStateType.call;\n\t\t\t},\n\t\t\tendCall: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.state = CallStateType.preparation;\n\t\t\t},\n\t\t\treturnToPreparation: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.state = CallStateType.preparation;\n\t\t\t},\n\t\t\tsetCallError: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.callError = payload.errorCode;\n\t\t\t},\n\t\t\tsetComponentError: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.componentError = payload.errorCode;\n\t\t\t},\n\t\t\ttoggleSmiles: (state, payload) =>\n\t\t\t{\n\t\t\t\tstate.common.showSmiles = !state.common.showSmiles;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn {\n\t\t\tcommon: {\n\t\t\t\tinited: null,\n\t\t\t\tcallError: null,\n\t\t\t\tstate: null,\n\t\t\t\tshowSmiles: null,\n\t\t\t\tuserCount: null,\n\t\t\t\tuserInCallCount: null,\n\t\t\t\tcomponentError: null\n\t\t\t},\n\t\t}\n\t}\n}","/**\n * Bitrix Messenger\n * Messages model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {MutationType, StorageLimit} from 'im.const';\nimport {Utils} from \"im.lib.utils\";\n\nconst IntersectionType = {\n\tempty: 'empty',\n\tequal: 'equal',\n\tnone: 'none',\n\tfound: 'found',\n\tfoundReverse: 'foundReverse',\n};\n\nexport class MessagesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'messages';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcreated: 0,\n\t\t\tcollection: {},\n\t\t\tmutationType: {},\n\t\t\tsaveMessageList: {},\n\t\t\tsaveFileList: {},\n\t\t\tsaveUserList: {},\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t}\n\t}\n\n\tgetElementState()\n\t{\n\t\treturn {\n\t\t\ttemplateId: 0,\n\t\t\ttemplateType: 'message',\n\n\t\t\tid: 0,\n\t\t\tchatId: 0,\n\t\t\tauthorId: 0,\n\t\t\tdate: new Date(),\n\t\t\ttext: \"\",\n\t\t\ttextConverted: \"\",\n\t\t\tparams: {\n\t\t\t\tTYPE : 'default',\n\t\t\t\tCOMPONENT_ID : 'bx-im-view-message',\n\t\t\t},\n\n\t\t\tpush: false,\n\t\t\tunread: false,\n\t\t\tsending: false,\n\t\t\terror: false,\n\t\t\tretry: false,\n\t\t\tblink: false,\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\n\t\t\tgetMutationType: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.mutationType[chatId])\n\t\t\t\t{\n\t\t\t\t\treturn {initialType: MutationType.none, appliedType: MutationType.none};\n\t\t\t\t}\n\n\t\t\t\treturn state.mutationType[chatId];\n\t\t\t},\n\t\t\tgetLastId: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tlet lastId = 0;\n\n\t\t\t\tfor (let i = 0; i < state.collection[chatId].length; i++)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[chatId][i];\n\t\t\t\t\tif (\n\t\t\t\t\t\telement.push\n\t\t\t\t\t\t|| element.sending\n\t\t\t\t\t\t|| element.id.toString().startsWith('temporary')\n\t\t\t\t\t)\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (lastId < element.id)\n\t\t\t\t\t{\n\t\t\t\t\t\tlastId = element.id;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn lastId? lastId: null;\n\t\t\t},\n\t\t\tgetMessage: state => (chatId, messageId) =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tfor (let index = state.collection[chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tif (state.collection[chatId][index].id === messageId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.collection[chatId][index];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tget: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[chatId] || state.collection[chatId].length <= 0)\n\t\t\t\t{\n\t\t\t\t\treturn [];\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[chatId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState();\n\t\t\t},\n\t\t\tgetSaveFileList: state => params =>\n\t\t\t{\n\t\t\t\treturn state.saveFileList;\n\t\t\t},\n\t\t\tgetSaveUserList: state => params =>\n\t\t\t{\n\t\t\t\treturn state.saveUserList;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tadd: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload));\n\t\t\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\t\t\tresult.id = 'temporary' + (new Date).getTime() + store.state.created;\n\t\t\t\tresult.templateId = result.id;\n\t\t\t\tresult.unread = false;\n\n\t\t\t\tstore.commit('add', Object.assign({}, this.getElementState(), result));\n\n\t\t\t\tif (payload.sending !== false)\n\t\t\t\t{\n\t\t\t\t\tstore.dispatch('actionStart', {\n\t\t\t\t\t\tid: result.id,\n\t\t\t\t\t\tchatId: result.chatId,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn result.id;\n\t\t\t},\n\t\t\tactionStart: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: true}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tactionError: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: false, error: true, retry: payload.retry !== false}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tactionFinish: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tVue.nextTick(() => {\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\tfields : {sending: false, error: false, retry: false}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t},\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => this.prepareMessage(message, {host: store.state.host}));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.prepareMessage(payload, {host: store.state.host});\n\t\t\t\t\t(payload = []).push(result);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.set,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetAfter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => this.prepareMessage(message));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.prepareMessage(payload);\n\t\t\t\t\t(payload = []).push(result);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.setAfter,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetBefore: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(message => this.prepareMessage(message));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.prepareMessage(payload);\n\t\t\t\t\t(payload = []).push(result);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.setBefore,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(payload.id))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\t\t\t\tif (/^\\d+$/.test(payload.chatId))\n\t\t\t\t{\n\t\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('initCollection', {chatId: payload.chatId});\n\n\t\t\t\tlet index = store.state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\tif (index < 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet result = this.validate(Object.assign({}, payload.fields));\n\n\t\t\t\tif (result.params)\n\t\t\t\t{\n\t\t\t\t\tresult.params = Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.getElementState().params,\n\t\t\t\t\t\tstore.state.collection[payload.chatId][index].params,\n\t\t\t\t\t\tresult.params\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\tindex : index,\n\t\t\t\t\tfields : result\n\t\t\t\t});\n\n\t\t\t\tif (payload.fields.blink)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\t\tfields : {blink: false}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (!(payload.id instanceof Array))\n\t\t\t\t{\n\t\t\t\t\tpayload.id = [payload.id];\n\t\t\t\t}\n\n\t\t\t\tpayload.id = payload.id.map(id => {\n\t\t\t\t\tif (/^\\d+$/.test(id))\n\t\t\t\t\t{\n\t\t\t\t\t\tid = parseInt(id);\n\t\t\t\t\t}\n\t\t\t\t\treturn id;\n\t\t\t\t});\n\n\t\t\t\tstore.commit('delete', {\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\telements : payload.id,\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tclear: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tstore.commit('clear', {\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tapplyMutationType: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tstore.commit('applyMutationType', {\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\treadMessages: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.readId = parseInt(payload.readId) || 0;\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tif (typeof store.state.collection[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\treturn {count: 0}\n\t\t\t\t}\n\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let index = store.state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = store.state.collection[payload.chatId][index];\n\t\t\t\t\tif (!element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (payload.readId === 0 || element.id <= payload.readId)\n\t\t\t\t\t{\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstore.commit('readMessages', {\n\t\t\t\t\tchatId: payload.chatId,\n\t\t\t\t\treadId: payload.readId,\n\t\t\t\t});\n\n\t\t\t\treturn {count};\n\t\t\t},\n\t\t\tunreadMessages: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.unreadId = parseInt(payload.unreadId) || 0;\n\t\t\t\tpayload.chatId = parseInt(payload.chatId);\n\n\t\t\t\tif (typeof store.state.collection[payload.chatId] === 'undefined' || !payload.unreadId)\n\t\t\t\t{\n\t\t\t\t\treturn {count: 0}\n\t\t\t\t}\n\n\t\t\t\tlet count = 0;\n\t\t\t\tfor (let index = store.state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = store.state.collection[payload.chatId][index];\n\t\t\t\t\tif (element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (element.id >= payload.unreadId)\n\t\t\t\t\t{\n\t\t\t\t\t\tcount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstore.commit('unreadMessages', {\n\t\t\t\t\tchatId: payload.chatId,\n\t\t\t\t\tunreadId: payload.unreadId,\n\t\t\t\t});\n\n\t\t\t\treturn {count};\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\treturn this.initCollection(state, payload);\n\t\t\t},\n\t\t\tadd: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\t\t\t\tthis.setMutationType(state, {chatId: payload.chatId, initialType: MutationType.add});\n\n\t\t\t\tstate.collection[payload.chatId].push(payload);\n\t\t\t\tstate.saveMessageList[payload.chatId].push(payload.id);\n\n\t\t\t\tstate.created += 1;\n\n\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tlet chats = [];\n\t\t\t\tlet chatsSave = [];\n\t\t\t\tlet mutationType = {};\n\n\t\t\t\tmutationType.initialType = payload.insertType;\n\n\t\t\t\tif (payload.insertType === MutationType.set)\n\t\t\t\t{\n\t\t\t\t\tpayload.insertType = MutationType.setAfter;\n\n\t\t\t\t\tlet elements = {};\n\t\t\t\t\tpayload.data.forEach(element => {\n\t\t\t\t\t\tif (!elements[element.chatId])\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\telements[element.chatId] = [];\n\t\t\t\t\t\t}\n\t\t\t\t\t\telements[element.chatId].push(element.id);\n\t\t\t\t\t});\n\n\t\t\t\t\tfor (let chatId in elements)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (!elements.hasOwnProperty(chatId))\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tthis.initCollection(state, {chatId});\n\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\tstate.saveMessageList[chatId].length > elements[chatId].length\n\t\t\t\t\t\t\t|| elements[chatId].length < StorageLimit.messages\n\t\t\t\t\t\t)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[chatId] = state.collection[chatId].filter(element => elements[chatId].includes(element.id));\n\t\t\t\t\t\t\tstate.saveMessageList[chatId] = state.saveMessageList[chatId].filter(id => elements[chatId].includes(id));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tlet intersection = this.manageCacheBeforeSet(\n\t\t\t\t\t\t\t[...state.saveMessageList[chatId].reverse()],\n\t\t\t\t\t\t\telements[chatId]\n\t\t\t\t\t\t);\n\t\t\t\t\t\tif (intersection.type === IntersectionType.none)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (intersection.foundElements.length > 0)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tstate.collection[chatId] = state.collection[chatId].filter(element => !intersection.foundElements.includes(element.id));\n\t\t\t\t\t\t\t\tstate.saveMessageList[chatId] = state.saveMessageList[chatId].filter(id => !intersection.foundElements.includes(id));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.removeIntersectionCacheElements = state.collection[chatId].map(element => element.id);\n\n\t\t\t\t\t\t\tclearTimeout(this.removeIntersectionCacheTimeout);\n\t\t\t\t\t\t\tthis.removeIntersectionCacheTimeout = setTimeout(() => {\n\t\t\t\t\t\t\t\tstate.collection[chatId] = state.collection[chatId].filter(element => !this.removeIntersectionCacheElements.includes(element.id));\n\t\t\t\t\t\t\t\tstate.saveMessageList[chatId] = state.saveMessageList[chatId].filter(id => !this.removeIntersectionCacheElements.includes(id));\n\t\t\t\t\t\t\t\tthis.removeIntersectionCacheElements = [];\n\t\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (intersection.type === IntersectionType.foundReverse)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tpayload.insertType = MutationType.setBefore;\n\t\t\t\t\t\t\t\tpayload.data = payload.data.reverse();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (intersection.foundElements.length > 0)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (intersection.type === IntersectionType.found && intersection.noneElements[0])\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmutationType.scrollStickToTop = false;\n\t\t\t\t\t\t\t\tmutationType.scrollMessageId = intersection.foundElements[intersection.foundElements.length-1];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmutationType.scrollStickToTop = false;\n\t\t\t\t\t\t\t\tmutationType.scrollMessageId = 0;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (intersection.type === IntersectionType.none)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tmutationType.scrollStickToTop = false;\n\t\t\t\t\t\t\tmutationType.scrollMessageId = payload.data[0].id;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tmutationType.appliedType = payload.insertType;\n\n\t\t\t\tfor (let element of payload.data)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {chatId: element.chatId});\n\n\t\t\t\t\tlet index = state.collection[element.chatId].findIndex(el => el.id === element.id);\n\t\t\t\t\tif (index > -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete element.templateId;\n\n\t\t\t\t\t\tstate.collection[element.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[element.chatId][index],\n\t\t\t\t\t\t\telement\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.insertType === MutationType.setBefore)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].unshift(element);\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.insertType === MutationType.setAfter)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].push(element);\n\t\t\t\t\t}\n\n\t\t\t\t\tchats.push(element.chatId);\n\n\t\t\t\t\tif (this.store.getters['dialogues/canSaveChat'] && this.store.getters['dialogues/canSaveChat'](element.chatId))\n\t\t\t\t\t{\n\t\t\t\t\t\tchatsSave.push(element.chatId);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tchats = [...new Set(chats)];\n\t\t\t\tchatsSave = [...new Set(chatsSave)];\n\n\t\t\t\t// check array for correct order of messages\n\t\t\t\tif (mutationType.initialType === MutationType.set)\n\t\t\t\t{\n\t\t\t\t\tchats.forEach(chatId =>\n\t\t\t\t\t{\n\t\t\t\t\t\tlet lastElementId = 0;\n\t\t\t\t\t\tlet needApplySort = false;\n\t\t\t\t\t\tfor (let i = 0; i < state.collection[chatId].length; i++)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlet element = state.collection[chatId][i];\n\t\t\t\t\t\t\tif (element.id < lastElementId)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tneedApplySort = true;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tlastElementId = element.id;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (needApplySort)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[chatId].sort((a, b) => a.id - b.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tchats.forEach(chatId => {\n\t\t\t\t\tthis.setMutationType(state, {chatId: chatId, ...mutationType});\n\t\t\t\t});\n\n\t\t\t\tif (mutationType.initialType !== MutationType.setBefore)\n\t\t\t\t{\n\t\t\t\t\tchatsSave.forEach(chatId => {\n\t\t\t\t\t\tthis.saveState(state, chatId);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\n\t\t\t\tlet index = -1;\n\t\t\t\tif (typeof payload.index !== 'undefined' && state.collection[payload.chatId][payload.index])\n\t\t\t\t{\n\t\t\t\t\tindex = payload.index;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tindex = state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\t}\n\n\t\t\t\tif (index >= 0)\n\t\t\t\t{\n\t\t\t\t\tlet isSaveState = (\n\t\t\t\t\t\tstate.saveMessageList[payload.chatId].includes(state.collection[payload.chatId][index].id)\n\t\t\t\t\t\t|| payload.fields.id && !payload.fields.id.toString().startsWith('temporary') && state.collection[payload.chatId][index].id.toString().startsWith('temporary')\n\t\t\t\t\t);\n\n\t\t\t\t\tdelete payload.fields.templateId;\n\n\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\tpayload.fields\n\t\t\t\t\t);\n\n\t\t\t\t\tif (isSaveState)\n\t\t\t\t\t{\n\t\t\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\t\t\t\tthis.setMutationType(state, {chatId: payload.chatId, initialType: MutationType.delete});\n\n\t\t\t\tstate.collection[payload.chatId] = state.collection[payload.chatId].filter(element => !payload.elements.includes(element.id));\n\n\t\t\t\tif (state.saveMessageList[payload.chatId].length > 0)\n\t\t\t\t{\n\t\t\t\t\tfor (let id of payload.elements)\n\t\t\t\t\t{\n\t\t\t\t\t\tif (state.saveMessageList[payload.chatId].includes(id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.saveState(state, payload.chatId);\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tclear: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\t\t\t\tthis.setMutationType(state, {chatId: payload.chatId, initialType: 'clear'});\n\n\t\t\t\tstate.collection[payload.chatId] = [];\n\t\t\t\tstate.saveMessageList[payload.chatId] = [];\n\t\t\t},\n\t\t\tapplyMutationType: (state, payload) =>\n\t\t\t{\n\t\t\t\tif (typeof state.mutationType[payload.chatId] === 'undefined')\n\t\t\t\t{\n\t\t\t\t\tVue.set(state.mutationType, payload.chatId, {applied: false, initialType: MutationType.none, appliedType: MutationType.none, scrollStickToTop: 0, scrollMessageId: 0});\n\t\t\t\t}\n\n\t\t\t\tstate.mutationType[payload.chatId].applied = true;\n\t\t\t},\n\t\t\treadMessages: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\n\t\t\t\tlet saveNeeded = false;\n\t\t\t\tfor (let index = state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[payload.chatId][index];\n\t\t\t\t\tif (!element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (payload.readId === 0 || element.id <= payload.readId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\t\t{unread: false}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsaveNeeded = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (saveNeeded)\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t\t}\n\t\t\t},\n\t\t\tunreadMessages: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, {chatId: payload.chatId});\n\n\t\t\t\tlet saveNeeded = false;\n\t\t\t\tfor (let index = state.collection[payload.chatId].length-1; index >= 0; index--)\n\t\t\t\t{\n\t\t\t\t\tlet element = state.collection[payload.chatId][index];\n\t\t\t\t\tif (element.unread)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tif (element.id >= payload.unreadId)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[payload.chatId][index] = Object.assign(\n\t\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\t\t{unread: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t\tsaveNeeded = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (saveNeeded)\n\t\t\t\t{\n\t\t\t\t\tthis.saveState(state, payload.chatId);\n\t\t\t\t\tthis.updateSubordinateStates();\n\t\t\t\t}\n\t\t\t},\n\t\t}\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof payload.chatId === 'undefined')\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\ttypeof payload.chatId === 'undefined'\n\t\t\t|| typeof state.collection[payload.chatId] !== 'undefined'\n\t\t)\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tVue.set(state.collection, payload.chatId, payload.messages? [].concat(payload.messages): []);\n\t\tVue.set(state.mutationType, payload.chatId, {applied: false, initialType: MutationType.none, appliedType: MutationType.none, scrollStickToTop: 0, scrollMessageId: 0});\n\t\tVue.set(state.saveMessageList, payload.chatId, []);\n\t\tVue.set(state.saveFileList, payload.chatId, []);\n\t\tVue.set(state.saveUserList, payload.chatId, []);\n\n\t\treturn true;\n\t}\n\n\tsetMutationType(state, payload)\n\t{\n\t\tlet mutationType = {\n\t\t\tapplied: false,\n\t\t\tinitialType: MutationType.none,\n\t\t\tappliedType: MutationType.none,\n\t\t\tscrollStickToTop: false,\n\t\t\tscrollMessageId: 0\n\t\t};\n\n\t\tif (payload.initialType && !payload.appliedType)\n\t\t{\n\t\t\tpayload.appliedType = payload.initialType;\n\t\t}\n\n\t\tif (typeof state.mutationType[payload.chatId] === 'undefined')\n\t\t{\n\t\t\tVue.set(state.mutationType, payload.chatId, mutationType);\n\t\t}\n\n\t\tstate.mutationType[payload.chatId] = {...mutationType, ...payload};\n\n\t\treturn true;\n\t}\n\n\tprepareMessage(message, options = {})\n\t{\n\t\tlet result = this.validate(Object.assign({}, message), options);\n\n\t\tresult.params = Object.assign({}, this.getElementState().params, result.params);\n\t\tresult.templateId = result.id;\n\n\t\treturn Object.assign({}, this.getElementState(), result);\n\t}\n\n\tmanageCacheBeforeSet(cache, elements, recursive = false)\n\t{\n\t\tlet result = {\n\t\t\ttype: IntersectionType.empty,\n\t\t\tfoundElements: [],\n\t\t\tnoneElements: []\n\t\t};\n\n\t\tif (!cache || cache.length <= 0)\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tfor (let id of elements)\n\t\t{\n\t\t\tif (cache.includes(id))\n\t\t\t{\n\t\t\t\tif (result.type === IntersectionType.empty)\n\t\t\t\t{\n\t\t\t\t\tresult.type = IntersectionType.found;\n\t\t\t\t}\n\t\t\t\tresult.foundElements.push(id);\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tif (result.type === IntersectionType.empty)\n\t\t\t\t{\n\t\t\t\t\tresult.type = IntersectionType.none;\n\t\t\t\t}\n\t\t\t\tresult.noneElements.push(id);\n\t\t\t}\n\t\t}\n\n\t\tif (\n\t\t\tresult.type === IntersectionType.found\n\t\t\t&& cache.length === elements.length\n\t\t\t&& result.foundElements.length === elements.length\n\t\t)\n\t\t{\n\t\t\tresult.type = IntersectionType.equal;\n\t\t}\n\t\telse if (\n\t\t\tresult.type === IntersectionType.none\n\t\t\t&& !recursive\n\t\t\t&& result.foundElements.length > 0\n\t\t)\n\t\t{\n\t\t\tlet reverseResult = this.manageCacheBeforeSet(cache.reverse(), elements.reverse(), true);\n\t\t\tif (reverseResult.type === IntersectionType.found)\n\t\t\t{\n\t\t\t\treverseResult.type = IntersectionType.foundReverse;\n\t\t\t\treturn reverseResult;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tupdateSaveLists(state, chatId)\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tif (\n\t\t\t!chatId\n\t\t\t|| !this.store.getters['dialogues/canSaveChat']\n\t\t\t|| !this.store.getters['dialogues/canSaveChat'](chatId)\n\t\t)\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.initCollection(state, {chatId: chatId});\n\n\t\tlet count = 0;\n\t\tlet saveMessageList = [];\n\t\tlet saveFileList = [];\n\t\tlet saveUserList = [];\n\n\t\tlet dialog = this.store.getters['dialogues/getByChatId'](chatId);\n\t\tif (dialog && dialog.type === 'private')\n\t\t{\n\t\t\tsaveUserList.push(parseInt(dialog.dialogId));\n\t\t}\n\n\t\tfor (let index = state.collection[chatId].length-1; index >= 0; index--)\n\t\t{\n\t\t\tif (state.collection[chatId][index].id.toString().startsWith('temporary'))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (count >= StorageLimit.messages && !state.collection[chatId][index].unread)\n\t\t\t{\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tsaveMessageList.unshift(state.collection[chatId][index].id);\n\n\t\t\tcount++;\n\t\t}\n\n\t\tsaveMessageList = saveMessageList.slice(0, StorageLimit.messages);\n\n\t\tstate.collection[chatId].filter(element => saveMessageList.includes(element.id)).forEach(element =>\n\t\t{\n\t\t\tif (element.authorId > 0)\n\t\t\t{\n\t\t\t\tsaveUserList.push(element.authorId);\n\t\t\t}\n\n\t\t\tif (element.params.FILE_ID instanceof Array)\n\t\t\t{\n\t\t\t\tsaveFileList = element.params.FILE_ID.concat(saveFileList);\n\t\t\t}\n\t\t});\n\n\t\tstate.saveMessageList[chatId] = saveMessageList;\n\t\tstate.saveFileList[chatId] = [...new Set(saveFileList)];\n\t\tstate.saveUserList[chatId] = [...new Set(saveUserList)];\n\n\t\treturn true;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 150;\n\t}\n\n\tsaveState(state, chatId)\n\t{\n\t\tif (!this.updateSaveLists(state, chatId))\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t\tsaveMessageList: {},\n\t\t\t\tsaveUserList: {},\n\t\t\t\tsaveFileList: {},\n\t\t\t};\n\n\t\t\tfor (let chatId in state.saveMessageList)\n\t\t\t{\n\t\t\t\tif (!state.saveMessageList.hasOwnProperty(chatId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!state.collection[chatId])\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (!storedState.collection[chatId])\n\t\t\t\t{\n\t\t\t\t\tstoredState.collection[chatId] = [];\n\t\t\t\t}\n\n\t\t\t\tstate.collection[chatId]\n\t\t\t\t\t.filter(element => state.saveMessageList[chatId].includes(element.id))\n\t\t\t\t\t.forEach(element => storedState.collection[chatId].push(element))\n\t\t\t\t;\n\n\t\t\t\tstoredState.saveMessageList[chatId] = state.saveMessageList[chatId];\n\t\t\t\tstoredState.saveFileList[chatId] = state.saveFileList[chatId];\n\t\t\t\tstoredState.saveUserList[chatId] = state.saveUserList[chatId];\n\t\t\t}\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tupdateSubordinateStates()\n\t{\n\t\tthis.store.dispatch('users/saveState');\n\t\tthis.store.dispatch('files/saveState');\n\t}\n\n\tvalidate(fields, options)\n\t{\n\t\tconst result = {};\n\n\t\tif (typeof fields.id === \"number\")\n\t\t{\n\t\t\tresult.id = fields.id;\n\t\t}\n\t\telse if (typeof fields.id === \"string\")\n\t\t{\n\t\t\tif (fields.id.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.id = fields.id;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.id = parseInt(fields.id);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.templateId === \"number\")\n\t\t{\n\t\t\tresult.templateId = fields.templateId;\n\t\t}\n\t\telse if (typeof fields.templateId === \"string\")\n\t\t{\n\t\t\tif (fields.templateId.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.templateId = fields.templateId;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.templateId = parseInt(fields.templateId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.chat_id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.chat_id;\n\t\t}\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\t\tif (typeof fields.date !== \"undefined\")\n\t\t{\n\t\t\tresult.date = Utils.date.cast(fields.date);\n\t\t}\n\n\t\t// previous P&P format\n\t\tif (typeof fields.textOriginal === \"string\" || typeof fields.textOriginal === \"number\")\n\t\t{\n\t\t\tresult.text = fields.textOriginal.toString();\n\n\t\t\tif (typeof fields.text === \"string\" || typeof fields.text === \"number\")\n\t\t\t{\n\t\t\t\tresult.textConverted = this.convertToHtml({\n\t\t\t\t\ttext: fields.text.toString(),\n\t\t\t\t\tisConverted: true\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse // modern format\n\t\t{\n\t\t\tif (typeof fields.text_converted !== 'undefined')\n\t\t\t{\n\t\t\t\tfields.textConverted = fields.text_converted;\n\t\t\t}\n\t\t\tif (typeof fields.textConverted === \"string\" || typeof fields.textConverted === \"number\")\n\t\t\t{\n\t\t\t\tresult.textConverted = fields.textConverted.toString();\n\t\t\t}\n\t\t\tif (typeof fields.text === \"string\" || typeof fields.text === \"number\")\n\t\t\t{\n\t\t\t\tresult.text = fields.text.toString();\n\n\t\t\t\tlet isConverted = typeof result.textConverted !== 'undefined';\n\n\t\t\t\tresult.textConverted = this.convertToHtml({\n\t\t\t\t\ttext: isConverted? result.textConverted: result.text,\n\t\t\t\t\tisConverted\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.senderId !== 'undefined')\n\t\t{\n\t\t\tfields.authorId = fields.senderId;\n\t\t}\n\t\telse if (typeof fields.author_id !== 'undefined')\n\t\t{\n\t\t\tfields.authorId = fields.author_id;\n\t\t}\n\t\tif (typeof fields.authorId === \"number\" || typeof fields.authorId === \"string\")\n\t\t{\n\t\t\tif (fields.system === true || fields.system === 'Y')\n\t\t\t{\n\t\t\t\tresult.authorId = 0;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.authorId = parseInt(fields.authorId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.params === \"object\" && fields.params !== null)\n\t\t{\n\t\t\tconst params = this.validateParams(fields.params, options);\n\t\t\tif (params)\n\t\t\t{\n\t\t\t\tresult.params = params;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.push === \"boolean\")\n\t\t{\n\t\t\tresult.push = fields.push;\n\t\t}\n\n\t\tif (typeof fields.sending === \"boolean\")\n\t\t{\n\t\t\tresult.sending = fields.sending;\n\t\t}\n\n\t\tif (typeof fields.unread === \"boolean\")\n\t\t{\n\t\t\tresult.unread = fields.unread;\n\t\t}\n\n\t\tif (typeof fields.blink === \"boolean\")\n\t\t{\n\t\t\tresult.blink = fields.blink;\n\t\t}\n\n\t\tif (typeof fields.error === \"boolean\" || typeof fields.error === \"string\")\n\t\t{\n\t\t\tresult.error = fields.error;\n\t\t}\n\n\t\tif (typeof fields.retry === \"boolean\")\n\t\t{\n\t\t\tresult.retry = fields.retry;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tvalidateParams(params, options)\n\t{\n\t\tconst result = {};\n\t\ttry\n\t\t{\n\t\t\tfor (let field in params)\n\t\t\t{\n\t\t\t\tif (!params.hasOwnProperty(field))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tif (field === 'COMPONENT_ID')\n\t\t\t\t{\n\t\t\t\t\tif (typeof params[field] === \"string\" && BX.Vue.isComponent(params[field]))\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[field] = params[field];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (field === 'LIKE')\n\t\t\t\t{\n\t\t\t\t\tif (params[field] instanceof Array)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult['REACTION'] = {like: params[field].map(element => parseInt(element))};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (field === 'CHAT_LAST_DATE')\n\t\t\t\t{\n\t\t\t\t\tresult[field] = Utils.date.cast(params[field]);\n\t\t\t\t}\n\t\t\t\telse if (field === 'AVATAR')\n\t\t\t\t{\n\t\t\t\t\tif (params[field])\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[field] = params[field].startsWith('http') ? params[field] : options.host + params[field];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (field === 'NAME')\n\t\t\t\t{\n\t\t\t\t\tif (params[field])\n\t\t\t\t\t{\n\t\t\t\t\t\tresult[field] = params[field];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (field === 'ATTACH')\n\t\t\t\t{\n\t\t\t\t\tresult[field] = this.decodeAttach(params[field]);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tresult[field] = params[field];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcatch (e) {}\n\n\t\tlet hasResultElements = false;\n\t\tfor (let field in result)\n\t\t{\n\t\t\tif (!result.hasOwnProperty(field))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\thasResultElements = true;\n\t\t\tbreak\n\t\t}\n\n\t\treturn hasResultElements? result: null;\n\t}\n\n\tconvertToHtml(params = {})\n\t{\n\t\tlet {\n\t\t\tquote = true,\n\t\t\timage = true,\n\t\t\ttext = '',\n\t\t\thighlightText = '',\n\t\t\tisConverted = false,\n\t\t\tenableBigSmile = true\n\t\t} = params;\n\n\t\ttext = text.trim();\n\n\t\tif (!isConverted)\n\t\t{\n\t\t\ttext = text.replace(/&/g, '&amp;').replace(/\"/g, '&quot;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\n\t\t}\n\n\t\tif (text.startsWith('/me'))\n\t\t{\n\t\t\ttext = `<i>${text.substr(4)}</i>`;\n\t\t}\n\t\telse if (text.startsWith('/loud'))\n\t\t{\n\t\t\ttext = `<b>${text.substr(6)}</b>`;\n\t\t}\n\n\t\tconst quoteSign = \"&gt;&gt;\";\n\t\tif (quote && text.indexOf(quoteSign) >= 0)\n\t\t{\n\t\t\tlet textPrepareFlag = false;\n\t\t\tlet textPrepare = text.split(isConverted? \"<br />\": \"\\n\");\n\t\t\tfor (let i = 0; i < textPrepare.length; i++)\n\t\t\t{\n\t\t\t\tif (textPrepare[i].startsWith(quoteSign))\n\t\t\t\t{\n\t\t\t\t\ttextPrepare[i] = textPrepare[i].replace(quoteSign, '<div class=\"bx-im-message-content-quote\"><div class=\"bx-im-message-content-quote-wrap\">');\n\t\t\t\t\twhile (++i < textPrepare.length && textPrepare[i].startsWith(quoteSign))\n\t\t\t\t\t{\n\t\t\t\t\t\ttextPrepare[i] = textPrepare[i].replace(quoteSign, '');\n\t\t\t\t\t}\n\t\t\t\t\ttextPrepare[i - 1] += '</div></div><br>';\n\t\t\t\t\ttextPrepareFlag = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttext = textPrepare.join(\"<br />\");\n\t\t}\n\n\t\ttext = text.replace(/\\n/gi, '<br />');\n\n\t\ttext = text.replace(/\\t/gi, '&nbsp;&nbsp;&nbsp;&nbsp;');\n\n\t\ttext = this.decodeBbCode(text, false, enableBigSmile);\n\n\t\tif (quote)\n\t\t{\n\t\t\ttext = text.replace(/------------------------------------------------------<br \\/>(.*?)\\[(.*?)\\]<br \\/>(.*?)------------------------------------------------------(<br \\/>)?/g, function (whole, p1, p2, p3, p4, offset) {\n\t\t\t\treturn (offset > 0? '<br>': '') + \"<div class=\\\"bx-im-message-content-quote\\\"><div class=\\\"bx-im-message-content-quote-wrap\\\"><div class=\\\"bx-im-message-content-quote-name\\\"><span class=\\\"bx-im-message-content-quote-name-text\\\">\" + p1 + \"</span><span class=\\\"bx-im-message-content-quote-name-time\\\">\" + p2 + \"</span></div>\" + p3 + \"</div></div><br />\";\n\t\t\t});\n\t\t\ttext = text.replace(/------------------------------------------------------<br \\/>(.*?)------------------------------------------------------(<br \\/>)?/g, function (whole, p1, p2, p3, offset) {\n\t\t\t\treturn (offset > 0? '<br>': '') + \"<div class=\\\"bx-im-message-content-quote\\\"><div class=\\\"bx-im-message-content-quote-wrap\\\">\" + p1 + \"</div></div><br />\";\n\t\t\t});\n\t\t}\n\n\t\tif (image)\n\t\t{\n\t\t\tlet changed = false;\n\t\t\ttext = text.replace(/<a(.*?)>(http[s]{0,1}:\\/\\/.*?)<\\/a>/ig, function(whole, aInner, text, offset)\n\t\t\t{\n\t\t\t\tif(!text.match(/(\\.(jpg|jpeg|png|gif|webp)\\?|\\.(jpg|jpeg|png|gif|webp)$)/i) || text.indexOf(\"/docs/pub/\") > 0 || text.indexOf(\"logout=yes\") > 0)\n\t\t\t\t{\n\t\t\t\t\treturn whole;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tchanged = true;\n\t\t\t\t\treturn (offset > 0? '<br />':'')+'<a' +aInner+ ' target=\"_blank\" class=\"bx-im-element-file-image\"><img src=\"'+text+'\" class=\"bx-im-element-file-image-source-text\" onerror=\"BX.Messenger.Model.MessagesModel.hideErrorImage(this)\"></a></span>';\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (changed)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<\\/span>(\\n?)<br(\\s\\/?)>/ig, '</span>').replace(/<br(\\s\\/?)>(\\n?)<br(\\s\\/?)>(\\n?)<span/ig, '<br /><span');\n\t\t\t}\n\t\t}\n\n\t\tif (highlightText)\n\t\t{\n\t\t\ttext = text.replace(new RegExp(\"(\" + highlightText.replace(/[\\-\\[\\]\\/{}()*+?.\\\\^$|]/g, \"\\\\$&\") + \")\", 'ig'), '<span class=\"bx-messenger-highlight\">$1</span>');\n\t\t}\n\n\t\tif (enableBigSmile)\n\t\t{\n\t\t\ttext = text.replace(\n\t\t\t\t/^(\\s*<img\\s+src=[^>]+?data-code=[^>]+?data-definition=\"UHD\"[^>]+?style=\"width:)(\\d+)(px[^>]+?height:)(\\d+)(px[^>]+?class=\"bx-smile\"\\s*\\/?>\\s*)$/,\n\t\t\t\tfunction doubleSmileSize(match, start, width, middle, height, end) {\n\t\t\t\t\treturn start + (parseInt(width, 10) * 1.7) + middle + (parseInt(height, 10) * 1.7) + end;\n\t\t\t\t}\n\t\t\t);\n\t\t}\n\n\t\tif (text.substr(-6) == '<br />')\n\t\t{\n\t\t\ttext = text.substr(0, text.length - 6);\n\t\t}\n\t\ttext = text.replace(/<br><br \\/>/ig, '<br />');\n\t\ttext = text.replace(/<br \\/><br>/ig, '<br />');\n\n\t\treturn text;\n\t};\n\n\tdecodeBbCode(text, textOnly = false, enableBigSmile = true)\n\t{\n\t\treturn MessagesModel.decodeBbCode({text, textOnly, enableBigSmile})\n\t}\n\n\tdecodeAttach(item)\n\t{\n\t\tif (Array.isArray(item))\n\t\t{\n\t\t\titem.forEach(arrayElement => {\n\t\t\t\tarrayElement = this.decodeAttach(arrayElement);\n\t\t\t});\n\t\t}\n\t\telse if (typeof item === 'object' && item !== null)\n\t\t{\n\t\t\tfor (const prop in item)\n\t\t\t{\n\t\t\t\tif (item.hasOwnProperty(prop))\n\t\t\t\t{\n\t\t\t\t\titem[prop] = this.decodeAttach(item[prop]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\telse\n\t\t{\n\t\t\tif (typeof item === 'string')\n\t\t\t{\n\t\t\t\titem = Utils.text.htmlspecialcharsback(item);\n\t\t\t}\n\t\t}\n\n\t\treturn item;\n\t}\n\n\tstatic decodeBbCode(params = {})\n\t{\n\t\tlet {text, textOnly = false, enableBigSmile = true} = params;\n\n\t\tlet codeReplacement = [];\n\n\t\ttext = text.replace(/\\[CODE\\]\\n?(.*?)\\[\\/CODE\\]/sig, function(whole, text) {\n\t\t\tlet id = codeReplacement.length;\n\t\t\tcodeReplacement.push(text);\n\t\t\treturn '####REPLACEMENT_MARK_'+id+'####';\n\t\t});\n\n\t\ttext = text.replace(/\\[url=([^\\]]+)\\](.*?)\\[\\/url\\]/ig, function(whole, link, text)\n\t\t{\n\t\t\tlet tag = document.createElement('a');\n\t\t\ttag.href = Utils.text.htmlspecialcharsback(link);\n\t\t\ttag.target = '_blank';\n\t\t\ttag.text = Utils.text.htmlspecialcharsback(text);\n\n\t\t\tlet allowList = [\n\t\t\t\t\"http:\",\n\t\t\t\t\"https:\",\n\t\t\t\t\"ftp:\",\n\t\t\t\t\"file:\",\n\t\t\t\t\"tel:\",\n\t\t\t\t\"callto:\",\n\t\t\t\t\"mailto:\",\n\t\t\t\t\"skype:\",\n\t\t\t\t\"viber:\",\n\t\t\t];\n\t\t\tif (allowList.indexOf(tag.protocol) <= -1)\n\t\t\t{\n\t\t\t\treturn whole;\n\t\t\t}\n\n\t\t\treturn tag.outerHTML;\n\t\t});\n\n\t\ttext = text.replace(/\\[url\\]([^\\]]+)\\[\\/url\\]/ig, function(whole, link)\n\t\t{\n\t\t\tlink = Utils.text.htmlspecialcharsback(link);\n\n\t\t\tlet tag = document.createElement('a');\n\t\t\ttag.href = link;\n\t\t\ttag.target = '_blank';\n\t\t\ttag.text = link;\n\n\t\t\tlet allowList = [\n\t\t\t\t\"http:\",\n\t\t\t\t\"https:\",\n\t\t\t\t\"ftp:\",\n\t\t\t\t\"file:\",\n\t\t\t\t\"tel:\",\n\t\t\t\t\"callto:\",\n\t\t\t\t\"mailto:\",\n\t\t\t\t\"skype:\",\n\t\t\t\t\"viber:\",\n\t\t\t];\n\t\t\tif (allowList.indexOf(tag.protocol) <= -1)\n\t\t\t{\n\t\t\t\treturn whole;\n\t\t\t}\n\n\t\t\treturn tag.outerHTML;\n\t\t});\n\n\t\ttext = text.replace(/\\[LIKE\\]/ig, '<span class=\"bx-smile bx-im-smile-like\"></span>');\n\t\ttext = text.replace(/\\[DISLIKE\\]/ig, '<span class=\"bx-smile bx-im-smile-dislike\"></span>');\n\n\t\ttext = text.replace(/\\[BR\\]/ig, '<br/>');\n\t\ttext = text.replace(/\\[([buis])\\](.*?)\\[(\\/[buis])\\]/ig, (whole, open, inner, close) => '<'+open+'>'+inner+'<'+close+'>'); // TODO tag USER\n\n\t\t// this code needs to be ported to im/install/js/im/view/message/body/src/body.js:229\n\t\ttext = text.replace(/\\[CHAT=(imol\\|)?([0-9]{1,})\\](.*?)\\[\\/CHAT\\]/ig, (whole, openlines, chatId, inner) => openlines? inner: '<span class=\"bx-im-mention\" data-type=\"CHAT\" data-value=\"chat'+chatId+'\">'+inner+'</span>'); // TODO tag CHAT\n\n\t\tif (false && Utils.device.isMobile())\n\t\t{\n\t\t\tlet replacements = [];\n\t\t\ttext = text.replace(/\\[CALL(?:=(.+?))?\\](.+?)?\\[\\/CALL\\]/ig, (whole, number, text) => {\n\t\t\t\tlet index = replacements.length;\n\t\t\t\treplacements.push({number, text});\n\t\t\t\treturn `####REPLACEMENT_MARK_${index}####`;\n\t\t\t});\n\n\t\t\ttext = text.replace(/[+]{0,1}(?:[-\\/. ()\\[\\]~;#,]*[0-9]){10,}[^\\n\\r<][-\\/. ()\\[\\]~;#,0-9^]*/g, (number) => {\n\t\t\t\tlet pureNumber = number.replace(/\\D/g, '');\n\t\t\t\treturn `[CALL=${pureNumber}]${number}[/CALL]`;\n\t\t\t});\n\n\t\t\treplacements.forEach((item, index) => {\n\t\t\t\ttext = text.replace(`####REPLACEMENT_MARK_${index}####`, `[CALL=${item.number}]${item.text}[/CALL]`)\n\t\t\t});\n\t\t}\n\n\t\ttext = text.replace(/\\[CALL(?:=(.+?))?\\](.+?)?\\[\\/CALL\\]/ig, (whole, number, text) => '<span class=\"bx-im-mention\" data-type=\"CALL\" data-value=\"'+Utils.text.htmlspecialchars(number)+'\">'+text+'</span>'); // TODO tag CHAT\n\n\t\ttext = text.replace(/\\[PCH=([0-9]{1,})\\](.*?)\\[\\/PCH\\]/ig, (whole, historyId, text) => text); // TODO tag PCH\n\n\t\ttext = text.replace(/\\[SEND(?:=(.+?))?\\](.+?)?\\[\\/SEND\\]/ig, (whole, command, text) =>\n\t\t{\n\t\t\tlet html = '';\n\n\t\t\ttext = text? text: command;\n\t\t\tcommand = (command? command: text).replace('<br />', '\\n');\n\n\t\t\tif (!textOnly && text)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<([\\w]+)[^>]*>(.*?)<\\\\1>/i, \"$2\", text);\n\t\t\t\ttext = text.replace(/\\[([\\w]+)[^\\]]*\\](.*?)\\[\\/\\1\\]/i, \"$2\", text);\n\n\t\t\t\thtml = '<span class=\"bx-im-message-command-wrap\">'+\n\t\t\t\t\t'<span class=\"bx-im-message-command\" data-entity=\"send\">'+text+'</span>'+\n\t\t\t\t\t'<span class=\"bx-im-message-command-data\">'+command+'</span>'+\n\t\t\t\t'</span>';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = text;\n\t\t\t}\n\n\t\t\treturn html;\n\t\t});\n\n\t\ttext = text.replace(/\\[PUT(?:=(.+?))?\\](.+?)?\\[\\/PUT\\]/ig, (whole, command, text) =>\n\t\t{\n\t\t\tlet html = '';\n\n\t\t\ttext = text? text: command;\n\t\t\tcommand = (command? command: text).replace('<br />', '\\n');\n\n\t\t\tif (!textOnly && text)\n\t\t\t{\n\t\t\t\ttext = text.replace(/<([\\w]+)[^>]*>(.*?)<\\/\\1>/i, \"$2\", text);\n\t\t\t\ttext = text.replace(/\\[([\\w]+)[^\\]]*\\](.*?)\\[\\/\\1\\]/i, \"$2\", text);\n\n\t\t\t\thtml = '<span class=\"bx-im-message-command\" data-entity=\"put\">'+text+'</span>';\n\t\t\t\thtml += '<span class=\"bx-im-message-command-data\">'+command+'</span>';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\thtml = text;\n\t\t\t}\n\n\t\t\treturn html;\n\t\t});\n\n\t\tlet textElementSize = 0;\n\t\tif (enableBigSmile)\n\t\t{\n\t\t\ttextElementSize = text.replace(/\\[icon\\=([^\\]]*)\\]/ig, '').trim().length;\n\t\t}\n\n\t\ttext = text.replace(/\\[icon\\=([^\\]]*)\\]/ig, (whole) =>\n\t\t{\n\t\t\tlet url = whole.match(/icon\\=(\\S+[^\\s.,> )\\];\\'\\\"!?])/i);\n\t\t\tif (url && url[1])\n\t\t\t{\n\t\t\t\turl = url[1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\treturn '';\n\t\t\t}\n\n\t\t\tlet attrs = {'src': url, 'border': 0};\n\n\t\t\tlet size = whole.match(/size\\=(\\d+)/i);\n\t\t\tif (size && size[1])\n\t\t\t{\n\t\t\t\tattrs['width'] = size[1];\n\t\t\t\tattrs['height'] = size[1];\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlet width = whole.match(/width\\=(\\d+)/i);\n\t\t\t\tif (width && width[1])\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = width[1];\n\t\t\t\t}\n\n\t\t\t\tlet height = whole.match(/height\\=(\\d+)/i);\n\t\t\t\tif (height && height[1])\n\t\t\t\t{\n\t\t\t\t\tattrs['height'] = height[1];\n\t\t\t\t}\n\n\t\t\t\tif (attrs['width'] && !attrs['height'])\n\t\t\t\t{\n\t\t\t\t\tattrs['height'] = attrs['width'];\n\t\t\t\t}\n\t\t\t\telse if (attrs['height'] && !attrs['width'])\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = attrs['height'];\n\t\t\t\t}\n\t\t\t\telse if (attrs['height'] && attrs['width'])\n\t\t\t\t{}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tattrs['width'] = 20;\n\t\t\t\t\tattrs['height'] = 20;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tattrs['width'] = attrs['width']>100? 100: attrs['width'];\n\t\t\tattrs['height'] = attrs['height']>100? 100: attrs['height'];\n\n\t\t\tif (enableBigSmile && textElementSize === 0 && attrs['width'] === attrs['height'] && attrs['width'] === 20)\n\t\t\t{\n\t\t\t\tattrs['width'] = 40;\n\t\t\t\tattrs['height'] = 40;\n\t\t\t}\n\n\t\t\tlet title = whole.match(/title\\=(.*[^\\s\\]])/i);\n\t\t\tif (title && title[1])\n\t\t\t{\n\t\t\t\ttitle = title[1];\n\t\t\t\tif (title.indexOf('width=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('width='))\n\t\t\t\t}\n\t\t\t\tif (title.indexOf('height=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('height='))\n\t\t\t\t}\n\t\t\t\tif (title.indexOf('size=') > -1)\n\t\t\t\t{\n\t\t\t\t\ttitle = title.substr(0, title.indexOf('size='))\n\t\t\t\t}\n\t\t\t\tif (title)\n\t\t\t\t{\n\t\t\t\t\tattrs['title'] = Utils.text.htmlspecialchars(title).trim();\n\t\t\t\t\tattrs['alt'] = attrs['title'];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet attributes = '';\n\t\t\tfor (let name in attrs)\n\t\t\t{\n\t\t\t\tif (attrs.hasOwnProperty(name))\n\t\t\t\t{\n\t\t\t\t\tattributes += name+'=\"'+attrs[name]+'\" ';\n\t\t\t\t}\n\t\t\t}\n\n\n\t\t\treturn '<img class=\"bx-smile bx-icon\" '+attributes+'>';\n\t\t});\n\n\t\tcodeReplacement.forEach((code, index) => {\n\t\t\ttext = text.replace('####REPLACEMENT_MARK_'+index+'####',\n\t\t\t\t!textOnly? '<div class=\"bx-im-message-content-code\">'+code+'</div>': code\n\t\t\t)\n\t\t});\n\n\t\treturn text;\n\t}\n\n\tstatic hideErrorImage(element)\n\t{\n\t\tif (element.parentNode && element.parentNode)\n\t\t{\n\t\t\telement.parentNode.innerHTML = '<a href=\"'+element.src+'\" target=\"_blank\">'+element.src+'</a>';\n\t\t}\n\t\treturn true;\n\t};\n}","/**\n * Bitrix Messenger\n * Dialogues model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {StorageLimit} from \"im.const\";\nimport {Utils} from \"im.lib.utils\";\n\nexport class DialoguesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'dialogues';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {},\n\t\t\tsaveDialogList: [],\n\t\t\tsaveChatList: [],\n\t\t}\n\t}\n\n\tgetStateSaveException()\n\t{\n\t\treturn {\n\t\t\thost: null\n\t\t}\n\t}\n\n\tgetElementStateSaveException()\n\t{\n\t\treturn {\n\t\t\twritingList: null,\n\t\t\tquoteId: null\n\t\t}\n\t}\n\n\tgetElementState()\n\t{\n\t\treturn {\n\t\t\tdialogId: '0',\n\t\t\tchatId: 0,\n\t\t\tcounter: 0,\n\t\t\tunreadId: 0,\n\t\t\tunreadLastId: 0,\n\t\t\tmanagerList: [],\n\t\t\treadedList: [],\n\t\t\twritingList: [],\n\t\t\ttextareaMessage: \"\",\n\t\t\tquoteId: 0,\n\t\t\teditId: 0,\n\t\t\tinit: false,\n\n\t\t\tname: \"\",\n\t\t\towner: 0,\n\t\t\textranet: false,\n\t\t\tavatar: \"\",\n\t\t\tcolor: \"#17A3EA\",\n\t\t\ttype: \"chat\",\n\t\t\tentityType: \"\",\n\t\t\tentityId: \"\",\n\t\t\tentityData1: \"\",\n\t\t\tentityData2: \"\",\n\t\t\tentityData3: \"\",\n\t\t\tdateCreate: new Date(),\n\t\t\trestrictions: {\n\t\t\t\tavatar: true,\n\t\t\t\textend: true,\n\t\t\t\tleave: true,\n\t\t\t\tleaveOwner: true,\n\t\t\t\trename: true\n\t\t\t},\n\t\t\tpublic: {\n\t\t\t\tcode: '',\n\t\t\t\tlink: ''\n\t\t\t}\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => dialogId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[dialogId];\n\t\t\t},\n\t\t\tgetByChatId: state => chatId =>\n\t\t\t{\n\t\t\t\tchatId = parseInt(chatId);\n\n\t\t\t\tfor (let dialogId in state.collection)\n\t\t\t\t{\n\t\t\t\t\tif (!state.collection.hasOwnProperty(dialogId))\n\t\t\t\t\t{\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (state.collection[dialogId].chatId === chatId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn state.collection[dialogId];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState();\n\t\t\t},\n\t\t\tgetQuoteId: state => dialogId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t{\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[dialogId].quoteId;\n\t\t\t},\n\t\t\tgetEditId: state => dialogId =>\n\t\t\t{\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t{\n\t\t\t\t\treturn 0;\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[dialogId].editId;\n\t\t\t},\n\t\t\tcanSaveChat: state => chatId =>\n\t\t\t{\n\t\t\t\tif (/^\\d+$/.test(chatId))\n\t\t\t\t{\n\t\t\t\t\tchatId = parseInt(chatId);\n\t\t\t\t}\n\t\t\t\treturn state.saveChatList.includes(parseInt(chatId));\n\t\t\t},\n\t\t\tcanSaveDialog: state => dialogId =>\n\t\t\t{\n\t\t\t\treturn state.saveDialogList.includes(dialogId.toString());\n\t\t\t},\n\t\t\tisPrivateDialog: state => dialogId =>\n\t\t\t{\n\t\t\t\tdialogId = dialogId.toString();\n\t\t\t\treturn state.collection[dialogId.toString()] && state.collection[dialogId].type === 'private';\n\t\t\t},\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(dialog => {\n\t\t\t\t\t\treturn Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tthis.validate(Object.assign({}, dialog), {host: store.state.host}),\n\t\t\t\t\t\t\t{init: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\tresult.push(Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.validate(Object.assign({}, payload), {host: store.state.host}),\n\t\t\t\t\t\t{init: true}\n\t\t\t\t\t));\n\t\t\t\t\tpayload = result;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', payload);\n\t\t\t},\n\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields : this.validate(Object.assign({}, payload.fields), {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', payload.dialogId);\n\t\t\t\treturn true;\n\t\t\t},\n\n\t\t\tupdateWriting: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet index = store.state.collection[payload.dialogId].writingList.findIndex(el => el.userId === payload.userId);\n\t\t\t\tif (payload.action)\n\t\t\t\t{\n\t\t\t\t\tif (index >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tlet writingList = [].concat(store.state.collection[payload.dialogId].writingList);\n\t\t\t\t\t\twritingList.unshift({\n\t\t\t\t\t\t\tuserId: payload.userId,\n\t\t\t\t\t\t\tuserName: payload.userName,\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tactionName: 'updateWriting/1',\n\t\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\t\tfields : this.validate({writingList}, {host: store.state.host})\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tif (index >= 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet writingList = store.state.collection[payload.dialogId].writingList.filter(el => el.userId !== payload.userId);\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tactionName: 'updateWriting/2',\n\t\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\t\tfields : this.validate({writingList}, {host: store.state.host})\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tupdateReaded: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet readedList = store.state.collection[payload.dialogId].readedList.filter(el => el.userId !== payload.userId);\n\n\t\t\t\tif (payload.action)\n\t\t\t\t{\n\t\t\t\t\treadedList.push({\n\t\t\t\t\t\tuserId: payload.userId,\n\t\t\t\t\t\tuserName: payload.userName || '',\n\t\t\t\t\t\tmessageId: payload.messageId,\n\t\t\t\t\t\tdate: payload.date || (new Date()),\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tactionName: 'updateReaded',\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields : this.validate({readedList}, {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tincreaseCounter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet counter = store.state.collection[payload.dialogId].counter;\n\t\t\t\tif (counter === 100)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet increasedCounter = counter + payload.count;\n\t\t\t\tif (increasedCounter > 100)\n\t\t\t\t{\n\t\t\t\t\tincreasedCounter = 100;\n\t\t\t\t}\n\n\t\t\t\tlet fields = {\n\t\t\t\t\tcounter: increasedCounter\n\t\t\t\t};\n\n\t\t\t\tif (typeof payload.unreadLastId !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tfields.unreadLastId = payload.unreadLastId;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tactionName: 'increaseCounter',\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tfields\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tdecreaseCounter: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet counter = store.state.collection[payload.dialogId].counter;\n\t\t\t\tif (counter === 100)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tlet decreasedCounter = counter - payload.count;\n\t\t\t\tif (decreasedCounter < 0)\n\t\t\t\t{\n\t\t\t\t\tdecreasedCounter = 0;\n\t\t\t\t}\n\n\t\t\t\tlet unreadId = payload.unreadId > store.state.collection[payload.dialogId].unreadId? payload.unreadId: store.state.collection[payload.dialogId].unreadId;\n\n\t\t\t\tif (\n\t\t\t\t\tstore.state.collection[payload.dialogId].unreadId !== unreadId\n\t\t\t\t\t|| store.state.collection[payload.dialogId].counter !== decreasedCounter\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tif (decreasedCounter === 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tunreadId = 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\tactionName: 'decreaseCounter',\n\t\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\t\tfields : {\n\t\t\t\t\t\t\tcounter: decreasedCounter,\n\t\t\t\t\t\t\tunreadId: unreadId\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\n\t\t\tsaveDialog: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.dialogId] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.dialogId].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('saveDialog', {\n\t\t\t\t\tdialogId : payload.dialogId,\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t};\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\t\t\t},\n\t\t\tsaveDialog: (state, payload) =>\n\t\t\t{\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update this flag\n\t\t\t\tif (!(payload.chatId > 0 && payload.dialogId.length > 0))\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tlet saveDialogList = state.saveDialogList.filter(function(element) {\n\t\t\t\t\treturn element !== payload.dialogId;\n\t\t\t\t});\n\n\t\t\t\tsaveDialogList.unshift(payload.dialogId);\n\n\t\t\t\tsaveDialogList = saveDialogList.slice(0, StorageLimit.dialogues);\n\n\t\t\t\tif (state.saveDialogList.join(',') === saveDialogList.join(','))\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstate.saveDialogList = saveDialogList;\n\n\n\t\t\t\tlet saveChatList = state.saveChatList.filter(function(element) {\n\t\t\t\t\treturn element !== payload.chatId;\n\t\t\t\t});\n\n\t\t\t\tsaveChatList.unshift(payload.chatId);\n\n\t\t\t\tstate.saveChatList = saveChatList.slice(0, StorageLimit.dialogues);\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {dialogId: element.dialogId});\n\n\t\t\t\t\tstate.collection[element.dialogId] = Object.assign(\n\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\tstate.collection[element.dialogId],\n\t\t\t\t\t\telement\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update cache\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.dialogId] = Object.assign(\n\t\t\t\t\tstate.collection[payload.dialogId],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update cache\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tdelete state.collection[payload.dialogId];\n\n\t\t\t\t// TODO if payload.dialogId is IMOL, skip update cache\n\t\t\t\tthis.saveState(state);\n\t\t\t}\n\t\t};\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof state.collection[payload.dialogId] !== 'undefined')\n\t\t{\n\t\t\treturn true\n\t\t}\n\n\t\tVue.set(state.collection, payload.dialogId, this.getElementState());\n\n\t\tif (payload.fields)\n\t\t{\n\t\t\tstate.collection[payload.dialogId] = Object.assign(\n\t\t\t\tstate.collection[payload.dialogId],\n\t\t\t\tthis.validate(Object.assign({}, payload.fields), {host: state.host})\n\t\t\t);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 100;\n\t}\n\n\tsaveState(state = {})\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t\tsaveDialogList: [].concat(state.saveDialogList),\n\t\t\t\tsaveChatList: [].concat(state.saveChatList),\n\t\t\t};\n\n\t\t\tstate.saveDialogList.forEach(dialogId => {\n\t\t\t\tif (!state.collection[dialogId])\n\t\t\t\t\treturn false;\n\n\t\t\t\tstoredState.collection[dialogId] = Object.assign(\n\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\tthis.cloneState(state.collection[dialogId], this.getElementStateSaveException())\n\t\t\t\t);\n\t\t\t});\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.dialog_id !== 'undefined')\n\t\t{\n\t\t\tfields.dialogId = fields.dialog_id;\n\t\t}\n\t\tif (typeof fields.dialogId === \"number\" || typeof fields.dialogId === \"string\")\n\t\t{\n\t\t\tresult.dialogId = fields.dialogId.toString();\n\t\t}\n\n\t\tif (typeof fields.chat_id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.chat_id;\n\t\t}\n\t\telse if (typeof fields.id !== 'undefined')\n\t\t{\n\t\t\tfields.chatId = fields.id;\n\t\t}\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\t\tif (typeof fields.quoteId === \"number\")\n\t\t{\n\t\t\tresult.quoteId = parseInt(fields.quoteId);\n\t\t}\n\t\tif (typeof fields.editId === \"number\")\n\t\t{\n\t\t\tresult.editId = parseInt(fields.editId);\n\t\t}\n\n\t\tif (typeof fields.counter === \"number\" || typeof fields.counter === \"string\")\n\t\t{\n\t\t\tresult.counter = parseInt(fields.counter);\n\t\t}\n\n\t\tif (typeof fields.unread_id !== 'undefined')\n\t\t{\n\t\t\tfields.unreadId = fields.unread_id;\n\t\t}\n\t\tif (typeof fields.unreadId === \"number\" || typeof fields.unreadId === \"string\")\n\t\t{\n\t\t\tresult.unreadId = parseInt(fields.unreadId);\n\t\t}\n\n\t\tif (typeof fields.unread_last_id !== 'undefined')\n\t\t{\n\t\t\tfields.unreadLastId = fields.unread_last_id;\n\t\t}\n\t\tif (typeof fields.unreadLastId === \"number\" || typeof fields.unreadLastId === \"string\")\n\t\t{\n\t\t\tresult.unreadLastId = parseInt(fields.unreadLastId);\n\t\t}\n\n\t\tif (typeof fields.readed_list !== 'undefined')\n\t\t{\n\t\t\tfields.readedList = fields.readed_list;\n\t\t}\n\t\tif (typeof fields.readedList !== 'undefined')\n\t\t{\n\t\t\tresult.readedList = [];\n\n\t\t\tif (fields.readedList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.readedList.forEach(element =>\n\t\t\t\t{\n\t\t\t\t\tlet record = {};\n\t\t\t\t\tif (typeof element.user_id !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.userId = element.user_id;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof element.user_name !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.userName = element.user_name;\n\t\t\t\t\t}\n\t\t\t\t\tif (typeof element.message_id !== 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\telement.messageId = element.message_id;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!element.userId || !element.userName || !element.messageId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\trecord.userId = parseInt(element.userId);\n\t\t\t\t\trecord.userName = element.userName.toString();\n\t\t\t\t\trecord.messageId = parseInt(element.messageId);\n\n\t\t\t\t\trecord.date = Utils.date.cast(element.date);\n\n\t\t\t\t\tresult.readedList.push(record);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.writing_list !== 'undefined')\n\t\t{\n\t\t\tfields.writingList = fields.writing_list;\n\t\t}\n\t\tif (typeof fields.writingList !== 'undefined')\n\t\t{\n\t\t\tresult.writingList = [];\n\n\t\t\tif (fields.writingList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.writingList.forEach(element =>\n\t\t\t\t{\n\t\t\t\t\tlet record = {};\n\n\t\t\t\t\tif (!element.userId)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\trecord.userId = parseInt(element.userId);\n\t\t\t\t\trecord.userName = element.userName;\n\n\t\t\t\t\tresult.writingList.push(record);\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.manager_list !== 'undefined')\n\t\t{\n\t\t\tfields.managerList = fields.manager_list;\n\t\t}\n\t\tif (typeof fields.managerList !== 'undefined')\n\t\t{\n\t\t\tresult.managerList = [];\n\n\t\t\tif (fields.managerList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.managerList.forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tuserId = parseInt(userId);\n\t\t\t\t\tif (userId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.managerList.push(userId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.mute_list !== 'undefined')\n\t\t{\n\t\t\tfields.muteList = fields.mute_list;\n\t\t}\n\t\tif (typeof fields.muteList !== 'undefined')\n\t\t{\n\t\t\tresult.muteList = [];\n\n\t\t\tif (fields.muteList instanceof Array)\n\t\t\t{\n\t\t\t\tfields.muteList.forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tuserId = parseInt(userId);\n\t\t\t\t\tif (userId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.muteList.push(userId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.textareaMessage !== 'undefined')\n\t\t{\n\t\t\tresult.textareaMessage = fields.textareaMessage.toString();\n\t\t}\n\n\t\tif (typeof fields.title !== 'undefined')\n\t\t{\n\t\t\tfields.name = fields.title;\n\t\t}\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = Utils.text.htmlspecialcharsback(fields.name.toString());\n\t\t}\n\n\t\tif (typeof fields.owner !== 'undefined')\n\t\t{\n\t\t\tfields.ownerId = fields.owner;\n\t\t}\n\t\tif (typeof fields.ownerId === \"number\" || typeof fields.ownerId === \"string\")\n\t\t{\n\t\t\tresult.ownerId = parseInt(fields.ownerId);\n\t\t}\n\n\t\tif (typeof fields.extranet === \"boolean\")\n\t\t{\n\t\t\tresult.extranet = fields.extranet;\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tlet avatar;\n\n\t\t\tif (!fields.avatar || fields.avatar.endsWith('/js/im/images/blank.gif'))\n\t\t\t{\n\t\t\t\tavatar = '';\n\t\t\t}\n\t\t\telse if (fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tavatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatar = options.host + fields.avatar;\n\t\t\t}\n\n\t\t\tif (avatar)\n\t\t\t{\n\t\t\t\tresult.avatar = encodeURI(avatar);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.color === \"string\")\n\t\t{\n\t\t\tresult.color = fields.color.toString();\n\t\t}\n\n\t\tif (typeof fields.type === \"string\")\n\t\t{\n\t\t\tresult.type = fields.type.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_type !== 'undefined')\n\t\t{\n\t\t\tfields.entityType = fields.entity_type;\n\t\t}\n\t\tif (typeof fields.entityType === \"string\")\n\t\t{\n\t\t\tresult.entityType = fields.entityType.toString();\n\t\t}\n\t\tif (typeof fields.entity_id !== 'undefined')\n\t\t{\n\t\t\tfields.entityId = fields.entity_id;\n\t\t}\n\t\tif (typeof fields.entityId === \"string\" || typeof fields.entityId === \"number\")\n\t\t{\n\t\t\tresult.entityId = fields.entityId.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_1 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData1 = fields.entity_data_1;\n\t\t}\n\t\tif (typeof fields.entityData1 === \"string\")\n\t\t{\n\t\t\tresult.entityData1 = fields.entityData1.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_2 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData2 = fields.entity_data_2;\n\t\t}\n\t\tif (typeof fields.entityData2 === \"string\")\n\t\t{\n\t\t\tresult.entityData2 = fields.entityData2.toString();\n\t\t}\n\n\t\tif (typeof fields.entity_data_3 !== 'undefined')\n\t\t{\n\t\t\tfields.entityData3 = fields.entity_data_3;\n\t\t}\n\t\tif (typeof fields.entityData3 === \"string\")\n\t\t{\n\t\t\tresult.entityData3 = fields.entityData3.toString();\n\t\t}\n\n\t\tif (typeof fields.date_create !== 'undefined')\n\t\t{\n\t\t\tfields.dateCreate = fields.date_create;\n\t\t}\n\n\t\tif (typeof fields.dateCreate !== \"undefined\")\n\t\t{\n\t\t\tresult.dateCreate = Utils.date.cast(fields.dateCreate);\n\t\t}\n\n\t\tif (typeof fields.dateLastOpen !== \"undefined\")\n\t\t{\n\t\t\tresult.dateLastOpen = Utils.date.cast(fields.dateLastOpen);\n\t\t}\n\n\t\tif (typeof fields.restrictions === 'object' && fields.restrictions)\n\t\t{\n\t\t\tresult.restrictions = {};\n\n\t\t\tif (typeof fields.restrictions.AVATAR === 'boolean')\n\t\t\t{\n\t\t\t\tresult.restrictions.avatar = fields.restrictions.AVATAR;\n\t\t\t}\n\n\t\t\tif (typeof fields.restrictions.EXTEND === 'boolean')\n\t\t\t{\n\t\t\t\tresult.restrictions.extend = fields.restrictions.EXTEND;\n\t\t\t}\n\n\t\t\tif (typeof fields.restrictions.LEAVE === 'boolean')\n\t\t\t{\n\t\t\t\tresult.restrictions.leave = fields.restrictions.LEAVE;\n\t\t\t}\n\n\t\t\tif (typeof fields.restrictions.LEAVE_OWNER === 'boolean')\n\t\t\t{\n\t\t\t\tresult.restrictions.leaveOwner = fields.restrictions.LEAVE_OWNER;\n\t\t\t}\n\n\t\t\tif (typeof fields.restrictions.RENAME === 'boolean')\n\t\t\t{\n\t\t\t\tresult.restrictions.rename = fields.restrictions.RENAME;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.public === 'object' && fields.public)\n\t\t{\n\t\t\tresult.public = {};\n\n\t\t\tif (typeof fields.public.code === 'string')\n\t\t\t{\n\t\t\t\tresult.public.code = fields.public.code;\n\t\t\t}\n\n\t\t\tif (typeof fields.public.link === 'string')\n\t\t\t{\n\t\t\t\tresult.public.link = fields.public.link;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n}","/**\n * Bitrix Messenger\n * Users model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {Utils} from \"im.lib.utils\";\n\nexport class UsersModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'users';\n\t}\n\n\tgetState()\n\t{\n\t\tthis.startOnlineCheckInterval();\n\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {},\n\t\t\tonlineList: [],\n\t\t\tmobileOnlineList: [],\n\t\t\tabsentList: []\n\t\t}\n\t}\n\n\tgetElementState(params = {})\n\t{\n\t\tlet {\n\t\t\tid = 0,\n\t\t\tname = this.getVariable('default.name', ''),\n\t\t\tfirstName = this.getVariable('default.name', ''),\n\t\t\tlastName = '',\n\t\t} = params;\n\n\t\treturn {\n\t\t\tid,\n\t\t\tname,\n\t\t\tfirstName,\n\t\t\tlastName,\n\t\t\tworkPosition: \"\",\n\t\t\tcolor: \"#048bd0\",\n\t\t\tavatar: \"\",\n\t\t\tgender: \"M\",\n\t\t\tbirthday: false,\n\t\t\tisBirthday: false,\n\t\t\textranet: false,\n\t\t\tnetwork: false,\n\t\t\tbot: false,\n\t\t\tconnector: false,\n\t\t\texternalAuthId: \"default\",\n\t\t\tstatus: \"online\",\n\t\t\tidle: false,\n\t\t\tlastActivityDate: false,\n\t\t\tmobileLastDate: false,\n\t\t\tisOnline: false,\n\t\t\tisMobileOnline: false,\n\t\t\tabsent: false,\n\t\t\tisAbsent: false,\n\t\t\tdepartments: [],\n\t\t\tphones: {\n\t\t\t\tworkPhone: \"\",\n\t\t\t\tpersonalMobile: \"\",\n\t\t\t\tpersonalPhone: \"\",\n\t\t\t\tinnerPhone: \"\",\n\t\t\t},\n\t\t\tinit: false\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => (userId, getTemporary = false) =>\n\t\t\t{\n\t\t\t\tuserId = parseInt(userId);\n\n\t\t\t\tif (userId <= 0)\n\t\t\t\t{\n\t\t\t\t\tif (getTemporary)\n\t\t\t\t\t{\n\t\t\t\t\t\tuserId = 0;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\t!getTemporary\n\t\t\t\t\t&& (!state.collection[userId] || !state.collection[userId].init)\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (!state.collection[userId])\n\t\t\t\t{\n\t\t\t\t\treturn this.getElementState({id: userId});\n\t\t\t\t}\n\n\t\t\t\treturn state.collection[userId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState(params);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(user => {\n\t\t\t\t\t\treturn Object.assign(\n\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\t\tthis.validate(Object.assign({}, user), {host: store.state.host}),\n\t\t\t\t\t\t\t{init: true}\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = [];\n\t\t\t\t\tresult.push(Object.assign(\n\t\t\t\t\t\t{},\n\t\t\t\t\t\tthis.getElementState(),\n\t\t\t\t\t\tthis.validate(Object.assign({}, payload), {host: store.state.host}),\n\t\t\t\t\t\t{init: true}\n\t\t\t\t\t));\n\t\t\t\t\tpayload = result;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', payload);\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tpayload.id = parseInt(payload.id);\n\n\t\t\t\tif (\n\t\t\t\t\ttypeof store.state.collection[payload.id] === 'undefined'\n\t\t\t\t\t|| store.state.collection[payload.id].init === false\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tfields : this.validate(Object.assign({}, payload.fields), {host: store.state.host})\n\t\t\t\t});\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', payload.id);\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tsaveState: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('saveState', {});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {id: element.id});\n\n\t\t\t\t\tstate.collection[element.id] = element;\n\n\t\t\t\t\tlet status = Utils.user.getOnlineStatus(element);\n\t\t\t\t\tif (status.isOnline)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.id].isOnline = true;\n\t\t\t\t\t\tthis.addToOnlineList(state, element.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet mobileStatus = Utils.user.isMobileActive(element);\n\t\t\t\t\tif (mobileStatus)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.id].isMobileOnline = true;\n\t\t\t\t\t\tthis.addToMobileOnlineList(state, element.id);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (element.birthday)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet today = Utils.date.format(new Date(), \"d-m\");\n\t\t\t\t\t\tif (element.birthday === today)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[element.id].isBirthday = true;\n\n\t\t\t\t\t\t\tlet timeToNextMidnight = this.getTimeToNextMidnight();\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tstate.collection[element.id].isBirthday = false;\n\t\t\t\t\t\t\t}, timeToNextMidnight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (element.absent)\n\t\t\t\t\t{\n\t\t\t\t\t\telement.isAbsent = true;\n\n\t\t\t\t\t\tif (!state.absentList.includes(element.id))\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tthis.addToAbsentList(state, element.id);\n\n\t\t\t\t\t\t\tlet timeToNextMidnight = this.getTimeToNextMidnight();\n\t\t\t\t\t\t\tlet timeToNextDay = 1000*60*60*24;\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tsetInterval(() => this.startAbsentCheckInterval(state), timeToNextDay);\n\t\t\t\t\t\t\t}, timeToNextMidnight);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tif (typeof payload.fields.lastActivityDate !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tlet lastActivityDate = state.collection[payload.id].lastActivityDate.getTime();\n\t\t\t\t\tlet newActivityDate = payload.fields.lastActivityDate.getTime();\n\t\t\t\t\tif (newActivityDate > lastActivityDate)\n\t\t\t\t\t{\n\t\t\t\t\t\tlet status = Utils.user.getOnlineStatus(payload.fields);\n\t\t\t\t\t\tif (status.isOnline)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection[payload.id].isOnline = true;\n\t\t\t\t\t\t\tthis.addToOnlineList(state, payload.fields.id);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (\n\t\t\t\t\ttypeof payload.fields.mobileLastDate !== 'undefined'\n\t\t\t\t\t&& state.collection[payload.id].mobileLastDate !== payload.fields.mobileLastDate\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\tlet mobileStatus = Utils.user.isMobileActive(payload.fields);\n\t\t\t\t\tif (mobileStatus)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[payload.id].isMobileOnline = true;\n\t\t\t\t\t\tthis.addToMobileOnlineList(state, payload.fields.id);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tstate.collection[payload.id] = Object.assign(\n\t\t\t\t\tstate.collection[payload.id],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tdelete state.collection[payload.id];\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tsaveState: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t}\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof state.collection[payload.id] !== 'undefined')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tVue.set(state.collection, payload.id, this.getElementState());\n\n\t\treturn true;\n\t}\n\n\tgetSaveUserList()\n\t{\n\t\tif (!this.db)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!this.store.getters['messages/getSaveUserList'])\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tlet list = this.store.getters['messages/getSaveUserList']();\n\t\tif (!list)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 250;\n\t}\n\n\tsaveState(state)\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet list = this.getSaveUserList();\n\t\t\tif (!list)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t};\n\n\t\t\tlet exceptionList = {\n\t\t\t\tabsent: true,\n\t\t\t\tidle: true,\n\t\t\t\tmobileLastDate: true,\n\t\t\t\tlastActivityDate: true,\n\t\t\t};\n\n\t\t\tfor (let chatId in list)\n\t\t\t{\n\t\t\t\tif (!list.hasOwnProperty(chatId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlist[chatId].forEach(userId =>\n\t\t\t\t{\n\t\t\t\t\tif (!state.collection[userId])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tstoredState.collection[userId] = this.cloneState(state.collection[userId], exceptionList);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.id === \"number\" || typeof fields.id === \"string\")\n\t\t{\n\t\t\tresult.id = parseInt(fields.id);\n\t\t}\n\n\t\tif (typeof fields.first_name !== \"undefined\")\n\t\t{\n\t\t\tfields.firstName = Utils.text.htmlspecialcharsback(fields.first_name);\n\t\t}\n\t\tif (typeof fields.last_name !== \"undefined\")\n\t\t{\n\t\t\tfields.lastName = Utils.text.htmlspecialcharsback(fields.last_name);\n\t\t}\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tfields.name = Utils.text.htmlspecialcharsback(fields.name.toString());\n\t\t\tresult.name = fields.name;\n\n\t\t\tif (\n\t\t\t\ttypeof fields.firstName === \"undefined\"\n\t\t\t\t|| typeof fields.firstName !== \"undefined\" && !fields.firstName\n\t\t\t)\n\t\t\t{\n\t\t\t\tlet elementsOfName = fields.name.split(' ');\n\t\t\t\tif (elementsOfName.length > 1)\n\t\t\t\t{\n\t\t\t\t\tdelete elementsOfName[elementsOfName.length-1];\n\t\t\t\t\tfields.firstName = elementsOfName.join(' ').trim();\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfields.firstName = result.name;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\ttypeof fields.lastName === \"undefined\"\n\t\t\t\t|| typeof fields.lastName !== \"undefined\" && !fields.lastName)\n\t\t\t{\n\t\t\t\tlet elementsOfName = fields.name.split(' ');\n\t\t\t\tif (elementsOfName.length > 1)\n\t\t\t\t{\n\t\t\t\t\tfields.lastName = elementsOfName[elementsOfName.length-1];\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tfields.lastName = '';\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.firstName === \"string\" || typeof fields.firstName === \"number\")\n\t\t{\n\t\t\tresult.firstName = Utils.text.htmlspecialcharsback(fields.firstName.toString());\n\t\t}\n\t\tif (typeof fields.lastName === \"string\" || typeof fields.lastName === \"number\")\n\t\t{\n\t\t\tresult.lastName = Utils.text.htmlspecialcharsback(fields.lastName.toString());\n\t\t}\n\n\t\tif (typeof fields.work_position !== \"undefined\")\n\t\t{\n\t\t\tfields.workPosition = fields.work_position;\n\t\t}\n\t\tif (typeof fields.workPosition === \"string\" || typeof fields.workPosition === \"number\")\n\t\t{\n\t\t\tresult.workPosition = fields.workPosition.toString();\n\t\t}\n\n\t\tif (typeof fields.color === \"string\")\n\t\t{\n\t\t\tresult.color = fields.color;\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tlet avatar;\n\n\t\t\tif (!fields.avatar || fields.avatar.endsWith('/js/im/images/blank.gif'))\n\t\t\t{\n\t\t\t\tavatar = '';\n\t\t\t}\n\t\t\telse if (fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tavatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatar = options.host + fields.avatar;\n\t\t\t}\n\n\t\t\tif (avatar)\n\t\t\t{\n\t\t\t\tresult.avatar = encodeURI(avatar);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.gender !== 'undefined')\n\t\t{\n\t\t\tresult.gender = fields.gender === 'F'? 'F': 'M';\n\t\t}\n\n\t\tif (typeof fields.birthday === \"string\")\n\t\t{\n\t\t\tresult.birthday = fields.birthday;\n\t\t}\n\n\t\tif (typeof fields.extranet === \"boolean\")\n\t\t{\n\t\t\tresult.extranet = fields.extranet;\n\t\t}\n\n\t\tif (typeof fields.network === \"boolean\")\n\t\t{\n\t\t\tresult.network = fields.network;\n\t\t}\n\n\t\tif (typeof fields.bot === \"boolean\")\n\t\t{\n\t\t\tresult.bot = fields.bot;\n\t\t}\n\n\t\tif (typeof fields.connector === \"boolean\")\n\t\t{\n\t\t\tresult.connector = fields.connector;\n\t\t}\n\n\t\tif (typeof fields.external_auth_id !== \"undefined\")\n\t\t{\n\t\t\tfields.externalAuthId = fields.external_auth_id;\n\t\t}\n\t\tif (typeof fields.externalAuthId === \"string\" && fields.externalAuthId)\n\t\t{\n\t\t\tresult.externalAuthId = fields.externalAuthId;\n\t\t}\n\n\t\tif (typeof fields.status === \"string\")\n\t\t{\n\t\t\tresult.status = fields.status;\n\t\t}\n\n\t\tif (typeof fields.idle !== \"undefined\")\n\t\t{\n\t\t\tresult.idle = Utils.date.cast(fields.idle, false);\n\t\t}\n\t\tif (typeof fields.last_activity_date !== \"undefined\")\n\t\t{\n\t\t\tfields.lastActivityDate = fields.last_activity_date;\n\t\t}\n\t\tif (typeof fields.lastActivityDate !== \"undefined\")\n\t\t{\n\t\t\tresult.lastActivityDate = Utils.date.cast(fields.lastActivityDate, false);\n\t\t}\n\t\tif (typeof fields.mobile_last_date !== \"undefined\")\n\t\t{\n\t\t\tfields.mobileLastDate = fields.mobile_last_date;\n\t\t}\n\t\tif (typeof fields.mobileLastDate !== \"undefined\")\n\t\t{\n\t\t\tresult.mobileLastDate = Utils.date.cast(fields.mobileLastDate, false);\n\t\t}\n\n\t\tif (typeof fields.absent !== \"undefined\")\n\t\t{\n\t\t\tresult.absent = Utils.date.cast(fields.absent, false);\n\t\t}\n\n\t\tif (typeof fields.departments !== 'undefined')\n\t\t{\n\t\t\tresult.departments = [];\n\n\t\t\tif (fields.departments instanceof Array)\n\t\t\t{\n\t\t\t\tfields.departments.forEach(departmentId =>\n\t\t\t\t{\n\t\t\t\t\tdepartmentId = parseInt(departmentId);\n\t\t\t\t\tif (departmentId > 0)\n\t\t\t\t\t{\n\t\t\t\t\t\tresult.departments.push(departmentId);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.phones === 'object' && fields.phones)\n\t\t{\n\t\t\tresult.phones = {};\n\n\t\t\tif (typeof fields.phones.work_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.workPhone = fields.phones.work_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.workPhone === 'string' || typeof fields.phones.workPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.workPhone = fields.phones.workPhone.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.personal_mobile !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.personalMobile = fields.phones.personal_mobile;\n\t\t\t}\n\t\t\tif (typeof fields.phones.personalMobile === 'string' || typeof fields.phones.personalMobile === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.personalMobile = fields.phones.personalMobile.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.personal_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.personalPhone = fields.phones.personal_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.personalPhone === 'string' || typeof fields.phones.personalPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.personalPhone = fields.phones.personalPhone.toString();\n\t\t\t}\n\n\t\t\tif (typeof fields.phones.inner_phone !== \"undefined\")\n\t\t\t{\n\t\t\t\tfields.phones.innerPhone = fields.phones.inner_phone;\n\t\t\t}\n\t\t\tif (typeof fields.phones.innerPhone === 'string' || typeof fields.phones.innerPhone === 'number')\n\t\t\t{\n\t\t\t\tresult.phones.innerPhone = fields.phones.innerPhone.toString();\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\taddToOnlineList(state, id)\n\t{\n\t\tif (!state.onlineList.includes(id))\n\t\t{\n\t\t\tstate.onlineList.push(id);\n\t\t}\n\t}\n\n\taddToMobileOnlineList(state, id)\n\t{\n\t\tif (!state.mobileOnlineList.includes(id))\n\t\t{\n\t\t\tstate.mobileOnlineList.push(id);\n\t\t}\n\t}\n\n\taddToAbsentList(state, id)\n\t{\n\t\tif (!state.absentList.includes(id))\n\t\t{\n\t\t\tstate.absentList.push(id);\n\t\t}\n\t}\n\n\tgetTimeToNextMidnight()\n\t{\n\t\tlet nextMidnight = new Date(new Date().setHours(24,0,0)).getTime();\n\t\treturn nextMidnight - new Date();\n\t}\n\n\tstartAbsentCheckInterval(state)\n\t{\n\t\tfor (let userId of state.absentList)\n\t\t{\n\t\t\tlet user = state.collection[userId];\n\n\t\t\tif (!user)\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tlet currentTime = new Date().getTime();\n\t\t\tlet absentEnd = new Date(state.collection[userId].absent).getTime();\n\n\t\t\tif (absentEnd <= currentTime)\n\t\t\t{\n\t\t\t\tstate.absentList = state.absentList.filter(element => {\n\t\t\t\t\treturn element !== userId;\n\t\t\t\t});\n\t\t\t\tuser.isAbsent = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tstartOnlineCheckInterval()\n\t{\n\t\tconst intervalTime = 60000;\n\n\t\tsetInterval(() => {\n\t\t\tfor (let userId of this.store.state.users.onlineList)\n\t\t\t{\n\t\t\t\tlet user = this.store.state.users.collection[userId];\n\n\t\t\t\tif (!user)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet status = Utils.user.getOnlineStatus(user);\n\t\t\t\tif (status.isOnline)\n\t\t\t\t{\n\t\t\t\t\tuser.isOnline = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tuser.isOnline = false;\n\t\t\t\t\tthis.store.state.users.onlineList = this.store.state.users.onlineList.filter(element => {\n\t\t\t\t\t\treturn element !== userId\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let userId of this.store.state.users.mobileOnlineList)\n\t\t\t{\n\t\t\t\tlet user = this.store.state.users.collection[userId];\n\n\t\t\t\tif (!user)\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlet mobileStatus = Utils.user.isMobileActive(user);\n\t\t\t\tif (mobileStatus)\n\t\t\t\t{\n\t\t\t\t\tuser.isMobileOnline = true;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tuser.isMobileOnline = false;\n\t\t\t\t\tthis.store.state.users.mobileOnlineList = this.store.state.users.mobileOnlineList.filter(element => {\n\t\t\t\t\t\treturn element !== userId\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}, intervalTime);\n\t}\n}","/**\n * Bitrix Messenger\n * Files model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\n\nimport {Vue} from 'ui.vue';\nimport {VuexBuilderModel} from 'ui.vue.vuex';\nimport {FileStatus, FileType, MutationType} from 'im.const';\nimport {Utils} from \"im.lib.utils\";\n\nexport class FilesModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'files';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\tcreated: 0,\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {},\n\t\t\tindex: {},\n\t\t}\n\t}\n\n\tgetElementState(params = {})\n\t{\n\t\tlet {\n\t\t\tid = 0,\n\t\t\tchatId = 0,\n\t\t\tname = this.getVariable('default.name', ''),\n\t\t} = params;\n\n\t\treturn {\n\t\t\tid,\n\t\t\tchatId,\n\t\t\tname,\n\t\t\ttemplateId: id,\n\t\t\tdate: new Date(),\n\t\t\ttype: 'file',\n\t\t\textension: \"\",\n\t\t\ticon: \"empty\",\n\t\t\tsize: 0,\n\t\t\timage: false,\n\t\t\tstatus: FileStatus.done,\n\t\t\tprogress: 100,\n\t\t\tauthorId: 0,\n\t\t\tauthorName: \"\",\n\t\t\turlPreview: \"\",\n\t\t\turlShow: \"\",\n\t\t\turlDownload: \"\",\n\t\t\tinit: false\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => (chatId, fileId, getTemporary = false) =>\n\t\t\t{\n\t\t\t\tif (!chatId || !fileId)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (!state.index[chatId] || !state.index[chatId][fileId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (!getTemporary && !state.index[chatId][fileId].init)\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.index[chatId][fileId];\n\t\t\t},\n\t\t\tgetList: state => chatId =>\n\t\t\t{\n\t\t\t\tif (!state.index[chatId])\n\t\t\t\t{\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn state.index[chatId];\n\t\t\t},\n\t\t\tgetBlank: state => params =>\n\t\t\t{\n\t\t\t\treturn this.getElementState(params);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tadd: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\tresult.id = 'temporary' + (new Date).getTime() + store.state.created;\n\t\t\t\tresult.templateId = result.id;\n\t\t\t\tresult.init = true;\n\n\t\t\t\tstore.commit('add', Object.assign({}, this.getElementState(), result));\n\n\t\t\t\treturn result.id;\n\t\t\t},\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(file => {\n\t\t\t\t\t\tlet result = this.validate(Object.assign({}, file), {host: store.state.host});\n\t\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\t\treturn Object.assign({}, this.getElementState(), result, {init: true});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\tpayload = [];\n\t\t\t\t\tpayload.push(\n\t\t\t\t\t\tObject.assign({}, this.getElementState(), result, {init: true})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tinsertType : MutationType.setAfter,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tsetBefore: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (payload instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload = payload.map(file => {\n\t\t\t\t\t\tlet result = this.validate(Object.assign({}, file), {host: store.state.host});\n\t\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\t\treturn Object.assign({}, this.getElementState(), result, {init: true});\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tlet result = this.validate(Object.assign({}, payload), {host: store.state.host});\n\t\t\t\t\tresult.templateId = result.id;\n\t\t\t\t\tpayload = [];\n\t\t\t\t\tpayload.push(\n\t\t\t\t\t\tObject.assign({}, this.getElementState(), result, {init: true})\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', {\n\t\t\t\t\tactionName: 'setBefore',\n\t\t\t\t\tinsertType : MutationType.setBefore,\n\t\t\t\t\tdata : payload\n\t\t\t\t});\n\t\t\t},\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = this.validate(Object.assign({}, payload.fields), {host: store.state.host});\n\n\t\t\t\tstore.commit('initCollection', {chatId: payload.chatId});\n\n\t\t\t\tlet index = store.state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\tif (index < 0)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\tindex : index,\n\t\t\t\t\tfields : result\n\t\t\t\t});\n\n\t\t\t\tif (payload.fields.blink)\n\t\t\t\t{\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tid : payload.id ,\n\t\t\t\t\t\t\tchatId : payload.chatId,\n\t\t\t\t\t\t\tfields : {blink: false}\n\t\t\t\t\t\t});\n\t\t\t\t\t}, 1000);\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('delete', {\n\t\t\t\t\tid : payload.id,\n\t\t\t\t\tchatId : payload.chatId\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t\tsaveState: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.commit('saveState', {});\n\t\t\t\treturn true;\n\t\t\t},\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tinitCollection: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\t\t\t},\n\t\t\tadd: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.chatId].push(payload);\n\t\t\t\tstate.index[payload.chatId][payload.id] = payload;\n\n\t\t\t\tstate.created += 1;\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tset: (state, payload) =>\n\t\t\t{\n\t\t\t\tfor (let element of payload.data)\n\t\t\t\t{\n\t\t\t\t\tthis.initCollection(state, {chatId: element.chatId});\n\n\t\t\t\t\tlet index = state.collection[element.chatId].findIndex(el => el.id === element.id);\n\t\t\t\t\tif (index > -1)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelete element.templateId;\n\t\t\t\t\t\tstate.collection[element.chatId][index] = Object.assign(state.collection[element.chatId][index], element);\n\t\t\t\t\t}\n\t\t\t\t\telse if (payload.insertType === MutationType.setBefore)\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].unshift(element);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstate.collection[element.chatId].push(element);\n\t\t\t\t\t}\n\n\t\t\t\t\tstate.index[element.chatId][element.id] = element;\n\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tupdate: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tlet index = -1;\n\t\t\t\tif (typeof payload.index !== 'undefined' && state.collection[payload.chatId][payload.index])\n\t\t\t\t{\n\t\t\t\t\tindex = payload.index;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tindex = state.collection[payload.chatId].findIndex(el => el.id === payload.id);\n\t\t\t\t}\n\n\t\t\t\tif (index >= 0)\n\t\t\t\t{\n\t\t\t\t\tdelete payload.fields.templateId;\n\t\t\t\t\tlet element = Object.assign(\n\t\t\t\t\t\tstate.collection[payload.chatId][index],\n\t\t\t\t\t\tpayload.fields\n\t\t\t\t\t);\n\t\t\t\t\tstate.collection[payload.chatId][index] = element;\n\t\t\t\t\tstate.index[payload.chatId][element.id] = element;\n\n\t\t\t\t\tthis.saveState(state);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.initCollection(state, payload);\n\n\t\t\t\tstate.collection[payload.chatId] = state.collection[payload.chatId].filter(element => element.id !== payload.id);\n\t\t\t\tdelete state.index[payload.chatId][payload.id];\n\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t\tsaveState: (state, payload) =>\n\t\t\t{\n\t\t\t\tthis.saveState(state);\n\t\t\t},\n\t\t}\n\t}\n\n\tinitCollection(state, payload)\n\t{\n\t\tif (typeof state.collection[payload.chatId] !== 'undefined')\n\t\t{\n\t\t\treturn true;\n\t\t}\n\n\t\tVue.set(state.collection, payload.chatId, []);\n\t\tVue.set(state.index, payload.chatId, {});\n\n\t\treturn true;\n\t}\n\n\tgetLoadedState(state)\n\t{\n\t\tif (!state || typeof state !== 'object')\n\t\t{\n\t\t\treturn state;\n\t\t}\n\n\t\tif (typeof state.collection !== 'object')\n\t\t{\n\t\t\treturn state;\n\t\t}\n\n\t\tstate.index = {};\n\n\t\tfor (let chatId in state.collection)\n\t\t{\n\t\t\tif (!state.collection.hasOwnProperty(chatId))\n\t\t\t{\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tstate.index[chatId] = {};\n\n\t\t\tstate.collection[chatId]\n\t\t\t\t.filter(file => file != null)\n\t\t\t\t.forEach(file => {\n\t\t\t\t\tstate.index[chatId][file.id] = file;\n\t\t\t});\n\t\t}\n\n\t\treturn state;\n\t}\n\n\tgetSaveFileList()\n\t{\n\t\tif (!this.db)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!this.store.getters['messages/getSaveFileList'])\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\tlet list = this.store.getters['messages/getSaveFileList']();\n\t\tif (!list)\n\t\t{\n\t\t\treturn [];\n\t\t}\n\n\t\treturn list;\n\t}\n\n\tgetSaveTimeout()\n\t{\n\t\treturn 250;\n\t}\n\n\tsaveState(state)\n\t{\n\t\tif (!this.isSaveAvailable())\n\t\t{\n\t\t\treturn false;\n\t\t}\n\n\t\tsuper.saveState(() =>\n\t\t{\n\t\t\tlet list = this.getSaveFileList();\n\t\t\tif (!list)\n\t\t\t{\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tlet storedState = {\n\t\t\t\tcollection: {},\n\t\t\t};\n\n\t\t\tfor (let chatId in list)\n\t\t\t{\n\t\t\t\tif (!list.hasOwnProperty(chatId))\n\t\t\t\t{\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tlist[chatId].forEach(fileId =>\n\t\t\t\t{\n\t\t\t\t\tif (!state.index[chatId])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!state.index[chatId][fileId])\n\t\t\t\t\t{\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!storedState.collection[chatId])\n\t\t\t\t\t{\n\t\t\t\t\t\tstoredState.collection[chatId] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\tstoredState.collection[chatId].push(\n\t\t\t\t\t\tstate.index[chatId][fileId]\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn storedState;\n\t\t});\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\toptions.host = options.host || this.getState().host;\n\n\t\tif (typeof fields.id === \"number\")\n\t\t{\n\t\t\tresult.id = fields.id;\n\t\t}\n\t\telse if (typeof fields.id === \"string\")\n\t\t{\n\t\t\tif (fields.id.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.id = fields.id;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.id = parseInt(fields.id);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.templateId === \"number\")\n\t\t{\n\t\t\tresult.templateId = fields.templateId;\n\t\t}\n\t\telse if (typeof fields.templateId === \"string\")\n\t\t{\n\t\t\tif (fields.templateId.startsWith('temporary'))\n\t\t\t{\n\t\t\t\tresult.templateId = fields.templateId;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.templateId = parseInt(fields.templateId);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.chatId === \"number\" || typeof fields.chatId === \"string\")\n\t\t{\n\t\t\tresult.chatId = parseInt(fields.chatId);\n\t\t}\n\n\t\tif (typeof fields.date !== \"undefined\")\n\t\t{\n\t\t\tresult.date = Utils.date.cast(fields.date);\n\t\t}\n\n\t\tif (typeof fields.type === \"string\")\n\t\t{\n\t\t\tresult.type = fields.type;\n\t\t}\n\n\t\tif (typeof fields.extension === \"string\")\n\t\t{\n\t\t\tresult.extension = fields.extension.toString();\n\n\t\t\tif (result.type === 'image')\n\t\t\t{\n\t\t\t\tresult.icon = 'img';\n\t\t\t}\n\t\t\telse if (result.type === 'video')\n\t\t\t{\n\t\t\t\tresult.icon = 'mov';\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.icon = FilesModel.getIconType(result.extension);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.name === \"string\" || typeof fields.name === \"number\")\n\t\t{\n\t\t\tresult.name = fields.name.toString();\n\t\t}\n\n\n\t\tif (typeof fields.size === \"number\" || typeof fields.size === \"string\")\n\t\t{\n\t\t\tresult.size = parseInt(fields.size);\n\t\t}\n\n\t\tif (typeof fields.image === 'boolean')\n\t\t{\n\t\t\tresult.image = false;\n\t\t}\n\t\telse if (typeof fields.image === 'object' && fields.image)\n\t\t{\n\t\t\tresult.image = {\n\t\t\t\twidth: 0,\n\t\t\t\theight: 0,\n\t\t\t};\n\n\t\t\tif (typeof fields.image.width === \"string\" || typeof fields.image.width === \"number\")\n\t\t\t{\n\t\t\t\tresult.image.width = parseInt(fields.image.width);\n\t\t\t}\n\t\t\tif (typeof fields.image.height === \"string\" || typeof fields.image.height === \"number\")\n\t\t\t{\n\t\t\t\tresult.image.height = parseInt(fields.image.height);\n\t\t\t}\n\n\t\t\tif (result.image.width <= 0 || result.image.height <= 0)\n\t\t\t{\n\t\t\t\tresult.image = false;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.status === \"string\" && typeof FileStatus[fields.status] !== 'undefined')\n\t\t{\n\t\t\tresult.status = fields.status;\n\t\t}\n\n\t\tif (typeof fields.progress === \"number\" || typeof fields.progress === \"string\")\n\t\t{\n\t\t\tresult.progress = parseInt(fields.progress);\n\t\t}\n\n\t\tif (typeof fields.authorId === \"number\" || typeof fields.authorId === \"string\")\n\t\t{\n\t\t\tresult.authorId = parseInt(fields.authorId);\n\t\t}\n\n\t\tif (typeof fields.authorName === \"string\" || typeof fields.authorName === \"number\")\n\t\t{\n\t\t\tresult.authorName = fields.authorName.toString();\n\t\t}\n\n\t\tif (typeof fields.urlPreview === 'string')\n\t\t{\n\t\t\tif (\n\t\t\t\t!fields.urlPreview\n\t\t\t\t|| fields.urlPreview.startsWith('http')\n\t\t\t\t|| fields.urlPreview.startsWith('bx')\n\t\t\t\t|| fields.urlPreview.startsWith('file')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.urlPreview = fields.urlPreview;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlPreview = options.host+fields.urlPreview;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.urlDownload === 'string')\n\t\t{\n\t\t\tif (\n\t\t\t\t!fields.urlDownload\n\t\t\t\t|| fields.urlDownload.startsWith('http')\n\t\t\t\t|| fields.urlDownload.startsWith('bx')\n\t\t\t\t|| fields.urlPreview.startsWith('file')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.urlDownload = fields.urlDownload;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlDownload = options.host+fields.urlDownload;\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.urlShow === 'string')\n\t\t{\n\t\t\tif (\n\t\t\t\t!fields.urlShow\n\t\t\t\t|| fields.urlShow.startsWith('http')\n\t\t\t\t|| fields.urlShow.startsWith('bx')\n\t\t\t\t|| fields.urlShow.startsWith('file')\n\t\t\t)\n\t\t\t{\n\t\t\t\tresult.urlShow = fields.urlShow;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tresult.urlShow = options.host+fields.urlShow;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tstatic getType(type)\n\t{\n\t\ttype = type.toString().toLowerCase().split('.').splice(-1)[0];\n\n\t\tswitch(type)\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\tcase 'webp':\n\t\t\t\treturn FileType.image;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\treturn FileType.video;\n\n\t\t\tcase 'mp3':\n\t\t\t\treturn FileType.audio;\n\t\t}\n\n\t\treturn FileType.file\n\t}\n\n\tstatic getIconType(extension)\n\t{\n\t\tlet icon = 'empty';\n\n\t\tswitch(extension.toString())\n\t\t{\n\t\t\tcase 'png':\n\t\t\tcase 'jpe':\n\t\t\tcase 'jpg':\n\t\t\tcase 'jpeg':\n\t\t\tcase 'gif':\n\t\t\tcase 'heic':\n\t\t\tcase 'bmp':\n\t\t\tcase 'webp':\n\t\t\t\ticon = 'img';\n\t\t\t\tbreak;\n\n\t\t\tcase 'mp4':\n\t\t\tcase 'mkv':\n\t\t\tcase 'webm':\n\t\t\tcase 'mpeg':\n\t\t\tcase 'hevc':\n\t\t\tcase 'avi':\n\t\t\tcase '3gp':\n\t\t\tcase 'flv':\n\t\t\tcase 'm4v':\n\t\t\tcase 'ogg':\n\t\t\tcase 'wmv':\n\t\t\tcase 'mov':\n\t\t\t\ticon = 'mov';\n\t\t\t\tbreak;\n\n\t\t\tcase 'txt':\n\t\t\t\ticon = 'txt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'doc':\n\t\t\tcase 'docx':\n\t\t\t\ticon = 'doc';\n\t\t\t\tbreak;\n\n\t\t\tcase 'xls':\n\t\t\tcase 'xlsx':\n\t\t\t\ticon = 'xls';\n\t\t\t\tbreak;\n\n\t\t\tcase 'php':\n\t\t\t\ticon = 'php';\n\t\t\t\tbreak;\n\n\t\t\tcase 'pdf':\n\t\t\t\ticon = 'pdf';\n\t\t\t\tbreak;\n\n\t\t\tcase 'ppt':\n\t\t\tcase 'pptx':\n\t\t\t\ticon = 'ppt';\n\t\t\t\tbreak;\n\n\t\t\tcase 'rar':\n\t\t\t\ticon = 'rar';\n\t\t\t\tbreak;\n\n\t\t\tcase 'zip':\n\t\t\tcase '7z':\n\t\t\tcase 'tar':\n\t\t\tcase 'gz':\n\t\t\tcase 'gzip':\n\t\t\t\ticon = 'zip';\n\t\t\t\tbreak;\n\n\t\t\tcase 'set':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\n\t\t\tcase 'conf':\n\t\t\tcase 'ini':\n\t\t\tcase 'plist':\n\t\t\t\ticon = 'set';\n\t\t\t\tbreak;\n\t\t}\n\n\t\treturn icon;\n\t}\n}","/**\n * Bitrix Messenger\n * Recent model (Vuex Builder model)\n *\n * @package bitrix\n * @subpackage im\n * @copyright 2001-2020 Bitrix\n */\n\nimport {VuexBuilderModel} from 'ui.vue.vuex';\n\nexport class RecentModel extends VuexBuilderModel\n{\n\tgetName()\n\t{\n\t\treturn 'recent';\n\t}\n\n\tgetState()\n\t{\n\t\treturn {\n\t\t\thost: this.getVariable('host', location.protocol+'//'+location.host),\n\t\t\tcollection: {\n\t\t\t\tpinned: [],\n\t\t\t\tgeneral: []\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElementState(params = {})\n\t{\n\t\treturn {\n\t\t\tid: 0,\n\t\t\ttemplateId: '',\n\t\t\ttemplate: 'item',\n\t\t\tchatType: 'chat',\n\t\t\tsectionCode: 'general',\n\t\t\tavatar: '',\n\t\t\tcolor: '#048bd0',\n\t\t\ttitle: '',\n\t\t\tmessage: {\n\t\t\t\tid: 0,\n\t\t\t\ttext: '',\n\t\t\t\tdate: new Date()\n\t\t\t},\n\t\t\tcounter: 0,\n\t\t\tpinned: false,\n\t\t\tchatId: 0,\n\t\t\tuserId: 0\n\t\t};\n\t}\n\n\tgetGetters()\n\t{\n\t\treturn {\n\t\t\tget: state => dialogId =>\n\t\t\t{\n\t\t\t\treturn this.findItem(state.collection, dialogId);\n\t\t\t}\n\t\t};\n\t}\n\n\tgetActions()\n\t{\n\t\treturn {\n\t\t\tset: (store, payload) =>\n\t\t\t{\n\t\t\t\tlet result = {};\n\n\t\t\t\tif (payload.pinned instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tresult.pinned = payload.pinned.map(\n\t\t\t\t\t\trecentItem => this.prepareItem(recentItem, { host: store.state.host, sectionCode: 'pinned' })\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if (typeof payload.pinned !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tlet pinned = [];\n\t\t\t\t\tpinned.push(this.prepareItem(payload.pinned, { host: store.state.host, sectionCode: 'pinned' }));\n\n\t\t\t\t\tresult.pinned = pinned;\n\t\t\t\t}\n\n\t\t\t\tif (payload.general instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tresult.general = payload.general.map(\n\t\t\t\t\t\trecentItem => this.prepareItem(recentItem, { host: store.state.host })\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\telse if (typeof payload.general !== 'undefined')\n\t\t\t\t{\n\t\t\t\t\tlet general = [];\n\t\t\t\t\tgeneral.push(this.prepareItem(payload.general, { host: store.state.host }));\n\n\t\t\t\t\tresult.general = general;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('set', result);\n\t\t\t},\n\n\t\t\tupdatePlaceholders: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (!(payload.items instanceof Array))\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tpayload.items = payload.items.map(element => this.prepareItem(element));\n\n\t\t\t\tpayload.items.forEach((element, index) => {\n\t\t\t\t\tlet placeholderId = 'placeholder' + (payload.firstMessage + index);\n\t\t\t\t\tlet existingPlaceholder = this.findItem(\n\t\t\t\t\t\tstore.state.collection,\n\t\t\t\t\t\tplaceholderId,\n\t\t\t\t\t\t'templateId'\n\t\t\t\t\t);\n\n\t\t\t\t\tlet existingItem = this.findItem(store.state.collection, element.id);\n\n\t\t\t\t\tif (existingItem.element)\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tindex: existingItem.index,\n\t\t\t\t\t\t\tfields: Object.assign({}, element),\n\t\t\t\t\t\t\tsection: 'general'\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tstore.commit('delete', {\n\t\t\t\t\t\t\tindex: existingPlaceholder.index,\n\t\t\t\t\t\t\tsection: 'general'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tstore.commit('update', {\n\t\t\t\t\t\t\tindex: existingPlaceholder.index,\n\t\t\t\t\t\t\tfields: Object.assign({}, element),\n\t\t\t\t\t\t\tsection: 'general'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tupdate: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof payload !== 'object' ||\n\t\t\t\t\tpayload instanceof Array ||\n\t\t\t\t\t!payload.id ||\n\t\t\t\t\t!payload.fields\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (typeof payload.id === 'string' && !payload.id.startsWith('chat') && payload.id !== 'notify')\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\n\t\t\t\tlet existingItem = this.findItem(store.state.collection, payload.id);\n\n\t\t\t\tif (!existingItem.element)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('update', {\n\t\t\t\t\tindex: existingItem.index,\n\t\t\t\t\tfields: Object.assign({}, this.validate(payload.fields)),\n\t\t\t\t\tsection: existingItem.element.sectionCode\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tpin: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof payload !== 'object' ||\n\t\t\t\t\tpayload instanceof Array ||\n\t\t\t\t\t!payload.id ||\n\t\t\t\t\ttypeof payload.action !== 'boolean'\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (typeof payload.id === 'string' && !payload.id.startsWith('chat') && payload.id !== 'notify')\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\n\t\t\t\tlet existingItem = this.findItem(store.state.collection, payload.id, undefined, payload.action? 'general': 'pinned');\n\n\t\t\t\tif (!existingItem.element)\n\t\t\t\t{\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\tif (payload.action)\n\t\t\t\t{\n\t\t\t\t\tstore.state.collection.pinned.push(\n\t\t\t\t\t\tObject.assign({}, existingItem.element, {\n\t\t\t\t\t\t\tsectionCode: 'pinned',\n\t\t\t\t\t\t\tpinned: true\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tstore.state.collection.pinned.sort(this.sortListByMessageDate);\n\n\t\t\t\t\tstore.commit('delete', {\n\t\t\t\t\t\tindex: existingItem.index,\n\t\t\t\t\t\tsection: 'general'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\tstore.state.collection.general.push(\n\t\t\t\t\t\tObject.assign({}, existingItem.element, {\n\t\t\t\t\t\t\tsectionCode: 'general',\n\t\t\t\t\t\t\tpinned: false\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t\tstore.state.collection.general.sort(this.sortListByMessageDate);\n\n\t\t\t\t\tstore.commit('delete', {\n\t\t\t\t\t\tindex: existingItem.index,\n\t\t\t\t\t\tsection: 'pinned'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tclearPlaceholders: (store, payload) =>\n\t\t\t{\n\t\t\t\tstore.state.collection.general = store.state.collection.general.filter(element => {\n\t\t\t\t\treturn !element.id.toString().startsWith('placeholder');\n\t\t\t\t});\n\t\t\t},\n\n\t\t\tdelete: (store, payload) =>\n\t\t\t{\n\t\t\t\tif (\n\t\t\t\t\ttypeof payload !== 'object' ||\n\t\t\t\t\tpayload instanceof Array ||\n\t\t\t\t\t!payload.id\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (typeof payload.id === 'string' && !payload.id.startsWith('chat') && payload.id !== 'notify')\n\t\t\t\t{\n\t\t\t\t\tpayload.id = parseInt(payload.id);\n\t\t\t\t}\n\n\t\t\t\tlet existingItem = this.findItem(store.state.collection, payload.id);\n\n\t\t\t\tif (!existingItem.element)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstore.commit('delete', {\n\t\t\t\t\tindex: existingItem.index,\n\t\t\t\t\tsection: existingItem.element.sectionCode\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tgetMutations()\n\t{\n\t\treturn {\n\t\t\tset: (state, payload) => {\n\t\t\t\tif (payload.general instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload.general.forEach(element => {\n\t\t\t\t\t\tlet {index, alreadyExists} = this.initCollection(state, element, 'general');\n\n\t\t\t\t\t\tif (alreadyExists)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection.general[index] = Object.assign(\n\t\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t\tstate.collection.general[index],\n\t\t\t\t\t\t\t\telement\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (payload.pinned instanceof Array)\n\t\t\t\t{\n\t\t\t\t\tpayload.pinned.forEach(element => {\n\t\t\t\t\t\tlet {index, alreadyExists} = this.initCollection(state, element, 'pinned');\n\t\t\t\t\t\tif (alreadyExists)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tstate.collection.pinned[index] = Object.assign(\n\t\t\t\t\t\t\t\t{},\n\t\t\t\t\t\t\t\tstate.collection.pinned[index],\n\t\t\t\t\t\t\t\telement\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tupdate: (state, payload) => {\n\t\t\t\tif (\n\t\t\t\t\t!payload ||\n\t\t\t\t\tpayload instanceof Array ||\n\t\t\t\t\ttypeof payload.fields !== 'object' ||\n\t\t\t\t\ttypeof payload.index !== 'number' ||\n\t\t\t\t\ttypeof payload.section !== 'string'\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstate.collection[payload.section][payload.index] = Object.assign(\n\t\t\t\t\t{},\n\t\t\t\t\tstate.collection[payload.section][payload.index],\n\t\t\t\t\tpayload.fields\n\t\t\t\t);\n\n\t\t\t\tstate.collection[payload.section].sort(this.sortListByMessageDate);\n\t\t\t},\n\n\t\t\tdelete: (state, payload) => {\n\t\t\t\tif (\n\t\t\t\t\t!payload ||\n\t\t\t\t\tpayload instanceof Array ||\n\t\t\t\t\ttypeof payload.index !== 'number' ||\n\t\t\t\t\ttypeof payload.section !== 'string'\n\t\t\t\t)\n\t\t\t\t{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tstate.collection[payload.section].splice(payload.index, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tinitCollection(state, payload, section)\n\t{\n\t\tlet existingItem = this.findItem(state.collection, payload.id, undefined, section);\n\n\t\tif (existingItem.element)\n\t\t{\n\t\t\treturn {index: existingItem.index, alreadyExists: true};\n\t\t}\n\n\t\tlet newLength = state.collection[section].push(Object.assign(\n\t\t\t{},\n\t\t\tthis.getElementState(),\n\t\t\tpayload\n\t\t));\n\n\t\treturn {index: newLength - 1, alreadyExists: false};\n\t}\n\n\tvalidate(fields, options = {})\n\t{\n\t\tconst result = {};\n\n\t\tif (typeof fields.id === \"number\" || typeof fields.id === \"string\")\n\t\t{\n\t\t\tresult.id = fields.id;\n\t\t}\n\n\t\tif (typeof fields.templateId === 'string')\n\t\t{\n\t\t\tresult.templateId = fields.templateId;\n\t\t}\n\n\t\tif (typeof fields.template === 'string')\n\t\t{\n\t\t\tresult.template = fields.template;\n\t\t}\n\n\t\tif (typeof fields.type === \"string\")\n\t\t{\n\t\t\tif (fields.type === 'chat')\n\t\t\t{\n\t\t\t\tif (fields.chat.type === 'open')\n\t\t\t\t{\n\t\t\t\t\tresult.chatType = 'open';\n\t\t\t\t}\n\t\t\t\telse if (fields.chat.type === 'chat')\n\t\t\t\t{\n\t\t\t\t\tresult.chatType = 'chat';\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (fields.type === 'user')\n\t\t\t{\n\t\t\t\tresult.chatType = 'user';\n\t\t\t}\n\t\t\telse if (fields.type === 'notification')\n\t\t\t{\n\t\t\t\tresult.chatType = 'notification';\n\t\t\t\tfields.title = 'Notifications';\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.avatar === 'string')\n\t\t{\n\t\t\tlet avatar;\n\n\t\t\tif (!fields.avatar || fields.avatar.endsWith('/js/im/images/blank.gif'))\n\t\t\t{\n\t\t\t\tavatar = '';\n\t\t\t}\n\t\t\telse if (fields.avatar.startsWith('http'))\n\t\t\t{\n\t\t\t\tavatar = fields.avatar;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tavatar = options.host + fields.avatar;\n\t\t\t}\n\n\t\t\tif (avatar)\n\t\t\t{\n\t\t\t\tresult.avatar = encodeURI(avatar);\n\t\t\t}\n\t\t}\n\n\t\tif (typeof fields.color === 'string')\n\t\t{\n\t\t\tresult.color = fields.color;\n\t\t}\n\n\t\tif (typeof fields.title === \"string\")\n\t\t{\n\t\t\tresult.title = fields.title;\n\t\t}\n\n\t\tif (\n\t\t\ttypeof fields.message === \"object\" &&\n\t\t\t!(fields.message instanceof Array) &&\n\t\t\tfields.message !== null)\n\t\t{\n\t\t\tresult.message = fields.message;\n\t\t}\n\n\t\tif (typeof fields.counter === 'number')\n\t\t{\n\t\t\tresult.counter = fields.counter;\n\t\t}\n\n\t\tif (typeof fields.pinned === 'boolean')\n\t\t{\n\t\t\tresult.pinned = fields.pinned;\n\t\t}\n\n\t\tif (typeof fields.chatId === 'number')\n\t\t{\n\t\t\tresult.chatId = fields.chatId;\n\t\t}\n\n\t\tif (typeof fields.userId === 'number')\n\t\t{\n\t\t\tresult.userId = fields.userId;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tsortListByMessageDate(a, b)\n\t{\n\t\tif (a.message && b.message)\n\t\t{\n\t\t\tlet timestampA = new Date(a.message.date).getTime();\n\t\t\tlet timestampB = new Date(b.message.date).getTime();\n\n\t\t\treturn timestampB - timestampA;\n\t\t}\n\t}\n\n\tprepareItem(item, options = {})\n\t{\n\t\tlet result = this.validate(Object.assign({}, item));\n\n\t\treturn Object.assign({}, this.getElementState(), result, options);\n\t}\n\n\tfindItem(store, value, key = 'id', section = 'general')\n\t{\n\t\tlet result = {};\n\t\tif (typeof store[section] === undefined)\n\t\t{\n\t\t\treturn result;\n\t\t}\n\n\t\tlet elementIndex = store[section].findIndex((element, index) => {\n\t\t\treturn element[key] === value;\n\t\t});\n\n\t\tif (elementIndex !== -1)\n\t\t{\n\t\t\tresult.index = elementIndex;\n\t\t\tresult.element = store[section][elementIndex];\n\n\t\t\treturn result;\n\t\t}\n\n\t\treturn result;\n\t}\n}"],"names":["ApplicationModel","common","host","getVariable","location","protocol","siteId","userId","languageId","dialog","dialogId","chatId","diskFolderId","messageLimit","enableReadMessages","messageExtraCount","disk","enabled","maxFileSize","mobile","keyboardShow","device","type","DeviceType","desktop","orientation","DeviceOrientation","portrait","options","quoteEnable","quoteFromRight","autoplayVideo","darkBackground","showSmiles","error","active","code","description","Object","assign","set","store","payload","commit","validate","hideSmiles","state","hasChange","group","hasOwnProperty","field","isSaveNeeded","saveState","increaseDialogExtraCount","count","decreaseDialogExtraCount","newCounter","clearDialogExtraCount","fields","result","toString","startsWith","substr","parseInt","isNaN","VuexBuilderModel","CallApplicationModel","inited","showChat","userCount","userInCallCount","CallStateType","preparation","componentError","callError","user","id","hash","startCall","call","endCall","returnToPreparation","setCallError","errorCode","setComponentError","toggleSmiles","IntersectionType","empty","equal","none","found","foundReverse","MessagesModel","created","collection","mutationType","saveMessageList","saveFileList","saveUserList","templateId","templateType","authorId","date","Date","text","textConverted","params","TYPE","COMPONENT_ID","push","unread","sending","retry","blink","getMutationType","initialType","MutationType","appliedType","getLastId","length","lastId","i","element","getMessage","messageId","index","get","getBlank","getElementState","getSaveFileList","getSaveUserList","add","getTime","dispatch","actionStart","test","Vue","nextTick","actionError","actionFinish","Array","map","message","prepareMessage","insertType","data","setAfter","setBefore","update","findIndex","el","setTimeout","delete","elements","clear","applyMutationType","readMessages","readId","unreadMessages","unreadId","initCollection","setMutationType","chats","chatsSave","forEach","StorageLimit","messages","filter","includes","intersection","manageCacheBeforeSet","reverse","foundElements","removeIntersectionCacheElements","clearTimeout","removeIntersectionCacheTimeout","noneElements","scrollStickToTop","scrollMessageId","unshift","getters","Set","lastElementId","needApplySort","sort","a","b","isSaveState","applied","saveNeeded","updateSubordinateStates","concat","cache","recursive","reverseResult","isSaveAvailable","slice","FILE_ID","updateSaveLists","storedState","chat_id","Utils","cast","textOriginal","convertToHtml","isConverted","text_converted","senderId","author_id","system","validateParams","BX","isComponent","like","decodeAttach","e","hasResultElements","quote","image","highlightText","enableBigSmile","trim","replace","quoteSign","indexOf","textPrepare","split","textPrepareFlag","join","decodeBbCode","whole","p1","p2","p3","p4","offset","changed","aInner","match","RegExp","doubleSmileSize","start","width","middle","height","end","textOnly","item","isArray","arrayElement","prop","htmlspecialcharsback","codeReplacement","link","tag","document","createElement","href","target","allowList","outerHTML","open","inner","close","openlines","number","htmlspecialchars","historyId","command","html","textElementSize","url","attrs","size","title","attributes","name","parentNode","innerHTML","src","DialoguesModel","saveDialogList","saveChatList","writingList","quoteId","counter","unreadLastId","managerList","readedList","textareaMessage","editId","init","owner","extranet","avatar","color","entityType","entityId","entityData1","entityData2","entityData3","dateCreate","restrictions","extend","leave","leaveOwner","rename","public","getByChatId","getQuoteId","getEditId","canSaveChat","canSaveDialog","isPrivateDialog","updateWriting","action","userName","actionName","updateReaded","increaseCounter","increasedCounter","decreaseCounter","decreasedCounter","saveDialog","dialogues","cloneState","getElementStateSaveException","getState","dialog_id","unread_id","unread_last_id","readed_list","record","user_id","user_name","message_id","writing_list","manager_list","mute_list","muteList","ownerId","endsWith","encodeURI","entity_type","entity_id","entity_data_1","entity_data_2","entity_data_3","date_create","dateLastOpen","AVATAR","EXTEND","LEAVE","LEAVE_OWNER","RENAME","UsersModel","startOnlineCheckInterval","onlineList","mobileOnlineList","absentList","firstName","lastName","workPosition","gender","birthday","isBirthday","network","bot","connector","externalAuthId","status","idle","lastActivityDate","mobileLastDate","isOnline","isMobileOnline","absent","isAbsent","departments","phones","workPhone","personalMobile","personalPhone","innerPhone","getTemporary","getOnlineStatus","addToOnlineList","mobileStatus","isMobileActive","addToMobileOnlineList","today","format","timeToNextMidnight","getTimeToNextMidnight","addToAbsentList","timeToNextDay","setInterval","startAbsentCheckInterval","newActivityDate","db","list","exceptionList","first_name","last_name","elementsOfName","work_position","external_auth_id","last_activity_date","mobile_last_date","departmentId","work_phone","personal_mobile","personal_phone","inner_phone","nextMidnight","setHours","currentTime","absentEnd","intervalTime","users","FilesModel","extension","icon","FileStatus","done","progress","authorName","urlPreview","urlShow","urlDownload","fileId","getList","file","getIconType","toLowerCase","splice","FileType","video","audio","RecentModel","pinned","general","template","chatType","sectionCode","findItem","recentItem","prepareItem","updatePlaceholders","items","placeholderId","firstMessage","existingPlaceholder","existingItem","section","pin","undefined","sortListByMessageDate","clearPlaceholders","alreadyExists","newLength","chat","timestampA","timestampB","value","key","elementIndex"],"mappings":"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"}