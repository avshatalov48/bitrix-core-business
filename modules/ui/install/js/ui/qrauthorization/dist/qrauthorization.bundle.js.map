{"version":3,"file":"qrauthorization.bundle.js","sources":["../src/index.js"],"sourcesContent":["import { ajax as Ajax, Dom, Type, Tag, Loc, Extension } from 'main.core';\nimport { Popup } from 'main.popup';\nimport { Loader } from 'main.loader';\nimport { PULL } from 'pull.client';\nimport 'main.qrcode';\nimport 'ui.icon-set.main';\nimport 'ui.design-tokens';\nimport 'ui.fonts.opensans';\n\nimport './css/style.css';\n\nexport class QrAuthorization\n{\n\ttitle;\n\tcontent;\n\tbottomText;\n\tqr;\n\tpopupParam;\n\n\tconstructor(options = {})\n\t{\n\t\tthis.title = options.title || null;\n\t\tthis.content = options.content || null;\n\t\tthis.bottomText = options.bottomText || Loc.getMessage('UI_QR_AUTHORIZE_TAKE_CODE');\n\t\tthis.showFishingWarning = options.showFishingWarning ?? false;\n\t\tthis.showBottom = options.showBottom ?? true;\n\t\tthis.helpLink = options.helpLink || null;\n\t\tthis.helpCode = options.helpCode || null;\n\t\tthis.qr = options.qr || null;\n\t\tthis.popupParam = options.popupParam || null;\n\t\tthis.intent = options.intent || 'calendar';\n\t\tthis.popup = null;\n\t\tthis.loader = null;\n\t\tthis.ttl = Extension.getSettings('ui.qrauthorization')?.ttl ?? 60;\n\t\tthis.ttlInterval = null;\n\n\t\tthis.qrNode = null;\n\t\tthis.successNode = null;\n\t\tthis.loadingNode = null;\n\n\t\tthis.isSubscribe = false;\n\t}\n\n\tcreateQrCodeImage()\n\t{\n\t\tDom.clean(this.getQrNode());\n\n\t\tif (Type.isString(this.qr))\n\t\t{\n\t\t\tthis.clean();\n\t\t\tnew QRCode(this.getQrNode(), {\n\t\t\t\ttext: this.qr,\n\t\t\t\twidth: 180,\n\t\t\t\theight: 180,\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tthis.loading();\n\t\tAjax.runAction('mobile.deeplink.get', {\n\t\t\tdata: {\n\t\t\t\tintent: this.intent,\n\t\t\t\tttl: this.ttl,\n\t\t\t},\n\t\t}).then((response) => {\n\t\t\tconst link = response.data?.link;\n\t\t\tif (link)\n\t\t\t{\n\t\t\t\tthis.clean();\n\t\t\t\tnew QRCode(this.getQrNode(), {\n\t\t\t\t\ttext: link,\n\t\t\t\t\twidth: 180,\n\t\t\t\t\theight: 180,\n\t\t\t\t});\n\n\t\t\t\tif (!this.isSubscribe)\n\t\t\t\t{\n\t\t\t\t\tthis.isSubscribe = true;\n\t\t\t\t\tthis.subscribe();\n\t\t\t\t}\n\t\t\t}\n\t\t}).catch(() => {});\n\t}\n\n\tsubscribe()\n\t{\n\t\tif (PULL)\n\t\t{\n\t\t\tPULL.subscribe({\n\t\t\t\ttype: 'BX.PullClient.SubscriptionType.Server',\n\t\t\t\tmoduleId: 'mobile',\n\t\t\t\tcommand: 'onDeeplinkShouldRefresh',\n\t\t\t\tcallback: (params) => {\n\t\t\t\t\tthis.success();\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t}\n\n\tgetQrNode(): HTMLElement\n\t{\n\t\tif (!this.qrNode)\n\t\t{\n\t\t\tthis.qrNode = Tag.render`\n\t\t\t\t<div class=\"ui-qr-authorization__popup-qr\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.qrNode;\n\t}\n\n\tgetPopup(): Popup\n\t{\n\t\tif (!this.popup)\n\t\t{\n\t\t\tconst title = Type.isObject(this.title) ? this.title?.text : this.title;\n\t\t\tconst titleSize = Type.isObject(this.title) ? this.title?.size : '';\n\n\t\t\tconst container = Tag.render`\n\t\t\t\t<div class=\"ui-qr-authorization__popup-wrapper\">\n\t\t\t\t\t<div class=\"ui-qr-authorization__popup-top ${this.content ? '' : '--direction-column'}\">\n\t\t\t\t\t\t<div class=\"ui-qr-authorization__popup-left ${title ? '' : '--flex'}\">\n\t\t\t\t\t\t\t${title\n\t\t\t\t\t\t\t\t? `<div class=\"ui-qr-authorization__popup-title --${titleSize}\">${title}</div>`\n\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t\t${this.content\n\t\t\t\t\t\t\t\t? `<div class=\"ui-qr-authorization__popup-text\">${this.content}</div>`\n\t\t\t\t\t\t\t\t: ''}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"ui-qr-authorization__popup-right ${this.title ? '' : '--no-margin'}\" data-role=\"ui-qr-authorization__qr-node\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t${this.renderFishingWarning()}\n\t\t\t\t\t${this.renderBottom()}\n\t\t\t\t</div>\n\t\t\t`;\n\n\t\t\tconst popupWidth = this.content ? 710 : 405;\n\t\t\tconst popupParam = {\n\t\t\t\tclassName: this.popupParam?.className ?? 'ui-qr-authorization__popup ui-qr-authorization__popup-scope',\n\t\t\t\twidth: this.popupParam?.width ?? popupWidth,\n\t\t\t\tcontent: container,\n\t\t\t\tcloseByEsc: this.popupParam?.closeByEsc ? this.popupParam?.className : true,\n\t\t\t\toverlay: this.popupParam?.overlay ?? false,\n\t\t\t\tautoHide: this.popupParam?.autoHide ?? true,\n\t\t\t\tcloseIcon: {\n\t\t\t\t\ttop: '14px',\n\t\t\t\t\tright: '15px',\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\tonPopupShow: () => {\n\t\t\t\t\t\tthis.createQrCodeImage();\n\t\t\t\t\t\tthis.ttlInterval = setInterval(() => {\n\t\t\t\t\t\t\tthis.createQrCodeImage();\n\t\t\t\t\t\t}, this.ttl * 1000);\n\n\t\t\t\t\t\tconst qrTarget = this.getPopup().getContentContainer().querySelector('[data-role=\"ui-qr-authorization__qr-node\"]');\n\n\t\t\t\t\t\tif (qrTarget)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tDom.append(this.getQrNode(), qrTarget);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonPopupClose: () => {\n\t\t\t\t\t\tclearInterval(this.ttlInterval);\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tpadding: 0,\n\t\t\t\tanimation: 'fading-slide',\n\t\t\t};\n\n\t\t\tthis.popup = new Popup(popupParam);\n\t\t}\n\n\t\treturn this.popup;\n\t}\n\n\trenderFishingWarning()\n\t{\n\t\tif (!this.showFishingWarning)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-qr-authorization__popup-warning\">\n\t\t\t\t<div class=\"ui-icon-set --shield-2-attention\"></div>\n\t\t\t\t${Loc.getMessage('UI_QR_AUTHORIZE_DONT_SHARE_QR_WARNING')}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderBottom(): HTMLElement | string\n\t{\n\t\tif (!this.showBottom)\n\t\t{\n\t\t\treturn '';\n\t\t}\n\n\t\tconst bottomText = Type.isObject(this.bottomText) ? this.bottomText?.text : this.bottomText;\n\t\tconst bottomTextSize = Type.isObject(this.bottomText) ? this.bottomText?.size : '';\n\n\t\treturn Tag.render`\n\t\t\t<div class=\"ui-qr-authorization__popup-bottom\">\n\t\t\t\t<div class=\"ui-qr-authorization__popup-bottom--title ${bottomTextSize ? '--' + bottomTextSize : ''}\">\n\t\t\t\t\t${bottomText}\n\t\t\t\t</div>\n\t\t\t\t${this.renderHelpLink()}\n\t\t\t</div>\n\t\t`;\n\t}\n\n\trenderHelpLink(): HTMLElement | string\n\t{\n\t\tif (this.helpCode)\n\t\t{\n\t\t\tconst onclick = (e) => {\n\t\t\t\te.preventDefault();\n\t\t\t\ttop.BX.Helper.show(`redirect=detail&code=${this.helpCode}`);\n\t\t\t};\n\n\t\t\treturn Tag.render`\n\t\t\t\t<a onclick=\"${onclick}\" class=\"ui-qr-authorization__popup-bottom--link\">\n\t\t\t\t\t${Loc.getMessage('UI_QR_AUTHORIZE_HELP')}\n\t\t\t\t</a onc>\n\t\t\t`;\n\t\t}\n\n\t\tif (this.helpLink)\n\t\t{\n\t\t\treturn Tag.render`\n\t\t\t\t<a href=\"${this.helpLink}\" class=\"ui-qr-authorization__popup-bottom--link\">\n\t\t\t\t\t${Loc.getMessage('UI_QR_AUTHORIZE_HELP')}\n\t\t\t\t</a>\n\t\t\t`;\n\t\t}\n\n\t\treturn '';\n\t}\n\n\tsuccess()\n\t{\n\t\tthis.clean();\n\t\tDom.addClass(this.getQrNode(), '--success');\n\t\tDom.append(this.getSuccessNode(), this.getQrNode());\n\t}\n\n\tgetSuccessNode(): HTMLElement\n\t{\n\t\tif (!this.successNode)\n\t\t{\n\t\t\tthis.successNode = Tag.render`\n\t\t\t\t<div class=\"ui-qr-authorization__popup-qr-success\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.successNode;\n\t}\n\n\tloading()\n\t{\n\t\tthis.clean();\n\t\tDom.addClass(this.getQrNode(), '--loading');\n\t\tDom.append(this.getLoadingNode(), this.getQrNode());\n\t\tthis.showLoader();\n\t}\n\n\tgetLoadingNode(): HTMLElement\n\t{\n\t\tif (!this.loadingNode)\n\t\t{\n\t\t\tthis.loadingNode = Tag.render`\n\t\t\t\t<div class=\"ui-qr-authorization__popup-qr-loading\"></div>\n\t\t\t`;\n\t\t}\n\n\t\treturn this.loadingNode;\n\t}\n\n\tgetLoader(): Loader\n\t{\n\t\tif (!this.loader)\n\t\t{\n\t\t\tthis.loader = new Loader({\n\t\t\t\ttarget: this.getLoadingNode(),\n\t\t\t\tsize: 150,\n\t\t\t});\n\t\t}\n\n\t\treturn this.loader;\n\t}\n\n\tshowLoader(): void\n\t{\n\t\tvoid this.getLoader().show();\n\t}\n\n\thideLoader(): void\n\t{\n\t\tvoid this.getLoader().hide();\n\t}\n\n\tclean()\n\t{\n\t\tDom.removeClass(this.getQrNode(), ['--loading', '--success']);\n\t\tDom.remove(this.getLoadingNode());\n\t\tDom.remove(this.getSuccessNode());\n\t\tDom.clean(this.getQrNode());\n\t\tthis.hideLoader();\n\t}\n\n\tshow()\n\t{\n\t\tif (!this.getPopup().isShown())\n\t\t{\n\t\t\tthis.loading();\n\t\t\tthis.getPopup().show();\n\t\t}\n\t}\n\n\tclose()\n\t{\n\t\tif (this.getPopup().isShown())\n\t\t{\n\t\t\tthis.clean();\n\t\t\tthis.getPopup().close();\n\t\t}\n\t}\n}\n"],"names":["QrAuthorization","constructor","options","title","content","bottomText","Loc","getMessage","showFishingWarning","showBottom","helpLink","helpCode","qr","popupParam","intent","popup","loader","ttl","Extension","getSettings","ttlInterval","qrNode","successNode","loadingNode","isSubscribe","createQrCodeImage","Dom","clean","getQrNode","Type","isString","QRCode","text","width","height","loading","Ajax","runAction","data","then","response","link","subscribe","catch","PULL","type","moduleId","command","callback","params","success","Tag","render","getPopup","isObject","titleSize","size","container","renderFishingWarning","renderBottom","popupWidth","className","closeByEsc","overlay","autoHide","closeIcon","top","right","events","onPopupShow","setInterval","qrTarget","getContentContainer","querySelector","append","onPopupClose","clearInterval","padding","animation","Popup","bottomTextSize","renderHelpLink","onclick","e","preventDefault","BX","Helper","show","addClass","getSuccessNode","getLoadingNode","showLoader","getLoader","Loader","target","hideLoader","hide","removeClass","remove","isShown","close"],"mappings":"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"}