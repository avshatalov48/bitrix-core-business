this.BX=this.BX||{};this.BX.UI=this.BX.UI||{};(function(e,t){"use strict";function i(e,i){if(!t.Type.isArray(e)){throw new TypeError("array is not a array")}if(!t.Type.isInteger(i)){throw new TypeError("index is not a integer")}const n=i<0?e.length+i:i;return e[n]}const n=new WeakMap;const r=Symbol("name");class s{constructor(e={}){this[r]="#unknown";this.children=[];n.set(this,{delayedChildren:[]});this.setName(e.name);n.get(this).scheme=e.scheme;this.setParent(e.parent);this.setChildren(e.children)}static get ELEMENT_NODE(){return 1}static get TEXT_NODE(){return 2}static get ROOT_NODE(){return 3}static get FRAGMENT_NODE(){return 4}static freezeProperty(e,t,i,n=true){Object.defineProperty(e,t,{value:i,writable:false,configurable:false,enumerable:n})}static makeNonEnumerableProperty(e,t){Object.defineProperty(e,t,{writable:false,enumerable:false,configurable:false})}static flattenChildren(e){if(t.Type.isArrayFilled(e)){return e.flatMap((e=>{if(e.getType()===s.FRAGMENT_NODE){return e.getChildren()}return e}))}return[]}setScheme(e,t){n.get(this).scheme=e}getScheme(){return n.get(this).scheme}getTagScheme(){return this.getScheme().getTagScheme(this.getName())}prepareCase(e){const t=this.getScheme();const i=t.getOutputTagCase();if(i==="upper"){return e.toUpperCase()}return e.toLowerCase()}setName(e){if(t.Type.isString(e)){this[r]=e.toLowerCase()}}getName(){return this[r]}getDisplayedName(){return this.prepareCase(this.getName())}setParent(e=null){const t=!this.hasParent()&&e;n.get(this).parent=e;if(t){this.onNodeDidMount()}}getParent(){return n.get(this).parent}getType(){return n.get(this).type}hasParent(){return Boolean(n.get(this).parent)}remove(){if(this.hasParent()){this.getParent().removeChild(this)}}setChildren(e){if(t.Type.isArray(e)){this.children=[];this.appendChild(...e)}}getChildren(){return[...this.children]}getLastChild(){return i(this.getChildren(),-1)}getLastChildOfType(e){return this.getChildren().reverse().find((t=>t.getType()===e))}getLastChildOfName(e){return this.getChildren().reverse().find((t=>t.getType()===s.ELEMENT_NODE&&t.getName()===e))}getFirstChild(){return i(this.getChildren(),0)}getFirstChildOfType(e){return this.getChildren().find((t=>t.getType()===e))}getFirstChildOfName(e){return this.getChildren().find((t=>t.getType()===s.ELEMENT_NODE&&t.getName()===e))}getPreviewsSibling(){if(this.hasParent()){const e=this.getParent().getChildren();const t=e.indexOf(this);if(t>0){return i(e,t-1)}}return null}getPreviewsSiblings(){if(this.hasParent()){const e=this.getParent().getChildren();const t=e.indexOf(this);return e.filter(((e,i)=>i<t))}return null}getNextSibling(){if(this.hasParent()){const e=this.getParent().getChildren();const t=e.indexOf(this);if(t!==-1&&t!==e.length){return i(e,t+1)}}return null}getNextSiblings(){if(this.hasParent()){const e=this.getParent().getChildren();const t=e.indexOf(this);return e.filter(((e,i)=>i>t))}return null}getChildrenCount(){return this.children.length}hasChildren(){return this.getChildrenCount()>0}isEmpty(){return this.getChildrenCount()===0}adjustChildren(){this.setChildren(this.getChildren())}setDelayedChildren(e){if(t.Type.isArray(e)){n.get(this).delayedChildren=e}}addDelayedChildren(e){if(t.Type.isArrayFilled(e)){this.setDelayedChildren([...this.getDelayedChildren(),...e])}}hasDelayedChildren(){return n.get(this).delayedChildren.length>0}getDelayedChildren(){return[...n.get(this).delayedChildren]}appendChild(...e){const t=s.flattenChildren(e);t.forEach((e=>{e.remove();e.setParent(this);this.children.push(e)}))}prependChild(...e){const t=s.flattenChildren(e);t.forEach((e=>{e.remove();e.setParent(this);this.children.unshift(e)}))}insertBefore(...e){if(this.hasParent()&&t.Type.isArrayFilled(e)){const t=this.getParent();const i=t.getChildren();const n=i.indexOf(this);const r=0;i.splice(n,r,...e);t.setChildren(i)}}insertAfter(...e){if(this.hasParent()&&t.Type.isArrayFilled(e)){const t=this.getParent();const i=t.getChildren();const n=i.indexOf(this);const r=n+1;const s=0;i.splice(r,s,...e);t.setChildren(i)}}propagateChild(...e){if(this.hasParent()){this.insertBefore(...e.filter((e=>!["#linebreak","#tab"].includes(e.getName()))))}else{this.addDelayedChildren(e)}}onNodeDidMount(){const e=this.getDelayedChildren();if(t.Type.isArrayFilled(e)){this.propagateChild(...e);this.setDelayedChildren([])}}removeChild(...e){this.children=this.children.reduce(((t,i)=>{if(e.includes(i)){i.setParent(null);return t}return[...t,i]}),[])}replaceChild(e,...t){this.children=this.children.flatMap((i=>{if(i===e){i.setParent(null);const e=s.flattenChildren(t);return e.map((e=>{e.remove();e.setParent(this);return e}))}return i}))}replace(...e){if(this.hasParent()){const t=this.getParent();t.replaceChild(this,...e)}}clone(e={}){const t=(()=>{if(e.deep){return this.getChildren().map((t=>t.clone(e)))}return[]})();return this.getScheme().createNode({name:this.getName(),parent:this.getParent(),children:t})}toPlainText(){return this.getChildren().map((e=>e.toPlainText())).join("")}getTextContent(){return this.toPlainText()}getPlainTextLength(){return this.toPlainText().length}removePreviewsSiblings(){const e=i=>{const n=i.getPreviewsSiblings();if(t.Type.isArray(n)){n.forEach((e=>{e.remove()}))}const r=i.getParent();if(r){e(r)}};e(this)}removeNextSiblings(){const e=i=>{const n=i.getNextSiblings();if(t.Type.isArray(n)){n.forEach((e=>{e.remove()}))}const r=i.getParent();if(r){e(r)}};e(this)}findByTextIndex(e){let t=0;let i=0;let n=0;const r=s.flattenAst(this).find((r=>{if(r.getName()==="#text"||r.getName()==="#linebreak"||r.getName()==="#tab"){i=t;n=i+r.getLength();t=n;return e>=i&&n>=e}return false}));if(r){return{node:r,startIndex:i,endIndex:n}}return null}split(e){const{offset:t,byWord:i=false}=e;const n=this.getPlainTextLength();const r=(()=>{if(n===t){return this.clone({deep:true})}if(t<=0||t>n){return null}const e=this.clone({deep:true});const{node:r,startIndex:s}=e.findByTextIndex(t);const[o,l]=r.split({offset:t-s,byWord:i});if(o){r.replace(o);o.removeNextSiblings()}else if(l){l.removeNextSiblings();l.remove()}return e})();const s=(()=>{if(n===t){return null}if(t===0){return this.clone({deep:true})}const e=this.clone({deep:true});const{node:r,startIndex:s}=e.findByTextIndex(t);const[o,l]=r.split({offset:t-s,byWord:i});if(l){r.replace(l);l.removePreviewsSiblings()}else if(o){o.removePreviewsSiblings();if(o.hasParent()){const e=o.getParent();o.remove();if(e.getChildrenCount()===0){e.remove()}}}return e})();return[r,s]}static flattenAst(e){const t=[];const i=e=>{t.push(e);if(e.hasChildren()){e.getChildren().forEach((e=>{i(e)}))}};if(e.hasChildren()){e.getChildren().forEach((e=>{i(e)}))}return t}toJSON(){return{name:this.getName(),children:this.getChildren().map((e=>e.toJSON()))}}}const o=Symbol("void");class l extends s{constructor(e={}){super(e);this.attributes={};this.value="";this[o]=false;n.get(this).type=s.ELEMENT_NODE;const t=this.getTagScheme();this[o]=t.isVoid();this.setValue(e.value);this.setAttributes(e.attributes)}setScheme(e,t){this.getChildren().forEach((i=>{i.setScheme(e,t)}));if(e.isAllowedTag(this.getName())){super.setScheme(e);const t=this.getTagScheme();this[o]=t.isVoid()}else{super.setScheme(e);t(this,e)}}filterChildren(e){const t={resolved:[],unresolved:[]};const i=this.getScheme();e.forEach((e=>{if(i.isChildAllowed(this,e)){t.resolved.push(e)}else{t.unresolved.push(e)}}));return t}convertChildren(e){const t=this.getTagScheme();const i=t.getChildConverter();if(i){const t=this.getScheme();return e.map((e=>i(e,t)))}return e}setValue(e){if(t.Type.isString(e)||t.Type.isNumber(e)||t.Type.isBoolean(e)){this.value=e}}getValue(){return this.value}isVoid(){return this[o]}canBeEmpty(){return this.getTagScheme().canBeEmpty()}hasGroup(e){return this.getTagScheme().hasGroup(e)}setAttributes(e){if(t.Type.isPlainObject(e)){const t=Object.entries(e).map((([e,t])=>[e.toLowerCase(),t]));this.attributes=Object.fromEntries(t)}}setAttribute(e,i){if(t.Type.isStringFilled(e)){const n=e.toLowerCase();if(t.Type.isNil(i)){delete this.attributes[n]}else{this.attributes[n]=i}}}getAttribute(e){if(t.Type.isString(e)){return this.attributes[e.toLowerCase()]}return null}getAttributes(){return{...this.attributes}}appendChild(...e){const i=s.flattenChildren(e);const n=this.filterChildren(i);const r=this.convertChildren(n.resolved);r.forEach((e=>{e.remove();e.setParent(this);this.children.push(e)}));if(t.Type.isArrayFilled(n.unresolved)){if(this.getScheme().isAllowedUnresolvedNodesHoisting()){this.propagateChild(...n.unresolved)}else{n.unresolved.forEach((e=>{e.remove()}))}}}prependChild(...e){const i=s.flattenChildren(e);const n=this.filterChildren(i);const r=this.convertChildren(n.resolved);r.forEach((e=>{e.remove();e.setParent(this);this.children.unshift(e)}));if(t.Type.isArrayFilled(n.unresolved)){if(this.getScheme().isAllowedUnresolvedNodesHoisting()){this.propagateChild(...n.unresolved)}else{n.unresolved.forEach((e=>{e.remove()}))}}}replaceChild(e,...t){this.children=this.children.flatMap((i=>{if(i===e){i.setParent(null);const e=s.flattenChildren(t);const n=this.filterChildren(e);const r=this.convertChildren(n.resolved);return r.map((e=>{e.remove();e.setParent(this);return e}))}return i}))}toStringValue(){const e=this.getValue();return e?`=${e}`:""}toStringAttributes(){return Object.entries(this.getAttributes()).map((([e,t])=>{const i=this.prepareCase(e);return t?`${i}=${t}`:i})).join(" ")}getContent(){return this.getChildren().map((e=>e.toString())).join("")}getOpeningTag(){const e=this.getDisplayedName();const i=this.toStringValue();const n=this.toStringAttributes();const r=t.Type.isStringFilled(n)?` ${n}`:"";return`[${e}${i}${r}]`}getClosingTag(){return`[/${this.getDisplayedName()}]`}clone(e={}){const t=(()=>{if(e.deep){return this.getChildren().map((t=>t.clone(e)))}return[]})();return this.getScheme().createElement({name:this.getName(),void:this.isVoid(),value:this.getValue(),attributes:{...this.getAttributes()},children:t})}splitByChildIndex(e){if(!t.Type.isNumber(e)){throw new TypeError("index is not a number")}const i=this.getChildrenCount();if(e<0||e>i){throw new TypeError(`index '${e}' is out of range ${0}-${i}`)}const n=(()=>{if(e===i){return this}if(e===0){return null}const t=this.getChildren().filter(((t,i)=>i<e));const n=this.clone();n.setChildren(t);return n})();const r=(()=>{if(e===0){return this}if(e===i){return null}const t=this.getChildren();const n=this.clone();n.setChildren(t);return n})();if(n&&r){this.replace(n,r)}return[n,r]}getTagScheme(){return super.getTagScheme()}toString(){const e=this.getTagScheme();const i=e.getStringifier();if(t.Type.isFunction(i)){const e=this.getScheme();return i(this,e)}const n=this.getOpeningTag();const r=this.getContent();if(this.isVoid()){return`${n}${r}`}const s=this.getClosingTag();return`${n}${r}${s}`}toJSON(){return{...super.toJSON(),value:this.getValue(),attributes:this.getAttributes(),void:this.isVoid()}}}class a extends l{constructor(e){super({...e,name:"#root"});n.get(this).type=s.ROOT_NODE;a.makeNonEnumerableProperty(this,"value");a.makeNonEnumerableProperty(this,"attributes");a.freezeProperty(this,r,"#root")}setScheme(e,t){s.flattenAst(this).forEach((i=>{i.setScheme(e,t)}));super.setScheme(e);s.flattenAst(this).forEach((e=>{e.adjustChildren()}))}getParent(){return null}clone(e={}){const t=(()=>{if(e.deep){return this.getChildren().map((t=>t.clone(e)))}return[]})();return this.getScheme().createRoot({children:t})}toString(){return this.getChildren().map((e=>e.toString())).join("")}toJSON(){return this.getChildren().map((e=>e.toJSON()))}}class h extends l{constructor(e){super({...e,name:"#fragment"});n.get(this).type=s.FRAGMENT_NODE;h.makeNonEnumerableProperty(this,"value");h.makeNonEnumerableProperty(this,"attributes");h.freezeProperty(this,r,"#fragment")}clone(e={}){const t=(()=>{if(e.deep){return this.getChildren().map((t=>t.clone(e)))}return[]})();return this.getScheme().createFragment({children:t})}}const d=Symbol("content");class c extends s{constructor(e={}){const i=t.Type.isString(e)?{content:e}:e;super(i);this[r]="#text";this[d]="";n.get(this).type=s.TEXT_NODE;this.setContent(i.content);s.makeNonEnumerableProperty(this,"children")}static isTextNodeContent(e){return t.Type.isString(e)||t.Type.isNumber(e)}static decodeSpecialChars(e){return String(e).replaceAll("&#91;","[").replaceAll("&#93;","]")}setName(e){}setContent(e){if(c.isTextNodeContent(e)){this[d]=c.decodeSpecialChars(e)}}getContent(){return c.decodeSpecialChars(this[d])}adjustChildren(){}getLength(){return String(this[d]).length}isEmpty(){return this.getLength()===0}clone(e){return this.getScheme().createText({content:this.getContent()})}split(e){const{offset:i,byWord:n=false}=e;if(!t.Type.isNumber(i)){throw new TypeError("offset is not a number")}const r=this.getLength();if(i<0||i>r){throw new TypeError(`offset '${i}' is out of range ${0}-${r}`)}const s=this.getContent();const o=(()=>{if(n&&i!==r){const e=s.lastIndexOf(" ",i);if(e!==-1){if(i>e){return e+1}return e}return 0}return i})();const l=(()=>{if(o===r){return this}if(o===0){return null}const e=this.clone();e.setContent(s.slice(0,o));return e})();const a=(()=>{if(o===0){return this}if(o===r){return null}const e=this.clone();e.setContent(s.slice(o,r));return e})();return[l,a]}toString(){return this.getContent()}toPlainText(){return this.toString()}toJSON(){return{name:this.getName(),content:this.toString()}}}class g extends c{constructor(e={}){super(e);this[r]="#linebreak";this[d]="\n"}setContent(e){}clone(e){return this.getScheme().createNewLine()}}class u extends c{constructor(e={}){super(e);this[r]="#tab";this[d]="\t"}setContent(e){}clone(e){return this.getScheme().createTab()}}class p{constructor(e){this.name=[];this.group=[];this.stringifier=null;this.serializer=null;this.allowedIn=[];if(!t.Type.isPlainObject(e)){throw new TypeError("options is not a object")}if(!t.Type.isArrayFilled(this.name)&&!t.Type.isArrayFilled(e.name)&&!t.Type.isStringFilled(e.name)){throw new TypeError("options.name is not specified")}this.setGroup(e.group);this.setName(e.name);this.setAllowedIn(e.allowedIn);this.setStringifier(e.stringify);this.setSerializer(e.serialize)}setName(e){if(t.Type.isStringFilled(e)){this.name=[e]}if(t.Type.isArrayFilled(e)){this.name=e}}getName(){return[...this.name]}removeName(...e){this.setName(this.getName().filter((t=>!e.includes(t))))}setGroup(e){if(t.Type.isStringFilled(e)){this.group=[e]}if(t.Type.isArrayFilled(e)){this.group=e}}removeGroup(...e){this.setGroup(this.getGroup().filter((t=>!e.includes(t))))}getGroup(){return[...this.group]}hasGroup(e){return this.getGroup().includes(e)}setStringifier(e){if(t.Type.isFunction(e)||t.Type.isNull(e)){this.stringifier=e}}getStringifier(){return this.stringifier}setSerializer(e){if(t.Type.isFunction(e)||t.Type.isNull(e)){this.serializer=e}}getSerializer(){return this.serializer}setAllowedIn(e){if(t.Type.isArray(e)){this.allowedIn=[...e]}}getAllowedIn(){return[...this.allowedIn]}isAllowedIn(e){const i=this.getAllowedIn();return!t.Type.isArrayFilled(i)||t.Type.isArrayFilled(i)&&i.includes(e)}}const m=Symbol("@canBeEmpty");const f=Symbol("@void");class C extends p{constructor(e){super(e);this[f]=false;this[m]=true;this.childConverter=null;this.allowedChildren=[];this.setVoid(e.void);this.setCanBeEmpty(e.canBeEmpty);this.setChildConverter(e.convertChild);this.setAllowedChildren(e.allowedChildren)}static defaultBlockStringifier(e){const t=(()=>{const t=e.getPreviewsSibling();return t&&t.getName()!=="#linebreak"})();const i=(()=>{const t=e.getFirstChild();return t&&t.getName()!=="#linebreak"})();const n=(()=>{const t=e.getLastChild();return t&&t.getName()!=="#linebreak"})();const r=(()=>{const t=e.getNextSibling();return t&&t.getName()!=="#linebreak"&&!(t.getType()===s.ELEMENT_NODE&&!t.getTagScheme().getGroup().includes("#inline"))})();const o=e.getOpeningTag();const l=e.getContent();const a=e.getClosingTag();return[t?"\n":"",o,i?"\n":"",l,n?"\n":"",a,r?"\n":""].join("")}setName(e){super.setName(e)}setVoid(e){if(t.Type.isBoolean(e)){this[f]=e}}isVoid(){return this[f]}setCanBeEmpty(e){if(t.Type.isBoolean(e)){this[m]=e}}canBeEmpty(){return this[m]}setChildConverter(e){if(t.Type.isFunction(e)||t.Type.isNull(e)){this.childConverter=e}}getChildConverter(){return this.childConverter}setAllowedChildren(e){if(t.Type.isArray(e)){this.allowedChildren=e}}getAllowedChildren(){return this.allowedChildren}isChildAllowed(e){const i=this.getAllowedChildren();return!t.Type.isArrayFilled(i)||t.Type.isArrayFilled(i)&&i.includes(e)}}class y{static isNodeScheme(e){return e instanceof p}static getTagName(e){if(t.Type.isString(e)){return e}if(t.Type.isObject(e)&&e instanceof s){return e.getName()}return null}constructor(e={}){this.tagSchemes=[];this.outputTagCase=y.Case.LOWER;this.unresolvedNodesHoisting=true;if(!t.Type.isPlainObject(e)){throw new TypeError("options is not a object")}this.setTagSchemes(e.tagSchemes);this.setOutputTagCase(e.outputTagCase);this.setUnresolvedNodesHoisting(e.unresolvedNodesHoisting)}setTagSchemes(e){if(t.Type.isArray(e)){const t=e.findIndex((e=>!y.isNodeScheme(e)));if(t>-1){throw new TypeError(`tagScheme #${t} is not TagScheme instance`)}this.tagSchemes=[...e]}}setTagScheme(...e){const i=e.findIndex((e=>!y.isNodeScheme(e)));if(i>-1){throw new TypeError(`tagScheme #${i} is not TagScheme instance`)}const n=e.flatMap((e=>e.getName()));const r=this.getTagSchemes();r.forEach((e=>{e.removeName(...n)}));const s=r.filter((e=>t.Type.isArrayFilled(e.getName())));this.setTagSchemes([...s,...e])}getTagSchemes(){return[...this.tagSchemes]}getTagScheme(e){const i=y.getTagName(e);if(t.Type.isString(i)){return this.getTagSchemes().find((e=>e.getName().includes(i.toLowerCase())))}return null}setOutputTagCase(e){if(!t.Type.isNil(e)){const t=Object.values(y.Case);if(t.includes(e)){this.outputTagCase=e}else{throw new TypeError(`'${e}' is not allowed`)}}}getOutputTagCase(){return this.outputTagCase}setUnresolvedNodesHoisting(e){if(!t.Type.isNil(e)){if(t.Type.isBoolean(e)){this.unresolvedNodesHoisting=e}else{throw new TypeError(`'${e}' is not allowed value`)}}}isAllowedUnresolvedNodesHoisting(){return this.unresolvedNodesHoisting}getAllowedTags(){return this.getTagSchemes().flatMap((e=>e.getName()))}isAllowedTag(e){const t=this.getAllowedTags();const i=y.getTagName(e);return t.includes(String(i).toLowerCase())}isVoid(e){const t=this.getTagScheme(e);if(t){return t.isVoid()}return false}isElement(e){return e&&e.getType()===s.ELEMENT_NODE}isRoot(e){return e&&e.getName()==="#root"}isFragment(e){return e&&e.getName()==="#fragment"}isAnyText(e){return e&&e.getType()===s.TEXT_NODE}isText(e){return e&&e.getName()==="#text"}isNewLine(e){return e&&e.getName()==="#linebreak"}isTab(e){return e&&e.getName()==="#tab"}getParentChildMap(){const e=this.getTagSchemes();const t=new Map;e.forEach((e=>{const i=e.getGroup();const n=[...e.getName(),...i,...e.isVoid()?["#void"]:[]];const r=e.getAllowedChildren();const s=e.getAllowedIn();n.forEach((n=>{if(!t.has(n)){t.set(n,{allowedChildren:new Set,allowedIn:new Set,aliases:new Set})}const o=t.get(n);const l={allowedChildren:new Set([...o.allowedChildren,...r]),allowedIn:new Set([...o.allowedIn,...s]),aliases:new Set([n,...i,...e.isVoid()?["#void"]:[]])};t.set(n,l)}))}));return t}isChildAllowed(e,i){const n=y.getTagName(e);const r=y.getTagName(i);if(t.Type.isStringFilled(n)&&t.Type.isStringFilled(r)){if(n==="#fragment"){return true}const e=this.getParentChildMap();const i=e.get(n);const s=e.get(r);if(t.Type.isPlainObject(i)&&t.Type.isPlainObject(s)){return(i.allowedChildren.size===0||[...s.aliases].some((e=>i.allowedChildren.has(e))))&&(s.allowedIn.size===0||[...i.aliases].some((e=>s.allowedIn.has(e))))}}return false}createRoot(e={}){return new a({...e,scheme:this})}createNode(e){if(!t.Type.isPlainObject(e)){throw new TypeError("options is not a object")}if(!t.Type.isStringFilled(e.name)){throw new TypeError("options.name is required")}if(!this.isAllowedTag(e.name)){throw new TypeError(`Scheme for "${e.name}" tag is not specified.`)}return new s({...e,scheme:this})}createElement(e={}){if(!t.Type.isPlainObject(e)){throw new TypeError("options is not a object")}if(!t.Type.isStringFilled(e.name)){throw new TypeError("options.name is required")}if(!this.isAllowedTag(e.name)){throw new TypeError(`Scheme for "${e.name}" tag is not specified.`)}return new l({...e,scheme:this})}createText(e={}){const i=t.Type.isPlainObject(e)?e:{content:e};return new c({...i,scheme:this})}createNewLine(e={}){const i=t.Type.isPlainObject(e)?e:{content:e};return new g({...i,scheme:this})}createTab(e={}){const i=t.Type.isPlainObject(e)?e:{content:e};return new u({...i,scheme:this})}createFragment(e={}){return new h({...e,scheme:this})}}y.Case={LOWER:"lower",UPPER:"upper"};class T extends p{constructor(e){super({...e,name:["#text"]})}}class w extends p{constructor(e={}){super({...e,name:["#linebreak"]})}}class S extends p{constructor(e){super({...e,name:["#tab"]})}}class N extends y{constructor(e={}){super({tagSchemes:[new C({name:["b","u","i","s"],group:["#inline","#format"],allowedChildren:["#text","#linebreak","#inline"],canBeEmpty:false}),new C({name:["span"],group:["#inline"],allowedChildren:["#text","#linebreak","#inline"],canBeEmpty:false}),new C({name:["img"],group:["#inlineBlock"],allowedChildren:["#text"],canBeEmpty:false}),new C({name:["url"],group:["#inline"],allowedChildren:["#text","#format","img"],canBeEmpty:false}),new C({name:"p",group:["#block"],allowedChildren:["#text","#linebreak","#inline","#inlineBlock"],stringify:C.defaultBlockStringifier,allowedIn:["#root","#shadowRoot"]}),new C({name:"list",group:["#block"],allowedChildren:["*"],stringify:C.defaultBlockStringifier,allowedIn:["#root","#shadowRoot"],canBeEmpty:false}),new C({name:["*"],allowedChildren:["#text","#linebreak","#inline","#inlineBlock"],stringify:e=>{const t=e.getOpeningTag();const i=e.getContent().trim();return`${t}${i}`},allowedIn:["list"]}),new C({name:"table",group:["#block"],allowedChildren:["tr"],stringify:C.defaultBlockStringifier,allowedIn:["#root","quote","spoiler"],canBeEmpty:false}),new C({name:"tr",allowedChildren:["th","td"],allowedIn:["table"],canBeEmpty:false}),new C({name:["th","td"],group:["#shadowRoot"],allowedChildren:["#text","#linebreak","#inline","#inlineBlock","#block"],allowedIn:["tr"]}),new C({name:"quote",group:["#block","#shadowRoot"],allowedChildren:["#text","#linebreak","#inline","#inlineBlock","#block"],allowedIn:["#root","#shadowRoot"]}),new C({name:"code",group:["#block"],stringify:C.defaultBlockStringifier,allowedChildren:["#text","#linebreak","#tab"],allowedIn:["#root","#shadowRoot"]}),new C({name:"video",group:["#inlineBlock"],allowedChildren:["#text"],allowedIn:["#root","#shadowRoot","p"],canBeEmpty:false}),new C({name:"spoiler",group:["#block","#shadowRoot"],allowedChildren:["#text","#linebreak","#inline","#inlineBlock","#block"],allowedIn:["#root","#shadowRoot"]}),new C({name:["user","project","department"],group:["#inline","#mention"],allowedChildren:["#text","#format"],canBeEmpty:false}),new C({name:"disk",group:["#inline"],void:true}),new C({name:["#root"]}),new C({name:["#fragment"]}),new C({name:["#text"]}),new C({name:["#linebreak"]}),new C({name:["#tab"],stringify:()=>""})],outputTagCase:y.Case.LOWER,unresolvedNodesHoisting:true});if(t.Type.isPlainObject(e)){this.setTagSchemes(e.tagSchemes);this.setOutputTagCase(e.outputTagCase);this.setUnresolvedNodesHoisting(e.unresolvedNodesHoisting)}}}e.BBCodeNode=s;e.BBCodeRootNode=a;e.BBCodeElementNode=l;e.BBCodeFragmentNode=h;e.BBCodeNewLineNode=g;e.BBCodeTabNode=u;e.BBCodeTextNode=c;e.BBCodeScheme=y;e.BBCodeTagScheme=C;e.BBCodeTextScheme=T;e.BBCodeNewLineScheme=w;e.BBCodeTabScheme=S;e.DefaultBBCodeScheme=N})(this.BX.UI.Bbcode=this.BX.UI.Bbcode||{},BX);
//# sourceMappingURL=model.bundle.map.js